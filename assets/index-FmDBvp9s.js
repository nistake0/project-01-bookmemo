import{r as J,j as w,B as dt,T as lt,a as ue,b as ye,C as Tc,c as Sc,d as lT,e as mi,R as ng,D as is,f as as,g as os,A as Cc,h as ss,i as rg,k as Xa,G as Ie,l as Du,m as dp,M as cT,I as yu,u as fT,n as _2,S as pp,E as gp,o as x2,p as hT,P as Uu,q as Fx,F as dT,s as pT,t as jx,v as _u,w as xu,x as Eu,y as Mn,z as gT,H as vT,J as zx,K as Hx,L as mT,N as yT,O as nc,Q as _T,U as xT,V as ET,W as AT,X as wT}from"./mui-vendor-DnD_TY-I.js";import{r as TT,a as ST}from"./react-vendor-DJG_os-6.js";import{u as Vc,a as E2,b as Gx,c as CT,B as IT,d as qx,R as bT,e as Wi,N as Xx}from"./utils-vendor-Ik1_hWMY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var H1={exports:{}},rc={},G1={exports:{}},q1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function RT(){return A2||(A2=1,function(n){function t(rt,ft){var yt=rt.length;rt.push(ft);t:for(;0<yt;){var ne=yt-1>>>1,le=rt[ne];if(0<i(le,ft))rt[ne]=ft,rt[yt]=le,yt=ne;else break t}}function e(rt){return rt.length===0?null:rt[0]}function r(rt){if(rt.length===0)return null;var ft=rt[0],yt=rt.pop();if(yt!==ft){rt[0]=yt;t:for(var ne=0,le=rt.length,gn=le>>>1;ne<gn;){var Wt=2*(ne+1)-1,It=rt[Wt],ke=Wt+1,bn=rt[ke];if(0>i(It,yt))ke<le&&0>i(bn,It)?(rt[ne]=bn,rt[ke]=yt,ne=ke):(rt[ne]=It,rt[Wt]=yt,ne=Wt);else if(ke<le&&0>i(bn,yt))rt[ne]=bn,rt[ke]=yt,ne=ke;else break t}}return ft}function i(rt,ft){var yt=rt.sortIndex-ft.sortIndex;return yt!==0?yt:rt.id-ft.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,l=u.now();n.unstable_now=function(){return u.now()-l}}var f=[],d=[],g=1,m=null,y=3,x=!1,A=!1,S=!1,I=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function V(rt){for(var ft=e(d);ft!==null;){if(ft.callback===null)r(d);else if(ft.startTime<=rt)r(d),ft.sortIndex=ft.expirationTime,t(f,ft);else break;ft=e(d)}}function H(rt){if(S=!1,V(rt),!A)if(e(f)!==null)A=!0,q||(q=!0,z());else{var ft=e(d);ft!==null&&Ft(H,ft.startTime-rt)}}var q=!1,N=-1,b=5,P=-1;function B(){return I?!0:!(n.unstable_now()-P<b)}function F(){if(I=!1,q){var rt=n.unstable_now();P=rt;var ft=!0;try{t:{A=!1,S&&(S=!1,O(N),N=-1),x=!0;var yt=y;try{e:{for(V(rt),m=e(f);m!==null&&!(m.expirationTime>rt&&B());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,y=m.priorityLevel;var le=ne(m.expirationTime<=rt);if(rt=n.unstable_now(),typeof le=="function"){m.callback=le,V(rt),ft=!0;break e}m===e(f)&&r(f),V(rt)}else r(f);m=e(f)}if(m!==null)ft=!0;else{var gn=e(d);gn!==null&&Ft(H,gn.startTime-rt),ft=!1}}break t}finally{m=null,y=yt,x=!1}ft=void 0}}finally{ft?z():q=!1}}}var z;if(typeof k=="function")z=function(){k(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Ot=U.port2;U.port1.onmessage=F,z=function(){Ot.postMessage(null)}}else z=function(){M(F,0)};function Ft(rt,ft){N=M(function(){rt(n.unstable_now())},ft)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(rt){rt.callback=null},n.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<rt?Math.floor(1e3/rt):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(rt){switch(y){case 1:case 2:case 3:var ft=3;break;default:ft=y}var yt=y;y=ft;try{return rt()}finally{y=yt}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(rt,ft){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var yt=y;y=rt;try{return ft()}finally{y=yt}},n.unstable_scheduleCallback=function(rt,ft,yt){var ne=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?ne+yt:ne):yt=ne,rt){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=yt+le,rt={id:g++,callback:ft,priorityLevel:rt,startTime:yt,expirationTime:le,sortIndex:-1},yt>ne?(rt.sortIndex=yt,t(d,rt),e(f)===null&&rt===e(d)&&(S?(O(N),N=-1):S=!0,Ft(H,yt-ne))):(rt.sortIndex=le,t(f,rt),A||x||(A=!0,q||(q=!0,z()))),rt},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(rt){var ft=y;return function(){var yt=y;y=ft;try{return rt.apply(this,arguments)}finally{y=yt}}}}(q1)),q1}var w2;function OT(){return w2||(w2=1,G1.exports=RT()),G1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function DT(){if(T2)return rc;T2=1;var n=OT(),t=TT(),e=ST();function r(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,c=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(c=s.return),o=s.return;while(o)}return s.tag===3?c:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(r(188))}function f(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(r(188));return s!==o?null:o}for(var c=o,h=s;;){var v=c.return;if(v===null)break;var _=v.alternate;if(_===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===c)return l(v),o;if(_===h)return l(v),s;_=_.sibling}throw Error(r(188))}if(c.return!==h.return)c=v,h=_;else{for(var C=!1,R=v.child;R;){if(R===c){C=!0,c=v,h=_;break}if(R===h){C=!0,h=v,c=_;break}R=R.sibling}if(!C){for(R=_.child;R;){if(R===c){C=!0,c=_,h=v;break}if(R===h){C=!0,h=_,c=v;break}R=R.sibling}if(!C)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:s}function d(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=d(o),s!==null)return s;o=o.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),k=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var U=Symbol.for("react.client.reference");function Ot(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===U?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case A:return"Fragment";case I:return"Profiler";case S:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList";case P:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case k:return(o.displayName||"Context")+".Provider";case O:return(o._context.displayName||"Context")+".Consumer";case V:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return s=o.displayName||null,s!==null?s:Ot(o.type)||"Memo";case b:s=o._payload,o=o._init;try{return Ot(o(s))}catch{}}return null}var Ft=Array.isArray,rt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},ne=[],le=-1;function gn(o){return{current:o}}function Wt(o){0>le||(o.current=ne[le],ne[le]=null,le--)}function It(o,s){le++,ne[le]=o.current,o.current=s}var ke=gn(null),bn=gn(null),qr=gn(null),xi=gn(null);function _s(o,s){switch(It(qr,s),It(bn,o),It(ke,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?Wy(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=Wy(s),o=Yy(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Wt(ke),It(ke,o)}function sa(){Wt(ke),Wt(bn),Wt(qr)}function ua(o){o.memoizedState!==null&&It(xi,o);var s=ke.current,c=Yy(s,o.type);s!==c&&(It(bn,o),It(ke,c))}function Ei(o){bn.current===o&&(Wt(ke),Wt(bn)),xi.current===o&&(Wt(xi),$l._currentValue=yt)}var ho=Object.prototype.hasOwnProperty,po=n.unstable_scheduleCallback,go=n.unstable_cancelCallback,Yu=n.unstable_shouldYield,tf=n.unstable_requestPaint,cr=n.unstable_now,Hd=n.unstable_getCurrentPriorityLevel,Ku=n.unstable_ImmediatePriority,xs=n.unstable_UserBlockingPriority,vo=n.unstable_NormalPriority,Gd=n.unstable_LowPriority,Es=n.unstable_IdlePriority,Qu=n.log,ef=n.unstable_setDisableYieldValue,Re=null,re=null;function tr(o){if(typeof Qu=="function"&&ef(o),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(Re,o)}catch{}}var Rn=Math.clz32?Math.clz32:mo,nf=Math.log,qd=Math.LN2;function mo(o){return o>>>=0,o===0?32:31-(nf(o)/qd|0)|0}var yo=256,_o=4194304;function Nr(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function As(o,s,c){var h=o.pendingLanes;if(h===0)return 0;var v=0,_=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var R=h&134217727;return R!==0?(h=R&~_,h!==0?v=Nr(h):(C&=R,C!==0?v=Nr(C):c||(c=R&~o,c!==0&&(v=Nr(c))))):(R=h&~_,R!==0?v=Nr(R):C!==0?v=Nr(C):c||(c=h&~o,c!==0&&(v=Nr(c)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,c=s&-s,_>=c||_===32&&(c&4194048)!==0)?s:v}function xo(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function $u(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zu(){var o=yo;return yo<<=1,(yo&4194048)===0&&(yo=256),o}function Ju(){var o=_o;return _o<<=1,(_o&62914560)===0&&(_o=4194304),o}function Ai(o){for(var s=[],c=0;31>c;c++)s.push(o);return s}function wi(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function tl(o,s,c,h,v,_){var C=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var R=o.entanglements,j=o.expirationTimes,K=o.hiddenUpdates;for(c=C&~c;0<c;){var nt=31-Rn(c),ot=1<<nt;R[nt]=0,j[nt]=-1;var $=K[nt];if($!==null)for(K[nt]=null,nt=0;nt<$.length;nt++){var Z=$[nt];Z!==null&&(Z.lane&=-536870913)}c&=~ot}h!==0&&Xr(o,h,0),_!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=_&~(C&~s))}function Xr(o,s,c){o.pendingLanes|=s,o.suspendedLanes&=~s;var h=31-Rn(s);o.entangledLanes|=s,o.entanglements[h]=o.entanglements[h]|1073741824|c&4194090}function el(o,s){var c=o.entangledLanes|=s;for(o=o.entanglements;c;){var h=31-Rn(c),v=1<<h;v&s|o[h]&s&&(o[h]|=s),c&=~v}}function la(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ws(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ca(){var o=ft.p;return o!==0?o:(o=window.event,o===void 0?32:d2(o.type))}function rf(o,s){var c=ft.p;try{return ft.p=o,s()}finally{ft.p=c}}var we=Math.random().toString(36).slice(2),qe="__reactFiber$"+we,Ve="__reactProps$"+we,fr="__reactContainer$"+we,nl="__reactEvents$"+we,Xd="__reactListeners$"+we,fa="__reactHandles$"+we,af="__reactResources$"+we,Eo="__reactMarker$"+we;function ha(o){delete o[qe],delete o[Ve],delete o[nl],delete o[Xd],delete o[fa]}function Ti(o){var s=o[qe];if(s)return s;for(var c=o.parentNode;c;){if(s=c[fr]||c[qe]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(o=Zy(o);o!==null;){if(c=o[qe])return c;o=Zy(o)}return s}o=c,c=o.parentNode}return null}function Wr(o){if(o=o[qe]||o[fr]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function Yr(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(r(33))}function Vn(o){var s=o[af];return s||(s=o[af]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ne(o){o[Eo]=!0}var rl=new Set,Ts={};function Mr(o,s){Si(o,s),Si(o+"Capture",s)}function Si(o,s){for(Ts[o]=s,o=0;o<s.length;o++)rl.add(s[o])}var of=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sf={},Ao={};function uf(o){return ho.call(Ao,o)?!0:ho.call(sf,o)?!1:of.test(o)?Ao[o]=!0:(sf[o]=!0,!1)}function da(o,s,c){if(uf(s))if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+c)}}function Kr(o,s,c){if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+c)}}function vn(o,s,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(s,c,""+h)}}var wo,lf;function Ci(o){if(wo===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);wo=s&&s[1]||"",lf=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wo+o+lf}var Ss=!1;function Cs(o,s){if(!o||Ss)return"";Ss=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(Z){var $=Z}Reflect.construct(o,[],ot)}else{try{ot.call()}catch(Z){$=Z}o.call(ot.prototype)}}else{try{throw Error()}catch(Z){$=Z}(ot=o())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(Z){if(Z&&$&&typeof Z.stack=="string")return[Z.stack,$.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),C=_[0],R=_[1];if(C&&R){var j=C.split(`
`),K=R.split(`
`);for(v=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;v<K.length&&!K[v].includes("DetermineComponentFrameRoot");)v++;if(h===j.length||v===K.length)for(h=j.length-1,v=K.length-1;1<=h&&0<=v&&j[h]!==K[v];)v--;for(;1<=h&&0<=v;h--,v--)if(j[h]!==K[v]){if(h!==1||v!==1)do if(h--,v--,0>v||j[h]!==K[v]){var nt=`
`+j[h].replace(" at new "," at ");return o.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",o.displayName)),nt}while(1<=h&&0<=v);break}}}finally{Ss=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?Ci(c):""}function il(o){switch(o.tag){case 26:case 27:case 5:return Ci(o.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return Cs(o.type,!1);case 11:return Cs(o.type.render,!1);case 1:return Cs(o.type,!0);case 31:return Ci("Activity");default:return""}}function Is(o){try{var s="";do s+=il(o),o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Un(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function al(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wd(o){var s=al(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),h=""+o[s];if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,_=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(C){h=""+C,_.call(this,C)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function bs(o){o._valueTracker||(o._valueTracker=Wd(o))}function ol(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return o&&(h=al(o)?o.checked?"true":"false":o.value),o=h,o!==c?(s.setValue(o),!0):!1}function To(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Yd=/[\n"\\]/g;function Ue(o){return o.replace(Yd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function er(o,s,c,h,v,_,C,R){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Un(s)):o.value!==""+Un(s)&&(o.value=""+Un(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?pa(o,C,Un(s)):c!=null?pa(o,C,Un(c)):h!=null&&o.removeAttribute("value"),v==null&&_!=null&&(o.defaultChecked=!!_),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+Un(R):o.removeAttribute("name")}function So(o,s,c,h,v,_,C,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),s!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;c=c!=null?""+Un(c):"",s=s!=null?""+Un(s):c,R||s===o.value||(o.value=s),o.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=R?o.checked:!!h,o.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C)}function pa(o,s,c){s==="number"&&To(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function Ii(o,s,c,h){if(o=o.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<o.length;c++)v=s.hasOwnProperty("$"+o[c].value),o[c].selected!==v&&(o[c].selected=v),v&&h&&(o[c].defaultSelected=!0)}else{for(c=""+Un(c),s=null,v=0;v<o.length;v++){if(o[v].value===c){o[v].selected=!0,h&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function ce(o,s,c){if(s!=null&&(s=""+Un(s),s!==o.value&&(o.value=s),c==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=c!=null?""+Un(c):""}function Co(o,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(r(92));if(Ft(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=Un(s),o.defaultValue=c,h=o.textContent,h===c&&h!==""&&h!==null&&(o.value=h)}function hr(o,s){if(s){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=s;return}}o.textContent=s}var Io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cf(o,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":h?o.setProperty(s,c):typeof c!="number"||c===0||Io.has(s)?s==="float"?o.cssFloat=c:o[s]=(""+c).trim():o[s]=c+"px"}function sl(o,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(o=o.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&c[v]!==h&&cf(o,v,h)}else for(var _ in s)s.hasOwnProperty(_)&&cf(o,_,s[_])}function ul(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(o){return Qd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var bi=null;function dr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ri=null,Oi=null;function ll(o){var s=Wr(o);if(s&&(o=s.stateNode)){var c=o[Ve]||null;t:switch(o=s.stateNode,s.type){case"input":if(er(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ue(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==o&&h.form===o.form){var v=h[Ve]||null;if(!v)throw Error(r(90));er(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===o.form&&ol(h)}break t;case"textarea":ce(o,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&Ii(o,!!c.multiple,s,!1)}}}var Qr=!1;function ff(o,s,c){if(Qr)return o(s,c);Qr=!0;try{var h=o(s);return h}finally{if(Qr=!1,(Ri!==null||Oi!==null)&&(ih(),Ri&&(s=Ri,o=Oi,Oi=Ri=null,ll(s),o)))for(s=0;s<o.length;s++)ll(o[s])}}function bo(o,s){var c=o.stateNode;if(c===null)return null;var h=c[Ve]||null;if(h===null)return null;c=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break t;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(Pr)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){pr=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{pr=!1}var $r=null,ga=null,Di=null;function cl(){if(Di)return Di;var o,s=ga,c=s.length,h,v="value"in $r?$r.value:$r.textContent,_=v.length;for(o=0;o<c&&s[o]===v[o];o++);var C=c-o;for(h=1;h<=C&&s[c-h]===v[_-h];h++);return Di=v.slice(o,1<h?1-h:void 0)}function Zr(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Jr(){return!0}function fl(){return!1}function an(o){function s(c,h,v,_,C){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(c=o[R],this[R]=c?c(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Jr:fl,this.isPropagationStopped=fl,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),s}var Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=an(Jt),Oo=g({},Jt,{view:0,detail:0}),hf=an(Oo),Ds,Ns,ti,Do=g({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ti&&(ti&&o.type==="mousemove"?(Ds=o.screenX-ti.screenX,Ns=o.screenY-ti.screenY):Ns=Ds=0,ti=o),Ds)},movementY:function(o){return"movementY"in o?o.movementY:Ns}}),gr=an(Do),df=g({},Do,{dataTransfer:0}),$d=an(df),No=g({},Oo,{relatedTarget:0}),Ms=an(No),hl=g({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ps=an(hl),pf=g({},Jt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Ls=an(pf),Zd=g({},Jt,{data:0}),dl=an(Zd),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pl(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=vf[o])?!!s[o]:!1}function Po(){return pl}var mf=g({},Oo,{key:function(o){if(o.key){var s=Mo[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Zr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?gf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(o){return o.type==="keypress"?Zr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Zr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Bs=an(mf),yf=g({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gl=an(yf),Ni=g({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po}),_f=an(Ni),xf=g({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ef=an(xf),Af=g({},Do,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ks=an(Af),Fn=g({},Jt,{newState:0,oldState:0}),wf=an(Fn),Tf=[9,13,27,32],ei=Pr&&"CompositionEvent"in window,p=null;Pr&&"documentMode"in document&&(p=document.documentMode);var E=Pr&&"TextEvent"in window&&!p,T=Pr&&(!ei||p&&8<p&&11>=p),D=" ",W=!1;function tt(o,s){switch(o){case"keyup":return Tf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ut(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jt=!1;function Xe(o,s){switch(o){case"compositionend":return ut(s);case"keypress":return s.which!==32?null:(W=!0,D);case"textInput":return o=s.data,o===D&&W?null:o;default:return null}}function zt(o,s){if(jt)return o==="compositionend"||!ei&&tt(o,s)?(o=cl(),Di=ga=$r=null,jt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var on={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function We(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!on[o.type]:s==="textarea"}function Mi(o,s,c,h){Ri?Oi?Oi.push(h):Oi=[h]:Ri=h,s=ch(s,"onChange"),0<s.length&&(c=new Os("onChange","change",null,c,h),o.push({event:c,listeners:s}))}var mn=null,ni=null;function vl(o){zy(o,0)}function Sf(o){var s=Yr(o);if(ol(s))return o}function lv(o,s){if(o==="change")return s}var cv=!1;if(Pr){var Jd;if(Pr){var t0="oninput"in document;if(!t0){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),t0=typeof fv.oninput=="function"}Jd=t0}else Jd=!1;cv=Jd&&(!document.documentMode||9<document.documentMode)}function hv(){mn&&(mn.detachEvent("onpropertychange",dv),ni=mn=null)}function dv(o){if(o.propertyName==="value"&&Sf(ni)){var s=[];Mi(s,ni,o,dr(o)),ff(vl,s)}}function Uw(o,s,c){o==="focusin"?(hv(),mn=s,ni=c,mn.attachEvent("onpropertychange",dv)):o==="focusout"&&hv()}function Fw(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Sf(ni)}function jw(o,s){if(o==="click")return Sf(s)}function zw(o,s){if(o==="input"||o==="change")return Sf(s)}function Hw(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var nr=typeof Object.is=="function"?Object.is:Hw;function ml(o,s){if(nr(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var c=Object.keys(o),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!ho.call(s,v)||!nr(o[v],s[v]))return!1}return!0}function pv(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function gv(o,s){var c=pv(o);o=0;for(var h;c;){if(c.nodeType===3){if(h=o+c.textContent.length,o<=s&&h>=s)return{node:c,offset:s-o};o=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=pv(c)}}function vv(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?vv(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function mv(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=To(o.document);s instanceof o.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)o=s.contentWindow;else break;s=To(o.document)}return s}function e0(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var Gw=Pr&&"documentMode"in document&&11>=document.documentMode,Vs=null,n0=null,yl=null,r0=!1;function yv(o,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;r0||Vs==null||Vs!==To(h)||(h=Vs,"selectionStart"in h&&e0(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),yl&&ml(yl,h)||(yl=h,h=ch(n0,"onSelect"),0<h.length&&(s=new Os("onSelect","select",null,s,c),o.push({event:s,listeners:h}),s.target=Vs)))}function Lo(o,s){var c={};return c[o.toLowerCase()]=s.toLowerCase(),c["Webkit"+o]="webkit"+s,c["Moz"+o]="moz"+s,c}var Us={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionrun:Lo("Transition","TransitionRun"),transitionstart:Lo("Transition","TransitionStart"),transitioncancel:Lo("Transition","TransitionCancel"),transitionend:Lo("Transition","TransitionEnd")},i0={},_v={};Pr&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Bo(o){if(i0[o])return i0[o];if(!Us[o])return o;var s=Us[o],c;for(c in s)if(s.hasOwnProperty(c)&&c in _v)return i0[o]=s[c];return o}var xv=Bo("animationend"),Ev=Bo("animationiteration"),Av=Bo("animationstart"),qw=Bo("transitionrun"),Xw=Bo("transitionstart"),Ww=Bo("transitioncancel"),wv=Bo("transitionend"),Tv=new Map,a0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");a0.push("scrollEnd");function Lr(o,s){Tv.set(o,s),Mr(s,[o])}var Sv=new WeakMap;function vr(o,s){if(typeof o=="object"&&o!==null){var c=Sv.get(o);return c!==void 0?c:(s={value:o,source:s,stack:Is(s)},Sv.set(o,s),s)}return{value:o,source:s,stack:Is(s)}}var mr=[],Fs=0,o0=0;function Cf(){for(var o=Fs,s=o0=Fs=0;s<o;){var c=mr[s];mr[s++]=null;var h=mr[s];mr[s++]=null;var v=mr[s];mr[s++]=null;var _=mr[s];if(mr[s++]=null,h!==null&&v!==null){var C=h.pending;C===null?v.next=v:(v.next=C.next,C.next=v),h.pending=v}_!==0&&Cv(c,v,_)}}function If(o,s,c,h){mr[Fs++]=o,mr[Fs++]=s,mr[Fs++]=c,mr[Fs++]=h,o0|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function s0(o,s,c,h){return If(o,s,c,h),bf(o)}function js(o,s){return If(o,null,null,s),bf(o)}function Cv(o,s,c){o.lanes|=c;var h=o.alternate;h!==null&&(h.lanes|=c);for(var v=!1,_=o.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(v=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,v&&s!==null&&(v=31-Rn(c),o=_.hiddenUpdates,h=o[v],h===null?o[v]=[s]:h.push(s),s.lane=c|536870912),_):null}function bf(o){if(50<Hl)throw Hl=0,d1=null,Error(r(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var zs={};function Yw(o,s,c,h){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(o,s,c,h){return new Yw(o,s,c,h)}function u0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Pi(o,s){var c=o.alternate;return c===null?(c=rr(o.tag,s,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=s,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,s=o.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Iv(o,s){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,s=c.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Rf(o,s,c,h,v,_){var C=0;if(h=o,typeof o=="function")u0(o)&&(C=1);else if(typeof o=="string")C=Q3(o,c,ke.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case P:return o=rr(31,c,s,v),o.elementType=P,o.lanes=_,o;case A:return ko(c.children,v,_,s);case S:C=8,v|=24;break;case I:return o=rr(12,c,s,v|2),o.elementType=I,o.lanes=_,o;case H:return o=rr(13,c,s,v),o.elementType=H,o.lanes=_,o;case q:return o=rr(19,c,s,v),o.elementType=q,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:case k:C=10;break t;case O:C=9;break t;case V:C=11;break t;case N:C=14;break t;case b:C=16,h=null;break t}C=29,c=Error(r(130,o===null?"null":typeof o,"")),h=null}return s=rr(C,c,s,v),s.elementType=o,s.type=h,s.lanes=_,s}function ko(o,s,c,h){return o=rr(7,o,h,s),o.lanes=c,o}function l0(o,s,c){return o=rr(6,o,null,s),o.lanes=c,o}function c0(o,s,c){return s=rr(4,o.children!==null?o.children:[],o.key,s),s.lanes=c,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Hs=[],Gs=0,Of=null,Df=0,yr=[],_r=0,Vo=null,Li=1,Bi="";function Uo(o,s){Hs[Gs++]=Df,Hs[Gs++]=Of,Of=o,Df=s}function bv(o,s,c){yr[_r++]=Li,yr[_r++]=Bi,yr[_r++]=Vo,Vo=o;var h=Li;o=Bi;var v=32-Rn(h)-1;h&=~(1<<v),c+=1;var _=32-Rn(s)+v;if(30<_){var C=v-v%5;_=(h&(1<<C)-1).toString(32),h>>=C,v-=C,Li=1<<32-Rn(s)+v|c<<v|h,Bi=_+o}else Li=1<<_|c<<v|h,Bi=o}function f0(o){o.return!==null&&(Uo(o,1),bv(o,1,0))}function h0(o){for(;o===Of;)Of=Hs[--Gs],Hs[Gs]=null,Df=Hs[--Gs],Hs[Gs]=null;for(;o===Vo;)Vo=yr[--_r],yr[_r]=null,Bi=yr[--_r],yr[_r]=null,Li=yr[--_r],yr[_r]=null}var jn=null,Oe=null,Qt=!1,Fo=null,ri=!1,d0=Error(r(519));function jo(o){var s=Error(r(418,""));throw El(vr(s,o)),d0}function Rv(o){var s=o.stateNode,c=o.type,h=o.memoizedProps;switch(s[qe]=o,s[Ve]=h,c){case"dialog":kt("cancel",s),kt("close",s);break;case"iframe":case"object":case"embed":kt("load",s);break;case"video":case"audio":for(c=0;c<ql.length;c++)kt(ql[c],s);break;case"source":kt("error",s);break;case"img":case"image":case"link":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"input":kt("invalid",s),So(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),bs(s);break;case"select":kt("invalid",s);break;case"textarea":kt("invalid",s),Co(s,h.value,h.defaultValue,h.children),bs(s)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||Xy(s.textContent,c)?(h.popover!=null&&(kt("beforetoggle",s),kt("toggle",s)),h.onScroll!=null&&kt("scroll",s),h.onScrollEnd!=null&&kt("scrollend",s),h.onClick!=null&&(s.onclick=fh),s=!0):s=!1,s||jo(o)}function Ov(o){for(jn=o.return;jn;)switch(jn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:jn=jn.return}}function _l(o){if(o!==jn)return!1;if(!Qt)return Ov(o),Qt=!0,!1;var s=o.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||R1(o.type,o.memoizedProps)),c=!c),c&&Oe&&jo(o),Ov(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));t:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(c=o.data,c==="/$"){if(s===0){Oe=kr(o.nextSibling);break t}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;o=o.nextSibling}Oe=null}}else s===27?(s=Oe,Da(o.type)?(o=M1,M1=null,Oe=o):Oe=s):Oe=jn?kr(o.stateNode.nextSibling):null;return!0}function xl(){Oe=jn=null,Qt=!1}function Dv(){var o=Fo;return o!==null&&(Wn===null?Wn=o:Wn.push.apply(Wn,o),Fo=null),o}function El(o){Fo===null?Fo=[o]:Fo.push(o)}var p0=gn(null),zo=null,ki=null;function va(o,s,c){It(p0,s._currentValue),s._currentValue=c}function Vi(o){o._currentValue=p0.current,Wt(p0)}function g0(o,s,c){for(;o!==null;){var h=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),o===c)break;o=o.return}}function v0(o,s,c,h){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var _=v.dependencies;if(_!==null){var C=v.child;_=_.firstContext;t:for(;_!==null;){var R=_;_=v;for(var j=0;j<s.length;j++)if(R.context===s[j]){_.lanes|=c,R=_.alternate,R!==null&&(R.lanes|=c),g0(_.return,c,o),h||(C=null);break t}_=R.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(r(341));C.lanes|=c,_=C.alternate,_!==null&&(_.lanes|=c),g0(C,c,o),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===o){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function Al(o,s,c,h){o=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var R=v.type;nr(v.pendingProps.value,C.value)||(o!==null?o.push(R):o=[R])}}else if(v===xi.current){if(C=v.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push($l):o=[$l])}v=v.return}o!==null&&v0(s,o,c,h),s.flags|=262144}function Nf(o){for(o=o.firstContext;o!==null;){if(!nr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ho(o){zo=o,ki=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function On(o){return Nv(zo,o)}function Mf(o,s){return zo===null&&Ho(o),Nv(o,s)}function Nv(o,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ki===null){if(o===null)throw Error(r(308));ki=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else ki=ki.next=s;return c}var Kw=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(c,h){o.push(h)}};this.abort=function(){s.aborted=!0,o.forEach(function(c){return c()})}},Qw=n.unstable_scheduleCallback,$w=n.unstable_NormalPriority,Ye={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m0(){return{controller:new Kw,data:new Map,refCount:0}}function wl(o){o.refCount--,o.refCount===0&&Qw($w,function(){o.controller.abort()})}var Tl=null,y0=0,qs=0,Xs=null;function Zw(o,s){if(Tl===null){var c=Tl=[];y0=0,qs=x1(),Xs={status:"pending",value:void 0,then:function(h){c.push(h)}}}return y0++,s.then(Mv,Mv),s}function Mv(){if(--y0===0&&Tl!==null){Xs!==null&&(Xs.status="fulfilled");var o=Tl;Tl=null,qs=0,Xs=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function Jw(o,s){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return o.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var Pv=rt.S;rt.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Zw(o,s),Pv!==null&&Pv(o,s)};var Go=gn(null);function _0(){var o=Go.current;return o!==null?o:me.pooledCache}function Pf(o,s){s===null?It(Go,Go.current):It(Go,s.pool)}function Lv(){var o=_0();return o===null?null:{parent:Ye._currentValue,pool:o}}var Sl=Error(r(460)),Bv=Error(r(474)),Lf=Error(r(542)),x0={then:function(){}};function kv(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Bf(){}function Vv(o,s,c){switch(c=o[c],c===void 0?o.push(s):c!==s&&(s.then(Bf,Bf),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Fv(o),o;default:if(typeof s.status=="string")s.then(Bf,Bf);else{if(o=me,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=s,o.status="pending",o.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Fv(o),o}throw Cl=s,Sl}}var Cl=null;function Uv(){if(Cl===null)throw Error(r(459));var o=Cl;return Cl=null,o}function Fv(o){if(o===Sl||o===Lf)throw Error(r(483))}var ma=!1;function E0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function A0(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ya(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function _a(o,s,c){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(ie&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=bf(o),Cv(o,null,c),s}return If(o,h,s,c),bf(o)}function Il(o,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=o.pendingLanes,c|=h,s.lanes=c,el(o,c)}}function w0(o,s){var c=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?v=_=C:_=_.next=C,c=c.next}while(c!==null);_===null?v=_=s:_=_.next=s}else v=_=s;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=s}var T0=!1;function bl(){if(T0){var o=Xs;if(o!==null)throw o}}function Rl(o,s,c,h){T0=!1;var v=o.updateQueue;ma=!1;var _=v.firstBaseUpdate,C=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var j=R,K=j.next;j.next=null,C===null?_=K:C.next=K,C=j;var nt=o.alternate;nt!==null&&(nt=nt.updateQueue,R=nt.lastBaseUpdate,R!==C&&(R===null?nt.firstBaseUpdate=K:R.next=K,nt.lastBaseUpdate=j))}if(_!==null){var ot=v.baseState;C=0,nt=K=j=null,R=_;do{var $=R.lane&-536870913,Z=$!==R.lane;if(Z?(Ht&$)===$:(h&$)===$){$!==0&&$===qs&&(T0=!0),nt!==null&&(nt=nt.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Ct=o,At=R;$=s;var de=c;switch(At.tag){case 1:if(Ct=At.payload,typeof Ct=="function"){ot=Ct.call(de,ot,$);break t}ot=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=At.payload,$=typeof Ct=="function"?Ct.call(de,ot,$):Ct,$==null)break t;ot=g({},ot,$);break t;case 2:ma=!0}}$=R.callback,$!==null&&(o.flags|=64,Z&&(o.flags|=8192),Z=v.callbacks,Z===null?v.callbacks=[$]:Z.push($))}else Z={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},nt===null?(K=nt=Z,j=ot):nt=nt.next=Z,C|=$;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;Z=R,R=Z.next,Z.next=null,v.lastBaseUpdate=Z,v.shared.pending=null}}while(!0);nt===null&&(j=ot),v.baseState=j,v.firstBaseUpdate=K,v.lastBaseUpdate=nt,_===null&&(v.shared.lanes=0),Ia|=C,o.lanes=C,o.memoizedState=ot}}function jv(o,s){if(typeof o!="function")throw Error(r(191,o));o.call(s)}function zv(o,s){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)jv(c[o],s)}var Ws=gn(null),kf=gn(0);function Hv(o,s){o=qi,It(kf,o),It(Ws,s),qi=o|s.baseLanes}function S0(){It(kf,qi),It(Ws,Ws.current)}function C0(){qi=kf.current,Wt(Ws),Wt(kf)}var xa=0,Dt=null,fe=null,Fe=null,Vf=!1,Ys=!1,qo=!1,Uf=0,Ol=0,Ks=null,t3=0;function Me(){throw Error(r(321))}function I0(o,s){if(s===null)return!1;for(var c=0;c<s.length&&c<o.length;c++)if(!nr(o[c],s[c]))return!1;return!0}function b0(o,s,c,h,v,_){return xa=_,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,rt.H=o===null||o.memoizedState===null?Cm:Im,qo=!1,_=c(h,v),qo=!1,Ys&&(_=qv(s,c,h,v)),Gv(o),_}function Gv(o){rt.H=qf;var s=fe!==null&&fe.next!==null;if(xa=0,Fe=fe=Dt=null,Vf=!1,Ol=0,Ks=null,s)throw Error(r(300));o===null||sn||(o=o.dependencies,o!==null&&Nf(o)&&(sn=!0))}function qv(o,s,c,h){Dt=o;var v=0;do{if(Ys&&(Ks=null),Ol=0,Ys=!1,25<=v)throw Error(r(301));if(v+=1,Fe=fe=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}rt.H=s3,_=s(c,h)}while(Ys);return _}function e3(){var o=rt.H,s=o.useState()[0];return s=typeof s.then=="function"?Dl(s):s,o=o.useState()[0],(fe!==null?fe.memoizedState:null)!==o&&(Dt.flags|=1024),s}function R0(){var o=Uf!==0;return Uf=0,o}function O0(o,s,c){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~c}function D0(o){if(Vf){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Vf=!1}xa=0,Fe=fe=Dt=null,Ys=!1,Ol=Uf=0,Ks=null}function qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Dt.memoizedState=Fe=o:Fe=Fe.next=o,Fe}function je(){if(fe===null){var o=Dt.alternate;o=o!==null?o.memoizedState:null}else o=fe.next;var s=Fe===null?Dt.memoizedState:Fe.next;if(s!==null)Fe=s,fe=o;else{if(o===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));fe=o,o={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},Fe===null?Dt.memoizedState=Fe=o:Fe=Fe.next=o}return Fe}function N0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(o){var s=Ol;return Ol+=1,Ks===null&&(Ks=[]),o=Vv(Ks,o,s),s=Dt,(Fe===null?s.memoizedState:Fe.next)===null&&(s=s.alternate,rt.H=s===null||s.memoizedState===null?Cm:Im),o}function Ff(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Dl(o);if(o.$$typeof===k)return On(o)}throw Error(r(438,String(o)))}function M0(o){var s=null,c=Dt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=Dt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=N0(),Dt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(o),h=0;h<o;h++)c[h]=B;return s.index++,c}function Ui(o,s){return typeof s=="function"?s(o):s}function jf(o){var s=je();return P0(s,fe,o)}function P0(o,s,c){var h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var v=o.baseQueue,_=h.pending;if(_!==null){if(v!==null){var C=v.next;v.next=_.next,_.next=C}s.baseQueue=v=_,h.pending=null}if(_=o.baseState,v===null)o.memoizedState=_;else{s=v.next;var R=C=null,j=null,K=s,nt=!1;do{var ot=K.lane&-536870913;if(ot!==K.lane?(Ht&ot)===ot:(xa&ot)===ot){var $=K.revertLane;if($===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ot===qs&&(nt=!0);else if((xa&$)===$){K=K.next,$===qs&&(nt=!0);continue}else ot={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},j===null?(R=j=ot,C=_):j=j.next=ot,Dt.lanes|=$,Ia|=$;ot=K.action,qo&&c(_,ot),_=K.hasEagerState?K.eagerState:c(_,ot)}else $={lane:ot,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},j===null?(R=j=$,C=_):j=j.next=$,Dt.lanes|=ot,Ia|=ot;K=K.next}while(K!==null&&K!==s);if(j===null?C=_:j.next=R,!nr(_,o.memoizedState)&&(sn=!0,nt&&(c=Xs,c!==null)))throw c;o.memoizedState=_,o.baseState=C,o.baseQueue=j,h.lastRenderedState=_}return v===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function L0(o){var s=je(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var h=c.dispatch,v=c.pending,_=s.memoizedState;if(v!==null){c.pending=null;var C=v=v.next;do _=o(_,C.action),C=C.next;while(C!==v);nr(_,s.memoizedState)||(sn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),c.lastRenderedState=_}return[_,h]}function Xv(o,s,c){var h=Dt,v=je(),_=Qt;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=s();var C=!nr((fe||v).memoizedState,c);C&&(v.memoizedState=c,sn=!0),v=v.queue;var R=Kv.bind(null,h,v,o);if(Nl(2048,8,R,[o]),v.getSnapshot!==s||C||Fe!==null&&Fe.memoizedState.tag&1){if(h.flags|=2048,Qs(9,zf(),Yv.bind(null,h,v,c,s),null),me===null)throw Error(r(349));_||(xa&124)!==0||Wv(h,s,c)}return c}function Wv(o,s,c){o.flags|=16384,o={getSnapshot:s,value:c},s=Dt.updateQueue,s===null?(s=N0(),Dt.updateQueue=s,s.stores=[o]):(c=s.stores,c===null?s.stores=[o]:c.push(o))}function Yv(o,s,c,h){s.value=c,s.getSnapshot=h,Qv(s)&&$v(o)}function Kv(o,s,c){return c(function(){Qv(s)&&$v(o)})}function Qv(o){var s=o.getSnapshot;o=o.value;try{var c=s();return!nr(o,c)}catch{return!0}}function $v(o){var s=js(o,2);s!==null&&ur(s,o,2)}function B0(o){var s=qn();if(typeof o=="function"){var c=o;if(o=c(),qo){tr(!0);try{c()}finally{tr(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:o},s}function Zv(o,s,c,h){return o.baseState=c,P0(o,fe,typeof h=="function"?h:Ui)}function n3(o,s,c,h,v){if(Gf(o))throw Error(r(485));if(o=s.action,o!==null){var _={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};rt.T!==null?c(!0):_.isTransition=!1,h(_),c=s.pending,c===null?(_.next=s.pending=_,Jv(s,_)):(_.next=c.next,s.pending=c.next=_)}}function Jv(o,s){var c=s.action,h=s.payload,v=o.state;if(s.isTransition){var _=rt.T,C={};rt.T=C;try{var R=c(v,h),j=rt.S;j!==null&&j(C,R),tm(o,s,R)}catch(K){k0(o,s,K)}finally{rt.T=_}}else try{_=c(v,h),tm(o,s,_)}catch(K){k0(o,s,K)}}function tm(o,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){em(o,s,h)},function(h){return k0(o,s,h)}):em(o,s,c)}function em(o,s,c){s.status="fulfilled",s.value=c,nm(s),o.state=c,s=o.pending,s!==null&&(c=s.next,c===s?o.pending=null:(c=c.next,s.next=c,Jv(o,c)))}function k0(o,s,c){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,nm(s),s=s.next;while(s!==h)}o.action=null}function nm(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function rm(o,s){return s}function im(o,s){if(Qt){var c=me.formState;if(c!==null){t:{var h=Dt;if(Qt){if(Oe){e:{for(var v=Oe,_=ri;v.nodeType!==8;){if(!_){v=null;break e}if(v=kr(v.nextSibling),v===null){v=null;break e}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Oe=kr(v.nextSibling),h=v.data==="F!";break t}}jo(h)}h=!1}h&&(s=c[0])}}return c=qn(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:s},c.queue=h,c=wm.bind(null,Dt,h),h.dispatch=c,h=B0(!1),_=z0.bind(null,Dt,!1,h.queue),h=qn(),v={state:s,dispatch:null,action:o,pending:null},h.queue=v,c=n3.bind(null,Dt,v,_,c),v.dispatch=c,h.memoizedState=o,[s,c,!1]}function am(o){var s=je();return om(s,fe,o)}function om(o,s,c){if(s=P0(o,s,rm)[0],o=jf(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Dl(s)}catch(C){throw C===Sl?Lf:C}else h=s;s=je();var v=s.queue,_=v.dispatch;return c!==s.memoizedState&&(Dt.flags|=2048,Qs(9,zf(),r3.bind(null,v,c),null)),[h,_,o]}function r3(o,s){o.action=s}function sm(o){var s=je(),c=fe;if(c!==null)return om(s,c,o);je(),s=s.memoizedState,c=je();var h=c.queue.dispatch;return c.memoizedState=o,[s,h,!1]}function Qs(o,s,c,h){return o={tag:o,create:c,deps:h,inst:s,next:null},s=Dt.updateQueue,s===null&&(s=N0(),Dt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=o.next=o:(h=c.next,c.next=o,o.next=h,s.lastEffect=o),o}function zf(){return{destroy:void 0,resource:void 0}}function um(){return je().memoizedState}function Hf(o,s,c,h){var v=qn();h=h===void 0?null:h,Dt.flags|=o,v.memoizedState=Qs(1|s,zf(),c,h)}function Nl(o,s,c,h){var v=je();h=h===void 0?null:h;var _=v.memoizedState.inst;fe!==null&&h!==null&&I0(h,fe.memoizedState.deps)?v.memoizedState=Qs(s,_,c,h):(Dt.flags|=o,v.memoizedState=Qs(1|s,_,c,h))}function lm(o,s){Hf(8390656,8,o,s)}function cm(o,s){Nl(2048,8,o,s)}function fm(o,s){return Nl(4,2,o,s)}function hm(o,s){return Nl(4,4,o,s)}function dm(o,s){if(typeof s=="function"){o=o();var c=s(o);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function pm(o,s,c){c=c!=null?c.concat([o]):null,Nl(4,4,dm.bind(null,s,o),c)}function V0(){}function gm(o,s){var c=je();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&I0(s,h[1])?h[0]:(c.memoizedState=[o,s],o)}function vm(o,s){var c=je();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&I0(s,h[1]))return h[0];if(h=o(),qo){tr(!0);try{o()}finally{tr(!1)}}return c.memoizedState=[h,s],h}function U0(o,s,c){return c===void 0||(xa&1073741824)!==0?o.memoizedState=s:(o.memoizedState=c,o=_y(),Dt.lanes|=o,Ia|=o,c)}function mm(o,s,c,h){return nr(c,s)?c:Ws.current!==null?(o=U0(o,c,h),nr(o,s)||(sn=!0),o):(xa&42)===0?(sn=!0,o.memoizedState=c):(o=_y(),Dt.lanes|=o,Ia|=o,s)}function ym(o,s,c,h,v){var _=ft.p;ft.p=_!==0&&8>_?_:8;var C=rt.T,R={};rt.T=R,z0(o,!1,s,c);try{var j=v(),K=rt.S;if(K!==null&&K(R,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var nt=Jw(j,h);Ml(o,s,nt,sr(o))}else Ml(o,s,h,sr(o))}catch(ot){Ml(o,s,{then:function(){},status:"rejected",reason:ot},sr())}finally{ft.p=_,rt.T=C}}function i3(){}function F0(o,s,c,h){if(o.tag!==5)throw Error(r(476));var v=_m(o).queue;ym(o,v,s,yt,c===null?i3:function(){return xm(o),c(h)})}function _m(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:yt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:c},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function xm(o){var s=_m(o).next.queue;Ml(o,s,{},sr())}function j0(){return On($l)}function Em(){return je().memoizedState}function Am(){return je().memoizedState}function a3(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var c=sr();o=ya(c);var h=_a(s,o,c);h!==null&&(ur(h,s,c),Il(h,s,c)),s={cache:m0()},o.payload=s;return}s=s.return}}function o3(o,s,c){var h=sr();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Gf(o)?Tm(s,c):(c=s0(o,s,c,h),c!==null&&(ur(c,o,h),Sm(c,s,h)))}function wm(o,s,c){var h=sr();Ml(o,s,c,h)}function Ml(o,s,c,h){var v={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gf(o))Tm(s,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var C=s.lastRenderedState,R=_(C,c);if(v.hasEagerState=!0,v.eagerState=R,nr(R,C))return If(o,s,v,0),me===null&&Cf(),!1}catch{}finally{}if(c=s0(o,s,v,h),c!==null)return ur(c,o,h),Sm(c,s,h),!0}return!1}function z0(o,s,c,h){if(h={lane:2,revertLane:x1(),action:h,hasEagerState:!1,eagerState:null,next:null},Gf(o)){if(s)throw Error(r(479))}else s=s0(o,c,h,2),s!==null&&ur(s,o,2)}function Gf(o){var s=o.alternate;return o===Dt||s!==null&&s===Dt}function Tm(o,s){Ys=Vf=!0;var c=o.pending;c===null?s.next=s:(s.next=c.next,c.next=s),o.pending=s}function Sm(o,s,c){if((c&4194048)!==0){var h=s.lanes;h&=o.pendingLanes,c|=h,s.lanes=c,el(o,c)}}var qf={readContext:On,use:Ff,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},Cm={readContext:On,use:Ff,useCallback:function(o,s){return qn().memoizedState=[o,s===void 0?null:s],o},useContext:On,useEffect:lm,useImperativeHandle:function(o,s,c){c=c!=null?c.concat([o]):null,Hf(4194308,4,dm.bind(null,s,o),c)},useLayoutEffect:function(o,s){return Hf(4194308,4,o,s)},useInsertionEffect:function(o,s){Hf(4,2,o,s)},useMemo:function(o,s){var c=qn();s=s===void 0?null:s;var h=o();if(qo){tr(!0);try{o()}finally{tr(!1)}}return c.memoizedState=[h,s],h},useReducer:function(o,s,c){var h=qn();if(c!==void 0){var v=c(s);if(qo){tr(!0);try{c(s)}finally{tr(!1)}}}else v=s;return h.memoizedState=h.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},h.queue=o,o=o.dispatch=o3.bind(null,Dt,o),[h.memoizedState,o]},useRef:function(o){var s=qn();return o={current:o},s.memoizedState=o},useState:function(o){o=B0(o);var s=o.queue,c=wm.bind(null,Dt,s);return s.dispatch=c,[o.memoizedState,c]},useDebugValue:V0,useDeferredValue:function(o,s){var c=qn();return U0(c,o,s)},useTransition:function(){var o=B0(!1);return o=ym.bind(null,Dt,o.queue,!0,!1),qn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,c){var h=Dt,v=qn();if(Qt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),me===null)throw Error(r(349));(Ht&124)!==0||Wv(h,s,c)}v.memoizedState=c;var _={value:c,getSnapshot:s};return v.queue=_,lm(Kv.bind(null,h,_,o),[o]),h.flags|=2048,Qs(9,zf(),Yv.bind(null,h,_,c,s),null),c},useId:function(){var o=qn(),s=me.identifierPrefix;if(Qt){var c=Bi,h=Li;c=(h&~(1<<32-Rn(h)-1)).toString(32)+c,s="«"+s+"R"+c,c=Uf++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=t3++,s="«"+s+"r"+c.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:j0,useFormState:im,useActionState:im,useOptimistic:function(o){var s=qn();s.memoizedState=s.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=z0.bind(null,Dt,!0,c),c.dispatch=s,[o,s]},useMemoCache:M0,useCacheRefresh:function(){return qn().memoizedState=a3.bind(null,Dt)}},Im={readContext:On,use:Ff,useCallback:gm,useContext:On,useEffect:cm,useImperativeHandle:pm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:vm,useReducer:jf,useRef:um,useState:function(){return jf(Ui)},useDebugValue:V0,useDeferredValue:function(o,s){var c=je();return mm(c,fe.memoizedState,o,s)},useTransition:function(){var o=jf(Ui)[0],s=je().memoizedState;return[typeof o=="boolean"?o:Dl(o),s]},useSyncExternalStore:Xv,useId:Em,useHostTransitionStatus:j0,useFormState:am,useActionState:am,useOptimistic:function(o,s){var c=je();return Zv(c,fe,o,s)},useMemoCache:M0,useCacheRefresh:Am},s3={readContext:On,use:Ff,useCallback:gm,useContext:On,useEffect:cm,useImperativeHandle:pm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:vm,useReducer:L0,useRef:um,useState:function(){return L0(Ui)},useDebugValue:V0,useDeferredValue:function(o,s){var c=je();return fe===null?U0(c,o,s):mm(c,fe.memoizedState,o,s)},useTransition:function(){var o=L0(Ui)[0],s=je().memoizedState;return[typeof o=="boolean"?o:Dl(o),s]},useSyncExternalStore:Xv,useId:Em,useHostTransitionStatus:j0,useFormState:sm,useActionState:sm,useOptimistic:function(o,s){var c=je();return fe!==null?Zv(c,fe,o,s):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:M0,useCacheRefresh:Am},$s=null,Pl=0;function Xf(o){var s=Pl;return Pl+=1,$s===null&&($s=[]),Vv($s,o,s)}function Ll(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Wf(o,s){throw s.$$typeof===m?Error(r(525)):(o=Object.prototype.toString.call(s),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function bm(o){var s=o._init;return s(o._payload)}function Rm(o){function s(X,G){if(o){var Y=X.deletions;Y===null?(X.deletions=[G],X.flags|=16):Y.push(G)}}function c(X,G){if(!o)return null;for(;G!==null;)s(X,G),G=G.sibling;return null}function h(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function v(X,G){return X=Pi(X,G),X.index=0,X.sibling=null,X}function _(X,G,Y){return X.index=Y,o?(Y=X.alternate,Y!==null?(Y=Y.index,Y<G?(X.flags|=67108866,G):Y):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function C(X){return o&&X.alternate===null&&(X.flags|=67108866),X}function R(X,G,Y,at){return G===null||G.tag!==6?(G=l0(Y,X.mode,at),G.return=X,G):(G=v(G,Y),G.return=X,G)}function j(X,G,Y,at){var gt=Y.type;return gt===A?nt(X,G,Y.props.children,at,Y.key):G!==null&&(G.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===b&&bm(gt)===G.type)?(G=v(G,Y.props),Ll(G,Y),G.return=X,G):(G=Rf(Y.type,Y.key,Y.props,null,X.mode,at),Ll(G,Y),G.return=X,G)}function K(X,G,Y,at){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=c0(Y,X.mode,at),G.return=X,G):(G=v(G,Y.children||[]),G.return=X,G)}function nt(X,G,Y,at,gt){return G===null||G.tag!==7?(G=ko(Y,X.mode,at,gt),G.return=X,G):(G=v(G,Y),G.return=X,G)}function ot(X,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=l0(""+G,X.mode,Y),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return Y=Rf(G.type,G.key,G.props,null,X.mode,Y),Ll(Y,G),Y.return=X,Y;case x:return G=c0(G,X.mode,Y),G.return=X,G;case b:var at=G._init;return G=at(G._payload),ot(X,G,Y)}if(Ft(G)||z(G))return G=ko(G,X.mode,Y,null),G.return=X,G;if(typeof G.then=="function")return ot(X,Xf(G),Y);if(G.$$typeof===k)return ot(X,Mf(X,G),Y);Wf(X,G)}return null}function $(X,G,Y,at){var gt=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return gt!==null?null:R(X,G,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return Y.key===gt?j(X,G,Y,at):null;case x:return Y.key===gt?K(X,G,Y,at):null;case b:return gt=Y._init,Y=gt(Y._payload),$(X,G,Y,at)}if(Ft(Y)||z(Y))return gt!==null?null:nt(X,G,Y,at,null);if(typeof Y.then=="function")return $(X,G,Xf(Y),at);if(Y.$$typeof===k)return $(X,G,Mf(X,Y),at);Wf(X,Y)}return null}function Z(X,G,Y,at,gt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return X=X.get(Y)||null,R(G,X,""+at,gt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case y:return X=X.get(at.key===null?Y:at.key)||null,j(G,X,at,gt);case x:return X=X.get(at.key===null?Y:at.key)||null,K(G,X,at,gt);case b:var Pt=at._init;return at=Pt(at._payload),Z(X,G,Y,at,gt)}if(Ft(at)||z(at))return X=X.get(Y)||null,nt(G,X,at,gt,null);if(typeof at.then=="function")return Z(X,G,Y,Xf(at),gt);if(at.$$typeof===k)return Z(X,G,Y,Mf(G,at),gt);Wf(G,at)}return null}function Ct(X,G,Y,at){for(var gt=null,Pt=null,mt=G,wt=G=0,ln=null;mt!==null&&wt<Y.length;wt++){mt.index>wt?(ln=mt,mt=null):ln=mt.sibling;var Yt=$(X,mt,Y[wt],at);if(Yt===null){mt===null&&(mt=ln);break}o&&mt&&Yt.alternate===null&&s(X,mt),G=_(Yt,G,wt),Pt===null?gt=Yt:Pt.sibling=Yt,Pt=Yt,mt=ln}if(wt===Y.length)return c(X,mt),Qt&&Uo(X,wt),gt;if(mt===null){for(;wt<Y.length;wt++)mt=ot(X,Y[wt],at),mt!==null&&(G=_(mt,G,wt),Pt===null?gt=mt:Pt.sibling=mt,Pt=mt);return Qt&&Uo(X,wt),gt}for(mt=h(mt);wt<Y.length;wt++)ln=Z(mt,X,wt,Y[wt],at),ln!==null&&(o&&ln.alternate!==null&&mt.delete(ln.key===null?wt:ln.key),G=_(ln,G,wt),Pt===null?gt=ln:Pt.sibling=ln,Pt=ln);return o&&mt.forEach(function(Ba){return s(X,Ba)}),Qt&&Uo(X,wt),gt}function At(X,G,Y,at){if(Y==null)throw Error(r(151));for(var gt=null,Pt=null,mt=G,wt=G=0,ln=null,Yt=Y.next();mt!==null&&!Yt.done;wt++,Yt=Y.next()){mt.index>wt?(ln=mt,mt=null):ln=mt.sibling;var Ba=$(X,mt,Yt.value,at);if(Ba===null){mt===null&&(mt=ln);break}o&&mt&&Ba.alternate===null&&s(X,mt),G=_(Ba,G,wt),Pt===null?gt=Ba:Pt.sibling=Ba,Pt=Ba,mt=ln}if(Yt.done)return c(X,mt),Qt&&Uo(X,wt),gt;if(mt===null){for(;!Yt.done;wt++,Yt=Y.next())Yt=ot(X,Yt.value,at),Yt!==null&&(G=_(Yt,G,wt),Pt===null?gt=Yt:Pt.sibling=Yt,Pt=Yt);return Qt&&Uo(X,wt),gt}for(mt=h(mt);!Yt.done;wt++,Yt=Y.next())Yt=Z(mt,X,wt,Yt.value,at),Yt!==null&&(o&&Yt.alternate!==null&&mt.delete(Yt.key===null?wt:Yt.key),G=_(Yt,G,wt),Pt===null?gt=Yt:Pt.sibling=Yt,Pt=Yt);return o&&mt.forEach(function(uT){return s(X,uT)}),Qt&&Uo(X,wt),gt}function de(X,G,Y,at){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:t:{for(var gt=Y.key;G!==null;){if(G.key===gt){if(gt=Y.type,gt===A){if(G.tag===7){c(X,G.sibling),at=v(G,Y.props.children),at.return=X,X=at;break t}}else if(G.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===b&&bm(gt)===G.type){c(X,G.sibling),at=v(G,Y.props),Ll(at,Y),at.return=X,X=at;break t}c(X,G);break}else s(X,G);G=G.sibling}Y.type===A?(at=ko(Y.props.children,X.mode,at,Y.key),at.return=X,X=at):(at=Rf(Y.type,Y.key,Y.props,null,X.mode,at),Ll(at,Y),at.return=X,X=at)}return C(X);case x:t:{for(gt=Y.key;G!==null;){if(G.key===gt)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){c(X,G.sibling),at=v(G,Y.children||[]),at.return=X,X=at;break t}else{c(X,G);break}else s(X,G);G=G.sibling}at=c0(Y,X.mode,at),at.return=X,X=at}return C(X);case b:return gt=Y._init,Y=gt(Y._payload),de(X,G,Y,at)}if(Ft(Y))return Ct(X,G,Y,at);if(z(Y)){if(gt=z(Y),typeof gt!="function")throw Error(r(150));return Y=gt.call(Y),At(X,G,Y,at)}if(typeof Y.then=="function")return de(X,G,Xf(Y),at);if(Y.$$typeof===k)return de(X,G,Mf(X,Y),at);Wf(X,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(c(X,G.sibling),at=v(G,Y),at.return=X,X=at):(c(X,G),at=l0(Y,X.mode,at),at.return=X,X=at),C(X)):c(X,G)}return function(X,G,Y,at){try{Pl=0;var gt=de(X,G,Y,at);return $s=null,gt}catch(mt){if(mt===Sl||mt===Lf)throw mt;var Pt=rr(29,mt,null,X.mode);return Pt.lanes=at,Pt.return=X,Pt}finally{}}}var Zs=Rm(!0),Om=Rm(!1),xr=gn(null),ii=null;function Ea(o){var s=o.alternate;It(Ke,Ke.current&1),It(xr,o),ii===null&&(s===null||Ws.current!==null||s.memoizedState!==null)&&(ii=o)}function Dm(o){if(o.tag===22){if(It(Ke,Ke.current),It(xr,o),ii===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(ii=o)}}else Aa()}function Aa(){It(Ke,Ke.current),It(xr,xr.current)}function Fi(o){Wt(xr),ii===o&&(ii=null),Wt(Ke)}var Ke=gn(0);function Yf(o){for(var s=o;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||N1(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function H0(o,s,c,h){s=o.memoizedState,c=c(h,s),c=c==null?s:g({},s,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var G0={enqueueSetState:function(o,s,c){o=o._reactInternals;var h=sr(),v=ya(h);v.payload=s,c!=null&&(v.callback=c),s=_a(o,v,h),s!==null&&(ur(s,o,h),Il(s,o,h))},enqueueReplaceState:function(o,s,c){o=o._reactInternals;var h=sr(),v=ya(h);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=_a(o,v,h),s!==null&&(ur(s,o,h),Il(s,o,h))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var c=sr(),h=ya(c);h.tag=2,s!=null&&(h.callback=s),s=_a(o,h,c),s!==null&&(ur(s,o,c),Il(s,o,c))}};function Nm(o,s,c,h,v,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,_,C):s.prototype&&s.prototype.isPureReactComponent?!ml(c,h)||!ml(v,_):!0}function Mm(o,s,c,h){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==o&&G0.enqueueReplaceState(s,s.state,null)}function Xo(o,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(o=o.defaultProps){c===s&&(c=g({},c));for(var v in o)c[v]===void 0&&(c[v]=o[v])}return c}var Kf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Pm(o){Kf(o)}function Lm(o){console.error(o)}function Bm(o){Kf(o)}function Qf(o,s){try{var c=o.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function km(o,s,c){try{var h=o.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function q0(o,s,c){return c=ya(c),c.tag=3,c.payload={element:null},c.callback=function(){Qf(o,s)},c}function Vm(o){return o=ya(o),o.tag=3,o}function Um(o,s,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var _=h.value;o.payload=function(){return v(_)},o.callback=function(){km(s,c,h)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){km(s,c,h),typeof v!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function u3(o,s,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&Al(s,c,v,!0),c=xr.current,c!==null){switch(c.tag){case 13:return ii===null?g1():c.alternate===null&&De===0&&(De=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===x0?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),m1(o,h,v)),!1;case 22:return c.flags|=65536,h===x0?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),m1(o,h,v)),!1}throw Error(r(435,c.tag))}return m1(o,h,v),g1(),!1}if(Qt)return s=xr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==d0&&(o=Error(r(422),{cause:h}),El(vr(o,c)))):(h!==d0&&(s=Error(r(423),{cause:h}),El(vr(s,c))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,h=vr(h,c),v=q0(o.stateNode,h,v),w0(o,v),De!==4&&(De=2)),!1;var _=Error(r(520),{cause:h});if(_=vr(_,c),zl===null?zl=[_]:zl.push(_),De!==4&&(De=2),s===null)return!0;h=vr(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,o=v&-v,c.lanes|=o,o=q0(c.stateNode,h,o),w0(c,o),!1;case 1:if(s=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ba===null||!ba.has(_))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Vm(v),Um(v,o,c,h),w0(c,v),!1}c=c.return}while(c!==null);return!1}var Fm=Error(r(461)),sn=!1;function yn(o,s,c,h){s.child=o===null?Om(s,null,c,h):Zs(s,o.child,c,h)}function jm(o,s,c,h,v){c=c.render;var _=s.ref;if("ref"in h){var C={};for(var R in h)R!=="ref"&&(C[R]=h[R])}else C=h;return Ho(s),h=b0(o,s,c,C,_,v),R=R0(),o!==null&&!sn?(O0(o,s,v),ji(o,s,v)):(Qt&&R&&f0(s),s.flags|=1,yn(o,s,h,v),s.child)}function zm(o,s,c,h,v){if(o===null){var _=c.type;return typeof _=="function"&&!u0(_)&&_.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=_,Hm(o,s,_,h,v)):(o=Rf(c.type,null,h,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!J0(o,v)){var C=_.memoizedProps;if(c=c.compare,c=c!==null?c:ml,c(C,h)&&o.ref===s.ref)return ji(o,s,v)}return s.flags|=1,o=Pi(_,h),o.ref=s.ref,o.return=s,s.child=o}function Hm(o,s,c,h,v){if(o!==null){var _=o.memoizedProps;if(ml(_,h)&&o.ref===s.ref)if(sn=!1,s.pendingProps=h=_,J0(o,v))(o.flags&131072)!==0&&(sn=!0);else return s.lanes=o.lanes,ji(o,s,v)}return X0(o,s,c,h,v)}function Gm(o,s,c){var h=s.pendingProps,v=h.children,_=o!==null?o.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=_!==null?_.baseLanes|c:c,o!==null){for(v=s.child=o.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;s.childLanes=_&~h}else s.childLanes=0,s.child=null;return qm(o,s,h,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Pf(s,_!==null?_.cachePool:null),_!==null?Hv(s,_):S0(),Dm(s);else return s.lanes=s.childLanes=536870912,qm(o,s,_!==null?_.baseLanes|c:c,c)}else _!==null?(Pf(s,_.cachePool),Hv(s,_),Aa(),s.memoizedState=null):(o!==null&&Pf(s,null),S0(),Aa());return yn(o,s,v,c),s.child}function qm(o,s,c,h){var v=_0();return v=v===null?null:{parent:Ye._currentValue,pool:v},s.memoizedState={baseLanes:c,cachePool:v},o!==null&&Pf(s,null),S0(),Dm(s),o!==null&&Al(o,s,h,!0),null}function $f(o,s){var c=s.ref;if(c===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(s.flags|=4194816)}}function X0(o,s,c,h,v){return Ho(s),c=b0(o,s,c,h,void 0,v),h=R0(),o!==null&&!sn?(O0(o,s,v),ji(o,s,v)):(Qt&&h&&f0(s),s.flags|=1,yn(o,s,c,v),s.child)}function Xm(o,s,c,h,v,_){return Ho(s),s.updateQueue=null,c=qv(s,h,c,v),Gv(o),h=R0(),o!==null&&!sn?(O0(o,s,_),ji(o,s,_)):(Qt&&h&&f0(s),s.flags|=1,yn(o,s,c,_),s.child)}function Wm(o,s,c,h,v){if(Ho(s),s.stateNode===null){var _=zs,C=c.contextType;typeof C=="object"&&C!==null&&(_=On(C)),_=new c(h,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=G0,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=h,_.state=s.memoizedState,_.refs={},E0(s),C=c.contextType,_.context=typeof C=="object"&&C!==null?On(C):zs,_.state=s.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(H0(s,c,C,h),_.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&G0.enqueueReplaceState(_,_.state,null),Rl(s,h,_,v),bl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(o===null){_=s.stateNode;var R=s.memoizedProps,j=Xo(c,R);_.props=j;var K=_.context,nt=c.contextType;C=zs,typeof nt=="object"&&nt!==null&&(C=On(nt));var ot=c.getDerivedStateFromProps;nt=typeof ot=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,nt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||K!==C)&&Mm(s,_,h,C),ma=!1;var $=s.memoizedState;_.state=$,Rl(s,h,_,v),bl(),K=s.memoizedState,R||$!==K||ma?(typeof ot=="function"&&(H0(s,c,ot,h),K=s.memoizedState),(j=ma||Nm(s,c,j,h,$,K,C))?(nt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=K),_.props=h,_.state=K,_.context=C,h=j):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{_=s.stateNode,A0(o,s),C=s.memoizedProps,nt=Xo(c,C),_.props=nt,ot=s.pendingProps,$=_.context,K=c.contextType,j=zs,typeof K=="object"&&K!==null&&(j=On(K)),R=c.getDerivedStateFromProps,(K=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ot||$!==j)&&Mm(s,_,h,j),ma=!1,$=s.memoizedState,_.state=$,Rl(s,h,_,v),bl();var Z=s.memoizedState;C!==ot||$!==Z||ma||o!==null&&o.dependencies!==null&&Nf(o.dependencies)?(typeof R=="function"&&(H0(s,c,R,h),Z=s.memoizedState),(nt=ma||Nm(s,c,nt,h,$,Z,j)||o!==null&&o.dependencies!==null&&Nf(o.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,Z,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,Z,j)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Z),_.props=h,_.state=Z,_.context=j,h=nt):(typeof _.componentDidUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(s.flags|=1024),h=!1)}return _=h,$f(o,s),h=(s.flags&128)!==0,_||h?(_=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,o!==null&&h?(s.child=Zs(s,o.child,null,v),s.child=Zs(s,null,c,v)):yn(o,s,c,v),s.memoizedState=_.state,o=s.child):o=ji(o,s,v),o}function Ym(o,s,c,h){return xl(),s.flags|=256,yn(o,s,c,h),s.child}var W0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y0(o){return{baseLanes:o,cachePool:Lv()}}function K0(o,s,c){return o=o!==null?o.childLanes&~c:0,s&&(o|=Er),o}function Km(o,s,c){var h=s.pendingProps,v=!1,_=(s.flags&128)!==0,C;if((C=_)||(C=o!==null&&o.memoizedState===null?!1:(Ke.current&2)!==0),C&&(v=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(Qt){if(v?Ea(s):Aa(),Qt){var R=Oe,j;if(j=R){t:{for(j=R,R=ri;j.nodeType!==8;){if(!R){R=null;break t}if(j=kr(j.nextSibling),j===null){R=null;break t}}R=j}R!==null?(s.memoizedState={dehydrated:R,treeContext:Vo!==null?{id:Li,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},j=rr(18,null,null,0),j.stateNode=R,j.return=s,s.child=j,jn=s,Oe=null,j=!0):j=!1}j||jo(s)}if(R=s.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return N1(R)?s.lanes=32:s.lanes=536870912,null;Fi(s)}return R=h.children,h=h.fallback,v?(Aa(),v=s.mode,R=Zf({mode:"hidden",children:R},v),h=ko(h,v,c,null),R.return=s,h.return=s,R.sibling=h,s.child=R,v=s.child,v.memoizedState=Y0(c),v.childLanes=K0(o,C,c),s.memoizedState=W0,h):(Ea(s),Q0(s,R))}if(j=o.memoizedState,j!==null&&(R=j.dehydrated,R!==null)){if(_)s.flags&256?(Ea(s),s.flags&=-257,s=$0(o,s,c)):s.memoizedState!==null?(Aa(),s.child=o.child,s.flags|=128,s=null):(Aa(),v=h.fallback,R=s.mode,h=Zf({mode:"visible",children:h.children},R),v=ko(v,R,c,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,Zs(s,o.child,null,c),h=s.child,h.memoizedState=Y0(c),h.childLanes=K0(o,C,c),s.memoizedState=W0,s=v);else if(Ea(s),N1(R)){if(C=R.nextSibling&&R.nextSibling.dataset,C)var K=C.dgst;C=K,h=Error(r(419)),h.stack="",h.digest=C,El({value:h,source:null,stack:null}),s=$0(o,s,c)}else if(sn||Al(o,s,c,!1),C=(c&o.childLanes)!==0,sn||C){if(C=me,C!==null&&(h=c&-c,h=(h&42)!==0?1:la(h),h=(h&(C.suspendedLanes|c))!==0?0:h,h!==0&&h!==j.retryLane))throw j.retryLane=h,js(o,h),ur(C,o,h),Fm;R.data==="$?"||g1(),s=$0(o,s,c)}else R.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=j.treeContext,Oe=kr(R.nextSibling),jn=s,Qt=!0,Fo=null,ri=!1,o!==null&&(yr[_r++]=Li,yr[_r++]=Bi,yr[_r++]=Vo,Li=o.id,Bi=o.overflow,Vo=s),s=Q0(s,h.children),s.flags|=4096);return s}return v?(Aa(),v=h.fallback,R=s.mode,j=o.child,K=j.sibling,h=Pi(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,K!==null?v=Pi(K,v):(v=ko(v,R,c,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,R=o.child.memoizedState,R===null?R=Y0(c):(j=R.cachePool,j!==null?(K=Ye._currentValue,j=j.parent!==K?{parent:K,pool:K}:j):j=Lv(),R={baseLanes:R.baseLanes|c,cachePool:j}),v.memoizedState=R,v.childLanes=K0(o,C,c),s.memoizedState=W0,h):(Ea(s),c=o.child,o=c.sibling,c=Pi(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=c,s.memoizedState=null,c)}function Q0(o,s){return s=Zf({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Zf(o,s){return o=rr(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function $0(o,s,c){return Zs(s,o.child,null,c),o=Q0(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function Qm(o,s,c){o.lanes|=s;var h=o.alternate;h!==null&&(h.lanes|=s),g0(o.return,s,c)}function Z0(o,s,c,h,v){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=c,_.tailMode=v)}function $m(o,s,c){var h=s.pendingProps,v=h.revealOrder,_=h.tail;if(yn(o,s,h.children,c),h=Ke.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Qm(o,c,s);else if(o.tag===19)Qm(o,c,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}h&=1}switch(It(Ke,h),v){case"forwards":for(c=s.child,v=null;c!==null;)o=c.alternate,o!==null&&Yf(o)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),Z0(s,!1,v,c,_);break;case"backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Yf(o)===null){s.child=v;break}o=v.sibling,v.sibling=c,c=v,v=o}Z0(s,!0,c,null,_);break;case"together":Z0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ji(o,s,c){if(o!==null&&(s.dependencies=o.dependencies),Ia|=s.lanes,(c&s.childLanes)===0)if(o!==null){if(Al(o,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(r(153));if(s.child!==null){for(o=s.child,c=Pi(o,o.pendingProps),s.child=c,c.return=s;o.sibling!==null;)o=o.sibling,c=c.sibling=Pi(o,o.pendingProps),c.return=s;c.sibling=null}return s.child}function J0(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Nf(o)))}function l3(o,s,c){switch(s.tag){case 3:_s(s,s.stateNode.containerInfo),va(s,Ye,o.memoizedState.cache),xl();break;case 27:case 5:ua(s);break;case 4:_s(s,s.stateNode.containerInfo);break;case 10:va(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Ea(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Km(o,s,c):(Ea(s),o=ji(o,s,c),o!==null?o.sibling:null);Ea(s);break;case 19:var v=(o.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(Al(o,s,c,!1),h=(c&s.childLanes)!==0),v){if(h)return $m(o,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),It(Ke,Ke.current),h)break;return null;case 22:case 23:return s.lanes=0,Gm(o,s,c);case 24:va(s,Ye,o.memoizedState.cache)}return ji(o,s,c)}function Zm(o,s,c){if(o!==null)if(o.memoizedProps!==s.pendingProps)sn=!0;else{if(!J0(o,c)&&(s.flags&128)===0)return sn=!1,l3(o,s,c);sn=(o.flags&131072)!==0}else sn=!1,Qt&&(s.flags&1048576)!==0&&bv(s,Df,s.index);switch(s.lanes=0,s.tag){case 16:t:{o=s.pendingProps;var h=s.elementType,v=h._init;if(h=v(h._payload),s.type=h,typeof h=="function")u0(h)?(o=Xo(h,o),s.tag=1,s=Wm(null,s,h,o,c)):(s.tag=0,s=X0(null,s,h,o,c));else{if(h!=null){if(v=h.$$typeof,v===V){s.tag=11,s=jm(null,s,h,o,c);break t}else if(v===N){s.tag=14,s=zm(null,s,h,o,c);break t}}throw s=Ot(h)||h,Error(r(306,s,""))}}return s;case 0:return X0(o,s,s.type,s.pendingProps,c);case 1:return h=s.type,v=Xo(h,s.pendingProps),Wm(o,s,h,v,c);case 3:t:{if(_s(s,s.stateNode.containerInfo),o===null)throw Error(r(387));h=s.pendingProps;var _=s.memoizedState;v=_.element,A0(o,s),Rl(s,h,null,c);var C=s.memoizedState;if(h=C.cache,va(s,Ye,h),h!==_.cache&&v0(s,[Ye],c,!0),bl(),h=C.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Ym(o,s,h,c);break t}else if(h!==v){v=vr(Error(r(424)),s),El(v),s=Ym(o,s,h,c);break t}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Oe=kr(o.firstChild),jn=s,Qt=!0,Fo=null,ri=!0,c=Om(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(xl(),h===v){s=ji(o,s,c);break t}yn(o,s,h,c)}s=s.child}return s;case 26:return $f(o,s),o===null?(c=n2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Qt||(c=s.type,o=s.pendingProps,h=hh(qr.current).createElement(c),h[qe]=s,h[Ve]=o,xn(h,c,o),Ne(h),s.stateNode=h):s.memoizedState=n2(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return ua(s),o===null&&Qt&&(h=s.stateNode=Jy(s.type,s.pendingProps,qr.current),jn=s,ri=!0,v=Oe,Da(s.type)?(M1=v,Oe=kr(h.firstChild)):Oe=v),yn(o,s,s.pendingProps.children,c),$f(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Qt&&((v=h=Oe)&&(h=k3(h,s.type,s.pendingProps,ri),h!==null?(s.stateNode=h,jn=s,Oe=kr(h.firstChild),ri=!1,v=!0):v=!1),v||jo(s)),ua(s),v=s.type,_=s.pendingProps,C=o!==null?o.memoizedProps:null,h=_.children,R1(v,_)?h=null:C!==null&&R1(v,C)&&(s.flags|=32),s.memoizedState!==null&&(v=b0(o,s,e3,null,null,c),$l._currentValue=v),$f(o,s),yn(o,s,h,c),s.child;case 6:return o===null&&Qt&&((o=c=Oe)&&(c=V3(c,s.pendingProps,ri),c!==null?(s.stateNode=c,jn=s,Oe=null,o=!0):o=!1),o||jo(s)),null;case 13:return Km(o,s,c);case 4:return _s(s,s.stateNode.containerInfo),h=s.pendingProps,o===null?s.child=Zs(s,null,h,c):yn(o,s,h,c),s.child;case 11:return jm(o,s,s.type,s.pendingProps,c);case 7:return yn(o,s,s.pendingProps,c),s.child;case 8:return yn(o,s,s.pendingProps.children,c),s.child;case 12:return yn(o,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,va(s,s.type,h.value),yn(o,s,h.children,c),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,Ho(s),v=On(v),h=h(v),s.flags|=1,yn(o,s,h,c),s.child;case 14:return zm(o,s,s.type,s.pendingProps,c);case 15:return Hm(o,s,s.type,s.pendingProps,c);case 19:return $m(o,s,c);case 31:return h=s.pendingProps,c=s.mode,h={mode:h.mode,children:h.children},o===null?(c=Zf(h,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=Pi(o.child,h),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Gm(o,s,c);case 24:return Ho(s),h=On(Ye),o===null?(v=_0(),v===null&&(v=me,_=m0(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=c),v=_),s.memoizedState={parent:h,cache:v},E0(s),va(s,Ye,v)):((o.lanes&c)!==0&&(A0(o,s),Rl(s,null,null,c),bl()),v=o.memoizedState,_=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),va(s,Ye,h)):(h=_.cache,va(s,Ye,h),h!==v.cache&&v0(s,[Ye],c,!0))),yn(o,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function zi(o){o.flags|=4}function Jm(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!s2(s)){if(s=xr.current,s!==null&&((Ht&4194048)===Ht?ii!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==ii))throw Cl=x0,Bv;o.flags|=8192}}function Jf(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?Ju():536870912,o.lanes|=s,nu|=s)}function Bl(o,s){if(!Qt)switch(o.tailMode){case"hidden":s=o.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function Ce(o){var s=o.alternate!==null&&o.alternate.child===o.child,c=0,h=0;if(s)for(var v=o.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=h,o.childLanes=c,s}function c3(o,s,c){var h=s.pendingProps;switch(h0(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(s),null;case 1:return Ce(s),null;case 3:return c=s.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Vi(Ye),sa(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(_l(s)?zi(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dv())),Ce(s),null;case 26:return c=s.memoizedState,o===null?(zi(s),c!==null?(Ce(s),Jm(s,c)):(Ce(s),s.flags&=-16777217)):c?c!==o.memoizedState?(zi(s),Ce(s),Jm(s,c)):(Ce(s),s.flags&=-16777217):(o.memoizedProps!==h&&zi(s),Ce(s),s.flags&=-16777217),null;case 27:Ei(s),c=qr.current;var v=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==h&&zi(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ce(s),null}o=ke.current,_l(s)?Rv(s):(o=Jy(v,h,c),s.stateNode=o,zi(s))}return Ce(s),null;case 5:if(Ei(s),c=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==h&&zi(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ce(s),null}if(o=ke.current,_l(s))Rv(s);else{switch(v=hh(qr.current),o){case 1:o=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=v.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?o.multiple=!0:h.size&&(o.size=h.size);break;default:o=typeof h.is=="string"?v.createElement(c,{is:h.is}):v.createElement(c)}}o[qe]=s,o[Ve]=h;t:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)o.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break t;for(;v.sibling===null;){if(v.return===null||v.return===s)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=o;t:switch(xn(o,c,h),c){case"button":case"input":case"select":case"textarea":o=!!h.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&zi(s)}}return Ce(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==h&&zi(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(o=qr.current,_l(s)){if(o=s.stateNode,c=s.memoizedProps,h=null,v=jn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}o[qe]=s,o=!!(o.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Xy(o.nodeValue,c)),o||jo(s)}else o=hh(o).createTextNode(h),o[qe]=s,s.stateNode=o}return Ce(s),null;case 13:if(h=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=_l(s),h!==null&&h.dehydrated!==null){if(o===null){if(!v)throw Error(r(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[qe]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ce(s),v=!1}else v=Dv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Fi(s),s):(Fi(s),null)}if(Fi(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=h!==null,o=o!==null&&o.memoizedState!==null,c){h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var _=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==v&&(h.flags|=2048)}return c!==o&&c&&(s.child.flags|=8192),Jf(s,s.updateQueue),Ce(s),null;case 4:return sa(),o===null&&T1(s.stateNode.containerInfo),Ce(s),null;case 10:return Vi(s.type),Ce(s),null;case 19:if(Wt(Ke),v=s.memoizedState,v===null)return Ce(s),null;if(h=(s.flags&128)!==0,_=v.rendering,_===null)if(h)Bl(v,!1);else{if(De!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(_=Yf(o),_!==null){for(s.flags|=128,Bl(v,!1),o=_.updateQueue,s.updateQueue=o,Jf(s,o),s.subtreeFlags=0,o=c,c=s.child;c!==null;)Iv(c,o),c=c.sibling;return It(Ke,Ke.current&1|2),s.child}o=o.sibling}v.tail!==null&&cr()>nh&&(s.flags|=128,h=!0,Bl(v,!1),s.lanes=4194304)}else{if(!h)if(o=Yf(_),o!==null){if(s.flags|=128,h=!0,o=o.updateQueue,s.updateQueue=o,Jf(s,o),Bl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!Qt)return Ce(s),null}else 2*cr()-v.renderingStartTime>nh&&c!==536870912&&(s.flags|=128,h=!0,Bl(v,!1),s.lanes=4194304);v.isBackwards?(_.sibling=s.child,s.child=_):(o=v.last,o!==null?o.sibling=_:s.child=_,v.last=_)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=cr(),s.sibling=null,o=Ke.current,It(Ke,h?o&1|2:o&1),s):(Ce(s),null);case 22:case 23:return Fi(s),C0(),h=s.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(Ce(s),s.subtreeFlags&6&&(s.flags|=8192)):Ce(s),c=s.updateQueue,c!==null&&Jf(s,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),o!==null&&Wt(Go),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Vi(Ye),Ce(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function f3(o,s){switch(h0(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Vi(Ye),sa(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Ei(s),null;case 13:if(Fi(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(r(340));xl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return Wt(Ke),null;case 4:return sa(),null;case 10:return Vi(s.type),null;case 22:case 23:return Fi(s),C0(),o!==null&&Wt(Go),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Vi(Ye),null;case 25:return null;default:return null}}function ty(o,s){switch(h0(s),s.tag){case 3:Vi(Ye),sa();break;case 26:case 27:case 5:Ei(s);break;case 4:sa();break;case 13:Fi(s);break;case 19:Wt(Ke);break;case 10:Vi(s.type);break;case 22:case 23:Fi(s),C0(),o!==null&&Wt(Go);break;case 24:Vi(Ye)}}function kl(o,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&o)===o){h=void 0;var _=c.create,C=c.inst;h=_(),C.destroy=h}c=c.next}while(c!==v)}}catch(R){ge(s,s.return,R)}}function wa(o,s,c){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var _=v.next;h=_;do{if((h.tag&o)===o){var C=h.inst,R=C.destroy;if(R!==void 0){C.destroy=void 0,v=s;var j=c,K=R;try{K()}catch(nt){ge(v,j,nt)}}}h=h.next}while(h!==_)}}catch(nt){ge(s,s.return,nt)}}function ey(o){var s=o.updateQueue;if(s!==null){var c=o.stateNode;try{zv(s,c)}catch(h){ge(o,o.return,h)}}}function ny(o,s,c){c.props=Xo(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(h){ge(o,s,h)}}function Vl(o,s){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof c=="function"?o.refCleanup=c(h):c.current=h}}catch(v){ge(o,s,v)}}function ai(o,s){var c=o.ref,h=o.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){ge(o,s,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){ge(o,s,v)}else c.current=null}function ry(o){var s=o.type,c=o.memoizedProps,h=o.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){ge(o,o.return,v)}}function t1(o,s,c){try{var h=o.stateNode;N3(h,o.type,c,s),h[Ve]=s}catch(v){ge(o,o.return,v)}}function iy(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Da(o.type)||o.tag===4}function e1(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||iy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Da(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function n1(o,s,c){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(o),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=fh));else if(h!==4&&(h===27&&Da(o.type)&&(c=o.stateNode,s=null),o=o.child,o!==null))for(n1(o,s,c),o=o.sibling;o!==null;)n1(o,s,c),o=o.sibling}function th(o,s,c){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?c.insertBefore(o,s):c.appendChild(o);else if(h!==4&&(h===27&&Da(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(th(o,s,c),o=o.sibling;o!==null;)th(o,s,c),o=o.sibling}function ay(o){var s=o.stateNode,c=o.memoizedProps;try{for(var h=o.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);xn(s,h,c),s[qe]=o,s[Ve]=c}catch(_){ge(o,o.return,_)}}var Hi=!1,Pe=!1,r1=!1,oy=typeof WeakSet=="function"?WeakSet:Set,un=null;function h3(o,s){if(o=o.containerInfo,I1=yh,o=mv(o),e0(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else t:{c=(c=o.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break t}var C=0,R=-1,j=-1,K=0,nt=0,ot=o,$=null;e:for(;;){for(var Z;ot!==c||v!==0&&ot.nodeType!==3||(R=C+v),ot!==_||h!==0&&ot.nodeType!==3||(j=C+h),ot.nodeType===3&&(C+=ot.nodeValue.length),(Z=ot.firstChild)!==null;)$=ot,ot=Z;for(;;){if(ot===o)break e;if($===c&&++K===v&&(R=C),$===_&&++nt===h&&(j=C),(Z=ot.nextSibling)!==null)break;ot=$,$=ot.parentNode}ot=Z}c=R===-1||j===-1?null:{start:R,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(b1={focusedElem:o,selectionRange:c},yh=!1,un=s;un!==null;)if(s=un,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,un=o;else for(;un!==null;){switch(s=un,_=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,c=s,v=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var Ct=Xo(c.type,v,c.elementType===c.type);o=h.getSnapshotBeforeUpdate(Ct,_),h.__reactInternalSnapshotBeforeUpdate=o}catch(At){ge(c,c.return,At)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,c=o.nodeType,c===9)D1(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":D1(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=s.sibling,o!==null){o.return=s.return,un=o;break}un=s.return}}function sy(o,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ta(o,c),h&4&&kl(5,c);break;case 1:if(Ta(o,c),h&4)if(o=c.stateNode,s===null)try{o.componentDidMount()}catch(C){ge(c,c.return,C)}else{var v=Xo(c.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(v,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){ge(c,c.return,C)}}h&64&&ey(c),h&512&&Vl(c,c.return);break;case 3:if(Ta(o,c),h&64&&(o=c.updateQueue,o!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{zv(o,s)}catch(C){ge(c,c.return,C)}}break;case 27:s===null&&h&4&&ay(c);case 26:case 5:Ta(o,c),s===null&&h&4&&ry(c),h&512&&Vl(c,c.return);break;case 12:Ta(o,c);break;case 13:Ta(o,c),h&4&&cy(o,c),h&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=E3.bind(null,c),U3(o,c))));break;case 22:if(h=c.memoizedState!==null||Hi,!h){s=s!==null&&s.memoizedState!==null||Pe,v=Hi;var _=Pe;Hi=h,(Pe=s)&&!_?Sa(o,c,(c.subtreeFlags&8772)!==0):Ta(o,c),Hi=v,Pe=_}break;case 30:break;default:Ta(o,c)}}function uy(o){var s=o.alternate;s!==null&&(o.alternate=null,uy(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&ha(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Te=null,Xn=!1;function Gi(o,s,c){for(c=c.child;c!==null;)ly(o,s,c),c=c.sibling}function ly(o,s,c){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(Re,c)}catch{}switch(c.tag){case 26:Pe||ai(c,s),Gi(o,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Pe||ai(c,s);var h=Te,v=Xn;Da(c.type)&&(Te=c.stateNode,Xn=!1),Gi(o,s,c),Wl(c.stateNode),Te=h,Xn=v;break;case 5:Pe||ai(c,s);case 6:if(h=Te,v=Xn,Te=null,Gi(o,s,c),Te=h,Xn=v,Te!==null)if(Xn)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(c.stateNode)}catch(_){ge(c,s,_)}else try{Te.removeChild(c.stateNode)}catch(_){ge(c,s,_)}break;case 18:Te!==null&&(Xn?(o=Te,$y(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),ec(o)):$y(Te,c.stateNode));break;case 4:h=Te,v=Xn,Te=c.stateNode.containerInfo,Xn=!0,Gi(o,s,c),Te=h,Xn=v;break;case 0:case 11:case 14:case 15:Pe||wa(2,c,s),Pe||wa(4,c,s),Gi(o,s,c);break;case 1:Pe||(ai(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&ny(c,s,h)),Gi(o,s,c);break;case 21:Gi(o,s,c);break;case 22:Pe=(h=Pe)||c.memoizedState!==null,Gi(o,s,c),Pe=h;break;default:Gi(o,s,c)}}function cy(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ec(o)}catch(c){ge(s,s.return,c)}}function d3(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new oy),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new oy),s;default:throw Error(r(435,o.tag))}}function i1(o,s){var c=d3(o);s.forEach(function(h){var v=A3.bind(null,o,h);c.has(h)||(c.add(h),h.then(v,v))})}function ir(o,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],_=o,C=s,R=C;t:for(;R!==null;){switch(R.tag){case 27:if(Da(R.type)){Te=R.stateNode,Xn=!1;break t}break;case 5:Te=R.stateNode,Xn=!1;break t;case 3:case 4:Te=R.stateNode.containerInfo,Xn=!0;break t}R=R.return}if(Te===null)throw Error(r(160));ly(_,C,v),Te=null,Xn=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)fy(s,o),s=s.sibling}var Br=null;function fy(o,s){var c=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ir(s,o),ar(o),h&4&&(wa(3,o,o.return),kl(3,o),wa(5,o,o.return));break;case 1:ir(s,o),ar(o),h&512&&(Pe||c===null||ai(c,c.return)),h&64&&Hi&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Br;if(ir(s,o),ar(o),h&512&&(Pe||c===null||ai(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=o.memoizedState,c===null)if(h===null)if(o.stateNode===null){t:{h=o.type,c=o.memoizedProps,v=v.ownerDocument||v;e:switch(h){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Eo]||_[qe]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(h),v.head.insertBefore(_,v.querySelector("head > title"))),xn(_,h,c),_[qe]=o,Ne(_),h=_;break t;case"link":var C=a2("link","href",v).get(h+(c.href||""));if(C){for(var R=0;R<C.length;R++)if(_=C[R],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(R,1);break e}}_=v.createElement(h),xn(_,h,c),v.head.appendChild(_);break;case"meta":if(C=a2("meta","content",v).get(h+(c.content||""))){for(R=0;R<C.length;R++)if(_=C[R],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(R,1);break e}}_=v.createElement(h),xn(_,h,c),v.head.appendChild(_);break;default:throw Error(r(468,h))}_[qe]=o,Ne(_),h=_}o.stateNode=h}else o2(v,o.type,o.stateNode);else o.stateNode=i2(v,h,o.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?o2(v,o.type,o.stateNode):i2(v,h,o.memoizedProps)):h===null&&o.stateNode!==null&&t1(o,o.memoizedProps,c.memoizedProps)}break;case 27:ir(s,o),ar(o),h&512&&(Pe||c===null||ai(c,c.return)),c!==null&&h&4&&t1(o,o.memoizedProps,c.memoizedProps);break;case 5:if(ir(s,o),ar(o),h&512&&(Pe||c===null||ai(c,c.return)),o.flags&32){v=o.stateNode;try{hr(v,"")}catch(Z){ge(o,o.return,Z)}}h&4&&o.stateNode!=null&&(v=o.memoizedProps,t1(o,v,c!==null?c.memoizedProps:v)),h&1024&&(r1=!0);break;case 6:if(ir(s,o),ar(o),h&4){if(o.stateNode===null)throw Error(r(162));h=o.memoizedProps,c=o.stateNode;try{c.nodeValue=h}catch(Z){ge(o,o.return,Z)}}break;case 3:if(gh=null,v=Br,Br=dh(s.containerInfo),ir(s,o),Br=v,ar(o),h&4&&c!==null&&c.memoizedState.isDehydrated)try{ec(s.containerInfo)}catch(Z){ge(o,o.return,Z)}r1&&(r1=!1,hy(o));break;case 4:h=Br,Br=dh(o.stateNode.containerInfo),ir(s,o),ar(o),Br=h;break;case 12:ir(s,o),ar(o);break;case 13:ir(s,o),ar(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(c1=cr()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,i1(o,h)));break;case 22:v=o.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,K=Hi,nt=Pe;if(Hi=K||v,Pe=nt||j,ir(s,o),Pe=nt,Hi=K,ar(o),h&8192)t:for(s=o.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||j||Hi||Pe||Wo(o)),c=null,s=o;;){if(s.tag===5||s.tag===26){if(c===null){j=c=s;try{if(_=j.stateNode,v)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{R=j.stateNode;var ot=j.memoizedProps.style,$=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Z){ge(j,j.return,Z)}}}else if(s.tag===6){if(c===null){j=s;try{j.stateNode.nodeValue=v?"":j.memoizedProps}catch(Z){ge(j,j.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=o.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,i1(o,c))));break;case 19:ir(s,o),ar(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,i1(o,h)));break;case 30:break;case 21:break;default:ir(s,o),ar(o)}}function ar(o){var s=o.flags;if(s&2){try{for(var c,h=o.return;h!==null;){if(iy(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,_=e1(o);th(o,_,v);break;case 5:var C=c.stateNode;c.flags&32&&(hr(C,""),c.flags&=-33);var R=e1(o);th(o,R,C);break;case 3:case 4:var j=c.stateNode.containerInfo,K=e1(o);n1(o,K,j);break;default:throw Error(r(161))}}catch(nt){ge(o,o.return,nt)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function hy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;hy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function Ta(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sy(o,s.alternate,s),s=s.sibling}function Wo(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:wa(4,s,s.return),Wo(s);break;case 1:ai(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&ny(s,s.return,c),Wo(s);break;case 27:Wl(s.stateNode);case 26:case 5:ai(s,s.return),Wo(s);break;case 22:s.memoizedState===null&&Wo(s);break;case 30:Wo(s);break;default:Wo(s)}o=o.sibling}}function Sa(o,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=o,_=s,C=_.flags;switch(_.tag){case 0:case 11:case 15:Sa(v,_,c),kl(4,_);break;case 1:if(Sa(v,_,c),h=_,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(K){ge(h,h.return,K)}if(h=_,v=h.updateQueue,v!==null){var R=h.stateNode;try{var j=v.shared.hiddenCallbacks;if(j!==null)for(v.shared.hiddenCallbacks=null,v=0;v<j.length;v++)jv(j[v],R)}catch(K){ge(h,h.return,K)}}c&&C&64&&ey(_),Vl(_,_.return);break;case 27:ay(_);case 26:case 5:Sa(v,_,c),c&&h===null&&C&4&&ry(_),Vl(_,_.return);break;case 12:Sa(v,_,c);break;case 13:Sa(v,_,c),c&&C&4&&cy(v,_);break;case 22:_.memoizedState===null&&Sa(v,_,c),Vl(_,_.return);break;case 30:break;default:Sa(v,_,c)}s=s.sibling}}function a1(o,s){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&wl(c))}function o1(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&wl(o))}function oi(o,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dy(o,s,c,h),s=s.sibling}function dy(o,s,c,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:oi(o,s,c,h),v&2048&&kl(9,s);break;case 1:oi(o,s,c,h);break;case 3:oi(o,s,c,h),v&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&wl(o)));break;case 12:if(v&2048){oi(o,s,c,h),o=s.stateNode;try{var _=s.memoizedProps,C=_.id,R=_.onPostCommit;typeof R=="function"&&R(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(j){ge(s,s.return,j)}}else oi(o,s,c,h);break;case 13:oi(o,s,c,h);break;case 23:break;case 22:_=s.stateNode,C=s.alternate,s.memoizedState!==null?_._visibility&2?oi(o,s,c,h):Ul(o,s):_._visibility&2?oi(o,s,c,h):(_._visibility|=2,Js(o,s,c,h,(s.subtreeFlags&10256)!==0)),v&2048&&a1(C,s);break;case 24:oi(o,s,c,h),v&2048&&o1(s.alternate,s);break;default:oi(o,s,c,h)}}function Js(o,s,c,h,v){for(v=v&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=o,C=s,R=c,j=h,K=C.flags;switch(C.tag){case 0:case 11:case 15:Js(_,C,R,j,v),kl(8,C);break;case 23:break;case 22:var nt=C.stateNode;C.memoizedState!==null?nt._visibility&2?Js(_,C,R,j,v):Ul(_,C):(nt._visibility|=2,Js(_,C,R,j,v)),v&&K&2048&&a1(C.alternate,C);break;case 24:Js(_,C,R,j,v),v&&K&2048&&o1(C.alternate,C);break;default:Js(_,C,R,j,v)}s=s.sibling}}function Ul(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=o,h=s,v=h.flags;switch(h.tag){case 22:Ul(c,h),v&2048&&a1(h.alternate,h);break;case 24:Ul(c,h),v&2048&&o1(h.alternate,h);break;default:Ul(c,h)}s=s.sibling}}var Fl=8192;function tu(o){if(o.subtreeFlags&Fl)for(o=o.child;o!==null;)py(o),o=o.sibling}function py(o){switch(o.tag){case 26:tu(o),o.flags&Fl&&o.memoizedState!==null&&Z3(Br,o.memoizedState,o.memoizedProps);break;case 5:tu(o);break;case 3:case 4:var s=Br;Br=dh(o.stateNode.containerInfo),tu(o),Br=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=Fl,Fl=16777216,tu(o),Fl=s):tu(o));break;default:tu(o)}}function gy(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function jl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];un=h,my(h,o)}gy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vy(o),o=o.sibling}function vy(o){switch(o.tag){case 0:case 11:case 15:jl(o),o.flags&2048&&wa(9,o,o.return);break;case 3:jl(o);break;case 12:jl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,eh(o)):jl(o);break;default:jl(o)}}function eh(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];un=h,my(h,o)}gy(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:wa(8,s,s.return),eh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,eh(s));break;default:eh(s)}o=o.sibling}}function my(o,s){for(;un!==null;){var c=un;switch(c.tag){case 0:case 11:case 15:wa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:wl(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,un=h;else t:for(c=o;un!==null;){h=un;var v=h.sibling,_=h.return;if(uy(h),h===c){un=null;break t}if(v!==null){v.return=_,un=v;break t}un=_}}}var p3={getCacheForType:function(o){var s=On(Ye),c=s.data.get(o);return c===void 0&&(c=o(),s.data.set(o,c)),c}},g3=typeof WeakMap=="function"?WeakMap:Map,ie=0,me=null,Bt=null,Ht=0,ae=0,or=null,Ca=!1,eu=!1,s1=!1,qi=0,De=0,Ia=0,Yo=0,u1=0,Er=0,nu=0,zl=null,Wn=null,l1=!1,c1=0,nh=1/0,rh=null,ba=null,_n=0,Ra=null,ru=null,iu=0,f1=0,h1=null,yy=null,Hl=0,d1=null;function sr(){if((ie&2)!==0&&Ht!==0)return Ht&-Ht;if(rt.T!==null){var o=qs;return o!==0?o:x1()}return ca()}function _y(){Er===0&&(Er=(Ht&536870912)===0||Qt?Zu():536870912);var o=xr.current;return o!==null&&(o.flags|=32),Er}function ur(o,s,c){(o===me&&(ae===2||ae===9)||o.cancelPendingCommit!==null)&&(au(o,0),Oa(o,Ht,Er,!1)),wi(o,c),((ie&2)===0||o!==me)&&(o===me&&((ie&2)===0&&(Yo|=c),De===4&&Oa(o,Ht,Er,!1)),si(o))}function xy(o,s,c){if((ie&6)!==0)throw Error(r(327));var h=!c&&(s&124)===0&&(s&o.expiredLanes)===0||xo(o,s),v=h?y3(o,s):v1(o,s,!0),_=h;do{if(v===0){eu&&!h&&Oa(o,s,0,!1);break}else{if(c=o.current.alternate,_&&!v3(c)){v=v1(o,s,!1),_=!1;continue}if(v===2){if(_=s,o.errorRecoveryDisabledLanes&_)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;t:{var R=o;v=zl;var j=R.current.memoizedState.isDehydrated;if(j&&(au(R,C).flags|=256),C=v1(R,C,!1),C!==2){if(s1&&!j){R.errorRecoveryDisabledLanes|=_,Yo|=_,v=4;break t}_=Wn,Wn=v,_!==null&&(Wn===null?Wn=_:Wn.push.apply(Wn,_))}v=C}if(_=!1,v!==2)continue}}if(v===1){au(o,0),Oa(o,s,0,!0);break}t:{switch(h=o,_=v,_){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Oa(h,s,Er,!Ca);break t;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(v=c1+300-cr(),10<v)){if(Oa(h,s,Er,!Ca),As(h,0,!0)!==0)break t;h.timeoutHandle=Ky(Ey.bind(null,h,c,Wn,rh,l1,s,Er,Yo,nu,Ca,_,2,-0,0),v);break t}Ey(h,c,Wn,rh,l1,s,Er,Yo,nu,Ca,_,0,-0,0)}}break}while(!0);si(o)}function Ey(o,s,c,h,v,_,C,R,j,K,nt,ot,$,Z){if(o.timeoutHandle=-1,ot=s.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:$3},py(s),ot=J3(),ot!==null)){o.cancelPendingCommit=ot(by.bind(null,o,s,_,c,h,v,C,R,j,nt,1,$,Z)),Oa(o,_,C,!K);return}by(o,s,_,c,h,v,C,R,j)}function v3(o){for(var s=o;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],_=v.getSnapshot;v=v.value;try{if(!nr(_(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Oa(o,s,c,h){s&=~u1,s&=~Yo,o.suspendedLanes|=s,o.pingedLanes&=~s,h&&(o.warmLanes|=s),h=o.expirationTimes;for(var v=s;0<v;){var _=31-Rn(v),C=1<<_;h[_]=-1,v&=~C}c!==0&&Xr(o,c,s)}function ih(){return(ie&6)===0?(Gl(0),!1):!0}function p1(){if(Bt!==null){if(ae===0)var o=Bt.return;else o=Bt,ki=zo=null,D0(o),$s=null,Pl=0,o=Bt;for(;o!==null;)ty(o.alternate,o),o=o.return;Bt=null}}function au(o,s){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,P3(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),p1(),me=o,Bt=c=Pi(o.current,null),Ht=s,ae=0,or=null,Ca=!1,eu=xo(o,s),s1=!1,nu=Er=u1=Yo=Ia=De=0,Wn=zl=null,l1=!1,(s&8)!==0&&(s|=s&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=s;0<h;){var v=31-Rn(h),_=1<<v;s|=o[v],h&=~_}return qi=s,Cf(),c}function Ay(o,s){Dt=null,rt.H=qf,s===Sl||s===Lf?(s=Uv(),ae=3):s===Bv?(s=Uv(),ae=4):ae=s===Fm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,or=s,Bt===null&&(De=1,Qf(o,vr(s,o.current)))}function wy(){var o=rt.H;return rt.H=qf,o===null?qf:o}function Ty(){var o=rt.A;return rt.A=p3,o}function g1(){De=4,Ca||(Ht&4194048)!==Ht&&xr.current!==null||(eu=!0),(Ia&134217727)===0&&(Yo&134217727)===0||me===null||Oa(me,Ht,Er,!1)}function v1(o,s,c){var h=ie;ie|=2;var v=wy(),_=Ty();(me!==o||Ht!==s)&&(rh=null,au(o,s)),s=!1;var C=De;t:do try{if(ae!==0&&Bt!==null){var R=Bt,j=or;switch(ae){case 8:p1(),C=6;break t;case 3:case 2:case 9:case 6:xr.current===null&&(s=!0);var K=ae;if(ae=0,or=null,ou(o,R,j,K),c&&eu){C=0;break t}break;default:K=ae,ae=0,or=null,ou(o,R,j,K)}}m3(),C=De;break}catch(nt){Ay(o,nt)}while(!0);return s&&o.shellSuspendCounter++,ki=zo=null,ie=h,rt.H=v,rt.A=_,Bt===null&&(me=null,Ht=0,Cf()),C}function m3(){for(;Bt!==null;)Sy(Bt)}function y3(o,s){var c=ie;ie|=2;var h=wy(),v=Ty();me!==o||Ht!==s?(rh=null,nh=cr()+500,au(o,s)):eu=xo(o,s);t:do try{if(ae!==0&&Bt!==null){s=Bt;var _=or;e:switch(ae){case 1:ae=0,or=null,ou(o,s,_,1);break;case 2:case 9:if(kv(_)){ae=0,or=null,Cy(s);break}s=function(){ae!==2&&ae!==9||me!==o||(ae=7),si(o)},_.then(s,s);break t;case 3:ae=7;break t;case 4:ae=5;break t;case 7:kv(_)?(ae=0,or=null,Cy(s)):(ae=0,or=null,ou(o,s,_,7));break;case 5:var C=null;switch(Bt.tag){case 26:C=Bt.memoizedState;case 5:case 27:var R=Bt;if(!C||s2(C)){ae=0,or=null;var j=R.sibling;if(j!==null)Bt=j;else{var K=R.return;K!==null?(Bt=K,ah(K)):Bt=null}break e}}ae=0,or=null,ou(o,s,_,5);break;case 6:ae=0,or=null,ou(o,s,_,6);break;case 8:p1(),De=6;break t;default:throw Error(r(462))}}_3();break}catch(nt){Ay(o,nt)}while(!0);return ki=zo=null,rt.H=h,rt.A=v,ie=c,Bt!==null?0:(me=null,Ht=0,Cf(),De)}function _3(){for(;Bt!==null&&!Yu();)Sy(Bt)}function Sy(o){var s=Zm(o.alternate,o,qi);o.memoizedProps=o.pendingProps,s===null?ah(o):Bt=s}function Cy(o){var s=o,c=s.alternate;switch(s.tag){case 15:case 0:s=Xm(c,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=Xm(c,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:D0(s);default:ty(c,s),s=Bt=Iv(s,qi),s=Zm(c,s,qi)}o.memoizedProps=o.pendingProps,s===null?ah(o):Bt=s}function ou(o,s,c,h){ki=zo=null,D0(s),$s=null,Pl=0;var v=s.return;try{if(u3(o,v,s,c,Ht)){De=1,Qf(o,vr(c,o.current)),Bt=null;return}}catch(_){if(v!==null)throw Bt=v,_;De=1,Qf(o,vr(c,o.current)),Bt=null;return}s.flags&32768?(Qt||h===1?o=!0:eu||(Ht&536870912)!==0?o=!1:(Ca=o=!0,(h===2||h===9||h===3||h===6)&&(h=xr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Iy(s,o)):ah(s)}function ah(o){var s=o;do{if((s.flags&32768)!==0){Iy(s,Ca);return}o=s.return;var c=c3(s.alternate,s,qi);if(c!==null){Bt=c;return}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=o}while(s!==null);De===0&&(De=5)}function Iy(o,s){do{var c=f3(o.alternate,o);if(c!==null){c.flags&=32767,Bt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(o=o.sibling,o!==null)){Bt=o;return}Bt=o=c}while(o!==null);De=6,Bt=null}function by(o,s,c,h,v,_,C,R,j){o.cancelPendingCommit=null;do oh();while(_n!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===o.current)throw Error(r(177));if(_=s.lanes|s.childLanes,_|=o0,tl(o,c,_,C,R,j),o===me&&(Bt=me=null,Ht=0),ru=s,Ra=o,iu=c,f1=_,h1=v,yy=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,w3(vo,function(){return My(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=rt.T,rt.T=null,v=ft.p,ft.p=2,C=ie,ie|=4;try{h3(o,s,c)}finally{ie=C,ft.p=v,rt.T=h}}_n=1,Ry(),Oy(),Dy()}}function Ry(){if(_n===1){_n=0;var o=Ra,s=ru,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=rt.T,rt.T=null;var h=ft.p;ft.p=2;var v=ie;ie|=4;try{fy(s,o);var _=b1,C=mv(o.containerInfo),R=_.focusedElem,j=_.selectionRange;if(C!==R&&R&&R.ownerDocument&&vv(R.ownerDocument.documentElement,R)){if(j!==null&&e0(R)){var K=j.start,nt=j.end;if(nt===void 0&&(nt=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(nt,R.value.length);else{var ot=R.ownerDocument||document,$=ot&&ot.defaultView||window;if($.getSelection){var Z=$.getSelection(),Ct=R.textContent.length,At=Math.min(j.start,Ct),de=j.end===void 0?At:Math.min(j.end,Ct);!Z.extend&&At>de&&(C=de,de=At,At=C);var X=gv(R,At),G=gv(R,de);if(X&&G&&(Z.rangeCount!==1||Z.anchorNode!==X.node||Z.anchorOffset!==X.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var Y=ot.createRange();Y.setStart(X.node,X.offset),Z.removeAllRanges(),At>de?(Z.addRange(Y),Z.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),Z.addRange(Y))}}}}for(ot=[],Z=R;Z=Z.parentNode;)Z.nodeType===1&&ot.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ot.length;R++){var at=ot[R];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}yh=!!I1,b1=I1=null}finally{ie=v,ft.p=h,rt.T=c}}o.current=s,_n=2}}function Oy(){if(_n===2){_n=0;var o=Ra,s=ru,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=rt.T,rt.T=null;var h=ft.p;ft.p=2;var v=ie;ie|=4;try{sy(o,s.alternate,s)}finally{ie=v,ft.p=h,rt.T=c}}_n=3}}function Dy(){if(_n===4||_n===3){_n=0,tf();var o=Ra,s=ru,c=iu,h=yy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?_n=5:(_n=0,ru=Ra=null,Ny(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(ba=null),ws(c),s=s.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(Re,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=rt.T,v=ft.p,ft.p=2,rt.T=null;try{for(var _=o.onRecoverableError,C=0;C<h.length;C++){var R=h[C];_(R.value,{componentStack:R.stack})}}finally{rt.T=s,ft.p=v}}(iu&3)!==0&&oh(),si(o),v=o.pendingLanes,(c&4194090)!==0&&(v&42)!==0?o===d1?Hl++:(Hl=0,d1=o):Hl=0,Gl(0)}}function Ny(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,wl(s)))}function oh(o){return Ry(),Oy(),Dy(),My()}function My(){if(_n!==5)return!1;var o=Ra,s=f1;f1=0;var c=ws(iu),h=rt.T,v=ft.p;try{ft.p=32>c?32:c,rt.T=null,c=h1,h1=null;var _=Ra,C=iu;if(_n=0,ru=Ra=null,iu=0,(ie&6)!==0)throw Error(r(331));var R=ie;if(ie|=4,vy(_.current),dy(_,_.current,C,c),ie=R,Gl(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(Re,_)}catch{}return!0}finally{ft.p=v,rt.T=h,Ny(o,s)}}function Py(o,s,c){s=vr(c,s),s=q0(o.stateNode,s,2),o=_a(o,s,2),o!==null&&(wi(o,2),si(o))}function ge(o,s,c){if(o.tag===3)Py(o,o,c);else for(;s!==null;){if(s.tag===3){Py(s,o,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ba===null||!ba.has(h))){o=vr(c,o),c=Vm(2),h=_a(s,c,2),h!==null&&(Um(c,h,s,o),wi(h,2),si(h));break}}s=s.return}}function m1(o,s,c){var h=o.pingCache;if(h===null){h=o.pingCache=new g3;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(c)||(s1=!0,v.add(c),o=x3.bind(null,o,s,c),s.then(o,o))}function x3(o,s,c){var h=o.pingCache;h!==null&&h.delete(s),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,me===o&&(Ht&c)===c&&(De===4||De===3&&(Ht&62914560)===Ht&&300>cr()-c1?(ie&2)===0&&au(o,0):u1|=c,nu===Ht&&(nu=0)),si(o)}function Ly(o,s){s===0&&(s=Ju()),o=js(o,s),o!==null&&(wi(o,s),si(o))}function E3(o){var s=o.memoizedState,c=0;s!==null&&(c=s.retryLane),Ly(o,c)}function A3(o,s){var c=0;switch(o.tag){case 13:var h=o.stateNode,v=o.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),Ly(o,c)}function w3(o,s){return po(o,s)}var sh=null,su=null,y1=!1,uh=!1,_1=!1,Ko=0;function si(o){o!==su&&o.next===null&&(su===null?sh=su=o:su=su.next=o),uh=!0,y1||(y1=!0,S3())}function Gl(o,s){if(!_1&&uh){_1=!0;do for(var c=!1,h=sh;h!==null;){if(o!==0){var v=h.pendingLanes;if(v===0)var _=0;else{var C=h.suspendedLanes,R=h.pingedLanes;_=(1<<31-Rn(42|o)+1)-1,_&=v&~(C&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Uy(h,_))}else _=Ht,_=As(h,h===me?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||xo(h,_)||(c=!0,Uy(h,_));h=h.next}while(c);_1=!1}}function T3(){By()}function By(){uh=y1=!1;var o=0;Ko!==0&&(M3()&&(o=Ko),Ko=0);for(var s=cr(),c=null,h=sh;h!==null;){var v=h.next,_=ky(h,s);_===0?(h.next=null,c===null?sh=v:c.next=v,v===null&&(su=c)):(c=h,(o!==0||(_&3)!==0)&&(uh=!0)),h=v}Gl(o)}function ky(o,s){for(var c=o.suspendedLanes,h=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var C=31-Rn(_),R=1<<C,j=v[C];j===-1?((R&c)===0||(R&h)!==0)&&(v[C]=$u(R,s)):j<=s&&(o.expiredLanes|=R),_&=~R}if(s=me,c=Ht,c=As(o,o===s?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,c===0||o===s&&(ae===2||ae===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&go(h),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||xo(o,c)){if(s=c&-c,s===o.callbackPriority)return s;switch(h!==null&&go(h),ws(c)){case 2:case 8:c=xs;break;case 32:c=vo;break;case 268435456:c=Es;break;default:c=vo}return h=Vy.bind(null,o),c=po(c,h),o.callbackPriority=s,o.callbackNode=c,s}return h!==null&&h!==null&&go(h),o.callbackPriority=2,o.callbackNode=null,2}function Vy(o,s){if(_n!==0&&_n!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(oh()&&o.callbackNode!==c)return null;var h=Ht;return h=As(o,o===me?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(xy(o,h,s),ky(o,cr()),o.callbackNode!=null&&o.callbackNode===c?Vy.bind(null,o):null)}function Uy(o,s){if(oh())return null;xy(o,s,!0)}function S3(){L3(function(){(ie&6)!==0?po(Ku,T3):By()})}function x1(){return Ko===0&&(Ko=Zu()),Ko}function Fy(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Rs(""+o)}function jy(o,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,o.id&&c.setAttribute("form",o.id),s.parentNode.insertBefore(c,s),o=new FormData(o),c.parentNode.removeChild(c),o}function C3(o,s,c,h,v){if(s==="submit"&&c&&c.stateNode===v){var _=Fy((v[Ve]||null).action),C=h.submitter;C&&(s=(s=C[Ve]||null)?Fy(s.formAction):C.getAttribute("formAction"),s!==null&&(_=s,C=null));var R=new Os("action","action",null,h,v);o.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ko!==0){var j=C?jy(v,C):new FormData(v);F0(c,{pending:!0,data:j,method:v.method,action:_},null,j)}}else typeof _=="function"&&(R.preventDefault(),j=C?jy(v,C):new FormData(v),F0(c,{pending:!0,data:j,method:v.method,action:_},_,j))},currentTarget:v}]})}}for(var E1=0;E1<a0.length;E1++){var A1=a0[E1],I3=A1.toLowerCase(),b3=A1[0].toUpperCase()+A1.slice(1);Lr(I3,"on"+b3)}Lr(xv,"onAnimationEnd"),Lr(Ev,"onAnimationIteration"),Lr(Av,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(qw,"onTransitionRun"),Lr(Xw,"onTransitionStart"),Lr(Ww,"onTransitionCancel"),Lr(wv,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function zy(o,s){s=(s&4)!==0;for(var c=0;c<o.length;c++){var h=o[c],v=h.event;h=h.listeners;t:{var _=void 0;if(s)for(var C=h.length-1;0<=C;C--){var R=h[C],j=R.instance,K=R.currentTarget;if(R=R.listener,j!==_&&v.isPropagationStopped())break t;_=R,v.currentTarget=K;try{_(v)}catch(nt){Kf(nt)}v.currentTarget=null,_=j}else for(C=0;C<h.length;C++){if(R=h[C],j=R.instance,K=R.currentTarget,R=R.listener,j!==_&&v.isPropagationStopped())break t;_=R,v.currentTarget=K;try{_(v)}catch(nt){Kf(nt)}v.currentTarget=null,_=j}}}}function kt(o,s){var c=s[nl];c===void 0&&(c=s[nl]=new Set);var h=o+"__bubble";c.has(h)||(Hy(s,o,2,!1),c.add(h))}function w1(o,s,c){var h=0;s&&(h|=4),Hy(c,o,h,s)}var lh="_reactListening"+Math.random().toString(36).slice(2);function T1(o){if(!o[lh]){o[lh]=!0,rl.forEach(function(c){c!=="selectionchange"&&(R3.has(c)||w1(c,!1,o),w1(c,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[lh]||(s[lh]=!0,w1("selectionchange",!1,s))}}function Hy(o,s,c,h){switch(d2(s)){case 2:var v=nT;break;case 8:v=rT;break;default:v=V1}c=v.bind(null,s,c,o),v=void 0,!pr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?o.addEventListener(s,c,{capture:!0,passive:v}):o.addEventListener(s,c,!0):v!==void 0?o.addEventListener(s,c,{passive:v}):o.addEventListener(s,c,!1)}function S1(o,s,c,h,v){var _=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var R=h.stateNode.containerInfo;if(R===v)break;if(C===4)for(C=h.return;C!==null;){var j=C.tag;if((j===3||j===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;R!==null;){if(C=Ti(R),C===null)return;if(j=C.tag,j===5||j===6||j===26||j===27){h=_=C;continue t}R=R.parentNode}}h=h.return}ff(function(){var K=_,nt=dr(c),ot=[];t:{var $=Tv.get(o);if($!==void 0){var Z=Os,Ct=o;switch(o){case"keypress":if(Zr(c)===0)break t;case"keydown":case"keyup":Z=Bs;break;case"focusin":Ct="focus",Z=Ms;break;case"focusout":Ct="blur",Z=Ms;break;case"beforeblur":case"afterblur":Z=Ms;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=_f;break;case xv:case Ev:case Av:Z=Ps;break;case wv:Z=Ef;break;case"scroll":case"scrollend":Z=hf;break;case"wheel":Z=ks;break;case"copy":case"cut":case"paste":Z=Ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=gl;break;case"toggle":case"beforetoggle":Z=wf}var At=(s&4)!==0,de=!At&&(o==="scroll"||o==="scrollend"),X=At?$!==null?$+"Capture":null:$;At=[];for(var G=K,Y;G!==null;){var at=G;if(Y=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Y===null||X===null||(at=bo(G,X),at!=null&&At.push(Xl(G,at,Y))),de)break;G=G.return}0<At.length&&($=new Z($,Ct,null,c,nt),ot.push({event:$,listeners:At}))}}if((s&7)===0){t:{if($=o==="mouseover"||o==="pointerover",Z=o==="mouseout"||o==="pointerout",$&&c!==bi&&(Ct=c.relatedTarget||c.fromElement)&&(Ti(Ct)||Ct[fr]))break t;if((Z||$)&&($=nt.window===nt?nt:($=nt.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(Ct=c.relatedTarget||c.toElement,Z=K,Ct=Ct?Ti(Ct):null,Ct!==null&&(de=a(Ct),At=Ct.tag,Ct!==de||At!==5&&At!==27&&At!==6)&&(Ct=null)):(Z=null,Ct=K),Z!==Ct)){if(At=gr,at="onMouseLeave",X="onMouseEnter",G="mouse",(o==="pointerout"||o==="pointerover")&&(At=gl,at="onPointerLeave",X="onPointerEnter",G="pointer"),de=Z==null?$:Yr(Z),Y=Ct==null?$:Yr(Ct),$=new At(at,G+"leave",Z,c,nt),$.target=de,$.relatedTarget=Y,at=null,Ti(nt)===K&&(At=new At(X,G+"enter",Ct,c,nt),At.target=Y,At.relatedTarget=de,at=At),de=at,Z&&Ct)e:{for(At=Z,X=Ct,G=0,Y=At;Y;Y=uu(Y))G++;for(Y=0,at=X;at;at=uu(at))Y++;for(;0<G-Y;)At=uu(At),G--;for(;0<Y-G;)X=uu(X),Y--;for(;G--;){if(At===X||X!==null&&At===X.alternate)break e;At=uu(At),X=uu(X)}At=null}else At=null;Z!==null&&Gy(ot,$,Z,At,!1),Ct!==null&&de!==null&&Gy(ot,de,Ct,At,!0)}}t:{if($=K?Yr(K):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var gt=lv;else if(We($))if(cv)gt=zw;else{gt=Fw;var Pt=Uw}else Z=$.nodeName,!Z||Z.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&ul(K.elementType)&&(gt=lv):gt=jw;if(gt&&(gt=gt(o,K))){Mi(ot,gt,c,nt);break t}Pt&&Pt(o,$,K),o==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&pa($,"number",$.value)}switch(Pt=K?Yr(K):window,o){case"focusin":(We(Pt)||Pt.contentEditable==="true")&&(Vs=Pt,n0=K,yl=null);break;case"focusout":yl=n0=Vs=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,yv(ot,c,nt);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":yv(ot,c,nt)}var mt;if(ei)t:{switch(o){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else jt?tt(o,c)&&(wt="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(wt="onCompositionStart");wt&&(T&&c.locale!=="ko"&&(jt||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&jt&&(mt=cl()):($r=nt,ga="value"in $r?$r.value:$r.textContent,jt=!0)),Pt=ch(K,wt),0<Pt.length&&(wt=new dl(wt,o,null,c,nt),ot.push({event:wt,listeners:Pt}),mt?wt.data=mt:(mt=ut(c),mt!==null&&(wt.data=mt)))),(mt=E?Xe(o,c):zt(o,c))&&(wt=ch(K,"onBeforeInput"),0<wt.length&&(Pt=new dl("onBeforeInput","beforeinput",null,c,nt),ot.push({event:Pt,listeners:wt}),Pt.data=mt)),C3(ot,o,K,c,nt)}zy(ot,s)})}function Xl(o,s,c){return{instance:o,listener:s,currentTarget:c}}function ch(o,s){for(var c=s+"Capture",h=[];o!==null;){var v=o,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=bo(o,c),v!=null&&h.unshift(Xl(o,v,_)),v=bo(o,s),v!=null&&h.push(Xl(o,v,_))),o.tag===3)return h;o=o.return}return[]}function uu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Gy(o,s,c,h,v){for(var _=s._reactName,C=[];c!==null&&c!==h;){var R=c,j=R.alternate,K=R.stateNode;if(R=R.tag,j!==null&&j===h)break;R!==5&&R!==26&&R!==27||K===null||(j=K,v?(K=bo(c,_),K!=null&&C.unshift(Xl(c,K,j))):v||(K=bo(c,_),K!=null&&C.push(Xl(c,K,j)))),c=c.return}C.length!==0&&o.push({event:s,listeners:C})}var O3=/\r\n?/g,D3=/\u0000|\uFFFD/g;function qy(o){return(typeof o=="string"?o:""+o).replace(O3,`
`).replace(D3,"")}function Xy(o,s){return s=qy(s),qy(o)===s}function fh(){}function he(o,s,c,h,v,_){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||hr(o,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&hr(o,""+h);break;case"className":Kr(o,"class",h);break;case"tabIndex":Kr(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(o,c,h);break;case"style":sl(o,h,_);break;case"data":if(s!=="object"){Kr(o,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){o.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(c);break}h=Rs(""+h),o.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(s!=="input"&&he(o,s,"name",v.name,v,null),he(o,s,"formEncType",v.formEncType,v,null),he(o,s,"formMethod",v.formMethod,v,null),he(o,s,"formTarget",v.formTarget,v,null)):(he(o,s,"encType",v.encType,v,null),he(o,s,"method",v.method,v,null),he(o,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(c);break}h=Rs(""+h),o.setAttribute(c,h);break;case"onClick":h!=null&&(o.onclick=fh);break;case"onScroll":h!=null&&kt("scroll",o);break;case"onScrollEnd":h!=null&&kt("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}c=Rs(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(c,""+h):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":h===!0?o.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(c,h):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(c,h):o.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(c):o.setAttribute(c,h);break;case"popover":kt("beforetoggle",o),kt("toggle",o),da(o,"popover",h);break;case"xlinkActuate":vn(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":vn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":vn(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":vn(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":vn(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":vn(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":vn(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":vn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":vn(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":da(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Kd.get(c)||c,da(o,c,h))}}function C1(o,s,c,h,v,_){switch(c){case"style":sl(o,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof h=="string"?hr(o,h):(typeof h=="number"||typeof h=="bigint")&&hr(o,""+h);break;case"onScroll":h!=null&&kt("scroll",o);break;case"onScrollEnd":h!=null&&kt("scrollend",o);break;case"onClick":h!=null&&(o.onclick=fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ts.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),_=o[Ve]||null,_=_!=null?_[c]:null,typeof _=="function"&&o.removeEventListener(s,_,v),typeof h=="function")){typeof _!="function"&&_!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(s,h,v);break t}c in o?o[c]=h:h===!0?o.setAttribute(c,""):da(o,c,h)}}}function xn(o,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",o),kt("load",o);var h=!1,v=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var C=c[_];if(C!=null)switch(_){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:he(o,s,_,C,c,null)}}v&&he(o,s,"srcSet",c.srcSet,c,null),h&&he(o,s,"src",c.src,c,null);return;case"input":kt("invalid",o);var R=_=C=v=null,j=null,K=null;for(h in c)if(c.hasOwnProperty(h)){var nt=c[h];if(nt!=null)switch(h){case"name":v=nt;break;case"type":C=nt;break;case"checked":j=nt;break;case"defaultChecked":K=nt;break;case"value":_=nt;break;case"defaultValue":R=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,s));break;default:he(o,s,h,nt,c,null)}}So(o,_,R,j,K,C,v,!1),bs(o);return;case"select":kt("invalid",o),h=C=_=null;for(v in c)if(c.hasOwnProperty(v)&&(R=c[v],R!=null))switch(v){case"value":_=R;break;case"defaultValue":C=R;break;case"multiple":h=R;default:he(o,s,v,R,c,null)}s=_,c=C,o.multiple=!!h,s!=null?Ii(o,!!h,s,!1):c!=null&&Ii(o,!!h,c,!0);return;case"textarea":kt("invalid",o),_=v=h=null;for(C in c)if(c.hasOwnProperty(C)&&(R=c[C],R!=null))switch(C){case"value":h=R;break;case"defaultValue":v=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:he(o,s,C,R,c,null)}Co(o,h,v,_),bs(o);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(h=c[j],h!=null))switch(j){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:he(o,s,j,h,c,null)}return;case"dialog":kt("beforetoggle",o),kt("toggle",o),kt("cancel",o),kt("close",o);break;case"iframe":case"object":kt("load",o);break;case"video":case"audio":for(h=0;h<ql.length;h++)kt(ql[h],o);break;case"image":kt("error",o),kt("load",o);break;case"details":kt("toggle",o);break;case"embed":case"source":case"link":kt("error",o),kt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in c)if(c.hasOwnProperty(K)&&(h=c[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:he(o,s,K,h,c,null)}return;default:if(ul(s)){for(nt in c)c.hasOwnProperty(nt)&&(h=c[nt],h!==void 0&&C1(o,s,nt,h,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(h=c[R],h!=null&&he(o,s,R,h,c,null))}function N3(o,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,C=null,R=null,j=null,K=null,nt=null;for(Z in c){var ot=c[Z];if(c.hasOwnProperty(Z)&&ot!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=ot;default:h.hasOwnProperty(Z)||he(o,s,Z,null,h,ot)}}for(var $ in h){var Z=h[$];if(ot=c[$],h.hasOwnProperty($)&&(Z!=null||ot!=null))switch($){case"type":_=Z;break;case"name":v=Z;break;case"checked":K=Z;break;case"defaultChecked":nt=Z;break;case"value":C=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==ot&&he(o,s,$,Z,h,ot)}}er(o,C,R,j,K,nt,_,v);return;case"select":Z=C=R=$=null;for(_ in c)if(j=c[_],c.hasOwnProperty(_)&&j!=null)switch(_){case"value":break;case"multiple":Z=j;default:h.hasOwnProperty(_)||he(o,s,_,null,h,j)}for(v in h)if(_=h[v],j=c[v],h.hasOwnProperty(v)&&(_!=null||j!=null))switch(v){case"value":$=_;break;case"defaultValue":R=_;break;case"multiple":C=_;default:_!==j&&he(o,s,v,_,h,j)}s=R,c=C,h=Z,$!=null?Ii(o,!!c,$,!1):!!h!=!!c&&(s!=null?Ii(o,!!c,s,!0):Ii(o,!!c,c?[]:"",!1));return;case"textarea":Z=$=null;for(R in c)if(v=c[R],c.hasOwnProperty(R)&&v!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:he(o,s,R,null,h,v)}for(C in h)if(v=h[C],_=c[C],h.hasOwnProperty(C)&&(v!=null||_!=null))switch(C){case"value":$=v;break;case"defaultValue":Z=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==_&&he(o,s,C,v,h,_)}ce(o,$,Z);return;case"option":for(var Ct in c)if($=c[Ct],c.hasOwnProperty(Ct)&&$!=null&&!h.hasOwnProperty(Ct))switch(Ct){case"selected":o.selected=!1;break;default:he(o,s,Ct,null,h,$)}for(j in h)if($=h[j],Z=c[j],h.hasOwnProperty(j)&&$!==Z&&($!=null||Z!=null))switch(j){case"selected":o.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:he(o,s,j,$,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in c)$=c[At],c.hasOwnProperty(At)&&$!=null&&!h.hasOwnProperty(At)&&he(o,s,At,null,h,$);for(K in h)if($=h[K],Z=c[K],h.hasOwnProperty(K)&&$!==Z&&($!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:he(o,s,K,$,h,Z)}return;default:if(ul(s)){for(var de in c)$=c[de],c.hasOwnProperty(de)&&$!==void 0&&!h.hasOwnProperty(de)&&C1(o,s,de,void 0,h,$);for(nt in h)$=h[nt],Z=c[nt],!h.hasOwnProperty(nt)||$===Z||$===void 0&&Z===void 0||C1(o,s,nt,$,h,Z);return}}for(var X in c)$=c[X],c.hasOwnProperty(X)&&$!=null&&!h.hasOwnProperty(X)&&he(o,s,X,null,h,$);for(ot in h)$=h[ot],Z=c[ot],!h.hasOwnProperty(ot)||$===Z||$==null&&Z==null||he(o,s,ot,$,h,Z)}var I1=null,b1=null;function hh(o){return o.nodeType===9?o:o.ownerDocument}function Wy(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yy(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function R1(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var O1=null;function M3(){var o=window.event;return o&&o.type==="popstate"?o===O1?!1:(O1=o,!0):(O1=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(o){return Qy.resolve(null).then(o).catch(B3)}:Ky;function B3(o){setTimeout(function(){throw o})}function Da(o){return o==="head"}function $y(o,s){var c=s,h=0,v=0;do{var _=c.nextSibling;if(o.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(0<h&&8>h){c=h;var C=o.ownerDocument;if(c&1&&Wl(C.documentElement),c&2&&Wl(C.body),c&4)for(c=C.head,Wl(c),C=c.firstChild;C;){var R=C.nextSibling,j=C.nodeName;C[Eo]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&C.rel.toLowerCase()==="stylesheet"||c.removeChild(C),C=R}}if(v===0){o.removeChild(_),ec(s);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:h=c.charCodeAt(0)-48;else h=0;c=_}while(c);ec(s)}function D1(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":D1(c),ha(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function k3(o,s,c,h){for(;o.nodeType===1;){var v=c;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[Eo])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=kr(o.nextSibling),o===null)break}return null}function V3(o,s,c){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=kr(o.nextSibling),o===null))return null;return o}function N1(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function U3(o,s){var c=o.ownerDocument;if(o.data!=="$?"||c.readyState==="complete")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function kr(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var M1=null;function Zy(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return o;s--}else c==="/$"&&s++}o=o.previousSibling}return null}function Jy(o,s,c){switch(s=hh(c),o){case"html":if(o=s.documentElement,!o)throw Error(r(452));return o;case"head":if(o=s.head,!o)throw Error(r(453));return o;case"body":if(o=s.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Wl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);ha(o)}var Ar=new Map,t2=new Set;function dh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xi=ft.d;ft.d={f:F3,r:j3,D:z3,C:H3,L:G3,m:q3,X:W3,S:X3,M:Y3};function F3(){var o=Xi.f(),s=ih();return o||s}function j3(o){var s=Wr(o);s!==null&&s.tag===5&&s.type==="form"?xm(s):Xi.r(o)}var lu=typeof document>"u"?null:document;function e2(o,s,c){var h=lu;if(h&&typeof s=="string"&&s){var v=Ue(s);v='link[rel="'+o+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),t2.has(v)||(t2.add(v),o={rel:o,crossOrigin:c,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),xn(s,"link",o),Ne(s),h.head.appendChild(s)))}}function z3(o){Xi.D(o),e2("dns-prefetch",o,null)}function H3(o,s){Xi.C(o,s),e2("preconnect",o,s)}function G3(o,s,c){Xi.L(o,s,c);var h=lu;if(h&&o&&s){var v='link[rel="preload"][as="'+Ue(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Ue(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Ue(c.imageSizes)+'"]')):v+='[href="'+Ue(o)+'"]';var _=v;switch(s){case"style":_=cu(o);break;case"script":_=fu(o)}Ar.has(_)||(o=g({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:o,as:s},c),Ar.set(_,o),h.querySelector(v)!==null||s==="style"&&h.querySelector(Yl(_))||s==="script"&&h.querySelector(Kl(_))||(s=h.createElement("link"),xn(s,"link",o),Ne(s),h.head.appendChild(s)))}}function q3(o,s){Xi.m(o,s);var c=lu;if(c&&o){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+Ue(h)+'"][href="'+Ue(o)+'"]',_=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fu(o)}if(!Ar.has(_)&&(o=g({rel:"modulepreload",href:o},s),Ar.set(_,o),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Kl(_)))return}h=c.createElement("link"),xn(h,"link",o),Ne(h),c.head.appendChild(h)}}}function X3(o,s,c){Xi.S(o,s,c);var h=lu;if(h&&o){var v=Vn(h).hoistableStyles,_=cu(o);s=s||"default";var C=v.get(_);if(!C){var R={loading:0,preload:null};if(C=h.querySelector(Yl(_)))R.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":s},c),(c=Ar.get(_))&&P1(o,c);var j=C=h.createElement("link");Ne(j),xn(j,"link",o),j._p=new Promise(function(K,nt){j.onload=K,j.onerror=nt}),j.addEventListener("load",function(){R.loading|=1}),j.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ph(C,s,h)}C={type:"stylesheet",instance:C,count:1,state:R},v.set(_,C)}}}function W3(o,s){Xi.X(o,s);var c=lu;if(c&&o){var h=Vn(c).hoistableScripts,v=fu(o),_=h.get(v);_||(_=c.querySelector(Kl(v)),_||(o=g({src:o,async:!0},s),(s=Ar.get(v))&&L1(o,s),_=c.createElement("script"),Ne(_),xn(_,"link",o),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(v,_))}}function Y3(o,s){Xi.M(o,s);var c=lu;if(c&&o){var h=Vn(c).hoistableScripts,v=fu(o),_=h.get(v);_||(_=c.querySelector(Kl(v)),_||(o=g({src:o,async:!0,type:"module"},s),(s=Ar.get(v))&&L1(o,s),_=c.createElement("script"),Ne(_),xn(_,"link",o),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(v,_))}}function n2(o,s,c,h){var v=(v=qr.current)?dh(v):null;if(!v)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=cu(c.href),c=Vn(v).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=cu(c.href);var _=Vn(v).hoistableStyles,C=_.get(o);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,C),(_=v.querySelector(Yl(o)))&&!_._p&&(C.instance=_,C.state.loading=5),Ar.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ar.set(o,c),_||K3(v,o,c,C.state))),s&&h===null)throw Error(r(528,""));return C}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=fu(c),c=Vn(v).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function cu(o){return'href="'+Ue(o)+'"'}function Yl(o){return'link[rel="stylesheet"]['+o+"]"}function r2(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function K3(o,s,c,h){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=o.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),xn(s,"link",c),Ne(s),o.head.appendChild(s))}function fu(o){return'[src="'+Ue(o)+'"]'}function Kl(o){return"script[async]"+o}function i2(o,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=o.querySelector('style[data-href~="'+Ue(c.href)+'"]');if(h)return s.instance=h,Ne(h),h;var v=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),Ne(h),xn(h,"style",v),ph(h,c.precedence,o),s.instance=h;case"stylesheet":v=cu(c.href);var _=o.querySelector(Yl(v));if(_)return s.state.loading|=4,s.instance=_,Ne(_),_;h=r2(c),(v=Ar.get(v))&&P1(h,v),_=(o.ownerDocument||o).createElement("link"),Ne(_);var C=_;return C._p=new Promise(function(R,j){C.onload=R,C.onerror=j}),xn(_,"link",h),s.state.loading|=4,ph(_,c.precedence,o),s.instance=_;case"script":return _=fu(c.src),(v=o.querySelector(Kl(_)))?(s.instance=v,Ne(v),v):(h=c,(v=Ar.get(_))&&(h=g({},c),L1(h,v)),o=o.ownerDocument||o,v=o.createElement("script"),Ne(v),xn(v,"link",h),o.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,ph(h,c.precedence,o));return s.instance}function ph(o,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,_=v,C=0;C<h.length;C++){var R=h[C];if(R.dataset.precedence===s)_=R;else if(_!==v)break}_?_.parentNode.insertBefore(o,_.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(o,s.firstChild))}function P1(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function L1(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var gh=null;function a2(o,s,c){if(gh===null){var h=new Map,v=gh=new Map;v.set(c,h)}else v=gh,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(o))return h;for(h.set(o,null),c=c.getElementsByTagName(o),v=0;v<c.length;v++){var _=c[v];if(!(_[Eo]||_[qe]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(s)||"";C=o+C;var R=h.get(C);R?R.push(_):h.set(C,[_])}}return h}function o2(o,s,c){o=o.ownerDocument||o,o.head.insertBefore(c,s==="title"?o.querySelector("head > title"):null)}function Q3(o,s,c){if(c===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function s2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Ql=null;function $3(){}function Z3(o,s,c){if(Ql===null)throw Error(r(475));var h=Ql;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var v=cu(c.href),_=o.querySelector(Yl(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(h.count++,h=vh.bind(h),o.then(h,h)),s.state.loading|=4,s.instance=_,Ne(_);return}_=o.ownerDocument||o,c=r2(c),(v=Ar.get(v))&&P1(c,v),_=_.createElement("link"),Ne(_);var C=_;C._p=new Promise(function(R,j){C.onload=R,C.onerror=j}),xn(_,"link",c),s.instance=_}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=vh.bind(h),o.addEventListener("load",s),o.addEventListener("error",s))}}function J3(){if(Ql===null)throw Error(r(475));var o=Ql;return o.stylesheets&&o.count===0&&B1(o,o.stylesheets),0<o.count?function(s){var c=setTimeout(function(){if(o.stylesheets&&B1(o,o.stylesheets),o.unsuspend){var h=o.unsuspend;o.unsuspend=null,h()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(c)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)B1(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var mh=null;function B1(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,mh=new Map,s.forEach(tT,o),mh=null,vh.call(o))}function tT(o,s){if(!(s.state.loading&4)){var c=mh.get(o);if(c)var h=c.get(null);else{c=new Map,mh.set(o,c);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var C=v[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),h=C)}h&&c.set(null,h)}v=s.instance,C=v.getAttribute("data-precedence"),_=c.get(C)||h,_===h&&c.set(null,v),c.set(C,v),this.count++,h=vh.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),_?_.parentNode.insertBefore(v,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),s.state.loading|=4}}var $l={$$typeof:k,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function eT(o,s,c,h,v,_,C,R){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function u2(o,s,c,h,v,_,C,R,j,K,nt,ot){return o=new eT(o,s,c,C,R,j,K,ot),s=1,_===!0&&(s|=24),_=rr(3,null,null,s),o.current=_,_.stateNode=o,s=m0(),s.refCount++,o.pooledCache=s,s.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:s},E0(_),o}function l2(o){return o?(o=zs,o):zs}function c2(o,s,c,h,v,_){v=l2(v),h.context===null?h.context=v:h.pendingContext=v,h=ya(s),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=_a(o,h,s),c!==null&&(ur(c,o,s),Il(c,o,s))}function f2(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<s?c:s}}function k1(o,s){f2(o,s),(o=o.alternate)&&f2(o,s)}function h2(o){if(o.tag===13){var s=js(o,67108864);s!==null&&ur(s,o,67108864),k1(o,67108864)}}var yh=!0;function nT(o,s,c,h){var v=rt.T;rt.T=null;var _=ft.p;try{ft.p=2,V1(o,s,c,h)}finally{ft.p=_,rt.T=v}}function rT(o,s,c,h){var v=rt.T;rt.T=null;var _=ft.p;try{ft.p=8,V1(o,s,c,h)}finally{ft.p=_,rt.T=v}}function V1(o,s,c,h){if(yh){var v=U1(h);if(v===null)S1(o,s,h,_h,c),p2(o,h);else if(aT(v,o,s,c,h))h.stopPropagation();else if(p2(o,h),s&4&&-1<iT.indexOf(o)){for(;v!==null;){var _=Wr(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Nr(_.pendingLanes);if(C!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;C;){var j=1<<31-Rn(C);R.entanglements[1]|=j,C&=~j}si(_),(ie&6)===0&&(nh=cr()+500,Gl(0))}}break;case 13:R=js(_,2),R!==null&&ur(R,_,2),ih(),k1(_,2)}if(_=U1(h),_===null&&S1(o,s,h,_h,c),_===v)break;v=_}v!==null&&h.stopPropagation()}else S1(o,s,h,null,c)}}function U1(o){return o=dr(o),F1(o)}var _h=null;function F1(o){if(_h=null,o=Ti(o),o!==null){var s=a(o);if(s===null)o=null;else{var c=s.tag;if(c===13){if(o=u(s),o!==null)return o;o=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return _h=o,null}function d2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hd()){case Ku:return 2;case xs:return 8;case vo:case Gd:return 32;case Es:return 268435456;default:return 32}default:return 32}}var j1=!1,Na=null,Ma=null,Pa=null,Zl=new Map,Jl=new Map,La=[],iT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p2(o,s){switch(o){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Zl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(s.pointerId)}}function tc(o,s,c,h,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[v]},s!==null&&(s=Wr(s),s!==null&&h2(s)),o):(o.eventSystemFlags|=h,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function aT(o,s,c,h,v){switch(s){case"focusin":return Na=tc(Na,o,s,c,h,v),!0;case"dragenter":return Ma=tc(Ma,o,s,c,h,v),!0;case"mouseover":return Pa=tc(Pa,o,s,c,h,v),!0;case"pointerover":var _=v.pointerId;return Zl.set(_,tc(Zl.get(_)||null,o,s,c,h,v)),!0;case"gotpointercapture":return _=v.pointerId,Jl.set(_,tc(Jl.get(_)||null,o,s,c,h,v)),!0}return!1}function g2(o){var s=Ti(o.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){o.blockedOn=s,rf(o.priority,function(){if(c.tag===13){var h=sr();h=la(h);var v=js(c,h);v!==null&&ur(v,c,h),k1(c,h)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xh(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var c=U1(o.nativeEvent);if(c===null){c=o.nativeEvent;var h=new c.constructor(c.type,c);bi=h,c.target.dispatchEvent(h),bi=null}else return s=Wr(c),s!==null&&h2(s),o.blockedOn=c,!1;s.shift()}return!0}function v2(o,s,c){xh(o)&&c.delete(s)}function oT(){j1=!1,Na!==null&&xh(Na)&&(Na=null),Ma!==null&&xh(Ma)&&(Ma=null),Pa!==null&&xh(Pa)&&(Pa=null),Zl.forEach(v2),Jl.forEach(v2)}function Eh(o,s){o.blockedOn===s&&(o.blockedOn=null,j1||(j1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oT)))}var Ah=null;function m2(o){Ah!==o&&(Ah=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ah===o&&(Ah=null);for(var s=0;s<o.length;s+=3){var c=o[s],h=o[s+1],v=o[s+2];if(typeof h!="function"){if(F1(h||c)===null)continue;break}var _=Wr(c);_!==null&&(o.splice(s,3),s-=3,F0(_,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function ec(o){function s(j){return Eh(j,o)}Na!==null&&Eh(Na,o),Ma!==null&&Eh(Ma,o),Pa!==null&&Eh(Pa,o),Zl.forEach(s),Jl.forEach(s);for(var c=0;c<La.length;c++){var h=La[c];h.blockedOn===o&&(h.blockedOn=null)}for(;0<La.length&&(c=La[0],c.blockedOn===null);)g2(c),c.blockedOn===null&&La.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],_=c[h+1],C=v[Ve]||null;if(typeof _=="function")C||m2(c);else if(C){var R=null;if(_&&_.hasAttribute("formAction")){if(v=_,C=_[Ve]||null)R=C.formAction;else if(F1(v)!==null)continue}else R=C.action;typeof R=="function"?c[h+1]=R:(c.splice(h,3),h-=3),m2(c)}}}function z1(o){this._internalRoot=o}wh.prototype.render=z1.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,h=sr();c2(c,h,o,s,null,null)},wh.prototype.unmount=z1.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;c2(o.current,2,null,o,null,null),ih(),s[fr]=null}};function wh(o){this._internalRoot=o}wh.prototype.unstable_scheduleHydration=function(o){if(o){var s=ca();o={blockedOn:null,target:o,priority:s};for(var c=0;c<La.length&&s!==0&&s<La[c].priority;c++);La.splice(c,0,o),c===0&&g2(o)}};var y2=t.version;if(y2!=="19.1.0")throw Error(r(527,y2,"19.1.0"));ft.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(s),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var sT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:rt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Re=Th.inject(sT),re=Th}catch{}}return rc.createRoot=function(o,s){if(!i(o))throw Error(r(299));var c=!1,h="",v=Pm,_=Lm,C=Bm,R=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks)),s=u2(o,1,!1,null,null,c,h,v,_,C,R,null),o[fr]=s.current,T1(o),new z1(s)},rc.hydrateRoot=function(o,s,c){if(!i(o))throw Error(r(299));var h=!1,v="",_=Pm,C=Lm,R=Bm,j=null,K=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks),c.formState!==void 0&&(K=c.formState)),s=u2(o,1,!0,s,c??null,h,v,_,C,R,j,K),s.context=l2(null),c=s.current,h=sr(),h=la(h),v=ya(h),v.callback=null,_a(c,v,h),c=h,s.current.lanes=c,wi(s,c),si(s),o[fr]=s.current,T1(o),new wh(s)},rc.version="19.1.0",rc}var S2;function NT(){if(S2)return H1.exports;S2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),H1.exports=DT(),H1.exports}var MT=NT();const PT=()=>{};var C2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},LT=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[e++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[e++],u=n[e++],l=n[e++],f=((i&7)<<18|(a&63)<<12|(u&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(f>>10)),t[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[e++],u=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return t.join("")},Yx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],u=i+1<n.length,l=u?n[i+1]:0,f=i+2<n.length,d=f?n[i+2]:0,g=a>>2,m=(a&3)<<4|l>>4;let y=(l&15)<<2|d>>6,x=d&63;f||(x=64,u||(y=64)),r.push(e[g],e[m],e[y],e[x])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Wx(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):LT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const d=i<n.length?e[n.charAt(i)]:64;++i;const m=i<n.length?e[n.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new BT;const y=a<<2|l>>4;if(r.push(y),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const A=d<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kT=function(n){const t=Wx(n);return Yx.encodeByteArray(t,!0)},Kh=function(n){return kT(n).replace(/\./g,"")},Kx=function(n){try{return Yx.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=()=>VT().__FIREBASE_DEFAULTS__,FT=()=>{if(typeof process>"u"||typeof C2>"u")return;const n=C2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Kx(n[1]);return t&&JSON.parse(t)},vd=()=>{try{return PT()||UT()||FT()||jT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qx=n=>{var t,e;return(e=(t=vd())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},zT=n=>{const t=Qx(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},$x=()=>{var n;return(n=vd())===null||n===void 0?void 0:n.config},Zx=n=>{var t;return(t=vd())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Kh(JSON.stringify(e)),Kh(JSON.stringify(u)),""].join(".")}const yc={};function qT(){const n={prod:[],emulator:[]};for(const t of Object.keys(yc))yc[t]?n.emulator.push(t):n.prod.push(t);return n}function XT(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let I2=!1;function tE(n,t){if(typeof window>"u"||typeof document>"u"||!Fu(window.location.host)||yc[n]===t||yc[n]||I2)return;yc[n]=t;function e(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=qT().prod.length>0;function u(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{I2=!0,u()},y}function g(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=XT(r),x=e("text"),A=document.getElementById(x)||document.createElement("span"),S=e("learnmore"),I=document.getElementById(S)||document.createElement("a"),M=e("preprendIcon"),O=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const k=y.element;l(k),g(I,S);const V=d();f(O,M),k.append(O,A,I,V),document.body.appendChild(k)}a?(A.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function YT(){var n;const t=(n=vd())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const n=Bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function JT(){return!YT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var a;t(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="FirebaseError";class aa extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=nS,Object.setPrototypeOf(this,aa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uc.prototype.create)}}class Uc{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,a=this.errors[t],u=a?rS(a,r):"Error",l=`${this.serviceName}: ${u} (${i}).`;return new aa(i,l,r)}}function rS(n,t){return n.replace(iS,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const iS=/\{\$([^}]+)}/g;function aS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function us(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const a=n[i],u=t[i];if(b2(a)&&b2(u)){if(!us(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function b2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function uc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function lc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function oS(n,t){const e=new sS(n,t);return e.subscribe.bind(e)}class sS{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");uS(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=X1),i.error===void 0&&(i.error=X1),i.complete===void 0&&(i.complete=X1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uS(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function X1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return n&&n._delegate?n._delegate:n}class ls{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new HT;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fS(t))try{this.getOrInitializeService({instanceIdentifier:Zo})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=Zo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zo){return this.instances.has(t)}getOptions(t=Zo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[a,u]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&u.resolve(i)}return i}onInit(t,e){var r;const i=this.normalizeInstanceIdentifier(e),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&t(u,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cS(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Zo){return this.component?this.component.multipleInstances?t:Zo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cS(n){return n===Zo?void 0:n}function fS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new lS(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Vt||(Vt={}));const dS={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},pS=Vt.INFO,gS={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},vS=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=gS[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ig{constructor(t){this.name=t,this._logLevel=pS,this._logHandler=vS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const mS=(n,t)=>t.some(e=>n instanceof e);let R2,O2;function yS(){return R2||(R2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return O2||(O2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,vp=new WeakMap,nE=new WeakMap,W1=new WeakMap,ag=new WeakMap;function xS(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{e(Wa(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&eE.set(e,n)}).catch(()=>{}),ag.set(t,n),t}function ES(n){if(vp.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{e(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});vp.set(n,t)}let mp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return vp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||nE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Wa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function AS(n){mp=n(mp)}function wS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Y1(this),t,...e);return nE.set(r,t.sort?t.sort():[t]),Wa(r)}:_S().includes(n)?function(...t){return n.apply(Y1(this),t),Wa(eE.get(this))}:function(...t){return Wa(n.apply(Y1(this),t))}}function TS(n){return typeof n=="function"?wS(n):(n instanceof IDBTransaction&&ES(n),mS(n,yS())?new Proxy(n,mp):n)}function Wa(n){if(n instanceof IDBRequest)return xS(n);if(W1.has(n))return W1.get(n);const t=TS(n);return t!==n&&(W1.set(n,t),ag.set(t,n)),t}const Y1=n=>ag.get(n);function SS(n,t,{blocked:e,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,t),l=Wa(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Wa(u.result),f.oldVersion,f.newVersion,Wa(u.transaction),f)}),e&&u.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),l.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const CS=["get","getKey","getAll","getAllKeys","count"],IS=["put","add","delete","clear"],K1=new Map;function D2(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(K1.get(t))return K1.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=IS.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CS.includes(e)))return;const a=async function(u,...l){const f=this.transaction(u,i?"readwrite":"readonly");let d=f.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[e](...l),i&&f.done]))[0]};return K1.set(t,a),a}AS(n=>({...n,get:(t,e,r)=>D2(t,e)||n.get(t,e,r),has:(t,e)=>!!D2(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(RS(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function RS(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const yp="@firebase/app",N2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new ig("@firebase/app"),OS="@firebase/app-compat",DS="@firebase/analytics-compat",NS="@firebase/analytics",MS="@firebase/app-check-compat",PS="@firebase/app-check",LS="@firebase/auth",BS="@firebase/auth-compat",kS="@firebase/database",VS="@firebase/data-connect",US="@firebase/database-compat",FS="@firebase/functions",jS="@firebase/functions-compat",zS="@firebase/installations",HS="@firebase/installations-compat",GS="@firebase/messaging",qS="@firebase/messaging-compat",XS="@firebase/performance",WS="@firebase/performance-compat",YS="@firebase/remote-config",KS="@firebase/remote-config-compat",QS="@firebase/storage",$S="@firebase/storage-compat",ZS="@firebase/firestore",JS="@firebase/ai",tC="@firebase/firestore-compat",eC="firebase",nC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",rC={[yp]:"fire-core",[OS]:"fire-core-compat",[NS]:"fire-analytics",[DS]:"fire-analytics-compat",[PS]:"fire-app-check",[MS]:"fire-app-check-compat",[LS]:"fire-auth",[BS]:"fire-auth-compat",[kS]:"fire-rtdb",[VS]:"fire-data-connect",[US]:"fire-rtdb-compat",[FS]:"fire-fn",[jS]:"fire-fn-compat",[zS]:"fire-iid",[HS]:"fire-iid-compat",[GS]:"fire-fcm",[qS]:"fire-fcm-compat",[XS]:"fire-perf",[WS]:"fire-perf-compat",[YS]:"fire-rc",[KS]:"fire-rc-compat",[QS]:"fire-gcs",[$S]:"fire-gcs-compat",[ZS]:"fire-fst",[tC]:"fire-fst-compat",[JS]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new Map,iC=new Map,xp=new Map;function M2(n,t){try{n.container.addComponent(t)}catch(e){ta.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Nu(n){const t=n.name;if(xp.has(t))return ta.debug(`There were multiple attempts to register component ${t}.`),!1;xp.set(t,n);for(const e of Qh.values())M2(e,n);for(const e of iC.values())M2(e,n);return!0}function og(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Sr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ya=new Uc("app","Firebase",aC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=nC;function rE(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:_p,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Ya.create("bad-app-name",{appName:String(i)});if(e||(e=$x()),!e)throw Ya.create("no-options");const a=Qh.get(i);if(a){if(us(e,a.options)&&us(r,a.config))return a;throw Ya.create("duplicate-app",{appName:i})}const u=new hS(i);for(const f of xp.values())u.addComponent(f);const l=new oC(e,r,u);return Qh.set(i,l),l}function iE(n=_p){const t=Qh.get(n);if(!t&&n===_p&&$x())return rE();if(!t)throw Ya.create("no-app",{appName:n});return t}function Ka(n,t,e){var r;let i=(r=rC[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);const a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const l=[`Unable to register library "${i}" with version "${t}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&l.push("and"),u&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ta.warn(l.join(" "));return}Nu(new ls(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="firebase-heartbeat-database",uC=1,Ic="firebase-heartbeat-store";let Q1=null;function aE(){return Q1||(Q1=SS(sC,uC,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ic)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ya.create("idb-open",{originalErrorMessage:n.message})})),Q1}async function lC(n){try{const e=(await aE()).transaction(Ic),r=await e.objectStore(Ic).get(oE(n));return await e.done,r}catch(t){if(t instanceof aa)ta.warn(t.message);else{const e=Ya.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ta.warn(e.message)}}}async function P2(n,t){try{const r=(await aE()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(t,oE(n)),await r.done}catch(e){if(e instanceof aa)ta.warn(e.message);else{const r=Ya.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ta.warn(r.message)}}}function oE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=1024,fC=30;class hC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pC(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=L2();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>fC){const u=gC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ta.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L2(),{heartbeatsToSend:r,unsentEntries:i}=dC(this._heartbeatsCache.heartbeats),a=Kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ta.warn(e),""}}}function L2(){return new Date().toISOString().substring(0,10)}function dC(n,t=cC){const e=[];let r=n.slice();for(const i of n){const a=e.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),B2(e)>t){a.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),B2(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class pC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?eS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await lC(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return P2(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return P2(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function B2(n){return Kh(JSON.stringify({version:2,heartbeats:n})).length}function gC(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){Nu(new ls("platform-logger",t=>new bS(t),"PRIVATE")),Nu(new ls("heartbeat",t=>new hC(t),"PRIVATE")),Ka(yp,N2,n),Ka(yp,N2,"esm2017"),Ka("fire-js","")}vC("");function sg(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mC=sE,uE=new Uc("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new ig("@firebase/auth");function yC(n,...t){$h.logLevel<=Vt.WARN&&$h.warn(`Auth (${ju}): ${n}`,...t)}function Bh(n,...t){$h.logLevel<=Vt.ERROR&&$h.error(`Auth (${ju}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n,...t){throw ug(n,...t)}function ci(n,...t){return ug(n,...t)}function lE(n,t,e){const r=Object.assign(Object.assign({},mC()),{[t]:e});return new Uc("auth","Firebase",r).create(t,{appName:n.name})}function $i(n){return lE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return uE.create(n,...t)}function Tt(n,t,...e){if(!n)throw ug(t,...e)}function Yi(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Bh(t),new Error(t)}function ea(n,t){n||Yi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _C(){return k2()==="http:"||k2()==="https:"}function k2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_C()||QT()||"connection"in navigator)?navigator.onLine:!0}function EC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,e){this.shortDelay=t,this.longDelay=e,ea(e>t,"Short delay should be less than long delay!"),this.isMobile=WT()||$T()}get(){return xC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(n,t){ea(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TC=new jc(3e4,6e4);function uo(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function lo(n,t,e,r,i={}){return fE(n,i,async()=>{let a={},u={};r&&(t==="GET"?u=r:a={body:JSON.stringify(r)});const l=Fc(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:t,headers:f},a);return KT()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(d.credentials="include"),cE.fetch()(await hE(n,n.config.apiHost,e,l),d)})}async function fE(n,t,e){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},AC),t);try{const i=new CC(n),a=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Sh(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const l=a.ok?u.errorMessage:u.error.message,[f,d]=l.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Sh(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Sh(n,"user-disabled",u);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw lE(n,g,d);Hr(n,g)}}catch(i){if(i instanceof aa)throw i;Hr(n,"network-request-failed",{message:String(i)})}}async function zc(n,t,e,r,i={}){const a=await lo(n,t,e,r,i);return"mfaPendingCredential"in a&&Hr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function hE(n,t,e,r){const i=`${t}${e}?${r}`,a=n,u=a.config.emulator?lg(n.config,i):`${n.config.apiScheme}://${i}`;return wC.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function SC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),TC.get())})}}function Sh(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=ci(n,t,r);return i.customData._tokenResponse=e,i}function V2(n){return n!==void 0&&n.enterprise!==void 0}class IC{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return SC(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bC(n,t){return lo(n,"GET","/v2/recaptchaConfig",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(n,t){return lo(n,"POST","/v1/accounts:delete",t)}async function Zh(n,t){return lo(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function OC(n,t=!1){const e=Cn(n),r=await e.getIdToken(t),i=cg(r);Tt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:_c($1(i.auth_time)),issuedAtTime:_c($1(i.iat)),expirationTime:_c($1(i.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function $1(n){return Number(n)*1e3}function cg(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Kx(e);return i?JSON.parse(i):(Bh("Failed to decode base64 JWT payload"),null)}catch(i){return Bh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function U2(n){const t=cg(n);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof aa&&DC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function DC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(n){var t;const e=n.auth,r=await n.getIdToken(),i=await bc(n,Zh(e,{idToken:r}));Tt(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const u=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?dE(a.providerUserInfo):[],l=PC(n.providerData,u),f=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(l!=null&&l.length),g=f?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ap(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,m)}async function MC(n){const t=Cn(n);await Jh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function PC(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function dE(n){return n.map(t=>{var{providerId:e}=t,r=sg(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n,t){const e=await fE(n,{},async()=>{const r=Fc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=await hE(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:l,body:r};return n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(f.credentials="include"),cE.fetch()(u,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function BC(n,t){return lo(n,"POST","/v2/accounts:revokeToken",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U2(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=U2(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:a}=await LC(t,e);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:a}=e,u=new Su;return r&&(Tt(typeof r=="string","internal-error",{appName:t}),u.refreshToken=r),i&&(Tt(typeof i=="string","internal-error",{appName:t}),u.accessToken=i),a&&(Tt(typeof a=="number","internal-error",{appName:t}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Su,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(n,t){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class zr{constructor(t){var{uid:e,auth:r,stsTokenManager:i}=t,a=sg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ap(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await bc(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return OC(this,t)}reload(){return MC(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new zr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Jh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject($i(this.auth));const t=await this.getIdToken();return await bc(this,RC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,i,a,u,l,f,d,g;const m=(r=e.displayName)!==null&&r!==void 0?r:void 0,y=(i=e.email)!==null&&i!==void 0?i:void 0,x=(a=e.phoneNumber)!==null&&a!==void 0?a:void 0,A=(u=e.photoURL)!==null&&u!==void 0?u:void 0,S=(l=e.tenantId)!==null&&l!==void 0?l:void 0,I=(f=e._redirectEventId)!==null&&f!==void 0?f:void 0,M=(d=e.createdAt)!==null&&d!==void 0?d:void 0,O=(g=e.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:k,emailVerified:V,isAnonymous:H,providerData:q,stsTokenManager:N}=e;Tt(k&&N,t,"internal-error");const b=Su.fromJSON(this.name,N);Tt(typeof k=="string",t,"internal-error"),ka(m,t.name),ka(y,t.name),Tt(typeof V=="boolean",t,"internal-error"),Tt(typeof H=="boolean",t,"internal-error"),ka(x,t.name),ka(A,t.name),ka(S,t.name),ka(I,t.name),ka(M,t.name),ka(O,t.name);const P=new zr({uid:k,auth:t,email:y,emailVerified:V,displayName:m,isAnonymous:H,photoURL:A,phoneNumber:x,tenantId:S,stsTokenManager:b,createdAt:M,lastLoginAt:O});return q&&Array.isArray(q)&&(P.providerData=q.map(B=>Object.assign({},B))),I&&(P._redirectEventId=I),P}static async _fromIdTokenResponse(t,e,r=!1){const i=new Su;i.updateFromServerResponse(e);const a=new zr({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Jh(a),a}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];Tt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?dE(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new Su;l.updateFromIdToken(r);const f=new zr({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:u}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ap(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Map;function Ki(n){ea(n instanceof Function,"Expected a class definition");let t=F2.get(n);return t?(ea(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,F2.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}pE.type="NONE";const j2=pE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(n,t,e){return`firebase:${n}:${t}:${e}`}class Cu{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=kh(this.userKey,i.apiKey,a),this.fullPersistenceKey=kh("persistence",i.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Zh(this.auth,{idToken:t}).catch(()=>{});return e?zr._fromGetAccountInfoResponse(this.auth,e,t):null}return zr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Cu(Ki(j2),t,r);const i=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Ki(j2);const u=kh(r,t.config.apiKey,t.name);let l=null;for(const d of e)try{const g=await d._get(u);if(g){let m;if(typeof g=="string"){const y=await Zh(t,{idToken:g}).catch(()=>{});if(!y)break;m=await zr._fromGetAccountInfoResponse(t,y,g)}else m=zr._fromJSON(t,g);d!==a&&(l=m),a=d;break}}catch{}const f=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Cu(a,t,r):(a=f[0],l&&await a._set(u,l.toJSON()),await Promise.all(e.map(async d=>{if(d!==a)try{await d._remove(u)}catch{}})),new Cu(a,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xE(t))return"Blackberry";if(EE(t))return"Webos";if(vE(t))return"Safari";if((t.includes("chrome/")||mE(t))&&!t.includes("edge/"))return"Chrome";if(_E(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gE(n=Bn()){return/firefox\//i.test(n)}function vE(n=Bn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mE(n=Bn()){return/crios\//i.test(n)}function yE(n=Bn()){return/iemobile/i.test(n)}function _E(n=Bn()){return/android/i.test(n)}function xE(n=Bn()){return/blackberry/i.test(n)}function EE(n=Bn()){return/webos/i.test(n)}function fg(n=Bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kC(n=Bn()){var t;return fg(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function VC(){return ZT()&&document.documentMode===10}function AE(n=Bn()){return fg(n)||_E(n)||EE(n)||xE(n)||/windows phone/i.test(n)||yE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n,t=[]){let e;switch(n){case"Browser":e=z2(Bn());break;case"Worker":e=`${z2(Bn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ju}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=a=>new Promise((u,l)=>{try{const f=t(a);u(f)}catch(f){l(f)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(n,t={}){return lo(n,"GET","/v2/passwordPolicy",uo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=6;class zC{constructor(t){var e,r,i,a;const u=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=u.minPasswordLength)!==null&&e!==void 0?e:jC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,i,a,u,l;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,f),this.validatePasswordCharacterOptions(t,f),f.isValid&&(f.isValid=(e=f.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(l=f.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),f}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H2(this),this.idTokenSubscription=new H2(this),this.beforeStateQueue=new UC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ki(e)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Cu.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Zh(this,{idToken:t}),r=await zr._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Sr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,l=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(t);(!u||u===l)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Jh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=EC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sr(this.app))return Promise.reject($i(this));const e=t?Cn(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sr(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await FC(this),e=new zC(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Uc("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await BC(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ki(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await Cu.create(this,[Ki(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let u=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(l,this,"internal-error"),l.then(()=>{u||a(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,r,i);return()=>{u=!0,f()}}else{const f=t.addObserver(e);return()=>{u=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=wE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&yC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ps(n){return Cn(n)}class H2{constructor(t){this.auth=t,this.observer=null,this.addObserver=oS(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GC(n){md=n}function TE(n){return md.loadJS(n)}function qC(){return md.recaptchaEnterpriseScript}function XC(){return md.gapiScript}function WC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class YC{constructor(){this.enterprise=new KC}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class KC{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const QC="recaptcha-enterprise",SE="NO_RECAPTCHA";class $C{constructor(t){this.type=QC,this.auth=ps(t)}async verify(t="verify",e=!1){async function r(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,l)=>{bC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new IC(f);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,u(d.siteKey)}}).catch(f=>{l(f)})})}function i(a,u,l){const f=window.grecaptcha;V2(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:t}).then(d=>{u(d)}).catch(()=>{u(SE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YC().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(l=>{if(!e&&V2(window.grecaptcha))i(l,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=qC();f.length!==0&&(f+=l),TE(f).then(()=>{i(l,a,u)}).catch(d=>{u(d)})}}).catch(l=>{u(l)})})}}async function G2(n,t,e,r=!1,i=!1){const a=new $C(n);let u;if(i)u=SE;else try{u=await a.verify(e)}catch{u=await a.verify(e,!0)}const l=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const f=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const f=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:u}):Object.assign(l,{captchaResponse:u}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function wp(n,t,e,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await G2(n,t,e,e==="getOobCode");return r(n,u)}else return r(n,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await G2(n,t,e,e==="getOobCode");return r(n,l)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n,t){const e=og(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),a=e.getOptions();if(us(a,t??{}))return i;Hr(i,"already-initialized")}return e.initialize({options:t})}function JC(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Ki);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function t4(n,t,e){const r=ps(n);Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,a=CE(t),{host:u,port:l}=e4(t),f=l===null?"":`:${l}`,d={url:`${a}//${u}${f}/`},g=Object.freeze({host:u,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(us(d,r.config.emulator)&&us(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Fu(u)?(Jx(`${a}//${u}${f}`),tE("Auth",!0)):n4()}function CE(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function e4(n){const t=CE(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:q2(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:q2(u)}}}function q2(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function n4(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Yi("not implemented")}_getIdTokenResponse(t){return Yi("not implemented")}_linkToIdToken(t,e){return Yi("not implemented")}_getReauthenticationResolver(t){return Yi("not implemented")}}async function r4(n,t){return lo(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(n,t){return zc(n,"POST","/v1/accounts:signInWithPassword",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(n,t){return zc(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,t))}async function o4(n,t){return zc(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends hg{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Rc(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new Rc(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(t,e,"signInWithPassword",i4);case"emailLink":return a4(t,{email:this._email,oobCode:this._password});default:Hr(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(t,r,"signUpPassword",r4);case"emailLink":return o4(t,{idToken:e,email:this._email,oobCode:this._password});default:Hr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(n,t){return zc(n,"POST","/v1/accounts:signInWithIdp",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="http://localhost";class cs extends hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new cs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Hr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=e,a=sg(e,["providerId","signInMethod"]);if(!r||!i)return null;const u=new cs(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(t){const e=this.buildRequest();return Iu(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Iu(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Iu(t,e)}buildRequest(){const t={requestUri:s4,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Fc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l4(n){const t=uc(lc(n)).link,e=t?uc(lc(t)).deep_link_id:null,r=uc(lc(n)).deep_link_id;return(r?uc(lc(r)).link:null)||r||e||t||n}class dg{constructor(t){var e,r,i,a,u,l;const f=uc(lc(t)),d=(e=f.apiKey)!==null&&e!==void 0?e:null,g=(r=f.oobCode)!==null&&r!==void 0?r:null,m=u4((i=f.mode)!==null&&i!==void 0?i:null);Tt(d&&g&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=g,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(l=f.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const e=l4(t);try{return new dg(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.providerId=zu.PROVIDER_ID}static credential(t,e){return Rc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=dg.parseLink(e);return Tt(r,"argument-error"),Rc._fromEmailAndCode(t,r.code,r.tenantId)}}zu.PROVIDER_ID="password";zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends IE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Hc{constructor(){super("facebook.com")}static credential(t){return cs._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ja.credentialFromTaggedObject(t)}static credentialFromError(t){return ja.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ja.credential(t.oauthAccessToken)}catch{return null}}}ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";ja.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return cs._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return za.credentialFromTaggedObject(t)}static credentialFromError(t){return za.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return za.credential(e,r)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Hc{constructor(){super("github.com")}static credential(t){return cs._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ha.credentialFromTaggedObject(t)}static credentialFromError(t){return Ha.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ha.credential(t.oauthAccessToken)}catch{return null}}}Ha.GITHUB_SIGN_IN_METHOD="github.com";Ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends Hc{constructor(){super("twitter.com")}static credential(t,e){return cs._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ga.credentialFromTaggedObject(t)}static credentialFromError(t){return Ga.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Ga.credential(e,r)}catch{return null}}}Ga.TWITTER_SIGN_IN_METHOD="twitter.com";Ga.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(n,t){return zc(n,"POST","/v1/accounts:signUp",uo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const a=await zr._fromIdTokenResponse(t,r,i),u=X2(r);return new fs({user:a,providerId:u,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=X2(r);return new fs({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function X2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends aa{constructor(t,e,r,i){var a;super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,td.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new td(t,e,r,i)}}function bE(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(n,a,t,r):a})}async function f4(n,t,e=!1){const r=await bc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return fs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(n,t,e=!1){const{auth:r}=n;if(Sr(r.app))return Promise.reject($i(r));const i="reauthenticate";try{const a=await bc(n,bE(r,i,t,n),e);Tt(a.idToken,r,"internal-error");const u=cg(a.idToken);Tt(u,r,"internal-error");const{sub:l}=u;return Tt(n.uid===l,r,"user-mismatch"),fs._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Hr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(n,t,e=!1){if(Sr(n.app))return Promise.reject($i(n));const r="signIn",i=await bE(n,r,t),a=await fs._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(a.user),a}async function d4(n,t){return RE(ps(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(n){const t=ps(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function p4(n,t,e){if(Sr(n.app))return Promise.reject($i(n));const r=ps(n),u=await wp(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c4).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&OE(n),f}),l=await fs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(l.user),l}function g4(n,t,e){return Sr(n.app)?Promise.reject($i(n)):d4(Cn(n),zu.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OE(n),r})}function v4(n,t,e,r){return Cn(n).onIdTokenChanged(t,e,r)}function m4(n,t,e){return Cn(n).beforeAuthStateChanged(t,e)}function y4(n,t,e,r){return Cn(n).onAuthStateChanged(t,e,r)}const ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ed,"1"),this.storage.removeItem(ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=1e3,x4=10;class NE extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((u,l,f)=>{this.notifyListeners(u,f)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!e&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);VC()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,x4):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},_4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}NE.type="LOCAL";const E4=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ME.type="SESSION";const PE=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new yd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:a}=e.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(u).map(async d=>d(e.origin,a)),f=await A4(l);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((l,f)=>{const d=pg("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(y.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function T4(n){fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function S4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function I4(){return LE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="firebaseLocalStorageDb",b4=1,nd="firebaseLocalStorage",kE="fbase_key";class Gc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function _d(n,t){return n.transaction([nd],t?"readwrite":"readonly").objectStore(nd)}function R4(){const n=indexedDB.deleteDatabase(BE);return new Gc(n).toPromise()}function Tp(){const n=indexedDB.open(BE,b4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(nd,{keyPath:kE})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(nd)?t(r):(r.close(),await R4(),t(await Tp()))})})}async function W2(n,t,e){const r=_d(n,!0).put({[kE]:t,value:e});return new Gc(r).toPromise()}async function O4(n,t){const e=_d(n,!1).get(t),r=await new Gc(e).toPromise();return r===void 0?null:r.value}function Y2(n,t){const e=_d(n,!0).delete(t);return new Gc(e).toPromise()}const D4=800,N4=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>N4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(I4()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await S4(),!this.activeServiceWorker)return;this.sender=new w4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||C4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Tp();return await W2(t,ed,"1"),await Y2(t,ed),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>W2(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>O4(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Y2(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const a=_d(i,!1).getAll();return new Gc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:a}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const M4=VE;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(n,t){return t?Ki(t):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends hg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Iu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Iu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Iu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function L4(n){return RE(n.auth,new gg(n),n.bypassAuthState)}function B4(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),h4(e,new gg(n),n.bypassAuthState)}async function k4(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),f4(e,new gg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,e,r,i,a=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:a,error:u,type:l}=t;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:e,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return L4;case"linkViaPopup":case"linkViaRedirect":return k4;case"reauthViaPopup":case"reauthViaRedirect":return B4;default:Hr(this.auth,"internal-error")}}resolve(t){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new jc(2e3,1e4);class Au extends UE{constructor(t,e,r,i,a){super(t,e,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Au.currentPopupAction&&Au.currentPopupAction.cancel(),Au.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){ea(this.filter.length===1,"Popup operations only handle one event");const t=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Au.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,V4.get())};t()}}Au.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="pendingRedirect",Vh=new Map;class F4 extends UE{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Vh.get(this.auth._key());if(!t){try{const r=await j4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Vh.set(this.auth._key(),t)}return this.bypassAuthState||Vh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j4(n,t){const e=G4(t),r=H4(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function z4(n,t){Vh.set(n._key(),t)}function H4(n){return Ki(n._redirectPersistence)}function G4(n){return kh(U4,n.config.apiKey,n.name)}async function q4(n,t,e=!1){if(Sr(n.app))return Promise.reject($i(n));const r=ps(n),i=P4(r,t),u=await new F4(r,i,e).execute();return u&&!e&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,t)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=600*1e3;class W4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Y4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!FE(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(ci(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=X4&&this.cachedEventUids.clear(),this.cachedEventUids.has(K2(t))}saveEventToCache(t){this.cachedEventUids.add(K2(t)),this.lastProcessedEventTime=Date.now()}}function K2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function FE({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Y4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(n,t={}){return lo(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$4=/^https?/;async function Z4(n){if(n.config.emulator)return;const{authorizedDomains:t}=await K4(n);for(const e of t)try{if(J4(e))return}catch{}Hr(n,"unauthorized-domain")}function J4(n){const t=Ep(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&u.hostname===r}if(!$4.test(e))return!1;if(Q4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new jc(3e4,6e4);function Q2(){const n=fi().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function eI(n){return new Promise((t,e)=>{var r,i,a;function u(){Q2(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Q2(),e(ci(n,"network-request-failed"))},timeout:tI.get()})}if(!((i=(r=fi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((a=fi().gapi)===null||a===void 0)&&a.load)u();else{const l=WC("iframefcb");return fi()[l]=()=>{gapi.load?u():e(ci(n,"network-request-failed"))},TE(`${XC()}?onload=${l}`).catch(f=>e(f))}}).catch(t=>{throw Uh=null,t})}let Uh=null;function nI(n){return Uh=Uh||eI(n),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new jc(5e3,15e3),iI="__/auth/iframe",aI="emulator/auth/iframe",oI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uI(n){const t=n.config;Tt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?lg(t,aI):`https://${n.config.authDomain}/${iI}`,r={apiKey:t.apiKey,appName:n.name,v:ju},i=sI.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${e}?${Fc(r).slice(1)}`}async function lI(n){const t=await nI(n),e=fi().gapi;return Tt(e,n,"internal-error"),t.open({where:document.body,url:uI(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oI,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=ci(n,"network-request-failed"),l=fi().setTimeout(()=>{a(u)},rI.get());function f(){fi().clearTimeout(l),i(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fI=500,hI=600,dI="_blank",pI="http://localhost";class $2{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gI(n,t,e,r=fI,i=hI){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const f=Object.assign(Object.assign({},cI),{width:r.toString(),height:i.toString(),top:a,left:u}),d=Bn().toLowerCase();e&&(l=mE(d)?dI:e),gE(d)&&(t=t||pI,f.scrollbars="yes");const g=Object.entries(f).reduce((y,[x,A])=>`${y}${x}=${A},`,"");if(kC(d)&&l!=="_self")return vI(t||"",l),new $2(null);const m=window.open(t||"",l,g);Tt(m,n,"popup-blocked");try{m.focus()}catch{}return new $2(m)}function vI(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="__/auth/handler",yI="emulator/auth/handler",_I=encodeURIComponent("fac");async function Z2(n,t,e,r,i,a){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:ju,eventId:i};if(t instanceof IE){t.setDefaultLanguage(n.languageCode),u.providerId=t.providerId||"",aS(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,m]of Object.entries({}))u[g]=m}if(t instanceof Hc){const g=t.getScopes().filter(m=>m!=="");g.length>0&&(u.scopes=g.join(","))}n.tenantId&&(u.tid=n.tenantId);const l=u;for(const g of Object.keys(l))l[g]===void 0&&delete l[g];const f=await n._getAppCheckToken(),d=f?`#${_I}=${encodeURIComponent(f)}`:"";return`${xI(n)}?${Fc(l).slice(1)}${d}`}function xI({config:n}){return n.emulator?lg(n,yI):`https://${n.authDomain}/${mI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="webStorageSupport";class EI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PE,this._completeRedirectFn=q4,this._overrideRedirectResult=z4}async _openPopup(t,e,r,i){var a;ea((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await Z2(t,e,r,Ep(),i);return gI(t,u,pg())}async _openRedirect(t,e,r,i){await this._originValidation(t);const a=await Z2(t,e,r,Ep(),i);return T4(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:a}=this.eventManagers[e];return i?Promise.resolve(i):(ea(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await lI(t),r=new W4(t);return e.register("authEvent",i=>(Tt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Z1,{type:Z1},i=>{var a;const u=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Z1];u!==void 0&&e(!!u),Hr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Z4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return AE()||vE()||fg()}}const AI=EI;var J2="@firebase/auth",t_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SI(n){Nu(new ls("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:u,authDomain:l}=r.options;Tt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wE(n)},d=new HC(r,i,a,f);return JC(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Nu(new ls("auth-internal",t=>{const e=ps(t.getProvider("auth").getImmediate());return(r=>new wI(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ka(J2,t_,TI(n)),Ka(J2,t_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=300,II=Zx("authIdTokenMaxAge")||CI;let e_=null;const bI=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>II)return;const i=e==null?void 0:e.token;e_!==i&&(e_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function RI(n=iE()){const t=og(n,"auth");if(t.isInitialized())return t.getImmediate();const e=ZC(n,{popupRedirectResolver:AI,persistence:[M4,E4,PE]}),r=Zx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=bI(a.toString());m4(e,u,()=>u(e.currentUser)),v4(e,l=>u(l))}}const i=Qx("auth");return i&&t4(e,`http://${i}`),e}function OI(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}GC({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const a=ci("internal-error");a.customData=i,e(a)},r.type="text/javascript",r.charset="UTF-8",OI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SI("Browser");var DI="firebase",NI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka(DI,NI,"app");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qa,jE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function P(){}P.prototype=b.prototype,N.D=b.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(B,F,z){for(var U=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)U[Ot-2]=arguments[Ot];return b.prototype[F].apply(B,U)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,b,P){P||(P=0);var B=Array(16);if(typeof b=="string")for(var F=0;16>F;++F)B[F]=b.charCodeAt(P++)|b.charCodeAt(P++)<<8|b.charCodeAt(P++)<<16|b.charCodeAt(P++)<<24;else for(F=0;16>F;++F)B[F]=b[P++]|b[P++]<<8|b[P++]<<16|b[P++]<<24;b=N.g[0],P=N.g[1],F=N.g[2];var z=N.g[3],U=b+(z^P&(F^z))+B[0]+3614090360&4294967295;b=P+(U<<7&4294967295|U>>>25),U=z+(F^b&(P^F))+B[1]+3905402710&4294967295,z=b+(U<<12&4294967295|U>>>20),U=F+(P^z&(b^P))+B[2]+606105819&4294967295,F=z+(U<<17&4294967295|U>>>15),U=P+(b^F&(z^b))+B[3]+3250441966&4294967295,P=F+(U<<22&4294967295|U>>>10),U=b+(z^P&(F^z))+B[4]+4118548399&4294967295,b=P+(U<<7&4294967295|U>>>25),U=z+(F^b&(P^F))+B[5]+1200080426&4294967295,z=b+(U<<12&4294967295|U>>>20),U=F+(P^z&(b^P))+B[6]+2821735955&4294967295,F=z+(U<<17&4294967295|U>>>15),U=P+(b^F&(z^b))+B[7]+4249261313&4294967295,P=F+(U<<22&4294967295|U>>>10),U=b+(z^P&(F^z))+B[8]+1770035416&4294967295,b=P+(U<<7&4294967295|U>>>25),U=z+(F^b&(P^F))+B[9]+2336552879&4294967295,z=b+(U<<12&4294967295|U>>>20),U=F+(P^z&(b^P))+B[10]+4294925233&4294967295,F=z+(U<<17&4294967295|U>>>15),U=P+(b^F&(z^b))+B[11]+2304563134&4294967295,P=F+(U<<22&4294967295|U>>>10),U=b+(z^P&(F^z))+B[12]+1804603682&4294967295,b=P+(U<<7&4294967295|U>>>25),U=z+(F^b&(P^F))+B[13]+4254626195&4294967295,z=b+(U<<12&4294967295|U>>>20),U=F+(P^z&(b^P))+B[14]+2792965006&4294967295,F=z+(U<<17&4294967295|U>>>15),U=P+(b^F&(z^b))+B[15]+1236535329&4294967295,P=F+(U<<22&4294967295|U>>>10),U=b+(F^z&(P^F))+B[1]+4129170786&4294967295,b=P+(U<<5&4294967295|U>>>27),U=z+(P^F&(b^P))+B[6]+3225465664&4294967295,z=b+(U<<9&4294967295|U>>>23),U=F+(b^P&(z^b))+B[11]+643717713&4294967295,F=z+(U<<14&4294967295|U>>>18),U=P+(z^b&(F^z))+B[0]+3921069994&4294967295,P=F+(U<<20&4294967295|U>>>12),U=b+(F^z&(P^F))+B[5]+3593408605&4294967295,b=P+(U<<5&4294967295|U>>>27),U=z+(P^F&(b^P))+B[10]+38016083&4294967295,z=b+(U<<9&4294967295|U>>>23),U=F+(b^P&(z^b))+B[15]+3634488961&4294967295,F=z+(U<<14&4294967295|U>>>18),U=P+(z^b&(F^z))+B[4]+3889429448&4294967295,P=F+(U<<20&4294967295|U>>>12),U=b+(F^z&(P^F))+B[9]+568446438&4294967295,b=P+(U<<5&4294967295|U>>>27),U=z+(P^F&(b^P))+B[14]+3275163606&4294967295,z=b+(U<<9&4294967295|U>>>23),U=F+(b^P&(z^b))+B[3]+4107603335&4294967295,F=z+(U<<14&4294967295|U>>>18),U=P+(z^b&(F^z))+B[8]+1163531501&4294967295,P=F+(U<<20&4294967295|U>>>12),U=b+(F^z&(P^F))+B[13]+2850285829&4294967295,b=P+(U<<5&4294967295|U>>>27),U=z+(P^F&(b^P))+B[2]+4243563512&4294967295,z=b+(U<<9&4294967295|U>>>23),U=F+(b^P&(z^b))+B[7]+1735328473&4294967295,F=z+(U<<14&4294967295|U>>>18),U=P+(z^b&(F^z))+B[12]+2368359562&4294967295,P=F+(U<<20&4294967295|U>>>12),U=b+(P^F^z)+B[5]+4294588738&4294967295,b=P+(U<<4&4294967295|U>>>28),U=z+(b^P^F)+B[8]+2272392833&4294967295,z=b+(U<<11&4294967295|U>>>21),U=F+(z^b^P)+B[11]+1839030562&4294967295,F=z+(U<<16&4294967295|U>>>16),U=P+(F^z^b)+B[14]+4259657740&4294967295,P=F+(U<<23&4294967295|U>>>9),U=b+(P^F^z)+B[1]+2763975236&4294967295,b=P+(U<<4&4294967295|U>>>28),U=z+(b^P^F)+B[4]+1272893353&4294967295,z=b+(U<<11&4294967295|U>>>21),U=F+(z^b^P)+B[7]+4139469664&4294967295,F=z+(U<<16&4294967295|U>>>16),U=P+(F^z^b)+B[10]+3200236656&4294967295,P=F+(U<<23&4294967295|U>>>9),U=b+(P^F^z)+B[13]+681279174&4294967295,b=P+(U<<4&4294967295|U>>>28),U=z+(b^P^F)+B[0]+3936430074&4294967295,z=b+(U<<11&4294967295|U>>>21),U=F+(z^b^P)+B[3]+3572445317&4294967295,F=z+(U<<16&4294967295|U>>>16),U=P+(F^z^b)+B[6]+76029189&4294967295,P=F+(U<<23&4294967295|U>>>9),U=b+(P^F^z)+B[9]+3654602809&4294967295,b=P+(U<<4&4294967295|U>>>28),U=z+(b^P^F)+B[12]+3873151461&4294967295,z=b+(U<<11&4294967295|U>>>21),U=F+(z^b^P)+B[15]+530742520&4294967295,F=z+(U<<16&4294967295|U>>>16),U=P+(F^z^b)+B[2]+3299628645&4294967295,P=F+(U<<23&4294967295|U>>>9),U=b+(F^(P|~z))+B[0]+4096336452&4294967295,b=P+(U<<6&4294967295|U>>>26),U=z+(P^(b|~F))+B[7]+1126891415&4294967295,z=b+(U<<10&4294967295|U>>>22),U=F+(b^(z|~P))+B[14]+2878612391&4294967295,F=z+(U<<15&4294967295|U>>>17),U=P+(z^(F|~b))+B[5]+4237533241&4294967295,P=F+(U<<21&4294967295|U>>>11),U=b+(F^(P|~z))+B[12]+1700485571&4294967295,b=P+(U<<6&4294967295|U>>>26),U=z+(P^(b|~F))+B[3]+2399980690&4294967295,z=b+(U<<10&4294967295|U>>>22),U=F+(b^(z|~P))+B[10]+4293915773&4294967295,F=z+(U<<15&4294967295|U>>>17),U=P+(z^(F|~b))+B[1]+2240044497&4294967295,P=F+(U<<21&4294967295|U>>>11),U=b+(F^(P|~z))+B[8]+1873313359&4294967295,b=P+(U<<6&4294967295|U>>>26),U=z+(P^(b|~F))+B[15]+4264355552&4294967295,z=b+(U<<10&4294967295|U>>>22),U=F+(b^(z|~P))+B[6]+2734768916&4294967295,F=z+(U<<15&4294967295|U>>>17),U=P+(z^(F|~b))+B[13]+1309151649&4294967295,P=F+(U<<21&4294967295|U>>>11),U=b+(F^(P|~z))+B[4]+4149444226&4294967295,b=P+(U<<6&4294967295|U>>>26),U=z+(P^(b|~F))+B[11]+3174756917&4294967295,z=b+(U<<10&4294967295|U>>>22),U=F+(b^(z|~P))+B[2]+718787259&4294967295,F=z+(U<<15&4294967295|U>>>17),U=P+(z^(F|~b))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(F+(U<<21&4294967295|U>>>11))&4294967295,N.g[2]=N.g[2]+F&4294967295,N.g[3]=N.g[3]+z&4294967295}r.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var P=b-this.blockSize,B=this.B,F=this.h,z=0;z<b;){if(F==0)for(;z<=P;)i(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<b;)if(B[F++]=N.charCodeAt(z++),F==this.blockSize){i(this,B),F=0;break}}else for(;z<b;)if(B[F++]=N[z++],F==this.blockSize){i(this,B),F=0;break}}this.h=F,this.o+=b},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var P=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=P&255,P/=256;for(this.u(N),N=Array(16),b=P=0;4>b;++b)for(var B=0;32>B;B+=8)N[P++]=this.g[b]>>>B&255;return N};function a(N,b){var P=l;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=b(N)}function u(N,b){this.h=b;for(var P=[],B=!0,F=N.length-1;0<=F;F--){var z=N[F]|0;B&&z==b||(P[F]=z,B=!1)}this.g=P}var l={};function f(N){return-128<=N&&128>N?a(N,function(b){return new u([b|0],0>b?-1:0)}):new u([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return I(d(-N));for(var b=[],P=1,B=0;N>=P;B++)b[B]=N/P|0,P*=4294967296;return new u(b,0)}function g(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return I(g(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=d(Math.pow(b,8)),B=m,F=0;F<N.length;F+=8){var z=Math.min(8,N.length-F),U=parseInt(N.substring(F,F+z),b);8>z?(z=d(Math.pow(b,z)),B=B.j(z).add(d(U))):(B=B.j(P),B=B.add(d(U)))}return B}var m=f(0),y=f(1),x=f(16777216);n=u.prototype,n.m=function(){if(S(this))return-I(this).m();for(var N=0,b=1,P=0;P<this.g.length;P++){var B=this.i(P);N+=(0<=B?B:4294967296+B)*b,b*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(A(this))return"0";if(S(this))return"-"+I(this).toString(N);for(var b=d(Math.pow(N,6)),P=this,B="";;){var F=V(P,b).g;P=M(P,F.j(b));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=F,A(P))return z+B;for(;6>z.length;)z="0"+z;B=z+B}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function A(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function S(N){return N.h==-1}n.l=function(N){return N=M(this,N),S(N)?-1:A(N)?0:1};function I(N){for(var b=N.g.length,P=[],B=0;B<b;B++)P[B]=~N.g[B];return new u(P,~N.h).add(y)}n.abs=function(){return S(this)?I(this):this},n.add=function(N){for(var b=Math.max(this.g.length,N.g.length),P=[],B=0,F=0;F<=b;F++){var z=B+(this.i(F)&65535)+(N.i(F)&65535),U=(z>>>16)+(this.i(F)>>>16)+(N.i(F)>>>16);B=U>>>16,z&=65535,U&=65535,P[F]=U<<16|z}return new u(P,P[P.length-1]&-2147483648?-1:0)};function M(N,b){return N.add(I(b))}n.j=function(N){if(A(this)||A(N))return m;if(S(this))return S(N)?I(this).j(I(N)):I(I(this).j(N));if(S(N))return I(this.j(I(N)));if(0>this.l(x)&&0>N.l(x))return d(this.m()*N.m());for(var b=this.g.length+N.g.length,P=[],B=0;B<2*b;B++)P[B]=0;for(B=0;B<this.g.length;B++)for(var F=0;F<N.g.length;F++){var z=this.i(B)>>>16,U=this.i(B)&65535,Ot=N.i(F)>>>16,Ft=N.i(F)&65535;P[2*B+2*F]+=U*Ft,O(P,2*B+2*F),P[2*B+2*F+1]+=z*Ft,O(P,2*B+2*F+1),P[2*B+2*F+1]+=U*Ot,O(P,2*B+2*F+1),P[2*B+2*F+2]+=z*Ot,O(P,2*B+2*F+2)}for(B=0;B<b;B++)P[B]=P[2*B+1]<<16|P[2*B];for(B=b;B<2*b;B++)P[B]=0;return new u(P,0)};function O(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function k(N,b){this.g=N,this.h=b}function V(N,b){if(A(b))throw Error("division by zero");if(A(N))return new k(m,m);if(S(N))return b=V(I(N),b),new k(I(b.g),I(b.h));if(S(b))return b=V(N,I(b)),new k(I(b.g),b.h);if(30<N.g.length){if(S(N)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var P=y,B=b;0>=B.l(N);)P=H(P),B=H(B);var F=q(P,1),z=q(B,1);for(B=q(B,2),P=q(P,2);!A(B);){var U=z.add(B);0>=U.l(N)&&(F=F.add(P),z=U),B=q(B,1),P=q(P,1)}return b=M(N,F.j(b)),new k(F,b)}for(F=m;0<=N.l(b);){for(P=Math.max(1,Math.floor(N.m()/b.m())),B=Math.ceil(Math.log(P)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),z=d(P),U=z.j(b);S(U)||0<U.l(N);)P-=B,z=d(P),U=z.j(b);A(z)&&(z=y),F=F.add(z),N=M(N,U)}return new k(F,N)}n.A=function(N){return V(this,N).h},n.and=function(N){for(var b=Math.max(this.g.length,N.g.length),P=[],B=0;B<b;B++)P[B]=this.i(B)&N.i(B);return new u(P,this.h&N.h)},n.or=function(N){for(var b=Math.max(this.g.length,N.g.length),P=[],B=0;B<b;B++)P[B]=this.i(B)|N.i(B);return new u(P,this.h|N.h)},n.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),P=[],B=0;B<b;B++)P[B]=this.i(B)^N.i(B);return new u(P,this.h^N.h)};function H(N){for(var b=N.g.length+1,P=[],B=0;B<b;B++)P[B]=N.i(B)<<1|N.i(B-1)>>>31;return new u(P,N.h)}function q(N,b){var P=b>>5;b%=32;for(var B=N.g.length-P,F=[],z=0;z<B;z++)F[z]=0<b?N.i(z+P)>>>b|N.i(z+P+1)<<32-b:N.i(z+P);return new u(F,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=d,u.fromString=g,Qa=u}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zE,cc,HE,Fh,Sp,GE,qE,XE;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,E,T){return p==Array.prototype||p==Object.prototype||(p[E]=T.value),p};function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ch=="object"&&Ch];for(var E=0;E<p.length;++E){var T=p[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=e(this);function i(p,E){if(E)t:{var T=r;p=p.split(".");for(var D=0;D<p.length-1;D++){var W=p[D];if(!(W in T))break t;T=T[W]}p=p[p.length-1],D=T[p],E=E(D),E!=D&&E!=null&&t(T,p,{configurable:!0,writable:!0,value:E})}}function a(p,E){p instanceof String&&(p+="");var T=0,D=!1,W={next:function(){if(!D&&T<p.length){var tt=T++;return{value:E(tt,p[tt]),done:!1}}return D=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(p){return p||function(){return a(this,function(E,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},l=this||self;function f(p){var E=typeof p;return E=E!="object"?E:p?Array.isArray(p)?"array":E:"null",E=="array"||E=="object"&&typeof p.length=="number"}function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function g(p,E,T){return p.call.apply(p.bind,arguments)}function m(p,E,T){if(!p)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,D),p.apply(E,W)}}return function(){return p.apply(E,arguments)}}function y(p,E,T){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:m,y.apply(null,arguments)}function x(p,E){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),p.apply(this,D)}}function A(p,E){function T(){}T.prototype=E.prototype,p.aa=E.prototype,p.prototype=new T,p.prototype.constructor=p,p.Qb=function(D,W,tt){for(var ut=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)ut[jt-2]=arguments[jt];return E.prototype[W].apply(D,ut)}}function S(p){const E=p.length;if(0<E){const T=Array(E);for(let D=0;D<E;D++)T[D]=p[D];return T}return[]}function I(p,E){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(f(D)){const W=p.length||0,tt=D.length||0;p.length=W+tt;for(let ut=0;ut<tt;ut++)p[W+ut]=D[ut]}else p.push(D)}}class M{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(p){return/^[\s\xa0]*$/.test(p)}function k(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function V(p){return V[" "](p),p}V[" "]=function(){};var H=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function q(p,E,T){for(const D in p)E.call(T,p[D],D,p)}function N(p,E){for(const T in p)E.call(void 0,p[T],T,p)}function b(p){const E={};for(const T in p)E[T]=p[T];return E}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(p,E){let T,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(T in D)p[T]=D[T];for(let tt=0;tt<P.length;tt++)T=P[tt],Object.prototype.hasOwnProperty.call(D,T)&&(p[T]=D[T])}}function F(p){var E=1;p=p.split(":");const T=[];for(;0<E&&p.length;)T.push(p.shift()),E--;return p.length&&T.push(p.join(":")),T}function z(p){l.setTimeout(()=>{throw p},0)}function U(){var p=ne;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class Ot{constructor(){this.h=this.g=null}add(E,T){const D=Ft.get();D.set(E,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Ft=new M(()=>new rt,p=>p.reset());class rt{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,yt=!1,ne=new Ot,le=()=>{const p=l.Promise.resolve(void 0);ft=()=>{p.then(gn)}};var gn=()=>{for(var p;p=U();){try{p.h.call(p.g)}catch(T){z(T)}var E=Ft;E.j(p),100>E.h&&(E.h++,p.next=E.g,E.g=p)}yt=!1};function Wt(){this.s=this.s,this.C=this.C}Wt.prototype.s=!1,Wt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};l.addEventListener("test",T,E),l.removeEventListener("test",T,E)}catch{}return p}();function bn(p,E){if(It.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var T=this.type=p.type,D=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget){if(H){t:{try{V(E.nodeName);var W=!0;break t}catch{}W=!1}W||(E=null)}}else T=="mouseover"?E=p.fromElement:T=="mouseout"&&(E=p.toElement);this.relatedTarget=E,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:qr[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&bn.aa.h.call(this)}}A(bn,It);var qr={2:"touch",3:"pen",4:"mouse"};bn.prototype.h=function(){bn.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var xi="closure_listenable_"+(1e6*Math.random()|0),_s=0;function sa(p,E,T,D,W){this.listener=p,this.proxy=null,this.src=E,this.type=T,this.capture=!!D,this.ha=W,this.key=++_s,this.da=this.fa=!1}function ua(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ei(p){this.src=p,this.g={},this.h=0}Ei.prototype.add=function(p,E,T,D,W){var tt=p.toString();p=this.g[tt],p||(p=this.g[tt]=[],this.h++);var ut=po(p,E,D,W);return-1<ut?(E=p[ut],T||(E.fa=!1)):(E=new sa(E,this.src,tt,!!D,W),E.fa=T,p.push(E)),E};function ho(p,E){var T=E.type;if(T in p.g){var D=p.g[T],W=Array.prototype.indexOf.call(D,E,void 0),tt;(tt=0<=W)&&Array.prototype.splice.call(D,W,1),tt&&(ua(E),p.g[T].length==0&&(delete p.g[T],p.h--))}}function po(p,E,T,D){for(var W=0;W<p.length;++W){var tt=p[W];if(!tt.da&&tt.listener==E&&tt.capture==!!T&&tt.ha==D)return W}return-1}var go="closure_lm_"+(1e6*Math.random()|0),Yu={};function tf(p,E,T,D,W){if(Array.isArray(E)){for(var tt=0;tt<E.length;tt++)tf(p,E[tt],T,D,W);return null}return T=ef(T),p&&p[xi]?p.K(E,T,d(D)?!!D.capture:!1,W):cr(p,E,T,!1,D,W)}function cr(p,E,T,D,W,tt){if(!E)throw Error("Invalid event type");var ut=d(W)?!!W.capture:!!W,jt=Es(p);if(jt||(p[go]=jt=new Ei(p)),T=jt.add(E,T,D,ut,tt),T.proxy)return T;if(D=Hd(),T.proxy=D,D.src=p,D.listener=T,p.addEventListener)ke||(W=ut),W===void 0&&(W=!1),p.addEventListener(E.toString(),D,W);else if(p.attachEvent)p.attachEvent(vo(E.toString()),D);else if(p.addListener&&p.removeListener)p.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Hd(){function p(T){return E.call(p.src,p.listener,T)}const E=Gd;return p}function Ku(p,E,T,D,W){if(Array.isArray(E))for(var tt=0;tt<E.length;tt++)Ku(p,E[tt],T,D,W);else D=d(D)?!!D.capture:!!D,T=ef(T),p&&p[xi]?(p=p.i,E=String(E).toString(),E in p.g&&(tt=p.g[E],T=po(tt,T,D,W),-1<T&&(ua(tt[T]),Array.prototype.splice.call(tt,T,1),tt.length==0&&(delete p.g[E],p.h--)))):p&&(p=Es(p))&&(E=p.g[E.toString()],p=-1,E&&(p=po(E,T,D,W)),(T=-1<p?E[p]:null)&&xs(T))}function xs(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[xi])ho(E.i,p);else{var T=p.type,D=p.proxy;E.removeEventListener?E.removeEventListener(T,D,p.capture):E.detachEvent?E.detachEvent(vo(T),D):E.addListener&&E.removeListener&&E.removeListener(D),(T=Es(E))?(ho(T,p),T.h==0&&(T.src=null,E[go]=null)):ua(p)}}}function vo(p){return p in Yu?Yu[p]:Yu[p]="on"+p}function Gd(p,E){if(p.da)p=!0;else{E=new bn(E,this);var T=p.listener,D=p.ha||p.src;p.fa&&xs(p),p=T.call(D,E)}return p}function Es(p){return p=p[go],p instanceof Ei?p:null}var Qu="__closure_events_fn_"+(1e9*Math.random()>>>0);function ef(p){return typeof p=="function"?p:(p[Qu]||(p[Qu]=function(E){return p.handleEvent(E)}),p[Qu])}function Re(){Wt.call(this),this.i=new Ei(this),this.M=this,this.F=null}A(Re,Wt),Re.prototype[xi]=!0,Re.prototype.removeEventListener=function(p,E,T,D){Ku(this,p,E,T,D)};function re(p,E){var T,D=p.F;if(D)for(T=[];D;D=D.F)T.push(D);if(p=p.M,D=E.type||E,typeof E=="string")E=new It(E,p);else if(E instanceof It)E.target=E.target||p;else{var W=E;E=new It(D,p),B(E,W)}if(W=!0,T)for(var tt=T.length-1;0<=tt;tt--){var ut=E.g=T[tt];W=tr(ut,D,!0,E)&&W}if(ut=E.g=p,W=tr(ut,D,!0,E)&&W,W=tr(ut,D,!1,E)&&W,T)for(tt=0;tt<T.length;tt++)ut=E.g=T[tt],W=tr(ut,D,!1,E)&&W}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var p=this.i,E;for(E in p.g){for(var T=p.g[E],D=0;D<T.length;D++)ua(T[D]);delete p.g[E],p.h--}}this.F=null},Re.prototype.K=function(p,E,T,D){return this.i.add(String(p),E,!1,T,D)},Re.prototype.L=function(p,E,T,D){return this.i.add(String(p),E,!0,T,D)};function tr(p,E,T,D){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();for(var W=!0,tt=0;tt<E.length;++tt){var ut=E[tt];if(ut&&!ut.da&&ut.capture==T){var jt=ut.listener,Xe=ut.ha||ut.src;ut.fa&&ho(p.i,ut),W=jt.call(Xe,D)!==!1&&W}}return W&&!D.defaultPrevented}function Rn(p,E,T){if(typeof p=="function")T&&(p=y(p,T));else if(p&&typeof p.handleEvent=="function")p=y(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:l.setTimeout(p,E||0)}function nf(p){p.g=Rn(()=>{p.g=null,p.i&&(p.i=!1,nf(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class qd extends Wt{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:nf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(p){Wt.call(this),this.h=p,this.g={}}A(mo,Wt);var yo=[];function _o(p){q(p.g,function(E,T){this.g.hasOwnProperty(T)&&xs(E)},p),p.g={}}mo.prototype.N=function(){mo.aa.N.call(this),_o(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=l.JSON.stringify,As=l.JSON.parse,xo=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function $u(){}$u.prototype.h=null;function Zu(p){return p.h||(p.h=p.i())}function Ju(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wi(){It.call(this,"d")}A(wi,It);function tl(){It.call(this,"c")}A(tl,It);var Xr={},el=null;function la(){return el=el||new Re}Xr.La="serverreachability";function ws(p){It.call(this,Xr.La,p)}A(ws,It);function ca(p){const E=la();re(E,new ws(E))}Xr.STAT_EVENT="statevent";function rf(p,E){It.call(this,Xr.STAT_EVENT,p),this.stat=E}A(rf,It);function we(p){const E=la();re(E,new rf(E,p))}Xr.Ma="timingevent";function qe(p,E){It.call(this,Xr.Ma,p),this.size=E}A(qe,It);function Ve(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},E)}function fr(){this.g=!0}fr.prototype.xa=function(){this.g=!1};function nl(p,E,T,D,W,tt){p.info(function(){if(p.g)if(tt)for(var ut="",jt=tt.split("&"),Xe=0;Xe<jt.length;Xe++){var zt=jt[Xe].split("=");if(1<zt.length){var on=zt[0];zt=zt[1];var We=on.split("_");ut=2<=We.length&&We[1]=="type"?ut+(on+"="+zt+"&"):ut+(on+"=redacted&")}}else ut=null;else ut=tt;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+E+`
`+T+`
`+ut})}function Xd(p,E,T,D,W,tt,ut){p.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+E+`
`+T+`
`+tt+" "+ut})}function fa(p,E,T,D){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Eo(p,T)+(D?" "+D:"")})}function af(p,E){p.info(function(){return"TIMEOUT: "+E})}fr.prototype.info=function(){};function Eo(p,E){if(!p.g)return E;if(!E)return null;try{var T=JSON.parse(E);if(T){for(p=0;p<T.length;p++)if(Array.isArray(T[p])){var D=T[p];if(!(2>D.length)){var W=D[1];if(Array.isArray(W)&&!(1>W.length)){var tt=W[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var ut=1;ut<W.length;ut++)W[ut]=""}}}}return Nr(T)}catch{return E}}var ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wr;function Yr(){}A(Yr,$u),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},Wr=new Yr;function Vn(p,E,T,D){this.j=p,this.i=E,this.l=T,this.R=D||1,this.U=new mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var rl={},Ts={};function Mr(p,E,T){p.L=1,p.v=Co(er(E)),p.m=T,p.P=!0,Si(p,null)}function Si(p,E){p.F=Date.now(),Ao(p),p.A=er(p.v);var T=p.A,D=p.R;Array.isArray(D)||(D=[String(D)]),ll(T.i,"t",D),p.C=0,T=p.j.J,p.h=new Ne,p.g=Ef(p.j,T?E:null,!p.m),0<p.O&&(p.M=new qd(y(p.Y,p,p.g),p.O)),E=p.U,T=p.g,D=p.ca;var W="readystatechange";Array.isArray(W)||(W&&(yo[0]=W.toString()),W=yo);for(var tt=0;tt<W.length;tt++){var ut=tf(T,W[tt],D||E.handleEvent,!1,E.h||E);if(!ut)break;E.g[ut.key]=ut}E=p.H?b(p.H):{},p.m?(p.u||(p.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,E)):(p.u="GET",p.g.ea(p.A,p.u,null,E)),ca(),nl(p.i,p.u,p.A,p.l,p.R,p.m)}Vn.prototype.ca=function(p){p=p.target;const E=this.M;E&&gr(p)==3?E.j():this.Y(p)},Vn.prototype.Y=function(p){try{if(p==this.g)t:{const We=gr(this.g);var E=this.g.Ba();const Mi=this.g.Z();if(!(3>We)&&(We!=3||this.g&&(this.h.h||this.g.oa()||df(this.g)))){this.J||We!=4||E==7||(E==8||0>=Mi?ca(3):ca(2)),da(this);var T=this.g.Z();this.X=T;e:if(of(this)){var D=df(this.g);p="";var W=D.length,tt=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Kr(this);var ut="";break e}this.h.i=new l.TextDecoder}for(E=0;E<W;E++)this.h.h=!0,p+=this.h.i.decode(D[E],{stream:!(tt&&E==W-1)});D.length=0,this.h.g+=p,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=T==200,Xd(this.i,this.u,this.A,this.l,this.R,We,T),this.o){if(this.T&&!this.K){e:{if(this.g){var jt,Xe=this.g;if((jt=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(jt)){var zt=jt;break e}}zt=null}if(T=zt)fa(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wo(this,T);else{this.o=!1,this.s=3,we(12),vn(this),Kr(this);break t}}if(this.P){T=!0;let mn;for(;!this.J&&this.C<ut.length;)if(mn=sf(this,ut),mn==Ts){We==4&&(this.s=4,we(14),T=!1),fa(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==rl){this.s=4,we(15),fa(this.i,this.l,ut,"[Invalid Chunk]"),T=!1;break}else fa(this.i,this.l,mn,null),wo(this,mn);if(of(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||ut.length!=0||this.h.h||(this.s=1,we(16),T=!1),this.o=this.o&&T,!T)fa(this.i,this.l,ut,"[Invalid Chunked Response]"),vn(this),Kr(this);else if(0<ut.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),Po(on),on.M=!0,we(11))}}else fa(this.i,this.l,ut,null),wo(this,ut);We==4&&vn(this),this.o&&!this.J&&(We==4?yf(this.j,this):(this.o=!1,Ao(this)))}else $d(this.g),T==400&&0<ut.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),vn(this),Kr(this)}}}catch{}finally{}};function of(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function sf(p,E){var T=p.C,D=E.indexOf(`
`,T);return D==-1?Ts:(T=Number(E.substring(T,D)),isNaN(T)?rl:(D+=1,D+T>E.length?Ts:(E=E.slice(D,D+T),p.C=D+T,E)))}Vn.prototype.cancel=function(){this.J=!0,vn(this)};function Ao(p){p.S=Date.now()+p.I,uf(p,p.I)}function uf(p,E){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ve(y(p.ba,p),E)}function da(p){p.B&&(l.clearTimeout(p.B),p.B=null)}Vn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(af(this.i,this.A),this.L!=2&&(ca(),we(17)),vn(this),this.s=2,Kr(this)):uf(this,this.S-p)};function Kr(p){p.j.G==0||p.J||yf(p.j,p)}function vn(p){da(p);var E=p.M;E&&typeof E.ma=="function"&&E.ma(),p.M=null,_o(p.U),p.g&&(E=p.g,p.g=null,E.abort(),E.ma())}function wo(p,E){try{var T=p.j;if(T.G!=0&&(T.g==p||il(T.h,p))){if(!p.K&&il(T.h,p)&&T.G==3){try{var D=T.Da.g.parse(E)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<p.F)Bs(T),Ps(T);else break t;pl(T),we(18)}}else T.za=W[1],0<T.za-T.T&&37500>W[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ve(y(T.Za,T),6e3));if(1>=Cs(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ni(T,11)}else if((p.K||T.g==p)&&Bs(T),!O(E))for(W=T.Da.g.parse(E),E=0;E<W.length;E++){let zt=W[E];if(T.T=zt[0],zt=zt[1],T.G==2)if(zt[0]=="c"){T.K=zt[1],T.ia=zt[2];const on=zt[3];on!=null&&(T.la=on,T.j.info("VER="+T.la));const We=zt[4];We!=null&&(T.Aa=We,T.j.info("SVER="+T.Aa));const Mi=zt[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(D=1.5*Mi,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const mn=p.g;if(mn){const ni=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var tt=D.h;tt.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(Is(tt,tt.h),tt.h=null))}if(D.D){const vl=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(D.ya=vl,ce(D.I,D.D,vl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-p.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var ut=p;if(D.qa=xf(D,D.J?D.ia:null,D.W),ut.K){Un(D.h,ut);var jt=ut,Xe=D.L;Xe&&(jt.I=Xe),jt.B&&(da(jt),Ao(jt)),D.g=ut}else vf(D);0<T.i.length&&Ls(T)}else zt[0]!="stop"&&zt[0]!="close"||Ni(T,7);else T.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Ni(T,7):hl(T):zt[0]!="noop"&&T.l&&T.l.ta(zt),T.v=0)}}ca(4)}catch{}}var lf=class{constructor(p,E){this.g=p,this.map=E}};function Ci(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ss(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Cs(p){return p.h?1:p.g?p.g.size:0}function il(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function Is(p,E){p.g?p.g.add(E):p.h=E}function Un(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ci.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function al(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const T of p.g.values())E=E.concat(T.D);return E}return S(p.i)}function Wd(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var E=[],T=p.length,D=0;D<T;D++)E.push(p[D]);return E}E=[],T=0;for(D in p)E[T++]=p[D];return E}function bs(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var E=[];p=p.length;for(var T=0;T<p;T++)E.push(T);return E}E=[],T=0;for(const D in p)E[T++]=D;return E}}}function ol(p,E){if(p.forEach&&typeof p.forEach=="function")p.forEach(E,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,E,void 0);else for(var T=bs(p),D=Wd(p),W=D.length,tt=0;tt<W;tt++)E.call(void 0,D[tt],T&&T[tt],p)}var To=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yd(p,E){if(p){p=p.split("&");for(var T=0;T<p.length;T++){var D=p[T].indexOf("="),W=null;if(0<=D){var tt=p[T].substring(0,D);W=p[T].substring(D+1)}else tt=p[T];E(tt,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ue(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ue){this.h=p.h,So(this,p.j),this.o=p.o,this.g=p.g,pa(this,p.s),this.l=p.l;var E=p.i,T=new bi;T.i=E.i,E.g&&(T.g=new Map(E.g),T.h=E.h),Ii(this,T),this.m=p.m}else p&&(E=String(p).match(To))?(this.h=!1,So(this,E[1]||"",!0),this.o=hr(E[2]||""),this.g=hr(E[3]||"",!0),pa(this,E[4]),this.l=hr(E[5]||"",!0),Ii(this,E[6]||"",!0),this.m=hr(E[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}Ue.prototype.toString=function(){var p=[],E=this.j;E&&p.push(Io(E,sl,!0),":");var T=this.g;return(T||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Io(E,sl,!0),"@"),p.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&p.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(Io(T,T.charAt(0)=="/"?Kd:ul,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",Io(T,Rs)),p.join("")};function er(p){return new Ue(p)}function So(p,E,T){p.j=T?hr(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function pa(p,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);p.s=E}else p.s=null}function Ii(p,E,T){E instanceof bi?(p.i=E,ff(p.i,p.h)):(T||(E=Io(E,Qd)),p.i=new bi(E,p.h))}function ce(p,E,T){p.i.set(E,T)}function Co(p){return ce(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function hr(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Io(p,E,T){return typeof p=="string"?(p=encodeURI(p).replace(E,cf),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function cf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var sl=/[#\/\?@]/g,ul=/[#\?:]/g,Kd=/[#\?]/g,Qd=/[#\?@]/g,Rs=/#/g;function bi(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function dr(p){p.g||(p.g=new Map,p.h=0,p.i&&Yd(p.i,function(E,T){p.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=bi.prototype,n.add=function(p,E){dr(this),this.i=null,p=Qr(this,p);var T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(E),this.h+=1,this};function Ri(p,E){dr(p),E=Qr(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Oi(p,E){return dr(p),E=Qr(p,E),p.g.has(E)}n.forEach=function(p,E){dr(this),this.g.forEach(function(T,D){T.forEach(function(W){p.call(E,W,D,this)},this)},this)},n.na=function(){dr(this);const p=Array.from(this.g.values()),E=Array.from(this.g.keys()),T=[];for(let D=0;D<E.length;D++){const W=p[D];for(let tt=0;tt<W.length;tt++)T.push(E[D])}return T},n.V=function(p){dr(this);let E=[];if(typeof p=="string")Oi(this,p)&&(E=E.concat(this.g.get(Qr(this,p))));else{p=Array.from(this.g.values());for(let T=0;T<p.length;T++)E=E.concat(p[T])}return E},n.set=function(p,E){return dr(this),this.i=null,p=Qr(this,p),Oi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=this.V(p),0<p.length?String(p[0]):E):E};function ll(p,E,T){Ri(p,E),0<T.length&&(p.i=null,p.g.set(Qr(p,E),S(T)),p.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(var T=0;T<E.length;T++){var D=E[T];const tt=encodeURIComponent(String(D)),ut=this.V(D);for(D=0;D<ut.length;D++){var W=tt;ut[D]!==""&&(W+="="+encodeURIComponent(String(ut[D]))),p.push(W)}}return this.i=p.join("&")};function Qr(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function ff(p,E){E&&!p.j&&(dr(p),p.i=null,p.g.forEach(function(T,D){var W=D.toLowerCase();D!=W&&(Ri(this,D),ll(this,W,T))},p)),p.j=E}function bo(p,E){const T=new fr;if(l.Image){const D=new Image;D.onload=x(pr,T,"TestLoadImage: loaded",!0,E,D),D.onerror=x(pr,T,"TestLoadImage: error",!1,E,D),D.onabort=x(pr,T,"TestLoadImage: abort",!1,E,D),D.ontimeout=x(pr,T,"TestLoadImage: timeout",!1,E,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=p}else E(!1)}function Pr(p,E){const T=new fr,D=new AbortController,W=setTimeout(()=>{D.abort(),pr(T,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:D.signal}).then(tt=>{clearTimeout(W),tt.ok?pr(T,"TestPingServer: ok",!0,E):pr(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(W),pr(T,"TestPingServer: error",!1,E)})}function pr(p,E,T,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(T)}catch{}}function Ro(){this.g=new xo}function $r(p,E,T){const D=T||"";try{ol(p,function(W,tt){let ut=W;d(W)&&(ut=Nr(W)),E.push(D+tt+"="+encodeURIComponent(ut))})}catch(W){throw E.push(D+"type="+encodeURIComponent("_badmap")),W}}function ga(p){this.l=p.Ub||null,this.j=p.eb||!1}A(ga,$u),ga.prototype.g=function(){return new Di(this.l,this.j)},ga.prototype.i=function(p){return function(){return p}}({});function Di(p,E){Re.call(this),this.D=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Di,Re),n=Di.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=E,this.readyState=1,Jr(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(E.body=p),(this.D||l).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cl(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function cl(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Zr(this):Jr(this),this.readyState==3&&cl(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Zr(this))},n.Qa=function(p){this.g&&(this.response=p,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Jr(p)}n.setRequestHeader=function(p,E){this.u.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=E.next();return p.join(`\r
`)};function Jr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function fl(p){let E="";return q(p,function(T,D){E+=D,E+=":",E+=T,E+=`\r
`}),E}function an(p,E,T){t:{for(D in T){var D=!1;break t}D=!0}D||(T=fl(T),typeof p=="string"?T!=null&&encodeURIComponent(String(T)):ce(p,E,T))}function Jt(p){Re.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Jt,Re);var Os=/^https?$/i,Oo=["POST","PUT"];n=Jt.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,E,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wr.g(),this.v=this.o?Zu(this.o):Zu(Wr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(tt){hf(this,tt);return}if(p=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)T.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const tt of D.keys())T.set(tt,D.get(tt));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(tt=>tt.toLowerCase()=="content-type"),W=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Oo,E,void 0))||D||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,ut]of T)this.g.setRequestHeader(tt,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Do(this),this.u=!0,this.g.send(p),this.u=!1}catch(tt){hf(this,tt)}};function hf(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.m=5,Ds(p),ti(p)}function Ds(p){p.A||(p.A=!0,re(p,"complete"),re(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,re(this,"complete"),re(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ns(this):this.bb())},n.bb=function(){Ns(this)};function Ns(p){if(p.h&&typeof u<"u"&&(!p.v[1]||gr(p)!=4||p.Z()!=2)){if(p.u&&gr(p)==4)Rn(p.Ea,0,p);else if(re(p,"readystatechange"),gr(p)==4){p.h=!1;try{const ut=p.Z();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var T;if(!(T=E)){var D;if(D=ut===0){var W=String(p.D).match(To)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),D=!Os.test(W?W.toLowerCase():"")}T=D}if(T)re(p,"complete"),re(p,"success");else{p.m=6;try{var tt=2<gr(p)?p.g.statusText:""}catch{tt=""}p.l=tt+" ["+p.Z()+"]",Ds(p)}}finally{ti(p)}}}}function ti(p,E){if(p.g){Do(p);const T=p.g,D=p.v[0]?()=>{}:null;p.g=null,p.v=null,E||re(p,"ready");try{T.onreadystatechange=D}catch{}}}function Do(p){p.I&&(l.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function gr(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),As(E)}};function df(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function $d(p){const E={};p=(p.g&&2<=gr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<p.length;D++){if(O(p[D]))continue;var T=F(p[D]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const tt=E[W]||[];E[W]=tt,tt.push(T)}N(E,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(p,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||E}function Ms(p){this.Aa=0,this.i=[],this.j=new fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,p),this.cb=No("retryDelaySeedMs",1e4,p),this.Wa=No("forwardChannelMaxRetries",2,p),this.wa=No("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(p&&p.concurrentRequestLimit),this.Da=new Ro,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ms.prototype,n.la=8,n.G=1,n.connect=function(p,E,T,D){we(0),this.W=p,this.H=E||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=xf(this,null,this.W),Ls(this)};function hl(p){if(pf(p),p.G==3){var E=p.U++,T=er(p.I);if(ce(T,"SID",p.K),ce(T,"RID",E),ce(T,"TYPE","terminate"),Mo(p,T),E=new Vn(p,p.j,E),E.L=2,E.v=Co(er(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(E.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=E.v,T=!0),T||(E.g=Ef(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ao(E)}_f(p)}function Ps(p){p.g&&(Po(p),p.g.cancel(),p.g=null)}function pf(p){Ps(p),p.u&&(l.clearTimeout(p.u),p.u=null),Bs(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function Ls(p){if(!Ss(p.h)&&!p.s){p.s=!0;var E=p.Ga;ft||le(),yt||(ft(),yt=!0),ne.add(E,p),p.B=0}}function Zd(p,E){return Cs(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=E.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ve(y(p.Ga,p,E),gl(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const W=new Vn(this,this.j,p);let tt=this.o;if(this.S&&(tt?(tt=b(tt),B(tt,this.S)):tt=this.S),this.m!==null||this.O||(W.H=tt,tt=null),this.P)t:{for(var E=0,T=0;T<this.i.length;T++){e:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break e}D=void 0}if(D===void 0)break;if(E+=D,4096<E){E=T;break t}if(E===4096||T===this.i.length-1){E=T+1;break t}}E=1e3}else E=1e3;E=gf(this,W,E),T=er(this.I),ce(T,"RID",p),ce(T,"CVER",22),this.D&&ce(T,"X-HTTP-Session-Id",this.D),Mo(this,T),tt&&(this.O?E="headers="+encodeURIComponent(String(fl(tt)))+"&"+E:this.m&&an(T,this.m,tt)),Is(this.h,W),this.Ua&&ce(T,"TYPE","init"),this.P?(ce(T,"$req",E),ce(T,"SID","null"),W.T=!0,Mr(W,T,null)):Mr(W,T,E),this.G=2}}else this.G==3&&(p?dl(this,p):this.i.length==0||Ss(this.h)||dl(this))};function dl(p,E){var T;E?T=E.l:T=p.U++;const D=er(p.I);ce(D,"SID",p.K),ce(D,"RID",T),ce(D,"AID",p.T),Mo(p,D),p.m&&p.o&&an(D,p.m,p.o),T=new Vn(p,p.j,T,p.B+1),p.m===null&&(T.H=p.o),E&&(p.i=E.D.concat(p.i)),E=gf(p,T,1e3),T.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Is(p.h,T),Mr(T,D,E)}function Mo(p,E){p.H&&q(p.H,function(T,D){ce(E,D,T)}),p.l&&ol({},function(T,D){ce(E,D,T)})}function gf(p,E,T){T=Math.min(p.i.length,T);var D=p.l?y(p.l.Na,p.l,p):null;t:{var W=p.i;let tt=-1;for(;;){const ut=["count="+T];tt==-1?0<T?(tt=W[0].g,ut.push("ofs="+tt)):tt=0:ut.push("ofs="+tt);let jt=!0;for(let Xe=0;Xe<T;Xe++){let zt=W[Xe].g;const on=W[Xe].map;if(zt-=tt,0>zt)tt=Math.max(0,W[Xe].g-100),jt=!1;else try{$r(on,ut,"req"+zt+"_")}catch{D&&D(on)}}if(jt){D=ut.join("&");break t}}}return p=p.i.splice(0,T),E.D=p,D}function vf(p){if(!p.g&&!p.u){p.Y=1;var E=p.Fa;ft||le(),yt||(ft(),yt=!0),ne.add(E,p),p.v=0}}function pl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ve(y(p.Fa,p),gl(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ve(y(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),Ps(this),mf(this))};function Po(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function mf(p){p.g=new Vn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var E=er(p.qa);ce(E,"RID","rpc"),ce(E,"SID",p.K),ce(E,"AID",p.T),ce(E,"CI",p.F?"0":"1"),!p.F&&p.ja&&ce(E,"TO",p.ja),ce(E,"TYPE","xmlhttp"),Mo(p,E),p.m&&p.o&&an(E,p.m,p.o),p.L&&(p.g.I=p.L);var T=p.g;p=p.ia,T.L=1,T.v=Co(er(E)),T.m=null,T.P=!0,Si(T,p)}n.Za=function(){this.C!=null&&(this.C=null,Ps(this),pl(this),we(19))};function Bs(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function yf(p,E){var T=null;if(p.g==E){Bs(p),Po(p),p.g=null;var D=2}else if(il(p.h,E))T=E.D,Un(p.h,E),D=1;else return;if(p.G!=0){if(E.o)if(D==1){T=E.m?E.m.length:0,E=Date.now()-E.F;var W=p.B;D=la(),re(D,new qe(D,T)),Ls(p)}else vf(p);else if(W=E.s,W==3||W==0&&0<E.X||!(D==1&&Zd(p,E)||D==2&&pl(p)))switch(T&&0<T.length&&(E=p.h,E.i=E.i.concat(T)),W){case 1:Ni(p,5);break;case 4:Ni(p,10);break;case 3:Ni(p,6);break;default:Ni(p,2)}}}function gl(p,E){let T=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(T*=2),T*E}function Ni(p,E){if(p.j.info("Error code "+E),E==2){var T=y(p.fb,p),D=p.Xa;const W=!D;D=new Ue(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||So(D,"https"),Co(D),W?bo(D.toString(),T):Pr(D.toString(),T)}else we(2);p.G=0,p.l&&p.l.sa(E),_f(p),pf(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function _f(p){if(p.G=0,p.ka=[],p.l){const E=al(p.h);(E.length!=0||p.i.length!=0)&&(I(p.ka,E),I(p.ka,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.ra()}}function xf(p,E,T){var D=T instanceof Ue?er(T):new Ue(T);if(D.g!="")E&&(D.g=E+"."+D.g),pa(D,D.s);else{var W=l.location;D=W.protocol,E=E?E+"."+W.hostname:W.hostname,W=+W.port;var tt=new Ue(null);D&&So(tt,D),E&&(tt.g=E),W&&pa(tt,W),T&&(tt.l=T),D=tt}return T=p.D,E=p.ya,T&&E&&ce(D,T,E),ce(D,"VER",p.la),Mo(p,D),D}function Ef(p,E,T){if(E&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Ca&&!p.pa?new Jt(new ga({eb:T})):new Jt(p.pa),E.Ha(p.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Af(){}n=Af.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ks(){}ks.prototype.g=function(p,E){return new Fn(p,E)};function Fn(p,E){Re.call(this),this.g=new Ms(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(p?p["X-WebChannel-Client-Profile"]=E.va:p={"X-WebChannel-Client-Profile":E.va}),this.g.S=p,(p=E&&E.Sb)&&!O(p)&&(this.g.m=p),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!O(E)&&(this.g.D=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new ei(this)}A(Fn,Re),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){hl(this.g)},Fn.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.u&&(T={},T.__data__=Nr(p),p=T);E.i.push(new lf(E.Ya++,p)),E.G==3&&Ls(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,Fn.aa.N.call(this)};function wf(p){wi.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){t:{for(const T in E){p=T;break t}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}A(wf,wi);function Tf(){tl.call(this),this.status=1}A(Tf,tl);function ei(p){this.g=p}A(ei,Af),ei.prototype.ua=function(){re(this.g,"a")},ei.prototype.ta=function(p){re(this.g,new wf(p))},ei.prototype.sa=function(p){re(this.g,new Tf)},ei.prototype.ra=function(){re(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,XE=function(){return new ks},qE=function(){return la()},GE=Xr,Sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,Fh=ha,Ti.COMPLETE="complete",HE=Ti,Ju.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Re.prototype.listen=Re.prototype.K,cc=Ju,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,zE=Jt}).apply(typeof Ch<"u"?Ch:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",i_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new ig("@firebase/firestore");function pu(){return hs.logLevel}function pt(n,...t){if(hs.logLevel<=Vt.DEBUG){const e=t.map(vg);hs.debug(`Firestore (${Hu}): ${n}`,...e)}}function na(n,...t){if(hs.logLevel<=Vt.ERROR){const e=t.map(vg);hs.error(`Firestore (${Hu}): ${n}`,...e)}}function eo(n,...t){if(hs.logLevel<=Vt.WARN){const e=t.map(vg);hs.warn(`Firestore (${Hu}): ${n}`,...e)}}function vg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,WE(n,r,e)}function WE(n,t,e){let r=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw na(r),new Error(r)}function ee(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||WE(t,i,r)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends aa{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class MI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Pn.UNAUTHENTICATED))}shutdown(){}}class PI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(t){this.t=t,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ee(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,e(f)):Promise.resolve();let a=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Zi,t.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const f=a;t.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},l=f=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>l(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?l(f):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Zi)}},0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ee(t===null||typeof t=="string",2055,{h:t}),new Pn(t)}}class BI{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kI{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ee(this.o===void 0,3512);const r=a=>{a.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>r(a))};const i=a=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ee(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new a_(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UI(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%62))}return r}}function Mt(n,t){return n<t?-1:n>t?1:0}function Cp(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=n.codePointAt(e),i=t.codePointAt(e);if(r!==i){if(r<128&&i<128)return Mt(r,i);{const a=KE(),u=FI(a.encode(o_(n,e)),a.encode(o_(t,e)));return u!==0?u:Mt(r,i)}}e+=r>65535?2:1}return Mt(n.length,t.length)}function o_(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function FI(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Mt(n[e],t[e]);return Mt(n.length,t.length)}function Mu(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="__name__";class ui{constructor(t,e,r){e===void 0?e=0:e>t.length&&St(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&St(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return ui.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ui?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=ui.compareSegments(t.get(i),e.get(i));if(a!==0)return a}return Mt(t.length,e.length)}static compareSegments(t,e){const r=ui.isNumericId(t),i=ui.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?ui.extractNumericId(t).compare(ui.extractNumericId(e)):Cp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qa.fromString(t.substring(4,t.length-2))}}class ve extends ui{construct(t,e,r){return new ve(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht(it.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new ve(e)}static emptyPath(){return new ve([])}}const jI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends ui{construct(t,e,r){return new Tn(t,e,r)}static isValidIdentifier(t){return jI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s_}static keyField(){return new Tn([s_])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let u=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new ht(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ht(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,i+=2}else l==="`"?(u=!u,i++):l!=="."||u?(r+=l,i++):(a(),i++)}if(a(),u)throw new ht(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Tn(e)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(ve.fromString(t))}static fromName(t){return new _t(ve.fromString(t).popFirst(5))}static empty(){return new _t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ve.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new ve(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,t,e){if(!e)throw new ht(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function zI(n,t,e,r){if(t===!0&&r===!0)throw new ht(it.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function u_(n){if(!_t.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function l_(n){if(_t.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":St(12329,{type:typeof n})}function Or(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=xd(n);throw new ht(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function HI(n,t){if(t<=0)throw new ht(it.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,t){const e={typeString:n};return t&&(e.value=t),e}function qc(n,t){if(!QE(n))throw new ht(it.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&u!==a.value){e=`Expected '${r}' field to equal '${a.value}'`;break}}if(e)throw new ht(it.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=-62135596800,f_=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(t){return Ae.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*f_);return new Ae(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<c_)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f_}_compareTo(t){return this.seconds===t.seconds?Mt(this.nanoseconds,t.nanoseconds):Mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qc(t,Ae._jsonSchema))return new Ae(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-c_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ge("string",Ae._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Ae(0,0))}static max(){return new bt(new Ae(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function GI(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new Ae(e+1,0):new Ae(e,r));return new no(i,_t.empty(),t)}function qI(n){return new no(n.readTime,n.key,Oc)}class no{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new no(bt.min(),_t.empty(),Oc)}static max(){return new no(bt.max(),_t.empty(),Oc)}}function XI(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=_t.comparator(n.documentKey,t.documentKey),e!==0?e:Mt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==WI)throw n;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new st((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof st?e:st.resolve(e)}catch(e){return st.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):st.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):st.reject(e)}static resolve(t){return new st((e,r)=>{e(t)})}static reject(t){return new st((e,r)=>{r(t)})}static waitFor(t){return new st((e,r)=>{let i=0,a=0,u=!1;t.forEach(l=>{++i,l.next(()=>{++a,u&&a===i&&e()},f=>r(f))}),u=!0,a===i&&e()})}static or(t){let e=st.resolve(!1);for(const r of t)e=e.next(i=>i?st.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,a)=>{r.push(e.call(this,i,a))}),this.waitFor(r)}static mapArray(t,e){return new st((r,i)=>{const a=t.length,u=new Array(a);let l=0;for(let f=0;f<a;f++){const d=f;e(t[d]).next(g=>{u[d]=g,++l,l===a&&r(u)},g=>i(g))}})}static doWhile(t,e){return new st((r,i)=>{const a=()=>{t()===!0?e().next(()=>{a()},i):r()};a()})}}function KI(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function qu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this._e(r),this.ae=r=>e.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Ed.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=-1;function Ad(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function QI(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="";function $I(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=h_(t)),t=ZI(n.get(e),t);return h_(t)}function ZI(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="";break;case $E:e+="";break;default:e+=a}}return e}function h_(n){return n+$E+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function co(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function ZE(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||wn.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ih(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ih(this.root,t,this.comparator,!0)}}class Ih{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wn{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=r??wn.RED,this.left=i??wn.EMPTY,this.right=a??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new wn(t??this.key,e??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):a===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,e,r,i,a){return this}insert(t,e,r){return new wn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(t){return new p_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof rn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new rn(this.comparator);return e.data=t,e}}class p_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t){this.fields=t,t.sort(Tn.comparator)}static empty(){return new lr([])}unionWith(t){let e=new rn(Tn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new lr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Mu(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new JE("Invalid base64 string: "+a):a}}(t);return new In(e)}static fromUint8Array(t){const e=function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a}(t);return new In(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}In.EMPTY_BYTE_STRING=new In("");const JI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(n){if(ee(!!n,39018),typeof n=="string"){let t=0;const e=JI.exec(n);if(ee(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="server_timestamp",eA="__type__",nA="__previous_value__",rA="__local_write_time__";function xg(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[eA])===null||e===void 0?void 0:e.stringValue)===tA}function wd(n){const t=n.mapValue.fields[nA];return xg(t)?wd(t):t}function Dc(n){const t=ro(n.mapValue.fields[rA].timestampValue);return new Ae(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t,e,r,i,a,u,l,f,d,g){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=g}}const id="(default)";class Nc{constructor(t,e){this.projectId=t,this.database=e||id}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===id}isEqual(t){return t instanceof Nc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__type__",eb="__max__",bh={mapValue:{}},aA="__vector__",ad="value";function ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:rb(n)?9007199254740991:nb(n)?10:11:St(28295,{value:n})}function yi(n,t){if(n===t)return!0;const e=ao(n);if(e!==ao(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Dc(n).isEqual(Dc(t));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=ro(i.timestampValue),l=ro(a.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,a){return io(i.bytesValue).isEqual(io(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,a){return Le(i.geoPointValue.latitude)===Le(a.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(a.geoPointValue.longitude)}(n,t);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Le(i.integerValue)===Le(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=Le(i.doubleValue),l=Le(a.doubleValue);return u===l?rd(u)===rd(l):isNaN(u)&&isNaN(l)}return!1}(n,t);case 9:return Mu(n.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return function(i,a){const u=i.mapValue.fields||{},l=a.mapValue.fields||{};if(d_(u)!==d_(l))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(l[f]===void 0||!yi(u[f],l[f])))return!1;return!0}(n,t);default:return St(52216,{left:n})}}function Mc(n,t){return(n.values||[]).find(e=>yi(e,t))!==void 0}function Pu(n,t){if(n===t)return 0;const e=ao(n),r=ao(t);if(e!==r)return Mt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,t.booleanValue);case 2:return function(a,u){const l=Le(a.integerValue||a.doubleValue),f=Le(u.integerValue||u.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,t);case 3:return g_(n.timestampValue,t.timestampValue);case 4:return g_(Dc(n),Dc(t));case 5:return Cp(n.stringValue,t.stringValue);case 6:return function(a,u){const l=io(a),f=io(u);return l.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(a,u){const l=a.split("/"),f=u.split("/");for(let d=0;d<l.length&&d<f.length;d++){const g=Mt(l[d],f[d]);if(g!==0)return g}return Mt(l.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,u){const l=Mt(Le(a.latitude),Le(u.latitude));return l!==0?l:Mt(Le(a.longitude),Le(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return v_(n.arrayValue,t.arrayValue);case 10:return function(a,u){var l,f,d,g;const m=a.fields||{},y=u.fields||{},x=(l=m[ad])===null||l===void 0?void 0:l.arrayValue,A=(f=y[ad])===null||f===void 0?void 0:f.arrayValue,S=Mt(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((g=A==null?void 0:A.values)===null||g===void 0?void 0:g.length)||0);return S!==0?S:v_(x,A)}(n.mapValue,t.mapValue);case 11:return function(a,u){if(a===bh.mapValue&&u===bh.mapValue)return 0;if(a===bh.mapValue)return 1;if(u===bh.mapValue)return-1;const l=a.fields||{},f=Object.keys(l),d=u.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let m=0;m<f.length&&m<g.length;++m){const y=Cp(f[m],g[m]);if(y!==0)return y;const x=Pu(l[f[m]],d[g[m]]);if(x!==0)return x}return Mt(f.length,g.length)}(n.mapValue,t.mapValue);default:throw St(23264,{le:e})}}function g_(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Mt(n,t);const e=ro(n),r=ro(t),i=Mt(e.seconds,r.seconds);return i!==0?i:Mt(e.nanos,r.nanos)}function v_(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const a=Pu(e[i],r[i]);if(a)return a}return Mt(e.length,r.length)}function Lu(n){return Ip(n)}function Ip(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=ro(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return io(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return _t.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const a of e.values||[])i?i=!1:r+=",",r+=Ip(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${Ip(e.fields[u])}`;return i+"}"}(n.mapValue):St(61005,{value:n})}function jh(n){switch(ao(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wd(n);return t?16+jh(t):16;case 5:return 2*n.stringValue.length;case 6:return io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+jh(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return co(r.fields,(a,u)=>{i+=a.length+jh(u)}),i}(n.mapValue);default:throw St(13486,{value:n})}}function m_(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function bp(n){return!!n&&"integerValue"in n}function Eg(n){return!!n&&"arrayValue"in n}function y_(n){return!!n&&"nullValue"in n}function __(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zh(n){return!!n&&"mapValue"in n}function nb(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[iA])===null||e===void 0?void 0:e.stringValue)===aA}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return co(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=xc(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=xc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function rb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!zh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=xc(e)}setAll(t){let e=Tn.emptyPath(),r={},i=[];t.forEach((u,l)=>{if(!e.isImmediateParentOf(l)){const f=this.getFieldsMap(e);this.applyChanges(f,r,i),r={},i=[],e=l.popLast()}u?r[l.lastSegment()]=xc(u):i.push(l.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());zh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){co(e,(i,a)=>t[i]=a);for(const i of r)delete t[i]}clone(){return new Qn(xc(this.value))}}function oA(n){const t=[];return co(n.fields,(e,r)=>{const i=new Tn([e]);if(zh(r)){const a=oA(r.mapValue).fields;if(a.length===0)t.push(i);else for(const u of a)t.push(i.child(u))}else t.push(i)}),new lr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,e,r,i,a,u,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=l}static newInvalidDocument(t){return new Ln(t,0,bt.min(),bt.min(),bt.min(),Qn.empty(),0)}static newFoundDocument(t,e,r,i){return new Ln(t,1,e,bt.min(),r,i,0)}static newNoDocument(t,e){return new Ln(t,2,e,bt.min(),bt.min(),Qn.empty(),0)}static newUnknownDocument(t,e){return new Ln(t,3,e,bt.min(),bt.min(),Qn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e){this.position=t,this.inclusive=e}}function x_(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],u=n.position[i];if(a.field.isKeyField()?r=_t.comparator(_t.fromName(u.referenceValue),e.key):r=Pu(u,e.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function E_(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!yi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,e="asc"){this.field=t,this.dir=e}}function ib(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class He extends sA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new ob(t,e,r):e==="array-contains"?new lb(t,r):e==="in"?new cb(t,r):e==="not-in"?new fb(t,r):e==="array-contains-any"?new hb(t,r):new He(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new sb(t,r):new ub(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Pu(e,this.value)):e!==null&&ao(this.value)===ao(e)&&this.matchesComparison(Pu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends sA{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Gr(t,e)}matches(t){return uA(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uA(n){return n.op==="and"}function lA(n){return ab(n)&&uA(n)}function ab(n){for(const t of n.filters)if(t instanceof Gr)return!1;return!0}function Rp(n){if(n instanceof He)return n.field.canonicalString()+n.op.toString()+Lu(n.value);if(lA(n))return n.filters.map(t=>Rp(t)).join(",");{const t=n.filters.map(e=>Rp(e)).join(",");return`${n.op}(${t})`}}function cA(n,t){return n instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)}(n,t):n instanceof Gr?function(r,i){return i instanceof Gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,u,l)=>a&&cA(u,i.filters[l]),!0):!1}(n,t):void St(19439)}function fA(n){return n instanceof He?function(e){return`${e.field.canonicalString()} ${e.op} ${Lu(e.value)}`}(n):n instanceof Gr?function(e){return e.op.toString()+" {"+e.getFilters().map(fA).join(" ,")+"}"}(n):"Filter"}class ob extends He{constructor(t,e,r){super(t,e,r),this.key=_t.fromName(r.referenceValue)}matches(t){const e=_t.comparator(t.key,this.key);return this.matchesComparison(e)}}class sb extends He{constructor(t,e){super(t,"in",e),this.keys=hA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ub extends He{constructor(t,e){super(t,"not-in",e),this.keys=hA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hA(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>_t.fromName(r.referenceValue))}class lb extends He{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Eg(e)&&Mc(e.arrayValue,this.value)}}class cb extends He{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Mc(this.value.arrayValue,e)}}class fb extends He{constructor(t,e){super(t,"not-in",e)}matches(t){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Mc(this.value.arrayValue,e)}}class hb extends He{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Eg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t,e=null,r=[],i=[],a=null,u=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=l,this.Pe=null}}function A_(n,t=null,e=[],r=[],i=null,a=null,u=null){return new db(n,t,e,r,i,a,u)}function Ag(n){const t=Rt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Rp(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Ad(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Lu(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Lu(r)).join(",")),t.Pe=e}return t.Pe}function wg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!ib(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!cA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!E_(n.startAt,t.startAt)&&E_(n.endAt,t.endAt)}function Op(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t,e=null,r=[],i=[],a=null,u="F",l=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=l,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function pb(n,t,e,r,i,a,u,l){return new gs(n,t,e,r,i,a,u,l)}function Tg(n){return new gs(n)}function w_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dA(n){return n.collectionGroup!==null}function Ec(n){const t=Rt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const a of t.explicitOrderBy)t.Te.push(a),e.add(a.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let l=new rn(Tn.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Te.push(new Pc(a,r))}),e.has(Tn.keyField().canonicalString())||t.Te.push(new Pc(Tn.keyField(),r))}return t.Te}function hi(n){const t=Rt(n);return t.Ie||(t.Ie=gb(t,Ec(n))),t.Ie}function gb(n,t){if(n.limitType==="F")return A_(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Pc(i.field,a)});const e=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return A_(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Dp(n,t){const e=n.filters.concat([t]);return new gs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function sd(n,t,e){return new gs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Td(n,t){return wg(hi(n),hi(t))&&n.limitType===t.limitType}function pA(n){return`${Ag(hi(n))}|lt:${n.limitType}`}function gu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>fA(i)).join(", ")}]`),Ad(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Lu(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Lu(i)).join(",")),`Target(${r})`}(hi(n))}; limitType=${n.limitType})`}function Sd(n,t){return t.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_t.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,t)&&function(r,i){for(const a of Ec(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(u,l,f){const d=x_(u,l,f);return u.inclusive?d<=0:d<0}(r.startAt,Ec(r),i)||r.endAt&&!function(u,l,f){const d=x_(u,l,f);return u.inclusive?d>=0:d>0}(r.endAt,Ec(r),i))}(n,t)}function vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gA(n){return(t,e)=>{let r=!1;for(const i of Ec(n)){const a=mb(i,t,e);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function mb(n,t,e){const r=n.field.isKeyField()?_t.comparator(t.key,e.key):function(a,u,l){const f=u.data.field(a),d=l.data.field(a);return f!==null&&d!==null?Pu(f,d):St(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return St(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){co(this.inner,(e,r)=>{for(const[i,a]of r)t(i,a)})}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new be(_t.comparator);function ra(){return yb}const vA=new be(_t.comparator);function fc(...n){let t=vA;for(const e of n)t=t.insert(e.key,e);return t}function mA(n){let t=vA;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function ts(){return Ac()}function yA(){return Ac()}function Ac(){return new vs(n=>n.toString(),(n,t)=>n.isEqual(t))}const _b=new be(_t.comparator),xb=new rn(_t.comparator);function Ut(...n){let t=xb;for(const e of n)t=t.add(e);return t}const Eb=new rn(Mt);function Ab(){return Eb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(t)?"-0":t}}function _A(n){return{integerValue:""+n}}function wb(n,t){return QI(t)?_A(t):Sg(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function Tb(n,t,e){return n instanceof Lc?function(i,a){const u={fields:{[eA]:{stringValue:tA},[rA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&xg(a)&&(a=wd(a)),a&&(u.fields[nA]=a),{mapValue:u}}(e,t):n instanceof Bc?EA(n,t):n instanceof kc?AA(n,t):function(i,a){const u=xA(i,a),l=T_(u)+T_(i.Ee);return bp(u)&&bp(i.Ee)?_A(l):Sg(i.serializer,l)}(n,t)}function Sb(n,t,e){return n instanceof Bc?EA(n,t):n instanceof kc?AA(n,t):e}function xA(n,t){return n instanceof ud?function(r){return bp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(t)?t:{integerValue:0}:null}class Lc extends Cd{}class Bc extends Cd{constructor(t){super(),this.elements=t}}function EA(n,t){const e=wA(t);for(const r of n.elements)e.some(i=>yi(i,r))||e.push(r);return{arrayValue:{values:e}}}class kc extends Cd{constructor(t){super(),this.elements=t}}function AA(n,t){let e=wA(t);for(const r of n.elements)e=e.filter(i=>!yi(i,r));return{arrayValue:{values:e}}}class ud extends Cd{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function T_(n){return Le(n.integerValue||n.doubleValue)}function wA(n){return Eg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t,e){this.field=t,this.transform=e}}function Ib(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Bc&&i instanceof Bc||r instanceof kc&&i instanceof kc?Mu(r.elements,i.elements,yi):r instanceof ud&&i instanceof ud?yi(r.Ee,i.Ee):r instanceof Lc&&i instanceof Lc}(n.transform,t.transform)}class bb{constructor(t,e){this.version=t,this.transformResults=e}}class br{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new br}static exists(t){return new br(void 0,t)}static updateTime(t){return new br(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Id{}function TA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Cg(n.key,br.none()):new Xc(n.key,n.data,br.none());{const e=n.data,r=Qn.empty();let i=new rn(Tn.comparator);for(let a of t.fields)if(!i.has(a)){let u=e.field(a);u===null&&a.length>1&&(a=a.popLast(),u=e.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new fo(n.key,r,new lr(i.toArray()),br.none())}}function Rb(n,t,e){n instanceof Xc?function(i,a,u){const l=i.value.clone(),f=C_(i.fieldTransforms,a,u.transformResults);l.setAll(f),a.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,t,e):n instanceof fo?function(i,a,u){if(!Hh(i.precondition,a))return void a.convertToUnknownDocument(u.version);const l=C_(i.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(SA(i)),f.setAll(l),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,t,e):function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function wc(n,t,e,r){return n instanceof Xc?function(a,u,l,f){if(!Hh(a.precondition,u))return l;const d=a.value.clone(),g=I_(a.fieldTransforms,f,u);return d.setAll(g),u.convertToFoundDocument(u.version,d).setHasLocalMutations(),null}(n,t,e,r):n instanceof fo?function(a,u,l,f){if(!Hh(a.precondition,u))return l;const d=I_(a.fieldTransforms,f,u),g=u.data;return g.setAll(SA(a)),g.setAll(d),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(n,t,e,r):function(a,u,l){return Hh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l}(n,t,e)}function Ob(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=xA(r.transform,i||null);a!=null&&(e===null&&(e=Qn.empty()),e.set(r.field,a))}return e||null}function S_(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mu(r,i,(a,u)=>Ib(a,u))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Xc extends Id{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fo extends Id{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function C_(n,t,e){const r=new Map;ee(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let i=0;i<e.length;i++){const a=n[i],u=a.transform,l=t.data.field(a.field);r.set(a.field,Sb(u,l,e[i]))}return r}function I_(n,t,e){const r=new Map;for(const i of n){const a=i.transform,u=e.data.field(i.field);r.set(i.field,Tb(a,u,t))}return r}class Cg extends Id{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Db extends Id{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&Rb(a,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=wc(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=wc(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=yA();return this.mutations.forEach(i=>{const a=t.get(i.key),u=a.overlayedDocument;let l=this.applyToLocalView(u,a.mutatedFields);l=e.has(i.key)?null:l;const f=TA(u,l);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Mu(this.mutations,t.mutations,(e,r)=>S_(e,r))&&Mu(this.baseMutations,t.baseMutations,(e,r)=>S_(e,r))}}class Ig{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){ee(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return _b}();const a=t.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Ig(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Gt;function Lb(n){switch(n){case it.OK:return St(64938);case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0;default:return St(15467,{code:n})}}function CA(n){if(n===void 0)return na("GRPC error has no .code"),it.UNKNOWN;switch(n){case ze.OK:return it.OK;case ze.CANCELLED:return it.CANCELLED;case ze.UNKNOWN:return it.UNKNOWN;case ze.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case ze.INTERNAL:return it.INTERNAL;case ze.UNAVAILABLE:return it.UNAVAILABLE;case ze.UNAUTHENTICATED:return it.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case ze.NOT_FOUND:return it.NOT_FOUND;case ze.ALREADY_EXISTS:return it.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return it.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case ze.ABORTED:return it.ABORTED;case ze.OUT_OF_RANGE:return it.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return it.UNIMPLEMENTED;case ze.DATA_LOSS:return it.DATA_LOSS;default:return St(39323,{code:n})}}(Gt=ze||(ze={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Qa([4294967295,4294967295],0);function b_(n){const t=KE().encode(n),e=new jE;return e.update(t),new Uint8Array(e.digest())}function R_(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Qa([e,r],0),new Qa([i,a],0)]}class bg{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new hc(`Invalid padding: ${e}`);if(r<0)throw new hc(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new hc(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new hc(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=Qa.fromNumber(this.fe)}pe(t,e,r){let i=t.add(e.multiply(Qa.fromNumber(r)));return i.compare(Bb)===1&&(i=new Qa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=b_(t),[r,i]=R_(e);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,i,a);if(!this.ye(u))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),u=new bg(a,i,e);return r.forEach(l=>u.insert(l)),u}insert(t){if(this.fe===0)return;const e=b_(t),[r,i]=R_(e);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,i,a);this.we(u)}}we(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Wc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new bd(bt.min(),i,new be(Mt),ra(),Ut())}}class Wc{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Wc(r,e,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,e,r,i){this.Se=t,this.removedTargetIds=e,this.key=r,this.be=i}}class IA{constructor(t,e){this.targetId=t,this.De=e}}class bA{constructor(t,e,r=In.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class O_{constructor(){this.ve=0,this.Ce=D_(),this.Fe=In.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Ut(),e=Ut(),r=Ut();return this.Ce.forEach((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:St(38017,{changeType:a})}}),new Wc(this.Fe,this.Me,t,e,r)}ke(){this.xe=!1,this.Ce=D_()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class kb{constructor(t){this.We=t,this.Ge=new Map,this.ze=ra(),this.je=Rh(),this.Je=Rh(),this.He=new be(Mt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const r=this.tt(e);switch(t.state){case 0:this.nt(e)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),r.Be(t.resumeToken));break;default:St(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((r,i)=>{this.nt(i)&&e(i)})}it(t){const e=t.targetId,r=t.De.count,i=this.st(e);if(i){const a=i.target;if(Op(a))if(r===0){const u=new _t(a.path);this.Xe(e,u,Ln.newNoDocument(u,bt.min()))}else ee(r===1,20013,{expectedCount:r});else{const u=this.ot(e);if(u!==r){const l=this._t(t),f=l?this.ut(l,t,u):1;if(f!==0){this.rt(e);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,d)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=e;let u,l;try{u=io(r).toUint8Array()}catch(f){if(f instanceof JE)return eo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new bg(u,i,a)}catch(f){return eo(f instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return l.fe===0?null:l}ut(t,e,r){return e.De.count===r-this.ht(t,e.targetId)?0:2}ht(t,e){const r=this.We.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const u=this.We.lt(),l=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;t.mightContain(l)||(this.Xe(e,a,null),i++)}),i}Pt(t){const e=new Map;this.Ge.forEach((a,u)=>{const l=this.st(u);if(l){if(a.current&&Op(l.target)){const f=new _t(l.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,Ln.newNoDocument(f,t))}a.Ne&&(e.set(u,a.Le()),a.ke())}});let r=Ut();this.Je.forEach((a,u)=>{let l=!0;u.forEachWhile(f=>{const d=this.st(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ze.forEach((a,u)=>u.setReadTime(t));const i=new bd(t,e,this.He,this.ze,r);return this.ze=ra(),this.je=Rh(),this.Je=Rh(),this.He=new be(Mt),i}Ze(t,e){if(!this.nt(t))return;const r=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,r),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,e)?i.qe(e,1):i.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),r&&(this.ze=this.ze.insert(e,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new O_,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new rn(Mt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new rn(Mt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||pt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new O_),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Rh(){return new be(_t.comparator)}function D_(){return new be(_t.comparator)}const Vb={asc:"ASCENDING",desc:"DESCENDING"},Ub={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fb={and:"AND",or:"OR"};class jb{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Np(n,t){return n.useProto3Json||Ad(t)?t:{value:t}}function ld(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function RA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function zb(n,t){return ld(n,t.toTimestamp())}function di(n){return ee(!!n,49232),bt.fromTimestamp(function(e){const r=ro(e);return new Ae(r.seconds,r.nanos)}(n))}function Rg(n,t){return Mp(n,t).canonicalString()}function Mp(n,t){const e=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function OA(n){const t=ve.fromString(n);return ee(LA(t),10190,{key:t.toString()}),t}function Pp(n,t){return Rg(n.databaseId,t.path)}function J1(n,t){const e=OA(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new _t(NA(e))}function DA(n,t){return Rg(n.databaseId,t)}function Hb(n){const t=OA(n);return t.length===4?ve.emptyPath():NA(t)}function Lp(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NA(n){return ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function N_(n,t,e){return{name:Pp(n,t),fields:e.value.mapValue.fields}}function Gb(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:St(39313,{state:d})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(d,g){return d.useProto3Json?(ee(g===void 0||typeof g=="string",58123),In.fromBase64String(g||"")):(ee(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),In.fromUint8Array(g||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,l=u&&function(d){const g=d.code===void 0?it.UNKNOWN:CA(d.code);return new ht(g,d.message||"")}(u);e=new bA(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=J1(n,r.document.name),a=di(r.document.updateTime),u=r.document.createTime?di(r.document.createTime):bt.min(),l=new Qn({mapValue:{fields:r.document.fields}}),f=Ln.newFoundDocument(i,a,u,l),d=r.targetIds||[],g=r.removedTargetIds||[];e=new Gh(d,g,f.key,f)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=J1(n,r.document),a=r.readTime?di(r.readTime):bt.min(),u=Ln.newNoDocument(i,a),l=r.removedTargetIds||[];e=new Gh([],l,u.key,u)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=J1(n,r.document),a=r.removedTargetIds||[];e=new Gh([],a,i,null)}else{if(!("filter"in t))return St(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new Pb(i,a),l=r.targetId;e=new IA(l,u)}}return e}function qb(n,t){let e;if(t instanceof Xc)e={update:N_(n,t.key,t.value)};else if(t instanceof Cg)e={delete:Pp(n,t.key)};else if(t instanceof fo)e={update:N_(n,t.key,t.data),updateMask:t8(t.fieldMask)};else{if(!(t instanceof Db))return St(16599,{Rt:t.type});e={verify:Pp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(a,u){const l=u.transform;if(l instanceof Lc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ud)return{fieldPath:u.field.canonicalString(),increment:l.Ee};throw St(20930,{transform:u.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:zb(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:St(27497)}(n,t.precondition)),e}function Xb(n,t){return n&&n.length>0?(ee(t!==void 0,14353),n.map(e=>function(i,a){let u=i.updateTime?di(i.updateTime):di(a);return u.isEqual(bt.min())&&(u=di(a)),new bb(u,i.transformResults||[])}(e,t))):[]}function Wb(n,t){return{documents:[DA(n,t.path)]}}function Yb(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=DA(n,i);const a=function(d){if(d.length!==0)return PA(Gr.create(d,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const u=function(d){if(d.length!==0)return d.map(g=>function(y){return{field:vu(y.field),direction:$b(y.dir)}}(g))}(t.orderBy);u&&(e.structuredQuery.orderBy=u);const l=Np(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{Vt:e,parent:i}}function Kb(n){let t=Hb(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){ee(r===1,65062);const g=e.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let a=[];e.where&&(a=function(m){const y=MA(m);return y instanceof Gr&&lA(y)?y.getFilters():[y]}(e.where));let u=[];e.orderBy&&(u=function(m){return m.map(y=>function(A){return new Pc(mu(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(e.orderBy));let l=null;e.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Ad(y)?null:y}(e.limit));let f=null;e.startAt&&(f=function(m){const y=!!m.before,x=m.values||[];return new od(x,y)}(e.startAt));let d=null;return e.endAt&&(d=function(m){const y=!m.before,x=m.values||[];return new od(x,y)}(e.endAt)),pb(t,i,u,a,l,"F",f,d)}function Qb(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function MA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=mu(e.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mu(e.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=mu(e.unaryFilter.field);return He.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=mu(e.unaryFilter.field);return He.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}}(n):n.fieldFilter!==void 0?function(e){return He.create(mu(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Gr.create(e.compositeFilter.filters.map(r=>MA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return St(1026)}}(e.compositeFilter.op))}(n):St(30097,{filter:n})}function $b(n){return Vb[n]}function Zb(n){return Ub[n]}function Jb(n){return Fb[n]}function vu(n){return{fieldPath:n.canonicalString()}}function mu(n){return Tn.fromServerFormat(n.fieldPath)}function PA(n){return n instanceof He?function(e){if(e.op==="=="){if(__(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NAN"}};if(y_(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(__(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NAN"}};if(y_(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(e.field),op:Zb(e.op),value:e.value}}}(n):n instanceof Gr?function(e){const r=e.getFilters().map(i=>PA(i));return r.length===1?r[0]:{compositeFilter:{op:Jb(e.op),filters:r}}}(n):St(54877,{filter:n})}function t8(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function LA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,e,r,i,a=bt.min(),u=bt.min(),l=In.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(t){return new qa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(t){this.gt=t}}function n8(n){const t=Kb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.Dn=new i8}addToCollectionParentIndex(t,e){return this.Dn.add(e),st.resolve()}getCollectionParents(t,e){return st.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return st.resolve()}deleteFieldIndex(t,e){return st.resolve()}deleteAllFieldIndexes(t){return st.resolve()}createTargetIndexes(t,e){return st.resolve()}getDocumentsMatchingTarget(t,e){return st.resolve(null)}getIndexType(t,e){return st.resolve(0)}getFieldIndexes(t,e){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,e){return st.resolve(no.min())}getMinOffsetFromCollectionGroup(t,e){return st.resolve(no.min())}updateCollectionGroup(t,e,r){return st.resolve()}updateIndexEntries(t,e){return st.resolve()}}class i8{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new rn(ve.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new rn(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BA=41943040;class Kn{static withCacheSize(t){return new Kn(t,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(BA,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Bu(0)}static ur(){return new Bu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="LruGarbageCollector",a8=1048576;function L_([n,t],[e,r]){const i=Mt(n,e);return i===0?Mt(t,r):i}class o8{constructor(t){this.Tr=t,this.buffer=new rn(L_),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();L_(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class s8{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){pt(P_,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qu(e)?pt(P_,"Ignoring IndexedDB error during garbage collection: ",e):await Gu(e)}await this.Rr(3e5)})}}class u8{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return st.resolve(Ed.ue);const r=new o8(e);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Vr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(M_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M_):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let r,i,a,u,l,f,d;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,u=Date.now(),this.nthSequenceNumber(t,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(t,r,e))).next(m=>(a=m,f=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(d=Date.now(),pu()<=Vt.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${i} in `+(l-u)+`ms
	Removed ${a} targets in `+(f-l)+`ms
	Removed ${m} documents in `+(d-f)+`ms
Total Duration: ${d-g}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function l8(n,t){return new u8(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this.changes=new vs(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ln.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?st.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&wc(r.mutation,i,lr.empty(),Ae.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Ut()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Ut()){const i=ts();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(a=>{let u=fc();return a.forEach((l,f)=>{u=u.insert(l,f.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const r=ts();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Ut()))}populateOverlays(t,e,r){const i=[];return r.forEach(a=>{e.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(t,i).next(a=>{a.forEach((u,l)=>{e.set(u,l)})})}computeViews(t,e,r,i){let a=ra();const u=Ac(),l=function(){return Ac()}();return e.forEach((f,d)=>{const g=r.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof fo)?a=a.insert(d.key,d):g!==void 0?(u.set(d.key,g.mutation.getFieldMask()),wc(g.mutation,d,g.mutation.getFieldMask(),Ae.now())):u.set(d.key,lr.empty())}),this.recalculateAndSaveOverlays(t,a).next(f=>(f.forEach((d,g)=>u.set(d,g)),e.forEach((d,g)=>{var m;return l.set(d,new f8(g,(m=u.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,e){const r=Ac();let i=new be((u,l)=>u-l),a=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const l of u)l.keys().forEach(f=>{const d=e.get(f);if(d===null)return;let g=r.get(f)||lr.empty();g=l.applyToLocalView(d,g),r.set(f,g);const m=(i.get(l.batchId)||Ut()).add(f);i=i.insert(l.batchId,m)})}).next(()=>{const u=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),d=f.key,g=f.value,m=yA();g.forEach(y=>{if(!a.has(y)){const x=TA(e.get(y),r.get(y));x!==null&&m.set(y,x),a=a.add(y)}}),u.push(this.documentOverlayCache.saveOverlays(t,d,m))}return st.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(u){return _t.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):dA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-a.size):st.resolve(ts());let l=Oc,f=a;return u.next(d=>st.forEach(d,(g,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(g)?st.resolve():this.remoteDocumentCache.getEntry(t,g).next(y=>{f=f.insert(g,y)}))).next(()=>this.populateOverlays(t,d,a)).next(()=>this.computeViews(t,f,d,Ut())).next(g=>({batchId:l,changes:mA(g)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new _t(e)).next(r=>{let i=fc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const a=e.collectionGroup;let u=fc();return this.indexManager.getCollectionParents(t,a).next(l=>st.forEach(l,f=>{const d=function(m,y){return new gs(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(e,f.child(a));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next(g=>{g.forEach((m,y)=>{u=u.insert(m,y)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(t,e,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,a,i))).next(u=>{a.forEach((f,d)=>{const g=d.getKey();u.get(g)===null&&(u=u.insert(g,Ln.newInvalidDocument(g)))});let l=fc();return u.forEach((f,d)=>{const g=a.get(f);g!==void 0&&wc(g.mutation,d,lr.empty(),Ae.now()),Sd(e,d)&&(l=l.insert(f,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return st.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(i){return{id:i.id,version:i.version,createTime:di(i.createTime)}}(e)),st.resolve()}getNamedQuery(t,e){return st.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(i){return{name:i.name,query:n8(i.bundledQuery),readTime:di(i.readTime)}}(e)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.overlays=new be(_t.comparator),this.kr=new Map}getOverlay(t,e){return st.resolve(this.overlays.get(e))}getOverlays(t,e){const r=ts();return st.forEach(e,i=>this.getOverlay(t,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,a)=>{this.wt(t,e,a)}),st.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),st.resolve()}getOverlaysForCollection(t,e,r){const i=ts(),a=e.length+1,u=new _t(e.child("")),l=this.overlays.getIteratorFrom(u);for(;l.hasNext();){const f=l.getNext().value,d=f.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return st.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new be((d,g)=>d-g);const u=this.overlays.getIterator();for(;u.hasNext();){const d=u.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>r){let g=a.get(d.largestBatchId);g===null&&(g=ts(),a=a.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const l=ts(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,g)=>l.set(d,g)),!(l.size()>=i)););return st.resolve(l)}wt(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Mb(e,r));let a=this.kr.get(e);a===void 0&&(a=Ut(),this.kr.set(e,a)),this.kr.set(e,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(t){return st.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.qr=new rn(hn.Qr),this.$r=new rn(hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const r=new hn(t,e);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Wr(new hn(t,e))}Gr(t,e){t.forEach(r=>this.removeReference(r,e))}zr(t){const e=new _t(new ve([])),r=new hn(e,t),i=new hn(e,t+1),a=[];return this.$r.forEachInRange([r,i],u=>{this.Wr(u),a.push(u.key)}),a}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new _t(new ve([])),r=new hn(e,t),i=new hn(e,t+1);let a=Ut();return this.$r.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(t){const e=new hn(t,0),r=this.qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class hn{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return _t.comparator(t.key,e.key)||Mt(t.Hr,e.Hr)}static Ur(t,e){return Mt(t.Hr,e.Hr)||_t.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new rn(hn.Qr)}checkEmpty(t){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Nb(a,e,r,i);this.mutationQueue.push(u);for(const l of i)this.Yr=this.Yr.add(new hn(l.key,a)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return st.resolve(u)}lookupMutationBatch(t,e){return st.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.Xr(r),a=i<0?0:i;return st.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?_g:this.er-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new hn(e,0),i=new hn(e,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],u=>{const l=this.Zr(u.Hr);a.push(l)}),st.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new rn(Mt);return e.forEach(i=>{const a=new hn(i,0),u=new hn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],l=>{r=r.add(l.Hr)})}),st.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;_t.isDocumentKey(a)||(a=a.child(""));const u=new hn(new _t(a),0);let l=new rn(Mt);return this.Yr.forEachWhile(f=>{const d=f.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(f.Hr)),!0)},u),st.resolve(this.ei(l))}ei(t){const e=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){ee(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return st.forEach(e.mutations,i=>{const a=new hn(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,e){const r=new hn(e,0),i=this.Yr.firstAfterOrEqual(r);return st.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,st.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(t){this.ni=t,this.docs=function(){return new be(_t.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,u=this.ni(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return st.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(e))}getEntries(t,e){let r=ra();return e.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))}),st.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let a=ra();const u=e.path,l=new _t(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!u.isPrefixOf(d.path))break;d.path.length>u.length+1||XI(qI(g),r)<=0||(i.has(g.key)||Sd(e,g))&&(a=a.insert(g.key,g.mutableCopy()))}return st.resolve(a)}getAllFromCollectionGroup(t,e,r,i){St(9500)}ri(t,e){return st.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new y8(this)}getSize(t){return st.resolve(this.size)}}class y8 extends c8{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),st.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(t){this.persistence=t,this.ii=new vs(e=>Ag(e),wg),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.si=0,this.oi=new Og,this.targetCount=0,this._i=Bu.ar()}forEachTarget(t,e){return this.ii.forEach((r,i)=>e(i)),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.si&&(this.si=e),st.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new Bu(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,st.resolve()}updateTargetData(t,e){return this.hr(e),st.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.ii.forEach((u,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),st.waitFor(a).next(()=>i)}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,e){const r=this.ii.get(e)||null;return st.resolve(r)}addMatchingKeys(t,e,r){return this.oi.Kr(e,r),st.resolve()}removeMatchingKeys(t,e,r){this.oi.Gr(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach(u=>{a.push(i.markPotentiallyOrphaned(t,u))}),st.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),st.resolve()}getMatchingKeysForTargetId(t,e){const r=this.oi.Jr(e);return st.resolve(r)}containsKey(t,e){return st.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(t,e){this.ai={},this.overlays={},this.ui=new Ed(0),this.ci=!1,this.ci=!0,this.li=new g8,this.referenceDelegate=t(this),this.hi=new _8(this),this.indexManager=new r8,this.remoteDocumentCache=function(i){return new m8(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new e8(e),this.Ti=new d8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new p8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ai[t.toKey()];return r||(r=new v8(e,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,r){pt("MemoryPersistence","Starting transaction:",t);const i=new x8(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(t,e){return st.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,e)))}}class x8 extends YI{constructor(t){super(),this.currentSequenceNumber=t}}class Dg{constructor(t){this.persistence=t,this.Ai=new Og,this.Ri=null}static Vi(t){return new Dg(t)}get mi(){if(this.Ri)return this.Ri;throw St(60996)}addReference(t,e,r){return this.Ai.addReference(r,e),this.mi.delete(r.toString()),st.resolve()}removeReference(t,e,r){return this.Ai.removeReference(r,e),this.mi.add(r.toString()),st.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),st.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.mi,r=>{const i=_t.fromPath(r);return this.fi(t,i).next(a=>{a||e.removeEntry(i,bt.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(r=>{r?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return st.or([()=>st.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class cd{constructor(t,e){this.persistence=t,this.gi=new vs(r=>$I(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=l8(this,e)}static Vi(t,e){return new cd(t,e)}Ii(){}di(t){return st.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}yr(t){let e=0;return this.gr(t,r=>{e++}).next(()=>e)}gr(t,e){return st.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(a=>a?st.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(t,u=>this.Sr(t,u,e).next(l=>{l||(r++,a.removeEntry(u,bt.min()))})).next(()=>a.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),st.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),st.resolve()}removeReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),st.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),st.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=jh(t.data.value)),e}Sr(t,e,r){return st.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.gi.get(e);return st.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Is=r,this.ds=i}static Es(t,e){let r=Ut(),i=Ut();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ng(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return JT()?8:KI(Bn())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,r,i){const a={result:null};return this.ps(t,e).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ys(t,e,i,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new E8;return this.ws(t,e,u).next(l=>{if(a.result=l,this.Rs)return this.Ss(t,e,u,l.size)})}).next(()=>a.result)}Ss(t,e,r,i){return r.documentReadCount<this.Vs?(pu()<=Vt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",gu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),st.resolve()):(pu()<=Vt.DEBUG&&pt("QueryEngine","Query:",gu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(pu()<=Vt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",gu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hi(e))):st.resolve())}ps(t,e){if(w_(e))return st.resolve(null);let r=hi(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=sd(e,null,"F"),r=hi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(a=>{const u=Ut(...a);return this.gs.getDocuments(t,u).next(l=>this.indexManager.getMinOffset(t,r).next(f=>{const d=this.bs(e,l);return this.Ds(e,d,u,f.readTime)?this.ps(t,sd(e,null,"F")):this.vs(t,d,e,f)}))})))}ys(t,e,r,i){return w_(e)||i.isEqual(bt.min())?st.resolve(null):this.gs.getDocuments(t,r).next(a=>{const u=this.bs(e,a);return this.Ds(e,u,r,i)?st.resolve(null):(pu()<=Vt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gu(e)),this.vs(t,u,e,GI(i,Oc)).next(l=>l))})}bs(t,e){let r=new rn(gA(t));return e.forEach((i,a)=>{Sd(t,a)&&(r=r.add(a))}),r}Ds(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(t,e,r){return pu()<=Vt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",gu(e)),this.gs.getDocumentsMatchingQuery(t,e,no.min(),r)}vs(t,e,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(a=>(e.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",w8=3e8;class T8{constructor(t,e,r,i){this.persistence=t,this.Cs=e,this.serializer=i,this.Fs=new be(Mt),this.Ms=new vs(a=>Ag(a),wg),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new h8(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function S8(n,t,e,r){return new T8(n,t,e,r)}async function VA(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,e.Ns(t),e.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],l=[];let f=Ut();for(const d of i){u.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of a){l.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return e.localDocuments.getDocuments(r,f).next(d=>({Bs:d,removedBatchIds:u,addedBatchIds:l}))})})}function C8(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),a=e.Os.newChangeBuffer({trackRemovals:!0});return function(l,f,d,g){const m=d.batch,y=m.keys();let x=st.resolve();return y.forEach(A=>{x=x.next(()=>g.getEntry(f,A)).next(S=>{const I=d.docVersions.get(A);ee(I!==null,48541),S.version.compareTo(I)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),g.addEntry(S)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(f,m))}(e,r,t,a).next(()=>a.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Ut();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(f=f.add(l.batch.mutations[d].key));return f}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function UA(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function I8(n,t){const e=Rt(n),r=t.snapshotVersion;let i=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=e.Os.newChangeBuffer({trackRemovals:!0});i=e.Fs;const l=[];t.targetChanges.forEach((g,m)=>{const y=i.get(m);if(!y)return;l.push(e.hi.removeMatchingKeys(a,g.removedDocuments,m).next(()=>e.hi.addMatchingKeys(a,g.addedDocuments,m)));let x=y.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(m)!==null?x=x.withResumeToken(In.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,r)),i=i.insert(m,x),function(S,I,M){return S.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=w8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(y,x,g)&&l.push(e.hi.updateTargetData(a,x))});let f=ra(),d=Ut();if(t.documentUpdates.forEach(g=>{t.resolvedLimboDocuments.has(g)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(a,g))}),l.push(b8(a,u,t.documentUpdates).next(g=>{f=g.Ls,d=g.ks})),!r.isEqual(bt.min())){const g=e.hi.getLastRemoteSnapshotVersion(a).next(m=>e.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(g)}return st.waitFor(l).next(()=>u.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,f,d)).next(()=>f)}).then(a=>(e.Fs=i,a))}function b8(n,t,e){let r=Ut(),i=Ut();return e.forEach(a=>r=r.add(a)),t.getEntries(n,r).next(a=>{let u=ra();return e.forEach((l,f)=>{const d=a.get(l);f.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(bt.min())?(t.removeEntry(l,f.readTime),u=u.insert(l,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(f),u=u.insert(l,f)):pt(Mg,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",f.version)}),{Ls:u,ks:i}})}function R8(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=_g),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function O8(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.hi.getTargetData(r,t).next(a=>a?(i=a,st.resolve(i)):e.hi.allocateTargetId(r).next(u=>(i=new qa(t,u,"TargetPurposeListen",r.currentSequenceNumber),e.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(r.targetId,r),e.Ms.set(t,r.targetId)),r})}async function Bp(n,t,e){const r=Rt(n),i=r.Fs.get(t),a=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!qu(u))throw u;pt(Mg,`Failed to update sequence numbers for target ${t}: ${u}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function B_(n,t,e){const r=Rt(n);let i=bt.min(),a=Ut();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,d,g){const m=Rt(f),y=m.Ms.get(g);return y!==void 0?st.resolve(m.Fs.get(y)):m.hi.getTargetData(d,g)}(r,u,hi(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,l.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(u,t,e?i:bt.min(),e?a:Ut())).next(l=>(D8(r,vb(t),l),{documents:l,qs:a})))}function D8(n,t,e){let r=n.xs.get(t)||bt.min();e.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(t,r)}class k_{constructor(){this.activeTargetIds=Ab()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class N8{constructor(){this.Fo=new k_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,r){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new k_,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="ConnectivityMonitor";class U_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pt(V_,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){pt(V_,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;function kp(){return Oh===null?Oh=function(){return 268435456+Math.round(2147483648*Math.random())}():Oh++,"0x"+Oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",P8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L8{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===id?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,e,r,i,a){const u=kp(),l=this.Go(t,e.toUriEncodedString());pt(tp,`Sending RPC '${t}' ${u}:`,l,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,a);const{host:d}=new URL(l),g=Fu(d);return this.jo(t,l,f,r,g).then(m=>(pt(tp,`Received RPC '${t}' ${u}: `,m),m),m=>{throw eo(tp,`RPC '${t}' ${u} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(t,e,r,i,a,u){return this.Wo(t,e,r,i,a)}zo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,a)=>t[a]=i),r&&r.headers.forEach((i,a)=>t[a]=i)}Go(t,e){const r=P8[t];return`${this.$o}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class k8 extends L8{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,r,i,a){const u=kp();return new Promise((l,f)=>{const d=new zE;d.setWithCredentials(!0),d.listenOnce(HE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fh.NO_ERROR:const m=d.getResponseJson();pt(Dn,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(m)),l(m);break;case Fh.TIMEOUT:pt(Dn,`RPC '${t}' ${u} timed out`),f(new ht(it.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const y=d.getStatus();if(pt(Dn,`RPC '${t}' ${u} failed with status:`,y,"response text:",d.getResponseText()),y>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const A=x==null?void 0:x.error;if(A&&A.status&&A.message){const S=function(M){const O=M.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(O)>=0?O:it.UNKNOWN}(A.status);f(new ht(S,A.message))}else f(new ht(it.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new ht(it.UNAVAILABLE,"Connection failed."));break;default:St(9055,{c_:t,streamId:u,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{pt(Dn,`RPC '${t}' ${u} completed.`)}});const g=JSON.stringify(i);pt(Dn,`RPC '${t}' ${u} sending request:`,i),d.send(e,"POST",g,r,15)})}P_(t,e,r){const i=kp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=XE(),l=qE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,e,r),f.encodeInitMessageHeaders=!0;const g=a.join("");pt(Dn,`Creating RPC '${t}' stream ${i}: ${g}`,f);const m=u.createWebChannel(g,f);this.T_(m);let y=!1,x=!1;const A=new B8({Ho:I=>{x?pt(Dn,`Not sending because RPC '${t}' stream ${i} is closed:`,I):(y||(pt(Dn,`Opening RPC '${t}' stream ${i} transport.`),m.open(),y=!0),pt(Dn,`RPC '${t}' stream ${i} sending:`,I),m.send(I))},Yo:()=>m.close()}),S=(I,M,O)=>{I.listen(M,k=>{try{O(k)}catch(V){setTimeout(()=>{throw V},0)}})};return S(m,cc.EventType.OPEN,()=>{x||(pt(Dn,`RPC '${t}' stream ${i} transport opened.`),A.s_())}),S(m,cc.EventType.CLOSE,()=>{x||(x=!0,pt(Dn,`RPC '${t}' stream ${i} transport closed`),A.__(),this.I_(m))}),S(m,cc.EventType.ERROR,I=>{x||(x=!0,eo(Dn,`RPC '${t}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),A.__(new ht(it.UNAVAILABLE,"The operation could not be completed")))}),S(m,cc.EventType.MESSAGE,I=>{var M;if(!x){const O=I.data[0];ee(!!O,16349);const k=O,V=(k==null?void 0:k.error)||((M=k[0])===null||M===void 0?void 0:M.error);if(V){pt(Dn,`RPC '${t}' stream ${i} received error:`,V);const H=V.status;let q=function(P){const B=ze[P];if(B!==void 0)return CA(B)}(H),N=V.message;q===void 0&&(q=it.INTERNAL,N="Unknown error status: "+H+" with message "+V.message),x=!0,A.__(new ht(q,N)),m.close()}else pt(Dn,`RPC '${t}' stream ${i} received:`,O),A.a_(O)}}),S(l,GE.STAT_EVENT,I=>{I.stat===Sp.PROXY?pt(Dn,`RPC '${t}' stream ${i} detected buffering proxy`):I.stat===Sp.NOPROXY&&pt(Dn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n){return new jb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Fi=t,this.timerId=e,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,e-r);i>0&&pt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="PersistentStream";class jA{constructor(t,e,r,i,a,u,l,f){this.Fi=t,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new FA(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===it.RESOURCE_EXHAUSTED?(na(e.toString()),na("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===e&&this.W_(r,i)},r=>{t(()=>{const i=new ht(it.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,e){const r=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return pt(F_,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(pt(F_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V8 extends jA{constructor(t,e,r,i,a,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,u),this.serializer=a}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=Gb(this.serializer,t),r=function(a){if(!("targetChange"in a))return bt.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?di(u.readTime):bt.min()}(t);return this.listener.J_(e,r)}H_(t){const e={};e.database=Lp(this.serializer),e.addTarget=function(a,u){let l;const f=u.target;if(l=Op(f)?{documents:Wb(a,f)}:{query:Yb(a,f).Vt},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=RA(a,u.resumeToken);const d=Np(a,u.expectedCount);d!==null&&(l.expectedCount=d)}else if(u.snapshotVersion.compareTo(bt.min())>0){l.readTime=ld(a,u.snapshotVersion.toTimestamp());const d=Np(a,u.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,t);const r=Qb(this.serializer,t);r&&(e.labels=r),this.k_(e)}Y_(t){const e={};e.database=Lp(this.serializer),e.removeTarget=t,this.k_(e)}}class U8 extends jA{constructor(t,e,r,i,a,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return ee(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ee(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){ee(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=Xb(t.writeResults,t.commitTime),r=di(t.commitTime);return this.listener.ta(r,e)}na(){const t={};t.database=Lp(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>qb(this.serializer,r))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{}class j8 extends F8{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(t,Mp(e,r),i,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ht(it.UNKNOWN,a.toString())})}Jo(t,e,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Jo(t,Mp(e,r),i,u,l,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ht(it.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class z8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(na(e),this._a=!1):pt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class H8{constructor(t,e,r,i,a){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(u=>{r.enqueueAndForget(async()=>{ms(this)&&(pt(ds,"Restarting streams for network reachability change."),await async function(f){const d=Rt(f);d.Ia.add(4),await Yc(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Od(d)}(this))})}),this.Aa=new z8(r,i)}}async function Od(n){if(ms(n))for(const t of n.da)await t(!0)}async function Yc(n){for(const t of n.da)await t(!1)}function zA(n,t){const e=Rt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),kg(e)?Bg(e):Xu(e).x_()&&Lg(e,t))}function Pg(n,t){const e=Rt(n),r=Xu(e);e.Ta.delete(t),r.x_()&&HA(e,t),e.Ta.size===0&&(r.x_()?r.B_():ms(e)&&e.Aa.set("Unknown"))}function Lg(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xu(n).H_(t)}function HA(n,t){n.Ra.$e(t),Xu(n).Y_(t)}function Bg(n){n.Ra=new kb({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Xu(n).start(),n.Aa.aa()}function kg(n){return ms(n)&&!Xu(n).M_()&&n.Ta.size>0}function ms(n){return Rt(n).Ia.size===0}function GA(n){n.Ra=void 0}async function G8(n){n.Aa.set("Online")}async function q8(n){n.Ta.forEach((t,e)=>{Lg(n,t)})}async function X8(n,t){GA(n),kg(n)?(n.Aa.la(t),Bg(n)):n.Aa.set("Unknown")}async function W8(n,t,e){if(n.Aa.set("Online"),t instanceof bA&&t.state===2&&t.cause)try{await async function(i,a){const u=a.cause;for(const l of a.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,u),i.Ta.delete(l),i.Ra.removeTarget(l))}(n,t)}catch(r){pt(ds,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await fd(n,r)}else if(t instanceof Gh?n.Ra.Ye(t):t instanceof IA?n.Ra.it(t):n.Ra.et(t),!e.isEqual(bt.min()))try{const r=await UA(n.localStore);e.compareTo(r)>=0&&await function(a,u){const l=a.Ra.Pt(u);return l.targetChanges.forEach((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ta.get(d);g&&a.Ta.set(d,g.withResumeToken(f.resumeToken,u))}}),l.targetMismatches.forEach((f,d)=>{const g=a.Ta.get(f);if(!g)return;a.Ta.set(f,g.withResumeToken(In.EMPTY_BYTE_STRING,g.snapshotVersion)),HA(a,f);const m=new qa(g.target,f,d,g.sequenceNumber);Lg(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){pt(ds,"Failed to raise snapshot:",r),await fd(n,r)}}async function fd(n,t,e){if(!qu(t))throw t;n.Ia.add(1),await Yc(n),n.Aa.set("Offline"),e||(e=()=>UA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pt(ds,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Od(n)})}function qA(n,t){return t().catch(e=>fd(n,e,t))}async function Dd(n){const t=Rt(n),e=oo(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:_g;for(;Y8(t);)try{const i=await R8(t.localStore,r);if(i===null){t.Pa.length===0&&e.B_();break}r=i.batchId,K8(t,i)}catch(i){await fd(t,i)}XA(t)&&WA(t)}function Y8(n){return ms(n)&&n.Pa.length<10}function K8(n,t){n.Pa.push(t);const e=oo(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function XA(n){return ms(n)&&!oo(n).M_()&&n.Pa.length>0}function WA(n){oo(n).start()}async function Q8(n){oo(n).na()}async function $8(n){const t=oo(n);for(const e of n.Pa)t.X_(e.mutations)}async function Z8(n,t,e){const r=n.Pa.shift(),i=Ig.from(r,t,e);await qA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Dd(n)}async function J8(n,t){t&&oo(n).Z_&&await async function(r,i){if(function(u){return Lb(u)&&u!==it.ABORTED}(i.code)){const a=r.Pa.shift();oo(r).N_(),await qA(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Dd(r)}}(n,t),XA(n)&&WA(n)}async function j_(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),pt(ds,"RemoteStore received new credentials");const r=ms(e);e.Ia.add(3),await Yc(e),r&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Od(e)}async function t6(n,t){const e=Rt(n);t?(e.Ia.delete(2),await Od(e)):t||(e.Ia.add(2),await Yc(e),e.Aa.set("Unknown"))}function Xu(n){return n.Va||(n.Va=function(e,r,i){const a=Rt(e);return a.ia(),new V8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:G8.bind(null,n),e_:q8.bind(null,n),n_:X8.bind(null,n),J_:W8.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),kg(n)?Bg(n):n.Aa.set("Unknown")):(await n.Va.stop(),GA(n))})),n.Va}function oo(n){return n.ma||(n.ma=function(e,r,i){const a=Rt(e);return a.ia(),new U8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Q8.bind(null,n),n_:J8.bind(null,n),ea:$8.bind(null,n),ta:Z8.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await Dd(n)):(await n.ma.stop(),n.Pa.length>0&&(pt(ds,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,a){const u=Date.now()+r,l=new Vg(t,e,u,i,a);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(n,t){if(na("AsyncQueue",`${t}: ${n}`),qu(n))return new ht(it.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{static emptySet(t){return new bu(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||_t.comparator(e.key,r.key):(e,r)=>_t.comparator(e.key,r.key),this.keyedMap=fc(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof bu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new bu;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.fa=new be(_t.comparator)}track(t){const e=t.doc.key,r=this.fa.get(e);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(e,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(e):t.type===1&&r.type===2?this.fa=this.fa.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):St(63341,{At:t,ga:r}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,r)=>{t.push(r)}),t}}class ku{constructor(t,e,r,i,a,u,l,f,d){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(t,e,r,i,a){const u=[];return e.forEach(l=>{u.push({type:0,doc:l})}),new ku(t,e,bu.emptySet(e),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Td(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class n6{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,r){const i=Rt(e),a=i.queries;i.queries=H_(),a.forEach((u,l)=>{for(const f of l.wa)f.onError(r)})})(this,new ht(it.ABORTED,"Firestore shutting down"))}}function H_(){return new vs(n=>pA(n),Td)}async function YA(n,t){const e=Rt(n);let r=3;const i=t.query;let a=e.queries.get(i);a?!a.Sa()&&t.ba()&&(r=2):(a=new e6,r=t.ba()?0:1);try{switch(r){case 0:a.ya=await e.onListen(i,!0);break;case 1:a.ya=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(u){const l=Ug(u,`Initialization of query '${gu(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,a),a.wa.push(t),t.va(e.onlineState),a.ya&&t.Ca(a.ya)&&Fg(e)}async function KA(n,t){const e=Rt(n),r=t.query;let i=3;const a=e.queries.get(r);if(a){const u=a.wa.indexOf(t);u>=0&&(a.wa.splice(u,1),a.wa.length===0?i=t.ba()?0:1:!a.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function r6(n,t){const e=Rt(n);let r=!1;for(const i of t){const a=i.query,u=e.queries.get(a);if(u){for(const l of u.wa)l.Ca(i)&&(r=!0);u.ya=i}}r&&Fg(e)}function i6(n,t,e){const r=Rt(n),i=r.queries.get(t);if(i)for(const a of i.wa)a.onError(e);r.queries.delete(t)}function Fg(n){n.Da.forEach(t=>{t.next()})}var Vp,G_;(G_=Vp||(Vp={})).Fa="default",G_.Cache="cache";class QA{constructor(t,e,r){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new ku(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const r=e!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=ku.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t){this.key=t}}class ZA{constructor(t){this.key=t}}class a6{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ut(),this.mutatedKeys=Ut(),this.Xa=gA(t),this.eu=new bu(this.Xa)}get tu(){return this.Ha}nu(t,e){const r=e?e.ru:new z_,i=e?e.eu:this.eu;let a=e?e.mutatedKeys:this.mutatedKeys,u=i,l=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((g,m)=>{const y=i.get(g),x=Sd(this.query,m)?m:null,A=!!y&&this.mutatedKeys.has(y.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let I=!1;y&&x?y.data.isEqual(x.data)?A!==S&&(r.track({type:3,doc:x}),I=!0):this.iu(y,x)||(r.track({type:2,doc:x}),I=!0,(f&&this.Xa(x,f)>0||d&&this.Xa(x,d)<0)&&(l=!0)):!y&&x?(r.track({type:0,doc:x}),I=!0):y&&!x&&(r.track({type:1,doc:y}),I=!0,(f||d)&&(l=!0)),I&&(x?(u=u.add(x),a=S?a.add(g):a.delete(g)):(u=u.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:u,ru:r,Ds:l,mutatedKeys:a}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const a=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const u=t.ru.pa();u.sort((g,m)=>function(x,A){const S=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{At:I})}};return S(x)-S(A)}(g.type,m.type)||this.Xa(g.doc,m.doc)),this.su(r),i=i!=null&&i;const l=e&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,d=f!==this.Ya;return this.Ya=f,u.length!==0||d?{snapshot:new ku(this.query,t.eu,a,u,t.mutatedKeys,f===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new z_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Ut(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const e=[];return t.forEach(r=>{this.Za.has(r)||e.push(new ZA(r))}),this.Za.forEach(r=>{t.has(r)||e.push(new $A(r))}),e}uu(t){this.Ha=t.qs,this.Za=Ut();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return ku.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const jg="SyncEngine";class o6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class s6{constructor(t){this.key=t,this.lu=!1}}class u6{constructor(t,e,r,i,a,u){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new vs(l=>pA(l),Td),this.Tu=new Map,this.Iu=new Set,this.du=new be(_t.comparator),this.Eu=new Map,this.Au=new Og,this.Ru={},this.Vu=new Map,this.mu=Bu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function l6(n,t,e=!0){const r=iw(n);let i;const a=r.Pu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await JA(r,t,e,!0),i}async function c6(n,t){const e=iw(n);await JA(e,t,!0,!1)}async function JA(n,t,e,r){const i=await O8(n.localStore,hi(t)),a=i.targetId,u=n.sharedClientState.addLocalQueryTarget(a,e);let l;return r&&(l=await f6(n,t,a,u==="current",i.resumeToken)),n.isPrimaryClient&&e&&zA(n.remoteStore,i),l}async function f6(n,t,e,r,i){n.gu=(m,y,x)=>async function(S,I,M,O){let k=I.view.nu(M);k.Ds&&(k=await B_(S.localStore,I.query,!1).then(({documents:N})=>I.view.nu(N,k)));const V=O&&O.targetChanges.get(I.targetId),H=O&&O.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(k,S.isPrimaryClient,V,H);return X_(S,I.targetId,q._u),q.snapshot}(n,m,y,x);const a=await B_(n.localStore,t,!0),u=new a6(t,a.qs),l=u.nu(a.documents),f=Wc.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),d=u.applyChanges(l,n.isPrimaryClient,f);X_(n,e,d._u);const g=new o6(t,e,u);return n.Pu.set(t,g),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),d.snapshot}async function h6(n,t,e){const r=Rt(n),i=r.Pu.get(t),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(u=>!Td(u,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Pg(r.remoteStore,i.targetId),Up(r,i.targetId)}).catch(Gu)):(Up(r,i.targetId),await Bp(r.localStore,i.targetId,!0))}async function d6(n,t){const e=Rt(n),r=e.Pu.get(t),i=e.Tu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Pg(e.remoteStore,r.targetId))}async function p6(n,t,e){const r=E6(n);try{const i=await function(u,l){const f=Rt(u),d=Ae.now(),g=l.reduce((x,A)=>x.add(A.key),Ut());let m,y;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let A=ra(),S=Ut();return f.Os.getEntries(x,g).next(I=>{A=I,A.forEach((M,O)=>{O.isValidDocument()||(S=S.add(M))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,A)).next(I=>{m=I;const M=[];for(const O of l){const k=Ob(O,m.get(O.key).overlayedDocument);k!=null&&M.push(new fo(O.key,k,oA(k.value.mapValue),br.exists(!0)))}return f.mutationQueue.addMutationBatch(x,d,M,l)}).next(I=>{y=I;const M=I.applyToLocalDocumentSet(m,S);return f.documentOverlayCache.saveOverlays(x,I.batchId,M)})}).then(()=>({batchId:y.batchId,changes:mA(m)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,f){let d=u.Ru[u.currentUser.toKey()];d||(d=new be(Mt)),d=d.insert(l,f),u.Ru[u.currentUser.toKey()]=d}(r,i.batchId,e),await Kc(r,i.changes),await Dd(r.remoteStore)}catch(i){const a=Ug(i,"Failed to persist write");e.reject(a)}}async function tw(n,t){const e=Rt(n);try{const r=await I8(e.localStore,t);t.targetChanges.forEach((i,a)=>{const u=e.Eu.get(a);u&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.lu=!0:i.modifiedDocuments.size>0?ee(u.lu,14607):i.removedDocuments.size>0&&(ee(u.lu,42227),u.lu=!1))}),await Kc(e,r,t)}catch(r){await Gu(r)}}function q_(n,t,e){const r=Rt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Pu.forEach((a,u)=>{const l=u.view.va(t);l.snapshot&&i.push(l.snapshot)}),function(u,l){const f=Rt(u);f.onlineState=l;let d=!1;f.queries.forEach((g,m)=>{for(const y of m.wa)y.va(l)&&(d=!0)}),d&&Fg(f)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function g6(n,t,e){const r=Rt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Eu.get(t),a=i&&i.key;if(a){let u=new be(_t.comparator);u=u.insert(a,Ln.newNoDocument(a,bt.min()));const l=Ut().add(a),f=new bd(bt.min(),new Map,new be(Mt),u,l);await tw(r,f),r.du=r.du.remove(a),r.Eu.delete(t),zg(r)}else await Bp(r.localStore,t,!1).then(()=>Up(r,t,e)).catch(Gu)}async function v6(n,t){const e=Rt(n),r=t.batch.batchId;try{const i=await C8(e.localStore,t);nw(e,r,null),ew(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Kc(e,i)}catch(i){await Gu(i)}}async function m6(n,t,e){const r=Rt(n);try{const i=await function(u,l){const f=Rt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return f.mutationQueue.lookupMutationBatch(d,l).next(m=>(ee(m!==null,37113),g=m.keys(),f.mutationQueue.removeMutationBatch(d,m))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>f.localDocuments.getDocuments(d,g))})}(r.localStore,t);nw(r,t,e),ew(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Kc(r,i)}catch(i){await Gu(i)}}function ew(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function nw(n,t,e){const r=Rt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Up(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Tu.get(t))n.Pu.delete(r),e&&n.hu.pu(r,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(r=>{n.Au.containsKey(r)||rw(n,r)})}function rw(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Pg(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),zg(n))}function X_(n,t,e){for(const r of e)r instanceof $A?(n.Au.addReference(r.key,t),y6(n,r)):r instanceof ZA?(pt(jg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,t),n.Au.containsKey(r.key)||rw(n,r.key)):St(19791,{yu:r})}function y6(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Iu.has(r)||(pt(jg,"New document in limbo: "+e),n.Iu.add(r),zg(n))}function zg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new _t(ve.fromString(t)),r=n.mu.next();n.Eu.set(r,new s6(e)),n.du=n.du.insert(e,r),zA(n.remoteStore,new qa(hi(Tg(e.path)),r,"TargetPurposeLimboResolution",Ed.ue))}}async function Kc(n,t,e){const r=Rt(n),i=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach((l,f)=>{u.push(r.gu(f,t,e).then(d=>{var g;if((d||e)&&r.isPrimaryClient){const m=d?!d.fromCache:(g=e==null?void 0:e.targetChanges.get(f.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(f.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Ng.Es(f.targetId,d);a.push(m)}}))}),await Promise.all(u),r.hu.J_(i),await async function(f,d){const g=Rt(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>st.forEach(d,y=>st.forEach(y.Is,x=>g.persistence.referenceDelegate.addReference(m,y.targetId,x)).next(()=>st.forEach(y.ds,x=>g.persistence.referenceDelegate.removeReference(m,y.targetId,x)))))}catch(m){if(!qu(m))throw m;pt(Mg,"Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const x=g.Fs.get(y),A=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(A);g.Fs=g.Fs.insert(y,S)}}}(r.localStore,a))}async function _6(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){pt(jg,"User change. New user:",t.toKey());const r=await VA(e.localStore,t);e.currentUser=t,function(a,u){a.Vu.forEach(l=>{l.forEach(f=>{f.reject(new ht(it.CANCELLED,u))})}),a.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Kc(e,r.Bs)}}function x6(n,t){const e=Rt(n),r=e.Eu.get(t);if(r&&r.lu)return Ut().add(r.key);{let i=Ut();const a=e.Tu.get(t);if(!a)return i;for(const u of a){const l=e.Pu.get(u);i=i.unionWith(l.view.tu)}return i}}function iw(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=x6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=g6.bind(null,t),t.hu.J_=r6.bind(null,t.eventManager),t.hu.pu=i6.bind(null,t.eventManager),t}function E6(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=v6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=m6.bind(null,t),t}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return S8(this.persistence,new A8,t.initialUser,this.serializer)}Du(t){return new kA(Dg.Vi,this.serializer)}bu(t){return new N8}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class A6 extends hd{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){ee(this.persistence.referenceDelegate instanceof cd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new s8(r,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new kA(r=>cd.Vi(r,e),this.serializer)}}class Fp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,this.syncEngine),await t6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new n6}()}createDatastore(t){const e=Rd(t.databaseInfo.databaseId),r=function(a){return new k8(a)}(t.databaseInfo);return function(a,u,l,f){return new j8(a,u,l,f)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,a,u,l){return new H8(r,i,a,u,l)}(this.localStore,this.datastore,t.asyncQueue,e=>q_(this.syncEngine,e,0),function(){return U_.C()?new U_:new M8}())}createSyncEngine(t,e){return function(i,a,u,l,f,d,g){const m=new u6(i,a,u,l,f,d);return g&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const a=Rt(i);pt(ds,"RemoteStore shutting down."),a.Ia.add(5),await Yc(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):na("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class w6{constructor(t,e,r,i,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Pn.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{pt(so,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(pt(so,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Ug(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function np(n,t){n.asyncQueue.verifyOperationInProgress(),pt(so,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VA(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{eo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{pt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{eo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=t}async function W_(n,t){n.asyncQueue.verifyOperationInProgress();const e=await T6(n);pt(so,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>j_(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>j_(t.remoteStore,i)),n._onlineComponents=t}async function T6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt(so,"Using user provided OfflineComponentProvider");try{await np(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===it.FAILED_PRECONDITION||i.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;eo("Error using user provided cache. Falling back to memory cache: "+e),await np(n,new hd)}}else pt(so,"Using default OfflineComponentProvider"),await np(n,new A6(void 0));return n._offlineComponents}async function ow(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt(so,"Using user provided OnlineComponentProvider"),await W_(n,n._uninitializedComponentsProvider._online)):(pt(so,"Using default OnlineComponentProvider"),await W_(n,new Fp))),n._onlineComponents}function S6(n){return ow(n).then(t=>t.syncEngine)}async function sw(n){const t=await ow(n),e=t.eventManager;return e.onListen=l6.bind(null,t.syncEngine),e.onUnlisten=h6.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=c6.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=d6.bind(null,t.syncEngine),e}function C6(n,t,e={}){const r=new Zi;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,l,f,d){const g=new aw({next:y=>{g.Ou(),u.enqueueAndForget(()=>KA(a,m));const x=y.docs.has(l);!x&&y.fromCache?d.reject(new ht(it.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&f&&f.source==="server"?d.reject(new ht(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new QA(Tg(l.path),g,{includeMetadataChanges:!0,ka:!0});return YA(a,m)}(await sw(n),n.asyncQueue,t,e,r)),r.promise}function I6(n,t,e={}){const r=new Zi;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,l,f,d){const g=new aw({next:y=>{g.Ou(),u.enqueueAndForget(()=>KA(a,m)),y.fromCache&&f.source==="server"?d.reject(new ht(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new QA(l,g,{includeMetadataChanges:!0,ka:!0});return YA(a,m)}(await sw(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="firestore.googleapis.com",K_=!0;class Q_{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lw,this.ssl=K_}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:K_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=BA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<a8)throw new ht(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uw((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qc{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MI;switch(r.type){case"firstParty":return new kI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Y_.get(e);r&&(pt("ComponentProvider","Removing Datastore"),Y_.delete(e),r.terminate())}(this),Promise.resolve()}}function b6(n,t,e,r={}){var i;n=Or(n,Qc);const a=Fu(t),u=n._getSettings(),l=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${t}:${e}`;a&&(Jx(`https://${f}`),tE("Firestore",!0)),u.host!==lw&&u.host!==f&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!us(d,l)&&(n._setSettings(d),r.mockUserToken)){let g,m;if(typeof r.mockUserToken=="string")g=r.mockUserToken,m=Pn.MOCK_USER;else{g=GT(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ht(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Pn(y)}n._authCredentials=new PI(new YE(g,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new oa(this.firestore,t,this._query)}}class Be{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Be(this.firestore,t,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(qc(e,Be._jsonSchema))return new Be(t,r||null,new _t(ve.fromString(e.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ge("string",Be._jsonSchemaVersion),referencePath:Ge("string")};class $a extends oa{constructor(t,e,r){super(t,e,Tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Be(this.firestore,null,new _t(t))}withConverter(t){return new $a(this.firestore,t,this._path)}}function Ji(n,t,...e){if(n=Cn(n),yg("collection","path",t),n instanceof Qc){const r=ve.fromString(t,...e);return l_(r),new $a(n,null,r)}{if(!(n instanceof Be||n instanceof $a))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ve.fromString(t,...e));return l_(r),new $a(n.firestore,null,r)}}function cw(n,t){if(n=Or(n,Qc),yg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ht(it.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oa(n,null,function(r){return new gs(ve.emptyPath(),r)}(t))}function ia(n,t,...e){if(n=Cn(n),arguments.length===1&&(t=mg.newId()),yg("doc","path",t),n instanceof Qc){const r=ve.fromString(t,...e);return u_(r),new Be(n,null,new _t(r))}{if(!(n instanceof Be||n instanceof $a))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ve.fromString(t,...e));return u_(r),new Be(n.firestore,n instanceof $a?n.converter:null,new _t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="AsyncQueue";class Z_{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new FA(this,"async_queue_retry"),this.oc=()=>{const r=ep();r&&pt($_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const e=ep();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=ep();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new Zi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!qu(t))throw t;pt($_,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,na("INTERNAL UNHANDLED ERROR: ",J_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=e,e}enqueueAfterDelay(t,e,r){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const i=Vg.createAndSchedule(this,t,e,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&St(47125,{hc:J_(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function J_(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class ys extends Qc{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new Z_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Z_(t),this._firestoreClient=void 0,await t}}}function R6(n,t){const e=typeof n=="object"?n:iE(),r=typeof n=="string"?n:id,i=og(e,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=zT("firestore");a&&b6(i,...a)}return i}function Hg(n){if(n._terminated)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||O6(n),n._firestoreClient}function O6(n){var t,e,r;const i=n._freezeSettings(),a=function(l,f,d,g){return new tb(l,f,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uw(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new w6(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(l){const f=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cr(In.fromBase64String(t))}catch(e){throw new ht(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Cr(In.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qc(t,Cr._jsonSchema))return Cr.fromBase64String(t.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:Ge("string",Cr._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mt(this._lat,t._lat)||Mt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(t){if(qc(t,pi._jsonSchema))return new pi(t.latitude,t.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Ge("string",pi._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qc(t,gi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new gi(t.vectorValues);throw new ht(it.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:Ge("string",gi._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=/^__.*__$/;class N6{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new fo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xc(t,this.data,e,this.fieldTransforms)}}class fw{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new fo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function hw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ec:n})}}class Gg{constructor(t,e,r,i,a,u){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Gg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return dd(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(hw(this.Ec)&&D6.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class M6{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Rd(t)}Dc(t,e,r,i=!1){return new Gg({Ec:t,methodName:e,bc:r,path:Tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(n){const t=n._freezeSettings(),e=Rd(n._databaseId);return new M6(n._databaseId,!!t.ignoreUndefinedProperties,e)}function dw(n,t,e,r,i,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,t,e,i);Xg("Data must be an object, but it was:",u,r);const l=pw(r,u);let f,d;if(a.merge)f=new lr(u.fieldMask),d=u.fieldTransforms;else if(a.mergeFields){const g=[];for(const m of a.mergeFields){const y=jp(t,m,e);if(!u.contains(y))throw new ht(it.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);vw(g,y)||g.push(y)}f=new lr(g),d=u.fieldTransforms.filter(m=>f.covers(m.field))}else f=null,d=u.fieldTransforms;return new N6(new Qn(l),f,d)}class Ld extends Md{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ld}}class qg extends Md{_toFieldTransform(t){return new Cb(t.path,new Lc)}isEqual(t){return t instanceof qg}}function P6(n,t,e,r){const i=n.Dc(1,t,e);Xg("Data must be an object, but it was:",i,r);const a=[],u=Qn.empty();co(r,(f,d)=>{const g=Wg(t,f,e);d=Cn(d);const m=i.gc(g);if(d instanceof Ld)a.push(g);else{const y=$c(d,m);y!=null&&(a.push(g),u.set(g,y))}});const l=new lr(a);return new fw(u,l,i.fieldTransforms)}function L6(n,t,e,r,i,a){const u=n.Dc(1,t,e),l=[jp(t,r,e)],f=[i];if(a.length%2!=0)throw new ht(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)l.push(jp(t,a[y])),f.push(a[y+1]);const d=[],g=Qn.empty();for(let y=l.length-1;y>=0;--y)if(!vw(d,l[y])){const x=l[y];let A=f[y];A=Cn(A);const S=u.gc(x);if(A instanceof Ld)d.push(x);else{const I=$c(A,S);I!=null&&(d.push(x),g.set(x,I))}}const m=new lr(d);return new fw(g,m,u.fieldTransforms)}function B6(n,t,e,r=!1){return $c(e,n.Dc(r?4:3,t))}function $c(n,t){if(gw(n=Cn(n)))return Xg("Unsupported field value:",t,n),pw(n,t);if(n instanceof Md)return function(r,i){if(!hw(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const a=[];let u=0;for(const l of r){let f=$c(l,i.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,t)}return function(r,i){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ae.fromDate(r);return{timestampValue:ld(i.serializer,a)}}if(r instanceof Ae){const a=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ld(i.serializer,a)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:RA(i.serializer,r._byteString)};if(r instanceof Be){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return function(u,l){return{mapValue:{fields:{[iA]:{stringValue:aA},[ad]:{arrayValue:{values:u.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Sg(l.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${xd(r)}`)}(n,t)}function pw(n,t){const e={};return ZE(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):co(n,(r,i)=>{const a=$c(i,t.Vc(r));a!=null&&(e[r]=a)}),{mapValue:{fields:e}}}function gw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ae||n instanceof pi||n instanceof Cr||n instanceof Be||n instanceof Md||n instanceof gi)}function Xg(n,t,e){if(!gw(e)||!QE(e)){const r=xd(e);throw r==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+r)}}function jp(n,t,e){if((t=Cn(t))instanceof Nd)return t._internalPath;if(typeof t=="string")return Wg(n,t);throw dd("Field path arguments must be of type string or ",n,!1,void 0,e)}const k6=new RegExp("[~\\*/\\[\\]]");function Wg(n,t,e){if(t.search(k6)>=0)throw dd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Nd(...t.split("."))._internalPath}catch{throw dd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function dd(n,t,e,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new ht(it.INVALID_ARGUMENT,l+n+f)}function vw(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new V6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Bd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class V6 extends mw{data(){return super.data()}}function Bd(n,t){return typeof t=="string"?Wg(n,t):t instanceof Nd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yg{}class Kg extends Yg{}function Qi(n,t,...e){let r=[];t instanceof Yg&&r.push(t),r=r.concat(e),function(a){const u=a.filter(f=>f instanceof Qg).length,l=a.filter(f=>f instanceof kd).length;if(u>1||u>0&&l>0)throw new ht(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class kd extends Kg{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new kd(t,e,r)}_apply(t){const e=this._parse(t);return yw(t._query,e),new oa(t.firestore,t.converter,Dp(t._query,e))}_parse(t){const e=Pd(t.firestore);return function(a,u,l,f,d,g,m){let y;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ht(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){ex(m,g);const A=[];for(const S of m)A.push(tx(f,a,S));y={arrayValue:{values:A}}}else y=tx(f,a,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||ex(m,g),y=B6(l,u,m,g==="in"||g==="not-in");return He.create(d,g,y)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Tr(n,t,e){const r=t,i=Bd("where",n);return kd._create(i,r,e)}class Qg extends Yg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Qg(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:Gr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(i,a){let u=i;const l=a.getFlattenedFilters();for(const f of l)yw(u,f),u=Dp(u,f)}(t._query,e),new oa(t.firestore,t.converter,Dp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends Kg{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new $g(t,e)}_apply(t){const e=function(i,a,u){if(i.startAt!==null)throw new ht(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ht(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(a,u)}(t._query,this._field,this._direction);return new oa(t.firestore,t.converter,function(i,a){const u=i.explicitOrderBy.concat([a]);return new gs(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}function Ru(n,t="asc"){const e=t,r=Bd("orderBy",n);return $g._create(r,e)}class Zg extends Kg{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Zg(t,e,r)}_apply(t){return new oa(t.firestore,t.converter,sd(t._query,this._limit,this._limitType))}}function rp(n){return HI("limit",n),Zg._create("limit",n,"F")}function tx(n,t,e){if(typeof(e=Cn(e))=="string"){if(e==="")throw new ht(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(t)&&e.indexOf("/")!==-1)throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(ve.fromString(e));if(!_t.isDocumentKey(r))throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return m_(n,new _t(r))}if(e instanceof Be)return m_(n,e._key);throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(e)}.`)}function ex(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yw(n,t){const e=function(i,a){for(const u of i)for(const l of u.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class F6{convertValue(t,e="none"){switch(ao(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Le(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(io(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return co(t,(i,a)=>{r[i]=this.convertValue(a,e)}),r}convertVectorValue(t){var e,r,i;const a=(i=(r=(e=t.fields)===null||e===void 0?void 0:e[ad].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(u=>Le(u.doubleValue));return new gi(a)}convertGeoPoint(t){return new pi(Le(t.latitude),Le(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=wd(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Dc(t));default:return null}}convertTimestamp(t){const e=ro(t);return new Ae(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=ve.fromString(t);ee(LA(r),9688,{name:t});const i=new Nc(r.get(1),r.get(3)),a=new _t(r.popFirst(5));return i.isEqual(e)||na(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class dc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ns extends mw{constructor(t,e,r,i,a,u){super(t,e,r,i,u),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Bd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ns._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",ns._jsonSchema={type:Ge("string",ns._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class qh extends ns{data(t={}){return super.data(t)}}class Ou{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new dc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new qh(this._firestore,this._userDataWriter,r.key,r,new dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(l=>{const f=new qh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const f=new qh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return l.type!==0&&(d=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),l.type!==1&&(u=u.add(l.doc),g=u.indexOf(l.doc.key)),{type:j6(l.type),doc:f,oldIndex:d,newIndex:g}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ou._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=mg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function j6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(n){n=Or(n,Be);const t=Or(n.firestore,ys);return C6(Hg(t),n._key).then(e=>G6(t,n,e))}Ou._jsonSchemaVersion="firestore/querySnapshot/1.0",Ou._jsonSchema={type:Ge("string",Ou._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class xw extends F6{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Be(this.firestore,null,e)}}function Za(n){n=Or(n,oa);const t=Or(n.firestore,ys),e=Hg(t),r=new xw(t);return U6(n._query),I6(e,n._query).then(i=>new Ou(t,r,n,i))}function nx(n,t,e){n=Or(n,Be);const r=Or(n.firestore,ys),i=_w(n.converter,t);return Ud(r,[dw(Pd(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,br.none())])}function Vd(n,t,e,...r){n=Or(n,Be);const i=Or(n.firestore,ys),a=Pd(i);let u;return u=typeof(t=Cn(t))=="string"||t instanceof Nd?L6(a,"updateDoc",n._key,t,e,r):P6(a,"updateDoc",n._key,t),Ud(i,[u.toMutation(n._key,br.exists(!0))])}function H6(n){return Ud(Or(n.firestore,ys),[new Cg(n._key,br.none())])}function Ew(n,t){const e=Or(n.firestore,ys),r=ia(n),i=_w(n.converter,t);return Ud(e,[dw(Pd(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}function Ud(n,t){return function(r,i){const a=new Zi;return r.asyncQueue.enqueueAndForget(async()=>p6(await S6(r),i,a)),a.promise}(Hg(n),t)}function G6(n,t,e){const r=e.docs.get(t._key),i=new xw(n);return new ns(n,i,t._key,r,new dc(e.hasPendingWrites,e.fromCache),t.converter)}function vi(){return new qg("serverTimestamp")}(function(t,e=!0){(function(i){Hu=i})(ju),Nu(new ls("firestore",(r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),l=new ys(new LI(r.getProvider("auth-internal")),new VI(u,r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ht(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(d.options.projectId,g)}(u,i),u);return a=Object.assign({useFetchStreams:e},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Ka(r_,i_,t),Ka(r_,i_,"esm2017")})();const q6={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},Aw=rE(q6),Jg=RI(Aw),en=R6(Aw),ww=J.createContext();function X6({children:n}){const[t,e]=J.useState(null),[r,i]=J.useState(!0);return J.useEffect(()=>{const a=y4(Jg,u=>{e(u),i(!1)});return()=>a()},[]),w.jsx(ww.Provider,{value:{user:t,loading:r},children:n})}function Zn(){return J.useContext(ww)}function W6(){const[n,t]=J.useState(""),[e,r]=J.useState(""),[i,a]=J.useState(""),u=Vc(),l=async f=>{f.preventDefault(),a("");try{await g4(Jg,n,e),u("/")}catch(d){a(d.message)}};return w.jsxs(dt,{component:"form",onSubmit:l,sx:{maxWidth:400,mx:"auto",mt:8},children:[w.jsx(lt,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),w.jsx(ue,{label:"メールアドレス",value:n,onChange:f=>t(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),w.jsx(ue,{label:"パスワード",type:"password",value:e,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&w.jsx(lt,{color:"error",children:i}),w.jsx(ye,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",children:"ログイン"})]})}function Y6(){const[n,t]=J.useState(""),[e,r]=J.useState(""),[i,a]=J.useState(""),u=async l=>{l.preventDefault(),a("");try{await p4(Jg,n,e)}catch(f){a(f.message)}};return w.jsxs(dt,{component:"form",onSubmit:u,sx:{maxWidth:400,mx:"auto",mt:8},children:[w.jsx(lt,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),w.jsx(ue,{label:"メールアドレス",value:n,onChange:l=>t(l.target.value),fullWidth:!0,margin:"normal",required:!0}),w.jsx(ue,{label:"パスワード",type:"password",value:e,onChange:l=>r(l.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&w.jsx(lt,{color:"error",children:i}),w.jsx(ye,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},children:"新規登録"})]})}function Tw({book:n,onClick:t,testId:e}){const r=i=>{switch(i){case"reading":return"読書中";case"finished":return"読了";default:return"読書中"}};return w.jsx(Tc,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:t,"data-testid":e||`book-card-${n.id}`,children:w.jsx(Sc,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:w.jsxs(dt,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&w.jsx(lT,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),w.jsxs(dt,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[w.jsx(lt,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||"タイトル未設定"}),w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||"著者未設定"}),(n.publisher||n.publishedDate)&&w.jsxs(lt,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&"•"," ",n.publishedDate]}),w.jsx(dt,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((i,a)=>w.jsx(mi,{label:i,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},a)):w.jsx(lt,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),w.jsxs(lt,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",r(n.status)]})]})]})})})}const Dr=ng.createContext({setGlobalError:()=>{}}),K6=({open:n,message:t,onClose:e})=>w.jsxs(is,{open:n,onClose:e,maxWidth:"xs",fullWidth:!0,children:[w.jsx(as,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),w.jsx(os,{children:w.jsx(Cc,{severity:"error",sx:{mb:2},children:t})}),w.jsx(ss,{sx:{justifyContent:"center",pb:2},children:w.jsx(ye,{onClick:e,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]});function ic(n){return n?(e=>e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(n).toLowerCase():""}const Q6=()=>{const{user:n}=Zn(),t=J.useContext(Dr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=J.useState([]),[a,u]=J.useState(!0),[l,f]=J.useState(null),[d,g]=J.useState("reading"),[m,y]=J.useState(""),x=J.useCallback(async()=>{if(!n){i([]),u(!1);return}try{u(!0),f(null),console.log("=== useBookList fetchBooks START ===");const V=Qi(Ji(en,"books"),Tr("userId","==",n.uid),Ru("updatedAt","desc"));console.log("=== useBookList getDocs START ===");const H=await Za(V);console.log("=== useBookList getDocs END ===");const q=H.docs.map(N=>({id:N.id,...N.data()}));console.log("=== useBookList setAllBooks START ==="),i(q),console.log("=== useBookList setAllBooks END ===")}catch(V){console.error("Error fetching books:",V),e("書籍一覧の取得に失敗しました。"),f("書籍一覧の取得に失敗しました。")}finally{console.log("=== useBookList setLoading false ==="),u(!1)}},[n,e]),A=J.useCallback((V,H)=>{g(H)},[]),S=J.useCallback(V=>{y(V.target.value)},[]),I=J.useCallback(()=>{y("")},[]),M=J.useCallback(()=>{g("reading")},[]),O=r.filter(V=>{if(d!=="all"&&(V.status||"reading")!==d)return!1;if(!m.trim())return!0;const H=ic(m);return V.title&&ic(V.title).includes(H)||V.author&&ic(V.author).includes(H)||Array.isArray(V.tags)&&V.tags.some(q=>ic(q).includes(H))}),k={total:r.length,reading:r.filter(V=>(V.status||"reading")==="reading").length,finished:r.filter(V=>V.status==="finished").length,filtered:O.length};return J.useEffect(()=>{x()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:O,stats:k,loading:a,error:l,filter:d,searchText:m,fetchBooks:x,handleFilterChange:A,handleSearchChange:S,clearSearch:I,clearFilter:M,normalizeTag:ic}};function $6(){const n=Vc(),{filteredBooks:t,loading:e,filter:r,searchText:i,handleFilterChange:a,handleSearchChange:u}=Q6(),l=f=>{n(`/book/${f}`)};return e?w.jsx("div",{children:"Loading..."}):w.jsxs(dt,{sx:{maxWidth:1200,mx:"auto",mt:{xs:1,sm:2,md:4},pb:{xs:"72px",sm:"80px"},px:{xs:1.5,sm:2,md:0}},children:[w.jsxs(dt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"},gap:{xs:1.5,sm:0}},children:[w.jsx(lt,{variant:"h4",gutterBottom:!0,"data-testid":"book-list-title",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem",md:"2rem"},fontWeight:600,mb:0},children:"本一覧"}),w.jsx(ye,{variant:"contained","data-testid":"book-add-button",onClick:()=>n("/add"),sx:{width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1,sm:1.5}},children:"本を追加"})]}),w.jsx(ue,{label:"検索（タイトル・著者・タグ）",value:i,onChange:u,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),w.jsx(dt,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2}},children:w.jsxs(rg,{value:r,onChange:a,centered:!0,sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"}}},children:[w.jsx(Xa,{label:"すべて",value:"all"}),w.jsx(Xa,{label:"読書中",value:"reading"}),w.jsx(Xa,{label:"読了",value:"finished"})]})}),t.length===0?w.jsx(dt,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:w.jsx(lt,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):w.jsx(Ie,{container:!0,spacing:{xs:1.5,sm:2},"data-testid":"book-list-grid",children:t.map(f=>w.jsx(Ie,{item:!0,xs:12,sm:6,md:4,lg:3,"data-testid":`book-grid-item-${f.id}`,children:w.jsx(Tw,{book:f,onClick:()=>l(f.id),testId:`book-list-card-${f.id}`})},f.id))})]})}const Zc=(n,t)=>{const[e,r]=J.useState([]),[i,a]=J.useState(!1),u=J.useCallback(async()=>{if(t!=null&&t.uid)try{a(!0);const d=n==="book"?"bookTagHistory":"memoTagHistory",g=Qi(Ji(en,"users",t.uid,d),Ru("updatedAt","desc")),m=await Za(g),y=[];m.forEach(x=>{const A=x.data();A.tag&&y.push(A.tag)}),r(y)}catch(d){throw console.error("タグ履歴の取得に失敗しました:",d),d}finally{a(!1)}},[t==null?void 0:t.uid,n]),l=J.useCallback(async d=>{if(!(!(t!=null&&t.uid)||!d))try{const g=n==="book"?"bookTagHistory":"memoTagHistory",m=ia(en,"users",t.uid,g,d);await nx(m,{tag:d,updatedAt:vi()})}catch(g){throw console.error("タグ履歴の保存に失敗しました:",g),g}},[t==null?void 0:t.uid,n]),f=J.useCallback(async d=>{if(!(!(t!=null&&t.uid)||!d||d.length===0))try{const g=d.map(m=>{const y=n==="book"?"bookTagHistory":"memoTagHistory",x=ia(en,"users",t.uid,y,m);return nx(x,{tag:m,updatedAt:vi()})});await Promise.all(g)}catch(g){throw console.error("タグ履歴の一括保存に失敗しました:",g),g}},[t==null?void 0:t.uid,n]);return{tagOptions:e,loading:i,fetchTagHistory:u,saveTagToHistory:l,saveTagsToHistory:f}},Z6=()=>{const{user:n}=Zn(),t=J.useContext(Dr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=J.useState(!1),[a,u]=J.useState(null),{saveTagsToHistory:l}=Zc("book",n),f=J.useCallback(async g=>{if(!n)throw new Error("ユーザーが認証されていません。");if(!g.title)throw new Error("タイトルは必須です。");try{i(!0),u(null);let m=(g.tags||[]).filter(x=>x&&x.trim()!=="");g.inputTagValue&&!m.includes(g.inputTagValue.trim())&&(m=[...m,g.inputTagValue.trim()]),m=m.filter(x=>x&&x.trim()!=="");const y=await Ew(Ji(en,"books"),{userId:n.uid,isbn:g.isbn||"",title:g.title,author:g.author||"",publisher:g.publisher||"",publishedDate:g.publishedDate||"",coverImageUrl:g.coverImageUrl||"",tags:m,status:"reading",createdAt:vi(),updatedAt:vi()});return m.length>0&&await l(m),y.id}catch(m){console.error("Error adding book:",m);const y="書籍の追加に失敗しました: "+m.message;throw e(y),u(y),m}finally{i(!1)}},[n,e,l]),d=J.useCallback(()=>{u(null)},[]);return{addBook:f,loading:r,error:a,clearError:d}},J6=()=>{const{user:n}=Zn(),t=J.useContext(Dr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=J.useState(!1),[a,u]=J.useState(""),[l,f]=J.useState(!1),d=J.useCallback(async y=>{if(!y||!y.trim())return u("ISBNを入力してください"),null;u(""),i(!0),f(!0);try{const x=y.trim(),S=(await E2.get(`https://api.openbd.jp/v1/get?isbn=${x}`)).data[0];let I="",M="",O="",k="",V="",H=[];if(S&&S.summary&&(I=S.summary.title||"",M=S.summary.author||"",O=S.summary.publisher||"",k=S.summary.pubdate||"",V=S.summary.cover||"",S.summary.subject&&H.push(S.summary.subject),S.summary.ndc&&H.push(S.summary.ndc)),!V||!I)try{const N=(await E2.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${x}`)).data;if(N.items&&N.items.length>0){const b=N.items[0].volumeInfo;I||(I=b.title||""),M||(M=b.authors?b.authors.join(", "):""),O||(O=b.publisher||""),k||(k=b.publishedDate||""),!V&&b.imageLinks&&(V=b.imageLinks.thumbnail||b.imageLinks.smallThumbnail||""),b.categories&&b.categories.length>0&&(H=[...H,...b.categories])}}catch(q){console.error("Failed to fetch from Google Books API",q)}return I?{isbn:x,title:I,author:M,publisher:O,publishedDate:k,coverImageUrl:V,tags:Array.from(new Set(H))}:(e("書籍情報が見つかりませんでした"),null)}catch{const A="書籍情報の取得に失敗しました";return e(A),u(A),null}finally{i(!1)}},[e]),g=J.useCallback(()=>{u(null)},[]),m=J.useCallback(()=>{f(!1),u(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:l,clearError:g,clearSearch:m}};function tR({isbn:n="",onBookAdded:t}){const[e,r]=J.useState(n),[i,a]=J.useState(""),[u,l]=J.useState(""),[f,d]=J.useState(""),[g,m]=J.useState(""),[y,x]=J.useState(""),[A,S]=J.useState([]),[I,M]=J.useState(""),{tagOptions:O,fetchTagHistory:k}=Zc("book"),{addBook:V,loading:H,error:q}=Z6(),{searchBookByIsbn:N,loading:b,error:P}=J6();J.useEffect(()=>{k()},[k]),J.useEffect(()=>{n&&n!==e&&(console.log("[BookForm] useEffect: propsのisbnが変化:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",n),B(n)))},[n,e]);const B=async z=>{const U=z!==void 0?z:e;if(!U||!U.trim())return;const Ot=await N(U);Ot&&(a(Ot.title),l(Ot.author),d(Ot.publisher),m(Ot.publishedDate),x(Ot.coverImageUrl),S(Ot.tags))},F=async z=>{if(z.preventDefault(),!i)return;const Ot=await V({isbn:e,title:i,author:u,publisher:f,publishedDate:g,coverImageUrl:y,tags:A,inputTagValue:I});Ot&&t(Ot)};return w.jsxs(dt,{component:"form",onSubmit:F,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[w.jsxs(Ie,{container:!0,spacing:{xs:1,sm:1.5},children:[w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ue,{label:"ISBN",value:e,onChange:z=>r(z.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ye,{onClick:()=>B(),variant:"outlined",disabled:b,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:b?"取得中...":"ISBNで書籍情報取得"})})]}),y&&w.jsx(dt,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:w.jsx("img",{src:y,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),w.jsxs(Ie,{container:!0,spacing:{xs:1,sm:1.5},sx:{mt:{xs:.5,sm:1}},children:[w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ue,{label:"タイトル",value:i,onChange:z=>a(z.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ue,{label:"著者",value:u,onChange:z=>l(z.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ue,{label:"出版社",value:f,onChange:z=>d(z.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),w.jsx(Ie,{item:!0,xs:12,sm:6,children:w.jsx(ue,{label:"出版日",value:g,onChange:z=>m(z.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),w.jsx(dt,{sx:{mt:{xs:1.5,sm:2}},children:w.jsx(Du,{multiple:!0,freeSolo:!0,options:O,value:A,getOptionLabel:z=>typeof z=="string"?z:z.inputValue||z.tag||"",onChange:(z,U)=>{const Ot=(U||[]).map(Ft=>{if(typeof Ft=="string")return Ft;if(Ft&&typeof Ft=="object"){if("inputValue"in Ft&&Ft.inputValue)return Ft.inputValue;if("tag"in Ft&&Ft.tag)return Ft.tag}return""}).filter(Boolean);S(Ot)},inputValue:I,onInputChange:(z,U)=>M(U),renderInput:z=>w.jsx(ue,{...z,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...z.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),(P||q)&&w.jsx(lt,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:P||q}),w.jsx(ye,{type:"submit",variant:"contained",disabled:H,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:H?"追加中...":"本を追加"})]})}function eR(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function nR(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var rR=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iR=function(n){rR(t,n);function t(e,r){var i=this.constructor,a=n.call(this,e,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),eR(a,i.prototype),nR(a),a}return t}(Error),aR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jn=function(n){aR(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(iR),oR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ur=function(n){oR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(Jn),sR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(n){sR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(Jn),uR=function(){function n(t){if(this.binarizer=t,t===null)throw new Et("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var a=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),lR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dn=function(n){lR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Jn),cR=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),_e=function(){function n(){}return n.arraycopy=function(t,e,r,i,a){for(;a--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),fR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tv=function(n){fR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(Jn),hR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rx=function(n){hR(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(tv),dR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var a=e;a<r;a++)t[a]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new Et("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new rx(e);if(r>t)throw new rx(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var a=dR(t),u=a.next();!u.done;u=a.next()){var l=u.value;i=31*i+l}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,a=new Int32Array(i);return _e.arraycopy(t,e,a,0,i),a},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=t.length-1;i<=a;){var u=a+i>>1,l=r(e,t[u]);if(l>0)i=u+1;else if(l<0)a=u-1;else return u}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),Lt=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),pn=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);_e.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=r[i];a&=~((1<<(t&31))-1);for(var u=r.length;a===0;){if(++i===u)return e;a=r[i]}var l=i*32+Lt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=~r[i];a&=~((1<<(t&31))-1);for(var u=r.length;a===0;){if(++i===u)return e;a=~r[i]}var l=i*32+Lt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new Et;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),a=this.bits,u=r;u<=i;u++){var l=u>r?0:t&31,f=u<i?31:e&31,d=(2<<f)-(1<<l);a[u]|=d}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new Et;if(e===t)return!0;e--;for(var i=Math.floor(t/32),a=Math.floor(e/32),u=this.bits,l=i;l<=a;l++){var f=l>i?0:t&31,d=l<a?31:e&31,g=(2<<d)-(1<<f)&4294967295;if((u[l]&g)!==(r?g:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new Et("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new Et("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var a=0;a<i;a++){for(var u=0,l=0;l<8;l++)this.get(t)&&(u|=1<<7-l),t++;e[r+a]=u}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,a=0;a<r;a++){var u=i[a];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,t[e-a]=u}if(this.size!==r*32){for(var l=r*32-this.size,f=t[0]>>>l,a=1;a<r;a++){var d=t[a];f|=d<<32-l,t[a-1]=f,f=d>>>l}t[r-1]=f}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&tn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+tn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),zp;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(zp||(zp={}));const Se=zp;var pR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(n){pR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Jn),gR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oe;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(oe||(oe={}));var Je=function(){function n(t,e,r){for(var i,a,u=[],l=3;l<arguments.length;l++)u[l-3]=arguments[l];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=u,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var f=this.values,d=0,g=f.length;d!==g;d++){var m=f[d];n.VALUES_TO_ECI.set(m,this)}try{for(var y=gR(u),x=y.next();!x.done;x=y.next()){var A=x.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new ct("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new ct("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new ct("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(oe.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(oe.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(oe.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(oe.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(oe.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(oe.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(oe.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(oe.Big5,28,"Big5"),n.GB18030=new n(oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(oe.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),vR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xh=function(n){vR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(Jn),Rr=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Je?t:Je.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,u=t.length;a<u;a++){var l=t[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(Je.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Xh("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Je.UTF8)||t.equals(Je.ISO8859_1)||t.equals(Je.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),qt=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return Rr.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(Se.CHARACTER_SET)!==void 0)return e.get(Se.CHARACTER_SET).toString();for(var r=t.length,i=!0,a=!0,u=!0,l=0,f=0,d=0,g=0,m=0,y=0,x=0,A=0,S=0,I=0,M=0,O=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,k=0;k<r&&(i||a||u);k++){var V=t[k]&255;u&&(l>0?(V&128)===0?u=!1:l--:(V&128)!==0&&((V&64)===0?u=!1:(l++,(V&32)===0?f++:(l++,(V&16)===0?d++:(l++,(V&8)===0?g++:u=!1))))),i&&(V>127&&V<160?i=!1:V>159&&(V<192||V===215||V===247)&&M++),a&&(m>0?V<64||V===127||V>252?a=!1:m--:V===128||V===160||V>239?a=!1:V>160&&V<224?(y++,A=0,x++,x>S&&(S=x)):V>127?(m++,x=0,A++,A>I&&(I=A)):(x=0,A=0))}return u&&l>0&&(u=!1),a&&m>0&&(a=!1),u&&(O||f+d+g>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||I>=3)?n.SHIFT_JIS:i&&a?S===2&&y===2||M*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:u?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function a(l,f,d,g,m,y){if(l==="%%")return"%";if(e[++i]!==void 0){l=g?parseInt(g.substr(1)):void 0;var x=m?parseInt(m.substr(1)):void 0,A;switch(y){case"s":A=e[i];break;case"c":A=e[i][0];break;case"f":A=parseFloat(e[i]).toFixed(l);break;case"p":A=parseFloat(e[i]).toPrecision(l);break;case"e":A=parseFloat(e[i]).toExponential(l);break;case"x":A=parseInt(e[i]).toString(x||16);break;case"d":A=parseFloat(parseInt(e[i],x||10).toPrecision(l)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(x);for(var S=parseInt(d),I=d&&d[0]+""=="0"?"0":" ";A.length<S;)A=f!==void 0?A+I:I+A;return A}}var u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,a)},n.getBytes=function(t,e){return Rr.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Je.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Je.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Je.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Nt=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=qt.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),_i=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new Et("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),a=0;a<e;a++)for(var u=t[a],l=0;l<r;l++)u[l]&&i.set(l,a);return i},n.parseFromString=function(t,e,r){if(t===null)throw new Et("stringRepresentation cannot be null");for(var i=new Array(t.length),a=0,u=0,l=-1,f=0,d=0;d<t.length;)if(t.charAt(d)===`
`||t.charAt(d)==="\r"){if(a>u){if(l===-1)l=a-u;else if(a-u!==l)throw new Et("row lengths do not match");u=a,f++}d++}else if(t.substring(d,d+e.length)===e)d+=e.length,i[a]=!0,a++;else if(t.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Et("illegal character encountered: "+t.substring(d));if(a>u){if(l===-1)l=a-u;else if(a-u!==l)throw new Et("row lengths do not match");f++}for(var g=new n(l,f),m=0;m<a;m++)i[m]&&g.set(Math.floor(m%l),Math.floor(m/l));return g},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new Et("input matrix dimensions do not match");for(var e=new pn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,u=this.height;a<u;a++)for(var l=a*r,f=t.getRow(a,e).getBitArray(),d=0;d<r;d++)i[l+d]^=f[d]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new Et("Left and top must be nonnegative");if(i<1||r<1)throw new Et("Height and width must be at least 1");var a=t+r,u=e+i;if(u>this.height||a>this.width)throw new Et("The region must fit inside the matrix");for(var l=this.rowSize,f=this.bits,d=e;d<u;d++)for(var g=d*l,m=t;m<a;m++)f[g+Math.floor(m/32)]|=1<<(m&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new pn(this.width):e.clear();for(var r=this.rowSize,i=this.bits,a=t*r,u=0;u<r;u++)e.setBulk(u*32,i[a+u]);return e},n.prototype.setRow=function(t,e){_e.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new pn(t),i=new pn(t),a=0,u=Math.floor((e+1)/2);a<u;a++)r=this.getRow(a,r),i=this.getRow(e-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(e-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,a=t,u=e,l=-1,f=-1,d=0;d<e;d++)for(var g=0;g<r;g++){var m=i[d*r+g];if(m!==0){if(d<u&&(u=d),d>f&&(f=d),g*32<a){for(var y=0;(m<<31-y&4294967295)===0;)y++;g*32+y<a&&(a=g*32+y)}if(g*32+31>l){for(var y=31;!(m>>>y);)y--;g*32+y>l&&(l=g*32+y)}}}return l<a||f<u?null:Int32Array.from([a,u,l-a+1,f-u+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,a=r%t*32,u=e[r],l=0;(u<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),a=Math.floor(r%t)*32,u=e[r],l=31;!(u>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&tn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+tn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new Nt,a=0,u=this.height;a<u;a++){for(var l=0,f=this.width;l<f;l++)i.append(this.get(l,a)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),mR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),et=function(n){mR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Jn),yR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_R=function(n){yR(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new pn(a):r.clear(),this.initArrays(a);for(var u=i.getRow(e,this.luminances),l=this.buckets,f=0;f<a;f++)l[(u[f]&255)>>t.LUMINANCE_SHIFT]++;var d=t.estimateBlackPoint(l);if(a<3)for(var f=0;f<a;f++)(u[f]&255)<d&&r.set(f);else for(var g=u[0]&255,m=u[1]&255,f=1;f<a-1;f++){var y=u[f+1]&255;(m*4-g-y)/2<d&&r.set(f),g=m,m=y}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),a=new _i(r,i);this.initArrays(r);for(var u=this.buckets,l=1;l<5;l++)for(var f=Math.floor(i*l/5),d=e.getRow(f,this.luminances),g=Math.floor(r*4/5),m=Math.floor(r/5);m<g;m++){var y=d[m]&255;u[y>>t.LUMINANCE_SHIFT]++}for(var x=t.estimateBlackPoint(u),A=e.getMatrix(),l=0;l<i;l++)for(var S=l*r,m=0;m<r;m++){var y=A[S+m]&255;y<x&&a.set(m,l)}return a},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,a=0,u=0,l=0;l<r;l++)e[l]>u&&(a=l,u=e[l]),e[l]>i&&(i=e[l]);for(var f=0,d=0,l=0;l<r;l++){var g=l-a,m=e[l]*g*g;m>d&&(f=l,d=m)}if(a>f){var y=a;a=f,f=y}if(f-a<=r/16)throw new et;for(var x=f-1,A=-1,l=f-1;l>a;l--){var S=l-a,m=S*S*(f-l)*(i-e[l]);m>A&&(x=l,A=m)}return x<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(cR),xR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ER=function(n){xR(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var a=e.getMatrix(),u=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&u++;var l=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&l++;var f=t.calculateBlackPoints(a,u,l,r,i),d=new _i(r,i);t.calculateThresholdForBlock(a,u,l,r,i,f,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,a,u,l,f){for(var d=u-t.BLOCK_SIZE,g=a-t.BLOCK_SIZE,m=0;m<i;m++){var y=m<<t.BLOCK_SIZE_POWER;y>d&&(y=d);for(var x=t.cap(m,2,i-3),A=0;A<r;A++){var S=A<<t.BLOCK_SIZE_POWER;S>g&&(S=g);for(var I=t.cap(A,2,r-3),M=0,O=-2;O<=2;O++){var k=l[x+O];M+=k[I-2]+k[I-1]+k[I]+k[I+1]+k[I+2]}var V=M/25;t.thresholdBlock(e,S,y,V,a,f)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,a,u,l){for(var f=0,d=i*u+r;f<t.BLOCK_SIZE;f++,d+=u)for(var g=0;g<t.BLOCK_SIZE;g++)(e[d+g]&255)<=a&&l.set(r+g,i+f)},t.calculateBlackPoints=function(e,r,i,a,u){for(var l=u-t.BLOCK_SIZE,f=a-t.BLOCK_SIZE,d=new Array(i),g=0;g<i;g++){d[g]=new Int32Array(r);var m=g<<t.BLOCK_SIZE_POWER;m>l&&(m=l);for(var y=0;y<r;y++){var x=y<<t.BLOCK_SIZE_POWER;x>f&&(x=f);for(var A=0,S=255,I=0,M=0,O=m*a+x;M<t.BLOCK_SIZE;M++,O+=a){for(var k=0;k<t.BLOCK_SIZE;k++){var V=e[O+k]&255;A+=V,V<S&&(S=V),V>I&&(I=V)}if(I-S>t.MIN_DYNAMIC_RANGE)for(M++,O+=a;M<t.BLOCK_SIZE;M++,O+=a)for(var k=0;k<t.BLOCK_SIZE;k++)A+=e[O+k]&255}var H=A>>t.BLOCK_SIZE_POWER*2;if(I-S<=t.MIN_DYNAMIC_RANGE&&(H=S/2,g>0&&y>0)){var q=(d[g-1][y]+2*d[g][y-1]+d[g-1][y-1])/4;S<q&&(H=q)}d[g][y]=H}}return d},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(_R),Fd=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new Xh("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Xh("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Xh("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new Nt,r=0;r<this.height;r++){for(var i=this.getRow(r,t),a=0;a<this.width;a++){var u=i[a]&255,l=void 0;u<64?l="#":u<128?l="+":u<192?l=".":l=" ",e.append(l)}e.append(`
`)}return e.toString()},n}(),AR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ev=function(n){AR(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),a=this.getWidth(),u=0;u<a;u++)i[u]=255-(i[u]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(e[a]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,a){return new t(this.delegate.crop(e,r,i,a))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Fd),wR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TR=function(n){wR(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,a){a===void 0&&(a=!1);var u=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!a)for(var l=0,f=0,d=e.length;l<d;l+=4,f++){var g=void 0,m=e[l+3];if(m===0)g=255;else{var y=e[l],x=e[l+1],A=e[l+2];g=306*y+601*x+117*A+512>>10}u[f]=g}else for(var l=0,f=0,S=e.length;l<S;l+=4,f++){var g=void 0,m=e[l+3];if(m===0)g=255;else{var y=e[l],x=e[l+1],A=e[l+2];g=306*y+601*x+117*A+512>>10}u[f]=255-g}return u},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Et("Requested row is outside the image: "+e);var i=this.getWidth(),a=e*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return n.prototype.crop.call(this,e,r,i,a),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=e*t.DEGREE_TO_RADIANS,u=this.canvas.width,l=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*l),d=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*l);return r.width=f,r.height=d,i.translate(f/2,d/2),i.rotate(a),i.drawImage(this.canvas,u/-2,l/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new ev(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Fd),SR=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),zn=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(u){u(a)})}return new(e||(e=Promise))(function(a,u){function l(g){try{d(r.next(g))}catch(m){u(m)}}function f(g){try{d(r.throw(g))}catch(m){u(m)}}function d(g){g.done?a(g.value):i(g.value).then(l,f)}d((r=r.apply(n,t||[])).next())})},Hn=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(d){return function(g){return f([d,g])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,i=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){e.label=d[1];break}if(d[0]===6&&e.label<a[1]){e.label=a[1],a=d;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(d);break}a[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(n,e)}catch(g){d=[6,g],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wu=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return zn(this,void 0,void 0,function(){var t,e,r,i,a,u,l,f,d,g,m,y;return Hn(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=x.sent(),e=[];try{for(r=CR(t),i=r.next();!i.done;i=r.next())a=i.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(l=a.deviceId||a.id,f=a.label||"Video device "+(e.length+1),d=a.groupId,g={deviceId:l,label:f,kind:u,groupId:d},e.push(g))}catch(A){m={error:A}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return zn(this,void 0,void 0,function(){var t;return Hn(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new SR(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return zn(this,void 0,void 0,function(){var e;return Hn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return zn(this,void 0,void 0,function(){return Hn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return zn(this,void 0,void 0,function(){var r,i;return Hn(this,function(a){switch(a.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return zn(this,void 0,void 0,function(){var r;return Hn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return zn(this,void 0,void 0,function(){var r,i;return Hn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return zn(this,void 0,void 0,function(){return Hn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return zn(this,void 0,void 0,function(){var i,a;return Hn(this,function(u){switch(u.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,e,r)];case 1:return[2,u.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return zn(this,void 0,void 0,function(){var i;return Hn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return zn(this,void 0,void 0,function(){var i;return Hn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return zn(this,void 0,void 0,function(){var r;return Hn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return zn(this,void 0,void 0,function(){return Hn(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Ur("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Ur("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Ur("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Ur("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Ur("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Ur("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Ur("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Ur("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Ur("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Ur("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return zn(this,void 0,void 0,function(){return Hn(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return zn(this,void 0,void 0,function(){return Hn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(u,l){if(i._stopAsyncDecode){l(new et("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(t);u(f)}catch(y){var d=e&&y instanceof et,g=y instanceof dn||y instanceof ct,m=g&&r;if(d||m)return setTimeout(a,i._timeBetweenDecodingAttempts,u,l);l(y)}};return new Promise(function(u,l){return a(u,l)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(t);e(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(f){e(null,f);var u=f instanceof dn||f instanceof ct,l=f instanceof et;(u||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new TR(r,e),a=new ER(i);return new uR(a)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),kn=function(){function n(t,e,r,i,a,u){r===void 0&&(r=e==null?0:8*e.length),u===void 0&&(u=_e.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=u,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,u==null?this.timestamp=_e.currentTimeMillis():this.timestamp=u}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);_e.arraycopy(e,0,r,0,e.length),_e.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Hp;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Hp||(Hp={}));const xt=Hp;var Gp;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Gp||(Gp={}));const Sn=Gp;var jd=function(){function n(t,e,r,i,a,u){a===void 0&&(a=-1),u===void 0&&(u=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=u,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),pc=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new Et;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),Ja=function(){function n(t,e){if(e.length===0)throw new Et;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),_e.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,a=e.length;i!==a;i++){var u=e[i];r=pc.addOrSubtract(r,u)}return r}r=e[0];for(var l=e.length,f=this.field,i=1;i<l;i++)r=pc.addOrSubtract(f.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new Et("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),u=r.length-e.length;_e.arraycopy(r,0,a,0,u);for(var l=u;l<r.length;l++)a[l]=pc.addOrSubtract(e[l-u],r[l]);return new n(this.field,a)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new Et("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,u=new Int32Array(r+a-1),l=this.field,f=0;f<r;f++)for(var d=e[f],g=0;g<a;g++)u[f+g]=pc.addOrSubtract(u[f+g],l.multiply(d,i[g]));return new n(l,u)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),a=this.coefficients,u=0;u<e;u++)i[u]=r.multiply(a[u],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new Et;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+t),u=this.field,l=0;l<i;l++)a[l]=u.multiply(r[l],e);return new n(u,a)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new Et("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new Et("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,a=t.getCoefficient(t.getDegree()),u=e.inverse(a);i.getDegree()>=t.getDegree()&&!i.isZero();){var l=i.getDegree()-t.getDegree(),f=e.multiply(i.getCoefficient(i.getDegree()),u),d=t.multiplyByMonomial(l,f),g=e.buildMonomial(l,f);r=r.addOrSubtract(g),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),IR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sw=function(n){IR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(Jn),bR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$n=function(n){bR(t,n);function t(e,r,i){var a=n.call(this)||this;a.primitive=e,a.size=r,a.generatorBase=i;for(var u=new Int32Array(r),l=1,f=0;f<r;f++)u[f]=l,l*=2,l>=r&&(l^=e,l&=r-1);a.expTable=u;for(var d=new Int32Array(r),f=0;f<r-1;f++)d[u[f]]=f;return a.logTable=d,a.zero=new Ja(a,Int32Array.from([0])),a.one=new Ja(a,Int32Array.from([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new Et;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Ja(this,i)},t.prototype.inverse=function(e){if(e===0)throw new Sw;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Lt.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(pc),RR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dh=function(n){RR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(Jn),OR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jc=function(n){OR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(Jn),zd=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new Ja(r,t),a=new Int32Array(e),u=!0,l=0;l<e;l++){var f=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=f,f!==0&&(u=!1)}if(!u)for(var d=new Ja(r,a),g=this.runEuclideanAlgorithm(r.buildMonomial(e,1),d,e),m=g[0],y=g[1],x=this.findErrorLocations(m),A=this.findErrorMagnitudes(y,x),l=0;l<x.length;l++){var S=t.length-1-r.log(x[l]);if(S<0)throw new Dh("Bad error location");t[S]=$n.addOrSubtract(t[S],A[l])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=this.field,u=t,l=e,f=a.getZero(),d=a.getOne();l.getDegree()>=(r/2|0);){var g=u,m=f;if(u=l,f=d,u.isZero())throw new Dh("r_{i-1} was zero");l=g;for(var y=a.getZero(),x=u.getCoefficient(u.getDegree()),A=a.inverse(x);l.getDegree()>=u.getDegree()&&!l.isZero();){var S=l.getDegree()-u.getDegree(),I=a.multiply(l.getCoefficient(l.getDegree()),A);y=y.addOrSubtract(a.buildMonomial(S,I)),l=l.addOrSubtract(u.multiplyByMonomial(S,I))}if(d=y.multiply(f).addOrSubtract(m),l.getDegree()>=u.getDegree())throw new Jc("Division algorithm failed to reduce polynomial?")}var M=d.getCoefficient(0);if(M===0)throw new Dh("sigmaTilde(0) was zero");var O=a.inverse(M),k=d.multiplyScalar(O),V=l.multiplyScalar(O);return[k,V]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,a=this.field,u=1;u<a.getSize()&&i<e;u++)t.evaluateAt(u)===0&&(r[i]=a.inverse(u),i++);if(i!==e)throw new Dh("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),a=this.field,u=0;u<r;u++){for(var l=a.inverse(e[u]),f=1,d=0;d<r;d++)if(u!==d){var g=a.multiply(e[d],l),m=(g&1)===0?g|1:g&-2;f=a.multiply(f,m)}i[u]=a.multiply(t.evaluateAt(l),a.inverse(f)),a.getGeneratorBase()!==0&&(i[u]=a.multiply(i[u],l))}return i},n}(),En;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(En||(En={}));var ix=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),u=n.getEncodedData(i),l=new jd(a,u,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=En.UPPER,i=En.UPPER,a="",u=0;u<e;)if(i===En.BINARY){if(e-u<5)break;var l=n.readCode(t,u,5);if(u+=5,l===0){if(e-u<11)break;l=n.readCode(t,u,11)+31,u+=11}for(var f=0;f<l;f++){if(e-u<8){u=e;break}var d=n.readCode(t,u,8);a+=qt.castAsNonUtf8Char(d),u+=8}i=r}else{var g=i===En.DIGIT?4:5;if(e-u<g)break;var d=n.readCode(t,u,g);u+=g;var m=n.getCharacter(i,d);m.startsWith("CTRL_")?(r=i,i=n.getTable(m.charAt(5)),m.charAt(6)==="L"&&(r=i)):(a+=m,i=r)}return a},n.getTable=function(t){switch(t){case"L":return En.LOWER;case"P":return En.PUNCT;case"M":return En.MIXED;case"D":return En.DIGIT;case"B":return En.BINARY;case"U":default:return En.UPPER}},n.getCharacter=function(t,e){switch(t){case En.UPPER:return n.UPPER_TABLE[e];case En.LOWER:return n.LOWER_TABLE[e];case En.MIXED:return n.MIXED_TABLE[e];case En.PUNCT:return n.PUNCT_TABLE[e];case En.DIGIT:return n.DIGIT_TABLE[e];default:throw new Jc("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=$n.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=$n.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=$n.AZTEC_DATA_10):(r=12,e=$n.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=t.length/r;if(a<i)throw new ct;for(var u=t.length%r,l=new Int32Array(a),f=0;f<a;f++,u+=r)l[f]=n.readCode(t,u,r);try{var d=new zd(e);d.decode(l,a-i)}catch(I){throw new ct(I)}for(var g=(1<<r)-1,m=0,f=0;f<i;f++){var y=l[f];if(y===0||y===g)throw new ct;(y===1||y===g-1)&&m++}for(var x=new Array(i*r-m),A=0,f=0;f<i;f++){var y=l[f];if(y===1||y===g-1)x.fill(y>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)x[A++]=(y&1<<S)!==0}return x},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,a=new Int32Array(i),u=new Array(this.totalBitsInLayer(r,e));if(e)for(var l=0;l<a.length;l++)a[l]=l;else for(var f=i+1+2*Lt.truncDivision(Lt.truncDivision(i,2)-1,15),d=i/2,g=Lt.truncDivision(f,2),l=0;l<d;l++){var m=l+Lt.truncDivision(l,15);a[d-l-1]=g-m-1,a[d+l]=g+m+1}for(var l=0,y=0;l<r;l++){for(var x=(r-l)*4+(e?9:12),A=l*2,S=i-1-A,I=0;I<x;I++)for(var M=I*2,O=0;O<2;O++)u[y+M+O]=t.get(a[A+O],a[A+I]),u[y+2*x+M+O]=t.get(a[A+I],a[S-O]),u[y+4*x+M+O]=t.get(a[S-O],a[S-I]),u[y+6*x+M+O]=t.get(a[S-I],a[A+O]);y+=x*8}return u},n.readCode=function(t,e,r){for(var i=0,a=e;a<e+r;a++)i<<=1,t[a]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Kt=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var a=t-r,u=e-i;return Math.sqrt(a*a+u*u)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var a=t[r];e+=a}return e},n}(),qp=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),vt=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*qp.floatToIntBits(this.x)+qp.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),a,u,l;if(r>=e&&r>=i?(u=t[0],a=t[1],l=t[2]):i>=r&&i>=e?(u=t[1],a=t[0],l=t[2]):(u=t[2],a=t[0],l=t[1]),this.crossProductZ(a,u,l)<0){var f=a;a=l,l=f}t[0]=a,t[1]=u,t[2]=l},n.distance=function(t,e){return Kt.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,a=e.y;return(r.x-i)*(t.y-a)-(r.y-a)*(t.x-i)},n}(),nv=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),DR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NR=function(n){DR(t,n);function t(e,r,i,a,u){var l=n.call(this,e,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=u,l}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(nv),Xp=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var a=e/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new et}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,a=!1,u=!0,l=!1,f=!1,d=!1,g=!1,m=!1,y=this.width,x=this.height;u;){u=!1;for(var A=!0;(A||!f)&&e<y;)A=this.containsBlackPoint(r,i,e,!1),A?(e++,u=!0,f=!0):f||e++;if(e>=y){a=!0;break}for(var S=!0;(S||!d)&&i<x;)S=this.containsBlackPoint(t,e,i,!0),S?(i++,u=!0,d=!0):d||i++;if(i>=x){a=!0;break}for(var I=!0;(I||!g)&&t>=0;)I=this.containsBlackPoint(r,i,t,!1),I?(t--,u=!0,g=!0):g||t--;if(t<0){a=!0;break}for(var M=!0;(M||!m)&&r>=0;)M=this.containsBlackPoint(t,e,r,!0),M?(r--,u=!0,m=!0):m||r--;if(r<0){a=!0;break}u&&(l=!0)}if(!a&&l){for(var O=e-t,k=null,V=1;k===null&&V<O;V++)k=this.getBlackPointOnSegment(t,i-V,t+V,i);if(k==null)throw new et;for(var H=null,V=1;H===null&&V<O;V++)H=this.getBlackPointOnSegment(t,r+V,t+V,r);if(H==null)throw new et;for(var q=null,V=1;q===null&&V<O;V++)q=this.getBlackPointOnSegment(e,r+V,e-V,r);if(q==null)throw new et;for(var N=null,V=1;N===null&&V<O;V++)N=this.getBlackPointOnSegment(e,i-V,e-V,i);if(N==null)throw new et;return this.centerEdges(N,k,q,H)}else throw new et},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var a=Kt.round(Kt.distance(t,e,r,i)),u=(r-t)/a,l=(i-e)/a,f=this.image,d=0;d<a;d++){var g=Kt.round(t+d*u),m=Kt.round(e+d*l);if(f.get(g,m))return new vt(g,m)}return null},n.prototype.centerEdges=function(t,e,r,i){var a=t.getX(),u=t.getY(),l=e.getX(),f=e.getY(),d=r.getX(),g=r.getY(),m=i.getX(),y=i.getY(),x=n.CORR;return a<this.width/2?[new vt(m-x,y+x),new vt(l+x,f+x),new vt(d-x,g-x),new vt(a+x,u-x)]:[new vt(m+x,y+x),new vt(l+x,f-x),new vt(d-x,g+x),new vt(a-x,u-x)]},n.prototype.containsBlackPoint=function(t,e,r,i){var a=this.image;if(i){for(var u=t;u<=e;u++)if(a.get(u,r))return!0}else for(var l=t;l<=e;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),ax=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),a=!0,u=0;u<e.length&&a;u+=2){var l=Math.floor(e[u]),f=Math.floor(e[u+1]);if(l<-1||l>r||f<-1||f>i)throw new et;a=!1,l===-1?(e[u]=0,a=!0):l===r&&(e[u]=r-1,a=!0),f===-1?(e[u+1]=0,a=!0):f===i&&(e[u+1]=i-1,a=!0)}a=!0;for(var u=e.length-2;u>=0&&a;u-=2){var l=Math.floor(e[u]),f=Math.floor(e[u+1]);if(l<-1||l>r||f<-1||f>i)throw new et;a=!1,l===-1?(e[u]=0,a=!0):l===r&&(e[u]=r-1,a=!0),f===-1?(e[u+1]=0,a=!0):f===i&&(e[u+1]=i-1,a=!0)}},n}(),Cw=function(){function n(t,e,r,i,a,u,l,f,d){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=a,this.a32=u,this.a13=l,this.a23=f,this.a33=d}return n.quadrilateralToQuadrilateral=function(t,e,r,i,a,u,l,f,d,g,m,y,x,A,S,I){var M=n.quadrilateralToSquare(t,e,r,i,a,u,l,f),O=n.squareToQuadrilateral(d,g,m,y,x,A,S,I);return O.times(M)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,a=this.a13,u=this.a21,l=this.a22,f=this.a23,d=this.a31,g=this.a32,m=this.a33,y=0;y<e;y+=2){var x=t[y],A=t[y+1],S=a*x+f*A+m;t[y]=(r*x+u*A+d)/S,t[y+1]=(i*x+l*A+g)/S}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,a=this.a13,u=this.a21,l=this.a22,f=this.a23,d=this.a31,g=this.a32,m=this.a33,y=t.length,x=0;x<y;x++){var A=t[x],S=e[x],I=a*A+f*S+m;t[x]=(r*A+u*S+d)/I,e[x]=(i*A+l*S+g)/I}},n.squareToQuadrilateral=function(t,e,r,i,a,u,l,f){var d=t-r+a-l,g=e-i+u-f;if(d===0&&g===0)return new n(r-t,a-r,t,i-e,u-i,e,0,0,1);var m=r-a,y=l-a,x=i-u,A=f-u,S=m*A-y*x,I=(d*A-y*g)/S,M=(m*g-d*x)/S;return new n(r-t+I*r,l-t+M*l,t,i-e+I*i,f-e+M*f,e,I,M,1)},n.quadrilateralToSquare=function(t,e,r,i,a,u,l,f){return n.squareToQuadrilateral(t,e,r,i,a,u,l,f).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),MR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PR=function(n){MR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,a,u,l,f,d,g,m,y,x,A,S,I,M,O,k,V){var H=Cw.quadrilateralToQuadrilateral(a,u,l,f,d,g,m,y,x,A,S,I,M,O,k,V);return this.sampleGridWithTransform(e,r,i,H)},t.prototype.sampleGridWithTransform=function(e,r,i,a){if(r<=0||i<=0)throw new et;for(var u=new _i(r,i),l=new Float32Array(2*r),f=0;f<i;f++){for(var d=l.length,g=f+.5,m=0;m<d;m+=2)l[m]=m/2+.5,l[m+1]=g;a.transformPoints(l),ax.checkAndNudgePoints(e,l);try{for(var m=0;m<d;m+=2)e.get(Math.floor(l[m]),Math.floor(l[m+1]))&&u.set(m/2,f)}catch{throw new et}}return u},t}(ax),rv=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new PR,n}(),Yn=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new vt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),LR=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),u=this.getMatrixCornerPoints(r);return new NR(a,u,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new et;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,a=0;a<4;a++){var u=r[(this.shift+a)%4];this.compact?(i<<=7,i+=u>>1&127):(i<<=10,i+=(u>>2&992)+(u>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(a,u,l){var f=(a>>e-2<<1)+(a&1);r=(r<<3)+f}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Lt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new et},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var a=r-i,u=new Int32Array(r),l=r-1;l>=0;--l)u[l]=t&15,t>>=4;try{var f=new zd($n.AZTEC_PARAM);f.decode(u,a)}catch{throw new et}for(var d=0,l=0;l<i;l++)d=(d<<4)+u[l];return d},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,a=t,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(e,u,1,-1),f=this.getFirstDifferent(r,u,1,1),d=this.getFirstDifferent(i,u,-1,1),g=this.getFirstDifferent(a,u,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(g,l)*this.nbCenterLayers/(this.distancePoint(a,e)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(l,f,d,g))break}e=l,r=f,i=d,a=g,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new et;this.compact=this.nbCenterLayers===5;var y=new vt(e.getX()+.5,e.getY()-.5),x=new vt(r.getX()+.5,r.getY()+.5),A=new vt(i.getX()-.5,i.getY()+.5),S=new vt(a.getX()-.5,a.getY()-.5);return this.expandSquare([y,x,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var a=new Xp(this.image).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{var u=this.image.getWidth()/2,l=this.image.getHeight()/2;t=this.getFirstDifferent(new Yn(u+7,l-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Yn(u+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Yn(u-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Yn(u-7,l-7),!1,-1,-1).toResultPoint()}var f=Kt.round((t.getX()+i.getX()+e.getX()+r.getX())/4),d=Kt.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var a=new Xp(this.image,15,f,d).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{t=this.getFirstDifferent(new Yn(f+7,d-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Yn(f+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Yn(f-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Yn(f-7,d-7),!1,-1,-1).toResultPoint()}return f=Kt.round((t.getX()+i.getX()+e.getX()+r.getX())/4),d=Kt.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Yn(f,d)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,a){var u=rv.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,d=l/2+this.nbCenterLayers;return u.sampleGrid(t,l,l,f,f,d,f,d,d,f,d,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,a=this.distanceResultPoint(t,e),u=a/r,l=t.getX(),f=t.getY(),d=u*(e.getX()-t.getX())/a,g=u*(e.getY()-t.getY())/a,m=0;m<r;m++)this.image.get(Kt.round(l+m*d),Kt.round(f+m*g))&&(i|=1<<r-m-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var a=3;t=new Yn(t.getX()-a,t.getY()+a),e=new Yn(e.getX()-a,e.getY()-a),r=new Yn(r.getX()+a,r.getY()-a),i=new Yn(i.getX()+a,i.getY()+a);var u=this.getColor(i,t);if(u===0)return!1;var l=this.getColor(t,e);return l!==u||(l=this.getColor(e,r),l!==u)?!1:(l=this.getColor(r,i),l===u)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,a=(e.getY()-t.getY())/r,u=0,l=t.getX(),f=t.getY(),d=this.image.get(t.getX(),t.getY()),g=Math.ceil(r),m=0;m<g;m++)l+=i,f+=a,this.image.get(Kt.round(l),Kt.round(f))!==d&&u++;var y=u/r;return y>.1&&y<.9?0:y<=.1===d?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var a=t.getX()+r,u=t.getY()+i;this.isValid(a,u)&&this.image.get(a,u)===e;)a+=r,u+=i;for(a-=r,u-=i;this.isValid(a,u)&&this.image.get(a,u)===e;)a+=r;for(a-=r;this.isValid(a,u)&&this.image.get(a,u)===e;)u+=i;return u-=i,new Yn(a,u)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),a=t[0].getX()-t[2].getX(),u=t[0].getY()-t[2].getY(),l=(t[0].getX()+t[2].getX())/2,f=(t[0].getY()+t[2].getY())/2,d=new vt(l+i*a,f+i*u),g=new vt(l-i*a,f-i*u);a=t[1].getX()-t[3].getX(),u=t[1].getY()-t[3].getY(),l=(t[1].getX()+t[3].getX())/2,f=(t[1].getY()+t[3].getY())/2;var m=new vt(l+i*a,f+i*u),y=new vt(l-i*a,f-i*u),x=[d,m,g,y];return x},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=Kt.round(t.getX()),r=Kt.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return Kt.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return Kt.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Lt.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Wp=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new LR(t.getBlackMatrix()),a=null,u=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(e,a),u=new ix().decode(l)}catch(m){r=m}if(u==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(e,a),u=new ix().decode(l)}catch(m){throw r??m}var f=new kn(u.getText(),u.getRawBytes(),u.getNumBits(),a,xt.AZTEC,_e.currentTimeMillis()),d=u.getByteSegments();d!=null&&f.putMetadata(Sn.BYTE_SEGMENTS,d);var g=u.getECLevel();return g!=null&&f.putMetadata(Sn.ERROR_CORRECTION_LEVEL,g),f},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(Se.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,a,u){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),BR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){BR(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Wp,e)||this}return t})(Wu);var nn=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(Se.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),a=this.doDecode(i,e),u=a.getResultMetadata(),l=270;u!==null&&u.get(Sn.ORIENTATION)===!0&&(l=l+u.get(Sn.ORIENTATION)%360),a.putMetadata(Sn.ORIENTATION,l);var f=a.getResultPoints();if(f!==null)for(var d=i.getHeight(),g=0;g<f.length;g++)f[g]=new vt(d-f[g].getY()-1,f[g].getX());return a}else throw new et}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),a=new pn(r),u=e&&e.get(Se.TRY_HARDER)===!0,l=Math.max(1,i>>(u?8:5)),f;u?f=i:f=15;for(var d=Math.trunc(i/2),g=0;g<f;g++){var m=Math.trunc((g+1)/2),y=(g&1)===0,x=d+l*(y?m:-m);if(x<0||x>=i)break;try{a=t.getBlackRow(x,a)}catch{continue}for(var A=function(O){if(O===1&&(a.reverse(),e&&e.get(Se.NEED_RESULT_POINT_CALLBACK)===!0)){var k=new Map;e.forEach(function(q,N){return k.set(N,q)}),k.delete(Se.NEED_RESULT_POINT_CALLBACK),e=k}try{var V=S.decodeRow(x,a,e);if(O===1){V.putMetadata(Sn.ORIENTATION,180);var H=V.getResultPoints();H!==null&&(H[0]=new vt(r-H[0].getX()-1,H[0].getY()),H[1]=new vt(r-H[1].getX()-1,H[1].getY()))}return{value:V}}catch{}},S=this,I=0;I<2;I++){var M=A(I);if(typeof M=="object")return M.value}}throw new et},n.recordPattern=function(t,e,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var u=t.getSize();if(e>=u)throw new et;for(var l=!t.get(e),f=0,d=e;d<u;){if(t.get(d)!==l)r[f]++;else{if(++f===i)break;r[f]=1,l=!l}d++}if(!(f===i||f===i-1&&d===u))throw new et},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,a=t.get(e);e>0&&i>=0;)t.get(--e)!==a&&(i--,a=!a);if(i>=0)throw new et;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,u=0,l=0;l<i;l++)a+=t[l],u+=e[l];if(a<u)return Number.POSITIVE_INFINITY;var f=a/u;r*=f;for(var d=0,g=0;g<i;g++){var m=t[g],y=e[g]*f,x=m>y?m-y:y-m;if(x>r)return Number.POSITIVE_INFINITY;d+=x}return d/a},n}(),kR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ox=function(n){kR(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),a=0,u=Int32Array.from([0,0,0,0,0,0]),l=i,f=!1,d=6,g=i;g<r;g++)if(e.get(g)!==f)u[a]++;else{if(a===d-1){for(var m=t.MAX_AVG_VARIANCE,y=-1,x=t.CODE_START_A;x<=t.CODE_START_C;x++){var A=nn.patternMatchVariance(u,t.CODE_PATTERNS[x],t.MAX_INDIVIDUAL_VARIANCE);A<m&&(m=A,y=x)}if(y>=0&&e.isRange(Math.max(0,l-(g-l)/2),l,!1))return Int32Array.from([l,g,y]);l+=u[0]+u[1],u=u.slice(2,u.length),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,f=!f}throw new et},t.decodeCode=function(e,r,i){nn.recordPattern(e,i,r);for(var a=t.MAX_AVG_VARIANCE,u=-1,l=0;l<t.CODE_PATTERNS.length;l++){var f=t.CODE_PATTERNS[l],d=this.patternMatchVariance(r,f,t.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,u=l)}if(u>=0)return u;throw new et},t.prototype.decodeRow=function(e,r,i){var a=i&&i.get(Se.ASSUME_GS1)===!0,u=t.findStartPattern(r),l=u[2],f=0,d=new Uint8Array(20);d[f++]=l;var g;switch(l){case t.CODE_START_A:g=t.CODE_CODE_A;break;case t.CODE_START_B:g=t.CODE_CODE_B;break;case t.CODE_START_C:g=t.CODE_CODE_C;break;default:throw new ct}for(var m=!1,y=!1,x="",A=u[0],S=u[1],I=Int32Array.from([0,0,0,0,0,0]),M=0,O=0,k=l,V=0,H=!0,q=!1,N=!1;!m;){var b=y;switch(y=!1,M=O,O=t.decodeCode(r,I,S),d[f++]=O,O!==t.CODE_STOP&&(H=!0),O!==t.CODE_STOP&&(V++,k+=V*O),A=S,S+=I.reduce(function(ft,yt){return ft+yt},0),O){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new ct}switch(g){case t.CODE_CODE_A:if(O<64)N===q?x+=String.fromCharCode(32+O):x+=String.fromCharCode(32+O+128),N=!1;else if(O<96)N===q?x+=String.fromCharCode(O-64):x+=String.fromCharCode(O+64),N=!1;else switch(O!==t.CODE_STOP&&(H=!1),O){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!q&&N?(q=!0,N=!1):q&&N?(q=!1,N=!1):N=!0;break;case t.CODE_SHIFT:y=!0,g=t.CODE_CODE_B;break;case t.CODE_CODE_B:g=t.CODE_CODE_B;break;case t.CODE_CODE_C:g=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0;break}break;case t.CODE_CODE_B:if(O<96)N===q?x+=String.fromCharCode(32+O):x+=String.fromCharCode(32+O+128),N=!1;else switch(O!==t.CODE_STOP&&(H=!1),O){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!q&&N?(q=!0,N=!1):q&&N?(q=!1,N=!1):N=!0;break;case t.CODE_SHIFT:y=!0,g=t.CODE_CODE_A;break;case t.CODE_CODE_A:g=t.CODE_CODE_A;break;case t.CODE_CODE_C:g=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0;break}break;case t.CODE_CODE_C:if(O<100)O<10&&(x+="0"),x+=O;else switch(O!==t.CODE_STOP&&(H=!1),O){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_CODE_A:g=t.CODE_CODE_A;break;case t.CODE_CODE_B:g=t.CODE_CODE_B;break;case t.CODE_STOP:m=!0;break}break}b&&(g=g===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var P=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new et;if(k-=V*M,k%103!==M)throw new dn;var B=x.length;if(B===0)throw new et;B>0&&H&&(g===t.CODE_CODE_C?x=x.substring(0,B-2):x=x.substring(0,B-1));for(var F=(u[1]+u[0])/2,z=A+P/2,U=d.length,Ot=new Uint8Array(U),Ft=0;Ft<U;Ft++)Ot[Ft]=d[Ft];var rt=[new vt(F,e),new vt(z,e)];return new kn(x,Ot,0,rt,xt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(nn),VR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ip=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sx=function(n){VR(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var a,u,l,f,d=this.counters;d.fill(0),this.decodeRowResult="";var g=t.findAsteriskPattern(r,d),m=r.getNextSet(g[1]),y=r.getSize(),x,A;do{t.recordPattern(r,m,d);var S=t.toNarrowWidePattern(d);if(S<0)throw new et;x=t.patternToChar(S),this.decodeRowResult+=x,A=m;try{for(var I=(a=void 0,ip(d)),M=I.next();!M.done;M=I.next()){var O=M.value;m+=O}}catch(U){a={error:U}}finally{try{M&&!M.done&&(u=I.return)&&u.call(I)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var k=0;try{for(var V=ip(d),H=V.next();!H.done;H=V.next()){var O=H.value;k+=O}}catch(U){l={error:U}}finally{try{H&&!H.done&&(f=V.return)&&f.call(V)}finally{if(l)throw l.error}}var q=m-A-k;if(m!==y&&q*2<k)throw new et;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,b=0,P=0;P<N;P++)b+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(N)!==t.ALPHABET_STRING.charAt(b%43))throw new dn;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new et;var B;this.extendedMode?B=t.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var F=(g[1]+g[0])/2,z=A+k/2;return new kn(B,null,0,[new vt(F,e),new vt(z,e)],xt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),a=e.getNextSet(0),u=0,l=a,f=!1,d=r.length,g=a;g<i;g++)if(e.get(g)!==f)r[u]++;else{if(u===d-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((g-l)/2)),l,!1))return[l,g];l+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,f=!f}throw new et},t.toNarrowWidePattern=function(e){var r,i,a=e.length,u=0,l;do{var f=2147483647;try{for(var d=(r=void 0,ip(e)),g=d.next();!g.done;g=d.next()){var m=g.value;m<f&&m>u&&(f=m)}}catch(S){r={error:S}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}u=f,l=0;for(var y=0,x=0,A=0;A<a;A++){var m=e[A];m>u&&(x|=1<<a-1-A,l++,y+=m)}if(l===3){for(var A=0;A<a&&l>0;A++){var m=e[A];if(m>u&&(l--,m*2>=y))return-1}return x}}while(l>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new et},t.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var u=e.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){var l=e.charAt(a+1),f="\0";switch(u){case"+":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new ct;break;case"$":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new ct;break;case"%":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l==="X"||l==="Y"||l==="Z")f="";else throw new ct;break;case"/":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new ct;break}i+=f,a++}else i+=u}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(nn),UR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ap=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ux=function(n){UR(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var a,u,l,f,d=this.findAsteriskPattern(r),g=r.getNextSet(d[1]),m=r.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var x,A;do{t.recordPattern(r,g,y);var S=this.toPattern(y);if(S<0)throw new et;x=this.patternToChar(S),this.decodeRowResult+=x,A=g;try{for(var I=(a=void 0,ap(y)),M=I.next();!M.done;M=I.next()){var O=M.value;g+=O}}catch(P){a={error:P}}finally{try{M&&!M.done&&(u=I.return)&&u.call(I)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var k=0;try{for(var V=ap(y),H=V.next();!H.done;H=V.next()){var O=H.value;k+=O}}catch(P){l={error:P}}finally{try{H&&!H.done&&(f=V.return)&&f.call(V)}finally{if(l)throw l.error}}if(g===m||!r.get(g))throw new et;if(this.decodeRowResult.length<2)throw new et;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),N=(d[1]+d[0])/2,b=A+k/2;return new kn(q,null,0,[new vt(N,e),new vt(b,e)],xt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var a=this.counters,u=i,l=!1,f=a.length,d=0,g=i;g<r;g++)if(e.get(g)!==l)a[d]++;else{if(d===f-1){if(this.toPattern(a)===t.ASTERISK_ENCODING)return new Int32Array([u,g]);u+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,l=!l}throw new et},t.prototype.toPattern=function(e){var r,i,a=0;try{for(var u=ap(e),l=u.next();!l.done;l=u.next()){var f=l.value;a+=f}}catch(A){r={error:A}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}for(var d=0,g=e.length,m=0;m<g;m++){var y=Math.round(e[m]*9/a);if(y<1||y>4)return-1;if((m&1)===0)for(var x=0;x<y;x++)d=d<<1|1;else d<<=y}return d},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new et},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var u=e.charAt(a);if(u>="a"&&u<="d"){if(a>=r-1)throw new ct;var l=e.charAt(a+1),f="\0";switch(u){case"d":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new ct;break;case"a":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new ct;break;case"b":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l>="X"&&l<="Z")f="";else throw new ct;break;case"c":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new ct;break}i+=f,a++}else i+=u}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var a=1,u=0,l=r-1;l>=0;l--)u+=a*t.ALPHABET_STRING.indexOf(e.charAt(l)),++a>i&&(a=1);if(e.charAt(r)!==t.ALPHABET_STRING[u%47])throw new dn},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(nn),FR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lx=function(n){FR(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var a,u,l=this.decodeStart(r),f=this.decodeEnd(r),d=new Nt;t.decodeMiddle(r,l[1],f[0],d);var g=d.toString(),m=null;i!=null&&(m=i.get(Se.ALLOWED_LENGTHS)),m==null&&(m=t.DEFAULT_ALLOWED_LENGTHS);var y=g.length,x=!1,A=0;try{for(var S=jR(m),I=S.next();!I.done;I=S.next()){var M=I.value;if(y===M){x=!0;break}M>A&&(A=M)}}catch(V){a={error:V}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}if(!x&&y>A&&(x=!0),!x)throw new ct;var O=[new vt(l[1],e),new vt(f[0],e)],k=new kn(g,null,0,O,xt.ITF,new Date().getTime());return k},t.decodeMiddle=function(e,r,i,a){var u=new Int32Array(10),l=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),l.fill(0),f.fill(0);r<i;){nn.recordPattern(e,r,u);for(var d=0;d<5;d++){var g=2*d;l[d]=u[g],f[d]=u[g+1]}var m=t.decodeDigit(l);a.append(m.toString()),m=this.decodeDigit(f),a.append(m.toString()),u.forEach(function(y){r+=y})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!e.get(a);a--)i--;if(i!==0)throw new et},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new et;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(u){u instanceof et&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var a=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-a,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var a=i.length,u=new Int32Array(a),l=e.getSize(),f=!1,d=0,g=r;u.fill(0);for(var m=r;m<l;m++)if(e.get(m)!==f)u[d]++;else{if(d===a-1){if(nn.patternMatchVariance(u,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[g,m];g+=u[0]+u[1],_e.arraycopy(u,2,u,0,d-1),u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,f=!f}throw new et},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,a=t.PATTERNS.length,u=0;u<a;u++){var l=t.PATTERNS[u],f=nn.patternMatchVariance(e,l,t.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=u):f===r&&(i=-1)}if(i>=0)return i%10;throw new et},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(nn),zR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vu=function(n){zR(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,a=0,u=Int32Array.from([0,0,0]);!r;){u=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,a,!1,this.START_END_PATTERN,u);var l=i[0];a=i[1];var f=l-(a-l);f>=0&&(r=e.isRange(f,l,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new ct;i+=u}i*=3;for(var a=r-2;a>=0;a-=2){var u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new ct;i+=u}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,a){return this.findGuardPattern(e,r,i,a,new Int32Array(a.length))},t.findGuardPattern=function(e,r,i,a,u){var l=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var f=0,d=r,g=a.length,m=i,y=r;y<l;y++)if(e.get(y)!==m)u[f]++;else{if(f===g-1){if(nn.patternMatchVariance(u,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([d,y]);d+=u[0]+u[1];for(var x=u.slice(2,u.length),A=0;A<f-1;A++)u[A]=x[A];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,m=!m}throw new et},t.decodeDigit=function(e,r,i,a){this.recordPattern(e,i,r);for(var u=this.MAX_AVG_VARIANCE,l=-1,f=a.length,d=0;d<f;d++){var g=a[d],m=nn.patternMatchVariance(r,g,t.MAX_INDIVIDUAL_VARIANCE);m<u&&(u=m,l=d)}if(l>=0)return l;throw new et},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(nn),HR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GR=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),u=i.toString(),l=n.parseExtensionString(u),f=[new vt((r[0]+r[1])/2,t),new vt(a,t)],d=new kn(u,null,0,f,xt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d},n.prototype.decodeMiddle=function(t,e,r){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=e[1],d=0,g=0;g<5&&f<l;g++){var m=Vu.decodeDigit(t,u,f,Vu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,HR(u)),x=y.next();!x.done;x=y.next()){var A=x.value;f+=A}}catch(I){i={error:I}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(d|=1<<4-g),g!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(r.length!==5)throw new et;var S=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==S)throw new et;return f},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new et},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[Sn.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),a=r%100,u=a<10?"0"+a:a.toString();return e+i+"."+u},n}(),qR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},XR=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),u=i.toString(),l=n.parseExtensionString(u),f=[new vt((r[0]+r[1])/2,t),new vt(a,t)],d=new kn(u,null,0,f,xt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d},n.prototype.decodeMiddle=function(t,e,r){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=e[1],d=0,g=0;g<2&&f<l;g++){var m=Vu.decodeDigit(t,u,f,Vu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,qR(u)),x=y.next();!x.done;x=y.next()){var A=x.value;f+=A}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(d|=1<<1-g),g!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(r.length!==2)throw new et;if(parseInt(r.toString())%4!==d)throw new et;return f},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[Sn.ISSUE_NUMBER,parseInt(t)]])},n}(),WR=function(){function n(){}return n.decodeRow=function(t,e,r){var i=Vu.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new GR;return a.decodeRow(t,e,i)}catch{var u=new XR;return u.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),YR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ze=function(n){YR(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],a=new Int32Array(i.length),u=0;u<i.length;u++)a[u]=i[i.length-u-1];t.L_AND_G_PATTERNS[r]=a}return e}return t.prototype.decodeRow=function(e,r,i){var a=t.findStartGuardPattern(r),u=i==null?null:i.get(Se.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=new vt((a[0]+a[1])/2,e);u.foundPossibleResultPoint(l)}var f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=f.rowOffset,g=f.resultString;if(u!=null){var m=new vt(d,e);u.foundPossibleResultPoint(m)}var y=t.decodeEnd(r,d);if(u!=null){var x=new vt((y[0]+y[1])/2,e);u.foundPossibleResultPoint(x)}var A=y[1],S=A+(A-y[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new et;var I=g.toString();if(I.length<8)throw new ct;if(!t.checkChecksum(I))throw new dn;var M=(a[1]+a[0])/2,O=(y[1]+y[0])/2,k=this.getBarcodeFormat(),V=[new vt(M,e),new vt(O,e)],H=new kn(I,null,0,V,k,new Date().getTime()),q=0;try{var N=WR.decodeRow(e,r,y[1]);H.putMetadata(Sn.UPC_EAN_EXTENSION,N.getText()),H.putAllMetadata(N.getResultMetadata()),H.addResultPoints(N.getResultPoints()),q=N.getText().length}catch{}var b=i==null?null:i.get(Se.ALLOWED_EAN_EXTENSIONS);if(b!=null){var P=!1;for(var B in b)if(q.toString()===B){P=!0;break}if(!P)throw new et}return k===xt.EAN_13||xt.UPC_A,H},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new ct;i+=u}i*=3;for(var a=r-2;a>=0;a-=2){var u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new ct;i+=u}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Vu),KR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yp=function(n){KR(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,u,l,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var g=e.getSize(),m=r[1],y=0,x=0;x<6&&m<g;x++){var A=Ze.decodeDigit(e,d,m,Ze.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,cx(d)),I=S.next();!I.done;I=S.next()){var M=I.value;m+=M}}catch(H){a={error:H}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}A>=10&&(y|=1<<5-x)}i=t.determineFirstDigit(i,y);var O=Ze.findGuardPattern(e,m,!0,Ze.MIDDLE_PATTERN,new Int32Array(Ze.MIDDLE_PATTERN.length).fill(0));m=O[1];for(var x=0;x<6&&m<g;x++){var A=Ze.decodeDigit(e,d,m,Ze.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var k=(l=void 0,cx(d)),V=k.next();!V.done;V=k.next()){var M=V.value;m+=M}}catch(N){l={error:N}}finally{try{V&&!V.done&&(f=k.return)&&f.call(k)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:i}},t.prototype.getBarcodeFormat=function(){return xt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new et},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Ze),QR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hx=function(n){QR(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,u,l,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var g=e.getSize(),m=r[1],y=0;y<4&&m<g;y++){var x=Ze.decodeDigit(e,d,m,Ze.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var A=(a=void 0,fx(d)),S=A.next();!S.done;S=A.next()){var I=S.value;m+=I}}catch(V){a={error:V}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(a)throw a.error}}}var M=Ze.findGuardPattern(e,m,!0,Ze.MIDDLE_PATTERN,new Int32Array(Ze.MIDDLE_PATTERN.length).fill(0));m=M[1];for(var y=0;y<4&&m<g;y++){var x=Ze.decodeDigit(e,d,m,Ze.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var O=(l=void 0,fx(d)),k=O.next();!k.done;k=O.next()){var I=k.value;m+=I}}catch(q){l={error:q}}finally{try{k&&!k.done&&(f=O.return)&&f.call(O)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:i}},t.prototype.getBarcodeFormat=function(){return xt.EAN_8},t}(Ze),$R=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dx=function(n){$R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new Yp,e}return t.prototype.getBarcodeFormat=function(){return xt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new kn(r.substring(1),null,null,e.getResultPoints(),xt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new et},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Ze),ZR=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},px=function(n){ZR(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var a,u,l=this.decodeMiddleCounters.map(function(I){return I});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=e.getSize(),d=r[1],g=0,m=0;m<6&&d<f;m++){var y=t.decodeDigit(e,l,d,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);try{for(var x=(a=void 0,JR(l)),A=x.next();!A.done;A=x.next()){var S=A.value;d+=S}}catch(I){a={error:I}}finally{try{A&&!A.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}y>=10&&(g|=1<<5-m)}return t.determineNumSysAndCheckDigit(new Nt(i),g),d},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Ze.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){e.insert(0,"0"+i),e.append("0"+a);return}throw et.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return xt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(u){return u.charCodeAt(0)}),i=new Nt;i.append(e.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Ze),tO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},op=function(n){tO(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(Se.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(xt.EAN_13)>-1&&a.push(new Yp),i.indexOf(xt.UPC_A)>-1&&a.push(new dx),i.indexOf(xt.EAN_8)>-1&&a.push(new hx),i.indexOf(xt.UPC_E)>-1&&a.push(new px)),a.length===0&&(a.push(new Yp),a.push(new dx),a.push(new hx),a.push(new px)),r.readers=a,r}return t.prototype.decodeRow=function(e,r,i){var a,u;try{for(var l=gx(this.readers),f=l.next();!f.done;f=l.next()){var d=f.value;try{var g=d.decodeRow(e,r,i),m=g.getBarcodeFormat()===xt.EAN_13&&g.getText().charAt(0)==="0",y=i==null?null:i.get(Se.POSSIBLE_FORMATS),x=y==null||y.includes(xt.UPC_A);if(m&&x){var A=g.getRawBytes(),S=new kn(g.getText().substring(1),A,A?A.length:null,g.getResultPoints(),xt.UPC_A);return S.putAllMetadata(g.getResultMetadata()),S}return g}catch{}}}catch(I){a={error:I}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}throw new et},t.prototype.reset=function(){var e,r;try{for(var i=gx(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;u.reset()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(nn),eO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nO=function(n){eO(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var a=this.getValidRowData(r);if(!a)throw new et;var u=this.codaBarDecodeRow(a.row);if(!u)throw new et;return new kn(u,null,0,[new vt(a.left,e),new vt(a.right,e)],xt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var u=[],l=r[0],f=1,d=1;d<r.length;d++)r[d]===l?f++:(l=r[d],u.push(f),f=1);return u.push(f),u.length<23&&(u.length+1)%8!==0?null:{row:u,left:i,right:a}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(f,d){return(f+d)/2},0));e.length>0;){var a=e.splice(0,8).splice(0,7),u=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[u]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[u])}var l=r.join("");return this.validCodaBarString(l)?l:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(nn),rO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=function(n){rO(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(nn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new et},t.count=function(e){return Kt.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,a=r[0],u=1;u<e.length;u++)r[u]>a&&(a=r[u],i=u);e[i]++},t.decrement=function(e,r){for(var i=0,a=r[0],u=1;u<e.length;u++)r[u]<a&&(a=r[u],i=u);e[i]--},t.isFinderPattern=function(e){var r,i,a=e[0]+e[1],u=a+e[2]+e[3],l=a/u;if(l>=t.MIN_FINDER_PATTERN_RATIO&&l<=t.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var g=iO(e),m=g.next();!m.done;m=g.next()){var y=m.value;y>d&&(d=y),y<f&&(f=y)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return d<10*f}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(nn),pd=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Iw=function(){function n(t,e,r,i,a){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new vt(r,a)),this.resultPoints.push(new vt(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),aO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wu=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,a,u=0;try{for(var l=aO(t),f=l.next();!f.done;f=l.next()){var d=f.value;u+=d}}catch(O){i={error:O}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var g=0,m=0,y=t.length,x=0;x<y-1;x++){var A=void 0;for(A=1,m|=1<<x;A<t[x];A++,m&=~(1<<x)){var S=n.combins(u-A-1,y-x-2);if(r&&m===0&&u-A-(y-x-1)>=y-x-1&&(S-=n.combins(u-A-(y-x),y-x-2)),y-x-1>1){for(var I=0,M=u-A-(y-x-2);M>e;M--)I+=n.combins(u-A-M-1,y-x-3);S-=I*(y-1-x)}else u-A>e&&S--;g+=S}u-=A}return g},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var a=1,u=1,l=t;l>r;l--)a*=l,u<=i&&(a/=u,u++);for(;u<=i;)a/=u,u++;return a},n}(),oO=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new pn(r),a=0,u=t[0],l=u.getRightChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(a),a++;for(var f=1;f<t.length;++f){for(var d=t[f],g=d.getLeftChar().getValue(),m=11;m>=0;--m)(g&1<<m)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var y=d.getRightChar().getValue(),m=11;m>=0;--m)(y&1<<m)!==0&&i.set(a),a++}return i},n}(),Qo=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),iv=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),sO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vr=function(n){sO(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(iv),uO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$o=function(n){uO(t,n);function t(e,r,i){var a=n.call(this,e)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(iv),lO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hu=function(n){lO(t,n);function t(e,r,i){var a=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new ct;return a.firstDigit=r,a.secondDigit=i,a}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(iv),Nh=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cO=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,a,u,l,f,d;if(!t)return null;if(t.length<2)throw new et;var g=t.substring(0,2);try{for(var m=Nh(n.TWO_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){var x=y.value;if(x[0]===g)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],t):n.processFixedAI(2,x[1],t)}}catch(q){e={error:q}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}if(t.length<3)throw new et;var A=t.substring(0,3);try{for(var S=Nh(n.THREE_DIGIT_DATA_LENGTH),I=S.next();!I.done;I=S.next()){var x=I.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],t):n.processFixedAI(3,x[1],t)}}catch(q){i={error:q}}finally{try{I&&!I.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var M=Nh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),O=M.next();!O.done;O=M.next()){var x=O.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],t):n.processFixedAI(4,x[1],t)}}catch(q){u={error:q}}finally{try{O&&!O.done&&(l=M.return)&&l.call(M)}finally{if(u)throw u.error}}if(t.length<4)throw new et;var k=t.substring(0,4);try{for(var V=Nh(n.FOUR_DIGIT_DATA_LENGTH),H=V.next();!H.done;H=V.next()){var x=H.value;if(x[0]===k)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],t):n.processFixedAI(4,x[1],t)}}catch(q){f={error:q}}finally{try{H&&!H.done&&(d=V.return)&&d.call(V)}finally{if(f)throw f.error}}throw new et},n.processFixedAI=function(t,e,r){if(r.length<t)throw new et;var i=r.substring(0,t);if(r.length<t+e)throw new et;var a=r.substring(t,t+e),u=r.substring(t+e),l="("+i+")"+a,f=n.parseFieldsInGeneralPurpose(u);return f==null?l:l+f},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),a;r.length<t+e?a=r.length:a=t+e;var u=r.substring(t,a),l=r.substring(a),f="("+i+")"+u,d=n.parseFieldsInGeneralPurpose(l);return d==null?f:f+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Wh=function(){function n(t){this.buffer=new Nt,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var a=this.decodeGeneralPurposeField(r,i),u=cO.parseFieldsInGeneralPurpose(a.getNewString());if(u!=null&&t.append(u),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new hu(this.information.getSize(),hu.FNC1,hu.FNC1):new hu(this.information.getSize(),e-1,hu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,a=(r-8)%11;return new hu(t+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,a=0;a<r;++a)t.get(e+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new $o(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new $o(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new $o(this.current.getPosition(),this.buffer.toString()):e=new $o(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Qo(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new $o(this.current.getPosition(),this.buffer.toString());return new Qo(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Qo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new $o(this.current.getPosition(),this.buffer.toString());return new Qo(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Qo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new $o(this.current.getPosition(),this.buffer.toString());return new Qo(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Qo(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Vr(t+5,Vr.FNC1);if(e>=5&&e<15)return new Vr(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Vr(t+7,""+(r+1));if(r>=90&&r<116)return new Vr(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ct}return new Vr(t+8,a)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Vr(t+5,Vr.FNC1);if(e>=5&&e<15)return new Vr(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Vr(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Jc("Decoding invalid alphanumeric value: "+r)}return new Vr(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),bw=function(){function n(t){this.information=t,this.generalDecoder=new Wh(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),fO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fr=function(n){fO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var a=0;a<4;++a){var u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);u/100===0&&e.append("0"),u/10===0&&e.append("0"),e.append(u)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,a=0;a<13;a++){var u=e.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*u:u}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(bw),hO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dO=function(n){hO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Nt;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Fr),pO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gO=function(n){pO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Nt;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(bw),vO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yh=function(n){vO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,a);for(var u=this.checkWeight(a),l=1e5,f=0;f<5;++f)u/l===0&&e.append("0"),l/=10;e.append(u)},t}(Fr),mO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rw=function(n){mO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Yh.GTIN_SIZE+t.WEIGHT_SIZE)throw new et;var e=new Nt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+Yh.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Yh),yO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_O=function(n){yO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(Rw),xO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),EO=function(n){xO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(Rw),AO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wO=function(n){AO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Fr.GTIN_SIZE)throw new et;var e=new Nt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Fr.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Fr.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Fr),TO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SO=function(n){TO(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Fr.GTIN_SIZE)throw new et;var e=new Nt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Fr.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Fr.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Fr.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Fr),CO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Va=function(n){CO(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.dateCode=i,a.firstAIdigits=r,a}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new et;var e=new Nt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var a=i%32;i/=32;var u=i%12+1;i/=12;var l=i;l/10===0&&e.append("0"),e.append(l),u/10===0&&e.append("0"),e.append(u),a/10===0&&e.append("0"),e.append(a)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Yh);function IO(n){try{if(n.get(1))return new dO(n);if(!n.get(2))return new gO(n);var t=Wh.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new _O(n);case 5:return new EO(n)}var e=Wh.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new wO(n);case 13:return new SO(n)}var r=Wh.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Va(n,"310","11");case 57:return new Va(n,"320","11");case 58:return new Va(n,"310","13");case 59:return new Va(n,"320","13");case 60:return new Va(n,"310","15");case 61:return new Va(n,"320","15");case 62:return new Va(n,"310","17");case 63:return new Va(n,"320","17")}}catch(i){throw console.log(i),new Jc("unknown decoder: "+n)}}var vx=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),bO=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,a){e.forEach(function(u){i.getLeftChar().getValue()===u.getLeftChar().getValue()&&i.getRightChar().getValue()===u.getRightChar().getValue()&&i.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),RO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ua=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OO=function(n){RO(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(l){if(l instanceof et){if(!this.pairs.length)throw new et;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){var u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new et},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,a,u=r;u<this.rows.length;u++){var l=this.rows[u];this.pairs.length=0;try{for(var f=(i=void 0,Ua(e)),d=f.next();!d.done;d=f.next()){var g=d.value;this.pairs.push(g.getPairs())}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(e);m.push(l);try{return this.checkRows(m,u+1)}catch(y){console.log(y)}}}throw new et},t.isValidSequence=function(e){var r,i;try{for(var a=Ua(t.FINDER_PATTERN_SEQUENCES),u=a.next();!u.done;u=a.next()){var l=u.value;if(!(e.length>l.length)){for(var f=!0,d=0;d<e.length;d++)if(e[d].getFinderPattern().getValue()!==l[d]){f=!1;break}if(f)return!0}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,a=!1,u=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>e){u=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}u||a||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bO(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,a,u,l,f,d;try{for(var g=Ua(r),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.getPairs().length!==e.length){var x=!0;try{for(var A=(u=void 0,Ua(y.getPairs())),S=A.next();!S.done;S=A.next()){var I=S.value,M=!1;try{for(var O=(f=void 0,Ua(e)),k=O.next();!k.done;k=O.next()){var V=k.value;if(vx.equals(I,V)){M=!0;break}}}catch(H){f={error:H}}finally{try{k&&!k.done&&(d=O.return)&&d.call(O)}finally{if(f)throw f.error}}M||(x=!1)}}catch(H){u={error:H}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}}}}catch(H){i={error:H}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,a,u,l,f,d;try{for(var g=Ua(r),m=g.next();!m.done;m=g.next()){var y=m.value,x=!0;try{for(var A=(u=void 0,Ua(e)),S=A.next();!S.done;S=A.next()){var I=S.value,M=!1;try{for(var O=(f=void 0,Ua(y.getPairs())),k=O.next();!k.done;k=O.next()){var V=k.value;if(I.equals(V)){M=!0;break}}}catch(H){f={error:H}}finally{try{k&&!k.done&&(d=O.return)&&d.call(O)}finally{if(f)throw f.error}}if(!M){x=!1;break}}}catch(H){u={error:H}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}if(x)return!0}}catch(H){i={error:H}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=oO.buildBitArray(e),i=IO(r),a=i.parseInformation(),u=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],l[0],l[1]];return new kn(a,null,null,f,xt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),u=2,l=1;l<this.pairs.size();++l){var f=this.pairs.get(l);a+=f.getLeftChar().getChecksumPortion(),u++;var d=f.getRightChar();d!=null&&(a+=d.getChecksumPortion(),u++)}a%=211;var g=211*(u-4)+a;return g===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var u,l=!0,f=-1;do this.findNextPair(e,r,f),u=this.parseFoundFinderPattern(e,i,a),u===null?f=t.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);var d=this.decodeDataCharacter(e,u,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new et;var g;try{g=this.decodeDataCharacter(e,u,a,!1)}catch(m){g=null,console.log(m)}return new vx(d,g,u,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var u=e.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var f=r[r.length-1];l=f.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var g=!1;l<u&&(g=!e.get(l),!!g);)l++;for(var m=0,y=l,x=l;x<u;x++)if(e.get(x)!==g)a[m]++;else{if(m===3){if(d&&t.reverseCounters(a),t.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=x;return}d&&t.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,g=!g}throw new et},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var a=e[i];e[i]=e[r-i-1],e[r-i-1]=a}},t.prototype.parseFoundFinderPattern=function(e,r,i){var a,u,l;if(i){for(var f=this.startEnd[0]-1;f>=0&&!e.get(f);)f--;f++,a=this.startEnd[0]-f,u=f,l=this.startEnd[1]}else u=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var d=this.getDecodeFinderCounters();_e.arraycopy(d,0,d,1,d.length-1),d[0]=a;var g;try{g=this.parseFinderValue(d,t.FINDER_PATTERNS)}catch{return null}return new Iw(g,[u,l],u,l,r)},t.prototype.decodeDataCharacter=function(e,r,i,a){for(var u=this.getDataCharacterCounters(),l=0;l<u.length;l++)u[l]=0;if(a)t.recordPatternInReverse(e,r.getStartEnd()[0],u);else{t.recordPattern(e,r.getStartEnd()[1],u);for(var f=0,d=u.length-1;f<d;f++,d--){var g=u[f];u[f]=u[d],u[d]=g}}var m=17,y=Kt.sum(new Int32Array(u))/m,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new et;for(var A=this.getOddCounts(),S=this.getEvenCounts(),I=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors(),f=0;f<u.length;f++){var O=1*u[f]/y,k=O+.5;if(k<1){if(O<.3)throw new et;k=1}else if(k>8){if(O>8.7)throw new et;k=8}var V=f/2;(f&1)===0?(A[V]=k,I[V]=O-k):(S[V]=k,M[V]=O-k)}this.adjustOddEvenCounts(m);for(var H=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,N=0,f=A.length-1;f>=0;f--){if(t.isNotA1left(r,i,a)){var b=t.WEIGHTS[H][2*f];N+=A[f]*b}q+=A[f]}for(var P=0,f=S.length-1;f>=0;f--)if(t.isNotA1left(r,i,a)){var b=t.WEIGHTS[H][2*f+1];P+=S[f]*b}var B=N+P;if((q&1)!==0||q>13||q<4)throw new et;var F=(13-q)/2,z=t.SYMBOL_WIDEST[F],U=9-z,Ot=wu.getRSSvalue(A,z,!0),Ft=wu.getRSSvalue(S,U,!1),rt=t.EVEN_TOTAL_SUBSET[F],ft=t.GSUM[F],yt=Ot*rt+Ft+ft;return new pd(yt,B)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=Kt.sum(new Int32Array(this.getOddCounts())),i=Kt.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;r>13?u=!0:r<4&&(a=!0);var l=!1,f=!1;i>13?f=!0:i<4&&(l=!0);var d=r+i-e,g=(r&1)===1,m=(i&1)===0;if(d===1)if(g){if(m)throw new et;u=!0}else{if(!m)throw new et;f=!0}else if(d===-1)if(g){if(m)throw new et;a=!0}else{if(!m)throw new et;l=!0}else if(d===0){if(g){if(!m)throw new et;r<i?(a=!0,f=!0):(u=!0,l=!0)}else if(m)throw new et}else throw new et;if(a){if(u)throw new et;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new et;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Jo),DO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NO=function(n){DO(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.count=0,a.finderPattern=i,a}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(pd),MO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mx=function(n){MO(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var a,u,l,f,d=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,d),r.reverse();var g=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,g),r.reverse();try{for(var m=sp(this.possibleLeftPairs),y=m.next();!y.done;y=m.next()){var x=y.value;if(x.getCount()>1)try{for(var A=(l=void 0,sp(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var I=S.value;if(I.getCount()>1&&t.checkChecksum(x,I))return t.constructResult(x,I)}}catch(M){l={error:M}}finally{try{S&&!S.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}}}catch(M){a={error:M}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}throw new et},t.addOrTally=function(e,r){var i,a;if(r!=null){var u=!1;try{for(var l=sp(e),f=l.next();!f.done;f=l.next()){var d=f.value;if(d.getValue()===r.getValue()){d.incrementCount(),u=!0;break}}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}u||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),a=new String(i).toString(),u=new Nt,l=13-a.length;l>0;l--)u.append("0");u.append(a);for(var f=0,l=0;l<13;l++){var d=u.charAt(l).charCodeAt(0)-48;f+=(l&1)===0?3*d:d}f=10-f%10,f===10&&(f=0),u.append(f.toString());var g=e.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new kn(u.toString(),null,0,[g[0],g[1],m[0],m[1]],xt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},t.prototype.decodePair=function(e,r,i,a){try{var u=this.findFinderPattern(e,r),l=this.parseFoundFinderPattern(e,i,r,u),f=a==null?null:a.get(Se.NEED_RESULT_POINT_CALLBACK);if(f!=null){var d=(u[0]+u[1])/2;r&&(d=e.getSize()-1-d),f.foundPossibleResultPoint(new vt(d,i))}var g=this.decodeDataCharacter(e,l,!0),m=this.decodeDataCharacter(e,l,!1);return new NO(1597*g.getValue()+m.getValue(),g.getChecksumPortion()+4*m.getChecksumPortion(),l)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var a=this.getDataCharacterCounters(),u=0;u<a.length;u++)a[u]=0;if(i)nn.recordPatternInReverse(e,r.getStartEnd()[0],a);else{nn.recordPattern(e,r.getStartEnd()[1]+1,a);for(var l=0,f=a.length-1;l<f;l++,f--){var d=a[l];a[l]=a[f],a[f]=d}}for(var g=i?16:15,m=Kt.sum(new Int32Array(a))/g,y=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var I=a[l]/m,M=Math.floor(I+.5);M<1?M=1:M>8&&(M=8);var O=Math.floor(l/2);(l&1)===0?(y[O]=M,A[O]=I-M):(x[O]=M,S[O]=I-M)}this.adjustOddEvenCounts(i,g);for(var k=0,V=0,l=y.length-1;l>=0;l--)V*=9,V+=y[l],k+=y[l];for(var H=0,q=0,l=x.length-1;l>=0;l--)H*=9,H+=x[l],q+=x[l];var N=V+3*H;if(i){if((k&1)!==0||k>12||k<4)throw new et;var b=(12-k)/2,P=t.OUTSIDE_ODD_WIDEST[b],B=9-P,F=wu.getRSSvalue(y,P,!1),z=wu.getRSSvalue(x,B,!0),U=t.OUTSIDE_EVEN_TOTAL_SUBSET[b],Ot=t.OUTSIDE_GSUM[b];return new pd(F*U+z+Ot,N)}else{if((q&1)!==0||q>10||q<4)throw new et;var b=(10-q)/2,P=t.INSIDE_ODD_WIDEST[b],B=9-P,F=wu.getRSSvalue(y,P,!0),z=wu.getRSSvalue(x,B,!1),Ft=t.INSIDE_ODD_TOTAL_SUBSET[b],Ot=t.INSIDE_GSUM[b];return new pd(z*Ft+F+Ot,N)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),u=!1,l=0;l<a&&(u=!e.get(l),r!==u);)l++;for(var f=0,d=l,g=l;g<a;g++)if(e.get(g)!==u)i[f]++;else{if(f===3){if(Jo.isFinderPattern(i))return[d,g];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,u=!u}throw new et},t.prototype.parseFoundFinderPattern=function(e,r,i,a){for(var u=e.get(a[0]),l=a[0]-1;l>=0&&u!==e.get(l);)l--;l++;var f=a[0]-l,d=this.getDecodeFinderCounters(),g=new Int32Array(d.length);_e.arraycopy(d,0,g,1,d.length-1),g[0]=f;var m=this.parseFinderValue(g,t.FINDER_PATTERNS),y=l,x=a[1];return i&&(y=e.getSize()-1-y,x=e.getSize()-1-x),new Iw(m,[l,a[1]],y,x,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=Kt.sum(new Int32Array(this.getOddCounts())),a=Kt.sum(new Int32Array(this.getEvenCounts())),u=!1,l=!1,f=!1,d=!1;e?(i>12?l=!0:i<4&&(u=!0),a>12?d=!0:a<4&&(f=!0)):(i>11?l=!0:i<5&&(u=!0),a>10?d=!0:a<4&&(f=!0));var g=i+a-r,m=(i&1)===(e?1:0),y=(a&1)===1;if(g===1)if(m){if(y)throw new et;l=!0}else{if(!y)throw new et;d=!0}else if(g===-1)if(m){if(y)throw new et;u=!0}else{if(!y)throw new et;f=!0}else if(g===0){if(m){if(!y)throw new et;i<a?(u=!0,d=!0):(l=!0,f=!0)}else if(y)throw new et}else throw new et;if(u){if(l)throw new et;Jo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Jo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(d)throw new et;Jo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Jo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Jo),PO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gc=function(n){PO(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(Se.POSSIBLE_FORMATS):null,a=e&&e.get(Se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,u=e&&e.get(Se.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(xt.EAN_13)||i.includes(xt.UPC_A)||i.includes(xt.EAN_8)||i.includes(xt.UPC_E))&&r.readers.push(new op(e)),i.includes(xt.CODE_39)&&r.readers.push(new sx(a,u)),i.includes(xt.CODE_93)&&r.readers.push(new ux),i.includes(xt.CODE_128)&&r.readers.push(new ox),i.includes(xt.ITF)&&r.readers.push(new lx),i.includes(xt.CODABAR)&&r.readers.push(new nO),i.includes(xt.RSS_14)&&r.readers.push(new mx),i.includes(xt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new OO))),r.readers.length===0&&(r.readers.push(new op(e)),r.readers.push(new sx),r.readers.push(new ux),r.readers.push(new op(e)),r.readers.push(new ox),r.readers.push(new lx),r.readers.push(new mx)),r}return t.prototype.decodeRow=function(e,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,i)}catch{}throw new et},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(nn),LO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){LO(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new gc(r),e,r)||this}return t})(Wu);var yx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},te=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),$t=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),BO=function(){function n(t,e,r,i,a,u){var l,f;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=u;var d=0,g=u.getECCodewords(),m=u.getECBlocks();try{for(var y=yx(m),x=y.next();!x.done;x=y.next()){var A=x.value;d+=A.getCount()*(A.getDataCodewords()+g)}}catch(S){l={error:S}}finally{try{x&&!x.done&&(f=y.return)&&f.call(y)}finally{if(l)throw l.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new ct;try{for(var a=yx(n.VERSIONS),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.symbolSizeRows===t&&l.symbolSizeColumns===e)return l}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ct},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new te(5,new $t(1,3))),new n(2,12,12,10,10,new te(7,new $t(1,5))),new n(3,14,14,12,12,new te(10,new $t(1,8))),new n(4,16,16,14,14,new te(12,new $t(1,12))),new n(5,18,18,16,16,new te(14,new $t(1,18))),new n(6,20,20,18,18,new te(18,new $t(1,22))),new n(7,22,22,20,20,new te(20,new $t(1,30))),new n(8,24,24,22,22,new te(24,new $t(1,36))),new n(9,26,26,24,24,new te(28,new $t(1,44))),new n(10,32,32,14,14,new te(36,new $t(1,62))),new n(11,36,36,16,16,new te(42,new $t(1,86))),new n(12,40,40,18,18,new te(48,new $t(1,114))),new n(13,44,44,20,20,new te(56,new $t(1,144))),new n(14,48,48,22,22,new te(68,new $t(1,174))),new n(15,52,52,24,24,new te(42,new $t(2,102))),new n(16,64,64,14,14,new te(56,new $t(2,140))),new n(17,72,72,16,16,new te(36,new $t(4,92))),new n(18,80,80,18,18,new te(48,new $t(4,114))),new n(19,88,88,20,20,new te(56,new $t(4,144))),new n(20,96,96,22,22,new te(68,new $t(4,174))),new n(21,104,104,24,24,new te(56,new $t(6,136))),new n(22,120,120,18,18,new te(68,new $t(6,175))),new n(23,132,132,20,20,new te(62,new $t(8,163))),new n(24,144,144,22,22,new te(62,new $t(8,156),new $t(2,155))),new n(25,8,18,6,16,new te(7,new $t(1,5))),new n(26,8,32,6,14,new te(11,new $t(1,10))),new n(27,12,26,10,24,new te(14,new $t(1,16))),new n(28,12,36,10,16,new te(18,new $t(1,22))),new n(29,16,36,14,16,new te(24,new $t(1,32))),new n(30,16,48,14,22,new te(28,new $t(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),kO=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new ct;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new _i(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return BO.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth(),l=!1,f=!1,d=!1,g=!1;do if(r===a&&i===0&&!l)t[e++]=this.readCorner1(a,u)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(u&3)!==0&&!f)t[e++]=this.readCorner2(a,u)&255,r-=2,i+=2,f=!0;else if(r===a+4&&i===2&&(u&7)===0&&!d)t[e++]=this.readCorner3(a,u)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(u&7)===4&&!g)t[e++]=this.readCorner4(a,u)&255,r-=2,i+=2,g=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,u)&255),r-=2,i+=2;while(r>=0&&i<u);r+=1,i+=3;do r>=0&&i<u&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,u)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<u);if(e!==this.version.getTotalCodewords())throw new ct;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var a=0;return this.readModule(t-2,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-2,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e,r,i)&&(a|=1),a<<=1,this.readModule(t,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t,e,r,i)&&(a|=1),a},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new Et("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),u=e/i|0,l=r/a|0,f=u*i,d=l*a,g=new _i(d,f),m=0;m<u;++m)for(var y=m*i,x=0;x<l;++x)for(var A=x*a,S=0;S<i;++S)for(var I=m*(i+2)+1+S,M=y+S,O=0;O<a;++O){var k=x*(a+2)+1+O;if(t.get(k,I)){var V=A+O;g.set(V,M)}}return g},n}(),_x=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VO=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,a,u,l=e.getECBlocks(),f=0,d=l.getECBlocks();try{for(var g=_x(d),m=g.next();!m.done;m=g.next()){var y=m.value;f+=y.getCount()}}catch(Ot){r={error:Ot}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var x=new Array(f),A=0;try{for(var S=_x(d),I=S.next();!I.done;I=S.next())for(var y=I.value,M=0;M<y.getCount();M++){var O=y.getDataCodewords(),k=l.getECCodewords()+O;x[A++]=new n(O,new Uint8Array(k))}}catch(Ot){a={error:Ot}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}for(var V=x[0].codewords.length,H=V-l.getECCodewords(),q=H-1,N=0,M=0;M<q;M++)for(var b=0;b<A;b++)x[b].codewords[M]=t[N++];for(var P=e.getVersionNumber()===24,B=P?8:A,b=0;b<B;b++)x[b].codewords[H-1]=t[N++];for(var F=x[0].codewords.length,M=H;M<F;M++)for(var b=0;b<A;b++){var z=P?(b+8)%A:b,U=P&&z>7?M-1:M;x[z].codewords[U]=t[N++]}if(N!==t.length)throw new Et;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Ow=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new Et(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var u=8-r,l=t<u?t:u,f=u-l,d=255>>8-l<<f;e=(a[i]&d)>>f,t-=l,r+=l,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|a[i]&255,i++,t-=8;if(t>0){var f=8-t,d=255>>f<<f;e=e<<t|(a[i]&d)>>f,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Qe;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qe||(Qe={}));var UO=function(){function n(){}return n.decode=function(t){var e=new Ow(t),r=new Nt,i=new Nt,a=new Array,u=Qe.ASCII_ENCODE;do if(u===Qe.ASCII_ENCODE)u=this.decodeAsciiSegment(e,r,i);else{switch(u){case Qe.C40_ENCODE:this.decodeC40Segment(e,r);break;case Qe.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case Qe.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case Qe.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case Qe.BASE256_ENCODE:this.decodeBase256Segment(e,r,a);break;default:throw new ct}u=Qe.ASCII_ENCODE}while(u!==Qe.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new jd(t,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var a=t.readBits(8);if(a===0)throw new ct;if(a<=128)return i&&(a+=128),e.append(String.fromCharCode(a-1)),Qe.ASCII_ENCODE;if(a===129)return Qe.PAD_ENCODE;if(a<=229){var u=a-130;u<10&&e.append("0"),e.append(""+u)}else switch(a){case 230:return Qe.C40_ENCODE;case 231:return Qe.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return Qe.ANSIX12_ENCODE;case 239:return Qe.TEXT_ENCODE;case 240:return Qe.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new ct;break}}while(t.available()>0);return Qe.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[f];r?(e.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):e.append(d)}else throw new ct;break;case 1:r?(e.append(String.fromCharCode(f+128)),r=!1):e.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[f];r?(e.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):e.append(d)}else switch(f){case 27:e.append("");break;case 30:r=!0;break;default:throw new ct}a=0;break;case 3:r?(e.append(String.fromCharCode(f+224)),r=!1):e.append(String.fromCharCode(f+96)),a=0;break;default:throw new ct}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[f];r?(e.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):e.append(d)}else throw new ct;break;case 1:r?(e.append(String.fromCharCode(f+128)),r=!1):e.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[f];r?(e.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):e.append(d)}else switch(f){case 27:e.append("");break;case 30:r=!0;break;default:throw new ct}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[f];r?(e.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):e.append(d),a=0}else throw new ct;break;default:throw new ct}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var a=0;a<3;a++){var u=r[a];switch(u){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(u<14)e.append(String.fromCharCode(u+44));else if(u<40)e.append(String.fromCharCode(u+51));else throw new ct;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var a=8-t.getBitOffset();a!==8&&t.readBits(a);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),a=this.unrandomize255State(t.readBits(8),i++),u;if(a===0?u=t.available()/8|0:a<250?u=a:u=250*(a-249)+this.unrandomize255State(t.readBits(8),i++),u<0)throw new ct;for(var l=new Uint8Array(u),f=0;f<u;f++){if(t.available()<8)throw new ct;l[f]=this.unrandomize255State(t.readBits(8),i++)}r.push(l);try{e.append(Rr.decode(l,qt.ISO88591))}catch(d){throw new Jc("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),FO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jO=function(){function n(){this.rsDecoder=new zd($n.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new kO(t),a=i.getVersion(),u=i.readCodewords(),l=VO.getDataBlocks(u,a),f=0;try{for(var d=FO(l),g=d.next();!g.done;g=d.next()){var m=g.value;f+=m.getNumDataCodewords()}}catch(k){e={error:k}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}for(var y=new Uint8Array(f),x=l.length,A=0;A<x;A++){var S=l[A],I=S.getCodewords(),M=S.getNumDataCodewords();this.correctErrors(I,M);for(var O=0;O<M;O++)y[O*x+A]=I[O]}return UO.decode(y)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new dn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),zO=function(){function n(t){this.image=t,this.rectangleDetector=new Xp(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new et;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],a=e[2],u=e[3],l=this.transitionsBetween(r,u)+1,f=this.transitionsBetween(a,u)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));var d=n.sampleGrid(this.image,r,i,a,u,l,f);return new nv(d,[r,i,a,u])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),a=(e.getY()-t.getY())/(r+1);return new vt(t.getX()+i,t.getY()+a)},n.moveAway=function(t,e,r){var i=t.getX(),a=t.getY();return i<e?i-=1:i+=1,a<r?a-=1:a+=1,new vt(i,a)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],a=t[2],u=this.transitionsBetween(e,r),l=this.transitionsBetween(r,i),f=this.transitionsBetween(i,a),d=this.transitionsBetween(a,e),g=u,m=[a,e,r,i];return g>l&&(g=l,m[0]=e,m[1]=r,m[2]=i,m[3]=a),g>f&&(g=f,m[0]=r,m[1]=i,m[2]=a,m[3]=e),g>d&&(m[0]=i,m[1]=a,m[2]=e,m[3]=r),m},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],u=this.transitionsBetween(e,a),l=n.shiftPoint(r,i,(u+1)*4),f=n.shiftPoint(i,r,(u+1)*4),d=this.transitionsBetween(l,e),g=this.transitionsBetween(f,a);return d<g?(t[0]=e,t[1]=r,t[2]=i,t[3]=a):(t[0]=r,t[1]=i,t[2]=a,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],u=this.transitionsBetween(e,a),l=this.transitionsBetween(r,a),f=n.shiftPoint(e,r,(l+1)*4),d=n.shiftPoint(i,r,(u+1)*4);u=this.transitionsBetween(f,a),l=this.transitionsBetween(d,a);var g=new vt(a.getX()+(i.getX()-r.getX())/(u+1),a.getY()+(i.getY()-r.getY())/(u+1)),m=new vt(a.getX()+(e.getX()-r.getX())/(l+1),a.getY()+(e.getY()-r.getY())/(l+1));if(!this.isValid(g))return this.isValid(m)?m:null;if(!this.isValid(m))return g;var y=this.transitionsBetween(f,g)+this.transitionsBetween(d,g),x=this.transitionsBetween(f,m)+this.transitionsBetween(d,m);return y>x?g:m},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],u=this.transitionsBetween(e,a)+1,l=this.transitionsBetween(i,a)+1,f=n.shiftPoint(e,r,l*4),d=n.shiftPoint(i,r,u*4);u=this.transitionsBetween(f,a)+1,l=this.transitionsBetween(d,a)+1,(u&1)===1&&(u+=1),(l&1)===1&&(l+=1);var g=(e.getX()+r.getX()+i.getX()+a.getX())/4,m=(e.getY()+r.getY()+i.getY()+a.getY())/4;e=n.moveAway(e,g,m),r=n.moveAway(r,g,m),i=n.moveAway(i,g,m),a=n.moveAway(a,g,m);var y,x;return f=n.shiftPoint(e,r,l*4),f=n.shiftPoint(f,a,u*4),y=n.shiftPoint(r,e,l*4),y=n.shiftPoint(y,i,u*4),d=n.shiftPoint(i,a,l*4),d=n.shiftPoint(d,r,u*4),x=n.shiftPoint(a,i,l*4),x=n.shiftPoint(x,e,u*4),[f,y,d,x]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,a,u,l){var f=rv.getInstance();return f.sampleGrid(t,u,l,.5,.5,u-.5,.5,u-.5,l-.5,.5,l-.5,e.getX(),e.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.trunc(e.getX()),u=Math.trunc(e.getY()),l=Math.abs(u-i)>Math.abs(a-r);if(l){var f=r;r=i,i=f,f=a,a=u,u=f}for(var d=Math.abs(a-r),g=Math.abs(u-i),m=-d/2,y=i<u?1:-1,x=r<a?1:-1,A=0,S=this.image.get(l?i:r,l?r:i),I=r,M=i;I!==a;I+=x){var O=this.image.get(l?M:I,l?I:M);if(O!==S&&(A++,S=O),m+=g,m>0){if(M===u)break;M+=y,m-=d}}return A},n}(),Kp=function(){function n(){this.decoder=new jO}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(Se.PURE_BARCODE)){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var u=new zO(t.getBlackMatrix()).detect();r=this.decoder.decode(u.getBits()),i=u.getPoints()}var l=r.getRawBytes(),f=new kn(r.getText(),l,8*l.length,i,xt.DATA_MATRIX,_e.currentTimeMillis()),d=r.getByteSegments();d!=null&&f.putMetadata(Sn.BYTE_SEGMENTS,d);var g=r.getECLevel();return g!=null&&f.putMetadata(Sn.ERROR_CORRECTION_LEVEL,g),f},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new et;var i=this.moduleSize(e,t),a=e[1],u=r[1],l=e[0],f=r[0],d=(f-l+1)/i,g=(u-a+1)/i;if(d<=0||g<=0)throw new et;var m=i/2;a+=m,l+=m;for(var y=new _i(d,g),x=0;x<g;x++)for(var A=a+x*i,S=0;S<d;S++)t.get(l+S*i,A)&&y.set(S,x);return y},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],a=t[1];i<r&&e.get(i,a);)i++;if(i===r)throw new et;var u=i-t[0];if(u===0)throw new et;return u},n.NO_POINTS=[],n}(),HO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){HO(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Kp,e)||this}return t})(Wu);var Tu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Tu||(Tu={}));var GO=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ur(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new Et;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Tu.L,"L",1),n.M=new n(Tu.M,"M",0),n.Q=new n(Tu.Q,"Q",3),n.H=new n(Tu.H,"H",2),n}(),qO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dw=function(){function n(t){this.errorCorrectionLevel=GO.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return Lt.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,a=Number.MAX_SAFE_INTEGER,u=0;try{for(var l=qO(n.FORMAT_INFO_DECODE_LOOKUP),f=l.next();!f.done;f=l.next()){var d=f.value,g=d[0];if(g===t||g===e)return new n(d[1]);var m=n.numBitsDiffering(t,g);m<a&&(u=d[1],a=m),t!==e&&(m=n.numBitsDiffering(e,g),m<a&&(u=d[1],a=m))}}catch(y){r={error:y}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(u):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),XO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var a=XO(i),u=a.next();!u.done;u=a.next()){var l=u.value;r+=l.getCount()}}catch(f){t={error:f}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),L=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),WO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rs=function(){function n(t,e){for(var r,i,a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=a;var l=0,f=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var g=WO(d),m=g.next();!m.done;m=g.next()){var y=m.value;l+=y.getCount()*(y.getDataCodewords()+f)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new ct;try{return this.getVersionForNumber((t-17)/4)}catch{throw new ct}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new Et;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===t)return n.getVersionForNumber(i+7);var u=Dw.numBitsDiffering(t,a);u<e&&(r=i+7,e=u)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new _i(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,u=0;u<r;u++)i===0&&(u===0||u===r-1)||i===r-1&&u===0||e.setRegion(this.alignmentPatternCenters[u]-2,a,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Q(7,new L(1,19)),new Q(10,new L(1,16)),new Q(13,new L(1,13)),new Q(17,new L(1,9))),new n(2,Int32Array.from([6,18]),new Q(10,new L(1,34)),new Q(16,new L(1,28)),new Q(22,new L(1,22)),new Q(28,new L(1,16))),new n(3,Int32Array.from([6,22]),new Q(15,new L(1,55)),new Q(26,new L(1,44)),new Q(18,new L(2,17)),new Q(22,new L(2,13))),new n(4,Int32Array.from([6,26]),new Q(20,new L(1,80)),new Q(18,new L(2,32)),new Q(26,new L(2,24)),new Q(16,new L(4,9))),new n(5,Int32Array.from([6,30]),new Q(26,new L(1,108)),new Q(24,new L(2,43)),new Q(18,new L(2,15),new L(2,16)),new Q(22,new L(2,11),new L(2,12))),new n(6,Int32Array.from([6,34]),new Q(18,new L(2,68)),new Q(16,new L(4,27)),new Q(24,new L(4,19)),new Q(28,new L(4,15))),new n(7,Int32Array.from([6,22,38]),new Q(20,new L(2,78)),new Q(18,new L(4,31)),new Q(18,new L(2,14),new L(4,15)),new Q(26,new L(4,13),new L(1,14))),new n(8,Int32Array.from([6,24,42]),new Q(24,new L(2,97)),new Q(22,new L(2,38),new L(2,39)),new Q(22,new L(4,18),new L(2,19)),new Q(26,new L(4,14),new L(2,15))),new n(9,Int32Array.from([6,26,46]),new Q(30,new L(2,116)),new Q(22,new L(3,36),new L(2,37)),new Q(20,new L(4,16),new L(4,17)),new Q(24,new L(4,12),new L(4,13))),new n(10,Int32Array.from([6,28,50]),new Q(18,new L(2,68),new L(2,69)),new Q(26,new L(4,43),new L(1,44)),new Q(24,new L(6,19),new L(2,20)),new Q(28,new L(6,15),new L(2,16))),new n(11,Int32Array.from([6,30,54]),new Q(20,new L(4,81)),new Q(30,new L(1,50),new L(4,51)),new Q(28,new L(4,22),new L(4,23)),new Q(24,new L(3,12),new L(8,13))),new n(12,Int32Array.from([6,32,58]),new Q(24,new L(2,92),new L(2,93)),new Q(22,new L(6,36),new L(2,37)),new Q(26,new L(4,20),new L(6,21)),new Q(28,new L(7,14),new L(4,15))),new n(13,Int32Array.from([6,34,62]),new Q(26,new L(4,107)),new Q(22,new L(8,37),new L(1,38)),new Q(24,new L(8,20),new L(4,21)),new Q(22,new L(12,11),new L(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Q(30,new L(3,115),new L(1,116)),new Q(24,new L(4,40),new L(5,41)),new Q(20,new L(11,16),new L(5,17)),new Q(24,new L(11,12),new L(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Q(22,new L(5,87),new L(1,88)),new Q(24,new L(5,41),new L(5,42)),new Q(30,new L(5,24),new L(7,25)),new Q(24,new L(11,12),new L(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Q(24,new L(5,98),new L(1,99)),new Q(28,new L(7,45),new L(3,46)),new Q(24,new L(15,19),new L(2,20)),new Q(30,new L(3,15),new L(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Q(28,new L(1,107),new L(5,108)),new Q(28,new L(10,46),new L(1,47)),new Q(28,new L(1,22),new L(15,23)),new Q(28,new L(2,14),new L(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Q(30,new L(5,120),new L(1,121)),new Q(26,new L(9,43),new L(4,44)),new Q(28,new L(17,22),new L(1,23)),new Q(28,new L(2,14),new L(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Q(28,new L(3,113),new L(4,114)),new Q(26,new L(3,44),new L(11,45)),new Q(26,new L(17,21),new L(4,22)),new Q(26,new L(9,13),new L(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Q(28,new L(3,107),new L(5,108)),new Q(26,new L(3,41),new L(13,42)),new Q(30,new L(15,24),new L(5,25)),new Q(28,new L(15,15),new L(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Q(28,new L(4,116),new L(4,117)),new Q(26,new L(17,42)),new Q(28,new L(17,22),new L(6,23)),new Q(30,new L(19,16),new L(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Q(28,new L(2,111),new L(7,112)),new Q(28,new L(17,46)),new Q(30,new L(7,24),new L(16,25)),new Q(24,new L(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Q(30,new L(4,121),new L(5,122)),new Q(28,new L(4,47),new L(14,48)),new Q(30,new L(11,24),new L(14,25)),new Q(30,new L(16,15),new L(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Q(30,new L(6,117),new L(4,118)),new Q(28,new L(6,45),new L(14,46)),new Q(30,new L(11,24),new L(16,25)),new Q(30,new L(30,16),new L(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Q(26,new L(8,106),new L(4,107)),new Q(28,new L(8,47),new L(13,48)),new Q(30,new L(7,24),new L(22,25)),new Q(30,new L(22,15),new L(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Q(28,new L(10,114),new L(2,115)),new Q(28,new L(19,46),new L(4,47)),new Q(28,new L(28,22),new L(6,23)),new Q(30,new L(33,16),new L(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Q(30,new L(8,122),new L(4,123)),new Q(28,new L(22,45),new L(3,46)),new Q(30,new L(8,23),new L(26,24)),new Q(30,new L(12,15),new L(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new L(3,117),new L(10,118)),new Q(28,new L(3,45),new L(23,46)),new Q(30,new L(4,24),new L(31,25)),new Q(30,new L(11,15),new L(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new L(7,116),new L(7,117)),new Q(28,new L(21,45),new L(7,46)),new Q(30,new L(1,23),new L(37,24)),new Q(30,new L(19,15),new L(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new L(5,115),new L(10,116)),new Q(28,new L(19,47),new L(10,48)),new Q(30,new L(15,24),new L(25,25)),new Q(30,new L(23,15),new L(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new L(13,115),new L(3,116)),new Q(28,new L(2,46),new L(29,47)),new Q(30,new L(42,24),new L(1,25)),new Q(30,new L(23,15),new L(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new L(17,115)),new Q(28,new L(10,46),new L(23,47)),new Q(30,new L(10,24),new L(35,25)),new Q(30,new L(19,15),new L(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new L(17,115),new L(1,116)),new Q(28,new L(14,46),new L(21,47)),new Q(30,new L(29,24),new L(19,25)),new Q(30,new L(11,15),new L(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new L(13,115),new L(6,116)),new Q(28,new L(14,46),new L(23,47)),new Q(30,new L(44,24),new L(7,25)),new Q(30,new L(59,16),new L(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new L(12,121),new L(7,122)),new Q(28,new L(12,47),new L(26,48)),new Q(30,new L(39,24),new L(14,25)),new Q(30,new L(22,15),new L(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new L(6,121),new L(14,122)),new Q(28,new L(6,47),new L(34,48)),new Q(30,new L(46,24),new L(10,25)),new Q(30,new L(2,15),new L(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new L(17,122),new L(4,123)),new Q(28,new L(29,46),new L(14,47)),new Q(30,new L(49,24),new L(10,25)),new Q(30,new L(24,15),new L(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new L(4,122),new L(18,123)),new Q(28,new L(13,46),new L(32,47)),new Q(30,new L(48,24),new L(14,25)),new Q(30,new L(42,15),new L(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new L(20,117),new L(4,118)),new Q(28,new L(40,47),new L(7,48)),new Q(30,new L(43,24),new L(22,25)),new Q(30,new L(10,15),new L(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new L(19,118),new L(6,119)),new Q(28,new L(18,47),new L(31,48)),new Q(30,new L(34,24),new L(34,25)),new Q(30,new L(20,15),new L(61,16)))],n}(),cn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(cn||(cn={}));var xx=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[cn.DATA_MASK_000,new n(cn.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[cn.DATA_MASK_001,new n(cn.DATA_MASK_001,function(t,e){return(t&1)===0})],[cn.DATA_MASK_010,new n(cn.DATA_MASK_010,function(t,e){return e%3===0})],[cn.DATA_MASK_011,new n(cn.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[cn.DATA_MASK_100,new n(cn.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[cn.DATA_MASK_101,new n(cn.DATA_MASK_101,function(t,e){return t*e%6===0})],[cn.DATA_MASK_110,new n(cn.DATA_MASK_110,function(t,e){return t*e%6<3})],[cn.DATA_MASK_111,new n(cn.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),YO=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new ct;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),a=0,u=i-7,r=i-1;r>=u;r--)a=this.copyBit(8,r,a);for(var e=i-8;e<i;e++)a=this.copyBit(e,8,a);if(this.parsedFormatInfo=Dw.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ct},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return rs.getVersionForNumber(e);for(var r=0,i=t-11,a=5;a>=0;a--)for(var u=t-9;u>=i;u--)r=this.copyBit(u,a,r);var l=rs.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;r=0;for(var u=5;u>=0;u--)for(var a=t-9;a>=i;a--)r=this.copyBit(u,a,r);if(l=rs.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new ct},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=xx.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=e.buildFunctionPattern(),u=!0,l=new Uint8Array(e.getTotalCodewords()),f=0,d=0,g=0,m=i-1;m>0;m-=2){m===6&&m--;for(var y=0;y<i;y++)for(var x=u?i-1-y:y,A=0;A<2;A++)a.get(m-A,x)||(g++,d<<=1,this.bitMatrix.get(m-A,x)&&(d|=1),g===8&&(l[f++]=d,g=0,d=0));u=!u}if(f!==e.getTotalCodewords())throw new ct;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=xx.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,a=t.getHeight();i<a;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),Ex=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KO=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,a,u,l;if(t.length!==e.getTotalCodewords())throw new Et;var f=e.getECBlocksForLevel(r),d=0,g=f.getECBlocks();try{for(var m=Ex(g),y=m.next();!y.done;y=m.next()){var x=y.value;d+=x.getCount()}}catch(U){i={error:U}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var A=new Array(d),S=0;try{for(var I=Ex(g),M=I.next();!M.done;M=I.next())for(var x=M.value,O=0;O<x.getCount();O++){var k=x.getDataCodewords(),V=f.getECCodewordsPerBlock()+k;A[S++]=new n(k,new Uint8Array(V))}}catch(U){u={error:U}}finally{try{M&&!M.done&&(l=I.return)&&l.call(I)}finally{if(u)throw u.error}}for(var H=A[0].codewords.length,q=A.length-1;q>=0;){var N=A[q].codewords.length;if(N===H)break;q--}q++;for(var b=H-f.getECCodewordsPerBlock(),P=0,O=0;O<b;O++)for(var B=0;B<S;B++)A[B].codewords[O]=t[P++];for(var B=q;B<S;B++)A[B].codewords[b]=t[P++];for(var F=A[0].codewords.length,O=b;O<F;O++)for(var B=0;B<S;B++){var z=B<q?O:O+1;A[B].codewords[z]=t[P++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),wr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(wr||(wr={}));var Ee=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new Et;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(wr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),QO=function(){function n(){}return n.decode=function(t,e,r,i){var a=new Ow(t),u=new Nt,l=new Array,f=-1,d=-1;try{var g=null,m=!1,y=void 0;do{if(a.available()<4)y=Ee.TERMINATOR;else{var x=a.readBits(4);y=Ee.forBits(x)}switch(y){case Ee.TERMINATOR:break;case Ee.FNC1_FIRST_POSITION:case Ee.FNC1_SECOND_POSITION:m=!0;break;case Ee.STRUCTURED_APPEND:if(a.available()<16)throw new ct;f=a.readBits(8),d=a.readBits(8);break;case Ee.ECI:var A=n.parseECIValue(a);if(g=Je.getCharacterSetECIByValue(A),g===null)throw new ct;break;case Ee.HANZI:var S=a.readBits(4),I=a.readBits(y.getCharacterCountBits(e));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,u,I);break;default:var M=a.readBits(y.getCharacterCountBits(e));switch(y){case Ee.NUMERIC:n.decodeNumericSegment(a,u,M);break;case Ee.ALPHANUMERIC:n.decodeAlphanumericSegment(a,u,M,m);break;case Ee.BYTE:n.decodeByteSegment(a,u,M,g,l,i);break;case Ee.KANJI:n.decodeKanjiSegment(a,u,M);break;default:throw new ct}break}}while(y!==Ee.TERMINATOR)}catch{throw new ct}return new jd(t,u.toString(),l.length===0?null:l,r===null?null:r.toString(),f,d)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new ct;for(var i=new Uint8Array(2*r),a=0;r>0;){var u=t.readBits(13),l=u/96<<8&4294967295|u%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{e.append(Rr.decode(i,qt.GB2312))}catch(f){throw new ct(f)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new ct;for(var i=new Uint8Array(2*r),a=0;r>0;){var u=t.readBits(13),l=u/192<<8&4294967295|u%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{e.append(Rr.decode(i,qt.SHIFT_JIS))}catch(f){throw new ct(f)}},n.decodeByteSegment=function(t,e,r,i,a,u){if(8*r>t.available())throw new ct;for(var l=new Uint8Array(r),f=0;f<r;f++)l[f]=t.readBits(8);var d;i===null?d=qt.guessEncoding(l,u):d=i.getName();try{e.append(Rr.decode(l,d))}catch(g){throw new ct(g)}a.push(l)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new ct;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var a=e.length();r>1;){if(t.available()<11)throw new ct;var u=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(u/45))),e.append(n.toAlphaNumericChar(u%45)),r-=2}if(r===1){if(t.available()<6)throw new ct;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var l=a;l<e.length();l++)e.charAt(l)==="%"&&(l<e.length()-1&&e.charAt(l+1)==="%"?e.deleteCharAt(l+1):e.setCharAt(l,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new ct;var i=t.readBits(10);if(i>=1e3)throw new ct;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new ct;var a=t.readBits(7);if(a>=100)throw new ct;e.append(n.toAlphaNumericChar(Math.floor(a/10))),e.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(t.available()<4)throw new ct;var u=t.readBits(4);if(u>=10)throw new ct;e.append(n.toAlphaNumericChar(u))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new ct},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Nw=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),Ax=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$O=function(){function n(){this.rsDecoder=new zd($n.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(_i.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new YO(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(u){i=u}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,e);return a.setOther(new Nw(!0)),a}catch(u){throw i!==null?i:u}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,a,u,l=t.readVersion(),f=t.readFormatInformation().getErrorCorrectionLevel(),d=t.readCodewords(),g=KO.getDataBlocks(d,l,f),m=0;try{for(var y=Ax(g),x=y.next();!x.done;x=y.next()){var A=x.value;m+=A.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var S=new Uint8Array(m),I=0;try{for(var M=Ax(g),O=M.next();!O.done;O=M.next()){var A=O.value,k=A.getCodewords(),V=A.getNumDataCodewords();this.correctErrors(k,V);for(var H=0;H<V;H++)S[I++]=k[H]}}catch(q){a={error:q}}finally{try{O&&!O.done&&(u=M.return)&&u.call(M)}finally{if(a)throw a.error}}return QO.decode(S,l,f,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new dn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),ZO=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JO=function(n){ZO(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=(this.getX()+r)/2,u=(this.getY()+e)/2,l=(this.estimatedModuleSize+i)/2;return new t(a,u,l)},t}(vt),tD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eD=function(){function n(t,e,r,i,a,u,l){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=a,this.moduleSize=u,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,a=this.startY+e/2,u=new Int32Array(3),l=this.image,f=0;f<e;f++){var d=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));u[0]=0,u[1]=0,u[2]=0;for(var g=t;g<i&&!l.get(g,d);)g++;for(var m=0;g<i;){if(l.get(g,d))if(m===1)u[1]++;else if(m===2){if(this.foundPatternCross(u)){var y=this.handlePossibleCenter(u,d,g);if(y!==null)return y}u[0]=u[2],u[1]=1,u[2]=0,m=1}else u[++m]++;else m===1&&m++,u[m]++;g++}if(this.foundPatternCross(u)){var y=this.handlePossibleCenter(u,d,i);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new et},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var a=this.image,u=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var f=t;f>=0&&a.get(e,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&!a.get(e,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=t+1;f<u&&a.get(e,f)&&l[1]<=r;)l[1]++,f++;if(f===u||l[1]>r)return NaN;for(;f<u&&!a.get(e,f)&&l[2]<=r;)l[2]++,f++;if(l[2]>r)return NaN;var d=l[0]+l[1]+l[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,a,u=t[0]+t[1]+t[2],l=n.centerFromEnd(t,r),f=this.crossCheckVertical(e,l,2*t[1],u);if(!isNaN(f)){var d=(t[0]+t[1]+t[2])/3;try{for(var g=tD(this.possibleCenters),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.aboutEquals(d,f,l))return y.combineEstimate(f,l,d)}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var x=new JO(l,f,d);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n}(),nD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rD=function(n){nD(t,n);function t(e,r,i,a){var u=n.call(this,e,r)||this;return u.estimatedModuleSize=i,u.count=a,a===void 0&&(u.count=1),u}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=this.count+1,u=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+e)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new t(u,l,f,a)},t}(vt),iD=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),ac=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},aD=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(Se.TRY_HARDER)!==void 0,r=t!=null&&t.get(Se.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),u=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||e)&&(l=n.MIN_SKIP);for(var f=!1,d=new Int32Array(5),g=l-1;g<a&&!f;g+=l){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var m=0,y=0;y<u;y++)if(i.get(y,g))(m&1)===1&&m++,d[m]++;else if((m&1)===0)if(m===4)if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,g,y,r);if(x===!0)if(l=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>d[2]&&(g+=A-d[2]-l,y=u-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,m=3;continue}m=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,m=3;else d[++m]++;else d[m]++;if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,g,u,r);x===!0&&(l=d[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return vt.orderBestPatterns(S),new iD(S)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var a=e/7,u=a/2;return Math.abs(a-t[0])<u&&Math.abs(a-t[1])<u&&Math.abs(3*a-t[2])<3*u&&Math.abs(a-t[3])<u&&Math.abs(a-t[4])<u},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var a=this.getCrossCheckStateCount(),u=0,l=this.image;t>=u&&e>=u&&l.get(e-u,t-u);)a[2]++,u++;if(t<u||e<u)return!1;for(;t>=u&&e>=u&&!l.get(e-u,t-u)&&a[1]<=r;)a[1]++,u++;if(t<u||e<u||a[1]>r)return!1;for(;t>=u&&e>=u&&l.get(e-u,t-u)&&a[0]<=r;)a[0]++,u++;if(a[0]>r)return!1;var f=l.getHeight(),d=l.getWidth();for(u=1;t+u<f&&e+u<d&&l.get(e+u,t+u);)a[2]++,u++;if(t+u>=f||e+u>=d)return!1;for(;t+u<f&&e+u<d&&!l.get(e+u,t+u)&&a[3]<r;)a[3]++,u++;if(t+u>=f||e+u>=d||a[3]>=r)return!1;for(;t+u<f&&e+u<d&&l.get(e+u,t+u)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return!1;var g=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(g-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var a=this.image,u=a.getHeight(),l=this.getCrossCheckStateCount(),f=t;f>=0&&a.get(e,f);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(e,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(e,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=t+1;f<u&&a.get(e,f);)l[2]++,f++;if(f===u)return NaN;for(;f<u&&!a.get(e,f)&&l[3]<r;)l[3]++,f++;if(f===u||l[3]>=r)return NaN;for(;f<u&&a.get(e,f)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var a=this.image,u=a.getWidth(),l=this.getCrossCheckStateCount(),f=t;f>=0&&a.get(f,e);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,e)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(f,e)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=t+1;f<u&&a.get(f,e);)l[2]++,f++;if(f===u)return NaN;for(;f<u&&!a.get(f,e)&&l[3]<r;)l[3]++,f++;if(f===u||l[3]>=r)return NaN;for(;f<u&&a.get(f,e)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var a=t[0]+t[1]+t[2]+t[3]+t[4],u=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,Math.floor(u),t[2],a);if(!isNaN(l)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(l),t[2],a),!isNaN(u)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(u),t[2],a)))){for(var f=a/7,d=!1,g=this.possibleCenters,m=0,y=g.length;m<y;m++){var x=g[m];if(x.aboutEquals(f,l,u)){g[m]=x.combineEstimate(l,u,f),d=!0;break}}if(!d){var A=new rD(u,l,f);g.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=ac(this.possibleCenters),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,a=0,u=0,l=this.possibleCenters.length;try{for(var f=ac(this.possibleCenters),d=f.next();!d.done;d=f.next()){var g=d.value;g.getCount()>=n.CENTER_QUORUM&&(a++,u+=g.getEstimatedModuleSize())}}catch(S){t={error:S}}finally{try{d&&!d.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}if(a<3)return!1;var m=u/l,y=0;try{for(var x=ac(this.possibleCenters),A=x.next();!A.done;A=x.next()){var g=A.value;y+=Math.abs(g.getEstimatedModuleSize()-m)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return y<=.05*u},n.prototype.selectBestPatterns=function(){var t,e,r,i,a=this.possibleCenters.length;if(a<3)throw new et;var u=this.possibleCenters,l;if(a>3){var f=0,d=0;try{for(var g=ac(this.possibleCenters),m=g.next();!m.done;m=g.next()){var y=m.value,x=y.getEstimatedModuleSize();f+=x,d+=x*x}}catch(H){t={error:H}}finally{try{m&&!m.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}l=f/a;var A=Math.sqrt(d/a-l*l);u.sort(function(H,q){var N=Math.abs(q.getEstimatedModuleSize()-l),b=Math.abs(H.getEstimatedModuleSize()-l);return N<b?-1:N>b?1:0});for(var S=Math.max(.2*l,A),I=0;I<u.length&&u.length>3;I++){var M=u[I];Math.abs(M.getEstimatedModuleSize()-l)>S&&(u.splice(I,1),I--)}}if(u.length>3){var f=0;try{for(var O=ac(u),k=O.next();!k.done;k=O.next()){var V=k.value;f+=V.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{k&&!k.done&&(i=O.return)&&i.call(O)}finally{if(r)throw r.error}}l=f/u.length,u.sort(function(q,N){if(N.getCount()===q.getCount()){var b=Math.abs(N.getEstimatedModuleSize()-l),P=Math.abs(q.getEstimatedModuleSize()-l);return b<P?1:b>P?-1:0}else return N.getCount()-q.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),oD=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Se.NEED_RESULT_POINT_CALLBACK);var e=new aD(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),a=this.calculateModuleSize(e,r,i);if(a<1)throw new et("No pattern found in proccess finder.");var u=n.computeDimension(e,r,i,a),l=rs.getProvisionalVersionForDimension(u),f=l.getDimensionForVersion()-7,d=null;if(l.getAlignmentPatternCenters().length>0)for(var g=r.getX()-e.getX()+i.getX(),m=r.getY()-e.getY()+i.getY(),y=1-3/f,x=Math.floor(e.getX()+y*(g-e.getX())),A=Math.floor(e.getY()+y*(m-e.getY())),S=4;S<=16;S<<=1)try{d=this.findAlignmentInRegion(a,x,A,S);break}catch(k){if(!(k instanceof et))throw k}var I=n.createTransform(e,r,i,d,u),M=n.sampleGrid(this.image,I,u),O;return d===null?O=[i,e,r]:O=[i,e,r,d],new nv(M,O)},n.createTransform=function(t,e,r,i,a){var u=a-3.5,l,f,d,g;return i!==null?(l=i.getX(),f=i.getY(),d=u-3,g=d):(l=e.getX()-t.getX()+r.getX(),f=e.getY()-t.getY()+r.getY(),d=u,g=u),Cw.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,d,g,3.5,u,t.getX(),t.getY(),e.getX(),e.getY(),l,f,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=rv.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var a=Kt.round(vt.distance(t,e)/i),u=Kt.round(vt.distance(t,r)/i),l=Math.floor((a+u)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new et("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var a=this.sizeOfBlackWhiteBlackRun(t,e,r,i),u=1,l=t-(r-t);l<0?(u=t/(t-l),l=0):l>=this.image.getWidth()&&(u=(this.image.getWidth()-1-t)/(l-t),l=this.image.getWidth()-1);var f=Math.floor(e-(i-e)*u);return u=1,f<0?(u=e/(e-f),f=0):f>=this.image.getHeight()&&(u=(this.image.getHeight()-1-e)/(f-e),f=this.image.getHeight()-1),l=Math.floor(t+(l-t)*u),a+=this.sizeOfBlackWhiteBlackRun(t,e,l,f),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var a=Math.abs(i-e)>Math.abs(r-t);if(a){var u=t;t=e,e=u,u=r,r=i,i=u}for(var l=Math.abs(r-t),f=Math.abs(i-e),d=-l/2,g=t<r?1:-1,m=e<i?1:-1,y=0,x=r+g,A=t,S=e;A!==x;A+=g){var I=a?S:A,M=a?A:S;if(y===1===this.image.get(I,M)){if(y===2)return Kt.distance(A,S,t,e);y++}if(d+=f,d>0){if(S===i)break;S+=m,d-=l}}return y===2?Kt.distance(r+g,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var a=Math.floor(i*t),u=Math.max(0,e-a),l=Math.min(this.image.getWidth()-1,e+a);if(l-u<t*3)throw new et("Alignment top exceeds estimated module size.");var f=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-f<t*3)throw new et("Alignment bottom exceeds estimated module size.");var g=new eD(this.image,u,f,l-u,d-f,t,this.resultPointCallback);return g.find()},n}(),Qp=function(){function n(){this.decoder=new $O}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(Se.PURE_BARCODE)!==void 0){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,e),i=n.NO_POINTS}else{var u=new oD(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(u.getBits(),e),i=u.getPoints()}r.getOther()instanceof Nw&&r.getOther().applyMirroredCorrection(i);var l=new kn(r.getText(),r.getRawBytes(),void 0,i,xt.QR_CODE,void 0),f=r.getByteSegments();f!==null&&l.putMetadata(Sn.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!==null&&l.putMetadata(Sn.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(l.putMetadata(Sn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(Sn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new et;var i=this.moduleSize(e,t),a=e[1],u=r[1],l=e[0],f=r[0];if(l>=f||a>=u)throw new et;if(u-a!==f-l&&(f=l+(u-a),f>=t.getWidth()))throw new et;var d=Math.round((f-l+1)/i),g=Math.round((u-a+1)/i);if(d<=0||g<=0)throw new et;if(g!==d)throw new et;var m=Math.floor(i/2);a+=m,l+=m;var y=l+Math.floor((d-1)*i)-f;if(y>0){if(y>m)throw new et;l-=y}var x=a+Math.floor((g-1)*i)-u;if(x>0){if(x>m)throw new et;a-=x}for(var A=new _i(d,g),S=0;S<g;S++)for(var I=a+Math.floor(S*i),M=0;M<d;M++)t.get(l+Math.floor(M*i),I)&&A.set(M,S);return A},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),a=t[0],u=t[1],l=!0,f=0;a<i&&u<r;){if(l!==e.get(a,u)){if(++f===5)break;l=!l}a++,u++}if(a===i||u===r)throw new et;return(a-t[0])/7},n.NO_POINTS=new Array,n}(),sD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xt=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return Kt.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),a=0;try{for(var u=sD(t),l=u.next();!l.done;l=u.next()){var f=l.value;i[a++]=f}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=tn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),uD=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),lD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cD=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new uD(i,a)},n.detect=function(t,e){for(var r,i,a=new Array,u=0,l=0,f=!1;u<e.getHeight();){var d=n.findVertices(e,u,l);if(d[0]==null&&d[3]==null){if(!f)break;f=!1,l=0;try{for(var g=(r=void 0,lD(a)),m=g.next();!m.done;m=g.next()){var y=m.value;y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())))}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}u+=n.ROW_STEP;continue}if(f=!0,a.push(d),!t)break;d[2]!=null?(l=Math.trunc(d[2].getX()),u=Math.trunc(d[2].getY())):(l=Math.trunc(d[4].getX()),u=Math.trunc(d[4].getY()))}return a},n.findVertices=function(t,e,r){var i=t.getHeight(),a=t.getWidth(),u=new Array(8);return n.copyToResult(u,n.findRowsWithPattern(t,i,a,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),u[4]!=null&&(r=Math.trunc(u[4].getX()),e=Math.trunc(u[4].getY())),n.copyToResult(u,n.findRowsWithPattern(t,i,a,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),u},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,a,u){for(var l=new Array(4),f=!1,d=new Int32Array(u.length);i<e;i+=n.ROW_STEP){var g=n.findGuardPattern(t,a,i,r,!1,u,d);if(g!=null){for(;i>0;){var m=n.findGuardPattern(t,a,--i,r,!1,u,d);if(m!=null)g=m;else{i++;break}}l[0]=new vt(g[0],i),l[1]=new vt(g[1],i),f=!0;break}}var y=i+1;if(f){for(var x=0,m=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);y<e;y++){var g=n.findGuardPattern(t,m[0],y,r,!1,u,d);if(g!=null&&Math.abs(m[0]-g[0])<n.MAX_PATTERN_DRIFT&&Math.abs(m[1]-g[1])<n.MAX_PATTERN_DRIFT)m=g,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}y-=x+1,l[2]=new vt(m[0],y),l[3]=new vt(m[1],y)}return y-i<n.BARCODE_MIN_HEIGHT&&tn.fill(l,null),l},n.findGuardPattern=function(t,e,r,i,a,u,l){tn.fillWithin(l,0,l.length,0);for(var f=e,d=0;t.get(f,r)&&f>0&&d++<n.MAX_PIXEL_DRIFT;)f--;for(var g=f,m=0,y=u.length,x=a;g<i;g++){var A=t.get(g,r);if(A!==x)l[m]++;else{if(m===y-1){if(n.patternMatchVariance(l,u,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([f,g]);f+=l[0]+l[1],_e.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,x=!x}}return m===y-1&&n.patternMatchVariance(l,u,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([f,g-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,u=0,l=0;l<i;l++)a+=t[l],u+=e[l];if(a<u)return 1/0;var f=a/u;r*=f;for(var d=0,g=0;g<i;g++){var m=t[g],y=e[g]*f,x=m>y?m-y:y-m;if(x>r)return 1/0;d+=x}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),fD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},es=function(){function n(t,e){if(e.length===0)throw new Et;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),_e.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var a=fD(this.coefficients),u=a.next();!u.done;u=a.next()){var l=u.value;i=this.field.add(i,l)}}catch(m){e={error:m}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i}for(var f=this.coefficients[0],d=this.coefficients.length,g=1;g<d;g++)f=this.field.add(this.field.multiply(t,f),this.coefficients[g]);return f},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new Et("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),u=r.length-e.length;_e.arraycopy(r,0,a,0,u);for(var l=u;l<r.length;l++)a[l]=this.field.add(e[l-u],r[l]);return new n(this.field,a)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new Et("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new Et("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,u=new Int32Array(r+a-1),l=0;l<r;l++)for(var f=e[l],d=0;d<a;d++)u[l+d]=this.field.add(u[l+d],this.field.multiply(f,i[d]));return new n(this.field,u)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new Et;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new Nt,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),hD=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new Et;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new Sw;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),dD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pD=function(n){dD(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var a=1,u=0;u<e;u++)i.expTable[u]=a,a=a*r%e;for(var u=0;u<e-1;u++)i.logTable[i.expTable[u]]=u;return i.zero=new es(i,new Int32Array([0])),i.one=new es(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new Et;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new es(this,i)},t.PDF417_GF=new t(Xt.NUMBER_OF_CODEWORDS,3),t}(hD),gD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vD=function(){function n(){this.field=pD.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,a,u=new es(this.field,t),l=new Int32Array(e),f=!1,d=e;d>0;d--){var g=u.evaluateAt(this.field.exp(d));l[e-d]=g,g!==0&&(f=!0)}if(!f)return 0;var m=this.field.getOne();if(r!=null)try{for(var y=gD(r),x=y.next();!x.done;x=y.next()){var A=x.value,S=this.field.exp(t.length-1-A),I=new es(this.field,new Int32Array([this.field.subtract(0,S),1]));m=m.multiply(I)}}catch(b){i={error:b}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var M=new es(this.field,l),O=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),M,e),k=O[0],V=O[1],H=this.findErrorLocations(k),q=this.findErrorMagnitudes(V,k,H),d=0;d<H.length;d++){var N=t.length-1-this.field.log(H[d]);if(N<0)throw dn.getChecksumInstance();t[N]=this.field.subtract(t[N],q[d])}return H.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=t,u=e,l=this.field.getZero(),f=this.field.getOne();u.getDegree()>=Math.round(r/2);){var d=a,g=l;if(a=u,l=f,a.isZero())throw dn.getChecksumInstance();u=d;for(var m=this.field.getZero(),y=a.getCoefficient(a.getDegree()),x=this.field.inverse(y);u.getDegree()>=a.getDegree()&&!u.isZero();){var A=u.getDegree()-a.getDegree(),S=this.field.multiply(u.getCoefficient(u.getDegree()),x);m=m.add(this.field.buildMonomial(A,S)),u=u.subtract(a.multiplyByMonomial(A,S))}f=m.multiply(l).subtract(g).negative()}var I=f.getCoefficient(0);if(I===0)throw dn.getChecksumInstance();var M=this.field.inverse(I),O=f.multiply(M),k=u.multiply(M);return[O,k]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,a=1;a<this.field.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==e)throw dn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),a=new Int32Array(i),u=1;u<=i;u++)a[i-u]=this.field.multiply(u,e.getCoefficient(u));for(var l=new es(this.field,a),f=r.length,d=new Int32Array(f),u=0;u<f;u++){var g=this.field.inverse(r[u]),m=this.field.subtract(0,t.evaluateAt(g)),y=this.field.inverse(l.evaluateAt(g));d[u]=this.field.multiply(m,y)}return d},n}(),$p=function(){function n(t,e,r,i,a){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,a)}return n.prototype.constructor_1=function(t,e,r,i,a){var u=e==null||r==null,l=i==null||a==null;if(u&&l)throw new et;u?(e=new vt(0,i.getY()),r=new vt(0,a.getY())):l&&(i=new vt(t.getWidth()-1,e.getY()),a=new vt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,a=this.bottomLeft,u=this.topRight,l=this.bottomRight;if(t>0){var f=r?this.topLeft:this.topRight,d=Math.trunc(f.getY()-t);d<0&&(d=0);var g=new vt(f.getX(),d);r?i=g:u=g}if(e>0){var m=r?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+e);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var x=new vt(m.getX(),y);r?a=x:l=x}return new n(this.image,i,a,u,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),mD=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),av=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(u,l,f,d,g,m){if(u==="%%")return"%";if(e[++r]!==void 0){u=d?parseInt(d.substr(1)):void 0;var y=g?parseInt(g.substr(1)):void 0,x;switch(m){case"s":x=e[r];break;case"c":x=e[r][0];break;case"f":x=parseFloat(e[r]).toFixed(u);break;case"p":x=parseFloat(e[r]).toPrecision(u);break;case"e":x=parseFloat(e[r]).toExponential(u);break;case"x":x=parseInt(e[r]).toString(y||16);break;case"d":x=parseFloat(parseInt(e[r],y||10).toPrecision(u)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var A=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";x.length<A;)x=l!==void 0?x+S:S+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),yD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mw=function(){function n(t){this.boundingBox=new $p(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new av,i=0;try{for(var a=yD(this.codewords),u=a.next();!u.done;u=a.next()){var l=u.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(f){t={error:f}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),_D=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xD=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,a=[],u;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){u={error:l}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(u)throw u.error}}return a},vc=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,a=function(m,y){var x={getKey:function(){return m},getValue:function(){return y}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var u=_D(this.values.entries()),l=u.next();!l.done;l=u.next()){var f=xD(l.value,2),d=f[0],g=f[1];a(d,g)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return Xt.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),ED=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),up=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wx=function(n){ED(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=up(this.getCodewords()),a=i.next();!a.done;a=i.next()){var u=a.value;u!=null&&u.setRowNumberAsRowIndicatorColumn()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),d=-1,g=1,m=0,y=l;y<f;y++)if(r[y]!=null){var x=r[y],A=x.getRowNumber()-d;if(A===0)m++;else if(A===1)g=Math.max(g,m),m=1,d=x.getRowNumber();else if(A<0||x.getRowNumber()>=e.getRowCount()||A>y)r[y]=null;else{var S=void 0;g>2?S=(g-2)*A:S=A;for(var I=S>=y,M=1;M<=S&&!I;M++)I=r[y-M]!=null;I?r[y]=null:(d=x.getRowNumber(),m=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var u=up(this.getCodewords()),l=u.next();!l.done;l=u.next()){var f=l.value;if(f!=null){var d=f.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(g){e={error:g}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return a},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),d=-1,g=u;g<l;g++)if(f[g]!=null){var m=f[g];m.setRowNumberAsRowIndicatorColumn();var y=m.getRowNumber()-d;y===0||(y===1?d=m.getRowNumber():m.getRowNumber()>=e.getRowCount()?f[g]=null:d=m.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),a=new vc,u=new vc,l=new vc,f=new vc;try{for(var d=up(i),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var y=m.getValue()%30,x=m.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:u.setValue(y*3+1);break;case 1:f.setValue(y/3),l.setValue(y%3);break;case 2:a.setValue(y+1);break}}}}catch(S){e={error:S}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}if(a.getValue().length===0||u.getValue().length===0||l.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||u.getValue()[0]+l.getValue()[0]<Xt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+l.getValue()[0]>Xt.MAX_ROWS_IN_BARCODE)return null;var A=new mD(a.getValue()[0],u.getValue()[0],l.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var a=e[i];if(e[i]!=null){var u=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:u+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(Mw),AD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wD=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=Xt.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(t[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){var l=this.detectionResultColumns[u].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){var l=this.detectionResultColumns[u].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,a;if(this.detectionResultColumns[t-1]!=null){var u=r[e],l=this.detectionResultColumns[t-1].getCodewords(),f=l;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());var d=new Array(14);d[2]=l[e],d[3]=f[e],e>0&&(d[0]=r[e-1],d[4]=l[e-1],d[5]=f[e-1]),e>1&&(d[8]=r[e-2],d[10]=l[e-2],d[11]=f[e-2]),e<r.length-1&&(d[1]=r[e+1],d[6]=l[e+1],d[7]=f[e+1]),e<r.length-2&&(d[9]=r[e+2],d[12]=l[e+2],d[13]=f[e+2]);try{for(var g=AD(d),m=g.next();!m.done;m=g.next()){var y=m.value;if(n.adjustRowNumber(u,y))return}}catch(x){i={error:x}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new av,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){e.format("    |   ");continue}e.format(" %3d|%3d",a.getRowNumber(),a.getValue())}e.format("%n")}return e.toString()},n}(),TD=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),SD=function(){function n(){}return n.initialize=function(){for(var t=0;t<Xt.SYMBOL_TABLE.length;t++)for(var e=Xt.SYMBOL_TABLE[t],r=e&1,i=0;i<Xt.BARS_IN_MODULE;i++){for(var a=0;(e&1)===r;)a+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(Xt.BARS_IN_MODULE)),n.RATIOS_TABLE[t][Xt.BARS_IN_MODULE-i-1]=Math.fround(a/Xt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=Kt.sum(t),r=new Int32Array(Xt.BARS_IN_MODULE),i=0,a=0,u=0;u<Xt.MODULES_IN_CODEWORD;u++){var l=e/(2*Xt.MODULES_IN_CODEWORD)+u*e/Xt.MODULES_IN_CODEWORD;a+t[i]<=l&&(a+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return Xt.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=Kt.sum(t),r=new Array(Xt.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var a=qp.MAX_VALUE,u=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var f=0,d=n.RATIOS_TABLE[l],g=0;g<Xt.BARS_IN_MODULE;g++){var m=Math.fround(d[g]-r[g]);if(f+=Math.fround(m*m),f>=a)break}f<a&&(a=f,u=Xt.SYMBOL_TABLE[l])}return u},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Xt.SYMBOL_TABLE.length).map(function(t){return new Array(Xt.BARS_IN_MODULE)}),n}(),CD=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),Tx=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),ID=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bD=function(n){ID(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(Jn),RD=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new bD;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new tv;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),OD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DD=function(n){OD(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Jn),ND=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MD=function(n){ND(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new Et("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new DD;i=Lt.MAX_VALUE}this.buf=tn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new tv;this.ensureCapacity(this.count+i),_e.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return tn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(RD),pe;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(pe||(pe={}));function Pw(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Mh;function Fa(n){if(typeof Mh>"u"&&(Mh=Pw()),Mh===null)throw new Error("BigInt is not supported!");return Mh(n)}function PD(){var n=[];n[0]=Fa(1);var t=Fa(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var LD=function(){function n(){}return n.decode=function(t,e){var r=new Nt(""),i=Je.ISO8859_1;r.enableDecoding(i);for(var a=1,u=t[a++],l=new CD;a<t[0];){switch(u){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(t,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(u,t,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(t,a,r);break;case n.ECI_CHARSET:Je.getCharacterSetECIByValue(t[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(t,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ct;default:a--,a=n.textCompaction(t,a,r);break}if(a<t.length)u=t[a++];else throw ct.getFormatInstance()}if(r.length()===0)throw ct.getFormatInstance();var f=new jd(null,r.toString(),null,e);return f.setOther(l),f},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw ct.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,e++)i[a]=t[e];r.setSegmentIndex(Lt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var u=new Nt;e=n.textCompaction(t,e,u),r.setFileId(u.toString());var l=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new Nt;e=n.textCompaction(t,e+1,f),r.setFileName(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Nt;e=n.textCompaction(t,e+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var g=new Nt;e=n.textCompaction(t,e+1,g),r.setAddressee(g.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new Nt;e=n.numericCompaction(t,e+1,m),r.setSegmentCount(Lt.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new Nt;e=n.numericCompaction(t,e+1,y),r.setTimestamp(Tx.parseLong(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new Nt;e=n.numericCompaction(t,e+1,x),r.setChecksum(Lt.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new Nt;e=n.numericCompaction(t,e+1,A),r.setFileSize(Tx.parseLong(A.toString()));break;default:throw ct.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw ct.getFormatInstance()}if(l!==-1){var S=e-l;r.isLastSegment()&&S--,r.setOptionalData(tn.copyOfRange(t,l,l+S))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),a=new Int32Array((t[0]-e)*2),u=0,l=!1;e<t[0]&&!l;){var f=t[e++];if(f<n.TEXT_COMPACTION_MODE_LATCH)i[u]=f/30,i[u+1]=f%30,u+=2;else switch(f){case n.TEXT_COMPACTION_MODE_LATCH:i[u++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[u]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=t[e++],a[u]=f,u++;break}}return n.decodeTextCompaction(i,a,u,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var a=pe.ALPHA,u=pe.ALPHA,l=0;l<r;){var f=t[l],d="";switch(a){case pe.ALPHA:if(f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.LL:a=pe.LOWER;break;case n.ML:a=pe.MIXED;break;case n.PS:u=a,a=pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break;case pe.LOWER:if(f<26)d=String.fromCharCode(97+f);else switch(f){case 26:d=" ";break;case n.AS:u=a,a=pe.ALPHA_SHIFT;break;case n.ML:a=pe.MIXED;break;case n.PS:u=a,a=pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break;case pe.MIXED:if(f<n.PL)d=n.MIXED_CHARS[f];else switch(f){case n.PL:a=pe.PUNCT;break;case 26:d=" ";break;case n.LL:a=pe.LOWER;break;case n.AL:a=pe.ALPHA;break;case n.PS:u=a,a=pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break;case pe.PUNCT:if(f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=pe.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break;case pe.ALPHA_SHIFT:if(a=u,f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break;case pe.PUNCT_SHIFT:if(a=u,f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=pe.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=pe.ALPHA;break}break}d!==""&&i.append(d),l++}},n.byteCompaction=function(t,e,r,i,a){var u=new MD,l=0,f=0,d=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var g=new Int32Array(6),m=e[i++];i<e[0]&&!d;)switch(g[l++]=m,f=900*f+m,m=e[i++],m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(l%5===0&&l>0){for(var y=0;y<6;++y)u.write(Number(Fa(f)>>Fa(8*(5-y))));f=0,l=0}break}i===e[0]&&m<n.TEXT_COMPACTION_MODE_LATCH&&(g[l++]=m);for(var x=0;x<l;x++)u.write(g[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!d;){var A=e[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(l%5===0&&l>0){for(var y=0;y<6;++y)u.write(Number(Fa(f)>>Fa(8*(5-y))));f=0,l=0}}break}return a.append(Rr.decode(u.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,a=!1,u=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!a;){var l=t[e++];if(e===t[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)u[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(u,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=Fa(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*Fa(t[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ct;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Pw()?PD():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),oc=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BD=function(){function n(){}return n.decode=function(t,e,r,i,a,u,l){for(var f=new $p(t,e,r,i,a),d=null,g=null,m,y=!0;;y=!1){if(e!=null&&(d=n.getRowIndicatorColumn(t,f,e,!0,u,l)),i!=null&&(g=n.getRowIndicatorColumn(t,f,i,!1,u,l)),m=n.merge(d,g),m==null)throw et.getNotFoundInstance();var x=m.getBoundingBox();if(y&&x!=null&&(x.getMinY()<f.getMinY()||x.getMaxY()>f.getMaxY()))f=x;else break}m.setBoundingBox(f);var A=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,d),m.setDetectionResultColumn(A,g);for(var S=d!=null,I=1;I<=A;I++){var M=S?I:A-I;if(m.getDetectionResultColumn(M)===void 0){var O=void 0;M===0||M===A?O=new wx(f,M===0):O=new Mw(f),m.setDetectionResultColumn(M,O);for(var k=-1,V=k,H=f.getMinY();H<=f.getMaxY();H++){if(k=n.getStartColumn(m,M,H,S),k<0||k>f.getMaxX()){if(V===-1)continue;k=V}var q=n.detectCodeword(t,f.getMinX(),f.getMaxX(),S,k,H,u,l);q!=null&&(O.setCodeword(H,q),V=k,u=Math.min(u,q.getWidth()),l=Math.max(l,q.getWidth()))}}}return n.createDecoderResult(m)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=$p.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new wD(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var a=n.getMax(i),u=0;try{for(var l=oc(i),f=l.next();!f.done;f=l.next()){var d=f.value;if(u+=a-d,d>0)break}}catch(x){e={error:x}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}for(var g=t.getCodewords(),m=0;u>0&&g[m]==null;m++)u--;for(var y=0,m=i.length-1;m>=0&&(y+=a-i[m],!(i[m]>0));m--);for(var m=g.length-1;y>0&&g[m]==null;m--)y--;return t.getBoundingBox().addMissingRows(u,y,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var a=oc(t),u=a.next();!u.done;u=a.next()){var l=u.value;i=Math.max(i,l)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,a,u){for(var l=new wx(e,i),f=0;f<2;f++)for(var d=f===0?1:-1,g=Math.trunc(Math.trunc(r.getX())),m=Math.trunc(Math.trunc(r.getY()));m<=e.getMaxY()&&m>=e.getMinY();m+=d){var y=n.detectCodeword(t,0,t.getWidth(),i,g,m,a,u);y!=null&&(l.setCodeword(m,y),i?g=y.getStartX():g=y.getEndX())}return l},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(a<1||a>Xt.MAX_CODEWORDS_IN_BARCODE)throw et.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],u=new Array,l=0;l<t.getBarcodeRowCount();l++)for(var f=0;f<t.getBarcodeColumnCount();f++){var d=e[l][f+1].getValue(),g=l*t.getBarcodeColumnCount()+f;d.length===0?r.push(g):d.length===1?i[g]=d[0]:(u.push(g),a.push(d))}for(var m=new Array(a.length),y=0;y<m.length;y++)m[y]=a[y];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,Xt.toIntArray(r),Xt.toIntArray(u),m)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,a){for(var u=new Int32Array(i.length),l=100;l-- >0;){for(var f=0;f<u.length;f++)e[i[f]]=a[f][u[f]];try{return n.decodeCodewords(e,t,r)}catch(g){var d=g instanceof dn;if(!d)throw g}if(u.length===0)throw dn.getChecksumInstance();for(var f=0;f<u.length;f++)if(u[f]<a[f].length-1){u[f]++;break}else if(u[f]=0,f===u.length-1)throw dn.getChecksumInstance()}throw dn.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,a,u=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),l=0;l<u.length;l++)for(var f=0;f<u[l].length;f++)u[l][f]=new vc;var d=0;try{for(var g=oc(t.getDetectionResultColumns()),m=g.next();!m.done;m=g.next()){var y=m.value;if(y!=null)try{for(var x=(i=void 0,oc(y.getCodewords())),A=x.next();!A.done;A=x.next()){var S=A.value;if(S!=null){var I=S.getRowNumber();if(I>=0){if(I>=u.length)continue;u[I][d].setValue(S.getValue())}}}}catch(M){i={error:M}}finally{try{A&&!A.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}d++}}catch(M){e={error:M}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}return u},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var a,u,l=i?1:-1,f=null;if(n.isValidBarcodeColumn(t,e-l)&&(f=t.getDetectionResultColumn(e-l).getCodeword(r)),f!=null)return i?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(e).getCodewordNearby(r),f!=null)return i?f.getStartX():f.getEndX();if(n.isValidBarcodeColumn(t,e-l)&&(f=t.getDetectionResultColumn(e-l).getCodewordNearby(r)),f!=null)return i?f.getEndX():f.getStartX();for(var d=0;n.isValidBarcodeColumn(t,e-l);){e-=l;try{for(var g=(a=void 0,oc(t.getDetectionResultColumn(e).getCodewords())),m=g.next();!m.done;m=g.next()){var y=m.value;if(y!=null)return(i?y.getEndX():y.getStartX())+l*d*(y.getEndX()-y.getStartX())}}catch(x){a={error:x}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(a)throw a.error}}d++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,a,u,l,f){a=n.adjustCodewordStartColumn(t,e,r,i,a,u);var d=n.getModuleBitCount(t,e,r,i,a,u);if(d==null)return null;var g,m=Kt.sum(d);if(i)g=a+m;else{for(var y=0;y<d.length/2;y++){var x=d[y];d[y]=d[d.length-1-y],d[d.length-1-y]=x}g=a,a=g-m}if(!n.checkCodewordSkew(m,l,f))return null;var A=SD.getDecodedValue(d),S=Xt.getCodeword(A);return S===-1?null:new TD(a,g,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(t,e,r,i,a,u){for(var l=a,f=new Int32Array(8),d=0,g=i?1:-1,m=i;(i?l<r:l>=e)&&d<f.length;)t.get(l,u)===m?(f[d]++,l+=g):(d++,m=!m);return d===f.length||l===(i?r:e)&&d===f.length-1?f:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,a,u){for(var l=a,f=i?-1:1,d=0;d<2;d++){for(;(i?l>=e:l<r)&&i===t.get(l,u);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=f}f=-f,i=!i}return l},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw ct.getFormatInstance();var i=1<<e+1,a=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var u=LD.decode(t,""+e);return u.setErrorsCorrected(a),u.setErasures(r.length),u},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw dn.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw ct.getFormatInstance();var r=t[0];if(r>t.length)throw ct.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw ct.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new av,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var a=t[r][i];a.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new vD,n}(),kD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zp=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw et.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof ct||r instanceof dn?et.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,a,u=new Array,l=cD.detectMultiple(t,e,r);try{for(var f=kD(l.getPoints()),d=f.next();!d.done;d=f.next()){var g=d.value,m=BD.decode(l.getBits(),g[4],g[5],g[6],g[7],n.getMinCodewordWidth(g),n.getMaxCodewordWidth(g)),y=new kn(m.getText(),m.getRawBytes(),void 0,g,xt.PDF_417);y.putMetadata(Sn.ERROR_CORRECTION_LEVEL,m.getECLevel());var x=m.getOther();x!=null&&y.putMetadata(Sn.PDF417_EXTRA_METADATA,x),u.push(y)}}catch(A){i={error:A}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return u.map(function(A){return A})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?Lt.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),VD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sx=function(n){VD(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(Jn),Cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UD=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(Se.TRY_HARDER)!==void 0,r=t==null?null:t.get(Se.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(u){return u===xt.UPC_A||u===xt.UPC_E||u===xt.EAN_13||u===xt.EAN_8||u===xt.CODABAR||u===xt.CODE_39||u===xt.CODE_93||u===xt.CODE_128||u===xt.ITF||u===xt.RSS_14||u===xt.RSS_EXPANDED});a&&!e&&i.push(new gc(t)),r.includes(xt.QR_CODE)&&i.push(new Qp),r.includes(xt.DATA_MATRIX)&&i.push(new Kp),r.includes(xt.AZTEC)&&i.push(new Wp),r.includes(xt.PDF_417)&&i.push(new Zp),a&&e&&i.push(new gc(t))}i.length===0&&(e||i.push(new gc(t)),i.push(new Qp),i.push(new Kp),i.push(new Wp),i.push(new Zp),e&&i.push(new gc(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=Cx(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(u){t={error:u}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new Sx("No readers where selected, nothing can be read.");try{for(var i=Cx(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;try{return u.decode(t,this.hints)}catch(l){if(l instanceof Sx)continue}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new et("No MultiFormat Readers were able to detect the code.")},n}(),FD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jD=function(n){FD(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,a=new UD;return a.setHints(e),i=n.call(this,a,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(Wu),zD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){zD(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Zp,e)||this}return t})(Wu);var HD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){HD(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Qp,e)||this}return t})(Wu);var Jp;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Jp||(Jp={}));const Ph=Jp;var Lw=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Ja(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,a=e.length;a<=t;a++){var u=r.multiply(new Ja(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));e.push(u),r=u}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new Et("No error correction bytes");var r=t.length-e;if(r<=0)throw new Et("No data bytes provided");var i=this.buildGenerator(e),a=new Int32Array(r);_e.arraycopy(t,0,a,0,r);var u=new Ja(this.field,a);u=u.multiplyByMonomial(e,1);for(var l=u.divide(i)[1],f=l.getCoefficients(),d=e-f.length,g=0;g<d;g++)t[r+g]=0;_e.arraycopy(f,0,t,r+d,f.length)},n}(),mc=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),u=0;u<a-1;u++)for(var l=r[u],f=0;f<i-1;f++){var d=l[f];d===l[f+1]&&d===r[u+1][f]&&d===r[u+1][f+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),u=0;u<a;u++)for(var l=0;l<i;l++){var f=r[u];l+6<i&&f[l]===1&&f[l+1]===0&&f[l+2]===1&&f[l+3]===1&&f[l+4]===1&&f[l+5]===0&&f[l+6]===1&&(n.isWhiteHorizontal(f,l-4,l)||n.isWhiteHorizontal(f,l+7,l+11))&&e++,u+6<a&&r[u][l]===1&&r[u+1][l]===0&&r[u+2][l]===1&&r[u+3][l]===1&&r[u+4][l]===1&&r[u+5][l]===0&&r[u+6][l]===1&&(n.isWhiteVertical(r,l,u-4,u)||n.isWhiteVertical(r,l,u+7,u+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var a=r;a<i;a++)if(t[a][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),u=0;u<a;u++)for(var l=r[u],f=0;f<i;f++)l[f]===1&&e++;var d=t.getHeight()*t.getWidth(),g=Math.floor(Math.abs(e*2-d)*10/d);return g*n.N4},n.getDataMaskBit=function(t,e,r){var i,a;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:a=r*e,i=(a&1)+a%3;break;case 6:a=r*e,i=(a&1)+a%3&1;break;case 7:a=r*e,i=a%3+(r+e&1)&1;break;default:throw new Et("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),a=e?t.getWidth():t.getHeight(),u=t.getArray(),l=0;l<i;l++){for(var f=0,d=-1,g=0;g<a;g++){var m=e?u[l][g]:u[g][l];m===d?f++:(f>=5&&(r+=n.N1+(f-5)),f=1,d=m)}f>=5&&(r+=n.N1+(f-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),GD=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qD=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=GD(this.bytes),a=i.next();!a.done;a=i.next()){var u=a.value;tn.fill(u,t)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],u=e.bytes[r],l=0,f=this.width;l<f;++l)if(a[l]!==u[l])return!1;return!0},n.prototype.toString=function(){for(var t=new Nt,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],a=0,u=this.width;a<u;++a)switch(i[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),tg=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new Nt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),XD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xe=function(n){XD(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(Jn),Ix=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(e,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(t,i,a)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new pn;n.makeTypeInfoBits(t,e,i);for(var a=0,u=i.getSize();a<u;++a){var l=i.get(i.getSize()-1-a),f=n.TYPE_INFO_COORDINATES[a],d=f[0],g=f[1];if(r.setBoolean(d,g,l),a<8){var m=r.getWidth()-a-1,y=8;r.setBoolean(m,y,l)}else{var m=8,y=r.getHeight()-7+(a-8);r.setBoolean(m,y,l)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new pn;n.makeVersionInfoBits(t,r);for(var i=17,a=0;a<6;++a)for(var u=0;u<3;++u){var l=r.get(i);i--,e.setBoolean(a,e.getHeight()-11+u,l),e.setBoolean(e.getHeight()-11+u,a,l)}}},n.embedDataBits=function(t,e,r){for(var i=0,a=-1,u=r.getWidth()-1,l=r.getHeight()-1;u>0;){for(u===6&&(u-=1);l>=0&&l<r.getHeight();){for(var f=0;f<2;++f){var d=u-f;if(n.isEmpty(r.get(d,l))){var g=void 0;i<t.getSize()?(g=t.get(i),++i):g=!1,e!==255&&mc.getDataMaskBit(e,d,l)&&(g=!g),r.setBoolean(d,l,g)}}l+=a}a=-a,l+=a,u-=2}if(i!==t.getSize())throw new xe("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-Lt.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new Et("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!tg.isValidMaskPattern(e))throw new xe("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var u=new pn;if(u.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(u),r.getSize()!==15)throw new xe("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new xe("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new xe;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new xe;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new xe;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],u=0;u<5;++u)r.setNumber(t+u,e+i,a[u])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],u=0;u<7;++u)r.setNumber(t+u,e+i,a[u])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,u=i.length;a!==u;a++){var l=i[a];if(l>=0)for(var f=0;f!==u;f++){var d=i[f];d>=0&&n.isEmpty(e.get(d,l))&&n.embedPositionAdjustmentPattern(d-2,l-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),WD=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),bx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return mc.applyMaskPenaltyRule1(t)+mc.applyMaskPenaltyRule2(t)+mc.applyMaskPenaltyRule3(t)+mc.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Ph.CHARACTER_SET)!==void 0;a&&(i=r.get(Ph.CHARACTER_SET).toString());var u=this.chooseMode(t,i),l=new pn;if(u===Ee.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=Je.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,l)}this.appendModeInfo(u,l);var d=new pn;this.appendBytes(t,u,d,i);var g;if(r!==null&&r.get(Ph.QR_VERSION)!==void 0){var m=Number.parseInt(r.get(Ph.QR_VERSION).toString(),10);g=rs.getVersionForNumber(m);var y=this.calculateBitsNeeded(u,l,d,g);if(!this.willFit(y,g,e))throw new xe("Data too big for requested version")}else g=this.recommendVersion(e,u,l,d);var x=new pn;x.appendBitArray(l);var A=u===Ee.BYTE?d.getSizeInBytes():t.length;this.appendLengthInfo(A,g,u,x),x.appendBitArray(d);var S=g.getECBlocksForLevel(e),I=g.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(I,x);var M=this.interleaveWithECBytes(x,g.getTotalCodewords(),I,S.getNumBlocks()),O=new tg;O.setECLevel(e),O.setMode(u),O.setVersion(g);var k=g.getDimensionForVersion(),V=new qD(k,k),H=this.chooseMaskPattern(M,e,g,V);return O.setMaskPattern(H),Ix.buildMatrix(M,e,g,H,V),O.setMatrix(V),O},n.recommendVersion=function(t,e,r,i){var a=this.calculateBitsNeeded(e,r,i,rs.getVersionForNumber(1)),u=this.chooseVersion(a,t),l=this.calculateBitsNeeded(e,r,i,u);return this.chooseVersion(l,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Je.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Ee.KANJI;for(var r=!1,i=!1,a=0,u=t.length;a<u;++a){var l=t.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return Ee.BYTE}return i?Ee.ALPHANUMERIC:r?Ee.NUMERIC:Ee.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=Rr.encode(t,Je.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=e[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var a=Number.MAX_SAFE_INTEGER,u=-1,l=0;l<tg.NUM_MASK_PATTERNS;l++){Ix.buildMatrix(t,e,r,l,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,u=l)}return u},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=rs.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new xe("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),a=e.getECBlocksForLevel(r),u=a.getTotalECCodewords(),l=i-u,f=(t+7)/8;return l>=f},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new xe("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var a=e.getSize()&7;if(a>0)for(var i=a;i<8;i++)e.appendBit(!1);for(var u=t-e.getSizeInBytes(),i=0;i<u;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new xe("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,a,u){if(i>=r)throw new xe("Block ID too large");var l=t%r,f=r-l,d=Math.floor(t/r),g=d+1,m=Math.floor(e/r),y=m+1,x=d-m,A=g-y;if(x!==A)throw new xe("EC bytes mismatch");if(r!==f+l)throw new xe("RS blocks mismatch");if(t!==(m+x)*f+(y+A)*l)throw new xe("Total bytes mismatch");i<f?(a[0]=m,u[0]=x):(a[0]=y,u[0]=A)},n.interleaveWithECBytes=function(t,e,r,i){var a,u,l,f;if(t.getSizeInBytes()!==r)throw new xe("Number of bits and data bytes does not match");for(var d=0,g=0,m=0,y=new Array,x=0;x<i;++x){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,x,A,S);var I=A[0],M=new Uint8Array(I);t.toBytes(8*d,M,0,I);var O=n.generateECBytes(M,S[0]);y.push(new WD(M,O)),g=Math.max(g,I),m=Math.max(m,O.length),d+=A[0]}if(r!==d)throw new xe("Data bytes does not match offset");for(var k=new pn,x=0;x<g;++x)try{for(var V=(a=void 0,bx(y)),H=V.next();!H.done;H=V.next()){var q=H.value,M=q.getDataBytes();x<M.length&&k.appendBits(M[x],8)}}catch(B){a={error:B}}finally{try{H&&!H.done&&(u=V.return)&&u.call(V)}finally{if(a)throw a.error}}for(var x=0;x<m;++x)try{for(var N=(l=void 0,bx(y)),b=N.next();!b.done;b=N.next()){var q=b.value,O=q.getErrorCorrectionBytes();x<O.length&&k.appendBits(O[x],8)}}catch(B){l={error:B}}finally{try{b&&!b.done&&(f=N.return)&&f.call(N)}finally{if(l)throw l.error}}if(e!==k.getSizeInBytes())throw new xe("Interleaving error: "+e+" and "+k.getSizeInBytes()+" differ.");return k},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=t[a]&255;new Lw($n.QR_CODE_FIELD_256).encode(i,e);for(var u=new Uint8Array(e),a=0;a<e;a++)u[a]=i[r+a];return u},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var a=r.getCharacterCountBits(e);if(t>=1<<a)throw new xe(t+" is bigger than "+((1<<a)-1));i.appendBits(t,a)},n.appendBytes=function(t,e,r,i){switch(e){case Ee.NUMERIC:n.appendNumericBytes(t,r);break;case Ee.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case Ee.BYTE:n.append8BitBytes(t,r,i);break;case Ee.KANJI:n.appendKanjiBytes(t,r);break;default:throw new xe("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getDigit(t.charAt(i));if(i+2<r){var u=n.getDigit(t.charAt(i+1)),l=n.getDigit(t.charAt(i+2));e.appendBits(a*100+u*10+l,10),i+=3}else if(i+1<r){var u=n.getDigit(t.charAt(i+1));e.appendBits(a*10+u,7),i+=2}else e.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getAlphanumericCode(t.charCodeAt(i));if(a===-1)throw new xe;if(i+1<r){var u=n.getAlphanumericCode(t.charCodeAt(i+1));if(u===-1)throw new xe;e.appendBits(a*45+u,11),i+=2}else e.appendBits(a,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=Rr.encode(t,r)}catch(f){throw new xe(f)}for(var a=0,u=i.length;a!==u;a++){var l=i[a];e.appendBits(l,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=Rr.encode(t,Je.SJIS)}catch(m){throw new xe(m)}for(var i=r.length,a=0;a<i;a+=2){var u=r[a]&255,l=r[a+1]&255,f=u<<8&4294967295|l,d=-1;if(f>=33088&&f<=40956?d=f-33088:f>=57408&&f<=60351&&(d=f-49472),d===-1)throw new xe("Invalid byte sequence");var g=(d>>8)*192+(d&255);e.appendBits(g,13)}},n.appendECI=function(t,e){e.appendBits(Ee.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Je.UTF8.getName(),n})();var YD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){YD(t,n);function t(e,r,i,a,u,l,f,d){var g=n.call(this,l,f)||this;if(g.yuvData=e,g.dataWidth=r,g.dataHeight=i,g.left=a,g.top=u,a+l>r||u+f>i)throw new Et("Crop rectangle does not fit within image data.");return d&&g.reverseHorizontal(l,f),g}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Et("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.yuvData,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return _e.arraycopy(this.yuvData,u,a,0,i),a;for(var l=0;l<r;l++){var f=l*e;_e.arraycopy(this.yuvData,u,a,f,e),u+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,a,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),a=this.yuvData,u=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var f=l*e,d=0;d<e;d++){var g=a[u+d*t.THUMBNAIL_SCALE_FACTOR]&255;i[f+d]=4278190080|g*65793}u+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,a=0,u=this.top*this.dataWidth+this.left;a<r;a++,u+=this.dataWidth)for(var l=u+e/2,f=u,d=u+e-1;f<l;f++,d--){var g=i[f];i[f]=i[d],i[d]=g}},t.prototype.invert=function(){return new ev(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(Fd);var KD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){KD(t,n);function t(e,r,i,a,u,l,f){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=u,d.left=l,d.top=f,e.BYTES_PER_ELEMENT===4){for(var g=r*i,m=new Uint8ClampedArray(g),y=0;y<g;y++){var x=e[y],A=x>>16&255,S=x>>7&510,I=x&255;m[y]=(A+S+I)/4&255}d.luminances=m}else d.luminances=e;if(a===void 0&&(d.dataWidth=r),u===void 0&&(d.dataHeight=i),l===void 0&&(d.left=0),f===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Et("Crop rectangle does not fit within image data.");return d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Et("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.luminances,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return _e.arraycopy(this.luminances,u,a,0,i),a;for(var l=0;l<r;l++){var f=l*e;_e.arraycopy(this.luminances,u,a,f,e),u+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new ev(this)},t})(Fd);var QD=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$D=function(n){QD(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Je),ZD=function(){function n(){}return n.ISO_8859_1=Je.ISO8859_1,n}(),eg,JD=301,t5=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=JD);return{LOG:n,ALOG:t}};eg=t5([],[]),eg.LOG;eg.ALOG;var Rx;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Rx||(Rx={}));var Ox=129,Bw=230,e5=231,n5=235,r5=236,i5=237,a5=238,o5=239,s5=240,lp=254,u5=254,Dx="[)>05",Nx="[)>06",Mx="",se=0,An=1,Gn=2,$e=3,fn=4,Nn=5,l5=function(){function n(){}return n.prototype.getEncodingMode=function(){return se},n.prototype.encode=function(t){var e=jr.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=jr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Nn:t.writeCodeword(e5),t.signalEncoderChange(Nn);return;case An:t.writeCodeword(Bw),t.signalEncoderChange(An);return;case $e:t.writeCodeword(a5),t.signalEncoderChange($e);break;case Gn:t.writeCodeword(o5),t.signalEncoderChange(Gn);break;case fn:t.writeCodeword(s5),t.signalEncoderChange(fn);break;default:throw new Error("Illegal mode: "+i)}else jr.isExtendedASCII(r)?(t.writeCodeword(n5),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(jr.isDigit(t)&&jr.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),c5=function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encode=function(t){var e=new Nt;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=jr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(se);break}}var a=e.length()-1,u=1,l=t.getCodewordCount()+a+u;t.updateSymbolInfo(l);var f=t.getSymbolInfo().getDataCapacity()-l>0;if(t.hasMoreCharacters()||f)if(a<=249)e.setCharAt(0,qt.getCharAt(a));else if(a<=1555)e.setCharAt(0,qt.getCharAt(Math.floor(a/250)+249)),e.insert(1,qt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=e.length();d<r;d++)t.writeCodeword(this.randomize255State(e.charAt(d).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),ov=function(){function n(){}return n.prototype.getEncodingMode=function(){return An},n.prototype.encodeMaximal=function(t){for(var e=new Nt,r=0,i=t.pos,a=0;t.hasMoreCharacters();){var u=t.getCurrentChar();t.pos++,r=this.encodeChar(u,e),e.length()%3===0&&(i=t.pos,a=e.length())}if(a!==e.length()){var l=Math.floor(e.length()/3*2),f=Math.floor(t.getCodewordCount()+l+1);t.updateSymbolInfo(f);var d=t.getSymbolInfo().getDataCapacity()-f,g=Math.floor(e.length()%3);(g===2&&d!==2||g===1&&(r>3||d!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(Bw),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new Nt;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),a=Math.floor(e.length()/3)*2,u=t.getCodewordCount()+a;t.updateSymbolInfo(u);var l=t.getSymbolInfo().getDataCapacity()-u;if(!t.hasMoreCharacters()){var f=new Nt;for(e.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(t,e,f,i));e.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(t,e,f,i);break}var d=e.length();if(d%3===0){var g=jr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(g!==this.getEncodingMode()){t.signalEncoderChange(se);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var a=e.length(),u=e.toString().substring(0,a-i);e.setLengthToZero(),e.append(u),t.pos--;var l=t.getCurrentChar();return i=this.encodeChar(l,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,a=t.getCodewordCount()+r;t.updateSymbolInfo(a);var u=t.getSymbolInfo().getDataCapacity()-a;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(lp)}else if(u===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(lp),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(u>0||t.hasMoreCharacters())&&t.writeCodeword(lp)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(se)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,a=new Nt;return a.append(r),a.append(i),a.toString()},n}(),f5=function(){function n(){}return n.prototype.getEncodingMode=function(){return fn},n.prototype.encode=function(t){for(var e=new Nt;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var a=e.toString().substring(4);e.setLengthToZero(),e.append(a);var u=jr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){t.signalEncoderChange(se);break}}}e.append(qt.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=t.getRemainingCharacters();if(a>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var u=r-1,l=this.encodeToCodewords(e.toString()),f=!t.hasMoreCharacters(),d=f&&u<=2;if(u<=2){t.updateSymbolInfo(t.getCodewordCount()+u);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(d=!1,t.updateSymbolInfo(t.getCodewordCount()+l.length))}d?(t.resetSymbolInfo(),t.pos-=u):t.writeCodewords(l)}finally{t.signalEncoderChange(se)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(qt.getCharAt(t-64)):jr.illegalCharacter(qt.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,a=e>=3?t.charAt(2).charCodeAt(0):0,u=e>=4?t.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+u,f=l>>16&255,d=l>>8&255,g=l&255,m=new Nt;return m.append(f),e>=2&&m.append(d),e>=3&&m.append(g),m.toString()},n}(),h5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),d5=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zt=function(){function n(t,e,r,i,a,u,l,f){l===void 0&&(l=0),f===void 0&&(f=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=u,this.rsBlockData=l,this.rsBlockError=f}return n.lookup=function(t,e,r,i,a){var u,l;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=d5(g5),d=f.next();!d.done;d=f.next()){var g=d.value;if(!(e===1&&g.rectangular)&&!(e===2&&!g.rectangular)&&!(r!=null&&(g.getSymbolWidth()<r.getWidth()||g.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(g.getSymbolWidth()>i.getWidth()||g.getSymbolHeight()>i.getHeight()))&&t<=g.dataCapacity)return g}}catch(m){u={error:m}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),p5=function(n){h5(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(Zt),g5=[new Zt(!1,3,5,8,8,1),new Zt(!1,5,7,10,10,1),new Zt(!0,5,7,16,6,1),new Zt(!1,8,10,12,12,1),new Zt(!0,10,11,14,6,2),new Zt(!1,12,12,14,14,1),new Zt(!0,16,14,24,10,1),new Zt(!1,18,14,16,16,1),new Zt(!1,22,18,18,18,1),new Zt(!0,22,18,16,10,2),new Zt(!1,30,20,20,20,1),new Zt(!0,32,24,16,14,2),new Zt(!1,36,24,22,22,1),new Zt(!1,44,28,24,24,1),new Zt(!0,49,28,22,14,2),new Zt(!1,62,36,14,14,4),new Zt(!1,86,42,16,16,4),new Zt(!1,114,48,18,18,4),new Zt(!1,144,56,20,20,4),new Zt(!1,174,68,22,22,4),new Zt(!1,204,84,24,24,4,102,42),new Zt(!1,280,112,14,14,16,140,56),new Zt(!1,368,144,16,16,16,92,36),new Zt(!1,456,192,18,18,16,114,48),new Zt(!1,576,224,20,20,16,144,56),new Zt(!1,696,272,22,22,16,174,68),new Zt(!1,816,336,24,24,16,136,56),new Zt(!1,1050,408,18,18,36,175,68),new Zt(!1,1304,496,20,20,36,163,62),new p5],v5=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(l){return l.charCodeAt(0)}),r=new Nt,i=0,a=e.length;i<a;i++){var u=String.fromCharCode(e[i]&255);if(u==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(u)}this.msg=r.toString(),this.shape=0,this.codewords=new Nt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Zt.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),m5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),y5=function(n){m5(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return $e},t.prototype.encode=function(e){for(var r=new Nt;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(e,r);var u=jr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(se);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):jr.illegalCharacter(qt.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=r.length();e.pos-=a,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(u5),e.getNewEncoding()<0&&e.signalEncoderChange(se)},t}(ov),_5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),x5=function(n){_5(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Gn},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(ov),jr=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=Ox+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,a){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var u=new ov,l=[new l5,u,new x5,new y5,new f5,new c5],f=new v5(t);f.setSymbolShape(e),f.setSizeConstraints(r,i),t.startsWith(Dx)&&t.endsWith(Mx)?(f.writeCodeword(r5),f.setSkipAtEnd(2),f.pos+=Dx.length):t.startsWith(Nx)&&t.endsWith(Mx)&&(f.writeCodeword(i5),f.setSkipAtEnd(2),f.pos+=Nx.length);var d=se;for(a&&(u.encodeMaximal(f),d=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)l[d].encode(f),f.getNewEncoding()>=0&&(d=f.getNewEncoding(),f.resetEncoderSignal());var g=f.getCodewordCount();f.updateSymbolInfo();var m=f.getSymbolInfo().getDataCapacity();g<m&&d!==se&&d!==Nn&&d!==fn&&f.writeCodeword("þ");var y=f.getCodewords();for(y.length()<m&&y.append(Ox);y.length()<m;)y.append(this.randomize253State(y.length()+1));return f.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===$e&&i===$e){for(var a=Math.min(e+3,t.length),u=e;u<a;u++)if(!this.isNativeX12(t.charCodeAt(u)))return se}else if(r===fn&&i===fn){for(var a=Math.min(e+4,t.length),u=e;u<a;u++)if(!this.isNativeEDIFACT(t.charCodeAt(u)))return se}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===se?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,u=new Uint8Array(6),l=[];;){if(e+a===t.length){tn.fill(u,0),tn.fill(l,0);var f=this.findMinimums(i,l,Lt.MAX_VALUE,u),d=this.getMinimumCount(u);if(l[se]===f)return se;if(d===1){if(u[Nn]>0)return Nn;if(u[fn]>0)return fn;if(u[Gn]>0)return Gn;if(u[$e]>0)return $e}return An}var g=t.charCodeAt(e+a);if(a++,this.isDigit(g)?i[se]+=.5:this.isExtendedASCII(g)?(i[se]=Math.ceil(i[se]),i[se]+=2):(i[se]=Math.ceil(i[se]),i[se]++),this.isNativeC40(g)?i[An]+=2/3:this.isExtendedASCII(g)?i[An]+=8/3:i[An]+=4/3,this.isNativeText(g)?i[Gn]+=2/3:this.isExtendedASCII(g)?i[Gn]+=8/3:i[Gn]+=4/3,this.isNativeX12(g)?i[$e]+=2/3:this.isExtendedASCII(g)?i[$e]+=13/3:i[$e]+=10/3,this.isNativeEDIFACT(g)?i[fn]+=3/4:this.isExtendedASCII(g)?i[fn]+=17/4:i[fn]+=13/4,this.isSpecialB256(g)?i[Nn]+=4:i[Nn]++,a>=4){if(tn.fill(u,0),tn.fill(l,0),this.findMinimums(i,l,Lt.MAX_VALUE,u),l[se]<this.min(l[Nn],l[An],l[Gn],l[$e],l[fn]))return se;if(l[Nn]<l[se]||l[Nn]+1<this.min(l[An],l[Gn],l[$e],l[fn]))return Nn;if(l[fn]+1<this.min(l[Nn],l[An],l[Gn],l[$e],l[se]))return fn;if(l[Gn]+1<this.min(l[Nn],l[An],l[fn],l[$e],l[se]))return Gn;if(l[$e]+1<this.min(l[Nn],l[An],l[fn],l[Gn],l[se]))return $e;if(l[An]+1<this.min(l[se],l[Nn],l[fn],l[Gn])){if(l[An]<l[$e])return An;if(l[An]===l[$e]){for(var m=e+a+1;m<t.length;){var y=t.charCodeAt(m);if(this.isX12TermSep(y))return $e;if(!this.isNativeX12(y))break;m++}return An}}}}},n.min=function(t,e,r,i,a){var u=Math.min(t,Math.min(e,Math.min(r,i)));return a===void 0?u:Math.min(u,a)},n.findMinimums=function(t,e,r,i){for(var a=0;a<6;a++){var u=e[a]=Math.ceil(t[a]);r>u&&(r=u,tn.fill(i,0)),r===u&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=Lt.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),cp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Px=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return Rr.encode(t,this.charset)!=null}catch{return!1}},n}(),E5=function(){function n(t,e,r){var i,a,u,l,f,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(P){return new Px($D.forName(P))}),this.encoders=[];var g=[];g.push(new Px(ZD.ISO_8859_1));for(var m=e!=null&&e.name.startsWith("UTF"),y=0;y<t.length;y++){var x=!1;try{for(var A=(i=void 0,cp(g)),S=A.next();!S.done;S=A.next()){var I=S.value,M=t.charAt(y),O=M.charCodeAt(0);if(O===r||I.canEncode(M)){x=!0;break}}}catch(P){i={error:P}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!x)try{for(var k=(u=void 0,cp(this.ENCODERS)),V=k.next();!V.done;V=k.next()){var I=V.value;if(I.canEncode(t.charAt(y))){g.push(I),x=!0;break}}}catch(P){u={error:P}}finally{try{V&&!V.done&&(l=k.return)&&l.call(k)}finally{if(u)throw u.error}}x||(m=!0)}if(g.length===1&&!m)this.encoders=[g[0]];else{this.encoders=[];var H=0;try{for(var q=cp(g),N=q.next();!N.done;N=q.next()){var I=N.value;this.encoders[H++]=I}}catch(P){f={error:P}}finally{try{N&&!N.done&&(d=q.return)&&d.call(q)}finally{if(f)throw f.error}}}var b=-1;if(e!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&e.name===this.encoders[y].name){b=y;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return Rr.encode(qt.getCharAt(t),this.encoders[e].name)},n}(),A5=3,w5=function(){function n(t,e,r){this.fnc1=r;var i=new E5(t,e,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var u=t.charAt(a).charCodeAt(0);this.bytes[a]=u===r?1e3:u}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new Nt,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,a,u){var l=t.charAt(i).charCodeAt(0),f=0,d=e.length();e.getPriorityEncoderIndex()>=0&&(l===u||e.canEncode(l,e.getPriorityEncoderIndex()))&&(f=e.getPriorityEncoderIndex(),d=f+1);for(var g=f;g<d;g++)(l===u||e.canEncode(l,g))&&this.addEdge(r,i+1,new Lx(l,e,g,a,u))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,a=new Lx[i+1][e.length()];this.addEdges(t,e,a,0,null,r);for(var u=1;u<=i;u++){for(var l=0;l<e.length();l++)a[u][l]!=null&&u<i&&this.addEdges(t,e,a,u,a[u][l],r);for(var l=0;l<e.length();l++)a[u-1][l]=null}for(var f=-1,d=Lt.MAX_VALUE,l=0;l<e.length();l++)if(a[i][l]!=null){var g=a[i][l];g.cachedTotalSize<d&&(d=g.cachedTotalSize,f=l)}if(f<0)throw new Error('Failed to encode "'+t+'"');for(var m=[],y=a[i][f];y!=null;){if(y.isFNC1())m.unshift(1e3);else for(var x=e.encode(y.c,y.encoderIndex),u=x.length-1;u>=0;u--)m.unshift(x[u]&255);var A=y.previous===null?0:y.previous.encoderIndex;A!==y.encoderIndex&&m.unshift(256+e.getECIValue(y.encoderIndex)),y=y.previous}for(var S=[],u=0;u<S.length;u++)S[u]=m[u];return S},n}(),Lx=function(){function n(t,e,r,i,a){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=t===a?1e3:t;var u=this.isFNC1()?1:e.encode(t,r).length,l=i===null?0:i.encoderIndex;l!==r&&(u+=A5),i!=null&&(u+=i.cachedTotalSize),this.cachedTotalSize=u}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),T5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var Bx;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(Bx||(Bx={}));(function(n){T5(t,n);function t(e,r,i,a,u){var l=n.call(this,e,r,i)||this;return l.shape=a,l.macroId=u,l}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(w5);var S5=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),kx=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),C5=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),I5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sv=function(n){I5(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.value=r,a.bitCount=i,a}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Lt.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(C5),b5=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),R5=function(n){b5(t,n);function t(e,r,i){var a=n.call(this,e,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(sv);function O5(n,t,e){return new R5(n,t,e)}function sc(n,t,e){return new sv(n,t,e)}var D5=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],to=0,gd=1,Ir=2,kw=3,li=4,N5=new sv(null,0,0),fp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],M5=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function P5(n){var t,e;try{for(var r=M5(n),i=r.next();!i.done;i=r.next()){var a=i.value;tn.fill(a,-1)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[to][li]=0,n[gd][li]=0,n[gd][to]=28,n[kw][li]=0,n[Ir][li]=0,n[Ir][to]=15,n}var Vw=P5(tn.createInt32Array(6,6)),L5=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},B5=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var a=fp[this.mode][t];i=sc(i,a&65535,a>>16),r+=a>>16}var u=t===Ir?4:5;return i=sc(i,e,u),new n(i,t,0,r+u)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Ir?4:5;return r=sc(r,Vw[this.mode][t],i),r=sc(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===li||this.mode===Ir){var a=fp[r][to];e=sc(e,a&65535,a>>16),i+=a>>16,r=to}var u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(e,r,this.binaryShiftByteCount+1,i+u);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(t+1)),l},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=O5(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(fp[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);var u=new pn;try{for(var l=L5(i),f=l.next();!f.done;f=l.next()){var d=f.value;d.appendTo(u,t)}}catch(g){e={error:g}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return u},n.prototype.toString=function(){return qt.format("%s bits=%d bytes=%d",D5[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(N5,to,0,0),n}();function k5(n){var t=qt.getCharCode(" "),e=qt.getCharCode("."),r=qt.getCharCode(",");n[to][t]=1;for(var i=qt.getCharCode("Z"),a=qt.getCharCode("A"),u=a;u<=i;u++)n[to][u]=u-a+2;n[gd][t]=1;for(var l=qt.getCharCode("z"),f=qt.getCharCode("a"),u=f;u<=l;u++)n[gd][u]=u-f+2;n[Ir][t]=1;for(var d=qt.getCharCode("9"),g=qt.getCharCode("0"),u=g;u<=d;u++)n[Ir][u]=u-g+2;n[Ir][r]=12,n[Ir][e]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<m.length;y++)n[kw][qt.getCharCode(m[y])]=y;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<x.length;y++)qt.getCharCode(x[y])>0&&(n[li][qt.getCharCode(x[y])]=y);return n}var hp=k5(tn.createInt32Array(5,256)),Lh=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},V5=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=qt.getCharCode(" "),e=qt.getCharCode(`
`),r=kx.singletonList(B5.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,u=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case qt.getCharCode("\r"):a=u===e?2:0;break;case qt.getCharCode("."):a=u===t?3:0;break;case qt.getCharCode(","):a=u===t?4:0;break;case qt.getCharCode(":"):a=u===t?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=kx.min(r,function(f,d){return f.getBitCount()-d.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,a=[];try{for(var u=Lh(t),l=u.next();!l.done;l=u.next()){var f=l.value;this.updateStateForChar(f,e,a)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,a=hp[t.getMode()][i]>0,u=null,l=0;l<=li;l++){var f=hp[l][i];if(f>0){if(u==null&&(u=t.endBinaryShift(e)),!a||l===t.getMode()||l===Ir){var d=u.latchAndAppend(l,f);r.push(d)}if(!a&&Vw[t.getMode()][l]>=0){var g=u.shiftAndAppend(l,f);r.push(g)}}}if(t.getBinaryShiftByteCount()>0||hp[t.getMode()][i]===0){var m=t.addBinaryShiftChar(e);r.push(m)}},n.updateStateListForPair=function(t,e,r){var i,a,u=[];try{for(var l=Lh(t),f=l.next();!f.done;f=l.next()){var d=f.value;this.updateStateForPair(d,e,r,u)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(u)},n.updateStateForPair=function(t,e,r,i){var a=t.endBinaryShift(e);if(i.push(a.latchAndAppend(li,r)),t.getMode()!==li&&i.push(a.shiftAndAppend(li,r)),r===3||r===4){var u=a.latchAndAppend(Ir,16-r).latchAndAppend(Ir,1);i.push(u)}if(t.getBinaryShiftByteCount()>0){var l=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(l)}},n.simplifyStates=function(t){var e,r,i,a,u=[];try{for(var l=Lh(t),f=l.next();!f.done;f=l.next()){var d=f.value,g=!0,m=function(I){if(I.isBetterThanOrEqualTo(d))return g=!1,"break";d.isBetterThanOrEqualTo(I)&&(u=u.filter(function(M){return M!==I}))};try{for(var y=(i=void 0,Lh(u)),x=y.next();!x.done;x=y.next()){var A=x.value,S=m(A);if(S==="break")break}}catch(I){i={error:I}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g&&u.push(d)}}catch(I){e={error:I}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return u},n}(),U5=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new V5(t).encode(),a=Lt.truncDivision(i.getSize()*e,100)+11,u=i.getSize()+a,l,f,d,g,m;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,f=Math.abs(r),f>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Et(qt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(f,l),g=n.WORD_SIZE[f];var y=d-d%g;if(m=n.stuffBits(i,g),m.getSize()+a>y)throw new Et("Data to large for user specified layer");if(l&&m.getSize()>g*64)throw new Et("Data to large for user specified layer")}else{g=0,m=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Et("Data too large for an Aztec code");if(l=x<=3,f=l?x+1:x,d=n.totalBitsInLayer(f,l),!(u>d)){(m==null||g!==n.WORD_SIZE[f])&&(g=n.WORD_SIZE[f],m=n.stuffBits(i,g));var y=d-d%g;if(!(l&&m.getSize()>g*64)&&m.getSize()+a<=y)break}}}var A=n.generateCheckWords(m,d,g),S=m.getSize()/g,I=n.generateModeMessage(l,f,S),M=(l?11:14)+f*4,O=new Int32Array(M),k;if(l){k=M;for(var x=0;x<O.length;x++)O[x]=x}else{k=M+1+2*Lt.truncDivision(Lt.truncDivision(M,2)-1,15);for(var V=Lt.truncDivision(M,2),H=Lt.truncDivision(k,2),x=0;x<V;x++){var q=x+Lt.truncDivision(x,15);O[V-x-1]=H-q-1,O[V+x]=H+q+1}}for(var N=new _i(k),x=0,b=0;x<f;x++){for(var P=(f-x)*4+(l?9:12),B=0;B<P;B++)for(var F=B*2,z=0;z<2;z++)A.get(b+F+z)&&N.set(O[x*2+z],O[x*2+B]),A.get(b+P*2+F+z)&&N.set(O[x*2+B],O[M-1-x*2-z]),A.get(b+P*4+F+z)&&N.set(O[M-1-x*2-z],O[M-1-x*2-B]),A.get(b+P*6+F+z)&&N.set(O[M-1-x*2-B],O[x*2+z]);b+=P*8}if(n.drawModeMessage(N,l,k,I),l)n.drawBullsEye(N,Lt.truncDivision(k,2),5);else{n.drawBullsEye(N,Lt.truncDivision(k,2),7);for(var x=0,B=0;x<Lt.truncDivision(M,2)-1;x+=15,B+=16)for(var z=Lt.truncDivision(k,2)&1;z<k;z+=2)N.set(Lt.truncDivision(k,2)-B,z),N.set(Lt.truncDivision(k,2)+B,z),N.set(z,Lt.truncDivision(k,2)-B),N.set(z,Lt.truncDivision(k,2)+B)}var U=new S5;return U.setCompact(l),U.setSize(k),U.setLayers(f),U.setCodeWords(S),U.setMatrix(N),U},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var a=e-i;a<=e+i;a++)t.set(a,e-i),t.set(a,e+i),t.set(e-i,a),t.set(e+i,a);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new pn;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var a=Lt.truncDivision(r,2);if(e)for(var u=0;u<7;u++){var l=a-3+u;i.get(u)&&t.set(l,a-5),i.get(u+7)&&t.set(a+5,l),i.get(20-u)&&t.set(l,a+5),i.get(27-u)&&t.set(a-5,l)}else for(var u=0;u<10;u++){var l=a-5+u+Lt.truncDivision(u,5);i.get(u)&&t.set(l,a-7),i.get(u+10)&&t.set(a+7,l),i.get(29-u)&&t.set(l,a+7),i.get(39-u)&&t.set(a-7,l)}},n.generateCheckWords=function(t,e,r){var i,a,u=t.getSize()/r,l=new Lw(n.getGF(r)),f=Lt.truncDivision(e,r),d=n.bitsToWords(t,r,f);l.encode(d,f-u);var g=e%r,m=new pn;m.appendBits(0,g);try{for(var y=U5(Array.from(d)),x=y.next();!x.done;x=y.next()){var A=x.value;m.appendBits(A,r)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}return m},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),a,u;for(a=0,u=t.getSize()/e;a<u;a++){for(var l=0,f=0;f<e;f++)l|=t.get(a*e+f)?1<<e-f-1:0;i[a]=l}return i},n.getGF=function(t){switch(t){case 4:return $n.AZTEC_PARAM;case 6:return $n.AZTEC_DATA_6;case 8:return $n.AZTEC_DATA_8;case 10:return $n.AZTEC_DATA_10;case 12:return $n.AZTEC_DATA_12;default:throw new Et("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new pn,i=t.getSize(),a=(1<<e)-2,u=0;u<i;u+=e){for(var l=0,f=0;f<e;f++)(u+f>=i||t.get(u+f))&&(l|=1<<e-1-f);(l&a)===a?(r.appendBits(l&a,e),u--):(l&a)===0?(r.appendBits(l|1,e),u--):r.appendBits(l,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const F5=({onDetected:n,onError:t})=>{const e=J.useRef(null),r=J.useRef(new jD),i=J.useRef(!1);return J.useEffect(()=>{const a=e.current;let u;const l=()=>{a.play().catch(g=>console.error("play() failed:",g))},f=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(u,a,(g,m)=>{g&&(r.current.reset(),n(g.getText())),m&&!(m instanceof et)&&(r.current.reset(),t(m.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=u,a.muted=!0,a.addEventListener("loadedmetadata",l),a.addEventListener("playing",f)}catch(g){const m=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${g&&g.message?g.message:""}`;console.log("[BarcodeScanner] onError呼び出し",m),t(m)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",l),a.removeEventListener("playing",f);const g=a.srcObject;g&&g.getTracks().forEach(y=>y.stop()),a.srcObject=null}}},[n,t]),w.jsx(dt,{"data-testid":"barcode-scanner-container",children:w.jsx("video",{ref:e,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},j5={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},z5=({onScan:n,onScanError:t})=>{const[e,r]=J.useState(!1),{setGlobalError:i}=J.useContext(Dr)||{setGlobalError:()=>{}},a=l=>{n(l),r(!1)},u=l=>{i(l),r(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(ye,{variant:"outlined",startIcon:w.jsx(dp,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),w.jsx(cT,{open:e,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:w.jsxs(dt,{sx:j5,children:[w.jsxs(dt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[w.jsx(lt,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),w.jsx(yu,{onClick:()=>r(!1),children:w.jsx(lt,{variant:"h6",children:"×"})})]}),w.jsx(F5,{onDetected:a,onError:u,"data-testid":"barcode-scanner"})]})})]})};function H5(){const[n,t]=J.useState(""),e=Vc(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),t(a)},i=a=>{e(`/book/${a}`)};return w.jsxs(dt,{sx:{maxWidth:500,mx:"auto",mt:{xs:1,sm:2,md:4},pb:{xs:"72px",sm:"80px"},px:{xs:1.5,sm:2,md:0}},children:[w.jsx(lt,{variant:"h5",align:"center",gutterBottom:!0,sx:{mb:{xs:1.5,sm:2},fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},fontWeight:600},"data-testid":"book-add-title",children:"本を追加"}),w.jsx(z5,{onScan:r,onScanError:a=>console.error(a)}),w.jsx(tR,{isbn:n,onBookAdded:i})]})}const uv=n=>{const{user:t}=Zn(),e=J.useContext(Dr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=J.useState([]),[u,l]=J.useState(!0),[f,d]=J.useState(null),g=J.useCallback(async()=>{if(!t||!n){a([]),l(!1);return}try{l(!0),d(null);const A=Ji(en,"books",n,"memos"),S=Qi(A,Ru("createdAt","desc")),M=(await Za(S)).docs.map(O=>({id:O.id,...O.data()}));a(M)}catch(A){console.error("Error fetching memos:",A),r("メモ一覧の取得に失敗しました。"),d("メモ一覧の取得に失敗しました。")}finally{l(!1)}},[t==null?void 0:t.uid,n]),m=J.useCallback(async A=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const S=Ji(en,"books",n,"memos"),I=await Ew(S,{...A,userId:t.uid,createdAt:vi(),updatedAt:vi()}),M={id:I.id,...A,userId:t.uid,createdAt:new Date,updatedAt:new Date};return a(O=>[M,...O]),I.id}catch(S){throw console.error("Error adding memo:",S),r("メモの追加に失敗しました。"),S}},[t==null?void 0:t.uid,n]),y=J.useCallback(async(A,S)=>{if(!t||!n||!A)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const I=ia(en,"books",n,"memos",A);return await Vd(I,{...S,userId:t.uid,updatedAt:vi()}),a(M=>M.map(k=>k.id===A?{...k,...S,userId:t.uid,updatedAt:new Date}:k)),!0}catch(I){throw console.error("Error updating memo:",I),r("メモの更新に失敗しました。"),I}},[t==null?void 0:t.uid,n]),x=J.useCallback(async A=>{if(!t||!n||!A)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const S=ia(en,"books",n,"memos",A);return await H6(S),a(I=>I.filter(M=>M.id!==A)),!0}catch(S){throw console.error("Error deleting memo:",S),r("メモの削除に失敗しました。"),S}},[t==null?void 0:t.uid,n]);return J.useEffect(()=>{g()},[g]),{memos:i,loading:u,error:f,fetchMemos:g,addMemo:m,updateMemo:y,deleteMemo:x}},G5=({memo:n,onEdit:t,onDelete:e,onClick:r})=>{const i=fT("(max-width:600px)"),[a,u]=J.useState(!1),d=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),g=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,m=A=>{A&&A.stopPropagation(),u(!1),typeof t=="function"&&t(n,!0)},y=A=>{A&&A.stopPropagation(),u(!1),e(n.id)},x=Gx({onSwipedLeft:()=>u(!0),onSwipedRight:()=>u(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?w.jsxs(dt,{position:"relative",...x,sx:{mb:2},children:[w.jsxs(Tc,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[w.jsxs(Sc,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[w.jsx(lt,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:d}),n.comment&&w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),w.jsx(_2,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:w.jsxs(pp,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&w.jsxs(lt,{variant:"caption",children:["p.",n.page]}),g&&w.jsx(lt,{variant:"caption",color:"text.secondary",children:g.toLocaleDateString()}),Array.isArray(n.tags)&&n.tags.map((A,S)=>w.jsx(mi,{label:A,size:"small",color:"secondary"},S))]})})]}),a&&w.jsxs(dt,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[w.jsx(yu,{onClick:m,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:w.jsx(gp,{})}),w.jsx(yu,{onClick:y,sx:{bgcolor:"error.main",color:"white"},size:"large",children:w.jsx(x2,{})})]})]}):w.jsxs(Tc,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[w.jsxs(Sc,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[w.jsx(lt,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:d}),n.comment&&w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),w.jsxs(_2,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[w.jsxs(pp,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&w.jsxs(lt,{variant:"caption",children:["p.",n.page]}),g&&w.jsx(lt,{variant:"caption",color:"text.secondary",children:g.toLocaleDateString()}),Array.isArray(n.tags)&&n.tags.map((A,S)=>w.jsx(mi,{label:A,size:"small",color:"secondary"},S))]}),w.jsxs(dt,{sx:{display:{xs:"none",sm:"flex"}},children:[w.jsx(yu,{"aria-label":"edit",onClick:m,size:"small","data-testid":"memo-edit-button",children:w.jsx(gp,{fontSize:"small"})}),w.jsx(yu,{"aria-label":"delete",onClick:y,size:"small","data-testid":"memo-delete-button",children:w.jsx(x2,{fontSize:"small"})})]})]})]})},q5=({open:n,memo:t,bookId:e,onClose:r,onUpdate:i,onDelete:a,editMode:u=!1})=>{const{setGlobalError:l}=J.useContext(Dr),{updateMemo:f,deleteMemo:d}=uv(e),[g,m]=J.useState(u?"edit":"view"),[y,x]=J.useState(null),[A,S]=J.useState(!1),[I,M]=J.useState("");ng.useEffect(()=>{t&&(x(t),m(u?"edit":"view"),S(!1),M(""))},[t,u]);const O=()=>{x(null),m("view"),S(!1),M(""),r()},k=async H=>{if(H.preventDefault(),!y||!y.text.trim())return;let q=y.tags||[];I&&!q.includes(I)&&(q=[...q,I]);try{await f(y.id,{text:y.text,comment:y.comment,page:Number(y.page)||null,tags:q}),O(),i&&i()}catch(N){console.error("Error updating memo: ",N),l("メモの更新に失敗しました。")}},V=async H=>{try{await d(H),O(),a&&a()}catch(q){console.error("Error deleting memo: ",q),l("メモの削除に失敗しました。")}};return t?w.jsxs(w.Fragment,{children:[w.jsxs(is,{open:n,onClose:O,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[w.jsx(as,{"data-testid":"memo-detail-title",children:"メモ詳細"}),w.jsx(os,{children:g==="view"?w.jsxs(w.Fragment,{children:[w.jsx(lt,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:y==null?void 0:y.text}),(y==null?void 0:y.comment)&&w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{mb:1},children:y.comment}),w.jsx(pp,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(y==null?void 0:y.tags)&&y.tags.map((H,q)=>w.jsx(mi,{label:H,size:"small",color:"secondary"},q))}),(y==null?void 0:y.page)&&w.jsxs(lt,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",y.page]}),(y==null?void 0:y.createdAt)&&y.createdAt.toDate&&w.jsx(lt,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:y.createdAt.toDate().toLocaleString()})]}):w.jsxs(dt,{component:"form",onSubmit:k,sx:{mt:1},children:[w.jsx(ue,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(y==null?void 0:y.text)||"",onChange:H=>x({...y,text:H.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),w.jsx(ue,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(y==null?void 0:y.comment)||"",onChange:H=>x({...y,comment:H.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),w.jsx(ue,{label:"ページ番号",type:"number",value:(y==null?void 0:y.page)||"",onChange:H=>x({...y,page:H.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),w.jsx(Du,{multiple:!0,freeSolo:!0,options:[],value:(y==null?void 0:y.tags)||[],getOptionLabel:H=>typeof H=="string"?H:H.inputValue||H.tag||"",onChange:(H,q)=>{const N=(q||[]).map(b=>{if(typeof b=="string")return b;if(b&&typeof b=="object"){if("inputValue"in b&&b.inputValue)return b.inputValue;if("tag"in b&&b.tag)return b.tag}return""}).filter(Boolean);x({...y,tags:N})},inputValue:I,onInputChange:(H,q)=>M(q),renderInput:H=>w.jsx(ue,{...H,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...H.inputProps,"data-testid":"memo-tags-input"}})})]})}),w.jsx(ss,{children:g==="view"?w.jsxs(w.Fragment,{children:[w.jsx(ye,{onClick:()=>m("edit"),"data-testid":"memo-edit-button",children:"編集"}),w.jsx(ye,{onClick:()=>S(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),w.jsx(ye,{onClick:O,"data-testid":"memo-close-button",children:"閉じる"})]}):w.jsxs(w.Fragment,{children:[w.jsx(ye,{onClick:()=>m("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),w.jsx(ye,{onClick:k,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),w.jsxs(is,{open:A,onClose:()=>S(!1),"data-testid":"memo-delete-dialog",children:[w.jsx(as,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),w.jsx(os,{children:w.jsx(lt,{children:"このメモを削除すると、元に戻すことはできません。"})}),w.jsxs(ss,{children:[w.jsx(ye,{onClick:()=>S(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),w.jsx(ye,{onClick:()=>{V(y==null?void 0:y.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},X5=({bookId:n,onMemoUpdated:t})=>{const{setGlobalError:e}=J.useContext(Dr),{memos:r,loading:i,deleteMemo:a}=uv(n),[u,l]=J.useState(null),[f,d]=J.useState(!1),[g,m]=J.useState(!1),[y,x]=J.useState(null),[A,S]=J.useState(!1),I=(q,N=!1)=>{l(q),S(N),d(!0)},M=q=>{const N=r.find(b=>b.id===q);N&&(x(N),m(!0))},O=async()=>{if(y)try{await a(y.id),m(!1),x(null)}catch(q){console.error("Error deleting memo:",q),e("メモの削除に失敗しました。")}},k=()=>{l(null),d(!1)},V=()=>{m(!1),x(null)},H=()=>{t&&t()};return i?w.jsx(lt,{children:"メモを読み込み中..."}):r.length===0?w.jsx(lt,{children:"まだメモはありません。"}):w.jsxs(w.Fragment,{children:[w.jsx(dt,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(q=>w.jsx(G5,{memo:q,onEdit:(N,b)=>I(N,b),onDelete:M,onClick:N=>I(N,!1)},q.id))}),w.jsx(q5,{open:f,memo:u,bookId:n,onClose:k,onUpdate:H,onDelete:H,editMode:A}),w.jsxs(is,{open:g,onClose:V,"data-testid":"memo-delete-dialog",children:[w.jsx(as,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),w.jsx(os,{children:w.jsx(lt,{children:"このメモを削除すると、元に戻すことはできません。"})}),w.jsxs(ss,{children:[w.jsx(ye,{onClick:V,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),w.jsx(ye,{onClick:O,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},Vx=({onTextDetected:n,disabled:t=!1})=>{const[e,r]=J.useState(!1),[i,a]=J.useState(!1),[u,l]=J.useState(0),f=()=>/iPad|iPhone|iPod/.test(navigator.userAgent),d=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),g=()=>f()&&d();J.useEffect(()=>{const S=M=>{if(!i)return;const O=M.clipboardData.getData("text/plain"),k=Date.now();O&&k-u<3e4&&(console.log("[CameraPasteOCR] ペーストされたテキスト:",O),a(!1),n(O),r(!1))},I=M=>{i&&(M.ctrlKey||M.metaKey)&&M.key==="v"&&(console.log("[CameraPasteOCR] キーボードショートカット検出"),setTimeout(()=>{i&&(console.log("[CameraPasteOCR] ペーストイベントが検出されませんでした。手動ペーストを促します。"),A())},100))};return document.addEventListener("paste",S),document.addEventListener("keydown",I),()=>{document.removeEventListener("paste",S),document.removeEventListener("keydown",I)}},[i,u,n]);const m=()=>{g()?(r(!0),a(!0),l(Date.now())):alert("この機能は現在iPhone Safariでのみ利用可能です。")},y=()=>{r(!1),a(!1)},x=()=>{navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(S=>{S?(console.log("[CameraPasteOCR] 手動ペーストされたテキスト:",S),n(S),r(!1)):console.log("[CameraPasteOCR] クリップボードが空です")}).catch(S=>{console.error("[CameraPasteOCR] クリップボード読み取りエラー:",S),console.log("[CameraPasteOCR] 手動入力モードに切り替え")}):console.log("[CameraPasteOCR] navigator.clipboardが利用できません")},A=()=>{const S=document.createElement("textarea");S.style.position="fixed",S.style.left="-9999px",S.style.top="-9999px",S.style.opacity="0",S.setAttribute("data-testid","temp-paste-textarea"),document.body.appendChild(S),S.focus();const I=prompt("コピーしたテキストをここに貼り付けてください（Ctrl+V または Cmd+V）:");I&&I.trim()&&(console.log("[CameraPasteOCR] 手動入力されたテキスト:",I),n(I.trim()),r(!1)),document.body.removeChild(S)};return w.jsxs(w.Fragment,{children:[w.jsx(ye,{variant:"outlined",startIcon:w.jsx(dp,{}),onClick:m,disabled:t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:g()?"カメラでスキャン（コピーしてペースト）":"カメラでスキャン"}),w.jsxs(is,{open:e,onClose:y,maxWidth:"sm",fullWidth:!0,"data-testid":"camera-instructions-dialog",children:[w.jsx(as,{children:w.jsxs(dt,{display:"flex",alignItems:"center",gap:1,children:[w.jsx(dp,{}),"カメラでテキストスキャン"]})}),w.jsxs(os,{children:[w.jsx(lt,{variant:"body1",paragraph:!0,children:"以下の手順でテキストをスキャンしてください："}),w.jsxs(dt,{component:"ol",sx:{pl:2},children:[w.jsx(lt,{component:"li",variant:"body1",paragraph:!0,children:"カメラアプリを手動で起動してください"}),w.jsx(lt,{component:"li",variant:"body1",paragraph:!0,children:"スキャンしたいテキストにカメラを向けてください"}),w.jsx(lt,{component:"li",variant:"body1",paragraph:!0,children:"テキストが認識されたら、テキストをタップして選択してください"}),w.jsx(lt,{component:"li",variant:"body1",paragraph:!0,children:"「コピー」をタップしてテキストをコピーしてください"}),w.jsx(lt,{component:"li",variant:"body1",paragraph:!0,children:"この画面に戻って、下の「ペースト」ボタンをタップしてください"})]}),w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"💡 ヒント：iPhoneのカメラアプリは高精度なOCR機能を搭載しています"}),w.jsx(lt,{variant:"body2",color:"text.secondary",children:"⏱️ 30秒以内にペーストしてください"})]}),w.jsxs(ss,{children:[w.jsx(ye,{onClick:y,children:"キャンセル"}),w.jsx(ye,{onClick:x,startIcon:w.jsx(hT,{}),variant:"contained",color:"primary","data-testid":"manual-paste-button",children:"クリップボードからペースト"})]})]})]})},W5=({bookId:n,bookTags:t=[],onMemoAdded:e,onClose:r})=>{const{user:i}=Zn(),{setGlobalError:a}=J.useContext(Dr),{addMemo:u}=uv(n),[l,f]=J.useState(""),[d,g]=J.useState(""),[m,y]=J.useState(""),[x,A]=J.useState([]),[S,I]=J.useState(""),{tagOptions:M,fetchTagHistory:O,saveTagsToHistory:k}=Zc("memo",i);J.useEffect(()=>{O()},[O]),J.useEffect(()=>{t&&t.length>0&&A(t)},[t]);const V=async b=>{if(b.preventDefault(),!l.trim())return;console.log("MemoAdd - handleSubmit開始:",{text:l,comment:d,page:m,tags:x});let P=x;S&&!x.includes(S)&&(P=[...x,S]),console.log("MemoAdd - 保存するタグ:",P);try{console.log("MemoAdd - addMemo呼び出し前");const B=await u({text:l,comment:d,page:Number(m)||null,tags:P});console.log("MemoAdd - addMemo呼び出し完了, memoId:",B),await k(P),console.log("MemoAdd - フォームリセット前"),f(""),g(""),y(""),A([]),I(""),console.log("MemoAdd - フォームリセット完了"),e&&(console.log("MemoAdd - onMemoAddedコールバック呼び出し"),e())}catch(B){console.error("Error adding memo: ",B),a("メモの追加に失敗しました。")}},H=()=>{r&&r()},q=b=>{console.log("[MemoAdd] OCRで検出されたテキスト:",b),f(b)};return r?w.jsxs(w.Fragment,{children:[w.jsx(as,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),w.jsx(os,{children:w.jsxs(dt,{component:"form",onSubmit:V,sx:{mt:1},"data-testid":"memo-add-form",children:[w.jsx(ue,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:b=>f(b.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),w.jsx(Vx,{onTextDetected:q}),w.jsx(ue,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:b=>g(b.target.value),inputProps:{"data-testid":"memo-comment-input"}}),w.jsx(ue,{label:"ページ番号",type:"number",value:m,onChange:b=>y(b.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),w.jsx(Du,{multiple:!0,freeSolo:!0,options:M,value:x,getOptionLabel:b=>typeof b=="string"?b:b.inputValue||b.tag||"",onChange:async(b,P)=>{const B=(P||[]).map(F=>{if(typeof F=="string")return F;if(F&&typeof F=="object"){if("inputValue"in F&&F.inputValue)return F.inputValue;if("tag"in F&&F.tag)return F.tag}return""}).filter(Boolean);A(B),await k(B)},inputValue:S,onInputChange:(b,P)=>I(P),renderInput:b=>w.jsx(ue,{...b,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...b.inputProps,"data-testid":"memo-tags-input"}})})]})}),w.jsxs(ss,{children:[w.jsx(ye,{onClick:H,"data-testid":"memo-add-cancel",children:"キャンセル"}),w.jsx(ye,{onClick:V,variant:"contained","data-testid":"memo-add-submit",children:"メモを追加"})]})]}):w.jsxs(dt,{component:"form",onSubmit:V,sx:{mt:1},"data-testid":"memo-add-form",children:[w.jsx(ue,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:b=>f(b.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),w.jsx(Vx,{onTextDetected:q}),w.jsx(ue,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:b=>g(b.target.value),inputProps:{"data-testid":"memo-comment-input"}}),w.jsx(ue,{label:"ページ番号",type:"number",value:m,onChange:b=>y(b.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),w.jsx(Du,{multiple:!0,freeSolo:!0,options:M,value:x,getOptionLabel:b=>typeof b=="string"?b:b.inputValue||b.tag||"",onChange:async(b,P)=>{const B=(P||[]).map(F=>{if(typeof F=="string")return F;if(F&&typeof F=="object"){if("inputValue"in F&&F.inputValue)return F.inputValue;if("tag"in F&&F.tag)return F.tag}return""}).filter(Boolean);A(B),await k(B)},inputValue:S,onInputChange:(b,P)=>I(P),renderInput:b=>w.jsx(ue,{...b,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...b.inputProps,"data-testid":"memo-tags-input"}})}),w.jsx(ye,{type:"submit",variant:"contained",sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:"メモを追加"})]})},Y5=({book:n,bookId:t,onStatusChange:e})=>{const r=J.useContext(Dr),i=(r==null?void 0:r.setGlobalError)||(()=>{}),[a,u]=ng.useState(!1);if(!n)return null;const l=n.status||"reading",f=async()=>{if(!n)return;u(!0);const d=n.status==="reading"?"finished":"reading",g=ia(en,"books",t);try{await Vd(g,{status:d,updatedAt:vi()}),e(d)}catch(m){console.error("Error updating status:",m),i("ステータスの更新に失敗しました。")}finally{u(!1)}};return w.jsxs(dt,{"data-testid":"book-info",children:[w.jsxs(dt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:[w.jsx(mi,{label:l==="reading"?"読書中":"読了",color:l==="reading"?"primary":"success","data-testid":"book-status-chip"}),w.jsx(ye,{onClick:f,variant:"outlined",disabled:a,"data-testid":"book-status-change-button",children:a?"更新中...":l==="reading"?"読了にする":"読書中にする"})]}),w.jsx(dt,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?w.jsx("img",{src:n.coverImageUrl,alt:`${n.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):w.jsx(dt,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:w.jsx(lt,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),w.jsxs(dt,{sx:{mb:2},"data-testid":"book-details",children:[w.jsx(lt,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),w.jsx(lt,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&w.jsxs(lt,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",n.publisher]}),n.publishedDate&&w.jsxs(lt,{variant:"body1",color:"text.secondary","data-testid":"book-published-date",children:["出版日: ",n.publishedDate]})]})]})},K5=({book:n,bookId:t,onTagsChange:e})=>{const{user:r}=Zn(),i=J.useContext(Dr),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[u,l]=J.useState(!1),[f,d]=J.useState([]),{tagOptions:g,fetchTagHistory:m,saveTagsToHistory:y}=Zc("book",r);J.useEffect(()=>{m()},[m]);const x=()=>{d(n.tags||[]),l(!0)},A=async()=>{if(n)try{const S=ia(en,"books",t);await Vd(S,{tags:f,updatedAt:vi()}),await y(f),e(f),l(!1)}catch(S){console.error("Error updating tags:",S),a("タグの更新に失敗しました。")}};return n?w.jsxs(dt,{sx:{mb:2},children:[w.jsxs(dt,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[w.jsx(lt,{variant:"h6",children:"タグ:"}),w.jsx(yu,{onClick:x,size:"small","data-testid":"edit-tags-button",children:w.jsx(gp,{})})]}),w.jsx(dt,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((S,I)=>w.jsx(mi,{label:S,size:"small"},I))}),w.jsxs(is,{open:u,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[w.jsx(as,{children:"タグを編集"}),w.jsx(os,{children:w.jsx(Du,{multiple:!0,freeSolo:!0,options:g,value:f,onChange:(S,I)=>d(I),renderInput:S=>w.jsx(ue,{...S,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(S,I)=>S.map((M,O)=>J.createElement(mi,{...I({index:O}),key:O,label:M,size:"small"}))})}),w.jsxs(ss,{children:[w.jsx(ye,{onClick:()=>l(!1),children:"キャンセル"}),w.jsx(ye,{onClick:A,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},Q5=n=>{const{user:t}=Zn(),e=J.useContext(Dr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=J.useState(null),[u,l]=J.useState(!0),[f,d]=J.useState(null),g=J.useCallback(async()=>{if(!t||!n){l(!1);return}try{l(!0),d(null);const A=ia(en,"books",n),S=await z6(A);S.exists()&&S.data().userId===t.uid?a({id:S.id,...S.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),d("書籍が見つからないか、アクセス権限がありません。"))}catch(A){console.error("Error fetching document:",A),r("書籍情報の取得に失敗しました。"),d("書籍情報の取得に失敗しました。")}finally{l(!1)}},[n,t]),m=J.useCallback(async A=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const S=ia(en,"books",n);return await Vd(S,{...A,updatedAt:vi()}),a(I=>({...I,...A})),!0}catch(S){throw console.error("Error updating book:",S),r("書籍情報の更新に失敗しました。"),S}},[n,t]),y=J.useCallback(async A=>await m({status:A}),[m]),x=J.useCallback(async A=>await m({tags:A}),[m]);return J.useEffect(()=>{g()},[g]),{book:i,loading:u,error:f,fetchBook:g,updateBook:m,updateBookStatus:y,updateBookTags:x}},$5=()=>{const{id:n}=CT(),{book:t,loading:e,error:r,updateBookStatus:i,updateBookTags:a}=Q5(n),[u,l]=J.useState(0),[f,d]=J.useState(!1),g=I=>{i(I)},m=I=>{a(I)},y=()=>{console.log("BookDetail - handleMemoAdded: MemoListを再レンダリング"),l(I=>I+1),d(!1)},x=()=>{console.log("BookDetail - handleMemoUpdated: MemoListを再レンダリング"),l(I=>I+1)},A=()=>{d(!0)},S=()=>{d(!1)};return e?w.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):r?w.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",r]}):t?w.jsxs(dt,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[w.jsxs(Uu,{sx:{p:{xs:2,sm:3}},children:[w.jsx(Y5,{book:t,bookId:n,onStatusChange:g}),w.jsx(K5,{book:t,bookId:n,onTagsChange:m}),w.jsx(Fx,{sx:{my:{xs:1,sm:2}}}),w.jsx(lt,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),w.jsx(X5,{bookId:t.id,onMemoUpdated:x},u)]}),w.jsx(dT,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:A,"data-testid":"memo-add-fab",children:w.jsx(pT,{})}),w.jsx(is,{open:f,onClose:S,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:w.jsx(W5,{bookId:t.id,bookTags:t.tags||[],onMemoAdded:y,onClose:S})})]}):w.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"})};function Ux({children:n,value:t,index:e,...r}){return w.jsx("div",{role:"tabpanel",hidden:t!==e,id:`tabpanel-${e}`,"aria-labelledby":`tab-${e}`,...r,children:t===e&&w.jsx(dt,{sx:{p:3},children:n})})}const Z5=n=>{const[t,e]=J.useState({}),[r,i]=J.useState(!1),[a,u]=J.useState(null),l=J.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),u(null),console.log("useTagStats: タグ統計取得開始, userId:",n.uid);const[m,y]=await Promise.all([Za(Qi(Ji(en,"books"),Tr("userId","==",n.uid))),Za(Qi(cw(en,"memos"),Tr("userId","==",n.uid)))]);console.log("useTagStats: データ取得完了, 本:",m.size,"メモ:",y.size);const x={};m.forEach(A=>{const S=A.data();console.log("useTagStats: 本データ:",{id:A.id,title:S.title,tags:S.tags}),S.tags&&Array.isArray(S.tags)&&S.tags.forEach(I=>{var O,k;x[I]||(x[I]={bookCount:0,memoCount:0,lastUsed:null}),x[I].bookCount++;const M=((k=(O=S.updatedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date;(!x[I].lastUsed||M>x[I].lastUsed)&&(x[I].lastUsed=M)})}),console.log("useTagStats: 本のタグ集計完了"),y.forEach(A=>{var I,M;const S=A.data();console.log("useTagStats: メモデータ:",{id:A.id,bookId:(I=A.ref.parent.parent)==null?void 0:I.id,tags:S.tags,text:((M=S.text)==null?void 0:M.substring(0,30))+"..."}),S.tags&&Array.isArray(S.tags)&&S.tags.forEach(O=>{var V,H;x[O]||(x[O]={bookCount:0,memoCount:0,lastUsed:null}),x[O].memoCount++;const k=((H=(V=S.updatedAt)==null?void 0:V.toDate)==null?void 0:H.call(V))||new Date;(!x[O].lastUsed||k>x[O].lastUsed)&&(x[O].lastUsed=k)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",x),e(x),console.log("useTagStats: タグ統計設定完了")}catch(m){console.error("タグ統計の取得に失敗しました:",m),u(m)}finally{i(!1)}},[n==null?void 0:n.uid]),f=J.useCallback((m="count",y="desc")=>Object.entries(t).map(([A,S])=>({tag:A,...S,totalCount:S.bookCount+S.memoCount,type:S.bookCount>0&&S.memoCount>0?"both":S.bookCount>0?"book":"memo"})).sort((A,S)=>{let I=0;switch(m){case"count":I=S.totalCount-A.totalCount;break;case"name":I=A.tag.localeCompare(S.tag,"ja");break;case"lastUsed":I=(S.lastUsed||0)-(A.lastUsed||0);break;default:I=S.totalCount-A.totalCount}return y==="asc"?-I:I}),[t]),d=J.useCallback(m=>t[m]||null,[t]),g=J.useCallback(()=>{e({}),u(null)},[]);return J.useEffect(()=>{n!=null&&n.uid?l():g()},[n==null?void 0:n.uid,l,g]),{tagStats:t,loading:r,error:a,fetchTagStats:l,getSortedTagStats:f,getTagStat:d,clearStats:g}};function J5({onTagClick:n}){const{user:t}=Zn(),{tagStats:e,loading:r,error:i,getSortedTagStats:a}=Z5(t),[u,l]=J.useState("count"),[f,d]=J.useState("desc"),g=a(u,f),m=Object.keys(e).length,y=Object.values(e).reduce((A,S)=>A+S.bookCount,0),x=Object.values(e).reduce((A,S)=>A+S.memoCount,0);return r?w.jsx(dt,{sx:{display:"flex",justifyContent:"center",p:3},children:w.jsx(jx,{})}):i?w.jsx(dt,{sx:{p:2},children:w.jsxs(Cc,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):m===0?w.jsx(dt,{sx:{p:3},children:w.jsx(Cc,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):w.jsxs(dt,{children:[w.jsxs(Uu,{sx:{p:2,mb:3},children:[w.jsx(lt,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),w.jsxs(Ie,{container:!0,spacing:2,children:[w.jsx(Ie,{item:!0,xs:4,children:w.jsxs(dt,{sx:{textAlign:"center"},children:[w.jsx(lt,{variant:"h4",color:"primary",children:m}),w.jsx(lt,{variant:"body2",color:"text.secondary",children:"総タグ数"})]})}),w.jsx(Ie,{item:!0,xs:4,children:w.jsxs(dt,{sx:{textAlign:"center"},children:[w.jsx(lt,{variant:"h4",color:"secondary",children:y}),w.jsx(lt,{variant:"body2",color:"text.secondary",children:"本の総件数"})]})}),w.jsx(Ie,{item:!0,xs:4,children:w.jsxs(dt,{sx:{textAlign:"center"},children:[w.jsx(lt,{variant:"h4",color:"info.main",children:x}),w.jsx(lt,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})})]})]}),w.jsxs(dt,{sx:{mb:2,display:"flex",gap:2,alignItems:"center"},children:[w.jsxs(lt,{variant:"h6",children:["タグ一覧 (",m,"件)"]}),w.jsxs(_u,{size:"small",sx:{minWidth:120},children:[w.jsx(xu,{children:"ソート基準"}),w.jsxs(Eu,{value:u,label:"ソート基準",onChange:A=>l(A.target.value),children:[w.jsx(Mn,{value:"count",children:"使用頻度"}),w.jsx(Mn,{value:"name",children:"名前順"}),w.jsx(Mn,{value:"lastUsed",children:"最終使用日"})]})]}),w.jsxs(_u,{size:"small",sx:{minWidth:100},children:[w.jsx(xu,{children:"順序"}),w.jsxs(Eu,{value:f,label:"順序",onChange:A=>d(A.target.value),children:[w.jsx(Mn,{value:"desc",children:"降順"}),w.jsx(Mn,{value:"asc",children:"昇順"})]})]})]}),w.jsx(Ie,{container:!0,spacing:2,children:g.map(A=>w.jsx(Ie,{item:!0,xs:12,sm:6,md:4,children:w.jsx(Tc,{sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},onClick:()=>n==null?void 0:n(A.tag),"data-testid":`tag-stat-card-${A.tag}`,children:w.jsxs(Sc,{children:[w.jsxs(dt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[w.jsx(lt,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:A.tag}),w.jsx(mi,{label:A.type,size:"small",color:A.type==="both"?"primary":A.type==="book"?"secondary":"info",variant:"outlined"})]}),w.jsxs(dt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[w.jsxs(lt,{variant:"body2",color:"text.secondary",children:["本: ",A.bookCount,"件"]}),w.jsxs(lt,{variant:"body2",color:"text.secondary",children:["メモ: ",A.memoCount,"件"]})]}),w.jsxs(lt,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",A.totalCount,"件"]}),A.lastUsed&&w.jsxs(lt,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",A.lastUsed.toLocaleDateString("ja-JP")]})]})})},A.tag))})]})}function t9({value:n,onChange:t}){const[e,r]=J.useState((n==null?void 0:n.type)||"none"),[i,a]=J.useState((n==null?void 0:n.year)||new Date().getFullYear()),[u,l]=J.useState((n==null?void 0:n.month)||1),[f,d]=J.useState((n==null?void 0:n.quarter)||1),[g,m]=J.useState((n==null?void 0:n.startDate)||""),[y,x]=J.useState((n==null?void 0:n.endDate)||""),A=V=>{const H=V.target.value;r(H);let q={type:H};switch(H){case"year":q.year=i;break;case"month":q.year=i,q.month=u;break;case"quarter":q.year=i,q.quarter=f;break;case"custom":q.startDate=g,q.endDate=y;break}t==null||t(q)},S=V=>{const H=V.target.value;a(H),t==null||t({...n,year:H})},I=V=>{const H=V.target.value;l(H),t==null||t({...n,month:H})},M=V=>{const H=V.target.value;d(H),t==null||t({...n,quarter:H})},O=V=>{const H=V.target.value;m(H),t==null||t({...n,startDate:H})},k=V=>{const H=V.target.value;x(H),t==null||t({...n,endDate:H})};return w.jsxs(dt,{children:[w.jsx(lt,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),w.jsxs(Uu,{sx:{p:2},children:[w.jsxs(_u,{fullWidth:!0,margin:"normal",children:[w.jsx(xu,{children:"日時範囲"}),w.jsxs(Eu,{value:e,onChange:A,label:"日時範囲","data-testid":"date-range-type-select",children:[w.jsx(Mn,{value:"none",children:"指定なし"}),w.jsx(Mn,{value:"year",children:"年別"}),w.jsx(Mn,{value:"month",children:"年月別"}),w.jsx(Mn,{value:"quarter",children:"四半期別"}),w.jsx(Mn,{value:"custom",children:"カスタム期間"})]})]}),(e==="year"||e==="month"||e==="quarter")&&w.jsxs(_u,{fullWidth:!0,margin:"normal",children:[w.jsx(xu,{children:"年"}),w.jsx(Eu,{value:i,onChange:S,label:"年","data-testid":"year-select",children:Array.from({length:10},(V,H)=>new Date().getFullYear()-H).map(V=>w.jsxs(Mn,{value:V,children:[V,"年"]},V))})]}),e==="month"&&w.jsxs(_u,{fullWidth:!0,margin:"normal",children:[w.jsx(xu,{children:"月"}),w.jsx(Eu,{value:u,onChange:I,label:"月","data-testid":"month-select",children:Array.from({length:12},(V,H)=>H+1).map(V=>w.jsxs(Mn,{value:V,children:[V,"月"]},V))})]}),e==="quarter"&&w.jsxs(_u,{fullWidth:!0,margin:"normal",children:[w.jsx(xu,{children:"四半期"}),w.jsxs(Eu,{value:f,onChange:M,label:"四半期","data-testid":"quarter-select",children:[w.jsx(Mn,{value:1,children:"第1四半期（1-3月）"}),w.jsx(Mn,{value:2,children:"第2四半期（4-6月）"}),w.jsx(Mn,{value:3,children:"第3四半期（7-9月）"}),w.jsx(Mn,{value:4,children:"第4四半期（10-12月）"})]})]}),e==="custom"&&w.jsxs(Ie,{container:!0,spacing:2,sx:{mt:1},"data-testid":"custom-date-range-grid",children:[w.jsx(Ie,{xs:6,"data-testid":"start-date-grid-item",children:w.jsx(ue,{label:"開始日",type:"date",value:g,onChange:O,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),w.jsx(Ie,{xs:6,"data-testid":"end-date-grid-item",children:w.jsx(ue,{label:"終了日",type:"date",value:y,onChange:k,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),e!=="none"&&w.jsxs(lt,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e==="year"&&`${i}年に読了した本を検索します`,e==="month"&&`${i}年${u}月に読了した本を検索します`,e==="quarter"&&`${i}年第${f}四半期に読了した本を検索します`,e==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function e9({selectedTags:n=[],onTagsChange:t,type:e="book"}){const{user:r}=Zn(),{tagOptions:i,loading:a,fetchTagHistory:u}=Zc(e,r),[l,f]=J.useState("");J.useEffect(()=>{r&&u()},[r,u]);const d=(y,x)=>{if(x&&!n.includes(x)){const A=[...n,x];t==null||t(A),f("")}},g=y=>{const x=n.filter(A=>A!==y);t==null||t(x)},m=(y,x)=>{f(x)};return w.jsxs(dt,{children:[w.jsx(lt,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),w.jsxs(Uu,{sx:{p:2},children:[w.jsx(Du,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:l,onInputChange:m,onChange:d,renderTags:(y,x)=>y.map((A,S)=>{const{key:I,...M}=x({index:S});return w.jsx(mi,{label:A,...M,onDelete:()=>g(A),color:"primary",variant:"outlined","data-testid":`selected-tag-${A}`},I)}),renderInput:y=>w.jsx(ue,{...y,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`選択されたタグ: ${n.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function n9({memoContent:n="",includeMemoContent:t=!1,onMemoContentChange:e,onIncludeMemoContentChange:r}){const i=u=>{e==null||e(u.target.value)},a=u=>{r==null||r(u.target.checked)};return w.jsxs(dt,{children:[w.jsx(lt,{variant:"subtitle2",gutterBottom:!0,children:"メモ内容検索"}),w.jsxs(Uu,{sx:{p:2},children:[w.jsx(gT,{control:w.jsx(vT,{checked:t,onChange:a,"data-testid":"include-memo-content-checkbox"}),label:"メモ内容も検索対象に含める"}),t&&w.jsx(ue,{label:"メモ内容で検索",value:n,onChange:i,fullWidth:!0,margin:"normal",placeholder:"メモの内容で検索したいキーワードを入力",multiline:!0,rows:3,"data-testid":"memo-content-search-field",helperText:"メモのテキスト内容に含まれるキーワードで検索します"}),!t&&w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"チェックボックスをオンにすると、メモの内容も検索対象に含めることができます"})]})]})}function r9({searchConditions:n,onSearchConditionsChange:t,onSearch:e}){const[r,i]=J.useState("all"),a=y=>{t==null||t({...n,text:y.target.value})},u=(y,x)=>{i(x),t==null||t({...n,status:x})},l=y=>{t==null||t({...n,dateRange:y})},f=y=>{t==null||t({...n,selectedTags:y})},d=y=>{t==null||t({...n,memoContent:y})},g=y=>{t==null||t({...n,includeMemoContent:y})},m=()=>{e==null||e(n)};return w.jsxs(dt,{children:[w.jsx(lt,{variant:"h6",gutterBottom:!0,children:"検索条件"}),w.jsxs(Uu,{sx:{p:2,mb:2},children:[w.jsx(ue,{label:"テキスト検索（タイトル・著者・タグ）",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),w.jsxs(dt,{sx:{mt:2},children:[w.jsx(lt,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),w.jsxs(rg,{value:r,onChange:u,"data-testid":"status-filter-tabs",children:[w.jsx(Xa,{label:"すべて",value:"all"}),w.jsx(Xa,{label:"読書中",value:"reading"}),w.jsx(Xa,{label:"読了",value:"finished"})]})]}),w.jsx(dt,{sx:{mt:2},children:w.jsx(t9,{value:n==null?void 0:n.dateRange,onChange:l})}),w.jsx(dt,{sx:{mt:2},children:w.jsx(e9,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:f,type:"book"})}),w.jsx(dt,{sx:{mt:2},children:w.jsx(n9,{memoContent:(n==null?void 0:n.memoContent)||"",includeMemoContent:(n==null?void 0:n.includeMemoContent)||!1,onMemoContentChange:d,onIncludeMemoContentChange:g})})]}),w.jsx(dt,{sx:{display:"flex",justifyContent:"center"},children:w.jsx(ye,{variant:"contained",onClick:m,"data-testid":"search-button",children:"検索実行"})})]})}function i9({results:n=[],loading:t=!1,searchQuery:e="",onResultClick:r}){const{user:i}=Zn();if(t)return w.jsx(dt,{sx:{display:"flex",justifyContent:"center",p:4},children:w.jsx(jx,{})});if(!n||n.length===0)return w.jsx(dt,{sx:{p:3},children:w.jsx(Cc,{severity:"info",children:e?`「${e}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const a=f=>w.jsx(Tc,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>r==null?void 0:r("memo",f.bookId,f.id),"data-testid":`memo-result-${f.id}`,children:w.jsxs(Sc,{children:[w.jsx(lt,{variant:"h6",component:"h3",gutterBottom:!0,children:f.bookTitle||"メモ"}),w.jsxs(lt,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["ページ: ",f.page]}),f.text&&w.jsx(lt,{variant:"body2",sx:{mt:1,mb:1},children:f.text.length>100?`${f.text.substring(0,100)}...`:f.text}),f.comment&&w.jsx(lt,{variant:"body2",color:"text.secondary",sx:{mb:1},children:f.comment.length>150?`${f.comment.substring(0,150)}...`:f.comment}),w.jsx(dt,{sx:{mt:1},children:f.tags&&f.tags.map((d,g)=>w.jsx(mi,{label:d,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},g))})]})},f.id),u=n.filter(f=>f.type==="book"),l=n.filter(f=>f.type==="memo");return w.jsxs(dt,{children:[w.jsxs(dt,{sx:{mb:3},children:[w.jsxs(lt,{variant:"h6",gutterBottom:!0,children:["検索結果 (",n.length,"件)"]}),w.jsxs(lt,{variant:"body2",color:"text.secondary",children:["本: ",u.length,"件, メモ: ",l.length,"件"]})]}),u.length>0&&w.jsxs(dt,{sx:{mb:4},children:[w.jsxs(lt,{variant:"h6",gutterBottom:!0,children:["本 (",u.length,"件)"]}),w.jsx(Ie,{container:!0,spacing:2,"data-testid":"book-results-grid",children:u.map(f=>w.jsx(Ie,{item:!0,xs:12,sm:6,md:4,"data-testid":`book-grid-item-${f.id}`,children:w.jsx(Tw,{book:f,onClick:()=>r==null?void 0:r("book",f.id),testId:`book-result-${f.id}`})},f.id))})]}),l.length>0&&w.jsxs(dt,{children:[u.length>0&&w.jsx(Fx,{sx:{my:3}}),w.jsxs(lt,{variant:"h6",gutterBottom:!0,children:["メモ (",l.length,"件)"]}),w.jsx(Ie,{container:!0,spacing:2,"data-testid":"memo-results-grid",children:l.map(f=>w.jsx(Ie,{item:!0,xs:12,sm:6,md:4,"data-testid":`memo-grid-item-${f.id}`,children:a(f)},f.id))})]})]})}function a9(n={}){const{user:t}=Zn(),[e,r]=J.useState([]),[i,a]=J.useState(!1),[u,l]=J.useState(null),{limit:f=50}=n,d=J.useCallback(I=>{if(!t)return[];const M=[],{text:O,status:k,dateRange:V,selectedTags:H,memoContent:q,includeMemoContent:N}=I,b=[Tr("userId","==",t.uid)];if(k&&k!=="all"&&b.push(Tr("status","==",k)),V&&V.type!=="none"){const{startDate:B,endDate:F}=g(V);B&&b.push(Tr("updatedAt",">=",B)),F&&b.push(Tr("updatedAt","<=",F))}H&&H.length>0&&(console.log("タグフィルター適用:",H),console.log("タグフィルターの型:",typeof H,Array.isArray(H)),console.log("タグフィルターの内容:",JSON.stringify(H)),!Array.isArray(H)||H.some(B=>Array.isArray(B))?console.log("ネストした配列または無効なタグ形式を検出、クライアントサイドフィルタリングのみ使用"):b.push(Tr("tags","array-contains-any",H)));const P=Qi(Ji(en,"books"),...b,Ru("updatedAt","desc"),rp(f));if(M.push({type:"book",query:P}),N&&q||H&&H.length>0){const B=[Tr("userId","==",t.uid)],F=Qi(cw(en,"memos"),...B,Ru("updatedAt","desc"),rp(f));M.push({type:"memo",query:F})}return M},[t,f]),g=J.useCallback(I=>{const M=new Date;let O=null,k=null;switch(I.type){case"year":I.year&&(O=new Date(I.year,0,1),k=new Date(I.year,11,31,23,59,59));break;case"month":I.year&&I.month&&(O=new Date(I.year,I.month-1,1),k=new Date(I.year,I.month,0,23,59,59));break;case"quarter":if(I.year&&I.quarter){const V=(I.quarter-1)*3;O=new Date(I.year,V,1),k=new Date(I.year,V+3,0,23,59,59)}break;case"custom":I.startDate&&(O=new Date(I.startDate)),I.endDate&&(k=new Date(I.endDate),k.setHours(23,59,59));break;case"recent":I.months&&(O=new Date(M.getFullYear(),M.getMonth()-I.months,M.getDate()),k=M);break}return{startDate:O,endDate:k}},[]),m=J.useCallback((I,M)=>{if(!M)return I;const O=M.toLowerCase();return I.filter(k=>k.type==="book"?k.title&&k.title.toLowerCase().includes(O)||k.author&&k.author.toLowerCase().includes(O)||k.tags&&k.tags.some(V=>V.toLowerCase().includes(O)):k.type==="memo"?k.text&&k.text.toLowerCase().includes(O)||k.comment&&k.comment.toLowerCase().includes(O)||k.tags&&k.tags.some(V=>V.toLowerCase().includes(O)):!1)},[]),y=J.useCallback((I,M)=>{if(!M||M.length===0)return I;const O=V=>{if(!Array.isArray(V))return[];const H=[],q=N=>{Array.isArray(N)?N.forEach(q):typeof N=="string"&&N.trim()&&H.push(N.toLowerCase().trim())};return V.forEach(q),H},k=O(M);return console.log("正規化された選択タグ:",k),I.filter(V=>{if(!V.tags||!Array.isArray(V.tags))return!1;const H=O(V.tags);console.log(`アイテム ${V.id} のタグ:`,H);const q=H.some(N=>k.includes(N));return console.log(`アイテム ${V.id} のマッチ結果:`,q),q})},[]),x=J.useCallback((I,M)=>{if(!M)return I;const O=M.toLowerCase();return I.filter(k=>k.text&&k.text.toLowerCase().includes(O)||k.comment&&k.comment.toLowerCase().includes(O))},[]),A=J.useCallback(async I=>{var M,O;if(!t){l("ユーザーが認証されていません");return}a(!0),l(null);try{console.log("検索条件:",I);const k=d(I);console.log("構築されたクエリ:",k);const V=[];for(const{type:q,query:N}of k){console.log(`${q}クエリ実行開始`);try{const b=await Za(N);if(console.log(`${q}クエリ実行成功, 結果数:`,b.size),q==="memo"){console.log("メモクエリの結果を処理中...");for(const P of b.docs){const B=P.data(),F=(M=P.ref.parent.parent)==null?void 0:M.id;console.log("メモデータ:",{id:P.id,bookId:F,tags:B.tags,userId:B.userId,text:((O=B.text)==null?void 0:O.substring(0,50))+"..."});let z="メモ";if(F)try{const U=await Za(Qi(Ji(en,"books"),Tr("__name__","==",F),Tr("userId","==",t.uid)));U.empty||(z=U.docs[0].data().title||"メモ")}catch(U){console.warn("親の本の情報取得に失敗:",U)}V.push({id:P.id,type:q,bookId:F,bookTitle:z,...B})}console.log("メモ処理完了, 追加されたメモ数:",b.size)}else b.forEach(P=>{const B=P.data();V.push({id:P.id,type:q,...B})})}catch(b){if(console.error(`${q}クエリエラー:`,b),b.code==="failed-precondition"||b.message.includes("index")||b.message.includes("array-contains-any")){console.log("インデックスエラー検出、クライアントサイドフィルタリングにフォールバック");const P=Qi(Ji(en,"books"),Tr("userId","==",t.uid),Ru("updatedAt","desc"),rp(f*2)),B=await Za(P);console.log("フォールバッククエリ実行成功, 結果数:",B.size),B.forEach(F=>{const z=F.data();V.push({id:F.id,type:q,...z})})}else throw b}}console.log("全クエリ実行完了, 総結果数:",V.length),console.log("結果の内訳:",{books:V.filter(q=>q.type==="book").length,memos:V.filter(q=>q.type==="memo").length});let H=m(V,I.text);if(I.selectedTags&&I.selectedTags.length>0&&(console.log("クライアントサイドタグフィルタリング実行:",I.selectedTags),H=y(H,I.selectedTags),console.log("タグフィルタリング後の結果数:",H.length)),I.includeMemoContent&&I.memoContent){const q=H.filter(b=>b.type==="book"),N=x(H.filter(b=>b.type==="memo"),I.memoContent);H=[...q,...N]}H.sort((q,N)=>{const b=I.sortBy||"updatedAt",P=I.sortOrder||"desc";let B=q[b],F=N[b];return(b==="updatedAt"||b==="createdAt")&&(B=B!=null&&B.toDate?B.toDate():new Date(B),F=F!=null&&F.toDate?F.toDate():new Date(F)),typeof B=="string"&&typeof F=="string"&&(B=B.toLowerCase(),F=F.toLowerCase()),P==="asc"?B>F?1:-1:B<F?1:-1}),r(H)}catch(k){console.error("検索エラー:",k),l("検索中にエラーが発生しました")}finally{a(!1)}},[t,d,m,y,x]),S=J.useCallback(()=>{r([]),l(null)},[]);return{results:e,loading:i,error:u,executeSearch:A,clearResults:S}}function o9(){const{user:n}=Zn(),t=Vc(),[e,r]=J.useState(0),[i,a]=J.useState({text:"",status:"all",dateRange:{type:"none"},memoContent:"",selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:u,loading:l,error:f,executeSearch:d,clearResults:g}=a9(),m=(M,O)=>{r(O)},y=M=>{a(M)},x=M=>{console.log("検索実行:",M),d(M)},A=(M,O,k)=>{M==="book"?t(`/book/${O}`):M==="memo"&&t(`/book/${O}?memo=${k}`)},S=()=>{g(),a({text:"",status:"all",dateRange:{type:"none"},memoContent:"",selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},I=M=>{console.log("タグがクリックされました:",M);const O={...i,selectedTags:[M],text:"",memoContent:""};a(O),r(0),d(O)};return n?w.jsxs(dt,{sx:{maxWidth:800,mx:"auto",mt:4,mb:4,pb:"56px"},children:[w.jsx(lt,{variant:"h4",gutterBottom:!0,"data-testid":"tag-search-title",children:"検索・タグ"}),w.jsx(dt,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:w.jsxs(rg,{value:e,onChange:m,centered:!0,"data-testid":"tag-search-tabs",children:[w.jsx(Xa,{label:"高度な検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),w.jsx(Xa,{label:"タグ管理",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),w.jsx(Ux,{value:e,index:0,"data-testid":"search-tab-panel",children:w.jsx(s9,{searchConditions:i,onSearchConditionsChange:y,onSearch:x,results:u,loading:l,error:f,onResultClick:A,onClearSearch:S})}),w.jsx(Ux,{value:e,index:1,"data-testid":"tag-management-tab-panel",children:w.jsx(u9,{onTagClick:I})})]}):w.jsx(dt,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:w.jsx(lt,{variant:"h6",color:"error",children:"ログインが必要です"})})}function s9({searchConditions:n,onSearchConditionsChange:t,onSearch:e,results:r,loading:i,error:a,onResultClick:u,onClearSearch:l}){return w.jsxs(dt,{children:[w.jsx(lt,{variant:"h5",gutterBottom:!0,children:"高度な検索"}),w.jsx(lt,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"複数条件での絞り込み検索ができます。本のタイトル・著者・タグ、メモ内容などで検索できます。"}),w.jsx(r9,{searchConditions:n,onSearchConditionsChange:t,onSearch:e}),a&&w.jsx(dt,{sx:{mt:2},children:w.jsx(Cc,{severity:"error",children:a})}),(r.length>0||i)&&w.jsx(dt,{sx:{mt:4},children:w.jsx(i9,{results:r,loading:i,searchQuery:n.text,onResultClick:u})}),r.length>0&&!i&&w.jsx(dt,{sx:{mt:2,textAlign:"center"},children:w.jsx(lt,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:l,children:"検索結果をクリア"})})]})}function u9({onTagClick:n}){return w.jsxs(dt,{children:[w.jsx(lt,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),w.jsx(lt,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"タグの統計情報を確認し、タグをクリックして検索を実行できます。"}),w.jsx(J5,{onTagClick:n})]})}function l9(){return w.jsxs(dt,{sx:{maxWidth:600,mx:"auto",mt:4,mb:4,p:2},children:[w.jsx(lt,{variant:"h4",gutterBottom:!0,children:"統計ページ（仮実装）"}),w.jsx(lt,{variant:"body1",children:"今後ここに統計・ダッシュボード機能を実装予定です。"})]})}function c9(){const n=Gx({onSwipedLeft:()=>alert("左スワイプ!"),onSwipedRight:()=>alert("右スワイプ!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return w.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[w.jsx("h2",{children:"react-swipeable サンプル"}),w.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:"このエリアを左右にスワイプ（またはドラッグ）してみてください"})]})}const f9=zx({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}});function du({children:n}){const{user:t,loading:e}=Zn();return e?w.jsx("div",{children:"Loading..."}):t?n:w.jsx(Xx,{to:"/login"})}function h9(){const n=Vc(),t=qx(),[e,r]=J.useState(0);return J.useEffect(()=>{t.pathname.startsWith("/add")?r(1):t.pathname.startsWith("/tags")?r(2):t.pathname.startsWith("/stats")?r(3):t.pathname.startsWith("/mypage")?r(4):r(0)},[t.pathname]),w.jsxs(yT,{value:e,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[w.jsx(nc,{label:"本一覧",icon:w.jsx(_T,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),w.jsx(nc,{label:"本を追加",icon:w.jsx(xT,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),w.jsx(nc,{label:"検索・タグ",icon:w.jsx(ET,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),w.jsx(nc,{label:"統計",icon:w.jsx(AT,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),w.jsx(nc,{label:"マイページ",icon:w.jsx(wT,{}),sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function d9(){const n=qx(),{user:t}=Zn(),e=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!t;return w.jsxs(w.Fragment,{children:[w.jsxs(bT,{children:[w.jsx(Wi,{path:"/login",element:w.jsx(W6,{})}),w.jsx(Wi,{path:"/signup",element:w.jsx(Y6,{})}),w.jsx(Wi,{path:"/",element:w.jsx(du,{children:w.jsx($6,{})})}),w.jsx(Wi,{path:"/add",element:w.jsx(du,{children:w.jsx(H5,{})})}),w.jsx(Wi,{path:"/book/:id",element:w.jsx(du,{children:w.jsx($5,{})})}),w.jsx(Wi,{path:"/tags",element:w.jsx(du,{children:w.jsx(o9,{})})}),w.jsx(Wi,{path:"/stats",element:w.jsx(du,{children:w.jsx(l9,{})})}),w.jsx(Wi,{path:"/mypage",element:w.jsx(du,{children:w.jsx(c9,{})})}),w.jsx(Wi,{path:"*",element:w.jsx(Xx,{to:"/"})})]}),!e&&w.jsx(h9,{})]})}function p9(){const[n,t]=J.useState("");return w.jsx(X6,{children:w.jsx(Dr.Provider,{value:{setGlobalError:t},children:w.jsx(IT,{basename:"/project-01-bookmemo",children:w.jsxs(Hx,{theme:f9,children:[w.jsx(mT,{}),w.jsx(d9,{}),w.jsx(K6,{open:!!n,message:n,onClose:()=>t("")})]})})})})}const g9=zx({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});MT.createRoot(document.getElementById("root")).render(w.jsx(J.StrictMode,{children:w.jsx(Hx,{theme:g9,children:w.jsx(p9,{})})}));

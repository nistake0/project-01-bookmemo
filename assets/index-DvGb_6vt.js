var W8=Object.defineProperty;var Y8=(n,e,t)=>e in n?W8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ye=(n,e,t)=>Y8(n,typeof e!="symbol"?e+"":e,t);import{r as V,j as x,B as de,T as se,a as Pt,b as st,C as Fn,c as jn,d as q8,e as Cn,P as da,R as Pi,D as Ba,f as bs,g as Va,A as ao,h as Fa,i as cT,I as Qr,k as c1,l as fm,m as Ma,n as uo,o as X8,M as K8,u as hm,p as Md,q as uT,S as Zh,E as g2,s as dT,F as fa,t as m2,v as Q8,w as id,K as Z8,x as J8,y as Un,_ as H,z as Ne,G as vt,H as Ml,J as It,L as Dt,N as ya,O as At,Q as jt,U as Me,V as mt,W as Od,X as Ve,Y as zh,Z as Jr,$ as $n,a0 as As,a1 as P3,a2 as eN,a3 as wd,a4 as k3,a5 as tN,a6 as nN,a7 as va,a8 as _0,a9 as Js,aa as rN,ab as iN,ac as so,ad as Sc,ae as Yc,af as pm,ag as N3,ah as aN,ai as sN,aj as oN,ak as L3,al as B3,am as V3,an as fT,ao as lN,ap as Pc,aq as ne,ar as F3,as as pl,at as j3,au as cN,av as uN,aw as hT,ax as dN,ay as fN,az as hN,aA as pN,aB as gN,aC as Mw,aD as mN,aE as U3,aF as H3,aG as yN,aH as vN,aI as xN,aJ as wN,aK as wg,aL as _N,aM as bN,aN as z3,aO as $3,aP as AN,aQ as EN,aR as hh,aS as SN,aT as TN,aU as CN,aV as IN,aW as DN}from"./mui-vendor-CWN2u8l0.js";import{r as Ow,a as RN,g as MN}from"./react-vendor-DJG_os-6.js";import{u as b0,a as pT,b as G3,c as ON,d as gm,H as PN,R as kN,e as Zs,N as W3}from"./utils-vendor-BKcajzmI.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var px={exports:{}},ph={},gx={exports:{}},mx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function NN(){return gT||(gT=1,function(n){function e(G,Y){var Q=G.length;G.push(Y);e:for(;0<Q;){var Z=Q-1>>>1,fe=G[Z];if(0<i(fe,Y))G[Z]=Y,G[Q]=fe,Q=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Q=G.pop();if(Q!==Y){G[0]=Q;e:for(var Z=0,fe=G.length,ge=fe>>>1;Z<ge;){var we=2*(Z+1)-1,Ae=G[we],Pe=we+1,Re=G[Pe];if(0>i(Ae,Q))Pe<fe&&0>i(Re,Ae)?(G[Z]=Re,G[Pe]=Q,Z=Pe):(G[Z]=Ae,G[we]=Q,Z=we);else if(Pe<fe&&0>i(Re,Q))G[Z]=Re,G[Pe]=Q,Z=Pe;else break e}}return Y}function i(G,Y){var Q=G.sortIndex-Y.sortIndex;return Q!==0?Q:G.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,y=!1,v=!1,b=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function I(G){for(var Y=t(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=G)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=t(d)}}function O(G){if(b=!1,I(G),!v)if(t(c)!==null)v=!0,N||(N=!0,P());else{var Y=t(d);Y!==null&&X(O,Y.startTime-G)}}var N=!1,M=-1,R=5,D=-1;function B(){return A?!0:!(n.unstable_now()-D<R)}function L(){if(A=!1,N){var G=n.unstable_now();D=G;var Y=!0;try{e:{v=!1,b&&(b=!1,T(M),M=-1),y=!0;var Q=g;try{t:{for(I(G),p=t(c);p!==null&&!(p.expirationTime>G&&B());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var fe=Z(p.expirationTime<=G);if(G=n.unstable_now(),typeof fe=="function"){p.callback=fe,I(G),Y=!0;break t}p===t(c)&&r(c),I(G)}else r(c);p=t(c)}if(p!==null)Y=!0;else{var ge=t(d);ge!==null&&X(O,ge.startTime-G),Y=!1}}break e}finally{p=null,g=Q,y=!1}Y=void 0}}finally{Y?P():N=!1}}}var P;if(typeof C=="function")P=function(){C(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=L,P=function(){q.postMessage(null)}}else P=function(){E(L,0)};function X(G,Y){M=E(function(){G(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Q=g;g=Y;try{return G()}finally{g=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=g;g=G;try{return Y()}finally{g=Q}},n.unstable_scheduleCallback=function(G,Y,Q){var Z=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Z+Q:Z):Q=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,G={id:f++,callback:Y,priorityLevel:G,startTime:Q,expirationTime:fe,sortIndex:-1},Q>Z?(G.sortIndex=Q,e(d,G),t(c)===null&&G===t(d)&&(b?(T(M),M=-1):b=!0,X(O,Q-Z))):(G.sortIndex=fe,e(c,G),v||y||(v=!0,N||(N=!0,P()))),G},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(G){var Y=g;return function(){var Q=g;g=Y;try{return G.apply(this,arguments)}finally{g=Q}}}}(mx)),mx}var mT;function LN(){return mT||(mT=1,gx.exports=NN()),gx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function BN(){if(yT)return ph;yT=1;var n=LN(),e=Ow(),t=RN();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,m=u;;){var _=h.return;if(_===null)break;var S=_.alternate;if(S===null){if(m=_.return,m!==null){h=m;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===h)return o(_),l;if(S===m)return o(_),u;S=S.sibling}throw Error(r(188))}if(h.return!==m.return)h=_,m=S;else{for(var U=!1,z=_.child;z;){if(z===h){U=!0,h=_,m=S;break}if(z===m){U=!0,m=_,h=S;break}z=z.sibling}if(!U){for(z=S.child;z;){if(z===h){U=!0,h=S,m=_;break}if(z===m){U=!0,m=S,h=_;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case C:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case I:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case R:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Z=[],fe=-1;function ge(l){return{current:l}}function we(l){0>fe||(l.current=Z[fe],Z[fe]=null,fe--)}function Ae(l,u){fe++,Z[fe]=l.current,l.current=u}var Pe=ge(null),Re=ge(null),He=ge(null),Ue=ge(null);function Qe(l,u){switch(Ae(He,u),Ae(Re,l),Ae(Pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?BS(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=BS(u),l=VS(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}we(Pe),Ae(Pe,l)}function ae(){we(Pe),we(Re),we(He)}function me(l){l.memoizedState!==null&&Ae(Ue,l);var u=Pe.current,h=VS(u,l.type);u!==h&&(Ae(Re,l),Ae(Pe,h))}function he(l){Re.current===l&&(we(Pe),we(Re)),Ue.current===l&&(we(Ue),lh._currentValue=Q)}var te=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,ve=n.unstable_cancelCallback,je=n.unstable_shouldYield,De=n.unstable_requestPaint,Ce=n.unstable_now,We=n.unstable_getCurrentPriorityLevel,$e=n.unstable_ImmediatePriority,Ie=n.unstable_UserBlockingPriority,Oe=n.unstable_NormalPriority,ut=n.unstable_LowPriority,xt=n.unstable_IdlePriority,hn=n.log,In=n.unstable_setDisableYieldValue,tt=null,rt=null;function _n(l){if(typeof hn=="function"&&In(l),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(tt,l)}catch{}}var Xe=Math.clz32?Math.clz32:Zt,ht=Math.log,kt=Math.LN2;function Zt(l){return l>>>=0,l===0?32:31-(ht(l)/kt|0)|0}var vn=256,bn=4194304;function Wt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function jr(l,u,h){var m=l.pendingLanes;if(m===0)return 0;var _=0,S=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=m&134217727;return z!==0?(m=z&~S,m!==0?_=Wt(m):(U&=z,U!==0?_=Wt(U):h||(h=z&~l,h!==0&&(_=Wt(h))))):(z=m&~S,z!==0?_=Wt(z):U!==0?_=Wt(U):h||(h=m&~l,h!==0&&(_=Wt(h)))),_===0?0:u!==0&&u!==_&&(u&S)===0&&(S=_&-_,h=u&-u,S>=h||S===32&&(h&4194048)!==0)?u:_}function pt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Pn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wn(){var l=vn;return vn<<=1,(vn&4194048)===0&&(vn=256),l}function Ur(){var l=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),l}function hi(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function tr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Fl(l,u,h,m,_,S){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,K=l.expirationTimes,oe=l.hiddenUpdates;for(h=U&~h;0<h;){var _e=31-Xe(h),Se=1<<_e;z[_e]=0,K[_e]=-1;var ce=oe[_e];if(ce!==null)for(oe[_e]=null,_e=0;_e<ce.length;_e++){var ue=ce[_e];ue!==null&&(ue.lane&=-536870913)}h&=~Se}m!==0&&qi(l,m,0),S!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=S&~(U&~u))}function qi(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var m=31-Xe(u);l.entangledLanes|=u,l.entanglements[m]=l.entanglements[m]|1073741824|h&4194090}function au(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var m=31-Xe(h),_=1<<m;_&u|l[m]&u&&(l[m]|=u),h&=~_}}function Is(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function pn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function nr(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:rT(l.type))}function jl(l,u){var h=Y.p;try{return Y.p=l,u()}finally{Y.p=h}}var Dn=Math.random().toString(36).slice(2),pr="__reactFiber$"+Dn,rr="__reactProps$"+Dn,Xi="__reactContainer$"+Dn,hf="__reactEvents$"+Dn,yy="__reactListeners$"+Dn,Do="__reactHandles$"+Dn,ep="__reactResources$"+Dn,Ul="__reactMarker$"+Dn;function Ro(l){delete l[pr],delete l[rr],delete l[hf],delete l[yy],delete l[Do]}function Ds(l){var u=l[pr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[Xi]||h[pr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=HS(l);l!==null;){if(h=l[pr])return h;l=HS(l)}return u}l=h,h=l.parentNode}return null}function Ga(l){if(l=l[pr]||l[Xi]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Wa(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function pi(l){var u=l[ep];return u||(u=l[ep]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Yn(l){l[Ul]=!0}var pf=new Set,su={};function wa(l,u){Rs(l,u),Rs(l+"Capture",u)}function Rs(l,u){for(su[l]=u,l=0;l<u.length;l++)pf.add(u[l])}var tp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),np={},Hl={};function rp(l){return te.call(Hl,l)?!0:te.call(np,l)?!1:tp.test(l)?Hl[l]=!0:(np[l]=!0,!1)}function Mo(l,u,h){if(rp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Ya(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function Hr(l,u,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+m)}}var zl,ip;function Ms(l){if(zl===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);zl=u&&u[1]||"",ip=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zl+l+ip}var ou=!1;function lu(l,u){if(!l||ou)return"";ou=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ue){var ce=ue}Reflect.construct(l,[],Se)}else{try{Se.call()}catch(ue){ce=ue}l.call(Se.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(Se=l())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),U=S[0],z=S[1];if(U&&z){var K=U.split(`
`),oe=z.split(`
`);for(_=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;_<oe.length&&!oe[_].includes("DetermineComponentFrameRoot");)_++;if(m===K.length||_===oe.length)for(m=K.length-1,_=oe.length-1;1<=m&&0<=_&&K[m]!==oe[_];)_--;for(;1<=m&&0<=_;m--,_--)if(K[m]!==oe[_]){if(m!==1||_!==1)do if(m--,_--,0>_||K[m]!==oe[_]){var _e=`
`+K[m].replace(" at new "," at ");return l.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",l.displayName)),_e}while(1<=m&&0<=_);break}}}finally{ou=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Ms(h):""}function gf(l){switch(l.tag){case 26:case 27:case 5:return Ms(l.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return lu(l.type,!1);case 11:return lu(l.type.render,!1);case 1:return lu(l.type,!0);case 31:return Ms("Activity");default:return""}}function cu(l){try{var u="";do u+=gf(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function gi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function mf(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function vy(l){var u=mf(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),m=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,S=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){m=""+U,S.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(U){m=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function uu(l){l._valueTracker||(l._valueTracker=vy(l))}function yf(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return l&&(m=mf(l)?l.checked?"true":"false":l.value),l=m,l!==h?(u.setValue(l),!0):!1}function $l(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var xy=/[\n"\\]/g;function ir(l){return l.replace(xy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ni(l,u,h,m,_,S,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+gi(u)):l.value!==""+gi(u)&&(l.value=""+gi(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?Oo(l,U,gi(u)):h!=null?Oo(l,U,gi(h)):m!=null&&l.removeAttribute("value"),_==null&&S!=null&&(l.defaultChecked=!!S),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+gi(z):l.removeAttribute("name")}function Gl(l,u,h,m,_,S,U,z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;h=h!=null?""+gi(h):"",u=u!=null?""+gi(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=z?l.checked:!!m,l.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function Oo(l,u,h){u==="number"&&$l(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Os(l,u,h,m){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&m&&(l[h].defaultSelected=!0)}else{for(h=""+gi(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,m&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function ln(l,u,h){if(u!=null&&(u=""+gi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+gi(h):""}function Wl(l,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(r(92));if(X(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=gi(u),l.defaultValue=h,m=l.textContent,m===h&&m!==""&&m!==null&&(l.value=m)}function Ki(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Yl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ap(l,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":m?l.setProperty(u,h):typeof h!="number"||h===0||Yl.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function vf(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var _ in u)m=u[_],u.hasOwnProperty(_)&&h[_]!==m&&ap(l,_,m)}else for(var S in u)u.hasOwnProperty(S)&&ap(l,S,u[S])}function xf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function du(l){return _y.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ps=null;function Qi(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ks=null,Ns=null;function wf(l){var u=Ga(l);if(u&&(l=u.stateNode)){var h=l[rr]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ni(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ir(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==l&&m.form===l.form){var _=m[rr]||null;if(!_)throw Error(r(90));Ni(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===l.form&&yf(m)}break e;case"textarea":ln(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Os(l,!!h.multiple,u,!1)}}}var qa=!1;function sp(l,u,h){if(qa)return l(u,h);qa=!0;try{var m=l(u);return m}finally{if(qa=!1,(ks!==null||Ns!==null)&&(Jp(),ks&&(u=ks,l=Ns,Ns=ks=null,wf(u),l)))for(u=0;u<l.length;u++)wf(l[u])}}function ql(l,u){var h=l.stateNode;if(h===null)return null;var m=h[rr]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zi=!1;if(_a)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Zi=!1}var Xa=null,Po=null,Ls=null;function _f(){if(Ls)return Ls;var l,u=Po,h=u.length,m,_="value"in Xa?Xa.value:Xa.textContent,S=_.length;for(l=0;l<h&&u[l]===_[l];l++);var U=h-l;for(m=1;m<=U&&u[h-m]===_[S-m];m++);return Ls=_.slice(l,1<m?1-m:void 0)}function Ka(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Qa(){return!0}function bf(){return!1}function Ir(l){function u(h,m,_,S,U){this._reactName=h,this._targetInst=_,this.type=m,this.nativeEvent=S,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Qa:bf,this.isPropagationStopped=bf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),u}var Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=Ir(Jt),Kl=f({},Jt,{view:0,detail:0}),op=Ir(Kl),hu,pu,Za,Ql=f({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Za&&(Za&&l.type==="mousemove"?(hu=l.screenX-Za.screenX,pu=l.screenY-Za.screenY):pu=hu=0,Za=l),hu)},movementY:function(l){return"movementY"in l?l.movementY:pu}}),Ji=Ir(Ql),lp=f({},Ql,{dataTransfer:0}),by=Ir(lp),Zl=f({},Kl,{relatedTarget:0}),gu=Ir(Zl),Af=f({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0}),mu=Ir(Af),cp=f({},Jt,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),yu=Ir(cp),Ay=f({},Jt,{data:0}),Ef=Ir(Ay),Jl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=dp[l])?!!u[l]:!1}function ec(){return Sf}var fp=f({},Kl,{key:function(l){if(l.key){var u=Jl[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ka(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?up[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(l){return l.type==="keypress"?Ka(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ka(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),vu=Ir(fp),hp=f({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=Ir(hp),Bs=f({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),pp=Ir(Bs),gp=f({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),mp=Ir(gp),yp=f({},Ql,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=Ir(yp),mi=f({},Jt,{newState:0,oldState:0}),vp=Ir(mi),xp=[9,13,27,32],Ja=_a&&"CompositionEvent"in window,w=null;_a&&"documentMode"in document&&(w=document.documentMode);var k=_a&&"TextEvent"in window&&!w,j=_a&&(!Ja||w&&8<w&&11>=w),$=" ",re=!1;function pe(l,u){switch(l){case"keyup":return xp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ke(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nt=!1;function gr(l,u){switch(l){case"compositionend":return ke(u);case"keypress":return u.which!==32?null:(re=!0,$);case"textInput":return l=u.data,l===$&&re?null:l;default:return null}}function Lt(l,u){if(Nt)return l==="compositionend"||!Ja&&pe(l,u)?(l=_f(),Ls=Po=Xa=null,Nt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var Dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Dr[l.type]:u==="textarea"}function Vs(l,u,h,m){ks?Ns?Ns.push(m):Ns=[m]:ks=m,u=ag(u,"onChange"),0<u.length&&(h=new fu("onChange","change",null,h,m),l.push({event:h,listeners:u}))}var zr=null,es=null;function Cf(l){OS(l,0)}function wp(l){var u=Wa(l);if(yf(u))return l}function Jb(l,u){if(l==="change")return u}var eA=!1;if(_a){var Ey;if(_a){var Sy="oninput"in document;if(!Sy){var tA=document.createElement("div");tA.setAttribute("oninput","return;"),Sy=typeof tA.oninput=="function"}Ey=Sy}else Ey=!1;eA=Ey&&(!document.documentMode||9<document.documentMode)}function nA(){zr&&(zr.detachEvent("onpropertychange",rA),es=zr=null)}function rA(l){if(l.propertyName==="value"&&wp(es)){var u=[];Vs(u,es,l,Qi(l)),sp(Cf,u)}}function b6(l,u,h){l==="focusin"?(nA(),zr=u,es=h,zr.attachEvent("onpropertychange",rA)):l==="focusout"&&nA()}function A6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return wp(es)}function E6(l,u){if(l==="click")return wp(u)}function S6(l,u){if(l==="input"||l==="change")return wp(u)}function T6(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Li=typeof Object.is=="function"?Object.is:T6;function If(l,u){if(Li(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var _=h[m];if(!te.call(u,_)||!Li(l[_],u[_]))return!1}return!0}function iA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function aA(l,u){var h=iA(l);l=0;for(var m;h;){if(h.nodeType===3){if(m=l+h.textContent.length,l<=u&&m>=u)return{node:h,offset:u-l};l=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=iA(h)}}function sA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?sA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function oA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=$l(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=$l(l.document)}return u}function Ty(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var C6=_a&&"documentMode"in document&&11>=document.documentMode,wu=null,Cy=null,Df=null,Iy=!1;function lA(l,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Iy||wu==null||wu!==$l(m)||(m=wu,"selectionStart"in m&&Ty(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Df&&If(Df,m)||(Df=m,m=ag(Cy,"onSelect"),0<m.length&&(u=new fu("onSelect","select",null,u,h),l.push({event:u,listeners:m}),u.target=wu)))}function tc(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var _u={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionrun:tc("Transition","TransitionRun"),transitionstart:tc("Transition","TransitionStart"),transitioncancel:tc("Transition","TransitionCancel"),transitionend:tc("Transition","TransitionEnd")},Dy={},cA={};_a&&(cA=document.createElement("div").style,"AnimationEvent"in window||(delete _u.animationend.animation,delete _u.animationiteration.animation,delete _u.animationstart.animation),"TransitionEvent"in window||delete _u.transitionend.transition);function nc(l){if(Dy[l])return Dy[l];if(!_u[l])return l;var u=_u[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in cA)return Dy[l]=u[h];return l}var uA=nc("animationend"),dA=nc("animationiteration"),fA=nc("animationstart"),I6=nc("transitionrun"),D6=nc("transitionstart"),R6=nc("transitioncancel"),hA=nc("transitionend"),pA=new Map,Ry="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ry.push("scrollEnd");function ba(l,u){pA.set(l,u),wa(u,[l])}var gA=new WeakMap;function ea(l,u){if(typeof l=="object"&&l!==null){var h=gA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:cu(u)},gA.set(l,u),u)}return{value:l,source:u,stack:cu(u)}}var ta=[],bu=0,My=0;function _p(){for(var l=bu,u=My=bu=0;u<l;){var h=ta[u];ta[u++]=null;var m=ta[u];ta[u++]=null;var _=ta[u];ta[u++]=null;var S=ta[u];if(ta[u++]=null,m!==null&&_!==null){var U=m.pending;U===null?_.next=_:(_.next=U.next,U.next=_),m.pending=_}S!==0&&mA(h,_,S)}}function bp(l,u,h,m){ta[bu++]=l,ta[bu++]=u,ta[bu++]=h,ta[bu++]=m,My|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function Oy(l,u,h,m){return bp(l,u,h,m),Ap(l)}function Au(l,u){return bp(l,null,null,u),Ap(l)}function mA(l,u,h){l.lanes|=h;var m=l.alternate;m!==null&&(m.lanes|=h);for(var _=!1,S=l.return;S!==null;)S.childLanes|=h,m=S.alternate,m!==null&&(m.childLanes|=h),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(_=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,_&&u!==null&&(_=31-Xe(h),l=S.hiddenUpdates,m=l[_],m===null?l[_]=[u]:m.push(u),u.lane=h|536870912),S):null}function Ap(l){if(50<eh)throw eh=0,Vv=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Eu={};function M6(l,u,h,m){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(l,u,h,m){return new M6(l,u,h,m)}function Py(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Fs(l,u){var h=l.alternate;return h===null?(h=Bi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function yA(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Ep(l,u,h,m,_,S){var U=0;if(m=l,typeof l=="function")Py(l)&&(U=1);else if(typeof l=="string")U=P8(l,h,Pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case D:return l=Bi(31,h,u,_),l.elementType=D,l.lanes=S,l;case v:return rc(h.children,_,S,u);case b:U=8,_|=24;break;case A:return l=Bi(12,h,u,_|2),l.elementType=A,l.lanes=S,l;case O:return l=Bi(13,h,u,_),l.elementType=O,l.lanes=S,l;case N:return l=Bi(19,h,u,_),l.elementType=N,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case C:U=10;break e;case T:U=9;break e;case I:U=11;break e;case M:U=14;break e;case R:U=16,m=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),m=null}return u=Bi(U,h,u,_),u.elementType=l,u.type=m,u.lanes=S,u}function rc(l,u,h,m){return l=Bi(7,l,m,u),l.lanes=h,l}function ky(l,u,h){return l=Bi(6,l,null,u),l.lanes=h,l}function Ny(l,u,h){return u=Bi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Su=[],Tu=0,Sp=null,Tp=0,na=[],ra=0,ic=null,js=1,Us="";function ac(l,u){Su[Tu++]=Tp,Su[Tu++]=Sp,Sp=l,Tp=u}function vA(l,u,h){na[ra++]=js,na[ra++]=Us,na[ra++]=ic,ic=l;var m=js;l=Us;var _=32-Xe(m)-1;m&=~(1<<_),h+=1;var S=32-Xe(u)+_;if(30<S){var U=_-_%5;S=(m&(1<<U)-1).toString(32),m>>=U,_-=U,js=1<<32-Xe(u)+_|h<<_|m,Us=S+l}else js=1<<S|h<<_|m,Us=l}function Ly(l){l.return!==null&&(ac(l,1),vA(l,1,0))}function By(l){for(;l===Sp;)Sp=Su[--Tu],Su[Tu]=null,Tp=Su[--Tu],Su[Tu]=null;for(;l===ic;)ic=na[--ra],na[ra]=null,Us=na[--ra],na[ra]=null,js=na[--ra],na[ra]=null}var yi=null,Bn=null,Yt=!1,sc=null,ts=!1,Vy=Error(r(519));function oc(l){var u=Error(r(418,""));throw Of(ea(u,l)),Vy}function xA(l){var u=l.stateNode,h=l.type,m=l.memoizedProps;switch(u[pr]=l,u[rr]=m,h){case"dialog":Ct("cancel",u),Ct("close",u);break;case"iframe":case"object":case"embed":Ct("load",u);break;case"video":case"audio":for(h=0;h<nh.length;h++)Ct(nh[h],u);break;case"source":Ct("error",u);break;case"img":case"image":case"link":Ct("error",u),Ct("load",u);break;case"details":Ct("toggle",u);break;case"input":Ct("invalid",u),Gl(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),uu(u);break;case"select":Ct("invalid",u);break;case"textarea":Ct("invalid",u),Wl(u,m.value,m.defaultValue,m.children),uu(u)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||LS(u.textContent,h)?(m.popover!=null&&(Ct("beforetoggle",u),Ct("toggle",u)),m.onScroll!=null&&Ct("scroll",u),m.onScrollEnd!=null&&Ct("scrollend",u),m.onClick!=null&&(u.onclick=sg),u=!0):u=!1,u||oc(l)}function wA(l){for(yi=l.return;yi;)switch(yi.tag){case 5:case 13:ts=!1;return;case 27:case 3:ts=!0;return;default:yi=yi.return}}function Rf(l){if(l!==yi)return!1;if(!Yt)return wA(l),Yt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||ex(l.type,l.memoizedProps)),h=!h),h&&Bn&&oc(l),wA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Bn=Ea(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Bn=null}}else u===27?(u=Bn,Xo(l.type)?(l=ix,ix=null,Bn=l):Bn=u):Bn=yi?Ea(l.stateNode.nextSibling):null;return!0}function Mf(){Bn=yi=null,Yt=!1}function _A(){var l=sc;return l!==null&&(Ti===null?Ti=l:Ti.push.apply(Ti,l),sc=null),l}function Of(l){sc===null?sc=[l]:sc.push(l)}var Fy=ge(null),lc=null,Hs=null;function ko(l,u,h){Ae(Fy,u._currentValue),u._currentValue=h}function zs(l){l._currentValue=Fy.current,we(Fy)}function jy(l,u,h){for(;l!==null;){var m=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),l===h)break;l=l.return}}function Uy(l,u,h,m){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var S=_.dependencies;if(S!==null){var U=_.child;S=S.firstContext;e:for(;S!==null;){var z=S;S=_;for(var K=0;K<u.length;K++)if(z.context===u[K]){S.lanes|=h,z=S.alternate,z!==null&&(z.lanes|=h),jy(S.return,h,l),m||(U=null);break e}S=z.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(r(341));U.lanes|=h,S=U.alternate,S!==null&&(S.lanes|=h),jy(U,h,l),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===l){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function Pf(l,u,h,m){l=null;for(var _=u,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=_.type;Li(_.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ue.current){if(U=_.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(lh):l=[lh])}_=_.return}l!==null&&Uy(u,l,h,m),u.flags|=262144}function Cp(l){for(l=l.firstContext;l!==null;){if(!Li(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function cc(l){lc=l,Hs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ti(l){return bA(lc,l)}function Ip(l,u){return lc===null&&cc(l),bA(l,u)}function bA(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Hs===null){if(l===null)throw Error(r(308));Hs=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Hs=Hs.next=u;return h}var O6=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,m){l.push(m)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},P6=n.unstable_scheduleCallback,k6=n.unstable_NormalPriority,yr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hy(){return{controller:new O6,data:new Map,refCount:0}}function kf(l){l.refCount--,l.refCount===0&&P6(k6,function(){l.controller.abort()})}var Nf=null,zy=0,Cu=0,Iu=null;function N6(l,u){if(Nf===null){var h=Nf=[];zy=0,Cu=Gv(),Iu={status:"pending",value:void 0,then:function(m){h.push(m)}}}return zy++,u.then(AA,AA),u}function AA(){if(--zy===0&&Nf!==null){Iu!==null&&(Iu.status="fulfilled");var l=Nf;Nf=null,Cu=0,Iu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function L6(l,u){var h=[],m={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){m.status="fulfilled",m.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(m.status="rejected",m.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),m}var EA=G.S;G.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&N6(l,u),EA!==null&&EA(l,u)};var uc=ge(null);function $y(){var l=uc.current;return l!==null?l:xn.pooledCache}function Dp(l,u){u===null?Ae(uc,uc.current):Ae(uc,u.pool)}function SA(){var l=$y();return l===null?null:{parent:yr._currentValue,pool:l}}var Lf=Error(r(460)),TA=Error(r(474)),Rp=Error(r(542)),Gy={then:function(){}};function CA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Mp(){}function IA(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Mp,Mp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,RA(l),l;default:if(typeof u.status=="string")u.then(Mp,Mp);else{if(l=xn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(m){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=m}},function(m){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,RA(l),l}throw Bf=u,Lf}}var Bf=null;function DA(){if(Bf===null)throw Error(r(459));var l=Bf;return Bf=null,l}function RA(l){if(l===Lf||l===Rp)throw Error(r(483))}var No=!1;function Wy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Lo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Bo(l,u,h){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(nn&2)!==0){var _=m.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),m.pending=u,u=Ap(l),mA(l,null,h),u}return bp(l,m,u,h),Ap(l)}function Vf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,au(l,h)}}function qy(l,u){var h=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var _=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?_=S=U:S=S.next=U,h=h.next}while(h!==null);S===null?_=S=u:S=S.next=u}else _=S=u;h={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var Xy=!1;function Ff(){if(Xy){var l=Iu;if(l!==null)throw l}}function jf(l,u,h,m){Xy=!1;var _=l.updateQueue;No=!1;var S=_.firstBaseUpdate,U=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var K=z,oe=K.next;K.next=null,U===null?S=oe:U.next=oe,U=K;var _e=l.alternate;_e!==null&&(_e=_e.updateQueue,z=_e.lastBaseUpdate,z!==U&&(z===null?_e.firstBaseUpdate=oe:z.next=oe,_e.lastBaseUpdate=K))}if(S!==null){var Se=_.baseState;U=0,_e=oe=K=null,z=S;do{var ce=z.lane&-536870913,ue=ce!==z.lane;if(ue?(Bt&ce)===ce:(m&ce)===ce){ce!==0&&ce===Cu&&(Xy=!0),_e!==null&&(_e=_e.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ct=l,it=z;ce=u;var dn=h;switch(it.tag){case 1:if(ct=it.payload,typeof ct=="function"){Se=ct.call(dn,Se,ce);break e}Se=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=it.payload,ce=typeof ct=="function"?ct.call(dn,Se,ce):ct,ce==null)break e;Se=f({},Se,ce);break e;case 2:No=!0}}ce=z.callback,ce!==null&&(l.flags|=64,ue&&(l.flags|=8192),ue=_.callbacks,ue===null?_.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:z.tag,payload:z.payload,callback:z.callback,next:null},_e===null?(oe=_e=ue,K=Se):_e=_e.next=ue,U|=ce;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;ue=z,z=ue.next,ue.next=null,_.lastBaseUpdate=ue,_.shared.pending=null}}while(!0);_e===null&&(K=Se),_.baseState=K,_.firstBaseUpdate=oe,_.lastBaseUpdate=_e,S===null&&(_.shared.lanes=0),Go|=U,l.lanes=U,l.memoizedState=Se}}function MA(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function OA(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)MA(h[l],u)}var Du=ge(null),Op=ge(0);function PA(l,u){l=Ks,Ae(Op,l),Ae(Du,u),Ks=l|u.baseLanes}function Ky(){Ae(Op,Ks),Ae(Du,Du.current)}function Qy(){Ks=Op.current,we(Du),we(Op)}var Vo=0,wt=null,cn=null,ar=null,Pp=!1,Ru=!1,dc=!1,kp=0,Uf=0,Mu=null,B6=0;function qn(){throw Error(r(321))}function Zy(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Li(l[h],u[h]))return!1;return!0}function Jy(l,u,h,m,_,S){return Vo=S,wt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?mE:yE,dc=!1,S=h(m,_),dc=!1,Ru&&(S=NA(u,h,m,_)),kA(l),S}function kA(l){G.H=jp;var u=cn!==null&&cn.next!==null;if(Vo=0,ar=cn=wt=null,Pp=!1,Uf=0,Mu=null,u)throw Error(r(300));l===null||Rr||(l=l.dependencies,l!==null&&Cp(l)&&(Rr=!0))}function NA(l,u,h,m){wt=l;var _=0;do{if(Ru&&(Mu=null),Uf=0,Ru=!1,25<=_)throw Error(r(301));if(_+=1,ar=cn=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=$6,S=u(h,m)}while(Ru);return S}function V6(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?Hf(u):u,l=l.useState()[0],(cn!==null?cn.memoizedState:null)!==l&&(wt.flags|=1024),u}function ev(){var l=kp!==0;return kp=0,l}function tv(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function nv(l){if(Pp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Pp=!1}Vo=0,ar=cn=wt=null,Ru=!1,Uf=kp=0,Mu=null}function Ei(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?wt.memoizedState=ar=l:ar=ar.next=l,ar}function sr(){if(cn===null){var l=wt.alternate;l=l!==null?l.memoizedState:null}else l=cn.next;var u=ar===null?wt.memoizedState:ar.next;if(u!==null)ar=u,cn=l;else{if(l===null)throw wt.alternate===null?Error(r(467)):Error(r(310));cn=l,l={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},ar===null?wt.memoizedState=ar=l:ar=ar.next=l}return ar}function rv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hf(l){var u=Uf;return Uf+=1,Mu===null&&(Mu=[]),l=IA(Mu,l,u),u=wt,(ar===null?u.memoizedState:ar.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?mE:yE),l}function Np(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Hf(l);if(l.$$typeof===C)return ti(l)}throw Error(r(438,String(l)))}function iv(l){var u=null,h=wt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=wt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=rv(),wt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),m=0;m<l;m++)h[m]=B;return u.index++,h}function $s(l,u){return typeof u=="function"?u(l):u}function Lp(l){var u=sr();return av(u,cn,l)}function av(l,u,h){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var _=l.baseQueue,S=m.pending;if(S!==null){if(_!==null){var U=_.next;_.next=S.next,S.next=U}u.baseQueue=_=S,m.pending=null}if(S=l.baseState,_===null)l.memoizedState=S;else{u=_.next;var z=U=null,K=null,oe=u,_e=!1;do{var Se=oe.lane&-536870913;if(Se!==oe.lane?(Bt&Se)===Se:(Vo&Se)===Se){var ce=oe.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Se===Cu&&(_e=!0);else if((Vo&ce)===ce){oe=oe.next,ce===Cu&&(_e=!0);continue}else Se={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(z=K=Se,U=S):K=K.next=Se,wt.lanes|=ce,Go|=ce;Se=oe.action,dc&&h(S,Se),S=oe.hasEagerState?oe.eagerState:h(S,Se)}else ce={lane:Se,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(z=K=ce,U=S):K=K.next=ce,wt.lanes|=Se,Go|=Se;oe=oe.next}while(oe!==null&&oe!==u);if(K===null?U=S:K.next=z,!Li(S,l.memoizedState)&&(Rr=!0,_e&&(h=Iu,h!==null)))throw h;l.memoizedState=S,l.baseState=U,l.baseQueue=K,m.lastRenderedState=S}return _===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function sv(l){var u=sr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=h.dispatch,_=h.pending,S=u.memoizedState;if(_!==null){h.pending=null;var U=_=_.next;do S=l(S,U.action),U=U.next;while(U!==_);Li(S,u.memoizedState)||(Rr=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),h.lastRenderedState=S}return[S,m]}function LA(l,u,h){var m=wt,_=sr(),S=Yt;if(S){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!Li((cn||_).memoizedState,h);U&&(_.memoizedState=h,Rr=!0),_=_.queue;var z=FA.bind(null,m,_,l);if(zf(2048,8,z,[l]),_.getSnapshot!==u||U||ar!==null&&ar.memoizedState.tag&1){if(m.flags|=2048,Ou(9,Bp(),VA.bind(null,m,_,h,u),null),xn===null)throw Error(r(349));S||(Vo&124)!==0||BA(m,u,h)}return h}function BA(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=wt.updateQueue,u===null?(u=rv(),wt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function VA(l,u,h,m){u.value=h,u.getSnapshot=m,jA(u)&&UA(l)}function FA(l,u,h){return h(function(){jA(u)&&UA(l)})}function jA(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Li(l,h)}catch{return!0}}function UA(l){var u=Au(l,2);u!==null&&Hi(u,l,2)}function ov(l){var u=Ei();if(typeof l=="function"){var h=l;if(l=h(),dc){_n(!0);try{h()}finally{_n(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:l},u}function HA(l,u,h,m){return l.baseState=h,av(l,cn,typeof m=="function"?m:$s)}function F6(l,u,h,m,_){if(Fp(l))throw Error(r(485));if(l=u.action,l!==null){var S={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){S.listeners.push(U)}};G.T!==null?h(!0):S.isTransition=!1,m(S),h=u.pending,h===null?(S.next=u.pending=S,zA(u,S)):(S.next=h.next,u.pending=h.next=S)}}function zA(l,u){var h=u.action,m=u.payload,_=l.state;if(u.isTransition){var S=G.T,U={};G.T=U;try{var z=h(_,m),K=G.S;K!==null&&K(U,z),$A(l,u,z)}catch(oe){lv(l,u,oe)}finally{G.T=S}}else try{S=h(_,m),$A(l,u,S)}catch(oe){lv(l,u,oe)}}function $A(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){GA(l,u,m)},function(m){return lv(l,u,m)}):GA(l,u,h)}function GA(l,u,h){u.status="fulfilled",u.value=h,WA(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,zA(l,h)))}function lv(l,u,h){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,WA(u),u=u.next;while(u!==m)}l.action=null}function WA(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function YA(l,u){return u}function qA(l,u){if(Yt){var h=xn.formState;if(h!==null){e:{var m=wt;if(Yt){if(Bn){t:{for(var _=Bn,S=ts;_.nodeType!==8;){if(!S){_=null;break t}if(_=Ea(_.nextSibling),_===null){_=null;break t}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){Bn=Ea(_.nextSibling),m=_.data==="F!";break e}}oc(m)}m=!1}m&&(u=h[0])}}return h=Ei(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YA,lastRenderedState:u},h.queue=m,h=hE.bind(null,wt,m),m.dispatch=h,m=ov(!1),S=hv.bind(null,wt,!1,m.queue),m=Ei(),_={state:u,dispatch:null,action:l,pending:null},m.queue=_,h=F6.bind(null,wt,_,S,h),_.dispatch=h,m.memoizedState=l,[u,h,!1]}function XA(l){var u=sr();return KA(u,cn,l)}function KA(l,u,h){if(u=av(l,u,YA)[0],l=Lp($s)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Hf(u)}catch(U){throw U===Lf?Rp:U}else m=u;u=sr();var _=u.queue,S=_.dispatch;return h!==u.memoizedState&&(wt.flags|=2048,Ou(9,Bp(),j6.bind(null,_,h),null)),[m,S,l]}function j6(l,u){l.action=u}function QA(l){var u=sr(),h=cn;if(h!==null)return KA(u,h,l);sr(),u=u.memoizedState,h=sr();var m=h.queue.dispatch;return h.memoizedState=l,[u,m,!1]}function Ou(l,u,h,m){return l={tag:l,create:h,deps:m,inst:u,next:null},u=wt.updateQueue,u===null&&(u=rv(),wt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(m=h.next,h.next=l,l.next=m,u.lastEffect=l),l}function Bp(){return{destroy:void 0,resource:void 0}}function ZA(){return sr().memoizedState}function Vp(l,u,h,m){var _=Ei();m=m===void 0?null:m,wt.flags|=l,_.memoizedState=Ou(1|u,Bp(),h,m)}function zf(l,u,h,m){var _=sr();m=m===void 0?null:m;var S=_.memoizedState.inst;cn!==null&&m!==null&&Zy(m,cn.memoizedState.deps)?_.memoizedState=Ou(u,S,h,m):(wt.flags|=l,_.memoizedState=Ou(1|u,S,h,m))}function JA(l,u){Vp(8390656,8,l,u)}function eE(l,u){zf(2048,8,l,u)}function tE(l,u){return zf(4,2,l,u)}function nE(l,u){return zf(4,4,l,u)}function rE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function iE(l,u,h){h=h!=null?h.concat([l]):null,zf(4,4,rE.bind(null,u,l),h)}function cv(){}function aE(l,u){var h=sr();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&Zy(u,m[1])?m[0]:(h.memoizedState=[l,u],l)}function sE(l,u){var h=sr();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&Zy(u,m[1]))return m[0];if(m=l(),dc){_n(!0);try{l()}finally{_n(!1)}}return h.memoizedState=[m,u],m}function uv(l,u,h){return h===void 0||(Vo&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=cS(),wt.lanes|=l,Go|=l,h)}function oE(l,u,h,m){return Li(h,u)?h:Du.current!==null?(l=uv(l,h,m),Li(l,u)||(Rr=!0),l):(Vo&42)===0?(Rr=!0,l.memoizedState=h):(l=cS(),wt.lanes|=l,Go|=l,u)}function lE(l,u,h,m,_){var S=Y.p;Y.p=S!==0&&8>S?S:8;var U=G.T,z={};G.T=z,hv(l,!1,u,h);try{var K=_(),oe=G.S;if(oe!==null&&oe(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var _e=L6(K,m);$f(l,u,_e,Ui(l))}else $f(l,u,m,Ui(l))}catch(Se){$f(l,u,{then:function(){},status:"rejected",reason:Se},Ui())}finally{Y.p=S,G.T=U}}function U6(){}function dv(l,u,h,m){if(l.tag!==5)throw Error(r(476));var _=cE(l).queue;lE(l,_,u,Q,h===null?U6:function(){return uE(l),h(m)})}function cE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:Q},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function uE(l){var u=cE(l).next.queue;$f(l,u,{},Ui())}function fv(){return ti(lh)}function dE(){return sr().memoizedState}function fE(){return sr().memoizedState}function H6(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ui();l=Lo(h);var m=Bo(u,l,h);m!==null&&(Hi(m,u,h),Vf(m,u,h)),u={cache:Hy()},l.payload=u;return}u=u.return}}function z6(l,u,h){var m=Ui();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Fp(l)?pE(u,h):(h=Oy(l,u,h,m),h!==null&&(Hi(h,l,m),gE(h,u,m)))}function hE(l,u,h){var m=Ui();$f(l,u,h,m)}function $f(l,u,h,m){var _={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Fp(l))pE(u,_);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var U=u.lastRenderedState,z=S(U,h);if(_.hasEagerState=!0,_.eagerState=z,Li(z,U))return bp(l,u,_,0),xn===null&&_p(),!1}catch{}finally{}if(h=Oy(l,u,_,m),h!==null)return Hi(h,l,m),gE(h,u,m),!0}return!1}function hv(l,u,h,m){if(m={lane:2,revertLane:Gv(),action:m,hasEagerState:!1,eagerState:null,next:null},Fp(l)){if(u)throw Error(r(479))}else u=Oy(l,h,m,2),u!==null&&Hi(u,l,2)}function Fp(l){var u=l.alternate;return l===wt||u!==null&&u===wt}function pE(l,u){Ru=Pp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function gE(l,u,h){if((h&4194048)!==0){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,au(l,h)}}var jp={readContext:ti,use:Np,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},mE={readContext:ti,use:Np,useCallback:function(l,u){return Ei().memoizedState=[l,u===void 0?null:u],l},useContext:ti,useEffect:JA,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,Vp(4194308,4,rE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Vp(4194308,4,l,u)},useInsertionEffect:function(l,u){Vp(4,2,l,u)},useMemo:function(l,u){var h=Ei();u=u===void 0?null:u;var m=l();if(dc){_n(!0);try{l()}finally{_n(!1)}}return h.memoizedState=[m,u],m},useReducer:function(l,u,h){var m=Ei();if(h!==void 0){var _=h(u);if(dc){_n(!0);try{h(u)}finally{_n(!1)}}}else _=u;return m.memoizedState=m.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},m.queue=l,l=l.dispatch=z6.bind(null,wt,l),[m.memoizedState,l]},useRef:function(l){var u=Ei();return l={current:l},u.memoizedState=l},useState:function(l){l=ov(l);var u=l.queue,h=hE.bind(null,wt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:cv,useDeferredValue:function(l,u){var h=Ei();return uv(h,l,u)},useTransition:function(){var l=ov(!1);return l=lE.bind(null,wt,l.queue,!0,!1),Ei().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var m=wt,_=Ei();if(Yt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),xn===null)throw Error(r(349));(Bt&124)!==0||BA(m,u,h)}_.memoizedState=h;var S={value:h,getSnapshot:u};return _.queue=S,JA(FA.bind(null,m,S,l),[l]),m.flags|=2048,Ou(9,Bp(),VA.bind(null,m,S,h,u),null),h},useId:function(){var l=Ei(),u=xn.identifierPrefix;if(Yt){var h=Us,m=js;h=(m&~(1<<32-Xe(m)-1)).toString(32)+h,u="«"+u+"R"+h,h=kp++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=B6++,u="«"+u+"r"+h.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:fv,useFormState:qA,useActionState:qA,useOptimistic:function(l){var u=Ei();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=hv.bind(null,wt,!0,h),h.dispatch=u,[l,u]},useMemoCache:iv,useCacheRefresh:function(){return Ei().memoizedState=H6.bind(null,wt)}},yE={readContext:ti,use:Np,useCallback:aE,useContext:ti,useEffect:eE,useImperativeHandle:iE,useInsertionEffect:tE,useLayoutEffect:nE,useMemo:sE,useReducer:Lp,useRef:ZA,useState:function(){return Lp($s)},useDebugValue:cv,useDeferredValue:function(l,u){var h=sr();return oE(h,cn.memoizedState,l,u)},useTransition:function(){var l=Lp($s)[0],u=sr().memoizedState;return[typeof l=="boolean"?l:Hf(l),u]},useSyncExternalStore:LA,useId:dE,useHostTransitionStatus:fv,useFormState:XA,useActionState:XA,useOptimistic:function(l,u){var h=sr();return HA(h,cn,l,u)},useMemoCache:iv,useCacheRefresh:fE},$6={readContext:ti,use:Np,useCallback:aE,useContext:ti,useEffect:eE,useImperativeHandle:iE,useInsertionEffect:tE,useLayoutEffect:nE,useMemo:sE,useReducer:sv,useRef:ZA,useState:function(){return sv($s)},useDebugValue:cv,useDeferredValue:function(l,u){var h=sr();return cn===null?uv(h,l,u):oE(h,cn.memoizedState,l,u)},useTransition:function(){var l=sv($s)[0],u=sr().memoizedState;return[typeof l=="boolean"?l:Hf(l),u]},useSyncExternalStore:LA,useId:dE,useHostTransitionStatus:fv,useFormState:QA,useActionState:QA,useOptimistic:function(l,u){var h=sr();return cn!==null?HA(h,cn,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:iv,useCacheRefresh:fE},Pu=null,Gf=0;function Up(l){var u=Gf;return Gf+=1,Pu===null&&(Pu=[]),IA(Pu,l,u)}function Wf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Hp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function vE(l){var u=l._init;return u(l._payload)}function xE(l){function u(ee,J){if(l){var ie=ee.deletions;ie===null?(ee.deletions=[J],ee.flags|=16):ie.push(J)}}function h(ee,J){if(!l)return null;for(;J!==null;)u(ee,J),J=J.sibling;return null}function m(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function _(ee,J){return ee=Fs(ee,J),ee.index=0,ee.sibling=null,ee}function S(ee,J,ie){return ee.index=ie,l?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<J?(ee.flags|=67108866,J):ie):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function U(ee){return l&&ee.alternate===null&&(ee.flags|=67108866),ee}function z(ee,J,ie,Ee){return J===null||J.tag!==6?(J=ky(ie,ee.mode,Ee),J.return=ee,J):(J=_(J,ie),J.return=ee,J)}function K(ee,J,ie,Ee){var Ye=ie.type;return Ye===v?_e(ee,J,ie.props.children,Ee,ie.key):J!==null&&(J.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===R&&vE(Ye)===J.type)?(J=_(J,ie.props),Wf(J,ie),J.return=ee,J):(J=Ep(ie.type,ie.key,ie.props,null,ee.mode,Ee),Wf(J,ie),J.return=ee,J)}function oe(ee,J,ie,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==ie.containerInfo||J.stateNode.implementation!==ie.implementation?(J=Ny(ie,ee.mode,Ee),J.return=ee,J):(J=_(J,ie.children||[]),J.return=ee,J)}function _e(ee,J,ie,Ee,Ye){return J===null||J.tag!==7?(J=rc(ie,ee.mode,Ee,Ye),J.return=ee,J):(J=_(J,ie),J.return=ee,J)}function Se(ee,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=ky(""+J,ee.mode,ie),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ie=Ep(J.type,J.key,J.props,null,ee.mode,ie),Wf(ie,J),ie.return=ee,ie;case y:return J=Ny(J,ee.mode,ie),J.return=ee,J;case R:var Ee=J._init;return J=Ee(J._payload),Se(ee,J,ie)}if(X(J)||P(J))return J=rc(J,ee.mode,ie,null),J.return=ee,J;if(typeof J.then=="function")return Se(ee,Up(J),ie);if(J.$$typeof===C)return Se(ee,Ip(ee,J),ie);Hp(ee,J)}return null}function ce(ee,J,ie,Ee){var Ye=J!==null?J.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ye!==null?null:z(ee,J,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:return ie.key===Ye?K(ee,J,ie,Ee):null;case y:return ie.key===Ye?oe(ee,J,ie,Ee):null;case R:return Ye=ie._init,ie=Ye(ie._payload),ce(ee,J,ie,Ee)}if(X(ie)||P(ie))return Ye!==null?null:_e(ee,J,ie,Ee,null);if(typeof ie.then=="function")return ce(ee,J,Up(ie),Ee);if(ie.$$typeof===C)return ce(ee,J,Ip(ee,ie),Ee);Hp(ee,ie)}return null}function ue(ee,J,ie,Ee,Ye){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ee=ee.get(ie)||null,z(J,ee,""+Ee,Ye);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return ee=ee.get(Ee.key===null?ie:Ee.key)||null,K(J,ee,Ee,Ye);case y:return ee=ee.get(Ee.key===null?ie:Ee.key)||null,oe(J,ee,Ee,Ye);case R:var Et=Ee._init;return Ee=Et(Ee._payload),ue(ee,J,ie,Ee,Ye)}if(X(Ee)||P(Ee))return ee=ee.get(ie)||null,_e(J,ee,Ee,Ye,null);if(typeof Ee.then=="function")return ue(ee,J,ie,Up(Ee),Ye);if(Ee.$$typeof===C)return ue(ee,J,ie,Ip(J,Ee),Ye);Hp(J,Ee)}return null}function ct(ee,J,ie,Ee){for(var Ye=null,Et=null,Ke=J,at=J=0,Or=null;Ke!==null&&at<ie.length;at++){Ke.index>at?(Or=Ke,Ke=null):Or=Ke.sibling;var Ht=ce(ee,Ke,ie[at],Ee);if(Ht===null){Ke===null&&(Ke=Or);break}l&&Ke&&Ht.alternate===null&&u(ee,Ke),J=S(Ht,J,at),Et===null?Ye=Ht:Et.sibling=Ht,Et=Ht,Ke=Or}if(at===ie.length)return h(ee,Ke),Yt&&ac(ee,at),Ye;if(Ke===null){for(;at<ie.length;at++)Ke=Se(ee,ie[at],Ee),Ke!==null&&(J=S(Ke,J,at),Et===null?Ye=Ke:Et.sibling=Ke,Et=Ke);return Yt&&ac(ee,at),Ye}for(Ke=m(Ke);at<ie.length;at++)Or=ue(Ke,ee,at,ie[at],Ee),Or!==null&&(l&&Or.alternate!==null&&Ke.delete(Or.key===null?at:Or.key),J=S(Or,J,at),Et===null?Ye=Or:Et.sibling=Or,Et=Or);return l&&Ke.forEach(function(el){return u(ee,el)}),Yt&&ac(ee,at),Ye}function it(ee,J,ie,Ee){if(ie==null)throw Error(r(151));for(var Ye=null,Et=null,Ke=J,at=J=0,Or=null,Ht=ie.next();Ke!==null&&!Ht.done;at++,Ht=ie.next()){Ke.index>at?(Or=Ke,Ke=null):Or=Ke.sibling;var el=ce(ee,Ke,Ht.value,Ee);if(el===null){Ke===null&&(Ke=Or);break}l&&Ke&&el.alternate===null&&u(ee,Ke),J=S(el,J,at),Et===null?Ye=el:Et.sibling=el,Et=el,Ke=Or}if(Ht.done)return h(ee,Ke),Yt&&ac(ee,at),Ye;if(Ke===null){for(;!Ht.done;at++,Ht=ie.next())Ht=Se(ee,Ht.value,Ee),Ht!==null&&(J=S(Ht,J,at),Et===null?Ye=Ht:Et.sibling=Ht,Et=Ht);return Yt&&ac(ee,at),Ye}for(Ke=m(Ke);!Ht.done;at++,Ht=ie.next())Ht=ue(Ke,ee,at,Ht.value,Ee),Ht!==null&&(l&&Ht.alternate!==null&&Ke.delete(Ht.key===null?at:Ht.key),J=S(Ht,J,at),Et===null?Ye=Ht:Et.sibling=Ht,Et=Ht);return l&&Ke.forEach(function(G8){return u(ee,G8)}),Yt&&ac(ee,at),Ye}function dn(ee,J,ie,Ee){if(typeof ie=="object"&&ie!==null&&ie.type===v&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:e:{for(var Ye=ie.key;J!==null;){if(J.key===Ye){if(Ye=ie.type,Ye===v){if(J.tag===7){h(ee,J.sibling),Ee=_(J,ie.props.children),Ee.return=ee,ee=Ee;break e}}else if(J.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===R&&vE(Ye)===J.type){h(ee,J.sibling),Ee=_(J,ie.props),Wf(Ee,ie),Ee.return=ee,ee=Ee;break e}h(ee,J);break}else u(ee,J);J=J.sibling}ie.type===v?(Ee=rc(ie.props.children,ee.mode,Ee,ie.key),Ee.return=ee,ee=Ee):(Ee=Ep(ie.type,ie.key,ie.props,null,ee.mode,Ee),Wf(Ee,ie),Ee.return=ee,ee=Ee)}return U(ee);case y:e:{for(Ye=ie.key;J!==null;){if(J.key===Ye)if(J.tag===4&&J.stateNode.containerInfo===ie.containerInfo&&J.stateNode.implementation===ie.implementation){h(ee,J.sibling),Ee=_(J,ie.children||[]),Ee.return=ee,ee=Ee;break e}else{h(ee,J);break}else u(ee,J);J=J.sibling}Ee=Ny(ie,ee.mode,Ee),Ee.return=ee,ee=Ee}return U(ee);case R:return Ye=ie._init,ie=Ye(ie._payload),dn(ee,J,ie,Ee)}if(X(ie))return ct(ee,J,ie,Ee);if(P(ie)){if(Ye=P(ie),typeof Ye!="function")throw Error(r(150));return ie=Ye.call(ie),it(ee,J,ie,Ee)}if(typeof ie.then=="function")return dn(ee,J,Up(ie),Ee);if(ie.$$typeof===C)return dn(ee,J,Ip(ee,ie),Ee);Hp(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,J!==null&&J.tag===6?(h(ee,J.sibling),Ee=_(J,ie),Ee.return=ee,ee=Ee):(h(ee,J),Ee=ky(ie,ee.mode,Ee),Ee.return=ee,ee=Ee),U(ee)):h(ee,J)}return function(ee,J,ie,Ee){try{Gf=0;var Ye=dn(ee,J,ie,Ee);return Pu=null,Ye}catch(Ke){if(Ke===Lf||Ke===Rp)throw Ke;var Et=Bi(29,Ke,null,ee.mode);return Et.lanes=Ee,Et.return=ee,Et}finally{}}}var ku=xE(!0),wE=xE(!1),ia=ge(null),ns=null;function Fo(l){var u=l.alternate;Ae(vr,vr.current&1),Ae(ia,l),ns===null&&(u===null||Du.current!==null||u.memoizedState!==null)&&(ns=l)}function _E(l){if(l.tag===22){if(Ae(vr,vr.current),Ae(ia,l),ns===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(ns=l)}}else jo()}function jo(){Ae(vr,vr.current),Ae(ia,ia.current)}function Gs(l){we(ia),ns===l&&(ns=null),we(vr)}var vr=ge(0);function zp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||rx(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function pv(l,u,h,m){u=l.memoizedState,h=h(m,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var gv={enqueueSetState:function(l,u,h){l=l._reactInternals;var m=Ui(),_=Lo(m);_.payload=u,h!=null&&(_.callback=h),u=Bo(l,_,m),u!==null&&(Hi(u,l,m),Vf(u,l,m))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var m=Ui(),_=Lo(m);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=Bo(l,_,m),u!==null&&(Hi(u,l,m),Vf(u,l,m))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Ui(),m=Lo(h);m.tag=2,u!=null&&(m.callback=u),u=Bo(l,m,h),u!==null&&(Hi(u,l,h),Vf(u,l,h))}};function bE(l,u,h,m,_,S,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,S,U):u.prototype&&u.prototype.isPureReactComponent?!If(h,m)||!If(_,S):!0}function AE(l,u,h,m){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==l&&gv.enqueueReplaceState(u,u.state,null)}function fc(l,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}var $p=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function EE(l){$p(l)}function SE(l){console.error(l)}function TE(l){$p(l)}function Gp(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function CE(l,u,h){try{var m=l.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function mv(l,u,h){return h=Lo(h),h.tag=3,h.payload={element:null},h.callback=function(){Gp(l,u)},h}function IE(l){return l=Lo(l),l.tag=3,l}function DE(l,u,h,m){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var S=m.value;l.payload=function(){return _(S)},l.callback=function(){CE(u,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){CE(u,h,m),typeof _!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function G6(l,u,h,m,_){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Pf(u,h,_,!0),h=ia.current,h!==null){switch(h.tag){case 13:return ns===null?jv():h.alternate===null&&Vn===0&&(Vn=3),h.flags&=-257,h.flags|=65536,h.lanes=_,m===Gy?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),Hv(l,m,_)),!1;case 22:return h.flags|=65536,m===Gy?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),Hv(l,m,_)),!1}throw Error(r(435,h.tag))}return Hv(l,m,_),jv(),!1}if(Yt)return u=ia.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,m!==Vy&&(l=Error(r(422),{cause:m}),Of(ea(l,h)))):(m!==Vy&&(u=Error(r(423),{cause:m}),Of(ea(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,m=ea(m,h),_=mv(l.stateNode,m,_),qy(l,_),Vn!==4&&(Vn=2)),!1;var S=Error(r(520),{cause:m});if(S=ea(S,h),Jf===null?Jf=[S]:Jf.push(S),Vn!==4&&(Vn=2),u===null)return!0;m=ea(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=mv(h.stateNode,m,l),qy(h,l),!1;case 1:if(u=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wo===null||!Wo.has(S))))return h.flags|=65536,_&=-_,h.lanes|=_,_=IE(_),DE(_,l,h,m),qy(h,_),!1}h=h.return}while(h!==null);return!1}var RE=Error(r(461)),Rr=!1;function $r(l,u,h,m){u.child=l===null?wE(u,null,h,m):ku(u,l.child,h,m)}function ME(l,u,h,m,_){h=h.render;var S=u.ref;if("ref"in m){var U={};for(var z in m)z!=="ref"&&(U[z]=m[z])}else U=m;return cc(u),m=Jy(l,u,h,U,S,_),z=ev(),l!==null&&!Rr?(tv(l,u,_),Ws(l,u,_)):(Yt&&z&&Ly(u),u.flags|=1,$r(l,u,m,_),u.child)}function OE(l,u,h,m,_){if(l===null){var S=h.type;return typeof S=="function"&&!Py(S)&&S.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=S,PE(l,u,S,m,_)):(l=Ep(h.type,null,m,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Ev(l,_)){var U=S.memoizedProps;if(h=h.compare,h=h!==null?h:If,h(U,m)&&l.ref===u.ref)return Ws(l,u,_)}return u.flags|=1,l=Fs(S,m),l.ref=u.ref,l.return=u,u.child=l}function PE(l,u,h,m,_){if(l!==null){var S=l.memoizedProps;if(If(S,m)&&l.ref===u.ref)if(Rr=!1,u.pendingProps=m=S,Ev(l,_))(l.flags&131072)!==0&&(Rr=!0);else return u.lanes=l.lanes,Ws(l,u,_)}return yv(l,u,h,m,_)}function kE(l,u,h){var m=u.pendingProps,_=m.children,S=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=S!==null?S.baseLanes|h:h,l!==null){for(_=u.child=l.child,S=0;_!==null;)S=S|_.lanes|_.childLanes,_=_.sibling;u.childLanes=S&~m}else u.childLanes=0,u.child=null;return NE(l,u,m,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Dp(u,S!==null?S.cachePool:null),S!==null?PA(u,S):Ky(),_E(u);else return u.lanes=u.childLanes=536870912,NE(l,u,S!==null?S.baseLanes|h:h,h)}else S!==null?(Dp(u,S.cachePool),PA(u,S),jo(),u.memoizedState=null):(l!==null&&Dp(u,null),Ky(),jo());return $r(l,u,_,h),u.child}function NE(l,u,h,m){var _=$y();return _=_===null?null:{parent:yr._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},l!==null&&Dp(u,null),Ky(),_E(u),l!==null&&Pf(l,u,m,!0),null}function Wp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function yv(l,u,h,m,_){return cc(u),h=Jy(l,u,h,m,void 0,_),m=ev(),l!==null&&!Rr?(tv(l,u,_),Ws(l,u,_)):(Yt&&m&&Ly(u),u.flags|=1,$r(l,u,h,_),u.child)}function LE(l,u,h,m,_,S){return cc(u),u.updateQueue=null,h=NA(u,m,h,_),kA(l),m=ev(),l!==null&&!Rr?(tv(l,u,S),Ws(l,u,S)):(Yt&&m&&Ly(u),u.flags|=1,$r(l,u,h,S),u.child)}function BE(l,u,h,m,_){if(cc(u),u.stateNode===null){var S=Eu,U=h.contextType;typeof U=="object"&&U!==null&&(S=ti(U)),S=new h(m,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=gv,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=m,S.state=u.memoizedState,S.refs={},Wy(u),U=h.contextType,S.context=typeof U=="object"&&U!==null?ti(U):Eu,S.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(pv(u,h,U,m),S.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(U=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),U!==S.state&&gv.enqueueReplaceState(S,S.state,null),jf(u,m,S,_),Ff(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(l===null){S=u.stateNode;var z=u.memoizedProps,K=fc(h,z);S.props=K;var oe=S.context,_e=h.contextType;U=Eu,typeof _e=="object"&&_e!==null&&(U=ti(_e));var Se=h.getDerivedStateFromProps;_e=typeof Se=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,_e||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||oe!==U)&&AE(u,S,m,U),No=!1;var ce=u.memoizedState;S.state=ce,jf(u,m,S,_),Ff(),oe=u.memoizedState,z||ce!==oe||No?(typeof Se=="function"&&(pv(u,h,Se,m),oe=u.memoizedState),(K=No||bE(u,h,K,m,ce,oe,U))?(_e||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=oe),S.props=m,S.state=oe,S.context=U,m=K):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{S=u.stateNode,Yy(l,u),U=u.memoizedProps,_e=fc(h,U),S.props=_e,Se=u.pendingProps,ce=S.context,oe=h.contextType,K=Eu,typeof oe=="object"&&oe!==null&&(K=ti(oe)),z=h.getDerivedStateFromProps,(oe=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U!==Se||ce!==K)&&AE(u,S,m,K),No=!1,ce=u.memoizedState,S.state=ce,jf(u,m,S,_),Ff();var ue=u.memoizedState;U!==Se||ce!==ue||No||l!==null&&l.dependencies!==null&&Cp(l.dependencies)?(typeof z=="function"&&(pv(u,h,z,m),ue=u.memoizedState),(_e=No||bE(u,h,_e,m,ce,ue,K)||l!==null&&l.dependencies!==null&&Cp(l.dependencies))?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,ue,K),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,ue,K)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ue),S.props=m,S.state=ue,S.context=K,m=_e):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=1024),m=!1)}return S=m,Wp(l,u),m=(u.flags&128)!==0,S||m?(S=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&m?(u.child=ku(u,l.child,null,_),u.child=ku(u,null,h,_)):$r(l,u,h,_),u.memoizedState=S.state,l=u.child):l=Ws(l,u,_),l}function VE(l,u,h,m){return Mf(),u.flags|=256,$r(l,u,h,m),u.child}var vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xv(l){return{baseLanes:l,cachePool:SA()}}function wv(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=aa),l}function FE(l,u,h){var m=u.pendingProps,_=!1,S=(u.flags&128)!==0,U;if((U=S)||(U=l!==null&&l.memoizedState===null?!1:(vr.current&2)!==0),U&&(_=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Yt){if(_?Fo(u):jo(),Yt){var z=Bn,K;if(K=z){e:{for(K=z,z=ts;K.nodeType!==8;){if(!z){z=null;break e}if(K=Ea(K.nextSibling),K===null){z=null;break e}}z=K}z!==null?(u.memoizedState={dehydrated:z,treeContext:ic!==null?{id:js,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},K=Bi(18,null,null,0),K.stateNode=z,K.return=u,u.child=K,yi=u,Bn=null,K=!0):K=!1}K||oc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return rx(z)?u.lanes=32:u.lanes=536870912,null;Gs(u)}return z=m.children,m=m.fallback,_?(jo(),_=u.mode,z=Yp({mode:"hidden",children:z},_),m=rc(m,_,h,null),z.return=u,m.return=u,z.sibling=m,u.child=z,_=u.child,_.memoizedState=xv(h),_.childLanes=wv(l,U,h),u.memoizedState=vv,m):(Fo(u),_v(u,z))}if(K=l.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(S)u.flags&256?(Fo(u),u.flags&=-257,u=bv(l,u,h)):u.memoizedState!==null?(jo(),u.child=l.child,u.flags|=128,u=null):(jo(),_=m.fallback,z=u.mode,m=Yp({mode:"visible",children:m.children},z),_=rc(_,z,h,null),_.flags|=2,m.return=u,_.return=u,m.sibling=_,u.child=m,ku(u,l.child,null,h),m=u.child,m.memoizedState=xv(h),m.childLanes=wv(l,U,h),u.memoizedState=vv,u=_);else if(Fo(u),rx(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var oe=U.dgst;U=oe,m=Error(r(419)),m.stack="",m.digest=U,Of({value:m,source:null,stack:null}),u=bv(l,u,h)}else if(Rr||Pf(l,u,h,!1),U=(h&l.childLanes)!==0,Rr||U){if(U=xn,U!==null&&(m=h&-h,m=(m&42)!==0?1:Is(m),m=(m&(U.suspendedLanes|h))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Au(l,m),Hi(U,l,m),RE;z.data==="$?"||jv(),u=bv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=K.treeContext,Bn=Ea(z.nextSibling),yi=u,Yt=!0,sc=null,ts=!1,l!==null&&(na[ra++]=js,na[ra++]=Us,na[ra++]=ic,js=l.id,Us=l.overflow,ic=u),u=_v(u,m.children),u.flags|=4096);return u}return _?(jo(),_=m.fallback,z=u.mode,K=l.child,oe=K.sibling,m=Fs(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,oe!==null?_=Fs(oe,_):(_=rc(_,z,h,null),_.flags|=2),_.return=u,m.return=u,m.sibling=_,u.child=m,m=_,_=u.child,z=l.child.memoizedState,z===null?z=xv(h):(K=z.cachePool,K!==null?(oe=yr._currentValue,K=K.parent!==oe?{parent:oe,pool:oe}:K):K=SA(),z={baseLanes:z.baseLanes|h,cachePool:K}),_.memoizedState=z,_.childLanes=wv(l,U,h),u.memoizedState=vv,m):(Fo(u),h=l.child,l=h.sibling,h=Fs(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function _v(l,u){return u=Yp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Yp(l,u){return l=Bi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function bv(l,u,h){return ku(u,l.child,null,h),l=_v(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function jE(l,u,h){l.lanes|=u;var m=l.alternate;m!==null&&(m.lanes|=u),jy(l.return,u,h)}function Av(l,u,h,m,_){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:_}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=h,S.tailMode=_)}function UE(l,u,h){var m=u.pendingProps,_=m.revealOrder,S=m.tail;if($r(l,u,m.children,h),m=vr.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jE(l,h,u);else if(l.tag===19)jE(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(Ae(vr,m),_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&zp(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),Av(u,!1,_,h,S);break;case"backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&zp(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}Av(u,!0,h,null,S);break;case"together":Av(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ws(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Go|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Pf(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Fs(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Fs(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Ev(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Cp(l)))}function W6(l,u,h){switch(u.tag){case 3:Qe(u,u.stateNode.containerInfo),ko(u,yr,l.memoizedState.cache),Mf();break;case 27:case 5:me(u);break;case 4:Qe(u,u.stateNode.containerInfo);break;case 10:ko(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(Fo(u),u.flags|=128,null):(h&u.child.childLanes)!==0?FE(l,u,h):(Fo(u),l=Ws(l,u,h),l!==null?l.sibling:null);Fo(u);break;case 19:var _=(l.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Pf(l,u,h,!1),m=(h&u.childLanes)!==0),_){if(m)return UE(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ae(vr,vr.current),m)break;return null;case 22:case 23:return u.lanes=0,kE(l,u,h);case 24:ko(u,yr,l.memoizedState.cache)}return Ws(l,u,h)}function HE(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Rr=!0;else{if(!Ev(l,h)&&(u.flags&128)===0)return Rr=!1,W6(l,u,h);Rr=(l.flags&131072)!==0}else Rr=!1,Yt&&(u.flags&1048576)!==0&&vA(u,Tp,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var m=u.elementType,_=m._init;if(m=_(m._payload),u.type=m,typeof m=="function")Py(m)?(l=fc(m,l),u.tag=1,u=BE(null,u,m,l,h)):(u.tag=0,u=yv(null,u,m,l,h));else{if(m!=null){if(_=m.$$typeof,_===I){u.tag=11,u=ME(null,u,m,l,h);break e}else if(_===M){u.tag=14,u=OE(null,u,m,l,h);break e}}throw u=q(m)||m,Error(r(306,u,""))}}return u;case 0:return yv(l,u,u.type,u.pendingProps,h);case 1:return m=u.type,_=fc(m,u.pendingProps),BE(l,u,m,_,h);case 3:e:{if(Qe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));m=u.pendingProps;var S=u.memoizedState;_=S.element,Yy(l,u),jf(u,m,null,h);var U=u.memoizedState;if(m=U.cache,ko(u,yr,m),m!==S.cache&&Uy(u,[yr],h,!0),Ff(),m=U.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=VE(l,u,m,h);break e}else if(m!==_){_=ea(Error(r(424)),u),Of(_),u=VE(l,u,m,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Bn=Ea(l.firstChild),yi=u,Yt=!0,sc=null,ts=!0,h=wE(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Mf(),m===_){u=Ws(l,u,h);break e}$r(l,u,m,h)}u=u.child}return u;case 26:return Wp(l,u),l===null?(h=WS(u.type,null,u.pendingProps,null))?u.memoizedState=h:Yt||(h=u.type,l=u.pendingProps,m=og(He.current).createElement(h),m[pr]=u,m[rr]=l,Wr(m,h,l),Yn(m),u.stateNode=m):u.memoizedState=WS(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return me(u),l===null&&Yt&&(m=u.stateNode=zS(u.type,u.pendingProps,He.current),yi=u,ts=!0,_=Bn,Xo(u.type)?(ix=_,Bn=Ea(m.firstChild)):Bn=_),$r(l,u,u.pendingProps.children,h),Wp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Yt&&((_=m=Bn)&&(m=w8(m,u.type,u.pendingProps,ts),m!==null?(u.stateNode=m,yi=u,Bn=Ea(m.firstChild),ts=!1,_=!0):_=!1),_||oc(u)),me(u),_=u.type,S=u.pendingProps,U=l!==null?l.memoizedProps:null,m=S.children,ex(_,S)?m=null:U!==null&&ex(_,U)&&(u.flags|=32),u.memoizedState!==null&&(_=Jy(l,u,V6,null,null,h),lh._currentValue=_),Wp(l,u),$r(l,u,m,h),u.child;case 6:return l===null&&Yt&&((l=h=Bn)&&(h=_8(h,u.pendingProps,ts),h!==null?(u.stateNode=h,yi=u,Bn=null,l=!0):l=!1),l||oc(u)),null;case 13:return FE(l,u,h);case 4:return Qe(u,u.stateNode.containerInfo),m=u.pendingProps,l===null?u.child=ku(u,null,m,h):$r(l,u,m,h),u.child;case 11:return ME(l,u,u.type,u.pendingProps,h);case 7:return $r(l,u,u.pendingProps,h),u.child;case 8:return $r(l,u,u.pendingProps.children,h),u.child;case 12:return $r(l,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,ko(u,u.type,m.value),$r(l,u,m.children,h),u.child;case 9:return _=u.type._context,m=u.pendingProps.children,cc(u),_=ti(_),m=m(_),u.flags|=1,$r(l,u,m,h),u.child;case 14:return OE(l,u,u.type,u.pendingProps,h);case 15:return PE(l,u,u.type,u.pendingProps,h);case 19:return UE(l,u,h);case 31:return m=u.pendingProps,h=u.mode,m={mode:m.mode,children:m.children},l===null?(h=Yp(m,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Fs(l.child,m),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return kE(l,u,h);case 24:return cc(u),m=ti(yr),l===null?(_=$y(),_===null&&(_=xn,S=Hy(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=h),_=S),u.memoizedState={parent:m,cache:_},Wy(u),ko(u,yr,_)):((l.lanes&h)!==0&&(Yy(l,u),jf(u,null,null,h),Ff()),_=l.memoizedState,S=u.memoizedState,_.parent!==m?(_={parent:m,cache:m},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),ko(u,yr,m)):(m=S.cache,ko(u,yr,m),m!==_.cache&&Uy(u,[yr],h,!0))),$r(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ys(l){l.flags|=4}function zE(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!QS(u)){if(u=ia.current,u!==null&&((Bt&4194048)===Bt?ns!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||u!==ns))throw Bf=Gy,TA;l.flags|=8192}}function qp(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Ur():536870912,l.lanes|=u,Vu|=u)}function Yf(l,u){if(!Yt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function kn(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,m=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=m,l.childLanes=h,u}function Y6(l,u,h){var m=u.pendingProps;switch(By(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(u),null;case 1:return kn(u),null;case 3:return h=u.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),zs(yr),ae(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Rf(u)?Ys(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,_A())),kn(u),null;case 26:return h=u.memoizedState,l===null?(Ys(u),h!==null?(kn(u),zE(u,h)):(kn(u),u.flags&=-16777217)):h?h!==l.memoizedState?(Ys(u),kn(u),zE(u,h)):(kn(u),u.flags&=-16777217):(l.memoizedProps!==m&&Ys(u),kn(u),u.flags&=-16777217),null;case 27:he(u),h=He.current;var _=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==m&&Ys(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return kn(u),null}l=Pe.current,Rf(u)?xA(u):(l=zS(_,m,h),u.stateNode=l,Ys(u))}return kn(u),null;case 5:if(he(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==m&&Ys(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return kn(u),null}if(l=Pe.current,Rf(u))xA(u);else{switch(_=og(He.current),l){case 1:l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=_.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?_.createElement(h,{is:m.is}):_.createElement(h)}}l[pr]=u,l[rr]=m;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)l.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=l;e:switch(Wr(l,h,m),h){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ys(u)}}return kn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==m&&Ys(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(l=He.current,Rf(u)){if(l=u.stateNode,h=u.memoizedProps,m=null,_=yi,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}l[pr]=u,l=!!(l.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||LS(l.nodeValue,h)),l||oc(u)}else l=og(l).createTextNode(m),l[pr]=u,u.stateNode=l}return kn(u),null;case 13:if(m=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=Rf(u),m!==null&&m.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[pr]=u}else Mf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;kn(u),_=!1}else _=_A(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Gs(u),u):(Gs(u),null)}if(Gs(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=m!==null,l=l!==null&&l.memoizedState!==null,h){m=u.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==_&&(m.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),qp(u,u.updateQueue),kn(u),null;case 4:return ae(),l===null&&Xv(u.stateNode.containerInfo),kn(u),null;case 10:return zs(u.type),kn(u),null;case 19:if(we(vr),_=u.memoizedState,_===null)return kn(u),null;if(m=(u.flags&128)!==0,S=_.rendering,S===null)if(m)Yf(_,!1);else{if(Vn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=zp(l),S!==null){for(u.flags|=128,Yf(_,!1),l=S.updateQueue,u.updateQueue=l,qp(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)yA(h,l),h=h.sibling;return Ae(vr,vr.current&1|2),u.child}l=l.sibling}_.tail!==null&&Ce()>Qp&&(u.flags|=128,m=!0,Yf(_,!1),u.lanes=4194304)}else{if(!m)if(l=zp(S),l!==null){if(u.flags|=128,m=!0,l=l.updateQueue,u.updateQueue=l,qp(u,l),Yf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Yt)return kn(u),null}else 2*Ce()-_.renderingStartTime>Qp&&h!==536870912&&(u.flags|=128,m=!0,Yf(_,!1),u.lanes=4194304);_.isBackwards?(S.sibling=u.child,u.child=S):(l=_.last,l!==null?l.sibling=S:u.child=S,_.last=S)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Ce(),u.sibling=null,l=vr.current,Ae(vr,m?l&1|2:l&1),u):(kn(u),null);case 22:case 23:return Gs(u),Qy(),m=u.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(kn(u),u.subtreeFlags&6&&(u.flags|=8192)):kn(u),h=u.updateQueue,h!==null&&qp(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),l!==null&&we(uc),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),zs(yr),kn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function q6(l,u){switch(By(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return zs(yr),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return he(u),null;case 13:if(Gs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Mf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return we(vr),null;case 4:return ae(),null;case 10:return zs(u.type),null;case 22:case 23:return Gs(u),Qy(),l!==null&&we(uc),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return zs(yr),null;case 25:return null;default:return null}}function $E(l,u){switch(By(u),u.tag){case 3:zs(yr),ae();break;case 26:case 27:case 5:he(u);break;case 4:ae();break;case 13:Gs(u);break;case 19:we(vr);break;case 10:zs(u.type);break;case 22:case 23:Gs(u),Qy(),l!==null&&we(uc);break;case 24:zs(yr)}}function qf(l,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var _=m.next;h=_;do{if((h.tag&l)===l){m=void 0;var S=h.create,U=h.inst;m=S(),U.destroy=m}h=h.next}while(h!==_)}}catch(z){gn(u,u.return,z)}}function Uo(l,u,h){try{var m=u.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var S=_.next;m=S;do{if((m.tag&l)===l){var U=m.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,_=u;var K=h,oe=z;try{oe()}catch(_e){gn(_,K,_e)}}}m=m.next}while(m!==S)}}catch(_e){gn(u,u.return,_e)}}function GE(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{OA(u,h)}catch(m){gn(l,l.return,m)}}}function WE(l,u,h){h.props=fc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(m){gn(l,u,m)}}function Xf(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof h=="function"?l.refCleanup=h(m):h.current=m}}catch(_){gn(l,u,_)}}function rs(l,u){var h=l.ref,m=l.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(_){gn(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){gn(l,u,_)}else h.current=null}function YE(l){var u=l.type,h=l.memoizedProps,m=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(_){gn(l,l.return,_)}}function Sv(l,u,h){try{var m=l.stateNode;g8(m,l.type,h,u),m[rr]=u}catch(_){gn(l,l.return,_)}}function qE(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Xo(l.type)||l.tag===4}function Tv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||qE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Xo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Cv(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=sg));else if(m!==4&&(m===27&&Xo(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Cv(l,u,h),l=l.sibling;l!==null;)Cv(l,u,h),l=l.sibling}function Xp(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(m!==4&&(m===27&&Xo(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(Xp(l,u,h),l=l.sibling;l!==null;)Xp(l,u,h),l=l.sibling}function XE(l){var u=l.stateNode,h=l.memoizedProps;try{for(var m=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);Wr(u,m,h),u[pr]=l,u[rr]=h}catch(S){gn(l,l.return,S)}}var qs=!1,Xn=!1,Iv=!1,KE=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function X6(l,u){if(l=l.containerInfo,Zv=hg,l=oA(l),Ty(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var _=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var U=0,z=-1,K=-1,oe=0,_e=0,Se=l,ce=null;t:for(;;){for(var ue;Se!==h||_!==0&&Se.nodeType!==3||(z=U+_),Se!==S||m!==0&&Se.nodeType!==3||(K=U+m),Se.nodeType===3&&(U+=Se.nodeValue.length),(ue=Se.firstChild)!==null;)ce=Se,Se=ue;for(;;){if(Se===l)break t;if(ce===h&&++oe===_&&(z=U),ce===S&&++_e===m&&(K=U),(ue=Se.nextSibling)!==null)break;Se=ce,ce=Se.parentNode}Se=ue}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(Jv={focusedElem:l,selectionRange:h},hg=!1,Mr=u;Mr!==null;)if(u=Mr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Mr=l;else for(;Mr!==null;){switch(u=Mr,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,h=u,_=S.memoizedProps,S=S.memoizedState,m=h.stateNode;try{var ct=fc(h.type,_,h.elementType===h.type);l=m.getSnapshotBeforeUpdate(ct,S),m.__reactInternalSnapshotBeforeUpdate=l}catch(it){gn(h,h.return,it)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)nx(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":nx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Mr=l;break}Mr=u.return}}function QE(l,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Ho(l,h),m&4&&qf(5,h);break;case 1:if(Ho(l,h),m&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){gn(h,h.return,U)}else{var _=fc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){gn(h,h.return,U)}}m&64&&GE(h),m&512&&Xf(h,h.return);break;case 3:if(Ho(l,h),m&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{OA(l,u)}catch(U){gn(h,h.return,U)}}break;case 27:u===null&&m&4&&XE(h);case 26:case 5:Ho(l,h),u===null&&m&4&&YE(h),m&512&&Xf(h,h.return);break;case 12:Ho(l,h);break;case 13:Ho(l,h),m&4&&eS(l,h),m&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=i8.bind(null,h),b8(l,h))));break;case 22:if(m=h.memoizedState!==null||qs,!m){u=u!==null&&u.memoizedState!==null||Xn,_=qs;var S=Xn;qs=m,(Xn=u)&&!S?zo(l,h,(h.subtreeFlags&8772)!==0):Ho(l,h),qs=_,Xn=S}break;case 30:break;default:Ho(l,h)}}function ZE(l){var u=l.alternate;u!==null&&(l.alternate=null,ZE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Ro(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Rn=null,Si=!1;function Xs(l,u,h){for(h=h.child;h!==null;)JE(l,u,h),h=h.sibling}function JE(l,u,h){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(tt,h)}catch{}switch(h.tag){case 26:Xn||rs(h,u),Xs(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xn||rs(h,u);var m=Rn,_=Si;Xo(h.type)&&(Rn=h.stateNode,Si=!1),Xs(l,u,h),ih(h.stateNode),Rn=m,Si=_;break;case 5:Xn||rs(h,u);case 6:if(m=Rn,_=Si,Rn=null,Xs(l,u,h),Rn=m,Si=_,Rn!==null)if(Si)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(h.stateNode)}catch(S){gn(h,u,S)}else try{Rn.removeChild(h.stateNode)}catch(S){gn(h,u,S)}break;case 18:Rn!==null&&(Si?(l=Rn,US(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),fh(l)):US(Rn,h.stateNode));break;case 4:m=Rn,_=Si,Rn=h.stateNode.containerInfo,Si=!0,Xs(l,u,h),Rn=m,Si=_;break;case 0:case 11:case 14:case 15:Xn||Uo(2,h,u),Xn||Uo(4,h,u),Xs(l,u,h);break;case 1:Xn||(rs(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&WE(h,u,m)),Xs(l,u,h);break;case 21:Xs(l,u,h);break;case 22:Xn=(m=Xn)||h.memoizedState!==null,Xs(l,u,h),Xn=m;break;default:Xs(l,u,h)}}function eS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{fh(l)}catch(h){gn(u,u.return,h)}}function K6(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new KE),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new KE),u;default:throw Error(r(435,l.tag))}}function Dv(l,u){var h=K6(l);u.forEach(function(m){var _=a8.bind(null,l,m);h.has(m)||(h.add(m),m.then(_,_))})}function Vi(l,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var _=h[m],S=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(Xo(z.type)){Rn=z.stateNode,Si=!1;break e}break;case 5:Rn=z.stateNode,Si=!1;break e;case 3:case 4:Rn=z.stateNode.containerInfo,Si=!0;break e}z=z.return}if(Rn===null)throw Error(r(160));JE(S,U,_),Rn=null,Si=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)tS(u,l),u=u.sibling}var Aa=null;function tS(l,u){var h=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Vi(u,l),Fi(l),m&4&&(Uo(3,l,l.return),qf(3,l),Uo(5,l,l.return));break;case 1:Vi(u,l),Fi(l),m&512&&(Xn||h===null||rs(h,h.return)),m&64&&qs&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var _=Aa;if(Vi(u,l),Fi(l),m&512&&(Xn||h===null||rs(h,h.return)),m&4){var S=h!==null?h.memoizedState:null;if(m=l.memoizedState,h===null)if(m===null)if(l.stateNode===null){e:{m=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(m){case"title":S=_.getElementsByTagName("title")[0],(!S||S[Ul]||S[pr]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(m),_.head.insertBefore(S,_.querySelector("head > title"))),Wr(S,m,h),S[pr]=l,Yn(S),m=S;break e;case"link":var U=XS("link","href",_).get(m+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(S=U[z],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}S=_.createElement(m),Wr(S,m,h),_.head.appendChild(S);break;case"meta":if(U=XS("meta","content",_).get(m+(h.content||""))){for(z=0;z<U.length;z++)if(S=U[z],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}S=_.createElement(m),Wr(S,m,h),_.head.appendChild(S);break;default:throw Error(r(468,m))}S[pr]=l,Yn(S),m=S}l.stateNode=m}else KS(_,l.type,l.stateNode);else l.stateNode=qS(_,m,l.memoizedProps);else S!==m?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,m===null?KS(_,l.type,l.stateNode):qS(_,m,l.memoizedProps)):m===null&&l.stateNode!==null&&Sv(l,l.memoizedProps,h.memoizedProps)}break;case 27:Vi(u,l),Fi(l),m&512&&(Xn||h===null||rs(h,h.return)),h!==null&&m&4&&Sv(l,l.memoizedProps,h.memoizedProps);break;case 5:if(Vi(u,l),Fi(l),m&512&&(Xn||h===null||rs(h,h.return)),l.flags&32){_=l.stateNode;try{Ki(_,"")}catch(ue){gn(l,l.return,ue)}}m&4&&l.stateNode!=null&&(_=l.memoizedProps,Sv(l,_,h!==null?h.memoizedProps:_)),m&1024&&(Iv=!0);break;case 6:if(Vi(u,l),Fi(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,h=l.stateNode;try{h.nodeValue=m}catch(ue){gn(l,l.return,ue)}}break;case 3:if(ug=null,_=Aa,Aa=lg(u.containerInfo),Vi(u,l),Aa=_,Fi(l),m&4&&h!==null&&h.memoizedState.isDehydrated)try{fh(u.containerInfo)}catch(ue){gn(l,l.return,ue)}Iv&&(Iv=!1,nS(l));break;case 4:m=Aa,Aa=lg(l.stateNode.containerInfo),Vi(u,l),Fi(l),Aa=m;break;case 12:Vi(u,l),Fi(l);break;case 13:Vi(u,l),Fi(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Nv=Ce()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Dv(l,m)));break;case 22:_=l.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,oe=qs,_e=Xn;if(qs=oe||_,Xn=_e||K,Vi(u,l),Xn=_e,qs=oe,Fi(l),m&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||K||qs||Xn||hc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){K=h=u;try{if(S=K.stateNode,_)U=S.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=K.stateNode;var Se=K.memoizedProps.style,ce=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;z.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){gn(K,K.return,ue)}}}else if(u.tag===6){if(h===null){K=u;try{K.stateNode.nodeValue=_?"":K.memoizedProps}catch(ue){gn(K,K.return,ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=l.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Dv(l,h))));break;case 19:Vi(u,l),Fi(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Dv(l,m)));break;case 30:break;case 21:break;default:Vi(u,l),Fi(l)}}function Fi(l){var u=l.flags;if(u&2){try{for(var h,m=l.return;m!==null;){if(qE(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,S=Tv(l);Xp(l,S,_);break;case 5:var U=h.stateNode;h.flags&32&&(Ki(U,""),h.flags&=-33);var z=Tv(l);Xp(l,z,U);break;case 3:case 4:var K=h.stateNode.containerInfo,oe=Tv(l);Cv(l,oe,K);break;default:throw Error(r(161))}}catch(_e){gn(l,l.return,_e)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function nS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;nS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ho(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)QE(l,u.alternate,u),u=u.sibling}function hc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Uo(4,u,u.return),hc(u);break;case 1:rs(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&WE(u,u.return,h),hc(u);break;case 27:ih(u.stateNode);case 26:case 5:rs(u,u.return),hc(u);break;case 22:u.memoizedState===null&&hc(u);break;case 30:hc(u);break;default:hc(u)}l=l.sibling}}function zo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,_=l,S=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:zo(_,S,h),qf(4,S);break;case 1:if(zo(_,S,h),m=S,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(oe){gn(m,m.return,oe)}if(m=S,_=m.updateQueue,_!==null){var z=m.stateNode;try{var K=_.shared.hiddenCallbacks;if(K!==null)for(_.shared.hiddenCallbacks=null,_=0;_<K.length;_++)MA(K[_],z)}catch(oe){gn(m,m.return,oe)}}h&&U&64&&GE(S),Xf(S,S.return);break;case 27:XE(S);case 26:case 5:zo(_,S,h),h&&m===null&&U&4&&YE(S),Xf(S,S.return);break;case 12:zo(_,S,h);break;case 13:zo(_,S,h),h&&U&4&&eS(_,S);break;case 22:S.memoizedState===null&&zo(_,S,h),Xf(S,S.return);break;case 30:break;default:zo(_,S,h)}u=u.sibling}}function Rv(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&kf(h))}function Mv(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&kf(l))}function is(l,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)rS(l,u,h,m),u=u.sibling}function rS(l,u,h,m){var _=u.flags;switch(u.tag){case 0:case 11:case 15:is(l,u,h,m),_&2048&&qf(9,u);break;case 1:is(l,u,h,m);break;case 3:is(l,u,h,m),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&kf(l)));break;case 12:if(_&2048){is(l,u,h,m),l=u.stateNode;try{var S=u.memoizedProps,U=S.id,z=S.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(K){gn(u,u.return,K)}}else is(l,u,h,m);break;case 13:is(l,u,h,m);break;case 23:break;case 22:S=u.stateNode,U=u.alternate,u.memoizedState!==null?S._visibility&2?is(l,u,h,m):Kf(l,u):S._visibility&2?is(l,u,h,m):(S._visibility|=2,Nu(l,u,h,m,(u.subtreeFlags&10256)!==0)),_&2048&&Rv(U,u);break;case 24:is(l,u,h,m),_&2048&&Mv(u.alternate,u);break;default:is(l,u,h,m)}}function Nu(l,u,h,m,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,U=u,z=h,K=m,oe=U.flags;switch(U.tag){case 0:case 11:case 15:Nu(S,U,z,K,_),qf(8,U);break;case 23:break;case 22:var _e=U.stateNode;U.memoizedState!==null?_e._visibility&2?Nu(S,U,z,K,_):Kf(S,U):(_e._visibility|=2,Nu(S,U,z,K,_)),_&&oe&2048&&Rv(U.alternate,U);break;case 24:Nu(S,U,z,K,_),_&&oe&2048&&Mv(U.alternate,U);break;default:Nu(S,U,z,K,_)}u=u.sibling}}function Kf(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,m=u,_=m.flags;switch(m.tag){case 22:Kf(h,m),_&2048&&Rv(m.alternate,m);break;case 24:Kf(h,m),_&2048&&Mv(m.alternate,m);break;default:Kf(h,m)}u=u.sibling}}var Qf=8192;function Lu(l){if(l.subtreeFlags&Qf)for(l=l.child;l!==null;)iS(l),l=l.sibling}function iS(l){switch(l.tag){case 26:Lu(l),l.flags&Qf&&l.memoizedState!==null&&N8(Aa,l.memoizedState,l.memoizedProps);break;case 5:Lu(l);break;case 3:case 4:var u=Aa;Aa=lg(l.stateNode.containerInfo),Lu(l),Aa=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Qf,Qf=16777216,Lu(l),Qf=u):Lu(l));break;default:Lu(l)}}function aS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Zf(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Mr=m,oS(m,l)}aS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)sS(l),l=l.sibling}function sS(l){switch(l.tag){case 0:case 11:case 15:Zf(l),l.flags&2048&&Uo(9,l,l.return);break;case 3:Zf(l);break;case 12:Zf(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Kp(l)):Zf(l);break;default:Zf(l)}}function Kp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Mr=m,oS(m,l)}aS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Uo(8,u,u.return),Kp(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Kp(u));break;default:Kp(u)}l=l.sibling}}function oS(l,u){for(;Mr!==null;){var h=Mr;switch(h.tag){case 0:case 11:case 15:Uo(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:kf(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Mr=m;else e:for(h=l;Mr!==null;){m=Mr;var _=m.sibling,S=m.return;if(ZE(m),m===h){Mr=null;break e}if(_!==null){_.return=S,Mr=_;break e}Mr=S}}}var Q6={getCacheForType:function(l){var u=ti(yr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},Z6=typeof WeakMap=="function"?WeakMap:Map,nn=0,xn=null,Tt=null,Bt=0,rn=0,ji=null,$o=!1,Bu=!1,Ov=!1,Ks=0,Vn=0,Go=0,pc=0,Pv=0,aa=0,Vu=0,Jf=null,Ti=null,kv=!1,Nv=0,Qp=1/0,Zp=null,Wo=null,Gr=0,Yo=null,Fu=null,ju=0,Lv=0,Bv=null,lS=null,eh=0,Vv=null;function Ui(){if((nn&2)!==0&&Bt!==0)return Bt&-Bt;if(G.T!==null){var l=Cu;return l!==0?l:Gv()}return nr()}function cS(){aa===0&&(aa=(Bt&536870912)===0||Yt?Wn():536870912);var l=ia.current;return l!==null&&(l.flags|=32),aa}function Hi(l,u,h){(l===xn&&(rn===2||rn===9)||l.cancelPendingCommit!==null)&&(Uu(l,0),qo(l,Bt,aa,!1)),tr(l,h),((nn&2)===0||l!==xn)&&(l===xn&&((nn&2)===0&&(pc|=h),Vn===4&&qo(l,Bt,aa,!1)),as(l))}function uS(l,u,h){if((nn&6)!==0)throw Error(r(327));var m=!h&&(u&124)===0&&(u&l.expiredLanes)===0||pt(l,u),_=m?t8(l,u):Uv(l,u,!0),S=m;do{if(_===0){Bu&&!m&&qo(l,u,0,!1);break}else{if(h=l.current.alternate,S&&!J6(h)){_=Uv(l,u,!1),S=!1;continue}if(_===2){if(S=u,l.errorRecoveryDisabledLanes&S)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;_=Jf;var K=z.current.memoizedState.isDehydrated;if(K&&(Uu(z,U).flags|=256),U=Uv(z,U,!1),U!==2){if(Ov&&!K){z.errorRecoveryDisabledLanes|=S,pc|=S,_=4;break e}S=Ti,Ti=_,S!==null&&(Ti===null?Ti=S:Ti.push.apply(Ti,S))}_=U}if(S=!1,_!==2)continue}}if(_===1){Uu(l,0),qo(l,u,0,!0);break}e:{switch(m=l,S=_,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:qo(m,u,aa,!$o);break e;case 2:Ti=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Nv+300-Ce(),10<_)){if(qo(m,u,aa,!$o),jr(m,0,!0)!==0)break e;m.timeoutHandle=FS(dS.bind(null,m,h,Ti,Zp,kv,u,aa,pc,Vu,$o,S,2,-0,0),_);break e}dS(m,h,Ti,Zp,kv,u,aa,pc,Vu,$o,S,0,-0,0)}}break}while(!0);as(l)}function dS(l,u,h,m,_,S,U,z,K,oe,_e,Se,ce,ue){if(l.timeoutHandle=-1,Se=u.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(oh={stylesheets:null,count:0,unsuspend:k8},iS(u),Se=L8(),Se!==null)){l.cancelPendingCommit=Se(vS.bind(null,l,u,S,h,m,_,U,z,K,_e,1,ce,ue)),qo(l,S,U,!oe);return}vS(l,u,S,h,m,_,U,z,K)}function J6(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var _=h[m],S=_.getSnapshot;_=_.value;try{if(!Li(S(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function qo(l,u,h,m){u&=~Pv,u&=~pc,l.suspendedLanes|=u,l.pingedLanes&=~u,m&&(l.warmLanes|=u),m=l.expirationTimes;for(var _=u;0<_;){var S=31-Xe(_),U=1<<S;m[S]=-1,_&=~U}h!==0&&qi(l,h,u)}function Jp(){return(nn&6)===0?(th(0),!1):!0}function Fv(){if(Tt!==null){if(rn===0)var l=Tt.return;else l=Tt,Hs=lc=null,nv(l),Pu=null,Gf=0,l=Tt;for(;l!==null;)$E(l.alternate,l),l=l.return;Tt=null}}function Uu(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,y8(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Fv(),xn=l,Tt=h=Fs(l.current,null),Bt=u,rn=0,ji=null,$o=!1,Bu=pt(l,u),Ov=!1,Vu=aa=Pv=pc=Go=Vn=0,Ti=Jf=null,kv=!1,(u&8)!==0&&(u|=u&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=u;0<m;){var _=31-Xe(m),S=1<<_;u|=l[_],m&=~S}return Ks=u,_p(),h}function fS(l,u){wt=null,G.H=jp,u===Lf||u===Rp?(u=DA(),rn=3):u===TA?(u=DA(),rn=4):rn=u===RE?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ji=u,Tt===null&&(Vn=1,Gp(l,ea(u,l.current)))}function hS(){var l=G.H;return G.H=jp,l===null?jp:l}function pS(){var l=G.A;return G.A=Q6,l}function jv(){Vn=4,$o||(Bt&4194048)!==Bt&&ia.current!==null||(Bu=!0),(Go&134217727)===0&&(pc&134217727)===0||xn===null||qo(xn,Bt,aa,!1)}function Uv(l,u,h){var m=nn;nn|=2;var _=hS(),S=pS();(xn!==l||Bt!==u)&&(Zp=null,Uu(l,u)),u=!1;var U=Vn;e:do try{if(rn!==0&&Tt!==null){var z=Tt,K=ji;switch(rn){case 8:Fv(),U=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(u=!0);var oe=rn;if(rn=0,ji=null,Hu(l,z,K,oe),h&&Bu){U=0;break e}break;default:oe=rn,rn=0,ji=null,Hu(l,z,K,oe)}}e8(),U=Vn;break}catch(_e){fS(l,_e)}while(!0);return u&&l.shellSuspendCounter++,Hs=lc=null,nn=m,G.H=_,G.A=S,Tt===null&&(xn=null,Bt=0,_p()),U}function e8(){for(;Tt!==null;)gS(Tt)}function t8(l,u){var h=nn;nn|=2;var m=hS(),_=pS();xn!==l||Bt!==u?(Zp=null,Qp=Ce()+500,Uu(l,u)):Bu=pt(l,u);e:do try{if(rn!==0&&Tt!==null){u=Tt;var S=ji;t:switch(rn){case 1:rn=0,ji=null,Hu(l,u,S,1);break;case 2:case 9:if(CA(S)){rn=0,ji=null,mS(u);break}u=function(){rn!==2&&rn!==9||xn!==l||(rn=7),as(l)},S.then(u,u);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:CA(S)?(rn=0,ji=null,mS(u)):(rn=0,ji=null,Hu(l,u,S,7));break;case 5:var U=null;switch(Tt.tag){case 26:U=Tt.memoizedState;case 5:case 27:var z=Tt;if(!U||QS(U)){rn=0,ji=null;var K=z.sibling;if(K!==null)Tt=K;else{var oe=z.return;oe!==null?(Tt=oe,eg(oe)):Tt=null}break t}}rn=0,ji=null,Hu(l,u,S,5);break;case 6:rn=0,ji=null,Hu(l,u,S,6);break;case 8:Fv(),Vn=6;break e;default:throw Error(r(462))}}n8();break}catch(_e){fS(l,_e)}while(!0);return Hs=lc=null,G.H=m,G.A=_,nn=h,Tt!==null?0:(xn=null,Bt=0,_p(),Vn)}function n8(){for(;Tt!==null&&!je();)gS(Tt)}function gS(l){var u=HE(l.alternate,l,Ks);l.memoizedProps=l.pendingProps,u===null?eg(l):Tt=u}function mS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=LE(h,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=LE(h,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:nv(u);default:$E(h,u),u=Tt=yA(u,Ks),u=HE(h,u,Ks)}l.memoizedProps=l.pendingProps,u===null?eg(l):Tt=u}function Hu(l,u,h,m){Hs=lc=null,nv(u),Pu=null,Gf=0;var _=u.return;try{if(G6(l,_,u,h,Bt)){Vn=1,Gp(l,ea(h,l.current)),Tt=null;return}}catch(S){if(_!==null)throw Tt=_,S;Vn=1,Gp(l,ea(h,l.current)),Tt=null;return}u.flags&32768?(Yt||m===1?l=!0:Bu||(Bt&536870912)!==0?l=!1:($o=l=!0,(m===2||m===9||m===3||m===6)&&(m=ia.current,m!==null&&m.tag===13&&(m.flags|=16384))),yS(u,l)):eg(u)}function eg(l){var u=l;do{if((u.flags&32768)!==0){yS(u,$o);return}l=u.return;var h=Y6(u.alternate,u,Ks);if(h!==null){Tt=h;return}if(u=u.sibling,u!==null){Tt=u;return}Tt=u=l}while(u!==null);Vn===0&&(Vn=5)}function yS(l,u){do{var h=q6(l.alternate,l);if(h!==null){h.flags&=32767,Tt=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){Tt=l;return}Tt=l=h}while(l!==null);Vn=6,Tt=null}function vS(l,u,h,m,_,S,U,z,K){l.cancelPendingCommit=null;do tg();while(Gr!==0);if((nn&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=My,Fl(l,h,S,U,z,K),l===xn&&(Tt=xn=null,Bt=0),Fu=u,Yo=l,ju=h,Lv=S,Bv=_,lS=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,s8(Oe,function(){return AS(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,_=Y.p,Y.p=2,U=nn,nn|=4;try{X6(l,u,h)}finally{nn=U,Y.p=_,G.T=m}}Gr=1,xS(),wS(),_S()}}function xS(){if(Gr===1){Gr=0;var l=Yo,u=Fu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var m=Y.p;Y.p=2;var _=nn;nn|=4;try{tS(u,l);var S=Jv,U=oA(l.containerInfo),z=S.focusedElem,K=S.selectionRange;if(U!==z&&z&&z.ownerDocument&&sA(z.ownerDocument.documentElement,z)){if(K!==null&&Ty(z)){var oe=K.start,_e=K.end;if(_e===void 0&&(_e=oe),"selectionStart"in z)z.selectionStart=oe,z.selectionEnd=Math.min(_e,z.value.length);else{var Se=z.ownerDocument||document,ce=Se&&Se.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),ct=z.textContent.length,it=Math.min(K.start,ct),dn=K.end===void 0?it:Math.min(K.end,ct);!ue.extend&&it>dn&&(U=dn,dn=it,it=U);var ee=aA(z,it),J=aA(z,dn);if(ee&&J&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==J.node||ue.focusOffset!==J.offset)){var ie=Se.createRange();ie.setStart(ee.node,ee.offset),ue.removeAllRanges(),it>dn?(ue.addRange(ie),ue.extend(J.node,J.offset)):(ie.setEnd(J.node,J.offset),ue.addRange(ie))}}}}for(Se=[],ue=z;ue=ue.parentNode;)ue.nodeType===1&&Se.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Se.length;z++){var Ee=Se[z];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}hg=!!Zv,Jv=Zv=null}finally{nn=_,Y.p=m,G.T=h}}l.current=u,Gr=2}}function wS(){if(Gr===2){Gr=0;var l=Yo,u=Fu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var m=Y.p;Y.p=2;var _=nn;nn|=4;try{QE(l,u.alternate,u)}finally{nn=_,Y.p=m,G.T=h}}Gr=3}}function _S(){if(Gr===4||Gr===3){Gr=0,De();var l=Yo,u=Fu,h=ju,m=lS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Gr=5:(Gr=0,Fu=Yo=null,bS(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Wo=null),pn(h),u=u.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(tt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=G.T,_=Y.p,Y.p=2,G.T=null;try{for(var S=l.onRecoverableError,U=0;U<m.length;U++){var z=m[U];S(z.value,{componentStack:z.stack})}}finally{G.T=u,Y.p=_}}(ju&3)!==0&&tg(),as(l),_=l.pendingLanes,(h&4194090)!==0&&(_&42)!==0?l===Vv?eh++:(eh=0,Vv=l):eh=0,th(0)}}function bS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,kf(u)))}function tg(l){return xS(),wS(),_S(),AS()}function AS(){if(Gr!==5)return!1;var l=Yo,u=Lv;Lv=0;var h=pn(ju),m=G.T,_=Y.p;try{Y.p=32>h?32:h,G.T=null,h=Bv,Bv=null;var S=Yo,U=ju;if(Gr=0,Fu=Yo=null,ju=0,(nn&6)!==0)throw Error(r(331));var z=nn;if(nn|=4,sS(S.current),rS(S,S.current,U,h),nn=z,th(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(tt,S)}catch{}return!0}finally{Y.p=_,G.T=m,bS(l,u)}}function ES(l,u,h){u=ea(h,u),u=mv(l.stateNode,u,2),l=Bo(l,u,2),l!==null&&(tr(l,2),as(l))}function gn(l,u,h){if(l.tag===3)ES(l,l,h);else for(;u!==null;){if(u.tag===3){ES(u,l,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Wo===null||!Wo.has(m))){l=ea(h,l),h=IE(2),m=Bo(u,h,2),m!==null&&(DE(h,m,u,l),tr(m,2),as(m));break}}u=u.return}}function Hv(l,u,h){var m=l.pingCache;if(m===null){m=l.pingCache=new Z6;var _=new Set;m.set(u,_)}else _=m.get(u),_===void 0&&(_=new Set,m.set(u,_));_.has(h)||(Ov=!0,_.add(h),l=r8.bind(null,l,u,h),u.then(l,l))}function r8(l,u,h){var m=l.pingCache;m!==null&&m.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,xn===l&&(Bt&h)===h&&(Vn===4||Vn===3&&(Bt&62914560)===Bt&&300>Ce()-Nv?(nn&2)===0&&Uu(l,0):Pv|=h,Vu===Bt&&(Vu=0)),as(l)}function SS(l,u){u===0&&(u=Ur()),l=Au(l,u),l!==null&&(tr(l,u),as(l))}function i8(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),SS(l,h)}function a8(l,u){var h=0;switch(l.tag){case 13:var m=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),SS(l,h)}function s8(l,u){return Le(l,u)}var ng=null,zu=null,zv=!1,rg=!1,$v=!1,gc=0;function as(l){l!==zu&&l.next===null&&(zu===null?ng=zu=l:zu=zu.next=l),rg=!0,zv||(zv=!0,l8())}function th(l,u){if(!$v&&rg){$v=!0;do for(var h=!1,m=ng;m!==null;){if(l!==0){var _=m.pendingLanes;if(_===0)var S=0;else{var U=m.suspendedLanes,z=m.pingedLanes;S=(1<<31-Xe(42|l)+1)-1,S&=_&~(U&~z),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,DS(m,S))}else S=Bt,S=jr(m,m===xn?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||pt(m,S)||(h=!0,DS(m,S));m=m.next}while(h);$v=!1}}function o8(){TS()}function TS(){rg=zv=!1;var l=0;gc!==0&&(m8()&&(l=gc),gc=0);for(var u=Ce(),h=null,m=ng;m!==null;){var _=m.next,S=CS(m,u);S===0?(m.next=null,h===null?ng=_:h.next=_,_===null&&(zu=h)):(h=m,(l!==0||(S&3)!==0)&&(rg=!0)),m=_}th(l)}function CS(l,u){for(var h=l.suspendedLanes,m=l.pingedLanes,_=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var U=31-Xe(S),z=1<<U,K=_[U];K===-1?((z&h)===0||(z&m)!==0)&&(_[U]=Pn(z,u)):K<=u&&(l.expiredLanes|=z),S&=~z}if(u=xn,h=Bt,h=jr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,h===0||l===u&&(rn===2||rn===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&ve(m),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||pt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(m!==null&&ve(m),pn(h)){case 2:case 8:h=Ie;break;case 32:h=Oe;break;case 268435456:h=xt;break;default:h=Oe}return m=IS.bind(null,l),h=Le(h,m),l.callbackPriority=u,l.callbackNode=h,u}return m!==null&&m!==null&&ve(m),l.callbackPriority=2,l.callbackNode=null,2}function IS(l,u){if(Gr!==0&&Gr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(tg()&&l.callbackNode!==h)return null;var m=Bt;return m=jr(l,l===xn?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(uS(l,m,u),CS(l,Ce()),l.callbackNode!=null&&l.callbackNode===h?IS.bind(null,l):null)}function DS(l,u){if(tg())return null;uS(l,u,!0)}function l8(){v8(function(){(nn&6)!==0?Le($e,o8):TS()})}function Gv(){return gc===0&&(gc=Wn()),gc}function RS(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:du(""+l)}function MS(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function c8(l,u,h,m,_){if(u==="submit"&&h&&h.stateNode===_){var S=RS((_[rr]||null).action),U=m.submitter;U&&(u=(u=U[rr]||null)?RS(u.formAction):U.getAttribute("formAction"),u!==null&&(S=u,U=null));var z=new fu("action","action",null,m,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(gc!==0){var K=U?MS(_,U):new FormData(_);dv(h,{pending:!0,data:K,method:_.method,action:S},null,K)}}else typeof S=="function"&&(z.preventDefault(),K=U?MS(_,U):new FormData(_),dv(h,{pending:!0,data:K,method:_.method,action:S},S,K))},currentTarget:_}]})}}for(var Wv=0;Wv<Ry.length;Wv++){var Yv=Ry[Wv],u8=Yv.toLowerCase(),d8=Yv[0].toUpperCase()+Yv.slice(1);ba(u8,"on"+d8)}ba(uA,"onAnimationEnd"),ba(dA,"onAnimationIteration"),ba(fA,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(I6,"onTransitionRun"),ba(D6,"onTransitionStart"),ba(R6,"onTransitionCancel"),ba(hA,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nh));function OS(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var m=l[h],_=m.event;m=m.listeners;e:{var S=void 0;if(u)for(var U=m.length-1;0<=U;U--){var z=m[U],K=z.instance,oe=z.currentTarget;if(z=z.listener,K!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=oe;try{S(_)}catch(_e){$p(_e)}_.currentTarget=null,S=K}else for(U=0;U<m.length;U++){if(z=m[U],K=z.instance,oe=z.currentTarget,z=z.listener,K!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=oe;try{S(_)}catch(_e){$p(_e)}_.currentTarget=null,S=K}}}}function Ct(l,u){var h=u[hf];h===void 0&&(h=u[hf]=new Set);var m=l+"__bubble";h.has(m)||(PS(u,l,2,!1),h.add(m))}function qv(l,u,h){var m=0;u&&(m|=4),PS(h,l,m,u)}var ig="_reactListening"+Math.random().toString(36).slice(2);function Xv(l){if(!l[ig]){l[ig]=!0,pf.forEach(function(h){h!=="selectionchange"&&(f8.has(h)||qv(h,!1,l),qv(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[ig]||(u[ig]=!0,qv("selectionchange",!1,u))}}function PS(l,u,h,m){switch(rT(u)){case 2:var _=F8;break;case 8:_=j8;break;default:_=cx}h=_.bind(null,u,h,l),_=void 0,!Zi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),m?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function Kv(l,u,h,m,_){var S=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var z=m.stateNode.containerInfo;if(z===_)break;if(U===4)for(U=m.return;U!==null;){var K=U.tag;if((K===3||K===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;z!==null;){if(U=Ds(z),U===null)return;if(K=U.tag,K===5||K===6||K===26||K===27){m=S=U;continue e}z=z.parentNode}}m=m.return}sp(function(){var oe=S,_e=Qi(h),Se=[];e:{var ce=pA.get(l);if(ce!==void 0){var ue=fu,ct=l;switch(l){case"keypress":if(Ka(h)===0)break e;case"keydown":case"keyup":ue=vu;break;case"focusin":ct="focus",ue=gu;break;case"focusout":ct="blur",ue=gu;break;case"beforeblur":case"afterblur":ue=gu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=pp;break;case uA:case dA:case fA:ue=mu;break;case hA:ue=mp;break;case"scroll":case"scrollend":ue=op;break;case"wheel":ue=xu;break;case"copy":case"cut":case"paste":ue=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Tf;break;case"toggle":case"beforetoggle":ue=vp}var it=(u&4)!==0,dn=!it&&(l==="scroll"||l==="scrollend"),ee=it?ce!==null?ce+"Capture":null:ce;it=[];for(var J=oe,ie;J!==null;){var Ee=J;if(ie=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ie===null||ee===null||(Ee=ql(J,ee),Ee!=null&&it.push(rh(J,Ee,ie))),dn)break;J=J.return}0<it.length&&(ce=new ue(ce,ct,null,h,_e),Se.push({event:ce,listeners:it}))}}if((u&7)===0){e:{if(ce=l==="mouseover"||l==="pointerover",ue=l==="mouseout"||l==="pointerout",ce&&h!==Ps&&(ct=h.relatedTarget||h.fromElement)&&(Ds(ct)||ct[Xi]))break e;if((ue||ce)&&(ce=_e.window===_e?_e:(ce=_e.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(ct=h.relatedTarget||h.toElement,ue=oe,ct=ct?Ds(ct):null,ct!==null&&(dn=a(ct),it=ct.tag,ct!==dn||it!==5&&it!==27&&it!==6)&&(ct=null)):(ue=null,ct=oe),ue!==ct)){if(it=Ji,Ee="onMouseLeave",ee="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(it=Tf,Ee="onPointerLeave",ee="onPointerEnter",J="pointer"),dn=ue==null?ce:Wa(ue),ie=ct==null?ce:Wa(ct),ce=new it(Ee,J+"leave",ue,h,_e),ce.target=dn,ce.relatedTarget=ie,Ee=null,Ds(_e)===oe&&(it=new it(ee,J+"enter",ct,h,_e),it.target=ie,it.relatedTarget=dn,Ee=it),dn=Ee,ue&&ct)t:{for(it=ue,ee=ct,J=0,ie=it;ie;ie=$u(ie))J++;for(ie=0,Ee=ee;Ee;Ee=$u(Ee))ie++;for(;0<J-ie;)it=$u(it),J--;for(;0<ie-J;)ee=$u(ee),ie--;for(;J--;){if(it===ee||ee!==null&&it===ee.alternate)break t;it=$u(it),ee=$u(ee)}it=null}else it=null;ue!==null&&kS(Se,ce,ue,it,!1),ct!==null&&dn!==null&&kS(Se,dn,ct,it,!0)}}e:{if(ce=oe?Wa(oe):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var Ye=Jb;else if(mr(ce))if(eA)Ye=S6;else{Ye=A6;var Et=b6}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&xf(oe.elementType)&&(Ye=Jb):Ye=E6;if(Ye&&(Ye=Ye(l,oe))){Vs(Se,Ye,h,_e);break e}Et&&Et(l,ce,oe),l==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&Oo(ce,"number",ce.value)}switch(Et=oe?Wa(oe):window,l){case"focusin":(mr(Et)||Et.contentEditable==="true")&&(wu=Et,Cy=oe,Df=null);break;case"focusout":Df=Cy=wu=null;break;case"mousedown":Iy=!0;break;case"contextmenu":case"mouseup":case"dragend":Iy=!1,lA(Se,h,_e);break;case"selectionchange":if(C6)break;case"keydown":case"keyup":lA(Se,h,_e)}var Ke;if(Ja)e:{switch(l){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Nt?pe(l,h)&&(at="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(at="onCompositionStart");at&&(j&&h.locale!=="ko"&&(Nt||at!=="onCompositionStart"?at==="onCompositionEnd"&&Nt&&(Ke=_f()):(Xa=_e,Po="value"in Xa?Xa.value:Xa.textContent,Nt=!0)),Et=ag(oe,at),0<Et.length&&(at=new Ef(at,l,null,h,_e),Se.push({event:at,listeners:Et}),Ke?at.data=Ke:(Ke=ke(h),Ke!==null&&(at.data=Ke)))),(Ke=k?gr(l,h):Lt(l,h))&&(at=ag(oe,"onBeforeInput"),0<at.length&&(Et=new Ef("onBeforeInput","beforeinput",null,h,_e),Se.push({event:Et,listeners:at}),Et.data=Ke)),c8(Se,l,oe,h,_e)}OS(Se,u)})}function rh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function ag(l,u){for(var h=u+"Capture",m=[];l!==null;){var _=l,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=ql(l,h),_!=null&&m.unshift(rh(l,_,S)),_=ql(l,u),_!=null&&m.push(rh(l,_,S))),l.tag===3)return m;l=l.return}return[]}function $u(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function kS(l,u,h,m,_){for(var S=u._reactName,U=[];h!==null&&h!==m;){var z=h,K=z.alternate,oe=z.stateNode;if(z=z.tag,K!==null&&K===m)break;z!==5&&z!==26&&z!==27||oe===null||(K=oe,_?(oe=ql(h,S),oe!=null&&U.unshift(rh(h,oe,K))):_||(oe=ql(h,S),oe!=null&&U.push(rh(h,oe,K)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var h8=/\r\n?/g,p8=/\u0000|\uFFFD/g;function NS(l){return(typeof l=="string"?l:""+l).replace(h8,`
`).replace(p8,"")}function LS(l,u){return u=NS(u),NS(l)===u}function sg(){}function un(l,u,h,m,_,S){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Ki(l,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Ki(l,""+m);break;case"className":Ya(l,"class",m);break;case"tabIndex":Ya(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ya(l,h,m);break;case"style":vf(l,m,S);break;case"data":if(u!=="object"){Ya(l,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=du(""+m),l.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(u!=="input"&&un(l,u,"name",_.name,_,null),un(l,u,"formEncType",_.formEncType,_,null),un(l,u,"formMethod",_.formMethod,_,null),un(l,u,"formTarget",_.formTarget,_,null)):(un(l,u,"encType",_.encType,_,null),un(l,u,"method",_.method,_,null),un(l,u,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=du(""+m),l.setAttribute(h,m);break;case"onClick":m!=null&&(l.onclick=sg);break;case"onScroll":m!=null&&Ct("scroll",l);break;case"onScrollEnd":m!=null&&Ct("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}h=du(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""+m):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":m===!0?l.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,m):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(h,m):l.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(h):l.setAttribute(h,m);break;case"popover":Ct("beforetoggle",l),Ct("toggle",l),Mo(l,"popover",m);break;case"xlinkActuate":Hr(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Hr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Hr(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Hr(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Hr(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Hr(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Hr(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Hr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Hr(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Mo(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=wy.get(h)||h,Mo(l,h,m))}}function Qv(l,u,h,m,_,S){switch(h){case"style":vf(l,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof m=="string"?Ki(l,m):(typeof m=="number"||typeof m=="bigint")&&Ki(l,""+m);break;case"onScroll":m!=null&&Ct("scroll",l);break;case"onScrollEnd":m!=null&&Ct("scrollend",l);break;case"onClick":m!=null&&(l.onclick=sg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!su.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),S=l[rr]||null,S=S!=null?S[h]:null,typeof S=="function"&&l.removeEventListener(u,S,_),typeof m=="function")){typeof S!="function"&&S!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,m,_);break e}h in l?l[h]=m:m===!0?l.setAttribute(h,""):Mo(l,h,m)}}}function Wr(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",l),Ct("load",l);var m=!1,_=!1,S;for(S in h)if(h.hasOwnProperty(S)){var U=h[S];if(U!=null)switch(S){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:un(l,u,S,U,h,null)}}_&&un(l,u,"srcSet",h.srcSet,h,null),m&&un(l,u,"src",h.src,h,null);return;case"input":Ct("invalid",l);var z=S=U=_=null,K=null,oe=null;for(m in h)if(h.hasOwnProperty(m)){var _e=h[m];if(_e!=null)switch(m){case"name":_=_e;break;case"type":U=_e;break;case"checked":K=_e;break;case"defaultChecked":oe=_e;break;case"value":S=_e;break;case"defaultValue":z=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,u));break;default:un(l,u,m,_e,h,null)}}Gl(l,S,z,K,oe,U,_,!1),uu(l);return;case"select":Ct("invalid",l),m=U=S=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":S=z;break;case"defaultValue":U=z;break;case"multiple":m=z;default:un(l,u,_,z,h,null)}u=S,h=U,l.multiple=!!m,u!=null?Os(l,!!m,u,!1):h!=null&&Os(l,!!m,h,!0);return;case"textarea":Ct("invalid",l),S=_=m=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":m=z;break;case"defaultValue":_=z;break;case"children":S=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:un(l,u,U,z,h,null)}Wl(l,m,_,S),uu(l);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(m=h[K],m!=null))switch(K){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:un(l,u,K,m,h,null)}return;case"dialog":Ct("beforetoggle",l),Ct("toggle",l),Ct("cancel",l),Ct("close",l);break;case"iframe":case"object":Ct("load",l);break;case"video":case"audio":for(m=0;m<nh.length;m++)Ct(nh[m],l);break;case"image":Ct("error",l),Ct("load",l);break;case"details":Ct("toggle",l);break;case"embed":case"source":case"link":Ct("error",l),Ct("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in h)if(h.hasOwnProperty(oe)&&(m=h[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:un(l,u,oe,m,h,null)}return;default:if(xf(u)){for(_e in h)h.hasOwnProperty(_e)&&(m=h[_e],m!==void 0&&Qv(l,u,_e,m,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(m=h[z],m!=null&&un(l,u,z,m,h,null))}function g8(l,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,U=null,z=null,K=null,oe=null,_e=null;for(ue in h){var Se=h[ue];if(h.hasOwnProperty(ue)&&Se!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":K=Se;default:m.hasOwnProperty(ue)||un(l,u,ue,null,m,Se)}}for(var ce in m){var ue=m[ce];if(Se=h[ce],m.hasOwnProperty(ce)&&(ue!=null||Se!=null))switch(ce){case"type":S=ue;break;case"name":_=ue;break;case"checked":oe=ue;break;case"defaultChecked":_e=ue;break;case"value":U=ue;break;case"defaultValue":z=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:ue!==Se&&un(l,u,ce,ue,m,Se)}}Ni(l,U,z,K,oe,_e,S,_);return;case"select":ue=U=z=ce=null;for(S in h)if(K=h[S],h.hasOwnProperty(S)&&K!=null)switch(S){case"value":break;case"multiple":ue=K;default:m.hasOwnProperty(S)||un(l,u,S,null,m,K)}for(_ in m)if(S=m[_],K=h[_],m.hasOwnProperty(_)&&(S!=null||K!=null))switch(_){case"value":ce=S;break;case"defaultValue":z=S;break;case"multiple":U=S;default:S!==K&&un(l,u,_,S,m,K)}u=z,h=U,m=ue,ce!=null?Os(l,!!h,ce,!1):!!m!=!!h&&(u!=null?Os(l,!!h,u,!0):Os(l,!!h,h?[]:"",!1));return;case"textarea":ue=ce=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:un(l,u,z,null,m,_)}for(U in m)if(_=m[U],S=h[U],m.hasOwnProperty(U)&&(_!=null||S!=null))switch(U){case"value":ce=_;break;case"defaultValue":ue=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==S&&un(l,u,U,_,m,S)}ln(l,ce,ue);return;case"option":for(var ct in h)if(ce=h[ct],h.hasOwnProperty(ct)&&ce!=null&&!m.hasOwnProperty(ct))switch(ct){case"selected":l.selected=!1;break;default:un(l,u,ct,null,m,ce)}for(K in m)if(ce=m[K],ue=h[K],m.hasOwnProperty(K)&&ce!==ue&&(ce!=null||ue!=null))switch(K){case"selected":l.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:un(l,u,K,ce,m,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in h)ce=h[it],h.hasOwnProperty(it)&&ce!=null&&!m.hasOwnProperty(it)&&un(l,u,it,null,m,ce);for(oe in m)if(ce=m[oe],ue=h[oe],m.hasOwnProperty(oe)&&ce!==ue&&(ce!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:un(l,u,oe,ce,m,ue)}return;default:if(xf(u)){for(var dn in h)ce=h[dn],h.hasOwnProperty(dn)&&ce!==void 0&&!m.hasOwnProperty(dn)&&Qv(l,u,dn,void 0,m,ce);for(_e in m)ce=m[_e],ue=h[_e],!m.hasOwnProperty(_e)||ce===ue||ce===void 0&&ue===void 0||Qv(l,u,_e,ce,m,ue);return}}for(var ee in h)ce=h[ee],h.hasOwnProperty(ee)&&ce!=null&&!m.hasOwnProperty(ee)&&un(l,u,ee,null,m,ce);for(Se in m)ce=m[Se],ue=h[Se],!m.hasOwnProperty(Se)||ce===ue||ce==null&&ue==null||un(l,u,Se,ce,m,ue)}var Zv=null,Jv=null;function og(l){return l.nodeType===9?l:l.ownerDocument}function BS(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VS(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function ex(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var tx=null;function m8(){var l=window.event;return l&&l.type==="popstate"?l===tx?!1:(tx=l,!0):(tx=null,!1)}var FS=typeof setTimeout=="function"?setTimeout:void 0,y8=typeof clearTimeout=="function"?clearTimeout:void 0,jS=typeof Promise=="function"?Promise:void 0,v8=typeof queueMicrotask=="function"?queueMicrotask:typeof jS<"u"?function(l){return jS.resolve(null).then(l).catch(x8)}:FS;function x8(l){setTimeout(function(){throw l})}function Xo(l){return l==="head"}function US(l,u){var h=u,m=0,_=0;do{var S=h.nextSibling;if(l.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(0<m&&8>m){h=m;var U=l.ownerDocument;if(h&1&&ih(U.documentElement),h&2&&ih(U.body),h&4)for(h=U.head,ih(h),U=h.firstChild;U;){var z=U.nextSibling,K=U.nodeName;U[Ul]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(_===0){l.removeChild(S),fh(u);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:m=h.charCodeAt(0)-48;else m=0;h=S}while(h);fh(u)}function nx(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":nx(h),Ro(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function w8(l,u,h,m){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Ul])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Ea(l.nextSibling),l===null)break}return null}function _8(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Ea(l.nextSibling),l===null))return null;return l}function rx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function b8(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Ea(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var ix=null;function HS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function zS(l,u,h){switch(u=og(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function ih(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Ro(l)}var sa=new Map,$S=new Set;function lg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Qs=Y.d;Y.d={f:A8,r:E8,D:S8,C:T8,L:C8,m:I8,X:R8,S:D8,M:M8};function A8(){var l=Qs.f(),u=Jp();return l||u}function E8(l){var u=Ga(l);u!==null&&u.tag===5&&u.type==="form"?uE(u):Qs.r(l)}var Gu=typeof document>"u"?null:document;function GS(l,u,h){var m=Gu;if(m&&typeof u=="string"&&u){var _=ir(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),$S.has(_)||($S.add(_),l={rel:l,crossOrigin:h,href:u},m.querySelector(_)===null&&(u=m.createElement("link"),Wr(u,"link",l),Yn(u),m.head.appendChild(u)))}}function S8(l){Qs.D(l),GS("dns-prefetch",l,null)}function T8(l,u){Qs.C(l,u),GS("preconnect",l,u)}function C8(l,u,h){Qs.L(l,u,h);var m=Gu;if(m&&l&&u){var _='link[rel="preload"][as="'+ir(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ir(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ir(h.imageSizes)+'"]')):_+='[href="'+ir(l)+'"]';var S=_;switch(u){case"style":S=Wu(l);break;case"script":S=Yu(l)}sa.has(S)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),sa.set(S,l),m.querySelector(_)!==null||u==="style"&&m.querySelector(ah(S))||u==="script"&&m.querySelector(sh(S))||(u=m.createElement("link"),Wr(u,"link",l),Yn(u),m.head.appendChild(u)))}}function I8(l,u){Qs.m(l,u);var h=Gu;if(h&&l){var m=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+ir(m)+'"][href="'+ir(l)+'"]',S=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Yu(l)}if(!sa.has(S)&&(l=f({rel:"modulepreload",href:l},u),sa.set(S,l),h.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(sh(S)))return}m=h.createElement("link"),Wr(m,"link",l),Yn(m),h.head.appendChild(m)}}}function D8(l,u,h){Qs.S(l,u,h);var m=Gu;if(m&&l){var _=pi(m).hoistableStyles,S=Wu(l);u=u||"default";var U=_.get(S);if(!U){var z={loading:0,preload:null};if(U=m.querySelector(ah(S)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=sa.get(S))&&ax(l,h);var K=U=m.createElement("link");Yn(K),Wr(K,"link",l),K._p=new Promise(function(oe,_e){K.onload=oe,K.onerror=_e}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,cg(U,u,m)}U={type:"stylesheet",instance:U,count:1,state:z},_.set(S,U)}}}function R8(l,u){Qs.X(l,u);var h=Gu;if(h&&l){var m=pi(h).hoistableScripts,_=Yu(l),S=m.get(_);S||(S=h.querySelector(sh(_)),S||(l=f({src:l,async:!0},u),(u=sa.get(_))&&sx(l,u),S=h.createElement("script"),Yn(S),Wr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(_,S))}}function M8(l,u){Qs.M(l,u);var h=Gu;if(h&&l){var m=pi(h).hoistableScripts,_=Yu(l),S=m.get(_);S||(S=h.querySelector(sh(_)),S||(l=f({src:l,async:!0,type:"module"},u),(u=sa.get(_))&&sx(l,u),S=h.createElement("script"),Yn(S),Wr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(_,S))}}function WS(l,u,h,m){var _=(_=He.current)?lg(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Wu(h.href),h=pi(_).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Wu(h.href);var S=pi(_).hoistableStyles,U=S.get(l);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,U),(S=_.querySelector(ah(l)))&&!S._p&&(U.instance=S,U.state.loading=5),sa.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},sa.set(l,h),S||O8(_,l,h,U.state))),u&&m===null)throw Error(r(528,""));return U}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Yu(h),h=pi(_).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Wu(l){return'href="'+ir(l)+'"'}function ah(l){return'link[rel="stylesheet"]['+l+"]"}function YS(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function O8(l,u,h,m){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=l.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Wr(u,"link",h),Yn(u),l.head.appendChild(u))}function Yu(l){return'[src="'+ir(l)+'"]'}function sh(l){return"script[async]"+l}function qS(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=l.querySelector('style[data-href~="'+ir(h.href)+'"]');if(m)return u.instance=m,Yn(m),m;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),Yn(m),Wr(m,"style",_),cg(m,h.precedence,l),u.instance=m;case"stylesheet":_=Wu(h.href);var S=l.querySelector(ah(_));if(S)return u.state.loading|=4,u.instance=S,Yn(S),S;m=YS(h),(_=sa.get(_))&&ax(m,_),S=(l.ownerDocument||l).createElement("link"),Yn(S);var U=S;return U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),Wr(S,"link",m),u.state.loading|=4,cg(S,h.precedence,l),u.instance=S;case"script":return S=Yu(h.src),(_=l.querySelector(sh(S)))?(u.instance=_,Yn(_),_):(m=h,(_=sa.get(S))&&(m=f({},h),sx(m,_)),l=l.ownerDocument||l,_=l.createElement("script"),Yn(_),Wr(_,"link",m),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,cg(m,h.precedence,l));return u.instance}function cg(l,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,S=_,U=0;U<m.length;U++){var z=m[U];if(z.dataset.precedence===u)S=z;else if(S!==_)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function ax(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function sx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ug=null;function XS(l,u,h){if(ug===null){var m=new Map,_=ug=new Map;_.set(h,m)}else _=ug,m=_.get(h),m||(m=new Map,_.set(h,m));if(m.has(l))return m;for(m.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var S=h[_];if(!(S[Ul]||S[pr]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var U=S.getAttribute(u)||"";U=l+U;var z=m.get(U);z?z.push(S):m.set(U,[S])}}return m}function KS(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function P8(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function QS(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var oh=null;function k8(){}function N8(l,u,h){if(oh===null)throw Error(r(475));var m=oh;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Wu(h.href),S=l.querySelector(ah(_));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=dg.bind(m),l.then(m,m)),u.state.loading|=4,u.instance=S,Yn(S);return}S=l.ownerDocument||l,h=YS(h),(_=sa.get(_))&&ax(h,_),S=S.createElement("link"),Yn(S);var U=S;U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),Wr(S,"link",h),u.instance=S}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=dg.bind(m),l.addEventListener("load",u),l.addEventListener("error",u))}}function L8(){if(oh===null)throw Error(r(475));var l=oh;return l.stylesheets&&l.count===0&&ox(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&ox(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function dg(){if(this.count--,this.count===0){if(this.stylesheets)ox(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var fg=null;function ox(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,fg=new Map,u.forEach(B8,l),fg=null,dg.call(l))}function B8(l,u){if(!(u.state.loading&4)){var h=fg.get(l);if(h)var m=h.get(null);else{h=new Map,fg.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var U=_[S];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}_=u.instance,U=_.getAttribute("data-precedence"),S=h.get(U)||m,S===m&&h.set(null,_),h.set(U,_),this.count++,m=dg.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),S?S.parentNode.insertBefore(_,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var lh={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function V8(l,u,h,m,_,S,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function ZS(l,u,h,m,_,S,U,z,K,oe,_e,Se){return l=new V8(l,u,h,U,z,K,oe,Se),u=1,S===!0&&(u|=24),S=Bi(3,null,null,u),l.current=S,S.stateNode=l,u=Hy(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:m,isDehydrated:h,cache:u},Wy(S),l}function JS(l){return l?(l=Eu,l):Eu}function eT(l,u,h,m,_,S){_=JS(_),m.context===null?m.context=_:m.pendingContext=_,m=Lo(u),m.payload={element:h},S=S===void 0?null:S,S!==null&&(m.callback=S),h=Bo(l,m,u),h!==null&&(Hi(h,l,u),Vf(h,l,u))}function tT(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function lx(l,u){tT(l,u),(l=l.alternate)&&tT(l,u)}function nT(l){if(l.tag===13){var u=Au(l,67108864);u!==null&&Hi(u,l,67108864),lx(l,67108864)}}var hg=!0;function F8(l,u,h,m){var _=G.T;G.T=null;var S=Y.p;try{Y.p=2,cx(l,u,h,m)}finally{Y.p=S,G.T=_}}function j8(l,u,h,m){var _=G.T;G.T=null;var S=Y.p;try{Y.p=8,cx(l,u,h,m)}finally{Y.p=S,G.T=_}}function cx(l,u,h,m){if(hg){var _=ux(m);if(_===null)Kv(l,u,m,pg,h),iT(l,m);else if(H8(_,l,u,h,m))m.stopPropagation();else if(iT(l,m),u&4&&-1<U8.indexOf(l)){for(;_!==null;){var S=Ga(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var U=Wt(S.pendingLanes);if(U!==0){var z=S;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var K=1<<31-Xe(U);z.entanglements[1]|=K,U&=~K}as(S),(nn&6)===0&&(Qp=Ce()+500,th(0))}}break;case 13:z=Au(S,2),z!==null&&Hi(z,S,2),Jp(),lx(S,2)}if(S=ux(m),S===null&&Kv(l,u,m,pg,h),S===_)break;_=S}_!==null&&m.stopPropagation()}else Kv(l,u,m,null,h)}}function ux(l){return l=Qi(l),dx(l)}var pg=null;function dx(l){if(pg=null,l=Ds(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return pg=l,null}function rT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case $e:return 2;case Ie:return 8;case Oe:case ut:return 32;case xt:return 268435456;default:return 32}default:return 32}}var fx=!1,Ko=null,Qo=null,Zo=null,ch=new Map,uh=new Map,Jo=[],U8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iT(l,u){switch(l){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":ch.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":uh.delete(u.pointerId)}}function dh(l,u,h,m,_,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:S,targetContainers:[_]},u!==null&&(u=Ga(u),u!==null&&nT(u)),l):(l.eventSystemFlags|=m,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function H8(l,u,h,m,_){switch(u){case"focusin":return Ko=dh(Ko,l,u,h,m,_),!0;case"dragenter":return Qo=dh(Qo,l,u,h,m,_),!0;case"mouseover":return Zo=dh(Zo,l,u,h,m,_),!0;case"pointerover":var S=_.pointerId;return ch.set(S,dh(ch.get(S)||null,l,u,h,m,_)),!0;case"gotpointercapture":return S=_.pointerId,uh.set(S,dh(uh.get(S)||null,l,u,h,m,_)),!0}return!1}function aT(l){var u=Ds(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,jl(l.priority,function(){if(h.tag===13){var m=Ui();m=Is(m);var _=Au(h,m);_!==null&&Hi(_,h,m),lx(h,m)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function gg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=ux(l.nativeEvent);if(h===null){h=l.nativeEvent;var m=new h.constructor(h.type,h);Ps=m,h.target.dispatchEvent(m),Ps=null}else return u=Ga(h),u!==null&&nT(u),l.blockedOn=h,!1;u.shift()}return!0}function sT(l,u,h){gg(l)&&h.delete(u)}function z8(){fx=!1,Ko!==null&&gg(Ko)&&(Ko=null),Qo!==null&&gg(Qo)&&(Qo=null),Zo!==null&&gg(Zo)&&(Zo=null),ch.forEach(sT),uh.forEach(sT)}function mg(l,u){l.blockedOn===u&&(l.blockedOn=null,fx||(fx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,z8)))}var yg=null;function oT(l){yg!==l&&(yg=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yg===l&&(yg=null);for(var u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],_=l[u+2];if(typeof m!="function"){if(dx(m||h)===null)continue;break}var S=Ga(h);S!==null&&(l.splice(u,3),u-=3,dv(S,{pending:!0,data:_,method:h.method,action:m},m,_))}}))}function fh(l){function u(K){return mg(K,l)}Ko!==null&&mg(Ko,l),Qo!==null&&mg(Qo,l),Zo!==null&&mg(Zo,l),ch.forEach(u),uh.forEach(u);for(var h=0;h<Jo.length;h++){var m=Jo[h];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Jo.length&&(h=Jo[0],h.blockedOn===null);)aT(h),h.blockedOn===null&&Jo.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var _=h[m],S=h[m+1],U=_[rr]||null;if(typeof S=="function")U||oT(h);else if(U){var z=null;if(S&&S.hasAttribute("formAction")){if(_=S,U=S[rr]||null)z=U.formAction;else if(dx(_)!==null)continue}else z=U.action;typeof z=="function"?h[m+1]=z:(h.splice(m,3),m-=3),oT(h)}}}function hx(l){this._internalRoot=l}vg.prototype.render=hx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,m=Ui();eT(h,m,l,u,null,null)},vg.prototype.unmount=hx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;eT(l.current,2,null,l,null,null),Jp(),u[Xi]=null}};function vg(l){this._internalRoot=l}vg.prototype.unstable_scheduleHydration=function(l){if(l){var u=nr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<Jo.length&&u!==0&&u<Jo[h].priority;h++);Jo.splice(h,0,l),h===0&&aT(l)}};var lT=e.version;if(lT!=="19.1.0")throw Error(r(527,lT,"19.1.0"));Y.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var $8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xg.isDisabled&&xg.supportsFiber)try{tt=xg.inject($8),rt=xg}catch{}}return ph.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,m="",_=EE,S=SE,U=TE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=ZS(l,1,!1,null,null,h,m,_,S,U,z,null),l[Xi]=u.current,Xv(l),new hx(u)},ph.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var m=!1,_="",S=EE,U=SE,z=TE,K=null,oe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(oe=h.formState)),u=ZS(l,1,!0,u,h??null,m,_,S,U,z,K,oe),u.context=JS(null),h=u.current,m=Ui(),m=Is(m),_=Lo(m),_.callback=null,Bo(h,_,m),h=m,u.current.lanes=h,tr(u,h),as(u),l[Xi]=u.current,Xv(l),new vg(u)},ph.version="19.1.0",ph}var vT;function VN(){if(vT)return px.exports;vT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),px.exports=BN(),px.exports}var FN=VN();const jN=()=>{};var xT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},q3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,y=d&63;c||(y=64,s||(g=64)),r.push(t[f],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Y3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new HN;const g=a<<2|o>>4;if(r.push(g),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const v=d<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zN=function(n){const e=Y3(n);return q3.encodeByteArray(e,!0)},u1=function(n){return zN(n).replace(/\./g,"")},X3=function(n){try{return q3.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=()=>$N().__FIREBASE_DEFAULTS__,WN=()=>{if(typeof process>"u"||typeof xT>"u")return;const n=xT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X3(n[1]);return e&&JSON.parse(e)},mm=()=>{try{return jN()||GN()||WN()||YN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},K3=n=>{var e,t;return(t=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qN=n=>{const e=K3(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Q3=()=>{var n;return(n=mm())===null||n===void 0?void 0:n.config},Z3=n=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J3(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[u1(JSON.stringify(t)),u1(JSON.stringify(s)),""].join(".")}const $h={};function QN(){const n={prod:[],emulator:[]};for(const e of Object.keys($h))$h[e]?n.emulator.push(e):n.prod.push(e);return n}function ZN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wT=!1;function eR(n,e){if(typeof window>"u"||typeof document>"u"||!Zd(window.location.host)||$h[n]===e||$h[n]||wT)return;$h[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=QN().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{wT=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=ZN(r),y=t("text"),v=document.getElementById(y)||document.createElement("span"),b=t("learnmore"),A=document.getElementById(b)||document.createElement("a"),E=t("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;o(C),f(A,b);const I=d();c(T,E),C.append(T,v,A,I),document.body.appendChild(C)}a?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ui())}function e5(){var n;const e=(n=mm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i5(){const n=ui();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function a5(){return!e5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s5(){try{return typeof indexedDB=="object"}catch{return!1}}function o5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="FirebaseError";class Eo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=l5,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A0.prototype.create)}}class A0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?c5(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Eo(i,o,r)}}function c5(n,e){return n.replace(u5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u5=/\{\$([^}]+)}/g;function d5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(_T(a)&&_T(s)){if(!Fc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function _T(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Rh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function f5(n,e){const t=new h5(n,e);return t.subscribe.bind(t)}class h5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");p5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yx),i.error===void 0&&(i.error=yx),i.complete===void 0&&(i.complete=yx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n){return n&&n._delegate?n._delegate:n}class jc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new XN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y5(e))try{this.getOrInitializeService({instanceIdentifier:_c})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=_c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_c){return this.instances.has(e)}getOptions(e=_c){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_c){return this.component?this.component.multipleInstances?e:_c:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m5(n){return n===_c?void 0:n}function y5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new g5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Rt||(Rt={}));const x5={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},w5=Rt.INFO,_5={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},b5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=_5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pw{constructor(e){this.name=e,this._logLevel=w5,this._logHandler=b5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const A5=(n,e)=>e.some(t=>n instanceof t);let bT,AT;function E5(){return bT||(bT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S5(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tR=new WeakMap,y2=new WeakMap,nR=new WeakMap,vx=new WeakMap,kw=new WeakMap;function T5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(yl(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&tR.set(t,n)}).catch(()=>{}),kw.set(e,n),e}function C5(n){if(y2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});y2.set(n,e)}let v2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return y2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function I5(n){v2=n(v2)}function D5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(xx(this),e,...t);return nR.set(r,e.sort?e.sort():[e]),yl(r)}:S5().includes(n)?function(...e){return n.apply(xx(this),e),yl(tR.get(this))}:function(...e){return yl(n.apply(xx(this),e))}}function R5(n){return typeof n=="function"?D5(n):(n instanceof IDBTransaction&&C5(n),A5(n,E5())?new Proxy(n,v2):n)}function yl(n){if(n instanceof IDBRequest)return T5(n);if(vx.has(n))return vx.get(n);const e=R5(n);return e!==n&&(vx.set(n,e),kw.set(e,n)),e}const xx=n=>kw.get(n);function M5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=yl(s);return r&&s.addEventListener("upgradeneeded",c=>{r(yl(s.result),c.oldVersion,c.newVersion,yl(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const O5=["get","getKey","getAll","getAllKeys","count"],P5=["put","add","delete","clear"],wx=new Map;function ET(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wx.get(e))return wx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=P5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||O5.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[t](...o),i&&c.done]))[0]};return wx.set(e,a),a}I5(n=>({...n,get:(e,t,r)=>ET(e,t)||n.get(e,t,r),has:(e,t)=>!!ET(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function N5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const x2="@firebase/app",ST="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Pw("@firebase/app"),L5="@firebase/app-compat",B5="@firebase/analytics-compat",V5="@firebase/analytics",F5="@firebase/app-check-compat",j5="@firebase/app-check",U5="@firebase/auth",H5="@firebase/auth-compat",z5="@firebase/database",$5="@firebase/data-connect",G5="@firebase/database-compat",W5="@firebase/functions",Y5="@firebase/functions-compat",q5="@firebase/installations",X5="@firebase/installations-compat",K5="@firebase/messaging",Q5="@firebase/messaging-compat",Z5="@firebase/performance",J5="@firebase/performance-compat",e9="@firebase/remote-config",t9="@firebase/remote-config-compat",n9="@firebase/storage",r9="@firebase/storage-compat",i9="@firebase/firestore",a9="@firebase/ai",s9="@firebase/firestore-compat",o9="firebase",l9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="[DEFAULT]",c9={[x2]:"fire-core",[L5]:"fire-core-compat",[V5]:"fire-analytics",[B5]:"fire-analytics-compat",[j5]:"fire-app-check",[F5]:"fire-app-check-compat",[U5]:"fire-auth",[H5]:"fire-auth-compat",[z5]:"fire-rtdb",[$5]:"fire-data-connect",[G5]:"fire-rtdb-compat",[W5]:"fire-fn",[Y5]:"fire-fn-compat",[q5]:"fire-iid",[X5]:"fire-iid-compat",[K5]:"fire-fcm",[Q5]:"fire-fcm-compat",[Z5]:"fire-perf",[J5]:"fire-perf-compat",[e9]:"fire-rc",[t9]:"fire-rc-compat",[n9]:"fire-gcs",[r9]:"fire-gcs-compat",[i9]:"fire-fst",[s9]:"fire-fst-compat",[a9]:"fire-vertex","fire-js":"fire-js",[o9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map,u9=new Map,_2=new Map;function TT(n,e){try{n.container.addComponent(e)}catch(t){fo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pd(n){const e=n.name;if(_2.has(e))return fo.debug(`There were multiple attempts to register component ${e}.`),!1;_2.set(e,n);for(const t of d1.values())TT(t,n);for(const t of u9.values())TT(t,n);return!0}function Nw(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ca(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vl=new A0("app","Firebase",d9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=l9;function rR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:w2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw vl.create("bad-app-name",{appName:String(i)});if(t||(t=Q3()),!t)throw vl.create("no-options");const a=d1.get(i);if(a){if(Fc(t,a.options)&&Fc(r,a.config))return a;throw vl.create("duplicate-app",{appName:i})}const s=new v5(i);for(const c of _2.values())s.addComponent(c);const o=new f9(t,r,s);return d1.set(i,o),o}function iR(n=w2){const e=d1.get(n);if(!e&&n===w2&&Q3())return rR();if(!e)throw vl.create("no-app",{appName:n});return e}function xl(n,e,t){var r;let i=(r=c9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fo.warn(o.join(" "));return}Pd(new jc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="firebase-heartbeat-database",p9=1,Jh="firebase-heartbeat-store";let _x=null;function aR(){return _x||(_x=M5(h9,p9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Jh)}catch(t){console.warn(t)}}}}).catch(n=>{throw vl.create("idb-open",{originalErrorMessage:n.message})})),_x}async function g9(n){try{const t=(await aR()).transaction(Jh),r=await t.objectStore(Jh).get(sR(n));return await t.done,r}catch(e){if(e instanceof Eo)fo.warn(e.message);else{const t=vl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fo.warn(t.message)}}}async function CT(n,e){try{const r=(await aR()).transaction(Jh,"readwrite");await r.objectStore(Jh).put(e,sR(n)),await r.done}catch(t){if(t instanceof Eo)fo.warn(t.message);else{const r=vl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fo.warn(r.message)}}}function sR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=1024,y9=30;class v9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new w9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=IT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>y9){const s=_9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=IT(),{heartbeatsToSend:r,unsentEntries:i}=x9(this._heartbeatsCache.heartbeats),a=u1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return fo.warn(t),""}}}function IT(){return new Date().toISOString().substring(0,10)}function x9(n,e=m9){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),DT(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),DT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class w9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s5()?o5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return CT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return CT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function DT(n){return u1(JSON.stringify({version:2,heartbeats:n})).length}function _9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(n){Pd(new jc("platform-logger",e=>new k5(e),"PRIVATE")),Pd(new jc("heartbeat",e=>new v9(e),"PRIVATE")),xl(x2,ST,n),xl(x2,ST,"esm2017"),xl("fire-js","")}b9("");function Lw(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function oR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A9=oR,lR=new A0("auth","Firebase",oR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Pw("@firebase/auth");function E9(n,...e){f1.logLevel<=Rt.WARN&&f1.warn(`Auth (${Jd}): ${n}`,...e)}function qg(n,...e){f1.logLevel<=Rt.ERROR&&f1.error(`Auth (${Jd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n,...e){throw Bw(n,...e)}function gs(n,...e){return Bw(n,...e)}function cR(n,e,t){const r=Object.assign(Object.assign({},A9()),{[e]:t});return new A0("auth","Firebase",r).create(e,{appName:n.name})}function oo(n){return cR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lR.create(n,...e)}function ot(n,e,...t){if(!n)throw Bw(e,...t)}function eo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qg(e),new Error(e)}function ho(n,e){n||eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function S9(){return RT()==="http:"||RT()==="https:"}function RT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S9()||n5()||"connection"in navigator)?navigator.onLine:!0}function C9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t){this.shortDelay=e,this.longDelay=t,ho(t>e,"Short delay should be less than long delay!"),this.isMobile=JN()||r5()}get(){return T9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n,e){ho(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R9=new S0(3e4,6e4);function Ol(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pl(n,e,t,r,i={}){return dR(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=E0(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},a);return t5()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Zd(n.emulatorConfig.host)&&(d.credentials="include"),uR.fetch()(await fR(n,n.config.apiHost,t,o),d)})}async function dR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},I9),e);try{const i=new O9(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw _g(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _g(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw _g(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw _g(n,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw cR(n,f,d);ja(n,f)}}catch(i){if(i instanceof Eo)throw i;ja(n,"network-request-failed",{message:String(i)})}}async function T0(n,e,t,r,i={}){const a=await Pl(n,e,t,r,i);return"mfaPendingCredential"in a&&ja(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function fR(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?Vw(n.config,i):`${n.config.apiScheme}://${i}`;return D9.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function M9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gs(this.auth,"network-request-failed")),R9.get())})}}function _g(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gs(n,e,r);return i.customData._tokenResponse=t,i}function MT(n){return n!==void 0&&n.enterprise!==void 0}class P9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return M9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k9(n,e){return Pl(n,"GET","/v2/recaptchaConfig",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(n,e){return Pl(n,"POST","/v1/accounts:delete",e)}async function h1(n,e){return Pl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L9(n,e=!1){const t=fr(n),r=await t.getIdToken(e),i=Fw(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Gh(bx(i.auth_time)),issuedAtTime:Gh(bx(i.iat)),expirationTime:Gh(bx(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function bx(n){return Number(n)*1e3}function Fw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qg("JWT malformed, contained fewer than 3 sections"),null;try{const i=X3(t);return i?JSON.parse(i):(qg("Failed to decode base64 JWT payload"),null)}catch(i){return qg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function OT(n){const e=Fw(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Eo&&B9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function B9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gh(this.lastLoginAt),this.creationTime=Gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n){var e;const t=n.auth,r=await n.getIdToken(),i=await e0(n,h1(t,{idToken:r}));ot(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?hR(a.providerUserInfo):[],o=j9(n.providerData,s),c=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new A2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function F9(n){const e=fr(n);await p1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hR(n){return n.map(e=>{var{providerId:t}=e,r=Lw(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(n,e){const t=await dR(n,{},async()=>{const r=E0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await fR(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&Zd(n.emulatorConfig.host)&&(c.credentials="include"),uR.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function H9(n,e){return Pl(n,"POST","/v2/accounts:revokeToken",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=OT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await U9(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new _d;return r&&(ot(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ot(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _d,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class La{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Lw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new A2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await e0(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return L9(this,e)}reload(){return F9(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new La(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await p1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ca(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await e0(this,N9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,o,c,d,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,v=(s=t.photoURL)!==null&&s!==void 0?s:void 0,b=(o=t.tenantId)!==null&&o!==void 0?o:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,T=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:I,isAnonymous:O,providerData:N,stsTokenManager:M}=t;ot(C&&M,e,"internal-error");const R=_d.fromJSON(this.name,M);ot(typeof C=="string",e,"internal-error"),tl(p,e.name),tl(g,e.name),ot(typeof I=="boolean",e,"internal-error"),ot(typeof O=="boolean",e,"internal-error"),tl(y,e.name),tl(v,e.name),tl(b,e.name),tl(A,e.name),tl(E,e.name),tl(T,e.name);const D=new La({uid:C,auth:e,email:g,emailVerified:I,displayName:p,isAnonymous:O,photoURL:v,phoneNumber:y,tenantId:b,stsTokenManager:R,createdAt:E,lastLoginAt:T});return N&&Array.isArray(N)&&(D.providerData=N.map(B=>Object.assign({},B))),A&&(D._redirectEventId=A),D}static async _fromIdTokenResponse(e,t,r=!1){const i=new _d;i.updateFromServerResponse(t);const a=new La({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await p1(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ot(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?hR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new _d;o.updateFromIdToken(r);const c=new La({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new A2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new Map;function to(n){ho(n instanceof Function,"Expected a class definition");let e=PT.get(n);return e?(ho(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pR.type="NONE";const kT=pR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n,e,t){return`firebase:${n}:${e}:${t}`}class bd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Xg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Xg("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await h1(this.auth,{idToken:e}).catch(()=>{});return t?La._fromGetAccountInfoResponse(this.auth,t,e):null}return La._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bd(to(kT),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||to(kT);const s=Xg(r,e.config.apiKey,e.name);let o=null;for(const d of t)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await h1(e,{idToken:f}).catch(()=>{});if(!g)break;p=await La._fromGetAccountInfoResponse(e,g,f)}else p=La._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new bd(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new bd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wR(e))return"Blackberry";if(_R(e))return"Webos";if(mR(e))return"Safari";if((e.includes("chrome/")||yR(e))&&!e.includes("edge/"))return"Chrome";if(xR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gR(n=ui()){return/firefox\//i.test(n)}function mR(n=ui()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yR(n=ui()){return/crios\//i.test(n)}function vR(n=ui()){return/iemobile/i.test(n)}function xR(n=ui()){return/android/i.test(n)}function wR(n=ui()){return/blackberry/i.test(n)}function _R(n=ui()){return/webos/i.test(n)}function jw(n=ui()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z9(n=ui()){var e;return jw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $9(){return i5()&&document.documentMode===10}function bR(n=ui()){return jw(n)||xR(n)||_R(n)||wR(n)||/windows phone/i.test(n)||vR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n,e=[]){let t;switch(n){case"Browser":t=NT(ui());break;case"Worker":t=`${NT(ui())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W9(n,e={}){return Pl(n,"GET","/v2/passwordPolicy",Ol(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=6;class q9{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Y9,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new G9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=to(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await bd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await h1(this,{idToken:e}),r=await La._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ca(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await p1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ca(this.app))return Promise.reject(oo(this));const t=e?fr(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ca(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ca(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(to(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W9(this),t=new q9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new A0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await H9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&to(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await bd.create(this,[to(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ca(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&E9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qc(n){return fr(n)}class LT{constructor(e){this.auth=e,this.observer=null,this.addObserver=f5(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K9(n){ym=n}function ER(n){return ym.loadJS(n)}function Q9(){return ym.recaptchaEnterpriseScript}function Z9(){return ym.gapiScript}function J9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class e7{constructor(){this.enterprise=new t7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class t7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const n7="recaptcha-enterprise",SR="NO_RECAPTCHA";class r7{constructor(e){this.type=n7,this.auth=qc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{k9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new P9(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;MT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(SR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!t&&MT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Q9();c.length!==0&&(c+=o),ER(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function BT(n,e,t,r=!1,i=!1){const a=new r7(n);let s;if(i)s=SR;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const o=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function E2(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await BT(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await BT(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(n,e){const t=Nw(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Fc(a,e??{}))return i;ja(i,"already-initialized")}return t.initialize({options:e})}function a7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(to);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function s7(n,e,t){const r=qc(n);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=TR(e),{host:s,port:o}=o7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(Fc(d,r.config.emulator)&&Fc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Zd(s)?(J3(`${a}//${s}${c}`),eR("Auth",!0)):l7()}function TR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o7(n){const e=TR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:VT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:VT(s)}}}function VT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function l7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return eo("not implemented")}_getIdTokenResponse(e){return eo("not implemented")}_linkToIdToken(e,t){return eo("not implemented")}_getReauthenticationResolver(e){return eo("not implemented")}}async function c7(n,e){return Pl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(n,e){return T0(n,"POST","/v1/accounts:signInWithPassword",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(n,e){return T0(n,"POST","/v1/accounts:signInWithEmailLink",Ol(n,e))}async function f7(n,e){return T0(n,"POST","/v1/accounts:signInWithEmailLink",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Uw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new t0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new t0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E2(e,t,"signInWithPassword",u7);case"emailLink":return d7(e,{email:this._email,oobCode:this._password});default:ja(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E2(e,r,"signUpPassword",c7);case"emailLink":return f7(e,{idToken:t,email:this._email,oobCode:this._password});default:ja(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(n,e){return T0(n,"POST","/v1/accounts:signInWithIdp",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="http://localhost";class Uc extends Uw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ja("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Lw(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Uc(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Ad(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ad(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ad(e,t)}buildRequest(){const e={requestUri:h7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=E0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g7(n){const e=Dh(Rh(n)).link,t=e?Dh(Rh(e)).deep_link_id:null,r=Dh(Rh(n)).deep_link_id;return(r?Dh(Rh(r)).link:null)||r||t||e||n}class Hw{constructor(e){var t,r,i,a,s,o;const c=Dh(Rh(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=p7((i=c.mode)!==null&&i!==void 0?i:null);ot(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=g7(e);try{return new Hw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.providerId=ef.PROVIDER_ID}static credential(e,t){return t0._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hw.parseLink(t);return ot(r,"argument-error"),t0._fromEmailAndCode(e,r.code,r.tenantId)}}ef.PROVIDER_ID="password";ef.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ef.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends CR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends C0{constructor(){super("facebook.com")}static credential(e){return Uc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ul.credential(e.oauthAccessToken)}catch{return null}}}ul.FACEBOOK_SIGN_IN_METHOD="facebook.com";ul.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends C0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uc._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return dl.credential(t,r)}catch{return null}}}dl.GOOGLE_SIGN_IN_METHOD="google.com";dl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends C0{constructor(){super("github.com")}static credential(e){return Uc._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fl.credential(e.oauthAccessToken)}catch{return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com";fl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends C0{constructor(){super("twitter.com")}static credential(e,t){return Uc._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hl.credential(t,r)}catch{return null}}}hl.TWITTER_SIGN_IN_METHOD="twitter.com";hl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(n,e){return T0(n,"POST","/v1/accounts:signUp",Ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await La._fromIdTokenResponse(e,r,i),s=FT(r);return new Hc({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=FT(r);return new Hc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function FT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1 extends Eo{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,g1.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new g1(e,t,r,i)}}function IR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?g1._fromErrorAndOperation(n,a,e,r):a})}async function y7(n,e,t=!1){const r=await e0(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(n,e,t=!1){const{auth:r}=n;if(ca(r.app))return Promise.reject(oo(r));const i="reauthenticate";try{const a=await e0(n,IR(r,i,e,n),t);ot(a.idToken,r,"internal-error");const s=Fw(a.idToken);ot(s,r,"internal-error");const{sub:o}=s;return ot(n.uid===o,r,"user-mismatch"),Hc._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ja(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e,t=!1){if(ca(n.app))return Promise.reject(oo(n));const r="signIn",i=await IR(n,r,e),a=await Hc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function x7(n,e){return DR(qc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n){const e=qc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w7(n,e,t){if(ca(n.app))return Promise.reject(oo(n));const r=qc(n),s=await E2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&RR(n),c}),o=await Hc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function _7(n,e,t){return ca(n.app)?Promise.reject(oo(n)):x7(fr(n),ef.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&RR(n),r})}function b7(n,e,t,r){return fr(n).onIdTokenChanged(e,t,r)}function A7(n,e,t){return fr(n).beforeAuthStateChanged(e,t)}function E7(n,e,t,r){return fr(n).onAuthStateChanged(e,t,r)}const m1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(m1,"1"),this.storage.removeItem(m1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=1e3,T7=10;class OR extends MR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);$9()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T7):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},S7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OR.type="LOCAL";const C7=OR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR extends MR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}PR.type="SESSION";const kR=PR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new vm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(t.origin,a)),c=await I7(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=zw("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function R7(n){ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function M7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function P7(){return NR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="firebaseLocalStorageDb",k7=1,y1="firebaseLocalStorage",BR="fbase_key";class I0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xm(n,e){return n.transaction([y1],e?"readwrite":"readonly").objectStore(y1)}function N7(){const n=indexedDB.deleteDatabase(LR);return new I0(n).toPromise()}function S2(){const n=indexedDB.open(LR,k7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(y1,{keyPath:BR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(y1)?e(r):(r.close(),await N7(),e(await S2()))})})}async function jT(n,e,t){const r=xm(n,!0).put({[BR]:e,value:t});return new I0(r).toPromise()}async function L7(n,e){const t=xm(n,!1).get(e),r=await new I0(t).toPromise();return r===void 0?null:r.value}function UT(n,e){const t=xm(n,!0).delete(e);return new I0(t).toPromise()}const B7=800,V7=3;class VR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>V7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vm._getInstance(P7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await M7(),!this.activeServiceWorker)return;this.sender=new D7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S2();return await jT(e,m1,"1"),await UT(e,m1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>jT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>L7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>UT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=xm(i,!1).getAll();return new I0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VR.type="LOCAL";const F7=VR;new S0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(n,e){return e?to(e):(ot(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends Uw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ad(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ad(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ad(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function U7(n){return DR(n.auth,new $w(n),n.bypassAuthState)}function H7(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),v7(t,new $w(n),n.bypassAuthState)}async function z7(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),y7(t,new $w(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U7;case"linkViaPopup":case"linkViaRedirect":return z7;case"reauthViaPopup":case"reauthViaRedirect":return H7;default:ja(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=new S0(2e3,1e4);class dd extends FR{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,dd.currentPopupAction&&dd.currentPopupAction.cancel(),dd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=zw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$7.get())};e()}}dd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="pendingRedirect",Kg=new Map;class W7 extends FR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Kg.get(this.auth._key());if(!e){try{const r=await Y7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Kg.set(this.auth._key(),e)}return this.bypassAuthState||Kg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y7(n,e){const t=K7(e),r=X7(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function q7(n,e){Kg.set(n._key(),e)}function X7(n){return to(n._redirectPersistence)}function K7(n){return Xg(G7,n.config.apiKey,n.name)}async function Q7(n,e,t=!1){if(ca(n.app))return Promise.reject(oo(n));const r=qc(n),i=j7(r,e),s=await new W7(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=600*1e3;class J7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z7&&this.cachedEventUids.clear(),this.cachedEventUids.has(HT(e))}saveEventToCache(e){this.cachedEventUids.add(HT(e)),this.lastProcessedEventTime=Date.now()}}function HT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(n,e={}){return Pl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rL=/^https?/;async function iL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tL(n);for(const t of e)try{if(aL(t))return}catch{}ja(n,"unauthorized-domain")}function aL(n){const e=b2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!rL.test(t))return!1;if(nL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new S0(3e4,6e4);function zT(){const n=ms().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oL(n){return new Promise((e,t)=>{var r,i,a;function s(){zT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zT(),t(gs(n,"network-request-failed"))},timeout:sL.get()})}if(!((i=(r=ms().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ms().gapi)===null||a===void 0)&&a.load)s();else{const o=J9("iframefcb");return ms()[o]=()=>{gapi.load?s():t(gs(n,"network-request-failed"))},ER(`${Z9()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Qg=null,e})}let Qg=null;function lL(n){return Qg=Qg||oL(n),Qg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new S0(5e3,15e3),uL="__/auth/iframe",dL="emulator/auth/iframe",fL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pL(n){const e=n.config;ot(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Vw(e,dL):`https://${n.config.authDomain}/${uL}`,r={apiKey:e.apiKey,appName:n.name,v:Jd},i=hL.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${E0(r).slice(1)}`}async function gL(n){const e=await lL(n),t=ms().gapi;return ot(t,n,"internal-error"),e.open({where:document.body,url:pL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=gs(n,"network-request-failed"),o=ms().setTimeout(()=>{a(s)},cL.get());function c(){ms().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yL=500,vL=600,xL="_blank",wL="http://localhost";class $T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _L(n,e,t,r=yL,i=vL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},mL),{width:r.toString(),height:i.toString(),top:a,left:s}),d=ui().toLowerCase();t&&(o=yR(d)?xL:t),gR(d)&&(e=e||wL,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[y,v])=>`${g}${y}=${v},`,"");if(z9(d)&&o!=="_self")return bL(e||"",o),new $T(null);const p=window.open(e||"",o,f);ot(p,n,"popup-blocked");try{p.focus()}catch{}return new $T(p)}function bL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="__/auth/handler",EL="emulator/auth/handler",SL=encodeURIComponent("fac");async function GT(n,e,t,r,i,a){ot(n.config.authDomain,n,"auth-domain-config-required"),ot(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Jd,eventId:i};if(e instanceof CR){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",d5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof C0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await n._getAppCheckToken(),d=c?`#${SL}=${encodeURIComponent(c)}`:"";return`${TL(n)}?${E0(o).slice(1)}${d}`}function TL({config:n}){return n.emulator?Vw(n,EL):`https://${n.authDomain}/${AL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="webStorageSupport";class CL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kR,this._completeRedirectFn=Q7,this._overrideRedirectResult=q7}async _openPopup(e,t,r,i){var a;ho((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await GT(e,t,r,b2(),i);return _L(e,s,zw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await GT(e,t,r,b2(),i);return R7(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(ho(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gL(e),r=new J7(e);return t.register("authEvent",i=>(ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ax,{type:Ax},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ax];s!==void 0&&t(!!s),ja(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bR()||mR()||jw()}}const IL=CL;var WT="@firebase/auth",YT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ML(n){Pd(new jc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ot(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AR(n)},d=new X9(r,i,a,c);return a7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pd(new jc("auth-internal",e=>{const t=qc(e.getProvider("auth").getImmediate());return(r=>new DL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xl(WT,YT,RL(n)),xl(WT,YT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=300,PL=Z3("authIdTokenMaxAge")||OL;let qT=null;const kL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PL)return;const i=t==null?void 0:t.token;qT!==i&&(qT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NL(n=iR()){const e=Nw(n,"auth");if(e.isInitialized())return e.getImmediate();const t=i7(n,{popupRedirectResolver:IL,persistence:[F7,C7,kR]}),r=Z3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=kL(a.toString());A7(t,s,()=>s(t.currentUser)),b7(t,o=>s(o))}}const i=K3("auth");return i&&s7(t,`http://${i}`),t}function LL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}K9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=gs("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",LL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ML("Browser");var BL="firebase",VL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xl(BL,VL,"app");var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wl,UR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function D(){}D.prototype=R.prototype,M.D=R.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(B,L,P){for(var F=Array(arguments.length-2),q=2;q<arguments.length;q++)F[q-2]=arguments[q];return R.prototype[L].apply(B,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,R,D){D||(D=0);var B=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)B[L]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(L=0;16>L;++L)B[L]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=M.g[0],D=M.g[1],L=M.g[2];var P=M.g[3],F=R+(P^D&(L^P))+B[0]+3614090360&4294967295;R=D+(F<<7&4294967295|F>>>25),F=P+(L^R&(D^L))+B[1]+3905402710&4294967295,P=R+(F<<12&4294967295|F>>>20),F=L+(D^P&(R^D))+B[2]+606105819&4294967295,L=P+(F<<17&4294967295|F>>>15),F=D+(R^L&(P^R))+B[3]+3250441966&4294967295,D=L+(F<<22&4294967295|F>>>10),F=R+(P^D&(L^P))+B[4]+4118548399&4294967295,R=D+(F<<7&4294967295|F>>>25),F=P+(L^R&(D^L))+B[5]+1200080426&4294967295,P=R+(F<<12&4294967295|F>>>20),F=L+(D^P&(R^D))+B[6]+2821735955&4294967295,L=P+(F<<17&4294967295|F>>>15),F=D+(R^L&(P^R))+B[7]+4249261313&4294967295,D=L+(F<<22&4294967295|F>>>10),F=R+(P^D&(L^P))+B[8]+1770035416&4294967295,R=D+(F<<7&4294967295|F>>>25),F=P+(L^R&(D^L))+B[9]+2336552879&4294967295,P=R+(F<<12&4294967295|F>>>20),F=L+(D^P&(R^D))+B[10]+4294925233&4294967295,L=P+(F<<17&4294967295|F>>>15),F=D+(R^L&(P^R))+B[11]+2304563134&4294967295,D=L+(F<<22&4294967295|F>>>10),F=R+(P^D&(L^P))+B[12]+1804603682&4294967295,R=D+(F<<7&4294967295|F>>>25),F=P+(L^R&(D^L))+B[13]+4254626195&4294967295,P=R+(F<<12&4294967295|F>>>20),F=L+(D^P&(R^D))+B[14]+2792965006&4294967295,L=P+(F<<17&4294967295|F>>>15),F=D+(R^L&(P^R))+B[15]+1236535329&4294967295,D=L+(F<<22&4294967295|F>>>10),F=R+(L^P&(D^L))+B[1]+4129170786&4294967295,R=D+(F<<5&4294967295|F>>>27),F=P+(D^L&(R^D))+B[6]+3225465664&4294967295,P=R+(F<<9&4294967295|F>>>23),F=L+(R^D&(P^R))+B[11]+643717713&4294967295,L=P+(F<<14&4294967295|F>>>18),F=D+(P^R&(L^P))+B[0]+3921069994&4294967295,D=L+(F<<20&4294967295|F>>>12),F=R+(L^P&(D^L))+B[5]+3593408605&4294967295,R=D+(F<<5&4294967295|F>>>27),F=P+(D^L&(R^D))+B[10]+38016083&4294967295,P=R+(F<<9&4294967295|F>>>23),F=L+(R^D&(P^R))+B[15]+3634488961&4294967295,L=P+(F<<14&4294967295|F>>>18),F=D+(P^R&(L^P))+B[4]+3889429448&4294967295,D=L+(F<<20&4294967295|F>>>12),F=R+(L^P&(D^L))+B[9]+568446438&4294967295,R=D+(F<<5&4294967295|F>>>27),F=P+(D^L&(R^D))+B[14]+3275163606&4294967295,P=R+(F<<9&4294967295|F>>>23),F=L+(R^D&(P^R))+B[3]+4107603335&4294967295,L=P+(F<<14&4294967295|F>>>18),F=D+(P^R&(L^P))+B[8]+1163531501&4294967295,D=L+(F<<20&4294967295|F>>>12),F=R+(L^P&(D^L))+B[13]+2850285829&4294967295,R=D+(F<<5&4294967295|F>>>27),F=P+(D^L&(R^D))+B[2]+4243563512&4294967295,P=R+(F<<9&4294967295|F>>>23),F=L+(R^D&(P^R))+B[7]+1735328473&4294967295,L=P+(F<<14&4294967295|F>>>18),F=D+(P^R&(L^P))+B[12]+2368359562&4294967295,D=L+(F<<20&4294967295|F>>>12),F=R+(D^L^P)+B[5]+4294588738&4294967295,R=D+(F<<4&4294967295|F>>>28),F=P+(R^D^L)+B[8]+2272392833&4294967295,P=R+(F<<11&4294967295|F>>>21),F=L+(P^R^D)+B[11]+1839030562&4294967295,L=P+(F<<16&4294967295|F>>>16),F=D+(L^P^R)+B[14]+4259657740&4294967295,D=L+(F<<23&4294967295|F>>>9),F=R+(D^L^P)+B[1]+2763975236&4294967295,R=D+(F<<4&4294967295|F>>>28),F=P+(R^D^L)+B[4]+1272893353&4294967295,P=R+(F<<11&4294967295|F>>>21),F=L+(P^R^D)+B[7]+4139469664&4294967295,L=P+(F<<16&4294967295|F>>>16),F=D+(L^P^R)+B[10]+3200236656&4294967295,D=L+(F<<23&4294967295|F>>>9),F=R+(D^L^P)+B[13]+681279174&4294967295,R=D+(F<<4&4294967295|F>>>28),F=P+(R^D^L)+B[0]+3936430074&4294967295,P=R+(F<<11&4294967295|F>>>21),F=L+(P^R^D)+B[3]+3572445317&4294967295,L=P+(F<<16&4294967295|F>>>16),F=D+(L^P^R)+B[6]+76029189&4294967295,D=L+(F<<23&4294967295|F>>>9),F=R+(D^L^P)+B[9]+3654602809&4294967295,R=D+(F<<4&4294967295|F>>>28),F=P+(R^D^L)+B[12]+3873151461&4294967295,P=R+(F<<11&4294967295|F>>>21),F=L+(P^R^D)+B[15]+530742520&4294967295,L=P+(F<<16&4294967295|F>>>16),F=D+(L^P^R)+B[2]+3299628645&4294967295,D=L+(F<<23&4294967295|F>>>9),F=R+(L^(D|~P))+B[0]+4096336452&4294967295,R=D+(F<<6&4294967295|F>>>26),F=P+(D^(R|~L))+B[7]+1126891415&4294967295,P=R+(F<<10&4294967295|F>>>22),F=L+(R^(P|~D))+B[14]+2878612391&4294967295,L=P+(F<<15&4294967295|F>>>17),F=D+(P^(L|~R))+B[5]+4237533241&4294967295,D=L+(F<<21&4294967295|F>>>11),F=R+(L^(D|~P))+B[12]+1700485571&4294967295,R=D+(F<<6&4294967295|F>>>26),F=P+(D^(R|~L))+B[3]+2399980690&4294967295,P=R+(F<<10&4294967295|F>>>22),F=L+(R^(P|~D))+B[10]+4293915773&4294967295,L=P+(F<<15&4294967295|F>>>17),F=D+(P^(L|~R))+B[1]+2240044497&4294967295,D=L+(F<<21&4294967295|F>>>11),F=R+(L^(D|~P))+B[8]+1873313359&4294967295,R=D+(F<<6&4294967295|F>>>26),F=P+(D^(R|~L))+B[15]+4264355552&4294967295,P=R+(F<<10&4294967295|F>>>22),F=L+(R^(P|~D))+B[6]+2734768916&4294967295,L=P+(F<<15&4294967295|F>>>17),F=D+(P^(L|~R))+B[13]+1309151649&4294967295,D=L+(F<<21&4294967295|F>>>11),F=R+(L^(D|~P))+B[4]+4149444226&4294967295,R=D+(F<<6&4294967295|F>>>26),F=P+(D^(R|~L))+B[11]+3174756917&4294967295,P=R+(F<<10&4294967295|F>>>22),F=L+(R^(P|~D))+B[2]+718787259&4294967295,L=P+(F<<15&4294967295|F>>>17),F=D+(P^(L|~R))+B[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+P&4294967295}r.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var D=R-this.blockSize,B=this.B,L=this.h,P=0;P<R;){if(L==0)for(;P<=D;)i(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<R;)if(B[L++]=M.charCodeAt(P++),L==this.blockSize){i(this,B),L=0;break}}else for(;P<R;)if(B[L++]=M[P++],L==this.blockSize){i(this,B),L=0;break}}this.h=L,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var D=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=D&255,D/=256;for(this.u(M),M=Array(16),R=D=0;4>R;++R)for(var B=0;32>B;B+=8)M[D++]=this.g[R]>>>B&255;return M};function a(M,R){var D=o;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=R(M)}function s(M,R){this.h=R;for(var D=[],B=!0,L=M.length-1;0<=L;L--){var P=M[L]|0;B&&P==R||(D[L]=P,B=!1)}this.g=D}var o={};function c(M){return-128<=M&&128>M?a(M,function(R){return new s([R|0],0>R?-1:0)}):new s([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return A(d(-M));for(var R=[],D=1,B=0;M>=D;B++)R[B]=M/D|0,D*=4294967296;return new s(R,0)}function f(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return A(f(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(R,8)),B=p,L=0;L<M.length;L+=8){var P=Math.min(8,M.length-L),F=parseInt(M.substring(L,L+P),R);8>P?(P=d(Math.pow(R,P)),B=B.j(P).add(d(F))):(B=B.j(D),B=B.add(d(F)))}return B}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-A(this).m();for(var M=0,R=1,D=0;D<this.g.length;D++){var B=this.i(D);M+=(0<=B?B:4294967296+B)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(v(this))return"0";if(b(this))return"-"+A(this).toString(M);for(var R=d(Math.pow(M,6)),D=this,B="";;){var L=I(D,R).g;D=E(D,L.j(R));var P=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=L,v(D))return P+B;for(;6>P.length;)P="0"+P;B=P+B}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function v(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=E(this,M),b(M)?-1:v(M)?0:1};function A(M){for(var R=M.g.length,D=[],B=0;B<R;B++)D[B]=~M.g[B];return new s(D,~M.h).add(g)}n.abs=function(){return b(this)?A(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),D=[],B=0,L=0;L<=R;L++){var P=B+(this.i(L)&65535)+(M.i(L)&65535),F=(P>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);B=F>>>16,P&=65535,F&=65535,D[L]=F<<16|P}return new s(D,D[D.length-1]&-2147483648?-1:0)};function E(M,R){return M.add(A(R))}n.j=function(M){if(v(this)||v(M))return p;if(b(this))return b(M)?A(this).j(A(M)):A(A(this).j(M));if(b(M))return A(this.j(A(M)));if(0>this.l(y)&&0>M.l(y))return d(this.m()*M.m());for(var R=this.g.length+M.g.length,D=[],B=0;B<2*R;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(var L=0;L<M.g.length;L++){var P=this.i(B)>>>16,F=this.i(B)&65535,q=M.i(L)>>>16,X=M.i(L)&65535;D[2*B+2*L]+=F*X,T(D,2*B+2*L),D[2*B+2*L+1]+=P*X,T(D,2*B+2*L+1),D[2*B+2*L+1]+=F*q,T(D,2*B+2*L+1),D[2*B+2*L+2]+=P*q,T(D,2*B+2*L+2)}for(B=0;B<R;B++)D[B]=D[2*B+1]<<16|D[2*B];for(B=R;B<2*R;B++)D[B]=0;return new s(D,0)};function T(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function C(M,R){this.g=M,this.h=R}function I(M,R){if(v(R))throw Error("division by zero");if(v(M))return new C(p,p);if(b(M))return R=I(A(M),R),new C(A(R.g),A(R.h));if(b(R))return R=I(M,A(R)),new C(A(R.g),R.h);if(30<M.g.length){if(b(M)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var D=g,B=R;0>=B.l(M);)D=O(D),B=O(B);var L=N(D,1),P=N(B,1);for(B=N(B,2),D=N(D,2);!v(B);){var F=P.add(B);0>=F.l(M)&&(L=L.add(D),P=F),B=N(B,1),D=N(D,1)}return R=E(M,L.j(R)),new C(L,R)}for(L=p;0<=M.l(R);){for(D=Math.max(1,Math.floor(M.m()/R.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),P=d(D),F=P.j(R);b(F)||0<F.l(M);)D-=B,P=d(D),F=P.j(R);v(P)&&(P=g),L=L.add(P),M=E(M,F)}return new C(L,M)}n.A=function(M){return I(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),D=[],B=0;B<R;B++)D[B]=this.i(B)&M.i(B);return new s(D,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),D=[],B=0;B<R;B++)D[B]=this.i(B)|M.i(B);return new s(D,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),D=[],B=0;B<R;B++)D[B]=this.i(B)^M.i(B);return new s(D,this.h^M.h)};function O(M){for(var R=M.g.length+1,D=[],B=0;B<R;B++)D[B]=M.i(B)<<1|M.i(B-1)>>>31;return new s(D,M.h)}function N(M,R){var D=R>>5;R%=32;for(var B=M.g.length-D,L=[],P=0;P<B;P++)L[P]=0<R?M.i(P+D)>>>R|M.i(P+D+1)<<32-R:M.i(P+D);return new s(L,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UR=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,wl=s}).apply(typeof XT<"u"?XT:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HR,Mh,zR,Zg,T2,$R,GR,WR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,k,j){return w==Array.prototype||w==Object.prototype||(w[k]=j.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var k=0;k<w.length;++k){var j=w[k];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function i(w,k){if(k)e:{var j=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var re=w[$];if(!(re in j))break e;j=j[re]}w=w[w.length-1],$=j[w],k=k($),k!=$&&k!=null&&e(j,w,{configurable:!0,writable:!0,value:k})}}function a(w,k){w instanceof String&&(w+="");var j=0,$=!1,re={next:function(){if(!$&&j<w.length){var pe=j++;return{value:k(pe,w[pe]),done:!1}}return $=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}i("Array.prototype.values",function(w){return w||function(){return a(this,function(k,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var k=typeof w;return k=k!="object"?k:w?Array.isArray(w)?"array":k:"null",k=="array"||k=="object"&&typeof w.length=="number"}function d(w){var k=typeof w;return k=="object"&&w!=null||k=="function"}function f(w,k,j){return w.call.apply(w.bind,arguments)}function p(w,k,j){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,$),w.apply(k,re)}}return function(){return w.apply(k,arguments)}}function g(w,k,j){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(w,k){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),w.apply(this,$)}}function v(w,k){function j(){}j.prototype=k.prototype,w.aa=k.prototype,w.prototype=new j,w.prototype.constructor=w,w.Qb=function($,re,pe){for(var ke=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)ke[Nt-2]=arguments[Nt];return k.prototype[re].apply($,ke)}}function b(w){const k=w.length;if(0<k){const j=Array(k);for(let $=0;$<k;$++)j[$]=w[$];return j}return[]}function A(w,k){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(c($)){const re=w.length||0,pe=$.length||0;w.length=re+pe;for(let ke=0;ke<pe;ke++)w[re+ke]=$[ke]}else w.push($)}}class E{constructor(k,j){this.i=k,this.j=j,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function T(w){return/^[\s\xa0]*$/.test(w)}function C(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function I(w){return I[" "](w),w}I[" "]=function(){};var O=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function N(w,k,j){for(const $ in w)k.call(j,w[$],$,w)}function M(w,k){for(const j in w)k.call(void 0,w[j],j,w)}function R(w){const k={};for(const j in w)k[j]=w[j];return k}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(w,k){let j,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(j in $)w[j]=$[j];for(let pe=0;pe<D.length;pe++)j=D[pe],Object.prototype.hasOwnProperty.call($,j)&&(w[j]=$[j])}}function L(w){var k=1;w=w.split(":");const j=[];for(;0<k&&w.length;)j.push(w.shift()),k--;return w.length&&j.push(w.join(":")),j}function P(w){o.setTimeout(()=>{throw w},0)}function F(){var w=Z;let k=null;return w.g&&(k=w.g,w.g=w.g.next,w.g||(w.h=null),k.next=null),k}class q{constructor(){this.h=this.g=null}add(k,j){const $=X.get();$.set(k,j),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new E(()=>new G,w=>w.reset());class G{constructor(){this.next=this.g=this.h=null}set(k,j){this.h=k,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Q=!1,Z=new q,fe=()=>{const w=o.Promise.resolve(void 0);Y=()=>{w.then(ge)}};var ge=()=>{for(var w;w=F();){try{w.h.call(w.g)}catch(j){P(j)}var k=X;k.j(w),100>k.h&&(k.h++,w.next=k.g,k.g=w)}Q=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(w,k){this.type=w,this.g=this.target=k,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,k=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const j=()=>{};o.addEventListener("test",j,k),o.removeEventListener("test",j,k)}catch{}return w}();function Re(w,k){if(Ae.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var j=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=k,k=w.relatedTarget){if(O){e:{try{I(k.nodeName);var re=!0;break e}catch{}re=!1}re||(k=null)}}else j=="mouseover"?k=w.fromElement:j=="mouseout"&&(k=w.toElement);this.relatedTarget=k,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:He[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&Re.aa.h.call(this)}}v(Re,Ae);var He={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function ae(w,k,j,$,re){this.listener=w,this.proxy=null,this.src=k,this.type=j,this.capture=!!$,this.ha=re,this.key=++Qe,this.da=this.fa=!1}function me(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function he(w){this.src=w,this.g={},this.h=0}he.prototype.add=function(w,k,j,$,re){var pe=w.toString();w=this.g[pe],w||(w=this.g[pe]=[],this.h++);var ke=Le(w,k,$,re);return-1<ke?(k=w[ke],j||(k.fa=!1)):(k=new ae(k,this.src,pe,!!$,re),k.fa=j,w.push(k)),k};function te(w,k){var j=k.type;if(j in w.g){var $=w.g[j],re=Array.prototype.indexOf.call($,k,void 0),pe;(pe=0<=re)&&Array.prototype.splice.call($,re,1),pe&&(me(k),w.g[j].length==0&&(delete w.g[j],w.h--))}}function Le(w,k,j,$){for(var re=0;re<w.length;++re){var pe=w[re];if(!pe.da&&pe.listener==k&&pe.capture==!!j&&pe.ha==$)return re}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),je={};function De(w,k,j,$,re){if(Array.isArray(k)){for(var pe=0;pe<k.length;pe++)De(w,k[pe],j,$,re);return null}return j=In(j),w&&w[Ue]?w.K(k,j,d($)?!!$.capture:!1,re):Ce(w,k,j,!1,$,re)}function Ce(w,k,j,$,re,pe){if(!k)throw Error("Invalid event type");var ke=d(re)?!!re.capture:!!re,Nt=xt(w);if(Nt||(w[ve]=Nt=new he(w)),j=Nt.add(k,j,$,ke,pe),j.proxy)return j;if($=We(),j.proxy=$,$.src=w,$.listener=j,w.addEventListener)Pe||(re=ke),re===void 0&&(re=!1),w.addEventListener(k.toString(),$,re);else if(w.attachEvent)w.attachEvent(Oe(k.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function We(){function w(j){return k.call(w.src,w.listener,j)}const k=ut;return w}function $e(w,k,j,$,re){if(Array.isArray(k))for(var pe=0;pe<k.length;pe++)$e(w,k[pe],j,$,re);else $=d($)?!!$.capture:!!$,j=In(j),w&&w[Ue]?(w=w.i,k=String(k).toString(),k in w.g&&(pe=w.g[k],j=Le(pe,j,$,re),-1<j&&(me(pe[j]),Array.prototype.splice.call(pe,j,1),pe.length==0&&(delete w.g[k],w.h--)))):w&&(w=xt(w))&&(k=w.g[k.toString()],w=-1,k&&(w=Le(k,j,$,re)),(j=-1<w?k[w]:null)&&Ie(j))}function Ie(w){if(typeof w!="number"&&w&&!w.da){var k=w.src;if(k&&k[Ue])te(k.i,w);else{var j=w.type,$=w.proxy;k.removeEventListener?k.removeEventListener(j,$,w.capture):k.detachEvent?k.detachEvent(Oe(j),$):k.addListener&&k.removeListener&&k.removeListener($),(j=xt(k))?(te(j,w),j.h==0&&(j.src=null,k[ve]=null)):me(w)}}}function Oe(w){return w in je?je[w]:je[w]="on"+w}function ut(w,k){if(w.da)w=!0;else{k=new Re(k,this);var j=w.listener,$=w.ha||w.src;w.fa&&Ie(w),w=j.call($,k)}return w}function xt(w){return w=w[ve],w instanceof he?w:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(w){return typeof w=="function"?w:(w[hn]||(w[hn]=function(k){return w.handleEvent(k)}),w[hn])}function tt(){we.call(this),this.i=new he(this),this.M=this,this.F=null}v(tt,we),tt.prototype[Ue]=!0,tt.prototype.removeEventListener=function(w,k,j,$){$e(this,w,k,j,$)};function rt(w,k){var j,$=w.F;if($)for(j=[];$;$=$.F)j.push($);if(w=w.M,$=k.type||k,typeof k=="string")k=new Ae(k,w);else if(k instanceof Ae)k.target=k.target||w;else{var re=k;k=new Ae($,w),B(k,re)}if(re=!0,j)for(var pe=j.length-1;0<=pe;pe--){var ke=k.g=j[pe];re=_n(ke,$,!0,k)&&re}if(ke=k.g=w,re=_n(ke,$,!0,k)&&re,re=_n(ke,$,!1,k)&&re,j)for(pe=0;pe<j.length;pe++)ke=k.g=j[pe],re=_n(ke,$,!1,k)&&re}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var w=this.i,k;for(k in w.g){for(var j=w.g[k],$=0;$<j.length;$++)me(j[$]);delete w.g[k],w.h--}}this.F=null},tt.prototype.K=function(w,k,j,$){return this.i.add(String(w),k,!1,j,$)},tt.prototype.L=function(w,k,j,$){return this.i.add(String(w),k,!0,j,$)};function _n(w,k,j,$){if(k=w.i.g[String(k)],!k)return!0;k=k.concat();for(var re=!0,pe=0;pe<k.length;++pe){var ke=k[pe];if(ke&&!ke.da&&ke.capture==j){var Nt=ke.listener,gr=ke.ha||ke.src;ke.fa&&te(w.i,ke),re=Nt.call(gr,$)!==!1&&re}}return re&&!$.defaultPrevented}function Xe(w,k,j){if(typeof w=="function")j&&(w=g(w,j));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:o.setTimeout(w,k||0)}function ht(w){w.g=Xe(()=>{w.g=null,w.i&&(w.i=!1,ht(w))},w.l);const k=w.h;w.h=null,w.m.apply(null,k)}class kt extends we{constructor(k,j){super(),this.m=k,this.l=j,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(w){we.call(this),this.h=w,this.g={}}v(Zt,we);var vn=[];function bn(w){N(w.g,function(k,j){this.g.hasOwnProperty(j)&&Ie(k)},w),w.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),bn(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=o.JSON.stringify,jr=o.JSON.parse,pt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function Pn(){}Pn.prototype.h=null;function Wn(w){return w.h||(w.h=w.i())}function Ur(){}var hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){Ae.call(this,"d")}v(tr,Ae);function Fl(){Ae.call(this,"c")}v(Fl,Ae);var qi={},au=null;function Is(){return au=au||new tt}qi.La="serverreachability";function pn(w){Ae.call(this,qi.La,w)}v(pn,Ae);function nr(w){const k=Is();rt(k,new pn(k))}qi.STAT_EVENT="statevent";function jl(w,k){Ae.call(this,qi.STAT_EVENT,w),this.stat=k}v(jl,Ae);function Dn(w){const k=Is();rt(k,new jl(k,w))}qi.Ma="timingevent";function pr(w,k){Ae.call(this,qi.Ma,w),this.size=k}v(pr,Ae);function rr(w,k){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},k)}function Xi(){this.g=!0}Xi.prototype.xa=function(){this.g=!1};function hf(w,k,j,$,re,pe){w.info(function(){if(w.g)if(pe)for(var ke="",Nt=pe.split("&"),gr=0;gr<Nt.length;gr++){var Lt=Nt[gr].split("=");if(1<Lt.length){var Dr=Lt[0];Lt=Lt[1];var mr=Dr.split("_");ke=2<=mr.length&&mr[1]=="type"?ke+(Dr+"="+Lt+"&"):ke+(Dr+"=redacted&")}}else ke=null;else ke=pe;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+k+`
`+j+`
`+ke})}function yy(w,k,j,$,re,pe,ke){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+k+`
`+j+`
`+pe+" "+ke})}function Do(w,k,j,$){w.info(function(){return"XMLHTTP TEXT ("+k+"): "+Ul(w,j)+($?" "+$:"")})}function ep(w,k){w.info(function(){return"TIMEOUT: "+k})}Xi.prototype.info=function(){};function Ul(w,k){if(!w.g)return k;if(!k)return null;try{var j=JSON.parse(k);if(j){for(w=0;w<j.length;w++)if(Array.isArray(j[w])){var $=j[w];if(!(2>$.length)){var re=$[1];if(Array.isArray(re)&&!(1>re.length)){var pe=re[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var ke=1;ke<re.length;ke++)re[ke]=""}}}}return Wt(j)}catch{return k}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ds={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ga;function Wa(){}v(Wa,Pn),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},Ga=new Wa;function pi(w,k,j,$){this.j=w,this.i=k,this.l=j,this.R=$||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var pf={},su={};function wa(w,k,j){w.L=1,w.v=Wl(Ni(k)),w.m=j,w.P=!0,Rs(w,null)}function Rs(w,k){w.F=Date.now(),Hl(w),w.A=Ni(w.v);var j=w.A,$=w.R;Array.isArray($)||($=[String($)]),wf(j.i,"t",$),w.C=0,j=w.j.J,w.h=new Yn,w.g=mp(w.j,j?k:null,!w.m),0<w.O&&(w.M=new kt(g(w.Y,w,w.g),w.O)),k=w.U,j=w.g,$=w.ca;var re="readystatechange";Array.isArray(re)||(re&&(vn[0]=re.toString()),re=vn);for(var pe=0;pe<re.length;pe++){var ke=De(j,re[pe],$||k.handleEvent,!1,k.h||k);if(!ke)break;k.g[ke.key]=ke}k=w.H?R(w.H):{},w.m?(w.u||(w.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,k)):(w.u="GET",w.g.ea(w.A,w.u,null,k)),nr(),hf(w.i,w.u,w.A,w.l,w.R,w.m)}pi.prototype.ca=function(w){w=w.target;const k=this.M;k&&Ji(w)==3?k.j():this.Y(w)},pi.prototype.Y=function(w){try{if(w==this.g)e:{const mr=Ji(this.g);var k=this.g.Ba();const Vs=this.g.Z();if(!(3>mr)&&(mr!=3||this.g&&(this.h.h||this.g.oa()||lp(this.g)))){this.J||mr!=4||k==7||(k==8||0>=Vs?nr(3):nr(2)),Mo(this);var j=this.g.Z();this.X=j;t:if(tp(this)){var $=lp(this.g);w="";var re=$.length,pe=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Ya(this);var ke="";break t}this.h.i=new o.TextDecoder}for(k=0;k<re;k++)this.h.h=!0,w+=this.h.i.decode($[k],{stream:!(pe&&k==re-1)});$.length=0,this.h.g+=w,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=j==200,yy(this.i,this.u,this.A,this.l,this.R,mr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,gr=this.g;if((Nt=gr.g?gr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Nt)){var Lt=Nt;break t}}Lt=null}if(j=Lt)Do(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,j);else{this.o=!1,this.s=3,Dn(12),Hr(this),Ya(this);break e}}if(this.P){j=!0;let zr;for(;!this.J&&this.C<ke.length;)if(zr=np(this,ke),zr==su){mr==4&&(this.s=4,Dn(14),j=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(zr==pf){this.s=4,Dn(15),Do(this.i,this.l,ke,"[Invalid Chunk]"),j=!1;break}else Do(this.i,this.l,zr,null),zl(this,zr);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mr!=4||ke.length!=0||this.h.h||(this.s=1,Dn(16),j=!1),this.o=this.o&&j,!j)Do(this.i,this.l,ke,"[Invalid Chunked Response]"),Hr(this),Ya(this);else if(0<ke.length&&!this.W){this.W=!0;var Dr=this.j;Dr.g==this&&Dr.ba&&!Dr.M&&(Dr.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),ec(Dr),Dr.M=!0,Dn(11))}}else Do(this.i,this.l,ke,null),zl(this,ke);mr==4&&Hr(this),this.o&&!this.J&&(mr==4?hp(this.j,this):(this.o=!1,Hl(this)))}else by(this.g),j==400&&0<ke.indexOf("Unknown SID")?(this.s=3,Dn(12)):(this.s=0,Dn(13)),Hr(this),Ya(this)}}}catch{}finally{}};function tp(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function np(w,k){var j=w.C,$=k.indexOf(`
`,j);return $==-1?su:(j=Number(k.substring(j,$)),isNaN(j)?pf:($+=1,$+j>k.length?su:(k=k.slice($,$+j),w.C=$+j,k)))}pi.prototype.cancel=function(){this.J=!0,Hr(this)};function Hl(w){w.S=Date.now()+w.I,rp(w,w.I)}function rp(w,k){if(w.B!=null)throw Error("WatchDog timer not null");w.B=rr(g(w.ba,w),k)}function Mo(w){w.B&&(o.clearTimeout(w.B),w.B=null)}pi.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(ep(this.i,this.A),this.L!=2&&(nr(),Dn(17)),Hr(this),this.s=2,Ya(this)):rp(this,this.S-w)};function Ya(w){w.j.G==0||w.J||hp(w.j,w)}function Hr(w){Mo(w);var k=w.M;k&&typeof k.ma=="function"&&k.ma(),w.M=null,bn(w.U),w.g&&(k=w.g,w.g=null,k.abort(),k.ma())}function zl(w,k){try{var j=w.j;if(j.G!=0&&(j.g==w||gf(j.h,w))){if(!w.K&&gf(j.h,w)&&j.G==3){try{var $=j.Da.g.parse(k)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<w.F)vu(j),mu(j);else break e;Sf(j),Dn(18)}}else j.za=re[1],0<j.za-j.T&&37500>re[2]&&j.F&&j.v==0&&!j.C&&(j.C=rr(g(j.Za,j),6e3));if(1>=lu(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Bs(j,11)}else if((w.K||j.g==w)&&vu(j),!T(k))for(re=j.Da.g.parse(k),k=0;k<re.length;k++){let Lt=re[k];if(j.T=Lt[0],Lt=Lt[1],j.G==2)if(Lt[0]=="c"){j.K=Lt[1],j.ia=Lt[2];const Dr=Lt[3];Dr!=null&&(j.la=Dr,j.j.info("VER="+j.la));const mr=Lt[4];mr!=null&&(j.Aa=mr,j.j.info("SVER="+j.Aa));const Vs=Lt[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&($=1.5*Vs,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const zr=w.g;if(zr){const es=zr.g?zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var pe=$.h;pe.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(cu(pe,pe.h),pe.h=null))}if($.D){const Cf=zr.g?zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&($.ya=Cf,ln($.I,$.D,Cf))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-w.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var ke=w;if($.qa=gp($,$.J?$.ia:null,$.W),ke.K){gi($.h,ke);var Nt=ke,gr=$.L;gr&&(Nt.I=gr),Nt.B&&(Mo(Nt),Hl(Nt)),$.g=ke}else dp($);0<j.i.length&&yu(j)}else Lt[0]!="stop"&&Lt[0]!="close"||Bs(j,7);else j.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Bs(j,7):Af(j):Lt[0]!="noop"&&j.l&&j.l.ta(Lt),j.v=0)}}nr(4)}catch{}}var ip=class{constructor(w,k){this.g=w,this.map=k}};function Ms(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ou(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function lu(w){return w.h?1:w.g?w.g.size:0}function gf(w,k){return w.h?w.h==k:w.g?w.g.has(k):!1}function cu(w,k){w.g?w.g.add(k):w.h=k}function gi(w,k){w.h&&w.h==k?w.h=null:w.g&&w.g.has(k)&&w.g.delete(k)}Ms.prototype.cancel=function(){if(this.i=mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function mf(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let k=w.i;for(const j of w.g.values())k=k.concat(j.D);return k}return b(w.i)}function vy(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var k=[],j=w.length,$=0;$<j;$++)k.push(w[$]);return k}k=[],j=0;for($ in w)k[j++]=w[$];return k}function uu(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var k=[];w=w.length;for(var j=0;j<w;j++)k.push(j);return k}k=[],j=0;for(const $ in w)k[j++]=$;return k}}}function yf(w,k){if(w.forEach&&typeof w.forEach=="function")w.forEach(k,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,k,void 0);else for(var j=uu(w),$=vy(w),re=$.length,pe=0;pe<re;pe++)k.call(void 0,$[pe],j&&j[pe],w)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xy(w,k){if(w){w=w.split("&");for(var j=0;j<w.length;j++){var $=w[j].indexOf("="),re=null;if(0<=$){var pe=w[j].substring(0,$);re=w[j].substring($+1)}else pe=w[j];k(pe,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ir(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof ir){this.h=w.h,Gl(this,w.j),this.o=w.o,this.g=w.g,Oo(this,w.s),this.l=w.l;var k=w.i,j=new Ps;j.i=k.i,k.g&&(j.g=new Map(k.g),j.h=k.h),Os(this,j),this.m=w.m}else w&&(k=String(w).match($l))?(this.h=!1,Gl(this,k[1]||"",!0),this.o=Ki(k[2]||""),this.g=Ki(k[3]||"",!0),Oo(this,k[4]),this.l=Ki(k[5]||"",!0),Os(this,k[6]||"",!0),this.m=Ki(k[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}ir.prototype.toString=function(){var w=[],k=this.j;k&&w.push(Yl(k,vf,!0),":");var j=this.g;return(j||k=="file")&&(w.push("//"),(k=this.o)&&w.push(Yl(k,vf,!0),"@"),w.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&w.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&w.push("/"),w.push(Yl(j,j.charAt(0)=="/"?wy:xf,!0))),(j=this.i.toString())&&w.push("?",j),(j=this.m)&&w.push("#",Yl(j,du)),w.join("")};function Ni(w){return new ir(w)}function Gl(w,k,j){w.j=j?Ki(k,!0):k,w.j&&(w.j=w.j.replace(/:$/,""))}function Oo(w,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);w.s=k}else w.s=null}function Os(w,k,j){k instanceof Ps?(w.i=k,sp(w.i,w.h)):(j||(k=Yl(k,_y)),w.i=new Ps(k,w.h))}function ln(w,k,j){w.i.set(k,j)}function Wl(w){return ln(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Ki(w,k){return w?k?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Yl(w,k,j){return typeof w=="string"?(w=encodeURI(w).replace(k,ap),j&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function ap(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var vf=/[#\/\?@]/g,xf=/[#\?:]/g,wy=/[#\?]/g,_y=/[#\?@]/g,du=/#/g;function Ps(w,k){this.h=this.g=null,this.i=w||null,this.j=!!k}function Qi(w){w.g||(w.g=new Map,w.h=0,w.i&&xy(w.i,function(k,j){w.add(decodeURIComponent(k.replace(/\+/g," ")),j)}))}n=Ps.prototype,n.add=function(w,k){Qi(this),this.i=null,w=qa(this,w);var j=this.g.get(w);return j||this.g.set(w,j=[]),j.push(k),this.h+=1,this};function ks(w,k){Qi(w),k=qa(w,k),w.g.has(k)&&(w.i=null,w.h-=w.g.get(k).length,w.g.delete(k))}function Ns(w,k){return Qi(w),k=qa(w,k),w.g.has(k)}n.forEach=function(w,k){Qi(this),this.g.forEach(function(j,$){j.forEach(function(re){w.call(k,re,$,this)},this)},this)},n.na=function(){Qi(this);const w=Array.from(this.g.values()),k=Array.from(this.g.keys()),j=[];for(let $=0;$<k.length;$++){const re=w[$];for(let pe=0;pe<re.length;pe++)j.push(k[$])}return j},n.V=function(w){Qi(this);let k=[];if(typeof w=="string")Ns(this,w)&&(k=k.concat(this.g.get(qa(this,w))));else{w=Array.from(this.g.values());for(let j=0;j<w.length;j++)k=k.concat(w[j])}return k},n.set=function(w,k){return Qi(this),this.i=null,w=qa(this,w),Ns(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[k]),this.h+=1,this},n.get=function(w,k){return w?(w=this.V(w),0<w.length?String(w[0]):k):k};function wf(w,k,j){ks(w,k),0<j.length&&(w.i=null,w.g.set(qa(w,k),b(j)),w.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],k=Array.from(this.g.keys());for(var j=0;j<k.length;j++){var $=k[j];const pe=encodeURIComponent(String($)),ke=this.V($);for($=0;$<ke.length;$++){var re=pe;ke[$]!==""&&(re+="="+encodeURIComponent(String(ke[$]))),w.push(re)}}return this.i=w.join("&")};function qa(w,k){return k=String(k),w.j&&(k=k.toLowerCase()),k}function sp(w,k){k&&!w.j&&(Qi(w),w.i=null,w.g.forEach(function(j,$){var re=$.toLowerCase();$!=re&&(ks(this,$),wf(this,re,j))},w)),w.j=k}function ql(w,k){const j=new Xi;if(o.Image){const $=new Image;$.onload=y(Zi,j,"TestLoadImage: loaded",!0,k,$),$.onerror=y(Zi,j,"TestLoadImage: error",!1,k,$),$.onabort=y(Zi,j,"TestLoadImage: abort",!1,k,$),$.ontimeout=y(Zi,j,"TestLoadImage: timeout",!1,k,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else k(!1)}function _a(w,k){const j=new Xi,$=new AbortController,re=setTimeout(()=>{$.abort(),Zi(j,"TestPingServer: timeout",!1,k)},1e4);fetch(w,{signal:$.signal}).then(pe=>{clearTimeout(re),pe.ok?Zi(j,"TestPingServer: ok",!0,k):Zi(j,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(re),Zi(j,"TestPingServer: error",!1,k)})}function Zi(w,k,j,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(j)}catch{}}function Xl(){this.g=new pt}function Xa(w,k,j){const $=j||"";try{yf(w,function(re,pe){let ke=re;d(re)&&(ke=Wt(re)),k.push($+pe+"="+encodeURIComponent(ke))})}catch(re){throw k.push($+"type="+encodeURIComponent("_badmap")),re}}function Po(w){this.l=w.Ub||null,this.j=w.eb||!1}v(Po,Pn),Po.prototype.g=function(){return new Ls(this.l,this.j)},Po.prototype.i=function(w){return function(){return w}}({});function Ls(w,k){tt.call(this),this.D=w,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ls,tt),n=Ls.prototype,n.open=function(w,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=k,this.readyState=1,Qa(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(k.body=w),(this.D||o).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_f(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function _f(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var k=w.value?w.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!w.done}))&&(this.response=this.responseText+=k)}w.done?Ka(this):Qa(this),this.readyState==3&&_f(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,Ka(this))},n.Qa=function(w){this.g&&(this.response=w,Ka(this))},n.ga=function(){this.g&&Ka(this)};function Ka(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Qa(w)}n.setRequestHeader=function(w,k){this.u.append(w,k)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],k=this.h.entries();for(var j=k.next();!j.done;)j=j.value,w.push(j[0]+": "+j[1]),j=k.next();return w.join(`\r
`)};function Qa(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function bf(w){let k="";return N(w,function(j,$){k+=$,k+=":",k+=j,k+=`\r
`}),k}function Ir(w,k,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=bf(j),typeof w=="string"?j!=null&&encodeURIComponent(String(j)):ln(w,k,j))}function Jt(w){tt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Jt,tt);var fu=/^https?$/i,Kl=["POST","PUT"];n=Jt.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,k,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);k=k?k.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ga.g(),this.v=this.o?Wn(this.o):Wn(Ga),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(k,String(w),!0),this.B=!1}catch(pe){op(this,pe);return}if(w=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)j.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const pe of $.keys())j.set(pe,$.get(pe));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(pe=>pe.toLowerCase()=="content-type"),re=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Kl,k,void 0))||$||re||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,ke]of j)this.g.setRequestHeader(pe,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ql(this),this.u=!0,this.g.send(w),this.u=!1}catch(pe){op(this,pe)}};function op(w,k){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=k,w.m=5,hu(w),Za(w)}function hu(w){w.A||(w.A=!0,rt(w,"complete"),rt(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,rt(this,"complete"),rt(this,"abort"),Za(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Za(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pu(this):this.bb())},n.bb=function(){pu(this)};function pu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||Ji(w)!=4||w.Z()!=2)){if(w.u&&Ji(w)==4)Xe(w.Ea,0,w);else if(rt(w,"readystatechange"),Ji(w)==4){w.h=!1;try{const ke=w.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var j;if(!(j=k)){var $;if($=ke===0){var re=String(w.D).match($l)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),$=!fu.test(re?re.toLowerCase():"")}j=$}if(j)rt(w,"complete"),rt(w,"success");else{w.m=6;try{var pe=2<Ji(w)?w.g.statusText:""}catch{pe=""}w.l=pe+" ["+w.Z()+"]",hu(w)}}finally{Za(w)}}}}function Za(w,k){if(w.g){Ql(w);const j=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,k||rt(w,"ready");try{j.onreadystatechange=$}catch{}}}function Ql(w){w.I&&(o.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function Ji(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var k=this.g.responseText;return w&&k.indexOf(w)==0&&(k=k.substring(w.length)),jr(k)}};function lp(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function by(w){const k={};w=(w.g&&2<=Ji(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(T(w[$]))continue;var j=L(w[$]);const re=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const pe=k[re]||[];k[re]=pe,pe.push(j)}M(k,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zl(w,k,j){return j&&j.internalChannelParams&&j.internalChannelParams[w]||k}function gu(w){this.Aa=0,this.i=[],this.j=new Xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zl("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zl("baseRetryDelayMs",5e3,w),this.cb=Zl("retryDelaySeedMs",1e4,w),this.Wa=Zl("forwardChannelMaxRetries",2,w),this.wa=Zl("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Ms(w&&w.concurrentRequestLimit),this.Da=new Xl,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gu.prototype,n.la=8,n.G=1,n.connect=function(w,k,j,$){Dn(0),this.W=w,this.H=k||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=gp(this,null,this.W),yu(this)};function Af(w){if(cp(w),w.G==3){var k=w.U++,j=Ni(w.I);if(ln(j,"SID",w.K),ln(j,"RID",k),ln(j,"TYPE","terminate"),Jl(w,j),k=new pi(w,w.j,k),k.L=2,k.v=Wl(Ni(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(k.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=k.v,j=!0),j||(k.g=mp(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Hl(k)}pp(w)}function mu(w){w.g&&(ec(w),w.g.cancel(),w.g=null)}function cp(w){mu(w),w.u&&(o.clearTimeout(w.u),w.u=null),vu(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function yu(w){if(!ou(w.h)&&!w.s){w.s=!0;var k=w.Ga;Y||fe(),Q||(Y(),Q=!0),Z.add(k,w),w.B=0}}function Ay(w,k){return lu(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=k.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=rr(g(w.Ga,w,k),Tf(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const re=new pi(this,this.j,w);let pe=this.o;if(this.S&&(pe?(pe=R(pe),B(pe,this.S)):pe=this.S),this.m!==null||this.O||(re.H=pe,pe=null),this.P)e:{for(var k=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(k+=$,4096<k){k=j;break e}if(k===4096||j===this.i.length-1){k=j+1;break e}}k=1e3}else k=1e3;k=up(this,re,k),j=Ni(this.I),ln(j,"RID",w),ln(j,"CVER",22),this.D&&ln(j,"X-HTTP-Session-Id",this.D),Jl(this,j),pe&&(this.O?k="headers="+encodeURIComponent(String(bf(pe)))+"&"+k:this.m&&Ir(j,this.m,pe)),cu(this.h,re),this.Ua&&ln(j,"TYPE","init"),this.P?(ln(j,"$req",k),ln(j,"SID","null"),re.T=!0,wa(re,j,null)):wa(re,j,k),this.G=2}}else this.G==3&&(w?Ef(this,w):this.i.length==0||ou(this.h)||Ef(this))};function Ef(w,k){var j;k?j=k.l:j=w.U++;const $=Ni(w.I);ln($,"SID",w.K),ln($,"RID",j),ln($,"AID",w.T),Jl(w,$),w.m&&w.o&&Ir($,w.m,w.o),j=new pi(w,w.j,j,w.B+1),w.m===null&&(j.H=w.o),k&&(w.i=k.D.concat(w.i)),k=up(w,j,1e3),j.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),cu(w.h,j),wa(j,$,k)}function Jl(w,k){w.H&&N(w.H,function(j,$){ln(k,$,j)}),w.l&&yf({},function(j,$){ln(k,$,j)})}function up(w,k,j){j=Math.min(w.i.length,j);var $=w.l?g(w.l.Na,w.l,w):null;e:{var re=w.i;let pe=-1;for(;;){const ke=["count="+j];pe==-1?0<j?(pe=re[0].g,ke.push("ofs="+pe)):pe=0:ke.push("ofs="+pe);let Nt=!0;for(let gr=0;gr<j;gr++){let Lt=re[gr].g;const Dr=re[gr].map;if(Lt-=pe,0>Lt)pe=Math.max(0,re[gr].g-100),Nt=!1;else try{Xa(Dr,ke,"req"+Lt+"_")}catch{$&&$(Dr)}}if(Nt){$=ke.join("&");break e}}}return w=w.i.splice(0,j),k.D=w,$}function dp(w){if(!w.g&&!w.u){w.Y=1;var k=w.Fa;Y||fe(),Q||(Y(),Q=!0),Z.add(k,w),w.v=0}}function Sf(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=rr(g(w.Fa,w),Tf(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=rr(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dn(10),mu(this),fp(this))};function ec(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function fp(w){w.g=new pi(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var k=Ni(w.qa);ln(k,"RID","rpc"),ln(k,"SID",w.K),ln(k,"AID",w.T),ln(k,"CI",w.F?"0":"1"),!w.F&&w.ja&&ln(k,"TO",w.ja),ln(k,"TYPE","xmlhttp"),Jl(w,k),w.m&&w.o&&Ir(k,w.m,w.o),w.L&&(w.g.I=w.L);var j=w.g;w=w.ia,j.L=1,j.v=Wl(Ni(k)),j.m=null,j.P=!0,Rs(j,w)}n.Za=function(){this.C!=null&&(this.C=null,mu(this),Sf(this),Dn(19))};function vu(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function hp(w,k){var j=null;if(w.g==k){vu(w),ec(w),w.g=null;var $=2}else if(gf(w.h,k))j=k.D,gi(w.h,k),$=1;else return;if(w.G!=0){if(k.o)if($==1){j=k.m?k.m.length:0,k=Date.now()-k.F;var re=w.B;$=Is(),rt($,new pr($,j)),yu(w)}else dp(w);else if(re=k.s,re==3||re==0&&0<k.X||!($==1&&Ay(w,k)||$==2&&Sf(w)))switch(j&&0<j.length&&(k=w.h,k.i=k.i.concat(j)),re){case 1:Bs(w,5);break;case 4:Bs(w,10);break;case 3:Bs(w,6);break;default:Bs(w,2)}}}function Tf(w,k){let j=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(j*=2),j*k}function Bs(w,k){if(w.j.info("Error code "+k),k==2){var j=g(w.fb,w),$=w.Xa;const re=!$;$=new ir($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Gl($,"https"),Wl($),re?ql($.toString(),j):_a($.toString(),j)}else Dn(2);w.G=0,w.l&&w.l.sa(k),pp(w),cp(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function pp(w){if(w.G=0,w.ka=[],w.l){const k=mf(w.h);(k.length!=0||w.i.length!=0)&&(A(w.ka,k),A(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function gp(w,k,j){var $=j instanceof ir?Ni(j):new ir(j);if($.g!="")k&&($.g=k+"."+$.g),Oo($,$.s);else{var re=o.location;$=re.protocol,k=k?k+"."+re.hostname:re.hostname,re=+re.port;var pe=new ir(null);$&&Gl(pe,$),k&&(pe.g=k),re&&Oo(pe,re),j&&(pe.l=j),$=pe}return j=w.D,k=w.ya,j&&k&&ln($,j,k),ln($,"VER",w.la),Jl(w,$),$}function mp(w,k,j){if(k&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=w.Ca&&!w.pa?new Jt(new Po({eb:j})):new Jt(w.pa),k.Ha(w.J),k}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yp(){}n=yp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xu(){}xu.prototype.g=function(w,k){return new mi(w,k)};function mi(w,k){tt.call(this),this.g=new gu(k),this.l=w,this.h=k&&k.messageUrlParams||null,w=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(w?w["X-WebChannel-Content-Type"]=k.messageContentType:w={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(w?w["X-WebChannel-Client-Profile"]=k.va:w={"X-WebChannel-Client-Profile":k.va}),this.g.S=w,(w=k&&k.Sb)&&!T(w)&&(this.g.m=w),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!T(k)&&(this.g.D=k,w=this.h,w!==null&&k in w&&(w=this.h,k in w&&delete w[k])),this.j=new Ja(this)}v(mi,tt),mi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){Af(this.g)},mi.prototype.o=function(w){var k=this.g;if(typeof w=="string"){var j={};j.__data__=w,w=j}else this.u&&(j={},j.__data__=Wt(w),w=j);k.i.push(new ip(k.Ya++,w)),k.G==3&&yu(k)},mi.prototype.N=function(){this.g.l=null,delete this.j,Af(this.g),delete this.g,mi.aa.N.call(this)};function vp(w){tr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var k=w.__sm__;if(k){e:{for(const j in k){w=j;break e}w=void 0}(this.i=w)&&(w=this.i,k=k!==null&&w in k?k[w]:void 0),this.data=k}else this.data=w}v(vp,tr);function xp(){Fl.call(this),this.status=1}v(xp,Fl);function Ja(w){this.g=w}v(Ja,yp),Ja.prototype.ua=function(){rt(this.g,"a")},Ja.prototype.ta=function(w){rt(this.g,new vp(w))},Ja.prototype.sa=function(w){rt(this.g,new xp)},Ja.prototype.ra=function(){rt(this.g,"b")},xu.prototype.createWebChannel=xu.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,WR=function(){return new xu},GR=function(){return Is()},$R=qi,T2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Zg=Ro,Ds.COMPLETE="complete",zR=Ds,Ur.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Mh=Ur,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,HR=Jt}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});const KT="@firebase/firestore",QT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Pw("@firebase/firestore");function ad(){return zc.logLevel}function ze(n,...e){if(zc.logLevel<=Rt.DEBUG){const t=e.map(Gw);zc.debug(`Firestore (${tf}): ${n}`,...t)}}function po(n,...e){if(zc.logLevel<=Rt.ERROR){const t=e.map(Gw);zc.error(`Firestore (${tf}): ${n}`,...t)}}function El(n,...e){if(zc.logLevel<=Rt.WARN){const t=e.map(Gw);zc.warn(`Firestore (${tf}): ${n}`,...t)}}function Gw(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YR(n,r,t)}function YR(n,e,t){let r=`FIRESTORE (${tf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw po(r),new Error(r)}function tn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||YR(e,i,r)}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class jL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UL{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new lo,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tn(typeof r.accessToken=="string",31837,{l:r}),new qR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string",2055,{h:e}),new si(e)}}class HL{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zL{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new HL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $L{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ca(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tn(this.o===void 0,3512);const r=a=>{a.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ZT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ZT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=GL(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function C2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return bt(r,i);{const a=XR(),s=WL(a.encode(JT(n,t)),a.encode(JT(e,t)));return s!==0?s:bt(r,i)}}t+=r>65535?2:1}return bt(n.length,e.length)}function JT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function WL(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return bt(n[t],e[t]);return bt(n.length,e.length)}function kd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="__name__";class os{constructor(e,t,r){t===void 0?t=0:t>e.length&&lt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&lt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=os.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return bt(e.length,t.length)}static compareSegments(e,t){const r=os.isNumericId(e),i=os.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?os.extractNumericId(e).compare(os.extractNumericId(t)):C2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wl.fromString(e.substring(4,e.length-2))}}class mn extends os{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const YL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends os{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return YL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eC}static keyField(){return new Kr([eC])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Fe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Fe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Fe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Fe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(mn.fromString(e))}static fromName(e){return new Ze(mn.fromString(e).popFirst(5))}static empty(){return new Ze(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new mn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e,t){if(!t)throw new Fe(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qL(n,e,t,r){if(e===!0&&r===!0)throw new Fe(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tC(n){if(!Ze.isDocumentKey(n))throw new Fe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nC(n){if(Ze.isDocumentKey(n))throw new Fe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function wm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wm(n);throw new Fe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XL(n,e){if(e<=0)throw new Fe(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,e){const t={typeString:n};return e&&(t.value=e),t}function D0(n,e){if(!KR(n))throw new Fe(be.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Fe(be.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=-62135596800,iC=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iC);return new Tn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rC)throw new Fe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iC}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(D0(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:dr("string",Tn._jsonSchemaVersion),seconds:dr("number"),nanoseconds:dr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Tn(0,0))}static max(){return new ft(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=-1;function KL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(r===1e9?new Tn(t+1,0):new Tn(t,r));return new Sl(i,Ze.empty(),e)}function QL(n){return new Sl(n.readTime,n.key,n0)}class Sl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sl(ft.min(),Ze.empty(),n0)}static max(){return new Sl(ft.max(),Ze.empty(),n0)}}function ZL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ze.comparator(n.documentKey,e.documentKey),t!==0?t:bt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==JL)throw n;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&t()},c=>r(c))}),s=!0,a===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;t(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,t){return new Te((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function tB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_m.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=-1;function bm(n){return n==null}function v1(n){return n===0&&1/n==-1/0}function nB(n){return typeof n=="number"&&Number.isInteger(n)&&!v1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="";function rB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aC(e)),e=iB(n.get(t),e);return aC(e)}function iB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case QR:t+="";break;default:t+=a}}return t}function aC(n){return n+QR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ag(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ag(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ag(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ag(this.root,e,this.comparator,!0)}}class Ag{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=a??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oC(this.data.getIterator())}getIteratorFrom(e){return new oC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tr(this.comparator);return t.data=e,t}}class oC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new zi([])}unionWith(e){let t=new Tr(Kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new JR("Invalid base64 string: "+a):a}}(e);return new ei(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const aB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(n){if(tn(!!n,39018),typeof n=="string"){let e=0;const t=aB.exec(n);if(tn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cl(n){return typeof n=="string"?ei.fromBase64String(n):ei.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="server_timestamp",tM="__type__",nM="__previous_value__",rM="__local_write_time__";function Xw(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tM])===null||t===void 0?void 0:t.stringValue)===eM}function Am(n){const e=n.mapValue.fields[nM];return Xw(e)?Am(e):e}function r0(n){const e=Tl(n.mapValue.fields[rM].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,t,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const x1="(default)";class i0{constructor(e,t){this.projectId=e,this.database=t||x1}static empty(){return new i0("","")}get isDefaultDatabase(){return this.database===x1}isEqual(e){return e instanceof i0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="__type__",oB="__max__",Eg={mapValue:{}},aM="__vector__",w1="value";function Il(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xw(n)?4:cB(n)?9007199254740991:lB(n)?10:11:lt(28295,{value:n})}function Es(n,e){if(n===e)return!0;const t=Il(n);if(t!==Il(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return r0(n).isEqual(r0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Tl(i.timestampValue),o=Tl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Cl(i.bytesValue).isEqual(Cl(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Qn(i.geoPointValue.latitude)===Qn(a.geoPointValue.latitude)&&Qn(i.geoPointValue.longitude)===Qn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Qn(i.integerValue)===Qn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Qn(i.doubleValue),o=Qn(a.doubleValue);return s===o?v1(s)===v1(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return kd(n.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(sC(s)!==sC(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Es(s[c],o[c])))return!1;return!0}(n,e);default:return lt(52216,{left:n})}}function a0(n,e){return(n.values||[]).find(t=>Es(t,e))!==void 0}function Nd(n,e){if(n===e)return 0;const t=Il(n),r=Il(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Qn(a.integerValue||a.doubleValue),c=Qn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return lC(n.timestampValue,e.timestampValue);case 4:return lC(r0(n),r0(e));case 5:return C2(n.stringValue,e.stringValue);case 6:return function(a,s){const o=Cl(a),c=Cl(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=bt(o[d],c[d]);if(f!==0)return f}return bt(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const o=bt(Qn(a.latitude),Qn(s.latitude));return o!==0?o:bt(Qn(a.longitude),Qn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return cC(n.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},y=(o=p[w1])===null||o===void 0?void 0:o.arrayValue,v=(c=g[w1])===null||c===void 0?void 0:c.arrayValue,b=bt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:cC(y,v)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===Eg.mapValue&&s===Eg.mapValue)return 0;if(a===Eg.mapValue)return 1;if(s===Eg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=C2(c[p],f[p]);if(g!==0)return g;const y=Nd(o[c[p]],d[f[p]]);if(y!==0)return y}return bt(c.length,f.length)}(n.mapValue,e.mapValue);default:throw lt(23264,{le:t})}}function lC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return bt(n,e);const t=Tl(n),r=Tl(e),i=bt(t.seconds,r.seconds);return i!==0?i:bt(t.nanos,r.nanos)}function cC(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Nd(t[i],r[i]);if(a)return a}return bt(t.length,r.length)}function Ld(n){return I2(n)}function I2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Tl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ze.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=I2(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${I2(t.fields[s])}`;return i+"}"}(n.mapValue):lt(61005,{value:n})}function Jg(n){switch(Il(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Am(n);return e?16+Jg(e):16;case 5:return 2*n.stringValue.length;case 6:return Cl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Jg(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return kl(r.fields,(a,s)=>{i+=a.length+Jg(s)}),i}(n.mapValue);default:throw lt(13486,{value:n})}}function uC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function D2(n){return!!n&&"integerValue"in n}function Kw(n){return!!n&&"arrayValue"in n}function dC(n){return!!n&&"nullValue"in n}function fC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function e1(n){return!!n&&"mapValue"in n}function lB(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iM])===null||t===void 0?void 0:t.stringValue)===aM}function Wh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===oB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!e1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wh(t)}setAll(e){let t=Kr.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=Wh(s):i.push(o.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());e1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];e1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ri(Wh(this.value))}}function sM(n){const e=[];return kl(n.fields,(t,r)=>{const i=new Kr([t]);if(e1(r)){const a=sM(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new oi(e,0,ft.min(),ft.min(),ft.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,i){return new oi(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new oi(e,2,t,ft.min(),ft.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new oi(e,3,t,ft.min(),ft.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t){this.position=e,this.inclusive=t}}function hC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=Ze.comparator(Ze.fromName(s.referenceValue),t.key):r=Nd(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function pC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,t="asc"){this.field=e,this.dir=t}}function uB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{}class ur extends oM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fB(e,t,r):t==="array-contains"?new gB(e,r):t==="in"?new mB(e,r):t==="not-in"?new yB(e,r):t==="array-contains-any"?new vB(e,r):new ur(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hB(e,r):new pB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nd(t,this.value)):t!==null&&Il(this.value)===Il(t)&&this.matchesComparison(Nd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ua extends oM{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ua(e,t)}matches(e){return lM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lM(n){return n.op==="and"}function cM(n){return dB(n)&&lM(n)}function dB(n){for(const e of n.filters)if(e instanceof Ua)return!1;return!0}function R2(n){if(n instanceof ur)return n.field.canonicalString()+n.op.toString()+Ld(n.value);if(cM(n))return n.filters.map(e=>R2(e)).join(",");{const e=n.filters.map(t=>R2(t)).join(",");return`${n.op}(${e})`}}function uM(n,e){return n instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.field.isEqual(i.field)&&Es(r.value,i.value)}(n,e):n instanceof Ua?function(r,i){return i instanceof Ua&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&uM(s,i.filters[o]),!0):!1}(n,e):void lt(19439)}function dM(n){return n instanceof ur?function(t){return`${t.field.canonicalString()} ${t.op} ${Ld(t.value)}`}(n):n instanceof Ua?function(t){return t.op.toString()+" {"+t.getFilters().map(dM).join(" ,")+"}"}(n):"Filter"}class fB extends ur{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class hB extends ur{constructor(e,t){super(e,"in",t),this.keys=fM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pB extends ur{constructor(e,t){super(e,"not-in",t),this.keys=fM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class gB extends ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kw(t)&&a0(t.arrayValue,this.value)}}class mB extends ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&a0(this.value.arrayValue,t)}}class yB extends ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(a0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!a0(this.value.arrayValue,t)}}class vB extends ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>a0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function gC(n,e=null,t=[],r=[],i=null,a=null,s=null){return new xB(n,e,t,r,i,a,s)}function Qw(n){const e=gt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>R2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ld(r)).join(",")),e.Pe=t}return e.Pe}function Zw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pC(n.startAt,e.startAt)&&pC(n.endAt,e.endAt)}function M2(n){return Ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wB(n,e,t,r,i,a,s,o){return new Xc(n,e,t,r,i,a,s,o)}function Em(n){return new Xc(n)}function mC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hM(n){return n.collectionGroup!==null}function Yh(n){const e=gt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Tr(Kr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new s0(a,r))}),t.has(Kr.keyField().canonicalString())||e.Te.push(new s0(Kr.keyField(),r))}return e.Te}function ys(n){const e=gt(n);return e.Ie||(e.Ie=_B(e,Yh(n))),e.Ie}function _B(n,e){if(n.limitType==="F")return gC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new s0(i.field,a)});const t=n.endAt?new _1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _1(n.startAt.position,n.startAt.inclusive):null;return gC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function O2(n,e){const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b1(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sm(n,e){return Zw(ys(n),ys(e))&&n.limitType===e.limitType}function pM(n){return`${Qw(ys(n))}|lt:${n.limitType}`}function sd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>dM(i)).join(", ")}]`),bm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ld(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ld(i)).join(",")),`Target(${r})`}(ys(n))}; limitType=${n.limitType})`}function Tm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Yh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=hC(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,Yh(r),i)||r.endAt&&!function(s,o,c){const d=hC(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,Yh(r),i))}(n,e)}function bB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gM(n){return(e,t)=>{let r=!1;for(const i of Yh(n)){const a=AB(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function AB(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?Nd(c,d):lt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ZR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=new Ln(Ze.comparator);function go(){return EB}const mM=new Ln(Ze.comparator);function Oh(...n){let e=mM;for(const t of n)e=e.insert(t.key,t);return e}function yM(n){let e=mM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cc(){return qh()}function vM(){return qh()}function qh(){return new Kc(n=>n.toString(),(n,e)=>n.isEqual(e))}const SB=new Ln(Ze.comparator),TB=new Tr(Ze.comparator);function Mt(...n){let e=TB;for(const t of n)e=e.add(t);return e}const CB=new Tr(bt);function IB(){return CB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:v1(e)?"-0":e}}function xM(n){return{integerValue:""+n}}function DB(n,e){return nB(e)?xM(e):Jw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this._=void 0}}function RB(n,e,t){return n instanceof o0?function(i,a){const s={fields:{[tM]:{stringValue:eM},[rM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Xw(a)&&(a=Am(a)),a&&(s.fields[nM]=a),{mapValue:s}}(t,e):n instanceof l0?_M(n,e):n instanceof c0?bM(n,e):function(i,a){const s=wM(i,a),o=yC(s)+yC(i.Ee);return D2(s)&&D2(i.Ee)?xM(o):Jw(i.serializer,o)}(n,e)}function MB(n,e,t){return n instanceof l0?_M(n,e):n instanceof c0?bM(n,e):t}function wM(n,e){return n instanceof A1?function(r){return D2(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class o0 extends Cm{}class l0 extends Cm{constructor(e){super(),this.elements=e}}function _M(n,e){const t=AM(e);for(const r of n.elements)t.some(i=>Es(i,r))||t.push(r);return{arrayValue:{values:t}}}class c0 extends Cm{constructor(e){super(),this.elements=e}}function bM(n,e){let t=AM(e);for(const r of n.elements)t=t.filter(i=>!Es(i,r));return{arrayValue:{values:t}}}class A1 extends Cm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function yC(n){return Qn(n.integerValue||n.doubleValue)}function AM(n){return Kw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,t){this.field=e,this.transform=t}}function PB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof l0&&i instanceof l0||r instanceof c0&&i instanceof c0?kd(r.elements,i.elements,Es):r instanceof A1&&i instanceof A1?Es(r.Ee,i.Ee):r instanceof o0&&i instanceof o0}(n.transform,e.transform)}class kB{constructor(e,t){this.version=e,this.transformResults=t}}class bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function t1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Im{}function EM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dm(n.key,bi.none()):new R0(n.key,n.data,bi.none());{const t=n.data,r=Ri.empty();let i=new Tr(Kr.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Nl(n.key,r,new zi(i.toArray()),bi.none())}}function NB(n,e,t){n instanceof R0?function(i,a,s){const o=i.value.clone(),c=xC(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Nl?function(i,a,s){if(!t1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=xC(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(SM(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Xh(n,e,t,r){return n instanceof R0?function(a,s,o,c){if(!t1(a.precondition,s))return o;const d=a.value.clone(),f=wC(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nl?function(a,s,o,c){if(!t1(a.precondition,s))return o;const d=wC(a.fieldTransforms,c,s),f=s.data;return f.setAll(SM(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,s,o){return t1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function LB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=wM(r.transform,i||null);a!=null&&(t===null&&(t=Ri.empty()),t.set(r.field,a))}return t||null}function vC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kd(r,i,(a,s)=>PB(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class R0 extends Im{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nl extends Im{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xC(n,e,t){const r=new Map;tn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,MB(s,o,t[i]))}return r}function wC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,RB(a,s,e))}return r}class Dm extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BB extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&NB(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vM();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const c=EM(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mt())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(t,r)=>vC(t,r))&&kd(this.baseMutations,e.baseMutations,(t,r)=>vC(t,r))}}class e_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return SB}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new e_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or,Vt;function UB(n){switch(n){case be.OK:return lt(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function TM(n){if(n===void 0)return po("GRPC error has no .code"),be.UNKNOWN;switch(n){case or.OK:return be.OK;case or.CANCELLED:return be.CANCELLED;case or.UNKNOWN:return be.UNKNOWN;case or.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case or.INTERNAL:return be.INTERNAL;case or.UNAVAILABLE:return be.UNAVAILABLE;case or.UNAUTHENTICATED:return be.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case or.NOT_FOUND:return be.NOT_FOUND;case or.ALREADY_EXISTS:return be.ALREADY_EXISTS;case or.PERMISSION_DENIED:return be.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case or.ABORTED:return be.ABORTED;case or.OUT_OF_RANGE:return be.OUT_OF_RANGE;case or.UNIMPLEMENTED:return be.UNIMPLEMENTED;case or.DATA_LOSS:return be.DATA_LOSS;default:return lt(39323,{code:n})}}(Vt=or||(or={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=new wl([4294967295,4294967295],0);function _C(n){const e=XR().encode(n),t=new UR;return t.update(e),new Uint8Array(t.digest())}function bC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wl([t,r],0),new wl([i,a],0)]}class t_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ph(`Invalid padding: ${t}`);if(r<0)throw new Ph(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ph(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ph(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=wl.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(wl.fromNumber(r)));return i.compare(HB)===1&&(i=new wl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=_C(e),[r,i]=bC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new t_(a,i,t);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const t=_C(e),[r,i]=bC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ph extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,M0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rm(ft.min(),i,new Ln(bt),go(),Mt())}}class M0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new M0(r,t,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class CM{constructor(e,t){this.targetId=e,this.De=t}}class IM{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AC{constructor(){this.ve=0,this.Ce=EC(),this.Fe=ei.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Mt(),t=Mt(),r=Mt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt(38017,{changeType:a})}}),new M0(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=EC()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zB{constructor(e){this.We=e,this.Ge=new Map,this.ze=go(),this.je=Sg(),this.Je=Sg(),this.He=new Ln(bt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(M2(a))if(r===0){const s=new Ze(a.path);this.Xe(t,s,oi.newNoDocument(s,ft.min()))}else tn(r===1,20013,{expectedCount:r});else{const s=this.ot(t);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=Cl(r).toUint8Array()}catch(c){if(c instanceof JR)return El("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new t_(s,i,a)}catch(c){return El(c instanceof Ph?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&M2(o.target)){const c=new Ze(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,oi.newNoDocument(c,e))}a.Ne&&(t.set(s,a.Le()),a.ke())}});let r=Mt();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new Rm(e,t,this.He,this.ze,r);return this.ze=go(),this.je=Sg(),this.Je=Sg(),this.He=new Ln(bt),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new AC,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Tr(bt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Tr(bt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ze("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new AC),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Sg(){return new Ln(Ze.comparator)}function EC(){return new Ln(Ze.comparator)}const $B={asc:"ASCENDING",desc:"DESCENDING"},GB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WB={and:"AND",or:"OR"};class YB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function P2(n,e){return n.useProto3Json||bm(e)?e:{value:e}}function E1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qB(n,e){return E1(n,e.toTimestamp())}function vs(n){return tn(!!n,49232),ft.fromTimestamp(function(t){const r=Tl(t);return new Tn(r.seconds,r.nanos)}(n))}function n_(n,e){return k2(n,e).canonicalString()}function k2(n,e){const t=function(i){return new mn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RM(n){const e=mn.fromString(n);return tn(NM(e),10190,{key:e.toString()}),e}function N2(n,e){return n_(n.databaseId,e.path)}function Ex(n,e){const t=RM(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(OM(t))}function MM(n,e){return n_(n.databaseId,e)}function XB(n){const e=RM(n);return e.length===4?mn.emptyPath():OM(e)}function L2(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OM(n){return tn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function SC(n,e,t){return{name:N2(n,e),fields:t.value.mapValue.fields}}function KB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:lt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(tn(f===void 0||typeof f=="string",58123),ei.fromBase64String(f||"")):(tn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ei.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?be.UNKNOWN:TM(d.code);return new Fe(f,d.message||"")}(s);t=new IM(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ex(n,r.document.name),a=vs(r.document.updateTime),s=r.document.createTime?vs(r.document.createTime):ft.min(),o=new Ri({mapValue:{fields:r.document.fields}}),c=oi.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];t=new n1(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ex(n,r.document),a=r.readTime?vs(r.readTime):ft.min(),s=oi.newNoDocument(i,a),o=r.removedTargetIds||[];t=new n1([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ex(n,r.document),a=r.removedTargetIds||[];t=new n1([],a,i,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new jB(i,a),o=r.targetId;t=new CM(o,s)}}return t}function QB(n,e){let t;if(e instanceof R0)t={update:SC(n,e.key,e.value)};else if(e instanceof Dm)t={delete:N2(n,e.key)};else if(e instanceof Nl)t={update:SC(n,e.key,e.data),updateMask:sV(e.fieldMask)};else{if(!(e instanceof BB))return lt(16599,{Rt:e.type});t={verify:N2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof o0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof l0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof c0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof A1)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw lt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:qB(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:lt(27497)}(n,e.precondition)),t}function ZB(n,e){return n&&n.length>0?(tn(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?vs(i.updateTime):vs(a);return s.isEqual(ft.min())&&(s=vs(a)),new kB(s,i.transformResults||[])}(t,e))):[]}function JB(n,e){return{documents:[MM(n,e.path)]}}function eV(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MM(n,i);const a=function(d){if(d.length!==0)return kM(Ua.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:od(g.field),direction:rV(g.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=P2(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:i}}function tV(n){let e=XB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tn(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];t.where&&(a=function(p){const g=PM(p);return g instanceof Ua&&cM(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(v){return new s0(ld(v.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,bm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new _1(y,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new _1(y,g)}(t.endAt)),wB(e,i,s,a,o,"F",c,d)}function nV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ld(t.unaryFilter.field);return ur.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ld(t.unaryFilter.field);return ur.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ld(t.unaryFilter.field);return ur.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ld(t.unaryFilter.field);return ur.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(n):n.fieldFilter!==void 0?function(t){return ur.create(ld(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ua.create(t.compositeFilter.filters.map(r=>PM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(t.compositeFilter.op))}(n):lt(30097,{filter:n})}function rV(n){return $B[n]}function iV(n){return GB[n]}function aV(n){return WB[n]}function od(n){return{fieldPath:n.canonicalString()}}function ld(n){return Kr.fromServerFormat(n.fieldPath)}function kM(n){return n instanceof ur?function(t){if(t.op==="=="){if(fC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NAN"}};if(dC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NOT_NAN"}};if(dC(t.value))return{unaryFilter:{field:od(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(t.field),op:iV(t.op),value:t.value}}}(n):n instanceof Ua?function(t){const r=t.getFilters().map(i=>kM(i));return r.length===1?r[0]:{compositeFilter:{op:aV(t.op),filters:r}}}(n):lt(54877,{filter:n})}function sV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t,r,i,a=ft.min(),s=ft.min(),o=ei.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.gt=e}}function lV(n){const e=tV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?b1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.Dn=new uV}addToCollectionParentIndex(e,t){return this.Dn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Sl.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Sl.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class uV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tr(mn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tr(mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LM=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(LM,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Bd(0)}static ur(){return new Bd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="LruGarbageCollector",dV=1048576;function IC([n,e],[t,r]){const i=bt(n,t);return i===0?bt(e,r):i}class fV{constructor(e){this.Tr=e,this.buffer=new Tr(IC),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ze(CC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rf(t)?ze(CC,"Ignoring IndexedDB error during garbage collection: ",t):await nf(t)}await this.Rr(3e5)})}}class pV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(_m.ue);const r=new fV(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(TC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TC):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ad()<=Rt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function gV(n,e){return new pV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.changes=new Kc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xh(r.mutation,i,zi.empty(),Tn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Mt()){const i=Cc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=Oh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Cc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{t.set(s,o)})})}computeViews(e,t,r,i){let a=go();const s=qh(),o=function(){return qh()}();return t.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Nl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Xh(f.mutation,d,f.mutation.getFieldMask(),Tn.now())):s.set(d.key,zi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var p;return o.set(d,new yV(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,t){const r=qh();let i=new Ln((s,o)=>s-o),a=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let f=r.get(c)||zi.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||Mt()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=vM();f.forEach(g=>{if(!a.has(g)){const y=EM(t.get(g),r.get(g));y!==null&&p.set(g,y),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Te.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Te.resolve(Cc());let o=n0,c=a;return s.next(d=>Te.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?Te.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,Mt())).next(f=>({batchId:o,changes:yM(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=Oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Oh();return this.indexManager.getCollectionParents(e,a).next(o=>Te.forEach(o,c=>{const d=function(p,g){return new Xc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,oi.newInvalidDocument(f)))});let o=Oh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&Xh(f.mutation,d,zi.empty(),Tn.now()),Tm(t,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:vs(i.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:lV(i.bundledQuery),readTime:vs(i.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this.overlays=new Ln(Ze.comparator),this.kr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cc();return Te.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Cc(),a=t.length+1,s=new Ze(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ln((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Cc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=Cc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return Te.resolve(o)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new FB(t,r));let a=this.kr.get(t);a===void 0&&(a=Mt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.sessionToken=ei.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.qr=new Tr(Nr.Qr),this.$r=new Tr(Nr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Nr(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Ze(new mn([])),r=new Nr(t,e),i=new Nr(t,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ze(new mn([])),r=new Nr(t,e),i=new Nr(t,e+1);let a=Mt();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new Nr(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ze.comparator(e.key,t.key)||bt(e.Hr,t.Hr)}static Ur(e,t){return bt(e.Hr,t.Hr)||Ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Tr(Nr.Qr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new VB(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Nr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Te.resolve(s)}lookupMutationBatch(e,t){return Te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?qw:this.er-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),i=new Nr(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tr(bt);return t.forEach(i=>{const a=new Nr(i,0),s=new Nr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),Te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const s=new Nr(new Ze(a),0);let o=new Tr(bt);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),Te.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){tn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Te.forEach(t.mutations,i=>{const a=new Nr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Nr(t,0),i=this.Yr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.ni=e,this.docs=function(){return new Ln(Ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():oi.newInvalidDocument(t))}getEntries(e,t){let r=go();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():oi.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=go();const s=t.path,o=new Ze(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||ZL(QL(f),r)<=0||(i.has(f.key)||Tm(t,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){lt(9500)}ri(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EV(this)}getSize(e){return Te.resolve(this.size)}}class EV extends mV{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.persistence=e,this.ii=new Kc(t=>Qw(t),Zw),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.si=0,this.oi=new r_,this.targetCount=0,this._i=Bd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Bd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.hr(t),Te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Te.waitFor(a).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.ai={},this.overlays={},this.ui=new _m(0),this.ci=!1,this.ci=!0,this.li=new _V,this.referenceDelegate=e(this),this.hi=new SV(this),this.indexManager=new cV,this.remoteDocumentCache=function(i){return new AV(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new oV(t),this.Ti=new xV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new bV(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new TV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return Te.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class TV extends eB{constructor(e){super(),this.currentSequenceNumber=e}}class i_{constructor(e){this.persistence=e,this.Ai=new r_,this.Ri=null}static Vi(e){return new i_(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.mi,r=>{const i=Ze.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,ft.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Te.or([()=>Te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class S1{constructor(e,t){this.persistence=e,this.gi=new Kc(r=>rB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=gV(this,t)}static Vi(e,t){return new S1(e,t)}Ii(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Te.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?Te.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(o=>{o||(r++,a.removeEntry(s,ft.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jg(e.data.value)),t}Sr(e,t,r){return Te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return Te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Mt(),i=Mt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new a_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return a5()?8:tB(ui())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new CV;return this.ws(e,t,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,t,s,o.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ad()<=Rt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",sd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(ad()<=Rt.DEBUG&&ze("QueryEngine","Query:",sd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ad()<=Rt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",sd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):Te.resolve())}ps(e,t){if(mC(t))return Te.resolve(null);let r=ys(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=b1(t,null,"F"),r=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Mt(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(t,o);return this.Ds(t,d,s,c.readTime)?this.ps(e,b1(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return mC(t)||i.isEqual(ft.min())?Te.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(t,a);return this.Ds(t,s,r,i)?Te.resolve(null):(ad()<=Rt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sd(t)),this.vs(e,s,t,KL(i,n0)).next(o=>o))})}bs(e,t){let r=new Tr(gM(e));return t.forEach((i,a)=>{Tm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return ad()<=Rt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",sd(t)),this.gs.getDocumentsMatchingQuery(e,t,Sl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="LocalStore",DV=3e8;class RV{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ln(bt),this.Ms=new Kc(a=>Qw(a),Zw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function MV(n,e,t,r){return new RV(n,e,t,r)}async function VM(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=Mt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function OV(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let y=Te.resolve();return g.forEach(v=>{y=y.next(()=>f.getEntry(c,v)).next(b=>{const A=d.docVersions.get(v);tn(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Mt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function FM(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function PV(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(t.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(a,f.addedDocuments,p)));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ei.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(b,A,E){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=DV?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,y,f)&&o.push(t.hi.updateTargetData(a,y))});let c=go(),d=Mt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(kV(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(ft.min())){const f=t.hi.getLastRemoteSnapshotVersion(a).next(p=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return Te.waitFor(o).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(t.Fs=i,a))}function kV(n,e,t){let r=Mt(),i=Mt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=go();return t.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(ft.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):ze(s_,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function NV(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LV(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,Te.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new gl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function B2(n,e,t){const r=gt(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!rf(s))throw s;ze(s_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function DC(n,e,t){const r=gt(n);let i=ft.min(),a=Mt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=gt(c),g=p.Ms.get(f);return g!==void 0?Te.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,ys(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ft.min(),t?a:Mt())).next(o=>(BV(r,bB(e),o),{documents:o,qs:a})))}function BV(n,e,t){let r=n.xs.get(e)||ft.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class RC{constructor(){this.activeTargetIds=IB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VV{constructor(){this.Fo=new RC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new RC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="ConnectivityMonitor";class OC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ze(MC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ze(MC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg=null;function V2(){return Tg===null?Tg=function(){return 268435456+Math.round(2147483648*Math.random())}():Tg++,"0x"+Tg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="RestConnection",jV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===x1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=V2(),o=this.Go(e,t.toUriEncodedString());ze(Sx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=Zd(d);return this.jo(e,o,c,r,f).then(p=>(ze(Sx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw El(Sx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=jV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class zV extends UV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const s=V2();return new Promise((o,c)=>{const d=new HR;d.setWithCredentials(!0),d.listenOnce(zR.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Zg.NO_ERROR:const p=d.getResponseJson();ze(ni,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Zg.TIMEOUT:ze(ni,`RPC '${e}' ${s} timed out`),c(new Fe(be.DEADLINE_EXCEEDED,"Request time out"));break;case Zg.HTTP_ERROR:const g=d.getStatus();if(ze(ni,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const b=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(T)>=0?T:be.UNKNOWN}(v.status);c(new Fe(b,v.message))}else c(new Fe(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Fe(be.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ze(ni,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);ze(ni,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}P_(e,t,r){const i=V2(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=WR(),o=GR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=a.join("");ze(ni,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,y=!1;const v=new HV({Ho:A=>{y?ze(ni,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(ze(ni,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ze(ni,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),b=(A,E,T)=>{A.listen(E,C=>{try{T(C)}catch(I){setTimeout(()=>{throw I},0)}})};return b(p,Mh.EventType.OPEN,()=>{y||(ze(ni,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),b(p,Mh.EventType.CLOSE,()=>{y||(y=!0,ze(ni,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(p))}),b(p,Mh.EventType.ERROR,A=>{y||(y=!0,El(ni,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),v.__(new Fe(be.UNAVAILABLE,"The operation could not be completed")))}),b(p,Mh.EventType.MESSAGE,A=>{var E;if(!y){const T=A.data[0];tn(!!T,16349);const C=T,I=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(I){ze(ni,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let N=function(D){const B=or[D];if(B!==void 0)return TM(B)}(O),M=I.message;N===void 0&&(N=be.INTERNAL,M="Unknown error status: "+O+" with message "+I.message),y=!0,v.__(new Fe(N,M)),p.close()}else ze(ni,`RPC '${e}' stream ${i} received:`,T),v.a_(T)}}),b(o,$R.STAT_EVENT,A=>{A.stat===T2.PROXY?ze(ni,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===T2.NOPROXY&&ze(ni,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Tx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n){return new YB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="PersistentStream";class UM{constructor(e,t,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new jM(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Fe(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ze(PC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ze(PC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $V extends UM{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=KB(this.serializer,e),r=function(a){if(!("targetChange"in a))return ft.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?ft.min():s.readTime?vs(s.readTime):ft.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=L2(this.serializer),t.addTarget=function(a,s){let o;const c=s.target;if(o=M2(c)?{documents:JB(a,c)}:{query:eV(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=DM(a,s.resumeToken);const d=P2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(ft.min())>0){o.readTime=E1(a,s.snapshotVersion.toTimestamp());const d=P2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=nV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=L2(this.serializer),t.removeTarget=e,this.k_(t)}}class GV extends UM{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return tn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=ZB(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=L2(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>QB(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{}class YV extends WV{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Fe(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,k2(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(be.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,k2(t,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(be.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class qV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(po(t),this._a=!1):ze("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="RemoteStore";class XV{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Qc(this)&&(ze($c,"Restarting streams for network reachability change."),await async function(c){const d=gt(c);d.Ia.add(4),await O0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Om(d)}(this))})}),this.Aa=new qV(r,i)}}async function Om(n){if(Qc(n))for(const e of n.da)await e(!0)}async function O0(n){for(const e of n.da)await e(!1)}function HM(n,e){const t=gt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),u_(t)?c_(t):af(t).x_()&&l_(t,e))}function o_(n,e){const t=gt(n),r=af(t);t.Ta.delete(e),r.x_()&&zM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qc(t)&&t.Aa.set("Unknown"))}function l_(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}af(n).H_(e)}function zM(n,e){n.Ra.$e(e),af(n).Y_(e)}function c_(n){n.Ra=new zB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),af(n).start(),n.Aa.aa()}function u_(n){return Qc(n)&&!af(n).M_()&&n.Ta.size>0}function Qc(n){return gt(n).Ia.size===0}function $M(n){n.Ra=void 0}async function KV(n){n.Aa.set("Online")}async function QV(n){n.Ta.forEach((e,t)=>{l_(n,e)})}async function ZV(n,e){$M(n),u_(n)?(n.Aa.la(e),c_(n)):n.Aa.set("Unknown")}async function JV(n,e,t){if(n.Aa.set("Online"),e instanceof IM&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(n,e)}catch(r){ze($c,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await T1(n,r)}else if(e instanceof n1?n.Ra.Ye(e):e instanceof CM?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ft.min()))try{const r=await FM(n.localStore);t.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(ei.EMPTY_BYTE_STRING,f.snapshotVersion)),zM(a,c);const p=new gl(f.target,c,d,f.sequenceNumber);l_(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){ze($c,"Failed to raise snapshot:",r),await T1(n,r)}}async function T1(n,e,t){if(!rf(e))throw e;n.Ia.add(1),await O0(n),n.Aa.set("Offline"),t||(t=()=>FM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ze($c,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Om(n)})}function GM(n,e){return e().catch(t=>T1(n,t,e))}async function Pm(n){const e=gt(n),t=Dl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qw;for(;eF(e);)try{const i=await NV(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,tF(e,i)}catch(i){await T1(e,i)}WM(e)&&YM(e)}function eF(n){return Qc(n)&&n.Pa.length<10}function tF(n,e){n.Pa.push(e);const t=Dl(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function WM(n){return Qc(n)&&!Dl(n).M_()&&n.Pa.length>0}function YM(n){Dl(n).start()}async function nF(n){Dl(n).na()}async function rF(n){const e=Dl(n);for(const t of n.Pa)e.X_(t.mutations)}async function iF(n,e,t){const r=n.Pa.shift(),i=e_.from(r,e,t);await GM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Pm(n)}async function aF(n,e){e&&Dl(n).Z_&&await async function(r,i){if(function(s){return UB(s)&&s!==be.ABORTED}(i.code)){const a=r.Pa.shift();Dl(r).N_(),await GM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Pm(r)}}(n,e),WM(n)&&YM(n)}async function kC(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),ze($c,"RemoteStore received new credentials");const r=Qc(t);t.Ia.add(3),await O0(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Om(t)}async function sF(n,e){const t=gt(n);e?(t.Ia.delete(2),await Om(t)):e||(t.Ia.add(2),await O0(t),t.Aa.set("Unknown"))}function af(n){return n.Va||(n.Va=function(t,r,i){const a=gt(t);return a.ia(),new $V(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:KV.bind(null,n),e_:QV.bind(null,n),n_:ZV.bind(null,n),J_:JV.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),u_(n)?c_(n):n.Aa.set("Unknown")):(await n.Va.stop(),$M(n))})),n.Va}function Dl(n){return n.ma||(n.ma=function(t,r,i){const a=gt(t);return a.ia(),new GV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:nF.bind(null,n),n_:aF.bind(null,n),ea:rF.bind(null,n),ta:iF.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Pm(n)):(await n.ma.stop(),n.Pa.length>0&&(ze($c,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new d_(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f_(n,e){if(po("AsyncQueue",`${e}: ${n}`),rf(n))return new Fe(be.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{static emptySet(e){return new Ed(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Oh(),this.sortedSet=new Ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ed)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ed;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.fa=new Ln(Ze.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):lt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Vd{constructor(e,t,r,i,a,s,o,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Vd(e,t,Ed.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class lF{constructor(){this.queries=LC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=gt(t),a=i.queries;i.queries=LC(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new Fe(be.ABORTED,"Firestore shutting down"))}}function LC(){return new Kc(n=>pM(n),Sm)}async function h_(n,e){const t=gt(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new oF,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=f_(s,`Initialization of query '${sd(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&g_(t)}async function p_(n,e){const t=gt(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cF(n,e){const t=gt(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&g_(t)}function uF(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function g_(n){n.Da.forEach(e=>{e.next()})}var F2,BC;(BC=F2||(F2={})).Fa="default",BC.Cache="cache";class m_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==F2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.key=e}}class XM{constructor(e){this.key=e}}class dF{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Mt(),this.mutatedKeys=Mt(),this.Xa=gM(e),this.eu=new Ed(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new NC,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),y=Tm(this.query,p)?p:null,v=!!g&&this.mutatedKeys.has(g.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?v!==b&&(r.track({type:3,doc:y}),A=!0):this.iu(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(o=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(y?(s=s.add(y),a=b?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(y,v){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:A})}};return b(y)-b(v)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new Vd(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new NC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Mt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new XM(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new qM(r))}),t}uu(e){this.Ha=e.qs,this.Za=Mt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Vd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const y_="SyncEngine";class fF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hF{constructor(e){this.key=e,this.lu=!1}}class pF{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Kc(o=>pM(o),Sm),this.Tu=new Map,this.Iu=new Set,this.du=new Ln(Ze.comparator),this.Eu=new Map,this.Au=new r_,this.Ru={},this.Vu=new Map,this.mu=Bd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gF(n,e,t=!0){const r=t4(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await KM(r,e,t,!0),i}async function mF(n,e){const t=t4(n);await KM(t,e,!0,!1)}async function KM(n,e,t,r){const i=await LV(n.localStore,ys(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await yF(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&HM(n.remoteStore,i),o}async function yF(n,e,t,r,i){n.gu=(p,g,y)=>async function(b,A,E,T){let C=A.view.nu(E);C.Ds&&(C=await DC(b.localStore,A.query,!1).then(({documents:M})=>A.view.nu(M,C)));const I=T&&T.targetChanges.get(A.targetId),O=T&&T.targetMismatches.get(A.targetId)!=null,N=A.view.applyChanges(C,b.isPrimaryClient,I,O);return FC(b,A.targetId,N._u),N.snapshot}(n,p,g,y);const a=await DC(n.localStore,e,!0),s=new dF(e,a.qs),o=s.nu(a.documents),c=M0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(o,n.isPrimaryClient,c);FC(n,t,d._u);const f=new fF(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function vF(n,e,t){const r=gt(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Sm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await B2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&o_(r.remoteStore,i.targetId),j2(r,i.targetId)}).catch(nf)):(j2(r,i.targetId),await B2(r.localStore,i.targetId,!0))}async function xF(n,e){const t=gt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),o_(t.remoteStore,r.targetId))}async function wF(n,e,t){const r=CF(n);try{const i=await function(s,o){const c=gt(s),d=Tn.now(),f=o.reduce((y,v)=>y.add(v.key),Mt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=go(),b=Mt();return c.Os.getEntries(y,f).next(A=>{v=A,v.forEach((E,T)=>{T.isValidDocument()||(b=b.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,v)).next(A=>{p=A;const E=[];for(const T of o){const C=LB(T,p.get(T.key).overlayedDocument);C!=null&&E.push(new Nl(T.key,C,sM(C.value.mapValue),bi.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,E,o)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(y,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:yM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Ln(bt)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,t),await P0(r,i.changes),await Pm(r.remoteStore)}catch(i){const a=f_(i,"Failed to persist write");t.reject(a)}}async function QM(n,e){const t=gt(n);try{const r=await PV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Eu.get(a);s&&(tn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?tn(s.lu,14607):i.removedDocuments.size>0&&(tn(s.lu,42227),s.lu=!1))}),await P0(t,r,e)}catch(r){await nf(r)}}function VC(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=gt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&g_(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _F(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Ln(Ze.comparator);s=s.insert(a,oi.newNoDocument(a,ft.min()));const o=Mt().add(a),c=new Rm(ft.min(),new Map,new Ln(bt),s,o);await QM(r,c),r.du=r.du.remove(a),r.Eu.delete(e),v_(r)}else await B2(r.localStore,e,!1).then(()=>j2(r,e,t)).catch(nf)}async function bF(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await OV(t.localStore,e);JM(t,r,null),ZM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await P0(t,i)}catch(i){await nf(i)}}async function AF(n,e,t){const r=gt(n);try{const i=await function(s,o){const c=gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(tn(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);JM(r,e,t),ZM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await P0(r,i)}catch(i){await nf(i)}}function ZM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function JM(n,e,t){const r=gt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function j2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||e4(n,r)})}function e4(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(o_(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),v_(n))}function FC(n,e,t){for(const r of t)r instanceof qM?(n.Au.addReference(r.key,e),EF(n,r)):r instanceof XM?(ze(y_,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||e4(n,r.key)):lt(19791,{yu:r})}function EF(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ze(y_,"New document in limbo: "+t),n.Iu.add(r),v_(n))}function v_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ze(mn.fromString(e)),r=n.mu.next();n.Eu.set(r,new hF(t)),n.du=n.du.insert(t,r),HM(n.remoteStore,new gl(ys(Em(t.path)),r,"TargetPurposeLimboResolution",_m.ue))}}async function P0(n,e,t){const r=gt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=a_.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=gt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Te.forEach(d,g=>Te.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Te.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!rf(p))throw p;ze(s_,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=f.Fs.get(g),v=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(v);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,a))}async function SF(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){ze(y_,"User change. New user:",e.toKey());const r=await VM(t.localStore,e);t.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new Fe(be.CANCELLED,s))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await P0(t,r.Bs)}}function TF(n,e){const t=gt(n),r=t.Eu.get(e);if(r&&r.lu)return Mt().add(r.key);{let i=Mt();const a=t.Tu.get(e);if(!a)return i;for(const s of a){const o=t.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function t4(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_F.bind(null,e),e.hu.J_=cF.bind(null,e.eventManager),e.hu.pu=uF.bind(null,e.eventManager),e}function CF(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AF.bind(null,e),e}class C1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return MV(this.persistence,new IV,e.initialUser,this.serializer)}Du(e){return new BM(i_.Vi,this.serializer)}bu(e){return new VV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C1.provider={build:()=>new C1};class IF extends C1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){tn(this.persistence.referenceDelegate instanceof S1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hV(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new BM(r=>S1.Vi(r,t),this.serializer)}}class U2{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SF.bind(null,this.syncEngine),await sF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lF}()}createDatastore(e){const t=Mm(e.databaseInfo.databaseId),r=function(a){return new zV(a)}(e.databaseInfo);return function(a,s,o,c){return new YV(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,o){return new XV(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,t=>VC(this.syncEngine,t,0),function(){return OC.C()?new OC:new FV}())}createSyncEngine(e,t){return function(i,a,s,o,c,d,f){const p=new pF(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=gt(i);ze($c,"RemoteStore shutting down."),a.Ia.add(5),await O0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}U2.provider={build:()=>new U2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="FirestoreClient";class DF{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=si.UNAUTHENTICATED,this.clientId=Ww.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{ze(Rl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ze(Rl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=f_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cx(n,e){n.asyncQueue.verifyOperationInProgress(),ze(Rl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{El("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ze("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{El("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function jC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await RF(n);ze(Rl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>kC(e.remoteStore,i)),n._onlineComponents=e}async function RF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze(Rl,"Using user provided OfflineComponentProvider");try{await Cx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;El("Error using user provided cache. Falling back to memory cache: "+t),await Cx(n,new C1)}}else ze(Rl,"Using default OfflineComponentProvider"),await Cx(n,new IF(void 0));return n._offlineComponents}async function n4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze(Rl,"Using user provided OnlineComponentProvider"),await jC(n,n._uninitializedComponentsProvider._online)):(ze(Rl,"Using default OnlineComponentProvider"),await jC(n,new U2))),n._onlineComponents}function MF(n){return n4(n).then(e=>e.syncEngine)}async function I1(n){const e=await n4(n),t=e.eventManager;return t.onListen=gF.bind(null,e.syncEngine),t.onUnlisten=vF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xF.bind(null,e.syncEngine),t}function OF(n,e,t={}){const r=new lo;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new x_({next:g=>{f.Ou(),s.enqueueAndForget(()=>p_(a,p));const y=g.docs.has(o);!y&&g.fromCache?d.reject(new Fe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?d.reject(new Fe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new m_(Em(o.path),f,{includeMetadataChanges:!0,ka:!0});return h_(a,p)}(await I1(n),n.asyncQueue,e,t,r)),r.promise}function PF(n,e,t={}){const r=new lo;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new x_({next:g=>{f.Ou(),s.enqueueAndForget(()=>p_(a,p)),g.fromCache&&c.source==="server"?d.reject(new Fe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new m_(o,f,{includeMetadataChanges:!0,ka:!0});return h_(a,p)}(await I1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="firestore.googleapis.com",HC=!0;class zC{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i4,this.ssl=HC}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:HC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dV)throw new Fe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class k0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FL;switch(r.type){case"firstParty":return new zL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Fe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=UC.get(t);r&&(ze("ComponentProvider","Removing Datastore"),UC.delete(t),r.terminate())}(this),Promise.resolve()}}function kF(n,e,t,r={}){var i;n=ci(n,k0);const a=Zd(e),s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(J3(`https://${c}`),eR("Firestore",!0)),s.host!==i4&&s.host!==c&&El("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Fc(d,o)&&(n._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=si.MOCK_USER;else{f=KN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new si(g)}n._authCredentials=new jL(new qR(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}toJSON(){return{type:zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(D0(t,zn._jsonSchema))return new zn(e,r||null,new Ze(mn.fromString(t.referencePath)))}}zn._jsonSchemaVersion="firestore/documentReference/1.0",zn._jsonSchema={type:dr("string",zn._jsonSchemaVersion),referencePath:dr("string")};class _l extends Cs{constructor(e,t,r){super(e,t,Em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Ze(e))}withConverter(e){return new _l(this.firestore,e,this._path)}}function Br(n,e,...t){if(n=fr(n),Yw("collection","path",e),n instanceof k0){const r=mn.fromString(e,...t);return nC(r),new _l(n,null,r)}{if(!(n instanceof zn||n instanceof _l))throw new Fe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return nC(r),new _l(n.firestore,null,r)}}function ml(n,e){if(n=ci(n,k0),Yw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cs(n,null,function(r){return new Xc(mn.emptyPath(),r)}(e))}function mo(n,e,...t){if(n=fr(n),arguments.length===1&&(e=Ww.newId()),Yw("doc","path",e),n instanceof k0){const r=mn.fromString(e,...t);return tC(r),new zn(n,null,new Ze(r))}{if(!(n instanceof zn||n instanceof _l))throw new Fe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return tC(r),new zn(n.firestore,n instanceof _l?n.converter:null,new Ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="AsyncQueue";class GC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jM(this,"async_queue_retry"),this.oc=()=>{const r=Tx();r&&ze($C,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Tx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Tx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new lo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rf(e))throw e;ze($C,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,po("INTERNAL UNHANDLED ERROR: ",WC(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=d_.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&lt(47125,{hc:WC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function WC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Ss extends k0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GC(e),this._firestoreClient=void 0,await e}}}function NF(n,e){const t=typeof n=="object"?n:iR(),r=typeof n=="string"?n:x1,i=Nw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=qN("firestore");a&&kF(i,...a)}return i}function N0(n){if(n._terminated)throw new Fe(be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LF(n),n._firestoreClient}function LF(n){var e,t,r;const i=n._freezeSettings(),a=function(o,c,d,f){return new sB(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,r4(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DF(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(ei.fromBase64String(e))}catch(t){throw new Fe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ua(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(D0(e,ua._jsonSchema))return ua.fromBase64String(e.bytes)}}ua._jsonSchemaVersion="firestore/bytes/1.0",ua._jsonSchema={type:dr("string",ua._jsonSchemaVersion),bytes:dr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xs._jsonSchemaVersion}}static fromJSON(e){if(D0(e,xs._jsonSchema))return new xs(e.latitude,e.longitude)}}xs._jsonSchemaVersion="firestore/geoPoint/1.0",xs._jsonSchema={type:dr("string",xs._jsonSchemaVersion),latitude:dr("number"),longitude:dr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(D0(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ws(e.vectorValues);throw new Fe(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:dr("string",ws._jsonSchemaVersion),vectorValues:dr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=/^__.*__$/;class VF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new R0(e,this.data,t,this.fieldTransforms)}}class a4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function s4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}class w_{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new w_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return D1(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(s4(this.Ec)&&BF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mm(e)}Dc(e,t,r,i=!1){return new w_({Ec:e,methodName:t,bc:r,path:Kr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function B0(n){const e=n._freezeSettings(),t=Mm(n._databaseId);return new FF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function __(n,e,t,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);A_("Data must be an object, but it was:",s,r);const o=c4(r,s);let c,d;if(a.merge)c=new zi(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=H2(e,p,t);if(!s.contains(g))throw new Fe(be.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);d4(f,g)||f.push(g)}c=new zi(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new VF(new Ri(o),c,d)}class Nm extends km{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nm}}class b_ extends km{_toFieldTransform(e){return new OB(e.path,new o0)}isEqual(e){return e instanceof b_}}function o4(n,e,t,r){const i=n.Dc(1,e,t);A_("Data must be an object, but it was:",i,r);const a=[],s=Ri.empty();kl(r,(c,d)=>{const f=E_(e,c,t);d=fr(d);const p=i.gc(f);if(d instanceof Nm)a.push(f);else{const g=V0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new zi(a);return new a4(s,o,i.fieldTransforms)}function l4(n,e,t,r,i,a){const s=n.Dc(1,e,t),o=[H2(e,r,t)],c=[i];if(a.length%2!=0)throw new Fe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(H2(e,a[g])),c.push(a[g+1]);const d=[],f=Ri.empty();for(let g=o.length-1;g>=0;--g)if(!d4(d,o[g])){const y=o[g];let v=c[g];v=fr(v);const b=s.gc(y);if(v instanceof Nm)d.push(y);else{const A=V0(v,b);A!=null&&(d.push(y),f.set(y,A))}}const p=new zi(d);return new a4(f,p,s.fieldTransforms)}function jF(n,e,t,r=!1){return V0(t,n.Dc(r?4:3,e))}function V0(n,e){if(u4(n=fr(n)))return A_("Unsupported field value:",e,n),c4(n,e);if(n instanceof km)return function(r,i){if(!s4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=V0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=fr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Tn.fromDate(r);return{timestampValue:E1(i.serializer,a)}}if(r instanceof Tn){const a=new Tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:E1(i.serializer,a)}}if(r instanceof xs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ua)return{bytesValue:DM(i.serializer,r._byteString)};if(r instanceof zn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:n_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ws)return function(s,o){return{mapValue:{fields:{[iM]:{stringValue:aM},[w1]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return Jw(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${wm(r)}`)}(n,e)}function c4(n,e){const t={};return ZR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kl(n,(r,i)=>{const a=V0(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function u4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tn||n instanceof xs||n instanceof ua||n instanceof zn||n instanceof km||n instanceof ws)}function A_(n,e,t){if(!u4(t)||!KR(t)){const r=wm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function H2(n,e,t){if((e=fr(e))instanceof L0)return e._internalPath;if(typeof e=="string")return E_(n,e);throw D1("Field path arguments must be of type string or ",n,!1,void 0,t)}const UF=new RegExp("[~\\*/\\[\\]]");function E_(n,e,t){if(e.search(UF)>=0)throw D1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new L0(...e.split("."))._internalPath}catch{throw D1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function D1(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Fe(be.INVALID_ARGUMENT,o+n+c)}function d4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HF extends f4{data(){return super.data()}}function Lm(n,e){return typeof e=="string"?E_(n,e):e instanceof L0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Fe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S_{}class T_ extends S_{}function Hn(n,e,...t){let r=[];e instanceof S_&&r.push(e),r=r.concat(t),function(a){const s=a.filter(c=>c instanceof C_).length,o=a.filter(c=>c instanceof Bm).length;if(s>1||s>0&&o>0)throw new Fe(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Bm extends T_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Bm(e,t,r)}_apply(e){const t=this._parse(e);return p4(e._query,t),new Cs(e.firestore,e.converter,O2(e._query,t))}_parse(e){const t=B0(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Fe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){XC(p,f);const v=[];for(const b of p)v.push(qC(c,a,b));g={arrayValue:{values:v}}}else g=qC(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||XC(p,f),g=jF(o,s,p,f==="in"||f==="not-in");return ur.create(d,f,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sn(n,e,t){const r=e,i=Lm("where",n);return Bm._create(i,r,t)}class C_ extends S_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new C_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ua.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)p4(s,c),s=O2(s,c)}(e._query,t),new Cs(e.firestore,e.converter,O2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class I_ extends T_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new I_(e,t)}_apply(e){const t=function(i,a,s){if(i.startAt!==null)throw new Fe(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Fe(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new s0(a,s)}(e._query,this._field,this._direction);return new Cs(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new Xc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function u0(n,e="asc"){const t=e,r=Lm("orderBy",n);return I_._create(r,t)}class D_ extends T_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new D_(e,t,r)}_apply(e){return new Cs(e.firestore,e.converter,b1(e._query,this._limit,this._limitType))}}function Cg(n){return XL("limit",n),D_._create("limit",n,"F")}function qC(n,e,t){if(typeof(t=fr(t))=="string"){if(t==="")throw new Fe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hM(e)&&t.indexOf("/")!==-1)throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Ze.isDocumentKey(r))throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uC(n,new Ze(r))}if(t instanceof zn)return uC(n,t._key);throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wm(t)}.`)}function XC(n,e){if(!Array.isArray(n)||n.length===0)throw new Fe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p4(n,e){const t=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Fe(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Fe(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zF{convertValue(e,t="none"){switch(Il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return kl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[w1].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Qn(s.doubleValue));return new ws(a)}convertGeoPoint(e){return new xs(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Am(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(r0(e));default:return null}}convertTimestamp(e){const t=Tl(e);return new Tn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);tn(NM(r),9688,{name:e});const i=new i0(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||po(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class kh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kc extends f4{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=kc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",kc._jsonSchema={type:dr("string",kc._jsonSchemaVersion),bundleSource:dr("string","DocumentSnapshot"),bundleName:dr("string"),bundle:dr("string")};class r1 extends kc{data(e={}){return super.data(e)}}class Nc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r1(this._firestore,this._userDataWriter,r.key,r,new kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new r1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new kh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new r1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new kh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:$F(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ww.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $F(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(n){n=ci(n,zn);const e=ci(n.firestore,Ss);return OF(N0(e),n._key).then(t=>g4(e,n,t))}Nc._jsonSchemaVersion="firestore/querySnapshot/1.0",Nc._jsonSchema={type:dr("string",Nc._jsonSchemaVersion),bundleSource:dr("string","QuerySnapshot"),bundleName:dr("string"),bundle:dr("string")};class M_ extends zF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function lr(n){n=ci(n,Cs);const e=ci(n.firestore,Ss),t=N0(e),r=new M_(e);return h4(n._query),PF(t,n._query).then(i=>new Nc(e,r,n,i))}function KC(n,e,t){n=ci(n,zn);const r=ci(n.firestore,Ss),i=R_(n.converter,e,t);return F0(r,[__(B0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,bi.none())])}function Vm(n,e,t,...r){n=ci(n,zn);const i=ci(n.firestore,Ss),a=B0(i);let s;return s=typeof(e=fr(e))=="string"||e instanceof L0?l4(a,"updateDoc",n._key,e,t,r):o4(a,"updateDoc",n._key,e),F0(i,[s.toMutation(n._key,bi.exists(!0))])}function WF(n){return F0(ci(n.firestore,Ss),[new Dm(n._key,bi.none())])}function R1(n,e){const t=ci(n.firestore,Ss),r=mo(n),i=R_(n.converter,e);return F0(t,[__(B0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,bi.exists(!1))]).then(()=>r)}function YF(n,...e){var t,r,i;n=fr(n);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||YC(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(YC(e[s])){const p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(n instanceof zn)d=ci(n.firestore,Ss),f=Em(n._key.path),c={next:p=>{e[s]&&e[s](g4(d,n,p))},error:e[s+1],complete:e[s+2]};else{const p=ci(n,Cs);d=ci(p.firestore,Ss),f=p._query;const g=new M_(d);c={next:y=>{e[s]&&e[s](new Nc(d,g,p,y))},error:e[s+1],complete:e[s+2]},h4(n._query)}return function(g,y,v,b){const A=new x_(b),E=new m_(y,A,v);return g.asyncQueue.enqueueAndForget(async()=>h_(await I1(g),E)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>p_(await I1(g),E))}}(N0(d),f,o,c)}function F0(n,e){return function(r,i){const a=new lo;return r.asyncQueue.enqueueAndForget(async()=>wF(await MF(r),i,a)),a.promise}(N0(n),e)}function g4(n,e,t){const r=t.docs.get(e._key),i=new M_(n);return new kc(n,i,e._key,r,new kh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=B0(e)}set(e,t,r){this._verifyNotCommitted();const i=Ix(e,this._firestore),a=R_(i.converter,t,r),s=__(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,bi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ix(e,this._firestore);let s;return s=typeof(t=fr(t))=="string"||t instanceof L0?l4(this._dataReader,"WriteBatch.update",a._key,t,r,i):o4(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(s.toMutation(a._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ix(e,this._firestore);return this._mutations=this._mutations.concat(new Dm(t._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ix(n,e){if((n=fr(n)).firestore!==e)throw new Fe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function $i(){return new b_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n){return N0(n=ci(n,Ss)),new qF(n,e=>F0(n,e))}(function(e,t=!0){(function(i){tf=i})(Jd),Pd(new jc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Ss(new UL(r.getProvider("auth-internal")),new $L(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new i0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),xl(KT,QT,e),xl(KT,QT,"esm2017")})();const KF={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},m4=rR(KF),O_=NL(m4),Ot=NF(m4),y4=V.createContext();function QF({children:n}){const[e,t]=V.useState(null),[r,i]=V.useState(!0);return V.useEffect(()=>{const a=E7(O_,s=>{t(s),i(!1)});return()=>a()},[]),x.jsx(y4.Provider,{value:{user:e,loading:r},children:n})}function hr(){return V.useContext(y4)}function ZF(){const[n,e]=V.useState(""),[t,r]=V.useState(""),[i,a]=V.useState(""),[s,o]=V.useState(!1),c=b0(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await _7(O_,n,t),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return x.jsxs(de,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[x.jsx(se,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),x.jsx(Pt,{label:"メールアドレス",type:"email",value:n,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),x.jsx(Pt,{label:"パスワード",type:"password",value:t,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&x.jsx(se,{color:"error",children:i}),x.jsx(st,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"ログイン中...":"ログイン"})]})}function JF(){const[n,e]=V.useState(""),[t,r]=V.useState(""),[i,a]=V.useState(""),[s,o]=V.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await w7(O_,n,t)}catch(f){a(f.message)}finally{o(!1)}}};return x.jsxs(de,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[x.jsx(se,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),x.jsx(Pt,{label:"メールアドレス",type:"email",value:n,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),x.jsx(Pt,{label:"パスワード",type:"password",value:t,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&x.jsx(se,{color:"error",children:i}),x.jsx(st,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"登録中...":"新規登録"})]})}const yt={TSUNDOKU:"tsundoku",READING:"reading",RE_READING:"re-reading",FINISHED:"finished"},M1={[yt.TSUNDOKU]:"積読",[yt.READING]:"読書中",[yt.RE_READING]:"再読中",[yt.FINISHED]:"読了"},QC={[yt.TSUNDOKU]:"default",[yt.READING]:"primary",[yt.RE_READING]:"secondary",[yt.FINISHED]:"success"},cr=yt.READING,v4=[yt.TSUNDOKU,yt.READING,yt.RE_READING,yt.FINISHED],Kn={ALL:"all",TSUNDOKU:yt.TSUNDOKU,READING:yt.READING,RE_READING:yt.RE_READING,FINISHED:yt.FINISHED},cd={[Kn.ALL]:"すべて",[Kn.TSUNDOKU]:"積読",[Kn.READING]:"読書中",[Kn.RE_READING]:"再読中",[Kn.FINISHED]:"読了"},O1=n=>v4.includes(n),yo=n=>M1[n]||M1[cr],ls=n=>QC[n]||QC[cr];function ej({book:n,onClick:e,testId:t}){return x.jsx(Fn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:e,"data-testid":t||`book-card-${n.id}`,children:x.jsx(jn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:x.jsxs(de,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&x.jsx(q8,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),x.jsxs(de,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[x.jsx(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||"タイトル未設定"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||"著者未設定"}),x.jsx(de,{sx:{mb:1},children:x.jsx(Cn,{label:yo(n.status||cr),color:ls(n.status||cr),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(n.publisher||n.publishedDate)&&x.jsxs(se,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&"•"," ",n.publishedDate]}),x.jsx(de,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((r,i)=>x.jsx(Cn,{label:r,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},i)):x.jsx(se,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),x.jsxs(se,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",yo(n.status||cr)]})]})]})})})}const Fm=({title:n,subtitle:e,children:t})=>x.jsxs(da,{elevation:0,"data-testid":"page-header",sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[x.jsxs(de,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[x.jsx(se,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:n}),e&&x.jsx(se,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:e}),t&&x.jsx(de,{sx:{mt:2},children:t})]}),x.jsx(de,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),di=Pi.createContext({setGlobalError:()=>{}}),tj=({open:n,message:e,onClose:t})=>x.jsxs(Ba,{open:n,onClose:t,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[x.jsx(bs,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),x.jsx(Va,{children:x.jsx(ao,{severity:"error",sx:{mb:2},children:e})}),x.jsx(Fa,{sx:{justifyContent:"center",pb:2},children:x.jsx(st,{onClick:t,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]}),nj=({children:n})=>{const[e,t]=V.useState(null),r=a=>{t(a)},i=()=>{t(null)};return x.jsxs(di.Provider,{value:{setGlobalError:r},children:[n,e&&x.jsx(tj,{open:!!e,message:e,onClose:i})]})};function gh(n){return n?(t=>t.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(n).toLowerCase():""}const rj=()=>{try{if(typeof Pi>"u"||!Pi.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:Kn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(I){return console.warn("React context not available in useBookList:",I),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:n}=hr(),e=V.useContext(di),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState([]),[a,s]=V.useState(!0),[o,c]=V.useState(null),[d,f]=V.useState(Kn.READING),[p,g]=V.useState(""),y=V.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null),console.log("=== useBookList fetchBooks START ===");const I=Hn(Br(Ot,"books"),Sn("userId","==",n.uid),u0("updatedAt","desc"));console.log("=== useBookList getDocs START ===");const O=await lr(I);console.log("=== useBookList getDocs END ===");const N=O.docs.map(M=>({id:M.id,...M.data()}));console.log("=== useBookList setAllBooks START ==="),i(N),console.log("=== useBookList setAllBooks END ===")}catch(I){console.error("Error fetching books:",I),t("書籍一覧の取得に失敗しました。"),c("書籍一覧の取得に失敗しました。")}finally{console.log("=== useBookList setLoading false ==="),s(!1)}},[n,t]),v=V.useCallback((I,O)=>{f(O)},[]),b=V.useCallback(I=>{g(I.target.value)},[]),A=V.useCallback(()=>{g("")},[]),E=V.useCallback(()=>{f(Kn.READING)},[]),T=r.filter(I=>{if(d!==Kn.ALL&&(I.status||cr)!==d)return!1;if(!p.trim())return!0;const O=gh(p);return I.title&&gh(I.title).includes(O)||I.author&&gh(I.author).includes(O)||Array.isArray(I.tags)&&I.tags.some(N=>gh(N).includes(O))}),C={total:r.length,tsundoku:r.filter(I=>(I.status||cr)===yt.TSUNDOKU).length,reading:r.filter(I=>(I.status||cr)===yt.READING).length,reReading:r.filter(I=>(I.status||cr)===yt.RE_READING).length,finished:r.filter(I=>(I.status||cr)===yt.FINISHED).length,filtered:T.length};return V.useEffect(()=>{y()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:T,stats:C,loading:a,error:o,filter:d,searchText:p,fetchBooks:y,handleFilterChange:v,handleSearchChange:b,clearSearch:A,clearFilter:E,normalizeTag:gh}};var ij={};const z2=()=>typeof process<"u"&&ij?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,aj=()=>z2()?"/project-01-bookmemo":"",Sa=n=>{const e=aj(),t=n.startsWith("/")?n:`/${n}`;return`${e}${t}`},Ic={MANIFEST:()=>Sa("/manifest.webmanifest"),SW_JS:()=>Sa("/sw.js"),VITE_SVG:()=>Sa("/vite.svg"),PAPER_TEXTURE:()=>Sa("/paper-texture.jpg"),ICON_192:()=>Sa("/icons/icon-192x192.png"),ICON_512:()=>Sa("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>Sa("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>Sa("/icons/apple-touch-icon-512x512.png"),ROOT:()=>Sa("/"),ADD:()=>Sa("/add"),SEARCH:()=>Sa("/search"),IS_PRODUCTION:z2,IS_DEVELOPMENT:()=>!z2()},P_=()=>{try{if(typeof Pi>"u"||!Pi.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(D){return console.warn("React context not available in usePWA:",D),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Ic.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,t]=V.useState(navigator.onLine),[r,i]=V.useState(null),[a,s]=V.useState(null),[o,c]=V.useState(!1),[d,f]=V.useState(!1),[p,g]=V.useState(0),[y,v]=V.useState(null);V.useEffect(()=>{const D=()=>t(!0),B=()=>t(!1);return window.addEventListener("online",D),window.addEventListener("offline",B),()=>{window.removeEventListener("online",D),window.removeEventListener("offline",B)}},[]),V.useEffect(()=>{if(typeof window>"u")return;const D=()=>{g(L=>L+1)},B=["click","scroll","keydown","touchstart"];return B.forEach(L=>{window.addEventListener(L,D,{passive:!0})}),()=>{B.forEach(L=>{window.removeEventListener(L,D)})}},[]),V.useEffect(()=>{if(typeof localStorage>"u")return;const D=Date.now(),B=localStorage.getItem("bookmemo_last_visit");if(B){if(D-parseInt(B)>1440*60*1e3){const P=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",P.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",D.toString()),v(D)},[]);const b=V.useCallback(async()=>{if(Ic.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const D=Ic.SW_JS(),B=await navigator.serviceWorker.register(D);return i(B),console.log("Service Worker registered:",B),B.addEventListener("updatefound",()=>{const L=B.installing;L&&L.addEventListener("statechange",()=>{L.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),B}catch(D){return console.error("Service Worker registration failed:",D),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);V.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const D=P=>{P.preventDefault(),s(P),c(!0)},B=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",D),window.addEventListener("appinstalled",B),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",D),window.removeEventListener("appinstalled",B)}},[]);const A=V.useCallback(async()=>{if(a){a.prompt();const{outcome:D}=await a.userChoice;console.log(D==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),E=V.useCallback(()=>{if(d||!o)return!1;const D=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),B=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return D>=1&&p>=5&&B<3},[d,o,p]),T=V.useCallback(()=>{if(d)return!1;const D=/iPad|iPhone|iPod/.test(navigator.userAgent),B=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return D&&B},[d]),C=V.useCallback(()=>{if(typeof localStorage>"u")return;const D=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",D.toString())},[]),I=V.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(D){return console.warn("Notification permission request failed:",D),"denied"}},[]),O=V.useCallback((D,B={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const L=Ic.ICON_192();return new Notification(D,{icon:L,badge:L,...B})}catch(L){return console.warn("Notification send failed:",L),null}},[]),N=V.useCallback(async()=>{r&&await r.update()},[r]),M=V.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const D=await caches.keys();await Promise.all(D.map(B=>caches.delete(B)))}catch(D){console.warn("Cache clear failed:",D)}},[]),R=V.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:y,shouldShowInstallPrompt:E(),shouldShowManualInstallGuide:T(),registerServiceWorker:b,installApp:A,requestNotificationPermission:I,sendNotification:O,checkForUpdates:N,clearCache:M,reloadApp:R,recordInstallPromptDismiss:C}};function sj(){const n=b0(),{isInstallable:e,isInstalled:t,installApp:r,shouldShowManualInstallGuide:i}=P_(),{filteredBooks:a,loading:s,error:o,filter:c,searchText:d,handleFilterChange:f,handleSearchChange:p}=rj(),g=b=>{n(`/book/${b}`)},y=async()=>{try{await r()}catch(b){console.error("Installation failed:",b)}},v=()=>{const b=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);b&&A&&alert(`📱 BookMemoをホーム画面に追加する手順：

1. 共有ボタンをタップ
   Safariの下部にある「共有」ボタン（□↑）をタップ

2. 「ホーム画面に追加」を選択
   共有メニューから「ホーム画面に追加」を選択

3. 追加を確認
   「追加」をタップしてホーム画面に追加

これでBookMemoをアプリとして使用できます！`)};return s?x.jsx("div",{children:"Loading..."}):x.jsxs(de,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[x.jsx(Fm,{title:"本一覧",subtitle:"あなたの読書ライブラリ","data-testid":"book-list-header"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,flexWrap:"wrap",mb:2},children:[e&&!t&&x.jsx(cT,{title:"BookMemoをアプリとしてインストール",children:x.jsx(Qr,{color:"primary",onClick:y,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},"data-testid":"pwa-install-header-button",children:x.jsx(c1,{})})}),i&&!t&&x.jsx(cT,{title:"iPhoneでホーム画面に追加する手順を表示",children:x.jsx(Qr,{color:"secondary",onClick:v,sx:{backgroundColor:"secondary.main",color:"white","&:hover":{backgroundColor:"secondary.dark"}},"data-testid":"pwa-manual-install-button",children:x.jsx(c1,{})})})]}),x.jsx(de,{sx:{display:"flex",justifyContent:"center",mb:3},children:x.jsx(st,{variant:"contained","data-testid":"book-add-button",onClick:()=>n("/add"),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1,sm:1.5},px:{xs:2,sm:3}},children:"本を追加"})}),x.jsx(Pt,{label:"検索（タイトル・著者・タグ）",value:d,onChange:p,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:x.jsxs(fm,{value:c,onChange:f,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[x.jsx(Ma,{label:cd[Kn.ALL],value:Kn.ALL}),x.jsx(Ma,{label:cd[Kn.TSUNDOKU],value:Kn.TSUNDOKU}),x.jsx(Ma,{label:cd[Kn.READING],value:Kn.READING}),x.jsx(Ma,{label:cd[Kn.RE_READING],value:Kn.RE_READING}),x.jsx(Ma,{label:cd[Kn.FINISHED],value:Kn.FINISHED})]})}),a.length===0?x.jsx(de,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:x.jsx(se,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):x.jsx(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:a.map(b=>x.jsx(de,{"data-testid":`book-grid-item-${b.id}`,children:x.jsx(ej,{book:b,onClick:()=>g(b.id),testId:`book-list-card-${b.id}`})},b.id))})]})]})}const vo=(n,e)=>{const[t,r]=V.useState([]),[i,a]=V.useState(!1),s=V.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=n==="book"?"bookTagHistory":"memoTagHistory",f=Hn(Br(Ot,"users",e.uid,d),u0("updatedAt","desc")),p=await lr(f),g=[];p.forEach(y=>{const v=y.data();v.tag&&g.push(v.tag)}),r(g)}catch(d){throw console.error("タグ履歴の取得に失敗しました:",d),d}finally{a(!1)}},[e==null?void 0:e.uid,n]),o=V.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=n==="book"?"bookTagHistory":"memoTagHistory",p=mo(Ot,"users",e.uid,f,d);await KC(p,{tag:d,updatedAt:$i()})}catch(f){throw console.error("タグ履歴の保存に失敗しました:",f),f}},[e==null?void 0:e.uid,n]),c=V.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=n==="book"?"bookTagHistory":"memoTagHistory",y=mo(Ot,"users",e.uid,g,p);return KC(y,{tag:p,updatedAt:$i()})});await Promise.all(f)}catch(f){throw console.error("タグ履歴の一括保存に失敗しました:",f),f}},[e==null?void 0:e.uid,n]);return{tagOptions:t,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},oj=()=>{const{user:n}=hr(),e=V.useContext(di),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),[a,s]=V.useState(null),{saveTagsToHistory:o}=vo("book",n),c=V.useCallback(async f=>{if(!n)throw new Error("ユーザーが認証されていません。");if(!f.title)throw new Error("タイトルは必須です。");try{i(!0),s(null);let p=(f.tags||[]).filter(y=>y&&y.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(y=>y&&y.trim()!=="");const g=await R1(Br(Ot,"books"),{userId:n.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:"reading",createdAt:$i(),updatedAt:$i()});return p.length>0&&await o(p),g.id}catch(p){console.error("Error adding book:",p);const g="書籍の追加に失敗しました: "+p.message;throw t(g),s(g),p}finally{i(!1)}},[n,t,o]),d=V.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},lj=()=>{const{user:n}=hr(),e=V.useContext(di),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),[a,s]=V.useState(""),[o,c]=V.useState(!1),d=V.useCallback(async g=>{if(!g||!g.trim())return s("ISBNを入力してください"),null;s(""),i(!0),c(!0);try{const y=g.trim(),b=(await pT.get(`https://api.openbd.jp/v1/get?isbn=${y}`)).data[0];let A="",E="",T="",C="",I="",O=[];if(b&&b.summary&&(A=b.summary.title||"",E=b.summary.author||"",T=b.summary.publisher||"",C=b.summary.pubdate||"",I=b.summary.cover||"",b.summary.subject&&O.push(b.summary.subject),b.summary.ndc&&O.push(b.summary.ndc)),!I||!A)try{const M=(await pT.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${y}`)).data;if(M.items&&M.items.length>0){const R=M.items[0].volumeInfo;A||(A=R.title||""),E||(E=R.authors?R.authors.join(", "):""),T||(T=R.publisher||""),C||(C=R.publishedDate||""),!I&&R.imageLinks&&(I=R.imageLinks.thumbnail||R.imageLinks.smallThumbnail||""),R.categories&&R.categories.length>0&&(O=[...O,...R.categories])}}catch(N){console.error("Failed to fetch from Google Books API",N)}return A?{isbn:y,title:A,author:E,publisher:T,publishedDate:C,coverImageUrl:I,tags:Array.from(new Set(O))}:(t("書籍情報が見つかりませんでした"),null)}catch{const v="書籍情報の取得に失敗しました";return t(v),s(v),null}finally{i(!1)}},[t]),f=V.useCallback(()=>{s(null)},[]),p=V.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}};function cj({isbn:n="",onBookAdded:e}){const[t,r]=V.useState(n),[i,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[f,p]=V.useState(""),[g,y]=V.useState(""),[v,b]=V.useState([]),[A,E]=V.useState(""),{user:T}=hr(),{tagOptions:C,fetchTagHistory:I}=vo("book",T),{addBook:O,loading:N,error:M}=oj(),{searchBookByIsbn:R,loading:D,error:B}=lj();V.useEffect(()=>{I()},[I]),V.useEffect(()=>{n&&n!==t&&(console.log("[BookForm] useEffect: propsのisbnが変化:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",n),L(n)))},[n,t]);const L=async F=>{const q=F!==void 0?F:t;if(!q||!q.trim())return;const X=await R(q);X&&(a(X.title),o(X.author),d(X.publisher),p(X.publishedDate),y(X.coverImageUrl),b(X.tags))},P=async F=>{if(F.preventDefault(),!i)return;const X=await O({isbn:t,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:v,inputTagValue:A});X&&e(X)};return x.jsxs(de,{component:"form",onSubmit:P,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[x.jsx(de,{children:x.jsx(Pt,{label:"ISBN",value:t,onChange:F=>r(F.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(st,{onClick:()=>L(),variant:"outlined",disabled:D,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:D?"取得中...":"ISBNで書籍情報取得"})})]}),g&&x.jsx(de,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:x.jsx("img",{src:g,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[x.jsx(de,{children:x.jsx(Pt,{label:"タイトル",value:i,onChange:F=>a(F.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(Pt,{label:"著者",value:s,onChange:F=>o(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(Pt,{label:"出版社",value:c,onChange:F=>d(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(Pt,{label:"出版日",value:f,onChange:F=>p(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),x.jsx(de,{sx:{mt:{xs:1.5,sm:2}},children:x.jsx(uo,{multiple:!0,freeSolo:!0,options:C,value:v,getOptionLabel:F=>typeof F=="string"?F:F.inputValue||F.tag||"",onChange:(F,q)=>{const X=(q||[]).map(G=>{if(typeof G=="string")return G;if(G&&typeof G=="object"){if("inputValue"in G&&G.inputValue)return G.inputValue;if("tag"in G&&G.tag)return G.tag}return""}).filter(Boolean);b(X)},inputValue:A,onInputChange:(F,q)=>E(q),renderInput:F=>x.jsx(Pt,{...F,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...F.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),(B||M)&&x.jsx(se,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:B||M}),x.jsx(st,{type:"submit",variant:"contained",disabled:N,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:N?"追加中...":"本を追加"})]})}function uj(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function dj(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var fj=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hj=function(n){fj(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),uj(a,i.prototype),dj(a),a}return e}(Error),pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(n){pj(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(hj),gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ia=function(n){gj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(ki),mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nt=function(n){mj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(ki),yj=function(){function n(e){if(this.binarizer=e,e===null)throw new nt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lr=function(n){vj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(ki),xj=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),wn=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),k_=function(n){wj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(ki),_j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZC=function(n){_j(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(k_),bj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Er=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new nt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new ZC(t);if(r>e)throw new ZC(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=bj(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return wn.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),St=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Vr=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);wn.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var o=i*32+St.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var o=i*32+St.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new nt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:t&31,d=(2<<c)-(1<<o);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new nt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:t&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new nt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new nt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Er.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Er.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),$2;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})($2||($2={}));const Mn=$2;var Aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Be=function(n){Aj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(ki),Ej=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},an;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(an||(an={}));var Ar=function(){function n(e,t,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];n.VALUES_TO_ECI.set(p,this)}try{for(var g=Ej(s),y=g.next();!y.done;y=g.next()){var v=y.value;n.NAME_TO_ECI.set(v,this)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Be("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new Be("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new Be("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(an.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(an.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(an.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(an.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(an.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(an.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(an.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(an.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(an.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(an.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(an.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(an.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(an.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(an.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(an.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(an.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(an.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(an.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(an.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(an.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(an.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(an.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(an.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(an.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(an.Big5,28,"Big5"),n.GB18030=new n(an.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(an.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Sj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),i1=function(n){Sj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(ki),ma=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Ar?e:Ar.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Ar.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new i1("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Ar.UTF8)||e.equals(Ar.ISO8859_1)||e.equals(Ar.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),Ft=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ma.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Mn.CHARACTER_SET)!==void 0)return t.get(Mn.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,y=0,v=0,b=0,A=0,E=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<r&&(i||a||s);C++){var I=e[C]&255;s&&(o>0?(I&128)===0?s=!1:o--:(I&128)!==0&&((I&64)===0?s=!1:(o++,(I&32)===0?c++:(o++,(I&16)===0?d++:(o++,(I&8)===0?f++:s=!1))))),i&&(I>127&&I<160?i=!1:I>159&&(I<192||I===215||I===247)&&E++),a&&(p>0?I<64||I===127||I>252?a=!1:p--:I===128||I===160||I>239?a=!1:I>160&&I<224?(g++,v=0,y++,y>b&&(b=y)):I>127?(p++,y=0,v++,v>A&&(A=v)):(y=0,v=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(T||c+d+f>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||A>=3)?n.SHIFT_JIS:i&&a?b===2&&g===2||E*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(t[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,v;switch(g){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(o);break;case"p":v=parseFloat(t[i]).toPrecision(o);break;case"e":v=parseFloat(t[i]).toExponential(o);break;case"x":v=parseInt(t[i]).toString(y||16);break;case"d":v=parseFloat(parseInt(t[i],y||10).toPrecision(o)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(y);for(var b=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";v.length<b;)v=c!==void 0?v+A:A+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return ma.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Ar.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Ar.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Ar.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),_t=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ft.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Ts=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new nt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new nt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new nt("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new nt("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new nt("row lengths do not match");c++}for(var f=new n(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new nt("input matrix dimensions do not match");for(var t=new Vr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new nt("Left and top must be nonnegative");if(i<1||r<1)throw new nt("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new nt("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=t;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Vr(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){wn.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Vr(e),i=new Vr(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,o=-1,c=-1,d=0;d<t;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Er.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Er.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new _t,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xe=function(n){Tj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(ki),Cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ij=function(n){Cj(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Vr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Ts(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=t.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),v=t.getMatrix(),o=0;o<i;o++)for(var b=o*r,p=0;p<r;p++){var g=v[b+p]&255;g<y&&a.set(p,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,o=0;o<r;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=t[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new xe;for(var y=c-1,v=-1,o=c-1;o>a;o--){var b=o-a,p=b*b*(c-o)*(i-t[o]);p>v&&(y=o,v=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(xj),Dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rj=function(n){Dj(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new Ts(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var y=e.cap(p,2,i-3),v=0;v<r;v++){var b=v<<e.BLOCK_SIZE_POWER;b>f&&(b=f);for(var A=e.cap(v,2,r-3),E=0,T=-2;T<=2;T++){var C=o[y+T];E+=C[A-2]+C[A-1]+C[A]+C[A+1]+C[A+2]}var I=E/25;e.thresholdBlock(t,b,g,I,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(t[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(t,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var v=0,b=255,A=0,E=0,T=p*a+y;E<e.BLOCK_SIZE;E++,T+=a){for(var C=0;C<e.BLOCK_SIZE;C++){var I=t[T+C]&255;v+=I,I<b&&(b=I),I>A&&(A=I)}if(A-b>e.MIN_DYNAMIC_RANGE)for(E++,T+=a;E<e.BLOCK_SIZE;E++,T+=a)for(var C=0;C<e.BLOCK_SIZE;C++)v+=t[T+C]&255}var O=v>>e.BLOCK_SIZE_POWER*2;if(A-b<=e.MIN_DYNAMIC_RANGE&&(O=b/2,f>0&&g>0)){var N=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;b<N&&(O=N)}d[f][g]=O}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Ij),jm=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new i1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new i1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new i1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new _t,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},n}(),Mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),N_=function(n){Mj(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(jm),Oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pj=function(n){Oj(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=t.length;o<d;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],v=t[o+2];f=306*g+601*y+117*v+512>>10}s[c]=f}else for(var o=0,c=0,b=t.length;o<b;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],v=t[o+2];f=306*g+601*y+117*v+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new N_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(jm),kj=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),vi=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(n,e||[])).next())})},xi=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Nj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sf=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return vi(this,void 0,void 0,function(){var e,t,r,i,a,s,o,c,d,f,p,g;return xi(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=Nj(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},t.push(f))}catch(v){p={error:v}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return vi(this,void 0,void 0,function(){var e;return xi(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new kj(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return vi(this,void 0,void 0,function(){var t;return xi(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return vi(this,void 0,void 0,function(){return xi(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return vi(this,void 0,void 0,function(){var r,i;return xi(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return vi(this,void 0,void 0,function(){var r;return xi(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return vi(this,void 0,void 0,function(){var r,i;return xi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return vi(this,void 0,void 0,function(){return xi(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return vi(this,void 0,void 0,function(){var i,a;return xi(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return vi(this,void 0,void 0,function(){var i;return xi(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return vi(this,void 0,void 0,function(){var i;return xi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return vi(this,void 0,void 0,function(){var r;return xi(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return vi(this,void 0,void 0,function(){return xi(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Ia("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Ia("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ia("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ia("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Ia("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Ia("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ia("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ia("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ia("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ia("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return vi(this,void 0,void 0,function(){return xi(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return vi(this,void 0,void 0,function(){return xi(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new xe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=t&&g instanceof xe,f=g instanceof Lr||g instanceof Be,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof Lr||c instanceof Be,o=c instanceof xe;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Pj(r,t),a=new Rj(i);return new yj(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),fi=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=wn.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=wn.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);wn.arraycopy(t,0,r,0,t.length),wn.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),G2;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(G2||(G2={}));const Je=G2;var W2;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(W2||(W2={}));const Zr=W2;var Um=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Nh=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new nt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),bl=function(){function n(e,t){if(t.length===0)throw new nt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),wn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=Nh.addOrSubtract(r,s)}return r}r=t[0];for(var o=t.length,c=this.field,i=1;i<o;i++)r=Nh.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;wn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=Nh.addOrSubtract(t[o-s],r[o]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)s[c+f]=Nh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new n(o,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new nt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new nt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=t.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),x4=function(n){Lj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(ki),Bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mi=function(n){Bj(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=t,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new bl(a,Int32Array.from([0])),a.one=new bl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new nt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new bl(this,i)},e.prototype.inverse=function(t){if(t===0)throw new x4;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+St.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Nh),Vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ig=function(n){Vj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(ki),Fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),j0=function(n){Fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(ki),Hm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new bl(r,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new bl(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),p=f[0],g=f[1],y=this.findErrorLocations(p),v=this.findErrorMagnitudes(g,y),o=0;o<y.length;o++){var b=e.length-1-r.log(y[o]);if(b<0)throw new Ig("Bad error location");e[b]=Mi.addOrSubtract(e[b],v[o])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new Ig("r_{i-1} was zero");o=f;for(var g=a.getZero(),y=s.getCoefficient(s.getDegree()),v=a.inverse(y);o.getDegree()>=s.getDegree()&&!o.isZero();){var b=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),v);g=g.addOrSubtract(a.buildMonomial(b,A)),o=o.addOrSubtract(s.multiplyByMonomial(b,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new j0("Division algorithm failed to reduce polynomial?")}var E=d.getCoefficient(0);if(E===0)throw new Ig("sigmaTilde(0) was zero");var T=a.inverse(E),C=d.multiplyScalar(T),I=o.multiplyScalar(T);return[C,I]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new Ig("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(t[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(t[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},n}(),Yr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Yr||(Yr={}));var JC=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),o=new Um(a,s,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Yr.UPPER,i=Yr.UPPER,a="",s=0;s<t;)if(i===Yr.BINARY){if(t-s<5)break;var o=n.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=Ft.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===Yr.DIGIT?4:5;if(t-s<f)break;var d=n.readCode(e,s,f);s+=f;var p=n.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Yr.LOWER;case"P":return Yr.PUNCT;case"M":return Yr.MIXED;case"D":return Yr.DIGIT;case"B":return Yr.BINARY;case"U":default:return Yr.UPPER}},n.getCharacter=function(e,t){switch(e){case Yr.UPPER:return n.UPPER_TABLE[t];case Yr.LOWER:return n.LOWER_TABLE[t];case Yr.MIXED:return n.MIXED_TABLE[t];case Yr.PUNCT:return n.PUNCT_TABLE[t];case Yr.DIGIT:return n.DIGIT_TABLE[t];default:throw new j0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Mi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Mi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Mi.AZTEC_DATA_10):(r=12,t=Mi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new Be;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=n.readCode(e,s,r);try{var d=new Hm(t);d.decode(o,a-i)}catch(A){throw new Be(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new Be;(g===1||g===f-1)&&p++}for(var y=new Array(i*r-p),v=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)y.fill(g>1,v,v+r-1),v+=r-1;else for(var b=r-1;b>=0;--b)y[v++]=(g&1<<b)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*St.truncDivision(St.truncDivision(i,2)-1,15),d=i/2,f=St.truncDivision(c,2),o=0;o<d;o++){var p=o+St.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var y=(r-o)*4+(t?9:12),v=o*2,b=i-1-v,A=0;A<y;A++)for(var E=A*2,T=0;T<2;T++)s[g+E+T]=e.get(a[v+T],a[v+A]),s[g+2*y+E+T]=e.get(a[v+A],a[b-T]),s[g+4*y+E+T]=e.get(a[b-T],a[b-A]),s[g+6*y+E+T]=e.get(a[b-A],a[v+T]);g+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),zt=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Y2=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),qe=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Y2.floatToIntBits(this.x)+Y2.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=t&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},n.distance=function(e,t){return zt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),L_=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uj=function(n){jj(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(L_),q2=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new xe}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,y=this.height;s;){s=!1;for(var v=!0;(v||!c)&&t<g;)v=this.containsBlackPoint(r,i,t,!1),v?(t++,s=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var b=!0;(b||!d)&&i<y;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,s=!0,d=!0):d||i++;if(i>=y){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var E=!0;(E||!p)&&r>=0;)E=this.containsBlackPoint(e,t,r,!0),E?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var T=t-e,C=null,I=1;C===null&&I<T;I++)C=this.getBlackPointOnSegment(e,i-I,e+I,i);if(C==null)throw new xe;for(var O=null,I=1;O===null&&I<T;I++)O=this.getBlackPointOnSegment(e,r+I,e+I,r);if(O==null)throw new xe;for(var N=null,I=1;N===null&&I<T;I++)N=this.getBlackPointOnSegment(t,r+I,t-I,r);if(N==null)throw new xe;for(var M=null,I=1;M===null&&I<T;I++)M=this.getBlackPointOnSegment(t,i-I,t-I,i);if(M==null)throw new xe;return this.centerEdges(M,C,N,O)}else throw new xe},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=zt.round(zt.distance(e,t,r,i)),s=(r-e)/a,o=(i-t)/a,c=this.image,d=0;d<a;d++){var f=zt.round(e+d*s),p=zt.round(t+d*o);if(c.get(f,p))return new qe(f,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),o=t.getX(),c=t.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),y=n.CORR;return a<this.width/2?[new qe(p-y,g+y),new qe(o+y,c+y),new qe(d-y,f-y),new qe(a+y,s-y)]:[new qe(p+y,g+y),new qe(o+y,c-y),new qe(d-y,f+y),new qe(a-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var o=e;o<=t;o++)if(a.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),eI=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new xe;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new xe;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}},n}(),w4=function(){function n(e,t,r,i,a,s,o,c,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,o,c,d,f,p,g,y,v,b,A){var E=n.quadrilateralToSquare(e,t,r,i,a,s,o,c),T=n.squareToQuadrilateral(d,f,p,g,y,v,b,A);return T.times(E)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<t;g+=2){var y=e[g],v=e[g+1],b=a*y+c*v+p;e[g]=(r*y+s*v+d)/b,e[g+1]=(i*y+o*v+f)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var v=e[y],b=t[y],A=a*v+c*b+p;e[y]=(r*v+s*b+d)/A,t[y]=(i*v+o*b+f)/A}},n.squareToQuadrilateral=function(e,t,r,i,a,s,o,c){var d=e-r+a-o,f=t-i+s-c;if(d===0&&f===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var p=r-a,g=o-a,y=i-s,v=c-s,b=p*v-g*y,A=(d*v-g*f)/b,E=(p*f-d*y)/b;return new n(r-e+A*r,o-e+E*o,e,i-t+A*i,c-t+E*c,t,A,E,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,o,c){return n.squareToQuadrilateral(e,t,r,i,a,s,o,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zj=function(n){Hj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,o,c,d,f,p,g,y,v,b,A,E,T,C,I){var O=w4.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,y,v,b,A,E,T,C,I);return this.sampleGridWithTransform(t,r,i,O)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new xe;for(var s=new Ts(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),eI.checkAndNudgePoints(t,o);try{for(var p=0;p<d;p+=2)t.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new xe}}return s},e}(eI),B_=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new zj,n}(),Ci=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new qe(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),$j=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new Uj(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new xe;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,o){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(St.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new xe},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new Hm(Mi.AZTEC_PARAM);c.decode(s,a)}catch{throw new xe}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}t=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new xe;this.compact=this.nbCenterLayers===5;var g=new qe(t.getX()+.5,t.getY()-.5),y=new qe(r.getX()+.5,r.getY()+.5),v=new qe(i.getX()-.5,i.getY()+.5),b=new qe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,v,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new q2(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Ci(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ci(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ci(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ci(s-7,o-7),!1,-1,-1).toResultPoint()}var c=zt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=zt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new q2(this.image,15,c,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Ci(c+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ci(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ci(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ci(c-7,d-7),!1,-1,-1).toResultPoint()}return c=zt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=zt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ci(c,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=B_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,o=e.getX(),c=e.getY(),d=s*(t.getX()-e.getX())/a,f=s*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(zt.round(o+p*d),zt.round(c+p*f))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Ci(e.getX()-a,e.getY()+a),t=new Ci(t.getX()-a,t.getY()-a),r=new Ci(r.getX()+a,r.getY()-a),i=new Ci(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get(zt.round(o),zt.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Ci(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new qe(o+i*a,c+i*s),f=new qe(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new qe(o+i*a,c+i*s),g=new qe(o-i*a,c-i*s),y=[d,p,f,g];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=zt.round(e.getX()),r=zt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return zt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return zt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(St.truncDivision(this.nbLayers-4,8)+1)+15},n}(),X2=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new $j(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new JC().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new JC().decode(o)}catch(p){throw r??p}var c=new fi(s.getText(),s.getRawBytes(),s.getNumBits(),a,Je.AZTEC,wn.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(Zr.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(Zr.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Mn.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Gj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new X2,t)||this}return e})(sf);var Sr=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Mn.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(Zr.ORIENTATION)===!0&&(o=o+s.get(Zr.ORIENTATION)%360),a.putMetadata(Zr.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new qe(d-c[f].getY()-1,c[f].getX());return a}else throw new xe}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Vr(r),s=t&&t.get(Mn.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,y=d+o*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var v=function(T){if(T===1&&(a.reverse(),t&&t.get(Mn.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;t.forEach(function(N,M){return C.set(M,N)}),C.delete(Mn.NEED_RESULT_POINT_CALLBACK),t=C}try{var I=b.decodeRow(y,a,t);if(T===1){I.putMetadata(Zr.ORIENTATION,180);var O=I.getResultPoints();O!==null&&(O[0]=new qe(r-O[0].getX()-1,O[0].getY()),O[1]=new qe(r-O[1].getX()-1,O[1].getY()))}return{value:I}}catch{}},b=this,A=0;A<2;A++){var E=v(A);if(typeof E=="object")return E.value}}throw new xe},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new xe;for(var o=!e.get(t),c=0,d=t;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new xe},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new xe;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return Number.POSITIVE_INFINITY;d+=y}return d/a},n}(),Wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tI=function(n){Wj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(t.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var v=Sr.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);v<p&&(p=v,g=y)}if(g>=0&&t.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new xe},e.decodeCode=function(t,r,i){Sr.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new xe},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Mn.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new Be}for(var p=!1,g=!1,y="",v=s[0],b=s[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,T=0,C=o,I=0,O=!0,N=!1,M=!1;!p;){var R=g;switch(g=!1,E=T,T=e.decodeCode(r,A,b),d[c++]=T,T!==e.CODE_STOP&&(O=!0),T!==e.CODE_STOP&&(I++,C+=I*T),v=b,b+=A.reduce(function(Y,Q){return Y+Q},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Be}switch(f){case e.CODE_CODE_A:if(T<64)M===N?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),M=!1;else if(T<96)M===N?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),M=!1;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!N&&M?(N=!0,M=!1):N&&M?(N=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(T<96)M===N?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),M=!1;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!N&&M?(N=!0,M=!1):N&&M?(N=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}R&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=b-v;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-v)/2),!1))throw new xe;if(C-=I*E,C%103!==E)throw new Lr;var B=y.length;if(B===0)throw new xe;B>0&&O&&(f===e.CODE_CODE_C?y=y.substring(0,B-2):y=y.substring(0,B-1));for(var L=(s[1]+s[0])/2,P=v+D/2,F=d.length,q=new Uint8Array(F),X=0;X<F;X++)q[X]=d[X];var G=[new qe(L,t),new qe(P,t)];return new fi(y,q,0,G,Je.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Sr),Yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nI=function(n){Yj(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),y,v;do{e.recordPattern(r,p,d);var b=e.toNarrowWidePattern(d);if(b<0)throw new xe;y=e.patternToChar(b),this.decodeRowResult+=y,v=p;try{for(var A=(a=void 0,Dx(d)),E=A.next();!E.done;E=A.next()){var T=E.value;p+=T}}catch(F){a={error:F}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var I=Dx(d),O=I.next();!O.done;O=I.next()){var T=O.value;C+=T}}catch(F){o={error:F}}finally{try{O&&!O.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}var N=p-v-C;if(p!==g&&N*2<C)throw new xe;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,R=0,D=0;D<M;D++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(R%43))throw new Lr;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new xe;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var L=(f[1]+f[0])/2,P=v+C/2;return new fi(B,null,0,[new qe(L,t),new qe(P,t)],Je.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(t.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new xe},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,Dx(t)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(b){r={error:b}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,y=0,v=0;v<a;v++){var p=t[v];p>s&&(y|=1<<a-1-v,o++,g+=p)}if(o===3){for(var v=0;v<a&&o>0;v++){var p=t[v];if(p>s&&(o--,p*2>=g))return-1}return y}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new xe},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Be;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Be;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new Be;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Be;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Sr),qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rI=function(n){qj(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,v;do{e.recordPattern(r,f,g);var b=this.toPattern(g);if(b<0)throw new xe;y=this.patternToChar(b),this.decodeRowResult+=y,v=f;try{for(var A=(a=void 0,Rx(g)),E=A.next();!E.done;E=A.next()){var T=E.value;f+=T}}catch(D){a={error:D}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var I=Rx(g),O=I.next();!O.done;O=I.next()){var T=O.value;C+=T}}catch(D){o={error:D}}finally{try{O&&!O.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new xe;if(this.decodeRowResult.length<2)throw new xe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var N=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,R=v+C/2;return new fi(N,null,0,[new qe(M,t),new qe(R,t)],Je.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(t.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new xe},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Rx(t),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(v){r={error:v}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=t.length,p=0;p<f;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new xe},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new Be;var o=t.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Be;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Be;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new Be;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Be;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Lr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Sr),Xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iI=function(n){Xj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new _t;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(Mn.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,y=!1,v=0;try{for(var b=Kj(p),A=b.next();!A.done;A=b.next()){var E=A.value;if(g===E){y=!0;break}E>v&&(v=E)}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!y&&g>v&&(y=!0),!y)throw new Be;var T=[new qe(o[1],t),new qe(c[0],t)],C=new fi(f,null,0,T,Je.ITF,new Date().getTime());return C},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Sr.recordPattern(t,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new xe},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new xe;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof xe&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(t.get(p)!==c)s[d]++;else{if(d===a-1){if(Sr.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],wn.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new xe},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Sr.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new xe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Sr),Qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fd=function(n){Qj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=t.isRange(c,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var o=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(t.get(g)!==p)s[c]++;else{if(c===f-1){if(Sr.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var y=s.slice(2,s.length),v=0;v<c-1;v++)s[v]=y[v];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new xe},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Sr.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new xe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Sr),Zj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new qe((r[0]+r[1])/2,e),new qe(a,e)],d=new fi(s,null,0,c,Je.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<5&&c<o;f++){var p=Fd.decodeDigit(e,s,c,Fd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,Zj(s)),y=g.next();!y.done;y=g.next()){var v=y.value;c+=v}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new xe;var b=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==b)throw new xe;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new xe},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Zr.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),eU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tU=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new qe((r[0]+r[1])/2,e),new qe(a,e)],d=new fi(s,null,0,c,Je.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<2&&c<o;f++){var p=Fd.decodeDigit(e,s,c,Fd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,eU(s)),y=g.next();!y.done;y=g.next()){var v=y.value;c+=v}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new xe;if(parseInt(r.toString())%4!==d)throw new xe;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Zr.ISSUE_NUMBER,parseInt(e)]])},n}(),nU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Fd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new Jj;return a.decodeRow(e,t,i)}catch{var s=new tU;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),rU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_r=function(n){rU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Mn.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new qe((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new qe(d,t);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var y=new qe((g[0]+g[1])/2,t);s.foundPossibleResultPoint(y)}var v=g[1],b=v+(v-g[0]);if(b>=r.getSize()||!r.isRange(v,b,!1))throw new xe;var A=f.toString();if(A.length<8)throw new Be;if(!e.checkChecksum(A))throw new Lr;var E=(a[1]+a[0])/2,T=(g[1]+g[0])/2,C=this.getBarcodeFormat(),I=[new qe(E,t),new qe(T,t)],O=new fi(A,null,0,I,C,new Date().getTime()),N=0;try{var M=nU.decodeRow(t,r,g[1]);O.putMetadata(Zr.UPC_EAN_EXTENSION,M.getText()),O.putAllMetadata(M.getResultMetadata()),O.addResultPoints(M.getResultPoints()),N=M.getText().length}catch{}var R=i==null?null:i.get(Mn.ALLOWED_EAN_EXTENSIONS);if(R!=null){var D=!1;for(var B in R)if(N.toString()===B){D=!0;break}if(!D)throw new xe}return C===Je.EAN_13||Je.UPC_A,O},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Fd),iU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K2=function(n){iU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0,y=0;y<6&&p<f;y++){var v=_r.decodeDigit(t,d,p,_r.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var b=(a=void 0,aI(d)),A=b.next();!A.done;A=b.next()){var E=A.value;p+=E}}catch(O){a={error:O}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}v>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var T=_r.findGuardPattern(t,p,!0,_r.MIDDLE_PATTERN,new Int32Array(_r.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var y=0;y<6&&p<f;y++){var v=_r.decodeDigit(t,d,p,_r.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var C=(o=void 0,aI(d)),I=C.next();!I.done;I=C.next()){var E=I.value;p+=E}}catch(M){o={error:M}}finally{try{I&&!I.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Je.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new xe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(_r),aU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oI=function(n){aU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0;g<4&&p<f;g++){var y=_r.decodeDigit(t,d,p,_r.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var v=(a=void 0,sI(d)),b=v.next();!b.done;b=v.next()){var A=b.value;p+=A}}catch(I){a={error:I}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}var E=_r.findGuardPattern(t,p,!0,_r.MIDDLE_PATTERN,new Int32Array(_r.MIDDLE_PATTERN.length).fill(0));p=E[1];for(var g=0;g<4&&p<f;g++){var y=_r.decodeDigit(t,d,p,_r.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(o=void 0,sI(d)),C=T.next();!C.done;C=T.next()){var A=C.value;p+=A}}catch(N){o={error:N}}finally{try{C&&!C.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Je.EAN_8},e}(_r),sU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lI=function(n){sU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new K2,t}return e.prototype.getBarcodeFormat=function(){return Je.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new fi(r.substring(1),null,null,t.getResultPoints(),Je.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new xe},e.prototype.reset=function(){this.ean13Reader.reset()},e}(_r),oU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cI=function(n){oU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=t.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(t,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,lU(o)),v=y.next();!v.done;v=y.next()){var b=v.value;d+=b}}catch(A){a={error:A}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new _t(i),f),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return _r.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw xe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Je.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new _t;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(_r),cU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mx=function(n){cU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Mn.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Je.EAN_13)>-1&&a.push(new K2),i.indexOf(Je.UPC_A)>-1&&a.push(new lI),i.indexOf(Je.EAN_8)>-1&&a.push(new oI),i.indexOf(Je.UPC_E)>-1&&a.push(new cI)),a.length===0&&(a.push(new K2),a.push(new lI),a.push(new oI),a.push(new cI)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var o=uI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(t,r,i),p=f.getBarcodeFormat()===Je.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(Mn.POSSIBLE_FORMATS),y=g==null||g.includes(Je.UPC_A);if(p&&y){var v=f.getRawBytes(),b=new fi(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),Je.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new xe},e.prototype.reset=function(){var t,r;try{for(var i=uI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Sr),uU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dU=function(n){uU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new xe;var s=this.codaBarDecodeRow(a.row);if(!s)throw new xe;return new fi(s,null,0,[new qe(a.left,t),new qe(a.right,t)],Je.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,d){return(c+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Sr),fU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bc=function(n){fU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Sr.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new xe},e.count=function(t){return zt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=hU(t),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Sr),P1=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),_4=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new qe(r,a)),this.resultPoints.push(new qe(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),pU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fd=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var o=pU(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(T){i={error:T}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,y=0;y<g-1;y++){var v=void 0;for(v=1,p|=1<<y;v<e[y];v++,p&=~(1<<y)){var b=n.combins(s-v-1,g-y-2);if(r&&p===0&&s-v-(g-y-1)>=g-y-1&&(b-=n.combins(s-v-(g-y),g-y-2)),g-y-1>1){for(var A=0,E=s-v-(g-y-2);E>t;E--)A+=n.combins(s-v-E-1,g-y-3);b-=A*(g-1-y)}else s-v>t&&b--;f+=b}s-=v}return f},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),gU=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Vr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),mc=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),V_=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),mU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ta=function(n){mU(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(V_),yU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yc=function(n){yU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(V_),vU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qu=function(n){vU(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new Be;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(V_),Dg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new xe;var f=e.substring(0,2);try{for(var p=Dg(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===f)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch(N){t={error:N}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new xe;var v=e.substring(0,3);try{for(var b=Dg(n.THREE_DIGIT_DATA_LENGTH),A=b.next();!A.done;A=b.next()){var y=A.value;if(y[0]===v)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch(N){i={error:N}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var E=Dg(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=E.next();!T.done;T=E.next()){var y=T.value;if(y[0]===v)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(N){s={error:N}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new xe;var C=e.substring(0,4);try{for(var I=Dg(n.FOUR_DIGIT_DATA_LENGTH),O=I.next();!O.done;O=I.next()){var y=O.value;if(y[0]===C)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(N){c={error:N}}finally{try{O&&!O.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}throw new xe},n.processFixedAI=function(e,t,r){if(r.length<e)throw new xe;var i=r.substring(0,e);if(r.length<e+t)throw new xe;var a=r.substring(e,e+t),s=r.substring(e+t),o="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),a1=function(){function n(e){this.buffer=new _t,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=xU.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new qu(this.information.getSize(),qu.FNC1,qu.FNC1):new qu(this.information.getSize(),t-1,qu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new qu(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new yc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new yc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new yc(this.current.getPosition(),this.buffer.toString()):t=new yc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new mc(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new yc(this.current.getPosition(),this.buffer.toString());return new mc(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new yc(this.current.getPosition(),this.buffer.toString());return new mc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new yc(this.current.getPosition(),this.buffer.toString());return new mc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mc(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ta(e+5,Ta.FNC1);if(t>=5&&t<15)return new Ta(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ta(e+7,""+(r+1));if(r>=90&&r<116)return new Ta(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Be}return new Ta(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ta(e+5,Ta.FNC1);if(t>=5&&t<15)return new Ta(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ta(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new j0("Decoding invalid alphanumeric value: "+r)}return new Ta(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),b4=function(){function n(e){this.information=e,this.generalDecoder=new a1(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),wU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oa=function(n){wU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(b4),_U=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bU=function(n){_U(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new _t;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Oa),AU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EU=function(n){AU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new _t;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(b4),SU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),s1=function(n){SU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(Oa),TU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),A4=function(n){TU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+s1.GTIN_SIZE+e.WEIGHT_SIZE)throw new xe;var t=new _t;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+s1.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(s1),CU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IU=function(n){CU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(A4),DU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RU=function(n){DU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(A4),MU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OU=function(n){MU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Oa.GTIN_SIZE)throw new xe;var t=new _t;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oa.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Oa.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Oa),PU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kU=function(n){PU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Oa.GTIN_SIZE)throw new xe;var t=new _t;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oa.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oa.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Oa.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Oa),NU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nl=function(n){NU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new xe;var t=new _t;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(s1);function LU(n){try{if(n.get(1))return new bU(n);if(!n.get(2))return new EU(n);var e=a1.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new IU(n);case 5:return new RU(n)}var t=a1.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new OU(n);case 13:return new kU(n)}var r=a1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new nl(n,"310","11");case 57:return new nl(n,"320","11");case 58:return new nl(n,"310","13");case 59:return new nl(n,"320","13");case 60:return new nl(n,"310","15");case 61:return new nl(n,"320","15");case 62:return new nl(n,"310","17");case 63:return new nl(n,"320","17")}}catch(i){throw console.log(i),new j0("unknown decoder: "+n)}}var dI=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),BU=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),VU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FU=function(n){VU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(o){if(o instanceof xe){if(!this.pairs.length)throw new xe;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new xe},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,rl(t)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new xe},e.isValidSequence=function(t){var r,i;try{for(var a=rl(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var c=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new BU(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,o,c,d;try{for(var f=rl(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==t.length){var y=!0;try{for(var v=(s=void 0,rl(g.getPairs())),b=v.next();!b.done;b=v.next()){var A=b.value,E=!1;try{for(var T=(c=void 0,rl(t)),C=T.next();!C.done;C=T.next()){var I=C.value;if(dI.equals(A,I)){E=!0;break}}}catch(O){c={error:O}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}E||(y=!1)}}catch(O){s={error:O}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,o,c,d;try{for(var f=rl(r),p=f.next();!p.done;p=f.next()){var g=p.value,y=!0;try{for(var v=(s=void 0,rl(t)),b=v.next();!b.done;b=v.next()){var A=b.value,E=!1;try{for(var T=(c=void 0,rl(g.getPairs())),C=T.next();!C.done;C=T.next()){var I=C.value;if(A.equals(I)){E=!0;break}}}catch(O){c={error:O}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}if(!E){y=!1;break}}}catch(O){s={error:O}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}if(y)return!0}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=gU.buildBitArray(t),i=LU(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new fi(a,null,null,c,Je.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,a),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new xe;var f;try{f=this.decodeDataCharacter(t,s,a,!1)}catch(p){f=null,console.log(p)}return new dI(d,f,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!t.get(o),!!f);)o++;for(var p=0,g=o,y=o;y<s;y++)if(t.get(y)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new xe},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();wn.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new _4(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=zt.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new xe;for(var v=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var T=1*s[c]/g,C=T+.5;if(C<1){if(T<.3)throw new xe;C=1}else if(C>8){if(T>8.7)throw new xe;C=8}var I=c/2;(c&1)===0?(v[I]=C,A[I]=T-C):(b[I]=C,E[I]=T-C)}this.adjustOddEvenCounts(p);for(var O=4*r.getValue()+(i?0:2)+(a?0:1)-1,N=0,M=0,c=v.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[O][2*c];M+=v[c]*R}N+=v[c]}for(var D=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[O][2*c+1];D+=b[c]*R}var B=M+D;if((N&1)!==0||N>13||N<4)throw new xe;var L=(13-N)/2,P=e.SYMBOL_WIDEST[L],F=9-P,q=fd.getRSSvalue(v,P,!0),X=fd.getRSSvalue(b,F,!1),G=e.EVEN_TOTAL_SUBSET[L],Y=e.GSUM[L],Q=q*G+X+Y;return new P1(Q,B)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=zt.sum(new Int32Array(this.getOddCounts())),i=zt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-t,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new xe;s=!0}else{if(!p)throw new xe;c=!0}else if(d===-1)if(f){if(p)throw new xe;a=!0}else{if(!p)throw new xe;o=!0}else if(d===0){if(f){if(!p)throw new xe;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new xe}else throw new xe;if(a){if(s)throw new xe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new xe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(bc),jU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UU=function(n){jU(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(P1),HU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ox=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fI=function(n){HU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=Ox(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var v=(o=void 0,Ox(this.possibleRightPairs)),b=v.next();!b.done;b=v.next()){var A=b.value;if(A.getCount()>1&&e.checkChecksum(y,A))return e.constructResult(y,A)}}catch(E){o={error:E}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new xe},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var o=Ox(t),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new _t,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new fi(s.toString(),null,0,[f[0],f[1],p[0],p[1]],Je.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),o=this.parseFoundFinderPattern(t,i,r,s),c=a==null?null:a.get(Mn.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),c.foundPossibleResultPoint(new qe(d,i))}var f=this.decodeDataCharacter(t,o,!0),p=this.decodeDataCharacter(t,o,!1);return new UU(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Sr.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Sr.recordPattern(t,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=zt.sum(new Int32Array(a))/f,g=this.getOddCounts(),y=this.getEvenCounts(),v=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var T=Math.floor(o/2);(o&1)===0?(g[T]=E,v[T]=A-E):(y[T]=E,b[T]=A-E)}this.adjustOddEvenCounts(i,f);for(var C=0,I=0,o=g.length-1;o>=0;o--)I*=9,I+=g[o],C+=g[o];for(var O=0,N=0,o=y.length-1;o>=0;o--)O*=9,O+=y[o],N+=y[o];var M=I+3*O;if(i){if((C&1)!==0||C>12||C<4)throw new xe;var R=(12-C)/2,D=e.OUTSIDE_ODD_WIDEST[R],B=9-D,L=fd.getRSSvalue(g,D,!1),P=fd.getRSSvalue(y,B,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],q=e.OUTSIDE_GSUM[R];return new P1(L*F+P+q,M)}else{if((N&1)!==0||N>10||N<4)throw new xe;var R=(10-N)/2,D=e.INSIDE_ODD_WIDEST[R],B=9-D,L=fd.getRSSvalue(g,D,!0),P=fd.getRSSvalue(y,B,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[R],q=e.INSIDE_GSUM[R];return new P1(P*X+L+q,M)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(t.get(f)!==s)i[c]++;else{if(c===3){if(bc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new xe},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);wn.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,y=a[1];return i&&(g=t.getSize()-1-g,y=t.getSize()-1-y),new _4(p,[o,a[1]],g,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=zt.sum(new Int32Array(this.getOddCounts())),a=zt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new xe;o=!0}else{if(!g)throw new xe;d=!0}else if(f===-1)if(p){if(g)throw new xe;s=!0}else{if(!g)throw new xe;c=!0}else if(f===0){if(p){if(!g)throw new xe;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new xe}else throw new xe;if(s){if(o)throw new xe;bc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&bc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new xe;bc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&bc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(bc),zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lh=function(n){zU(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Mn.POSSIBLE_FORMATS):null,a=t&&t.get(Mn.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Mn.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Je.EAN_13)||i.includes(Je.UPC_A)||i.includes(Je.EAN_8)||i.includes(Je.UPC_E))&&r.readers.push(new Mx(t)),i.includes(Je.CODE_39)&&r.readers.push(new nI(a,s)),i.includes(Je.CODE_93)&&r.readers.push(new rI),i.includes(Je.CODE_128)&&r.readers.push(new tI),i.includes(Je.ITF)&&r.readers.push(new iI),i.includes(Je.CODABAR)&&r.readers.push(new dU),i.includes(Je.RSS_14)&&r.readers.push(new fI),i.includes(Je.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new FU))),r.readers.length===0&&(r.readers.push(new Mx(t)),r.readers.push(new nI),r.readers.push(new rI),r.readers.push(new Mx(t)),r.readers.push(new tI),r.readers.push(new iI),r.readers.push(new fI)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new xe},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Sr),$U=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){$U(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Lh(r),t,r)||this}return e})(sf);var hI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},en=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),qt=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),GU=function(){function n(e,t,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=hI(p),y=g.next();!y.done;y=g.next()){var v=y.value;d+=v.getCount()*(v.getDataCodewords()+f)}}catch(b){o={error:b}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new Be;try{for(var a=hI(n.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new Be},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new en(5,new qt(1,3))),new n(2,12,12,10,10,new en(7,new qt(1,5))),new n(3,14,14,12,12,new en(10,new qt(1,8))),new n(4,16,16,14,14,new en(12,new qt(1,12))),new n(5,18,18,16,16,new en(14,new qt(1,18))),new n(6,20,20,18,18,new en(18,new qt(1,22))),new n(7,22,22,20,20,new en(20,new qt(1,30))),new n(8,24,24,22,22,new en(24,new qt(1,36))),new n(9,26,26,24,24,new en(28,new qt(1,44))),new n(10,32,32,14,14,new en(36,new qt(1,62))),new n(11,36,36,16,16,new en(42,new qt(1,86))),new n(12,40,40,18,18,new en(48,new qt(1,114))),new n(13,44,44,20,20,new en(56,new qt(1,144))),new n(14,48,48,22,22,new en(68,new qt(1,174))),new n(15,52,52,24,24,new en(42,new qt(2,102))),new n(16,64,64,14,14,new en(56,new qt(2,140))),new n(17,72,72,16,16,new en(36,new qt(4,92))),new n(18,80,80,18,18,new en(48,new qt(4,114))),new n(19,88,88,20,20,new en(56,new qt(4,144))),new n(20,96,96,22,22,new en(68,new qt(4,174))),new n(21,104,104,24,24,new en(56,new qt(6,136))),new n(22,120,120,18,18,new en(68,new qt(6,175))),new n(23,132,132,20,20,new en(62,new qt(8,163))),new n(24,144,144,22,22,new en(62,new qt(8,156),new qt(2,155))),new n(25,8,18,6,16,new en(7,new qt(1,5))),new n(26,8,32,6,14,new en(11,new qt(1,10))),new n(27,12,26,10,24,new en(14,new qt(1,16))),new n(28,12,36,10,16,new en(18,new qt(1,22))),new n(29,16,36,14,16,new en(24,new qt(1,32))),new n(30,16,48,14,22,new en(28,new qt(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),WU=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Be;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ts(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return GU.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new Be;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new nt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=r/a|0,c=s*i,d=o*a,f=new Ts(d,c),p=0;p<s;++p)for(var g=p*i,y=0;y<o;++y)for(var v=y*a,b=0;b<i;++b)for(var A=p*(i+2)+1+b,E=g+b,T=0;T<a;++T){var C=y*(a+2)+1+T;if(e.get(C,A)){var I=v+T;f.set(I,E)}}return f},n}(),pI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YU=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,o=t.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=pI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var y=new Array(c),v=0;try{for(var b=pI(d),A=b.next();!A.done;A=b.next())for(var g=A.value,E=0;E<g.getCount();E++){var T=g.getDataCodewords(),C=o.getECCodewords()+T;y[v++]=new n(T,new Uint8Array(C))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var I=y[0].codewords.length,O=I-o.getECCodewords(),N=O-1,M=0,E=0;E<N;E++)for(var R=0;R<v;R++)y[R].codewords[E]=e[M++];for(var D=t.getVersionNumber()===24,B=D?8:v,R=0;R<B;R++)y[R].codewords[O-1]=e[M++];for(var L=y[0].codewords.length,E=O;E<L;E++)for(var R=0;R<v;R++){var P=D?(R+8)%v:R,F=D&&P>7?E-1:E;y[P].codewords[F]=e[M++]}if(M!==e.length)throw new nt;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),E4=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new nt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;t=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;t=t<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),xr;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(xr||(xr={}));var qU=function(){function n(){}return n.decode=function(e){var t=new E4(e),r=new _t,i=new _t,a=new Array,s=xr.ASCII_ENCODE;do if(s===xr.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case xr.C40_ENCODE:this.decodeC40Segment(t,r);break;case xr.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case xr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case xr.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case xr.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new Be}s=xr.ASCII_ENCODE}while(s!==xr.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Um(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Be;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),xr.ASCII_ENCODE;if(a===129)return xr.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return xr.C40_ENCODE;case 231:return xr.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return xr.ANSIX12_ENCODE;case 239:return xr.TEXT_ENCODE;case 240:return xr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Be;break}}while(e.available()>0);return xr.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new Be;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new Be}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new Be}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new Be;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new Be}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new Be;break;default:throw new Be}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new Be;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Be;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Be;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{t.append(ma.decode(o,Ft.ISO88591))}catch(d){throw new j0("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),XU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KU=function(){function n(){this.rsDecoder=new Hm(Mi.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new WU(e),a=i.getVersion(),s=i.readCodewords(),o=YU.getDataBlocks(s,a),c=0;try{for(var d=XU(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(C){t={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),y=o.length,v=0;v<y;v++){var b=o[v],A=b.getCodewords(),E=b.getNumDataCodewords();this.correctErrors(A,E);for(var T=0;T<E;T++)g[T*y+v]=A[T]}return qU.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Lr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),QU=function(){function n(e){this.image=e,this.rectangleDetector=new q2(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new xe;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=n.sampleGrid(this.image,r,i,a,s,o,c);return new L_(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new qe(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new qe(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),f=s,p=[a,t,r,i];return f>o&&(f=o,p[0]=t,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),f>d&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,t),f=this.transitionsBetween(c,a);return d<f?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(o+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new qe(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new qe(a.getX()+(t.getX()-r.getX())/(o+1),a.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),y=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>y?f:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,o*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,f,p),r=n.moveAway(r,f,p),i=n.moveAway(i,f,p),a=n.moveAway(a,f,p);var g,y;return c=n.shiftPoint(t,r,o*4),c=n.shiftPoint(c,a,s*4),g=n.shiftPoint(r,t,o*4),g=n.shiftPoint(g,i,s*4),d=n.shiftPoint(i,a,o*4),d=n.shiftPoint(d,r,s*4),y=n.shiftPoint(a,i,o*4),y=n.shiftPoint(y,t,s*4),[c,g,d,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,o){var c=B_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,y=r<a?1:-1,v=0,b=this.image.get(o?i:r,o?r:i),A=r,E=i;A!==a;A+=y){var T=this.image.get(o?E:A,o?A:E);if(T!==b&&(v++,b=T),p+=f,p>0){if(E===s)break;E+=g,p-=d}}return v},n}(),Q2=function(){function n(){this.decoder=new KU}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Mn.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new QU(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new fi(r.getText(),o,8*o.length,i,Je.DATA_MATRIX,wn.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(Zr.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(Zr.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new xe;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new xe;var p=i/2;a+=p,o+=p;for(var g=new Ts(d,f),y=0;y<f;y++)for(var v=a+y*i,b=0;b<d;b++)e.get(o+b*i,v)&&g.set(b,y);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new xe;var s=i-e[0];if(s===0)throw new xe;return s},n.NO_POINTS=[],n}(),ZU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){ZU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Q2,t)||this}return e})(sf);var hd;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(hd||(hd={}));var JU=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ia(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new nt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(hd.L,"L",1),n.M=new n(hd.M,"M",0),n.Q=new n(hd.Q,"Q",3),n.H=new n(hd.H,"H",2),n}(),eH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S4=function(){function n(e){this.errorCorrectionLevel=JU.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return St.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=eH(n.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===t)return new n(d[1]);var p=n.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==t&&(p=n.numBitsDiffering(t,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),tH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},le=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=tH(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),W=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),nH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lc=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=nH(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Be;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Be}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new nt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=S4.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ts(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new le(7,new W(1,19)),new le(10,new W(1,16)),new le(13,new W(1,13)),new le(17,new W(1,9))),new n(2,Int32Array.from([6,18]),new le(10,new W(1,34)),new le(16,new W(1,28)),new le(22,new W(1,22)),new le(28,new W(1,16))),new n(3,Int32Array.from([6,22]),new le(15,new W(1,55)),new le(26,new W(1,44)),new le(18,new W(2,17)),new le(22,new W(2,13))),new n(4,Int32Array.from([6,26]),new le(20,new W(1,80)),new le(18,new W(2,32)),new le(26,new W(2,24)),new le(16,new W(4,9))),new n(5,Int32Array.from([6,30]),new le(26,new W(1,108)),new le(24,new W(2,43)),new le(18,new W(2,15),new W(2,16)),new le(22,new W(2,11),new W(2,12))),new n(6,Int32Array.from([6,34]),new le(18,new W(2,68)),new le(16,new W(4,27)),new le(24,new W(4,19)),new le(28,new W(4,15))),new n(7,Int32Array.from([6,22,38]),new le(20,new W(2,78)),new le(18,new W(4,31)),new le(18,new W(2,14),new W(4,15)),new le(26,new W(4,13),new W(1,14))),new n(8,Int32Array.from([6,24,42]),new le(24,new W(2,97)),new le(22,new W(2,38),new W(2,39)),new le(22,new W(4,18),new W(2,19)),new le(26,new W(4,14),new W(2,15))),new n(9,Int32Array.from([6,26,46]),new le(30,new W(2,116)),new le(22,new W(3,36),new W(2,37)),new le(20,new W(4,16),new W(4,17)),new le(24,new W(4,12),new W(4,13))),new n(10,Int32Array.from([6,28,50]),new le(18,new W(2,68),new W(2,69)),new le(26,new W(4,43),new W(1,44)),new le(24,new W(6,19),new W(2,20)),new le(28,new W(6,15),new W(2,16))),new n(11,Int32Array.from([6,30,54]),new le(20,new W(4,81)),new le(30,new W(1,50),new W(4,51)),new le(28,new W(4,22),new W(4,23)),new le(24,new W(3,12),new W(8,13))),new n(12,Int32Array.from([6,32,58]),new le(24,new W(2,92),new W(2,93)),new le(22,new W(6,36),new W(2,37)),new le(26,new W(4,20),new W(6,21)),new le(28,new W(7,14),new W(4,15))),new n(13,Int32Array.from([6,34,62]),new le(26,new W(4,107)),new le(22,new W(8,37),new W(1,38)),new le(24,new W(8,20),new W(4,21)),new le(22,new W(12,11),new W(4,12))),new n(14,Int32Array.from([6,26,46,66]),new le(30,new W(3,115),new W(1,116)),new le(24,new W(4,40),new W(5,41)),new le(20,new W(11,16),new W(5,17)),new le(24,new W(11,12),new W(5,13))),new n(15,Int32Array.from([6,26,48,70]),new le(22,new W(5,87),new W(1,88)),new le(24,new W(5,41),new W(5,42)),new le(30,new W(5,24),new W(7,25)),new le(24,new W(11,12),new W(7,13))),new n(16,Int32Array.from([6,26,50,74]),new le(24,new W(5,98),new W(1,99)),new le(28,new W(7,45),new W(3,46)),new le(24,new W(15,19),new W(2,20)),new le(30,new W(3,15),new W(13,16))),new n(17,Int32Array.from([6,30,54,78]),new le(28,new W(1,107),new W(5,108)),new le(28,new W(10,46),new W(1,47)),new le(28,new W(1,22),new W(15,23)),new le(28,new W(2,14),new W(17,15))),new n(18,Int32Array.from([6,30,56,82]),new le(30,new W(5,120),new W(1,121)),new le(26,new W(9,43),new W(4,44)),new le(28,new W(17,22),new W(1,23)),new le(28,new W(2,14),new W(19,15))),new n(19,Int32Array.from([6,30,58,86]),new le(28,new W(3,113),new W(4,114)),new le(26,new W(3,44),new W(11,45)),new le(26,new W(17,21),new W(4,22)),new le(26,new W(9,13),new W(16,14))),new n(20,Int32Array.from([6,34,62,90]),new le(28,new W(3,107),new W(5,108)),new le(26,new W(3,41),new W(13,42)),new le(30,new W(15,24),new W(5,25)),new le(28,new W(15,15),new W(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new le(28,new W(4,116),new W(4,117)),new le(26,new W(17,42)),new le(28,new W(17,22),new W(6,23)),new le(30,new W(19,16),new W(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new le(28,new W(2,111),new W(7,112)),new le(28,new W(17,46)),new le(30,new W(7,24),new W(16,25)),new le(24,new W(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new le(30,new W(4,121),new W(5,122)),new le(28,new W(4,47),new W(14,48)),new le(30,new W(11,24),new W(14,25)),new le(30,new W(16,15),new W(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new le(30,new W(6,117),new W(4,118)),new le(28,new W(6,45),new W(14,46)),new le(30,new W(11,24),new W(16,25)),new le(30,new W(30,16),new W(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new le(26,new W(8,106),new W(4,107)),new le(28,new W(8,47),new W(13,48)),new le(30,new W(7,24),new W(22,25)),new le(30,new W(22,15),new W(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new le(28,new W(10,114),new W(2,115)),new le(28,new W(19,46),new W(4,47)),new le(28,new W(28,22),new W(6,23)),new le(30,new W(33,16),new W(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new le(30,new W(8,122),new W(4,123)),new le(28,new W(22,45),new W(3,46)),new le(30,new W(8,23),new W(26,24)),new le(30,new W(12,15),new W(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new W(3,117),new W(10,118)),new le(28,new W(3,45),new W(23,46)),new le(30,new W(4,24),new W(31,25)),new le(30,new W(11,15),new W(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new W(7,116),new W(7,117)),new le(28,new W(21,45),new W(7,46)),new le(30,new W(1,23),new W(37,24)),new le(30,new W(19,15),new W(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new W(5,115),new W(10,116)),new le(28,new W(19,47),new W(10,48)),new le(30,new W(15,24),new W(25,25)),new le(30,new W(23,15),new W(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new W(13,115),new W(3,116)),new le(28,new W(2,46),new W(29,47)),new le(30,new W(42,24),new W(1,25)),new le(30,new W(23,15),new W(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new W(17,115)),new le(28,new W(10,46),new W(23,47)),new le(30,new W(10,24),new W(35,25)),new le(30,new W(19,15),new W(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new W(17,115),new W(1,116)),new le(28,new W(14,46),new W(21,47)),new le(30,new W(29,24),new W(19,25)),new le(30,new W(11,15),new W(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new W(13,115),new W(6,116)),new le(28,new W(14,46),new W(23,47)),new le(30,new W(44,24),new W(7,25)),new le(30,new W(59,16),new W(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new W(12,121),new W(7,122)),new le(28,new W(12,47),new W(26,48)),new le(30,new W(39,24),new W(14,25)),new le(30,new W(22,15),new W(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new W(6,121),new W(14,122)),new le(28,new W(6,47),new W(34,48)),new le(30,new W(46,24),new W(10,25)),new le(30,new W(2,15),new W(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new W(17,122),new W(4,123)),new le(28,new W(29,46),new W(14,47)),new le(30,new W(49,24),new W(10,25)),new le(30,new W(24,15),new W(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new W(4,122),new W(18,123)),new le(28,new W(13,46),new W(32,47)),new le(30,new W(48,24),new W(14,25)),new le(30,new W(42,15),new W(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new W(20,117),new W(4,118)),new le(28,new W(40,47),new W(7,48)),new le(30,new W(43,24),new W(22,25)),new le(30,new W(10,15),new W(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new W(19,118),new W(6,119)),new le(28,new W(18,47),new W(31,48)),new le(30,new W(34,24),new W(34,25)),new le(30,new W(20,15),new W(61,16)))],n}(),Pr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Pr||(Pr={}));var gI=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Pr.DATA_MASK_000,new n(Pr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Pr.DATA_MASK_001,new n(Pr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Pr.DATA_MASK_010,new n(Pr.DATA_MASK_010,function(e,t){return t%3===0})],[Pr.DATA_MASK_011,new n(Pr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Pr.DATA_MASK_100,new n(Pr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Pr.DATA_MASK_101,new n(Pr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Pr.DATA_MASK_110,new n(Pr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Pr.DATA_MASK_111,new n(Pr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),rH=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Be;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=S4.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Be},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Lc.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=Lc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=Lc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new Be},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=gI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=s?i-1-g:g,v=0;v<2;v++)a.get(p-v,y)||(f++,d<<=1,this.bitMatrix.get(p-v,y)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==t.getTotalCodewords())throw new Be;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=gI.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),mI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new nt;var c=t.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=mI(f),g=p.next();!g.done;g=p.next()){var y=g.value;d+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var v=new Array(d),b=0;try{for(var A=mI(f),E=A.next();!E.done;E=A.next())for(var y=E.value,T=0;T<y.getCount();T++){var C=y.getDataCodewords(),I=c.getECCodewordsPerBlock()+C;v[b++]=new n(C,new Uint8Array(I))}}catch(F){s={error:F}}finally{try{E&&!E.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var O=v[0].codewords.length,N=v.length-1;N>=0;){var M=v[N].codewords.length;if(M===O)break;N--}N++;for(var R=O-c.getECCodewordsPerBlock(),D=0,T=0;T<R;T++)for(var B=0;B<b;B++)v[B].codewords[T]=e[D++];for(var B=N;B<b;B++)v[B].codewords[R]=e[D++];for(var L=v[0].codewords.length,T=R;T<L;T++)for(var B=0;B<b;B++){var P=B<N?T:T+1;v[B].codewords[P]=e[D++]}return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),la;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(la||(la={}));var En=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new nt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(la.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(la.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(la.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(la.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(la.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(la.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(la.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(la.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(la.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(la.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),aH=function(){function n(){}return n.decode=function(e,t,r,i){var a=new E4(e),s=new _t,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=En.TERMINATOR;else{var y=a.readBits(4);g=En.forBits(y)}switch(g){case En.TERMINATOR:break;case En.FNC1_FIRST_POSITION:case En.FNC1_SECOND_POSITION:p=!0;break;case En.STRUCTURED_APPEND:if(a.available()<16)throw new Be;c=a.readBits(8),d=a.readBits(8);break;case En.ECI:var v=n.parseECIValue(a);if(f=Ar.getCharacterSetECIByValue(v),f===null)throw new Be;break;case En.HANZI:var b=a.readBits(4),A=a.readBits(g.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,A);break;default:var E=a.readBits(g.getCharacterCountBits(t));switch(g){case En.NUMERIC:n.decodeNumericSegment(a,s,E);break;case En.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,E,p);break;case En.BYTE:n.decodeByteSegment(a,s,E,f,o,i);break;case En.KANJI:n.decodeKanjiSegment(a,s,E);break;default:throw new Be}break}}while(g!==En.TERMINATOR)}catch{throw new Be}return new Um(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new Be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{t.append(ma.decode(i,Ft.GB2312))}catch(c){throw new Be(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new Be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{t.append(ma.decode(i,Ft.SHIFT_JIS))}catch(c){throw new Be(c)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new Be;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=Ft.guessEncoding(o,s):d=i.getName();try{t.append(ma.decode(o,d))}catch(f){throw new Be(f)}a.push(o)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new Be;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new Be;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new Be;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new Be;var i=e.readBits(10);if(i>=1e3)throw new Be;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Be;var a=e.readBits(7);if(a>=100)throw new Be;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new Be;var s=e.readBits(4);if(s>=10)throw new Be;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Be},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),T4=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),yI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sH=function(){function n(){this.rsDecoder=new Hm(Mi.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ts.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new rH(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new T4(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=iH.getDataBlocks(d,o,c),p=0;try{for(var g=yI(f),y=g.next();!y.done;y=g.next()){var v=y.value;p+=v.getNumDataCodewords()}}catch(N){r={error:N}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),A=0;try{for(var E=yI(f),T=E.next();!T.done;T=E.next()){var v=T.value,C=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(C,I);for(var O=0;O<I;O++)b[A++]=C[O]}}catch(N){a={error:N}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return aH.decode(b,o,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Lr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),oH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lH=function(n){oH(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(qe),cH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uH=function(){function n(e,t,r,i,a,s,o){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),o=this.image,c=0;c<t;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new xe},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(t,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=cH(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var y=new lH(o,c,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n}(),dH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fH=function(n){dH(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(qe),hH=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),mh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pH=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Mn.TRY_HARDER)!==void 0,r=e!=null&&e.get(Mn.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*n.MAX_MODULES));(o<n.MIN_SKIP||t)&&(o=n.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,g,r);if(y===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>d[2]&&(f+=v-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,s,r);y===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return qe.orderBestPatterns(b),new hH(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&t+s<d&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=c||t+s>=d)return!1;for(;e+s<c&&t+s<d&&!o.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||t+s>=d||a[3]>=r)return!1;for(;e+s<c&&t+s<d&&o.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(t,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(t,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,t);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,t)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,t)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var y=f[p];if(y.aboutEquals(c,o,s)){f[p]=y.combineEstimate(o,s,c),d=!0;break}}if(!d){var v=new fH(s,o,c);f.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=mh(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=mh(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=n.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var y=mh(this.possibleCenters),v=y.next();!v.done;v=y.next()){var f=v.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return g<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new xe;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=mh(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,d+=y*y}}catch(O){e={error:O}}finally{try{p&&!p.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}o=c/a;var v=Math.sqrt(d/a-o*o);s.sort(function(O,N){var M=Math.abs(N.getEstimatedModuleSize()-o),R=Math.abs(O.getEstimatedModuleSize()-o);return M<R?-1:M>R?1:0});for(var b=Math.max(.2*o,v),A=0;A<s.length&&s.length>3;A++){var E=s[A];Math.abs(E.getEstimatedModuleSize()-o)>b&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var T=mh(s),C=T.next();!C.done;C=T.next()){var I=C.value;c+=I.getEstimatedModuleSize()}}catch(N){r={error:N}}finally{try{C&&!C.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(N,M){if(M.getCount()===N.getCount()){var R=Math.abs(M.getEstimatedModuleSize()-o),D=Math.abs(N.getEstimatedModuleSize()-o);return R<D?1:R>D?-1:0}else return M.getCount()-N.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),gH=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Mn.NEED_RESULT_POINT_CALLBACK);var t=new pH(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new xe("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),o=Lc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,y=Math.floor(t.getX()+g*(f-t.getX())),v=Math.floor(t.getY()+g*(p-t.getY())),b=4;b<=16;b<<=1)try{d=this.findAlignmentInRegion(a,y,v,b);break}catch(C){if(!(C instanceof xe))throw C}var A=n.createTransform(t,r,i,d,s),E=n.sampleGrid(this.image,A,s),T;return d===null?T=[i,t,r]:T=[i,t,r,d],new L_(E,T)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),d=s,f=s),w4.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=B_.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=zt.round(qe.distance(e,t)/i),s=zt.round(qe.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new xe("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-t),d=-o/2,f=e<r?1:-1,p=t<i?1:-1,g=0,y=r+f,v=e,b=t;v!==y;v+=f){var A=a?b:v,E=a?v:b;if(g===1===this.image.get(A,E)){if(g===2)return zt.distance(v,b,e,t);g++}if(d+=c,d>0){if(b===i)break;b+=p,d-=o}}return g===2?zt.distance(r+f,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new xe("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new xe("Alignment bottom exceeds estimated module size.");var f=new uH(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},n}(),Z2=function(){function n(){this.decoder=new sH}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Mn.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new gH(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof T4&&r.getOther().applyMirroredCorrection(i);var o=new fi(r.getText(),r.getRawBytes(),void 0,i,Je.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(Zr.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(Zr.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(Zr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(Zr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new xe;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0];if(o>=c||a>=s)throw new xe;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new xe;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new xe;if(f!==d)throw new xe;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new xe;o-=g}var y=a+Math.floor((f-1)*i)-s;if(y>0){if(y>p)throw new xe;a-=y}for(var v=new Ts(d,f),b=0;b<f;b++)for(var A=a+Math.floor(b*i),E=0;E<d;E++)e.get(o+Math.floor(E*i),A)&&v.set(E,b);return v},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==t.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new xe;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),mH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return zt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=mH(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Er.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),yH=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),vH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xH=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new yH(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,o=0,c=!1;s<t.getHeight();){var d=n.findVertices(t,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,vH(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var f=n.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new qe(f[0],i),o[1]=new qe(f[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<t;g++){var f=n.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<n.MAX_PATTERN_DRIFT)p=f,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,o[2]=new qe(p[0],g),o[3]=new qe(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Er.fill(o,null),o},n.findGuardPattern=function(e,t,r,i,a,s,o){Er.fillWithin(o,0,o.length,0);for(var c=t,d=0;e.get(c,r)&&c>0&&d++<n.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,y=a;f<i;f++){var v=e.get(f,r);if(v!==y)o[p]++;else{if(p===g-1){if(n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],wn.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}}return p===g-1&&n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return 1/0;d+=y}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),wH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dc=function(){function n(e,t){if(t.length===0)throw new nt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),wn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=wH(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;wn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(t[o-s],r[o]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=t[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new nt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new _t,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),_H=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new nt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new x4;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),bH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AH=function(n){bH(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Dc(i,new Int32Array([0])),i.one=new Dc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new nt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Dc(this,i)},e.PDF417_GF=new e(Ut.NUMBER_OF_CODEWORDS,3),e}(_H),EH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SH=function(){function n(){this.field=AH.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Dc(this.field,e),o=new Int32Array(t),c=!1,d=t;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[t-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=EH(r),y=g.next();!y.done;y=g.next()){var v=y.value,b=this.field.exp(e.length-1-v),A=new Dc(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(A)}}catch(R){i={error:R}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var E=new Dc(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),E,t),C=T[0],I=T[1],O=this.findErrorLocations(C),N=this.findErrorMagnitudes(I,C,O),d=0;d<O.length;d++){var M=e.length-1-this.field.log(O[d]);if(M<0)throw Lr.getChecksumInstance();e[M]=this.field.subtract(e[M],N[d])}return O.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw Lr.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var v=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(v,b)),s=s.subtract(a.multiplyByMonomial(v,b))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw Lr.getChecksumInstance();var E=this.field.inverse(A),T=c.multiply(E),C=s.multiply(E);return[T,C]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Lr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new Dc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},n}(),J2=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,o=i==null||a==null;if(s&&o)throw new xe;s?(t=new qe(0,i.getY()),r=new qe(0,a.getY())):o&&(i=new qe(e.getWidth()-1,t.getY()),a=new qe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new qe(c.getX(),d);r?i=f:s=f}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new qe(p.getX(),g);r?a=y:o=y}return new n(this.image,i,a,s,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),TH=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),F_=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(g||16);break;case"d":y=parseFloat(parseInt(t[r],g||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var v=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";y.length<v;)y=o!==void 0?y+b:b+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),CH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C4=function(){function n(e){this.boundingBox=new J2(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new F_,i=0;try{for(var a=CH(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),IH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Bh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=IH(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=DH(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Ut.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),RH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Px=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vI=function(n){RH(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Px(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var y=r[g],v=y.getRowNumber()-d;if(v===0)p++;else if(v===1)f=Math.max(f,p),p=1,d=y.getRowNumber();else if(v<0||y.getRowNumber()>=t.getRowCount()||v>g)r[g]=null;else{var b=void 0;f>2?b=(f-2)*v:b=v;for(var A=b>=g,E=1;E<=b&&!A;E++)A=r[g-E]!=null;A?r[g]=null:(d=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Px(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Bh,s=new Bh,o=new Bh,c=new Bh;try{for(var d=Px(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){t={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;var v=new TH(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(C4),MH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OH=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ut.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[t],d[3]=c[t],t>0&&(d[0]=r[t-1],d[4]=o[t-1],d[5]=c[t-1]),t>1&&(d[8]=r[t-2],d[10]=o[t-2],d[11]=c[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=o[t+1],d[7]=c[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=o[t+2],d[13]=c[t+2]);try{for(var f=MH(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(n.adjustRowNumber(s,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new F_,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),PH=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),kH=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ut.SYMBOL_TABLE.length;e++)for(var t=Ut.SYMBOL_TABLE[e],r=t&1,i=0;i<Ut.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-i-1]=Math.fround(a/Ut.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=zt.sum(e),r=new Int32Array(Ut.BARS_IN_MODULE),i=0,a=0,s=0;s<Ut.MODULES_IN_CODEWORD;s++){var o=t/(2*Ut.MODULES_IN_CODEWORD)+s*t/Ut.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ut.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=zt.sum(e),r=new Array(Ut.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Y2.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var c=0,d=n.RATIOS_TABLE[o],f=0;f<Ut.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=Ut.SYMBOL_TABLE[o])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(function(e){return new Array(Ut.BARS_IN_MODULE)}),n}(),NH=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),xI=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),LH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BH=function(n){LH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(ki),VH=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new BH;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new k_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),FH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jH=function(n){FH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(ki),UH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HH=function(n){UH(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new nt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new jH;i=St.MAX_VALUE}this.buf=Er.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new k_;this.ensureCapacity(this.count+i),wn.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Er.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(VH),fn;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(fn||(fn={}));function I4(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Rg;function ll(n){if(typeof Rg>"u"&&(Rg=I4()),Rg===null)throw new Error("BigInt is not supported!");return Rg(n)}function zH(){var n=[];n[0]=ll(1);var e=ll(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var $H=function(){function n(){}return n.decode=function(e,t){var r=new _t(""),i=Ar.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new NH;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Ar.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Be;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw Be.getFormatInstance()}if(r.length()===0)throw Be.getFormatInstance();var c=new Um(null,r.toString(),null,t);return c.setOther(o),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Be.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(St.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new _t;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var o=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new _t;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new _t;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new _t;t=n.textCompaction(e,t+1,f),r.setAddressee(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new _t;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(St.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new _t;t=n.numericCompaction(e,t+1,g),r.setTimestamp(xI.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new _t;t=n.numericCompaction(e,t+1,y),r.setChecksum(St.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new _t;t=n.numericCompaction(e,t+1,v),r.setFileSize(xI.parseLong(v.toString()));break;default:throw Be.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw Be.getFormatInstance()}if(o!==-1){var b=t-o;r.isLastSegment()&&b--,r.setOptionalData(Er.copyOfRange(e,o,o+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=fn.ALPHA,s=fn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case fn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.LL:a=fn.LOWER;break;case n.ML:a=fn.MIXED;break;case n.PS:s=a,a=fn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break;case fn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case n.AS:s=a,a=fn.ALPHA_SHIFT;break;case n.ML:a=fn.MIXED;break;case n.PS:s=a,a=fn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break;case fn.MIXED:if(c<n.PL)d=n.MIXED_CHARS[c];else switch(c){case n.PL:a=fn.PUNCT;break;case 26:d=" ";break;case n.LL:a=fn.LOWER;break;case n.AL:a=fn.ALPHA;break;case n.PS:s=a,a=fn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break;case fn.PUNCT:if(c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=fn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break;case fn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break;case fn.PUNCT_SHIFT:if(a=s,c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=fn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=fn.ALPHA;break}break}d!==""&&i.append(d),o++}},n.byteCompaction=function(e,t,r,i,a){var s=new HH,o=0,c=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=t[i++];i<t[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(ll(c)>>ll(8*(5-g))));c=0,o=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var y=0;y<o;y++)s.write(f[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var v=t[i++];if(v<n.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+v;else switch(v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(ll(c)>>ll(8*(5-g))));c=0,o=0}}break}return a.append(ma.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<n.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ll(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ll(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new Be;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=I4()?zH():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),yh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GH=function(){function n(){}return n.decode=function(e,t,r,i,a,s,o){for(var c=new J2(e,t,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,c,t,!0,s,o)),i!=null&&(f=n.getRowIndicatorColumn(e,c,i,!1,s,o)),p=n.merge(d,f),p==null)throw xe.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var v=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(v,f);for(var b=d!=null,A=1;A<=v;A++){var E=b?A:v-A;if(p.getDetectionResultColumn(E)===void 0){var T=void 0;E===0||E===v?T=new vI(c,E===0):T=new C4(c),p.setDetectionResultColumn(E,T);for(var C=-1,I=C,O=c.getMinY();O<=c.getMaxY();O++){if(C=n.getStartColumn(p,E,O,b),C<0||C>c.getMaxX()){if(I===-1)continue;C=I}var N=n.detectCodeword(e,c.getMinX(),c.getMaxX(),b,C,O,s,o);N!=null&&(T.setCodeword(O,N),I=C,s=Math.min(s,N.getWidth()),o=Math.max(o,N.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=J2.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new OH(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var o=yh(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=yh(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var o=new vI(t,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var g=n.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ut.MAX_CODEWORDS_IN_BARCODE)throw xe.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=t[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ut.toIntArray(r),Ut.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=a[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(f){var d=f instanceof Lr;if(!d)throw f}if(s.length===0)throw Lr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Lr.getChecksumInstance()}throw Lr.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new Bh;var d=0;try{for(var f=yh(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,yh(g.getCodewords())),v=y.next();!v.done;v=y.next()){var b=v.value;if(b!=null){var A=b.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(b.getValue())}}}}catch(E){i={error:E}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}d++}}catch(E){t={error:E}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,o=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var f=(a=void 0,yh(e.getDetectionResultColumn(t).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,o,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var f,p=zt.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var y=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=y}f=a,a=f-p}if(!n.checkCodewordSkew(p,o,c))return null;var v=kH.getDecodedValue(d),b=Ut.getCodeword(v);return b===-1?null:new PH(a,f,n.getCodewordBucketNumber(v),b)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=t)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:t)&&d===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=t:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>n.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw Be.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=$H.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Lr.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw Be.getFormatInstance();var r=e[0];if(r>e.length)throw Be.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw Be.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new F_,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new SH,n}(),WH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ew=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw xe.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof Be||r instanceof Lr?xe.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,o=xH.detectMultiple(e,t,r);try{for(var c=WH(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=GH.decode(o.getBits(),f[4],f[5],f[6],f[7],n.getMinCodewordWidth(f),n.getMaxCodewordWidth(f)),g=new fi(p.getText(),p.getRawBytes(),void 0,f,Je.PDF_417);g.putMetadata(Zr.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(Zr.PDF417_EXTRA_METADATA,y),s.push(g)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(v){return v})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?St.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),YH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wI=function(n){YH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(ki),_I=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qH=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Mn.TRY_HARDER)!==void 0,r=e==null?null:e.get(Mn.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Je.UPC_A||s===Je.UPC_E||s===Je.EAN_13||s===Je.EAN_8||s===Je.CODABAR||s===Je.CODE_39||s===Je.CODE_93||s===Je.CODE_128||s===Je.ITF||s===Je.RSS_14||s===Je.RSS_EXPANDED});a&&!t&&i.push(new Lh(e)),r.includes(Je.QR_CODE)&&i.push(new Z2),r.includes(Je.DATA_MATRIX)&&i.push(new Q2),r.includes(Je.AZTEC)&&i.push(new X2),r.includes(Je.PDF_417)&&i.push(new ew),a&&t&&i.push(new Lh(e))}i.length===0&&(t||i.push(new Lh(e)),i.push(new Z2),i.push(new Q2),i.push(new X2),i.push(new ew),t&&i.push(new Lh(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=_I(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new wI("No readers where selected, nothing can be read.");try{for(var i=_I(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof wI)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new xe("No MultiFormat Readers were able to detect the code.")},n}(),XH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KH=function(n){XH(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new qH;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(sf),QH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){QH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ew,t)||this}return e})(sf);var ZH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){ZH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Z2,t)||this}return e})(sf);var tw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(tw||(tw={}));const Mg=tw;var D4=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new bl(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new bl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new nt("No error correction bytes");var r=e.length-t;if(r<=0)throw new nt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);wn.arraycopy(e,0,a,0,r);var s=new bl(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=t-c.length,f=0;f<d;f++)e[r+f]=0;wn.arraycopy(c,0,e,r+d,c.length)},n}(),Vh=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(n.isWhiteHorizontal(c,o-4,o)||n.isWhiteHorizontal(c,o+7,o+11))&&t++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(n.isWhiteVertical(r,o,s-4,s)||n.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&t++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(t*2-d)*10/d);return f*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new nt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=t?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,d=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),JH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ez=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=JH(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Er.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},n.prototype.toString=function(){for(var e=new _t,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),nw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new _t;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),tz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),An=function(n){tz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(ki),bI=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Vr;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Vr;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(n.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,t!==255&&Vh.getDataMaskBit(t,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new An("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-St.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new nt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!nw.isValidMaskPattern(t))throw new An("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Vr;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new An("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new An("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new An;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new An;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new An;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&n.isEmpty(t.get(d,o))&&n.embedPositionAdjustmentPattern(d-2,o-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),nz=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),AI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Vh.applyMaskPenaltyRule1(e)+Vh.applyMaskPenaltyRule2(e)+Vh.applyMaskPenaltyRule3(e)+Vh.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Mg.CHARACTER_SET)!==void 0;a&&(i=r.get(Mg.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new Vr;if(s===En.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Ar.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new Vr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(Mg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Mg.QR_VERSION).toString(),10);f=Lc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,t))throw new An("Data too big for requested version")}else f=this.recommendVersion(t,s,o,d);var y=new Vr;y.appendBitArray(o);var v=s===En.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(v,f,s,y),y.appendBitArray(d);var b=f.getECBlocksForLevel(t),A=f.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,y);var E=this.interleaveWithECBytes(y,f.getTotalCodewords(),A,b.getNumBlocks()),T=new nw;T.setECLevel(t),T.setMode(s),T.setVersion(f);var C=f.getDimensionForVersion(),I=new ez(C,C),O=this.chooseMaskPattern(E,t,f,I);return T.setMaskPattern(O),bI.buildMatrix(E,t,f,O,I),T.setMatrix(I),T},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Lc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(o,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Ar.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return En.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return En.BYTE}return i?En.ALPHANUMERIC:r?En.NUMERIC:En.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=ma.encode(e,Ar.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<nw.NUM_MASK_PATTERNS;o++){bI.buildMatrix(e,t,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Lc.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new An("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new An("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new An("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new An("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(t/r),g=p+1,y=d-p,v=f-g;if(y!==v)throw new An("EC bytes mismatch");if(r!==c+o)throw new An("RS blocks mismatch");if(e!==(p+y)*c+(g+v)*o)throw new An("Total bytes mismatch");i<c?(a[0]=p,s[0]=y):(a[0]=g,s[0]=v)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new An("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,y=0;y<i;++y){var v=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,v,b);var A=v[0],E=new Uint8Array(A);e.toBytes(8*d,E,0,A);var T=n.generateECBytes(E,b[0]);g.push(new nz(E,T)),f=Math.max(f,A),p=Math.max(p,T.length),d+=v[0]}if(r!==d)throw new An("Data bytes does not match offset");for(var C=new Vr,y=0;y<f;++y)try{for(var I=(a=void 0,AI(g)),O=I.next();!O.done;O=I.next()){var N=O.value,E=N.getDataBytes();y<E.length&&C.appendBits(E[y],8)}}catch(B){a={error:B}}finally{try{O&&!O.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var M=(o=void 0,AI(g)),R=M.next();!R.done;R=M.next()){var N=R.value,T=N.getErrorCorrectionBytes();y<T.length&&C.appendBits(T[y],8)}}catch(B){o={error:B}}finally{try{R&&!R.done&&(c=M.return)&&c.call(M)}finally{if(o)throw o.error}}if(t!==C.getSizeInBytes())throw new An("Interleaving error: "+t+" and "+C.getSizeInBytes()+" differ.");return C},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new D4(Mi.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new An(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case En.NUMERIC:n.appendNumericBytes(e,r);break;case En.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case En.BYTE:n.append8BitBytes(e,r,i);break;case En.KANJI:n.appendKanjiBytes(e,r);break;default:throw new An("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),o=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new An;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new An;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=ma.encode(e,r)}catch(c){throw new An(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=ma.encode(e,Ar.SJIS)}catch(p){throw new An(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new An("Invalid byte sequence");var f=(d>>8)*192+(d&255);t.appendBits(f,13)}},n.appendECI=function(e,t){t.appendBits(En.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Ar.UTF8.getName(),n})();var rz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){rz(e,n);function e(t,r,i,a,s,o,c,d){var f=n.call(this,o,c)||this;if(f.yuvData=t,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new nt("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return wn.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wn.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;wn.arraycopy(this.yuvData,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*t,d=0;d<t;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+t/2,c=s,d=s+t-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new N_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(jm);var iz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){iz(e,n);function e(t,r,i,a,s,o,c){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,t.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var y=t[g],v=y>>16&255,b=y>>7&510,A=y&255;p[g]=(v+b+A)/4&255}d.luminances=p}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new nt("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return wn.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wn.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;wn.arraycopy(this.luminances,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new N_(this)},e})(jm);var az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sz=function(n){az(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Ar),oz=function(){function n(){}return n.ISO_8859_1=Ar.ISO8859_1,n}(),rw,lz=301,cz=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=lz);return{LOG:n,ALOG:e}};rw=cz([],[]),rw.LOG;rw.ALOG;var EI;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(EI||(EI={}));var SI=129,R4=230,uz=231,dz=235,fz=236,hz=237,pz=238,gz=239,mz=240,kx=254,yz=254,TI="[)>05",CI="[)>06",II="",sn=0,qr=1,_i=2,wr=3,kr=4,ai=5,vz=function(){function n(){}return n.prototype.getEncodingMode=function(){return sn},n.prototype.encode=function(e){var t=Pa.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Pa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ai:e.writeCodeword(uz),e.signalEncoderChange(ai);return;case qr:e.writeCodeword(R4),e.signalEncoderChange(qr);return;case wr:e.writeCodeword(pz),e.signalEncoderChange(wr);break;case _i:e.writeCodeword(gz),e.signalEncoderChange(_i);break;case kr:e.writeCodeword(mz),e.signalEncoderChange(kr);break;default:throw new Error("Illegal mode: "+i)}else Pa.isExtendedASCII(r)?(e.writeCodeword(dz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Pa.isDigit(e)&&Pa.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),xz=function(){function n(){}return n.prototype.getEncodingMode=function(){return ai},n.prototype.encode=function(e){var t=new _t;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Pa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(sn);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,Ft.getCharAt(a));else if(a<=1555)t.setCharAt(0,Ft.getCharAt(Math.floor(a/250)+249)),t.insert(1,Ft.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),j_=function(){function n(){}return n.prototype.getEncodingMode=function(){return qr},n.prototype.encodeMaximal=function(e){for(var t=new _t,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(t.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(R4),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new _t;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new _t;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var d=t.length();if(d%3===0){var f=Pa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(sn);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(kx)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(kx),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(kx)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(sn)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new _t;return a.append(r),a.append(i),a.toString()},n}(),wz=function(){function n(){}return n.prototype.getEncodingMode=function(){return kr},n.prototype.encode=function(e){for(var t=new _t;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=Pa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(sn);break}}}t.append(Ft.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(sn)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ft.getCharAt(e-64)):Pa.illegalCharacter(Ft.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new _t;return p.append(c),t>=2&&p.append(d),t>=3&&p.append(f),p.toString()},n}(),_z=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xt=function(){function n(e,t,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var s,o;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=bz(Ez),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(t===1&&f.rectangular)&&!(t===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Az=function(n){_z(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Xt),Ez=[new Xt(!1,3,5,8,8,1),new Xt(!1,5,7,10,10,1),new Xt(!0,5,7,16,6,1),new Xt(!1,8,10,12,12,1),new Xt(!0,10,11,14,6,2),new Xt(!1,12,12,14,14,1),new Xt(!0,16,14,24,10,1),new Xt(!1,18,14,16,16,1),new Xt(!1,22,18,18,18,1),new Xt(!0,22,18,16,10,2),new Xt(!1,30,20,20,20,1),new Xt(!0,32,24,16,14,2),new Xt(!1,36,24,22,22,1),new Xt(!1,44,28,24,24,1),new Xt(!0,49,28,22,14,2),new Xt(!1,62,36,14,14,4),new Xt(!1,86,42,16,16,4),new Xt(!1,114,48,18,18,4),new Xt(!1,144,56,20,20,4),new Xt(!1,174,68,22,22,4),new Xt(!1,204,84,24,24,4,102,42),new Xt(!1,280,112,14,14,16,140,56),new Xt(!1,368,144,16,16,16,92,36),new Xt(!1,456,192,18,18,16,114,48),new Xt(!1,576,224,20,20,16,144,56),new Xt(!1,696,272,22,22,16,174,68),new Xt(!1,816,336,24,24,16,136,56),new Xt(!1,1050,408,18,18,36,175,68),new Xt(!1,1304,496,20,20,36,163,62),new Az],Sz=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),r=new _t,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new _t,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Xt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),Tz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cz=function(n){Tz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return wr},e.prototype.encode=function(t){for(var r=new _t;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=Pa.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(sn);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Pa.illegalCharacter(Ft.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(yz),t.getNewEncoding()<0&&t.signalEncoderChange(sn)},e}(j_),Iz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dz=function(n){Iz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return _i},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(j_),Pa=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=SI+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new j_,o=[new vz,s,new Dz,new Cz,new wz,new xz],c=new Sz(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(TI)&&e.endsWith(II)?(c.writeCodeword(fz),c.setSkipAtEnd(2),c.pos+=TI.length):e.startsWith(CI)&&e.endsWith(II)&&(c.writeCodeword(hz),c.setSkipAtEnd(2),c.pos+=CI.length);var d=sn;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==sn&&d!==ai&&d!==kr&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(SI);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===wr&&i===wr){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return sn}else if(r===kr&&i===kr){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return sn}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===sn?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Er.fill(s,0),Er.fill(o,0);var c=this.findMinimums(i,o,St.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[sn]===c)return sn;if(d===1){if(s[ai]>0)return ai;if(s[kr]>0)return kr;if(s[_i]>0)return _i;if(s[wr]>0)return wr}return qr}var f=e.charCodeAt(t+a);if(a++,this.isDigit(f)?i[sn]+=.5:this.isExtendedASCII(f)?(i[sn]=Math.ceil(i[sn]),i[sn]+=2):(i[sn]=Math.ceil(i[sn]),i[sn]++),this.isNativeC40(f)?i[qr]+=2/3:this.isExtendedASCII(f)?i[qr]+=8/3:i[qr]+=4/3,this.isNativeText(f)?i[_i]+=2/3:this.isExtendedASCII(f)?i[_i]+=8/3:i[_i]+=4/3,this.isNativeX12(f)?i[wr]+=2/3:this.isExtendedASCII(f)?i[wr]+=13/3:i[wr]+=10/3,this.isNativeEDIFACT(f)?i[kr]+=3/4:this.isExtendedASCII(f)?i[kr]+=17/4:i[kr]+=13/4,this.isSpecialB256(f)?i[ai]+=4:i[ai]++,a>=4){if(Er.fill(s,0),Er.fill(o,0),this.findMinimums(i,o,St.MAX_VALUE,s),o[sn]<this.min(o[ai],o[qr],o[_i],o[wr],o[kr]))return sn;if(o[ai]<o[sn]||o[ai]+1<this.min(o[qr],o[_i],o[wr],o[kr]))return ai;if(o[kr]+1<this.min(o[ai],o[qr],o[_i],o[wr],o[sn]))return kr;if(o[_i]+1<this.min(o[ai],o[qr],o[kr],o[wr],o[sn]))return _i;if(o[wr]+1<this.min(o[ai],o[qr],o[kr],o[_i],o[sn]))return wr;if(o[qr]+1<this.min(o[sn],o[ai],o[kr],o[_i])){if(o[qr]<o[wr])return qr;if(o[qr]===o[wr]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return wr;if(!this.isNativeX12(g))break;p++}return qr}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,Er.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=St.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Nx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DI=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return ma.encode(e,this.charset)!=null}catch{return!1}},n}(),Rz=function(){function n(e,t,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new DI(sz.forName(D))}),this.encoders=[];var f=[];f.push(new DI(oz.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var v=(i=void 0,Nx(f)),b=v.next();!b.done;b=v.next()){var A=b.value,E=e.charAt(g),T=E.charCodeAt(0);if(T===r||A.canEncode(E)){y=!0;break}}}catch(D){i={error:D}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!y)try{for(var C=(s=void 0,Nx(this.ENCODERS)),I=C.next();!I.done;I=C.next()){var A=I.value;if(A.canEncode(e.charAt(g))){f.push(A),y=!0;break}}}catch(D){s={error:D}}finally{try{I&&!I.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}y||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var O=0;try{for(var N=Nx(f),M=N.next();!M.done;M=N.next()){var A=M.value;this.encoders[O++]=A}}catch(D){c={error:D}}finally{try{M&&!M.done&&(d=N.return)&&d.call(N)}finally{if(c)throw c.error}}}var R=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){R=g;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ma.encode(Ft.getCharAt(e),this.encoders[t].name)},n}(),Mz=3,Oz=function(){function n(e,t,r){this.fnc1=r;var i=new Rz(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new _t,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||t.canEncode(o,f))&&this.addEdge(r,i+1,new RI(o,t,f,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new RI[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],r);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var c=-1,d=St.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=t.encode(g.c,g.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var v=g.previous===null?0:g.previous.encoderIndex;v!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],s=0;s<b.length;s++)b[s]=p[s];return b},n}(),RI=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=Mz),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),Pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var MI;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(MI||(MI={}));(function(n){Pz(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Oz);var kz=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),OI=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),Nz=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),Lz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U_=function(n){Lz(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+St.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(Nz),Bz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vz=function(n){Bz(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(U_);function Fz(n,e,t){return new Vz(n,e,t)}function vh(n,e,t){return new U_(n,e,t)}var jz=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Al=0,k1=1,ha=2,M4=3,ps=4,Uz=new U_(null,0,0),Lx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Hz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function zz(n){var e,t;try{for(var r=Hz(n),i=r.next();!i.done;i=r.next()){var a=i.value;Er.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Al][ps]=0,n[k1][ps]=0,n[k1][Al]=28,n[M4][ps]=0,n[ha][ps]=0,n[ha][Al]=15,n}var O4=zz(Er.createInt32Array(6,6)),$z=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gz=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Lx[this.mode][e];i=vh(i,a&65535,a>>16),r+=a>>16}var s=e===ha?4:5;return i=vh(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ha?4:5;return r=vh(r,O4[this.mode][e],i),r=vh(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===ps||this.mode===ha){var a=Lx[r][Al];t=vh(t,a&65535,a>>16),i+=a>>16,r=Al}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(t,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Fz(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Lx[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Vr;try{for(var o=$z(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return Ft.format("%s bits=%d bytes=%d",jz[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(Uz,Al,0,0),n}();function Wz(n){var e=Ft.getCharCode(" "),t=Ft.getCharCode("."),r=Ft.getCharCode(",");n[Al][e]=1;for(var i=Ft.getCharCode("Z"),a=Ft.getCharCode("A"),s=a;s<=i;s++)n[Al][s]=s-a+2;n[k1][e]=1;for(var o=Ft.getCharCode("z"),c=Ft.getCharCode("a"),s=c;s<=o;s++)n[k1][s]=s-c+2;n[ha][e]=1;for(var d=Ft.getCharCode("9"),f=Ft.getCharCode("0"),s=f;s<=d;s++)n[ha][s]=s-f+2;n[ha][r]=12,n[ha][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[M4][Ft.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)Ft.getCharCode(y[g])>0&&(n[ps][Ft.getCharCode(y[g])]=g);return n}var Bx=Wz(Er.createInt32Array(5,256)),Og=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yz=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Ft.getCharCode(" "),t=Ft.getCharCode(`
`),r=OI.singletonList(Gz.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ft.getCharCode("\r"):a=s===t?2:0;break;case Ft.getCharCode("."):a=s===e?3:0;break;case Ft.getCharCode(","):a=s===e?4:0;break;case Ft.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=OI.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=Og(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,t,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Bx[e.getMode()][i]>0,s=null,o=0;o<=ps;o++){var c=Bx[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===ha){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&O4[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||Bx[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var o=Og(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,t,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ps,r)),e.getMode()!==ps&&i.push(a.shiftAndAppend(ps,r)),r===3||r===4){var s=a.latchAndAppend(ha,16-r).latchAndAppend(ha,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var o=Og(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(E){return E!==A}))};try{for(var g=(i=void 0,Og(s)),y=g.next();!y.done;y=g.next()){var v=y.value,b=p(v);if(b==="break")break}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){t={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n}(),qz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new Yz(e).encode(),a=St.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new nt(Ft.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(c,o),f=n.WORD_SIZE[c];var g=d-d%f;if(p=n.stuffBits(i,f),p.getSize()+a>g)throw new nt("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new nt("Data to large for user specified layer")}else{f=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new nt("Data too large for an Aztec code");if(o=y<=3,c=o?y+1:y,d=n.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==n.WORD_SIZE[c])&&(f=n.WORD_SIZE[c],p=n.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var v=n.generateCheckWords(p,d,f),b=p.getSize()/f,A=n.generateModeMessage(o,c,b),E=(o?11:14)+c*4,T=new Int32Array(E),C;if(o){C=E;for(var y=0;y<T.length;y++)T[y]=y}else{C=E+1+2*St.truncDivision(St.truncDivision(E,2)-1,15);for(var I=St.truncDivision(E,2),O=St.truncDivision(C,2),y=0;y<I;y++){var N=y+St.truncDivision(y,15);T[I-y-1]=O-N-1,T[I+y]=O+N+1}}for(var M=new Ts(C),y=0,R=0;y<c;y++){for(var D=(c-y)*4+(o?9:12),B=0;B<D;B++)for(var L=B*2,P=0;P<2;P++)v.get(R+L+P)&&M.set(T[y*2+P],T[y*2+B]),v.get(R+D*2+L+P)&&M.set(T[y*2+B],T[E-1-y*2-P]),v.get(R+D*4+L+P)&&M.set(T[E-1-y*2-P],T[E-1-y*2-B]),v.get(R+D*6+L+P)&&M.set(T[E-1-y*2-B],T[y*2+P]);R+=D*8}if(n.drawModeMessage(M,o,C,A),o)n.drawBullsEye(M,St.truncDivision(C,2),5);else{n.drawBullsEye(M,St.truncDivision(C,2),7);for(var y=0,B=0;y<St.truncDivision(E,2)-1;y+=15,B+=16)for(var P=St.truncDivision(C,2)&1;P<C;P+=2)M.set(St.truncDivision(C,2)-B,P),M.set(St.truncDivision(C,2)+B,P),M.set(P,St.truncDivision(C,2)-B),M.set(P,St.truncDivision(C,2)+B)}var F=new kz;return F.setCompact(o),F.setSize(C),F.setLayers(c),F.setCodeWords(b),F.setMatrix(M),F},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Vr;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=St.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+St.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,o=new D4(n.getGF(r)),c=St.truncDivision(t,r),d=n.bitsToWords(e,r,c);o.encode(d,c-s);var f=t%r,p=new Vr;p.appendBits(0,f);try{for(var g=qz(Array.from(d)),y=g.next();!y.done;y=g.next()){var v=y.value;p.appendBits(v,r)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,c=0;c<t;c++)o|=e.get(a*t+c)?1<<t-c-1:0;i[a]=o}return i},n.getGF=function(e){switch(e){case 4:return Mi.AZTEC_PARAM;case 6:return Mi.AZTEC_DATA_6;case 8:return Mi.AZTEC_DATA_8;case 10:return Mi.AZTEC_DATA_10;case 12:return Mi.AZTEC_DATA_12;default:throw new nt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Vr,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(o|=1<<t-1-c);(o&a)===a?(r.appendBits(o&a,t),s--):(o&a)===0?(r.appendBits(o|1,t),s--):r.appendBits(o,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const Xz=({onDetected:n,onError:e})=>{const t=V.useRef(null),r=V.useRef(new KH),i=V.useRef(!1);return V.useEffect(()=>{const a=t.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),n(f.getText())),p&&!(p instanceof xe)&&(r.current.reset(),e(p.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError呼び出し",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[n,e]),x.jsx(de,{"data-testid":"barcode-scanner-container",children:x.jsx("video",{ref:t,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},Kz={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Qz=({onScan:n,onScanError:e})=>{const[t,r]=V.useState(!1),{setGlobalError:i}=V.useContext(di)||{setGlobalError:()=>{}},a=o=>{n(o),r(!1)},s=o=>{i(o),r(!1)};return x.jsxs(x.Fragment,{children:[x.jsx(st,{variant:"outlined",startIcon:x.jsx(X8,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),x.jsx(K8,{open:t,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:x.jsxs(de,{sx:Kz,children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[x.jsx(se,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),x.jsx(Qr,{onClick:()=>r(!1),children:x.jsx(se,{variant:"h6",children:"×"})})]}),x.jsx(Xz,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function Zz(){const[n,e]=V.useState(""),t=b0(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),e(a)},i=a=>{t(`/book/${a}`)};return x.jsxs(de,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[x.jsx(Fm,{title:"本を追加",subtitle:"新しい本をライブラリに追加","data-testid":"book-add-header"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsx(Qz,{onScan:r,onScanError:a=>console.error(a)}),x.jsx(cj,{isbn:n,onBookAdded:i})]})]})}const cl={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},ka=cl.NONE,Jz=n=>n!=null&&n>cl.NONE,Fh=n=>(n==null?void 0:n.rating)||ka,PI=n=>Jz(n)?n:0,N1=n=>{const e={[cl.NONE]:"ランク未設定",[cl.ONE]:"あまり面白くなかった",[cl.TWO]:"普通",[cl.THREE]:"まあまあ面白かった",[cl.FOUR]:"面白かった",[cl.FIVE]:"とても面白かった"};return e[n]||e[ka]},H_=n=>{const{user:e}=hr(),t=V.useContext(di),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState([]),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(async()=>{if(!e||!n){a([]),o(!1);return}try{o(!0),d(null);const v=Br(Ot,"books",n,"memos"),b=Hn(v,u0("createdAt","desc")),T=(await lr(b)).docs.map(C=>({id:C.id,...C.data(),rating:C.data().rating||ka})).sort((C,I)=>{var M,R,D,B;const O=PI(C.rating),N=PI(I.rating);return O!==N?N-O:new Date(((R=(M=I.createdAt)==null?void 0:M.toDate)==null?void 0:R.call(M))||I.createdAt||0)-new Date(((B=(D=C.createdAt)==null?void 0:D.toDate)==null?void 0:B.call(D))||C.createdAt||0)});a(T)}catch(v){console.error("Error fetching memos:",v),r("メモ一覧の取得に失敗しました。"),d("メモ一覧の取得に失敗しました。")}finally{o(!1)}},[e==null?void 0:e.uid,n]),p=V.useCallback(async v=>{if(!e||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const b=Br(Ot,"books",n,"memos"),A=await R1(b,{...v,userId:e.uid,createdAt:$i(),updatedAt:$i()}),E={id:A.id,...v,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(T=>[E,...T]),A.id}catch(b){throw console.error("Error adding memo:",b),r("メモの追加に失敗しました。"),b}},[e==null?void 0:e.uid,n]),g=V.useCallback(async(v,b)=>{if(!e||!n||!v)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const A=mo(Ot,"books",n,"memos",v);return await Vm(A,{...b,userId:e.uid,updatedAt:$i()}),a(E=>E.map(C=>C.id===v?{...C,...b,userId:e.uid,updatedAt:new Date}:C)),!0}catch(A){throw console.error("Error updating memo:",A),r("メモの更新に失敗しました。"),A}},[e==null?void 0:e.uid,n]),y=V.useCallback(async v=>{if(!e||!n||!v)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const b=mo(Ot,"books",n,"memos",v);return await WF(b),a(A=>A.filter(E=>E.id!==v)),!0}catch(b){throw console.error("Error deleting memo:",b),r("メモの削除に失敗しました。"),b}},[e==null?void 0:e.uid,n]);return V.useEffect(()=>{f()},[f]),{memos:i,loading:s,error:c,fetchMemos:f,addMemo:p,updateMemo:g,deleteMemo:y}},kI=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${t}/${r}/${i}`}catch{return""}},e$=({memo:n,onEdit:e,onDelete:t,onClick:r})=>{const i=hm("(max-width:600px)"),[a,s]=V.useState(!1),d=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),f=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,p=v=>{v&&v.stopPropagation(),s(!1),typeof e=="function"&&e(n,!0)},g=v=>{v&&v.stopPropagation(),s(!1),t(n.id)},y=G3({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?x.jsxs(de,{position:"relative",...y,sx:{mb:2},children:[x.jsxs(Fn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[x.jsxs(jn,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden"},children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:d}),n.comment&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:n.comment}),Fh(n)>0&&x.jsx(Md,{value:Fh(n),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),x.jsx(uT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:x.jsxs(Zh,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&x.jsxs(se,{variant:"caption",children:["p.",n.page]}),f&&x.jsx(se,{variant:"caption",color:"text.secondary",children:kI(f)}),Array.isArray(n.tags)&&n.tags.map((v,b)=>x.jsx(Cn,{label:v,size:"small",color:"secondary"},b))]})})]}),a&&x.jsxs(de,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[x.jsx(Qr,{onClick:p,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:x.jsx(g2,{})}),x.jsx(Qr,{onClick:g,sx:{bgcolor:"error.main",color:"white"},size:"large",children:x.jsx(dT,{})})]})]}):x.jsxs(Fn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[x.jsxs(jn,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden"},children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),n.comment&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.comment}),Fh(n)>0&&x.jsx(Md,{value:Fh(n),readOnly:!0,size:"small",sx:{mt:.5}})]}),x.jsxs(uT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[x.jsxs(Zh,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&x.jsxs(se,{variant:"caption",children:["p.",n.page]}),f&&x.jsx(se,{variant:"caption",color:"text.secondary",children:kI(f)}),Array.isArray(n.tags)&&n.tags.map((v,b)=>x.jsx(Cn,{label:v,size:"small",color:"secondary"},b))]}),x.jsxs(de,{sx:{display:{xs:"none",sm:"flex"}},children:[x.jsx(Qr,{"aria-label":"edit",onClick:p,size:"small","data-testid":"memo-edit-button",children:x.jsx(g2,{fontSize:"small"})}),x.jsx(Qr,{"aria-label":"delete",onClick:g,size:"small","data-testid":"memo-delete-button",children:x.jsx(dT,{fontSize:"small"})})]})]})]})},t$=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},P4=({open:n,memo:e,bookId:t,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:o}=V.useContext(di),{updateMemo:c,deleteMemo:d}=H_(t),[f,p]=V.useState(s?"edit":"view"),[g,y]=V.useState(null),[v,b]=V.useState(!1),[A,E]=V.useState("");Pi.useEffect(()=>{e&&(y({...e,rating:Fh(e)}),p(s?"edit":"view"),b(!1),E(""))},[e,s]);const T=()=>{y(null),p("view"),b(!1),E(""),r()},C=async O=>{if(O.preventDefault(),!g||!g.text.trim())return;let N=g.tags||[];A&&!N.includes(A)&&(N=[...N,A]);try{await c(g.id,{text:g.text,comment:g.comment,page:Number(g.page)||null,tags:N,rating:g.rating||ka}),T(),i&&i()}catch(M){console.error("Error updating memo: ",M),o("メモの更新に失敗しました。")}},I=async O=>{try{await d(O),T(),a&&a()}catch(N){console.error("Error deleting memo: ",N),o("メモの削除に失敗しました。")}};return e?x.jsxs(x.Fragment,{children:[x.jsxs(Ba,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[x.jsx(bs,{"data-testid":"memo-detail-title",children:"メモ詳細"}),x.jsx(Va,{children:f==="view"?x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:g==null?void 0:g.text}),(g==null?void 0:g.comment)&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.comment}),(g==null?void 0:g.rating)&&g.rating>0&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(Md,{value:g.rating,readOnly:!0,size:"small",sx:{mb:.5}}),x.jsx(se,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:N1(g.rating)})]}),x.jsx(Zh,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(g==null?void 0:g.tags)&&g.tags.map((O,N)=>x.jsx(Cn,{label:O,size:"small",color:"secondary"},N))}),(g==null?void 0:g.page)&&x.jsxs(se,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",g.page]}),(g==null?void 0:g.createdAt)&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:t$(g.createdAt)})]}):x.jsxs(de,{component:"form",onSubmit:C,sx:{mt:1},children:[x.jsx(Pt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(g==null?void 0:g.text)||"",onChange:O=>y({...g,text:O.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(Pt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(g==null?void 0:g.comment)||"",onChange:O=>y({...g,comment:O.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(Pt,{label:"ページ番号",type:"number",value:(g==null?void 0:g.page)||"",onChange:O=>y({...g,page:O.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(fa,{margin:"normal",fullWidth:!0,children:[x.jsx(m2,{component:"legend",children:"ランク評価"}),x.jsx(Md,{value:(g==null?void 0:g.rating)||ka,onChange:(O,N)=>{y({...g,rating:N||ka})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),(g==null?void 0:g.rating)&&g.rating>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:N1(g.rating)})]}),x.jsx(uo,{multiple:!0,freeSolo:!0,options:[],value:(g==null?void 0:g.tags)||[],getOptionLabel:O=>typeof O=="string"?O:O.inputValue||O.tag||"",onChange:(O,N)=>{const M=(N||[]).map(R=>{if(typeof R=="string")return R;if(R&&typeof R=="object"){if("inputValue"in R&&R.inputValue)return R.inputValue;if("tag"in R&&R.tag)return R.tag}return""}).filter(Boolean);y({...g,tags:M})},inputValue:A,onInputChange:(O,N)=>E(N),renderInput:O=>x.jsx(Pt,{...O,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...O.inputProps,"data-testid":"memo-tags-input"}})})]})}),x.jsx(Fa,{children:f==="view"?x.jsxs(x.Fragment,{children:[x.jsx(st,{onClick:()=>p("edit"),"data-testid":"memo-edit-button",children:"編集"}),x.jsx(st,{onClick:()=>b(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),x.jsx(st,{onClick:T,"data-testid":"memo-close-button",children:"閉じる"})]}):x.jsxs(x.Fragment,{children:[x.jsx(st,{onClick:()=>p("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:C,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),x.jsxs(Ba,{open:v,onClose:()=>b(!1),"data-testid":"memo-delete-dialog",children:[x.jsx(bs,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),x.jsx(Va,{children:x.jsx(se,{children:"このメモを削除すると、元に戻すことはできません。"})}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:()=>b(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:()=>{I(g==null?void 0:g.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},n$=({bookId:n,onMemoUpdated:e})=>{const{setGlobalError:t}=V.useContext(di),{memos:r,loading:i,deleteMemo:a}=H_(n),[s,o]=V.useState(null),[c,d]=V.useState(!1),[f,p]=V.useState(!1),[g,y]=V.useState(null),[v,b]=V.useState(!1),A=(N,M=!1)=>{o(N),b(M),d(!0)},E=N=>{const M=r.find(R=>R.id===N);M&&(y(M),p(!0))},T=async()=>{if(g)try{await a(g.id),p(!1),y(null)}catch(N){console.error("Error deleting memo:",N),t("メモの削除に失敗しました。")}},C=()=>{o(null),d(!1)},I=()=>{p(!1),y(null)},O=()=>{e&&e()};return i?x.jsx(se,{children:"メモを読み込み中..."}):r.length===0?x.jsx(se,{children:"まだメモはありません。"}):x.jsxs(x.Fragment,{children:[x.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(N=>x.jsx(e$,{memo:N,onEdit:(M,R)=>A(M,R),onDelete:E,onClick:M=>A(M,!1)},N.id))}),x.jsx(P4,{open:c,memo:s,bookId:n,onClose:C,onUpdate:O,onDelete:O,editMode:v}),x.jsxs(Ba,{open:f,onClose:I,"data-testid":"memo-delete-dialog",children:[x.jsx(bs,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),x.jsx(Va,{children:x.jsx(se,{children:"このメモを削除すると、元に戻すことはできません。"})}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:I,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:T,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},NI=({onTextDetected:n,disabled:e=!1})=>{const[t,r]=V.useState(!1),[i,a]=V.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] ペーストされたテキスト:",c),n(c.trim())):a("クリップボードが空です")}else a("クリップボード機能が利用できません")}catch(c){console.error("[CameraPasteOCR] クリップボード読み取りエラー:",c),a("テキストの読み取りに失敗しました")}finally{r(!1)}},o=()=>{a(null)};return x.jsxs(x.Fragment,{children:[x.jsx(st,{variant:"outlined",startIcon:x.jsx(Q8,{}),onClick:s,disabled:e||t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:t?"読み取り中...":"テキストをペースト"}),x.jsx(id,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:x.jsx(ao,{onClose:o,severity:"error",children:i})})]})},r$=({bookId:n,bookTags:e=[],onMemoAdded:t,onClose:r})=>{const{user:i}=hr(),{setGlobalError:a}=V.useContext(di),{addMemo:s}=H_(n),[o,c]=V.useState(""),[d,f]=V.useState(""),[p,g]=V.useState(""),[y,v]=V.useState([]),[b,A]=V.useState(""),[E,T]=V.useState(ka),[C,I]=V.useState(!1),{tagOptions:O,fetchTagHistory:N,saveTagsToHistory:M}=vo("memo",i);V.useEffect(()=>{N()},[N]);const R=async P=>{if(P.preventDefault(),!o.trim()||C)return;I(!0),console.log("MemoAdd - handleSubmit開始:",{text:o,comment:d,page:p,tags:y});let F=y;b&&!y.includes(b)&&(F=[...y,b]),console.log("MemoAdd - 保存するタグ:",F);try{console.log("MemoAdd - addMemo呼び出し前");const q=await s({text:o,comment:d,page:Number(p)||null,tags:F,rating:E||ka});console.log("MemoAdd - addMemo呼び出し完了, memoId:",q),await M(F),console.log("MemoAdd - フォームリセット前"),c(""),f(""),g(""),v([]),A(""),T(ka),console.log("MemoAdd - フォームリセット完了"),t&&(console.log("MemoAdd - onMemoAddedコールバック呼び出し"),t())}catch(q){console.error("Error adding memo: ",q),a("メモの追加に失敗しました。")}finally{I(!1)}},D=()=>{r&&r()},B=P=>{console.log("[MemoAdd] OCRで検出されたテキスト:",P),c(P)};return r?x.jsxs(x.Fragment,{children:[x.jsx(bs,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),x.jsx(Va,{children:x.jsxs(de,{component:"form",onSubmit:R,sx:{mt:1},"data-testid":"memo-add-form",children:[x.jsx(Pt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(NI,{onTextDetected:B}),x.jsx(Pt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(Pt,{label:"ページ番号",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(fa,{margin:"normal",fullWidth:!0,children:[x.jsx(m2,{component:"legend",children:"ランク評価"}),x.jsx(Md,{value:E,onChange:(P,F)=>{T(F||ka)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),E>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:N1(E)})]}),x.jsx(uo,{multiple:!0,freeSolo:!0,options:O,value:y,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);v(q),await M(q)},inputValue:b,onInputChange:(P,F)=>A(F),renderInput:P=>x.jsx(Pt,{...P,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})})]})}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:D,"data-testid":"memo-add-cancel",disabled:C,children:"キャンセル"}),x.jsx(st,{onClick:R,variant:"contained","data-testid":"memo-add-submit",disabled:C,children:C?"追加中...":"メモを追加"})]})]}):x.jsxs(de,{component:"form",onSubmit:R,sx:{mt:1},"data-testid":"memo-add-form",children:[x.jsx(Pt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(NI,{onTextDetected:B}),x.jsx(Pt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(Pt,{label:"ページ番号",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(fa,{margin:"normal",fullWidth:!0,children:[x.jsx(m2,{component:"legend",children:"ランク評価"}),x.jsx(Md,{value:E,onChange:(P,F)=>{T(F||ka)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),E>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:N1(E)})]}),x.jsx(uo,{multiple:!0,freeSolo:!0,options:O,value:y,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);v(q),await M(q)},inputValue:b,onInputChange:(P,F)=>A(F),renderInput:P=>x.jsx(Pt,{...P,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})}),x.jsx(st,{type:"submit",variant:"contained",disabled:C,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:C?"追加中...":"メモを追加"})]})},z_=n=>{const{user:e}=hr(),t=V.useContext(di),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState([]),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(()=>{if(!e||!n)return console.log("useBookStatusHistory: No user or bookId",{user:!!e,bookId:n}),o(!1),()=>{};try{console.log("useBookStatusHistory: Setting up listener for bookId:",n),o(!0),d(null);const E=Br(Ot,"books",n,"statusHistory"),T=Hn(E);return YF(T,I=>{console.log("useBookStatusHistory: Snapshot received",{size:I.size,empty:I.empty,bookId:n});const O=I.docs.map(N=>({id:N.id,...N.data()}));O.sort((N,M)=>{var B,L;const R=(B=N.changedAt)!=null&&B.toDate?N.changedAt.toDate():new Date(N.changedAt||0);return((L=M.changedAt)!=null&&L.toDate?M.changedAt.toDate():new Date(M.changedAt||0))-R}),a(O),o(!1)},I=>{if(console.error("Error fetching status history:",I),console.error("Error details:",{code:I.code,message:I.message,bookId:n,userId:e.uid}),I.code==="permission-denied"){console.log("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1)})}catch(E){return console.error("Error setting up status history listener:",E),r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1),()=>{}}},[n,e,r]),p=V.useCallback(async(E,T,C=null)=>{if(!e||!n||!O1(E))throw new Error("無効なパラメータです。");try{const I=Br(Ot,"books",n,"statusHistory"),O={status:E,previousStatus:T||null,changedAt:$i(),changedBy:e.uid,notes:C||null,createdAt:$i()};return(await R1(I,O)).id}catch(I){throw console.error("Error adding status history:",I),r("ステータス履歴の保存に失敗しました。"),I}},[n,e,r]),g=V.useCallback(()=>{if(!i.length)return{};const E={},T=i.find(O=>O.status===yt.READING||O.status===yt.RE_READING);T&&(E.readingStartedAt=T.changedAt);const C=i.find(O=>O.status===yt.FINISHED);C&&(E.finishedAt=C.changedAt);const I=i.find(O=>O.status===yt.RE_READING);return I&&(E.reReadingStartedAt=I.changedAt),E},[i]),y=V.useCallback(()=>{var E;return i.length&&((E=i[0])==null?void 0:E.status)||null},[i]),v=V.useCallback(()=>{const E=g();if(!E.readingStartedAt||!E.finishedAt)return null;const T=E.readingStartedAt.toDate?E.readingStartedAt.toDate():new Date(E.readingStartedAt),C=E.finishedAt.toDate?E.finishedAt.toDate():new Date(E.finishedAt),I=Math.abs(C-T);return Math.ceil(I/(1e3*60*60*24))},[g]),b=V.useCallback(async(E,T,C)=>{if(!e||!n){console.log("useBookStatusHistory: No user or bookId for manual history addition",{user:!!e,bookId:n});return}if(!O1(T))throw new Error("Invalid status");try{console.log("useBookStatusHistory: Adding manual status history",{bookId:n,date:E,status:T,previousStatus:C,userId:e.uid});const I=Br(Ot,"books",n,"statusHistory"),O={status:T,previousStatus:C||"",changedAt:E,userId:e.uid};await R1(I,O),console.log("useBookStatusHistory: Manual status history added successfully")}catch(I){throw console.error("Error adding manual status history:",I),r("手動履歴の追加に失敗しました。"),I}},[e,n,r]),A=i.length>0?i[0]:null;return V.useEffect(()=>f(),[f]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:b,latestHistory:A,getImportantDates:g,getCurrentStatus:y,getReadingDuration:v,refetch:f}},i$=({book:n,bookId:e,onStatusChange:t})=>{const r=V.useContext(di),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=z_(e),[s,o]=V.useState(!1),[c,d]=V.useState(null),f=async v=>{if(!n||!O1(v))return;o(!0),d(null);const b=mo(Ot,"books",e),A=n.status||cr;try{const E={status:v,updatedAt:$i()};v===yt.FINISHED&&(E.finishedAt=$i()),await Vm(b,E);try{await a(v,A)}catch(T){console.error("Error adding status history:",T)}t(v)}catch(E){console.error("Error updating status:",E),i("ステータスの更新に失敗しました。")}finally{o(!1)}},p=v=>{d(v.currentTarget)},g=()=>{d(null)};if(!n)return null;const y=n.status||cr;return x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[x.jsx(Cn,{label:yo(y),color:ls(y),"data-testid":"book-status-chip"}),x.jsx(st,{onClick:p,variant:"outlined",disabled:s,endIcon:x.jsx(Z8,{}),"data-testid":"book-status-change-button",children:s?"更新中...":"ステータス変更"}),x.jsx(J8,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:v4.map(v=>x.jsx(Un,{onClick:()=>f(v),disabled:v===y,"data-testid":`status-menu-item-${v}`,children:yo(v)},v))})]})},a$=({book:n,bookId:e,onStatusChange:t})=>n?x.jsxs(de,{"data-testid":"book-info",children:[x.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:x.jsx(i$,{book:n,bookId:e,onStatusChange:t})}),x.jsx(de,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?x.jsx("img",{src:n.coverImageUrl,alt:`${n.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):x.jsx(de,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:x.jsx(se,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),x.jsxs(de,{sx:{mb:2},"data-testid":"book-details",children:[x.jsx(se,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),x.jsx(se,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&x.jsxs(se,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",n.publisher]}),n.publishedDate&&x.jsxs(se,{variant:"body1",color:"text.secondary","data-testid":"book-published-date",children:["出版日: ",n.publishedDate]})]})]}):null,s$=({book:n,bookId:e,onTagsChange:t})=>{const{user:r}=hr(),i=V.useContext(di),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=V.useState(!1),[c,d]=V.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=vo("book",r);V.useEffect(()=>{p()},[p]);const y=()=>{d(n.tags||[]),o(!0)},v=async()=>{if(n)try{const b=mo(Ot,"books",e);await Vm(b,{tags:c,updatedAt:$i()}),await g(c),t(c),o(!1)}catch(b){console.error("Error updating tags:",b),a("タグの更新に失敗しました。")}};return n?x.jsxs(de,{sx:{mb:2},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[x.jsx(se,{variant:"h6",children:"タグ:"}),x.jsx(Qr,{onClick:y,size:"small","data-testid":"edit-tags-button",children:x.jsx(g2,{})})]}),x.jsx(de,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((b,A)=>x.jsx(Cn,{label:b,size:"small"},A))}),x.jsxs(Ba,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[x.jsx(bs,{children:"タグを編集"}),x.jsx(Va,{children:x.jsx(uo,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(b,A)=>d(A),renderInput:b=>x.jsx(Pt,{...b,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(b,A)=>b.map((E,T)=>V.createElement(Cn,{...A({index:T}),key:T,label:E,size:"small"}))})}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:()=>o(!1),children:"キャンセル"}),x.jsx(st,{onClick:v,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},o$=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),k4={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},l$=k4;o$(k4);const c$=["localeText"],iw=V.createContext(null),N4=function(e){const{localeText:t}=e,r=Ne(e,c$),{adapter:i,localeText:a}=V.useContext(iw)??{adapter:void 0,localeText:void 0},s=vt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,y=V.useMemo(()=>H({},g,a,t),[g,a,t]),v=V.useMemo(()=>{if(!c)return i||null;const E=new c({locale:p,formats:d,instance:f});if(!E.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return E},[c,p,d,f,i]),b=V.useMemo(()=>v?{minDate:v.date("1900-01-01T00:00:00.000"),maxDate:v.date("2099-12-31T00:00:00.000")}:null,[v]),A=V.useMemo(()=>({utils:v,adapter:v,defaultDates:b,localeText:y}),[b,v,y]);return x.jsx(iw.Provider,{value:A,children:o})},$_=()=>{const n=V.useContext(iw);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=V.useMemo(()=>H({},l$,n.localeText),[n.localeText]);return V.useMemo(()=>H({},n,{localeText:e}),[n,e])},Gt=()=>$_().adapter,Ha=()=>$_().localeText,aw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],sw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],L4=["minDateTime","maxDateTime"],u$=[...aw,...sw,...L4],B4=n=>u$.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),d$=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],V4=(n,e)=>V.useMemo(()=>{const t=H({},n),r={},i=a=>{t.hasOwnProperty(a)&&(r[a]=t[a],delete t[a])};return d$.forEach(i),e==="date"?aw.forEach(i):e==="time"?sw.forEach(i):e==="date-time"&&(aw.forEach(i),sw.forEach(i),L4.forEach(i)),{forwardedProps:t,internalProps:r}},[n,e]),cs=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),f$=({openTo:n,defaultOpenTo:e,views:t,defaultViews:r})=>{const i=t??r;let a;if(n!=null)a=n;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},L1=(n,e,t)=>{let r=e;return r=n.setHours(r,n.getHours(t)),r=n.setMinutes(r,n.getMinutes(t)),r=n.setSeconds(r,n.getSeconds(t)),r=n.setMilliseconds(r,n.getMilliseconds(t)),r},d0=({date:n,disableFuture:e,disablePast:t,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=L1(s,s.date(void 0,o),n);t&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=n,f=n;for(s.isBefore(n,i)&&(d=i,f=null),s.isAfter(n,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},h$=(n,e)=>n.isValid(e)?e:null,B1=(n,e,t)=>e==null||!n.isValid(e)?t:e,p$=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),G_=(n,e)=>{const r=[n.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(n.addMonths(i,1))}return r},W_=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),Kh=(n,e)=>{const t=n.setHours(n.date(),e==="am"?2:14);return n.format(t,"meridiem")},F4=["year","month","day"],jd=n=>F4.includes(n),LI=(n,{format:e,views:t},r)=>{if(e!=null)return e;const i=n.formats;return cs(t,["year"])?i.year:cs(t,["month"])?i.month:cs(t,["day"])?i.dayOfMonth:cs(t,["month","year"])?`${i.month} ${i.year}`:cs(t,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},g$=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>n.addDays(t,r))},j4=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},zm=(n,e)=>{const t=[],r=n.date(void 0,"default"),i=n.startOfWeek(r),a=n.endOfWeek(r);let s=i;for(;n.isBefore(s,a);)t.push(s),s=n.addDays(s,1);return t.map(o=>n.formatByString(o,e))},U4=(n,e,t,r)=>{switch(t){case"month":return G_(n,n.date(void 0,e)).map(i=>n.formatByString(i,r));case"weekDay":return zm(n,r);case"meridiem":{const i=n.date(void 0,e);return[n.startOfDay(i),n.endOfDay(i)].map(a=>n.formatByString(a,r))}default:return[]}},BI="s",m$=["0","1","2","3","4","5","6","7","8","9"],y$=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),BI)==="0"?m$:Array.from({length:10}).map((r,i)=>n.formatByString(n.setSeconds(e,i),BI))},Gc=(n,e)=>{if(e[0]==="0")return n;const t=[];let r="";for(let i=0;i<n.length;i+=1){r+=n[i];const a=e.indexOf(r);a>-1&&(t.push(a.toString()),r="")}return t.join("")},Y_=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),VI=(n,e)=>{const t=Gc(n,e);return t!==" "&&!Number.isNaN(Number(t))},q_=(n,e)=>Number(n).toString().padStart(e,"0"),H4=(n,e,t,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=n.setDate(t.longestMonth,e);return n.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=q_(a,i.maxLength)),Y_(a,r)},X_=(n,e,t)=>{let r=n.value||n.placeholder;const i=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(r=Number(Gc(r,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!i&&r.length===1&&(r=`${r}‎`),e==="input-rtl"&&(r=`⁨${r}⁩`),r},FI=(n,e,t,r)=>n.formatByString(n.parse(e,t),r),v$=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,z4=(n,e,t,r)=>{if(e!=="digit")return!1;const i=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&r==="YY"?!0:n.formatByString(n.setYear(i,1),r).startsWith("0");case"month":return n.formatByString(n.startOfYear(i),r).length>1;case"day":return n.formatByString(n.startOfMonth(i),r).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),r).length>1;case"hours":return n.formatByString(n.setHours(i,1),r).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),r).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},x$=(n,e,t)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(X_(d,"non-input",t)))}const s=i.join(" "),o=a.join(" ");return n.parse(o,s)},w$=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),_$=(n,e,t)=>{const i=n.map(a=>{const s=X_(a,t?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return t?`⁦${i}⁩`:i},b$=(n,e,t)=>{const r=n.date(void 0,t),i=n.endOfYear(r),a=n.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=G_(n,r).reduce((c,d)=>{const f=n.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:v$(n,c)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:n.isValid(c)?n.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=zm(n,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=n.getHours(a);return Gc(n.formatByString(n.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(Gc(n.formatByString(n.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:n.getMinutes(a)}),seconds:()=>({minimum:0,maximum:n.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},A$=(n,e,t,r)=>{switch(e.type){case"year":return n.setYear(r,n.getYear(t));case"month":return n.setMonth(r,n.getMonth(t));case"weekDay":{let i=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(i=q_(i,e.maxLength));const a=zm(n,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return n.addDays(t,c)}case"day":return n.setDate(r,n.getDate(t));case"meridiem":{const i=n.getHours(t)<12,a=n.getHours(r);return i&&a>=12?n.addHours(r,-12):!i&&a<12?n.addHours(r,12):r}case"hours":return n.setHours(r,n.getHours(t));case"minutes":return n.setMinutes(r,n.getMinutes(t));case"seconds":return n.setSeconds(r,n.getSeconds(t));default:return r}},jI={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},UI=(n,e,t,r,i)=>[...t].sort((a,s)=>jI[a.type]-jI[s.type]).reduce((a,s)=>!i||s.modified?A$(n,s,e,a):a,r),E$=()=>navigator.userAgent.toLowerCase().includes("android"),S$=(n,e)=>{const t={};if(!e)return n.forEach((c,d)=>{const f=d===0?null:d-1,p=d===n.length-1?null:d+1;t[d]={leftIndex:f,rightIndex:p}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const r={},i={};let a=0,s=0,o=n.length-1;for(;o>=0;){s=n.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=n.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return n.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===n.length-1?null:r[f+1];t[d]={leftIndex:p,rightIndex:g}}),{neighbors:t,startIndex:r[0],endIndex:r[n.length-1]}},ow=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(r=>r.type===n);return t===-1?null:t}return n},T$=({adapter:n,format:e})=>{let t=10,r=e,i=n.expandFormat(e);for(;i!==r;)if(r=i,i=n.expandFormat(r),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},C$=({adapter:n,expandedFormat:e})=>{const t=[],{start:r,end:i}=n.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)t.push({start:s.index,end:a.lastIndex-1});return t},I$=(n,e,t,r)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},D$=({adapter:n,date:e,shouldRespectLeadingZeros:t,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=j4(n,s),d=z4(n,c.contentType,c.type,s),f=t?d:c.contentType==="digit",p=n.isValid(e);let g=p?n.formatByString(e,s):"",y=null;if(f)if(d)y=g===""?n.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);y=c.maxLength,p&&(g=Y_(q_(Gc(g,i),y),i))}return H({},c,{format:s,maxLength:y,value:g,placeholder:I$(n,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},R$=n=>{var y;const{adapter:e,expandedFormat:t,escapedParts:r}=n,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((v,b)=>b.length-v.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=v=>r.find(b=>b.start<=v&&b.end>=v);let g=0;for(;g<t.length;){const v=p(g),b=v!=null,A=(y=c.exec(t.slice(g)))==null?void 0:y[1];if(!b&&A!=null&&d.test(A)){let E=A;for(;E.length>0;){const T=f.exec(E)[1];E=E.slice(T.length),a.push(D$(H({},n,{now:i,token:T,startSeparator:s}))),s=""}g+=A.length}else{const E=t[g];b&&(v==null?void 0:v.start)===g||(v==null?void 0:v.end)===g||(a.length===0?s+=E:(a[a.length-1].endSeparator+=E,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},M$=({isRtl:n,formatDensity:e,sections:t})=>t.map(r=>{const i=a=>{let s=a;return n&&s!==null&&s.includes(" ")&&(s=`⁩${s}⁦`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),HI=n=>{let e=T$(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=C$(H({},n,{expandedFormat:e})),r=R$(H({},n,{expandedFormat:e,escapedParts:t}));return M$(H({},n,{sections:r}))},K_=V.createContext(null),Ll=()=>{const n=V.useContext(K_);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},Q_=()=>V.useContext(K_),$4=V.createContext(()=>!0);function O$(){return V.useContext($4)}const G4=V.createContext(null);function W4(){return V.useContext(G4)}const Y4=V.createContext(null),q4=V.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function X4(n){const{contextValue:e,actionsContextValue:t,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=n;return x.jsx(K_.Provider,{value:e,children:x.jsx(Y4.Provider,{value:t,children:x.jsx(q4.Provider,{value:r,children:x.jsx(G4.Provider,{value:i,children:x.jsx($4.Provider,{value:a,children:x.jsx(N4,{localeText:s,children:o})})})})})})}const P$=()=>{const n=V.useContext(Y4);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},K4=()=>$_().defaultDates,of=n=>{const e=Gt(),t=V.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},k$=Ml(x.jsx("path",{d:"M7 10l5 5 5-5z"})),N$=Ml(x.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),L$=Ml(x.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),B$=Ml(x.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Ml(x.jsxs(V.Fragment,{children:[x.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),x.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const V$=Ml(x.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),F$=Ml(x.jsxs(V.Fragment,{children:[x.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),x.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),j$=Ml(x.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function U$(n){return It("MuiPickersArrowSwitcher",n)}Dt("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const er=()=>V.useContext(q4),H$=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],z$=["ownerState"],$$=["ownerState"],G$=Me("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),W$=Me("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),zI=Me(Qr,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),Y$=n=>mt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},U$,n),q$=V.forwardRef(function(e,t){const r=ya(),i=vt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:y,isPreviousHidden:v,onGoToPrevious:b,previousLabel:A,labelId:E,classes:T}=i,C=Ne(i,H$),{ownerState:I}=er(),O=Y$(T),N={isDisabled:d,isHidden:f,goTo:p,label:g},M={isDisabled:y,isHidden:v,goTo:b,label:A},R=(o==null?void 0:o.previousIconButton)??zI,D=At({elementType:R,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"end",onClick:M.goTo},ownerState:H({},I,{isButtonHidden:M.isHidden??!1}),className:jt(O.button,O.previousIconButton)}),B=(o==null?void 0:o.nextIconButton)??zI,L=At({elementType:B,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:N.label,"aria-label":N.label,disabled:N.isDisabled,edge:"start",onClick:N.goTo},ownerState:H({},I,{isButtonHidden:N.isHidden??!1}),className:jt(O.button,O.nextIconButton)}),P=(o==null?void 0:o.leftArrowIcon)??N$,F=At({elementType:P,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:O.leftArrowIcon}),q=Ne(F,z$),X=(o==null?void 0:o.rightArrowIcon)??L$,G=At({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:O.rightArrowIcon}),Y=Ne(G,$$);return x.jsxs(G$,H({ref:t,className:jt(O.root,s),ownerState:I},C,{children:[x.jsx(R,H({},D,{children:r?x.jsx(X,H({},Y)):x.jsx(P,H({},q))})),a?x.jsx(se,{variant:"subtitle1",component:"span",id:E,children:a}):x.jsx(W$,{className:O.spacer,ownerState:I}),x.jsx(B,H({},L,{children:r?x.jsx(P,H({},q)):x.jsx(X,H({},Y))}))]}))}),Q4=["hours","minutes","seconds"],X$=["hours","minutes","seconds","meridiem"],f0=n=>Q4.includes(n),pd=n=>X$.includes(n),K$=(n,e)=>n?e.getHours(n)>=12?"pm":"am":null,lw=(n,e,t)=>t&&(n>=12?"pm":"am")!==e?e==="am"?n-12:n+12:n,Q$=(n,e,t,r)=>{const i=lw(r.getHours(n),e,t);return r.setHours(n,i)},$I=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),$m=(n,e)=>(t,r)=>n?e.isAfter(t,r):$I(t,e)>$I(r,e),GI=(n,{format:e,views:t,ampm:r})=>{if(e!=null)return e;const i=n.formats;return cs(t,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:cs(t,["minutes"])?i.minutes:cs(t,["seconds"])?i.seconds:cs(t,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:cs(t,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},Z4={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function Z$(n){const{steps:e,isViewMatchingStep:t,onStepChange:r}=n;return i=>{if(e==null)return Z4;const a=e.findIndex(o=>t(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>t(o,p)),f=e.find(p=>t(c,p));return d===f}}}}function Gm({onChange:n,onViewChange:e,openTo:t,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=V.useRef(t),f=V.useRef(i),p=V.useRef(i.includes(t)?t:i[0]),[g,y]=Od({name:"useViews",state:"view",controlled:r,default:p.current}),v=V.useRef(a?g:null),[b,A]=Od({name:"useViews",state:"focusedView",controlled:s,default:v.current}),E=c?c({setView:y,view:g,defaultView:p.current,views:i}):Z4;V.useEffect(()=>{(d.current&&d.current!==t||f.current&&f.current.some(D=>!i.includes(D)))&&(y(i.includes(t)?t:i[0]),f.current=i,d.current=t)},[t,y,g,i]);const T=i.indexOf(g),C=i[T-1]??null,I=i[T+1]??null,O=Ve((D,B)=>{A(B?D:L=>D===L?null:L),o==null||o(D,B)}),N=Ve(D=>{O(D,!0),D!==g&&(y(D),e&&e(D))}),M=Ve(()=>{I&&N(I)}),R=Ve((D,B,L)=>{const P=B==="finish",F=L?i.indexOf(L)<i.length-1:!!I;n(D,P&&F?"partial":B,L);let X=null;if(L!=null&&L!==g?X=L:P&&(X=g),X==null)return;const G=i[i.indexOf(X)+1];G==null||!E.areViewsInSameStep(X,G)||N(G)});return H({},E,{view:g,setView:N,focusedView:b,setFocusedView:O,nextView:I,previousView:C,defaultView:i.includes(t)?t:i[0],goToNextView:M,setValueAndGoToNextView:R})}function J$(n,{disableFuture:e,maxDate:t,timezone:r}){const i=Gt();return V.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,t)?a:t);return!i.isAfter(s,n)},[e,t,n,i,r])}function eG(n,{disablePast:e,minDate:t,timezone:r}){const i=Gt();return V.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,t)?a:t);return!i.isBefore(s,n)},[e,t,n,i,r])}function J4(n,e,t,r){const i=Gt(),a=V.useMemo(()=>i.isValid(n)?n:null,[i,n]),s=K$(a,i),o=V.useCallback(c=>{const d=a==null?null:Q$(a,c,!!e,i);t(d,r??"partial")},[e,a,t,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const h0=36,Wm=2,Ud=320,tG=280,Hd=336,eO=232,jh=48,Z_=Me("div")({overflow:"hidden",width:Ud,maxHeight:Hd,display:"flex",flexDirection:"column",margin:"0 auto"}),Zc=({name:n,timezone:e,value:t,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Gt(),[c,d]=Od({name:n,state:"value",controlled:t,default:r??s.emptyValue}),f=V.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=Ve(b=>f==null?b:s.setTimezone(o,f,b)),g=V.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),y=V.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),v=Ve((b,...A)=>{const E=p(b);d(E),a==null||a(E,...A)});return{value:y,handleValueChange:v,timezone:g}},Ra={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},nG=n=>Math.max(...n.map(e=>Ra[e.type]??1)),xh=(n,e,t)=>{if(e===Ra.year)return n.startOfYear(t);if(e===Ra.month)return n.startOfMonth(t);if(e===Ra.day)return n.startOfDay(t);let r=t;return e<Ra.minutes&&(r=n.setMinutes(r,0)),e<Ra.seconds&&(r=n.setSeconds(r,0)),e<Ra.milliseconds&&(r=n.setMilliseconds(r,0)),r},rG=({props:n,adapter:e,granularity:t,timezone:r,getTodayDate:i})=>{let a=i?i():xh(e,t,W_(e,r));n.minDate!=null&&e.isAfterDay(n.minDate,a)&&(a=xh(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,a)&&(a=xh(e,t,n.maxDate));const s=$m(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&s(n.minTime,a)&&(a=xh(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:L1(e,a,n.minTime))),n.maxTime!=null&&s(a,n.maxTime)&&(a=xh(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:L1(e,a,n.maxTime))),a},iG=["value","referenceDate"],Ai={emptyValue:null,getTodayValue:W_,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,r=Ne(n,iG);return r.adapter.isValid(e)?e:t??rG(r)},cleanValue:h$,areValuesEqual:p$,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},aG={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:w$,getV6InputValueFromSections:_$,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>H({},e,{value:""}))},tO=({value:n,referenceDate:e,adapter:t,props:r,timezone:i})=>{const a=V.useMemo(()=>Ai.getInitialReferenceValue({value:n,adapter:t,props:r,referenceDate:e,granularity:Ra.day,timezone:i,getTodayDate:()=>W_(t,i,"date")}),[e,i]);return n??a};function sG(n){return It("MuiDigitalClock",n)}const cw=Dt("MuiDigitalClock",["root","list","item"]);function oG(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const lG=n=>{setTimeout(n,0)},nO=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?nO(e.shadowRoot):e:null},li=n=>nO(zh(n)),V1=n=>Array.from(n.children).indexOf(li(n)),cG="@media (pointer: fine)";function uG(...n){return n.reduce((e,t)=>(Array.isArray(t)?e.push(...t):t!=null&&e.push(t),e),[])}const dG=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],fG=n=>mt({root:["root"],list:["list"],item:["item"]},sG,n),hG=Me(Z_,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:eO,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),pG=Me(P3,{name:"MuiDigitalClock",slot:"List"})({padding:0}),gG=Me(Un,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:n=>n!=="itemValue"&&n!=="formattedValue"})(({theme:n})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:As(n.palette.primary.main,n.palette.action.focusOpacity)}})),mG=V.forwardRef(function(e,t){const r=Gt(),i=V.useRef(null),a=Jr(t,i),s=V.useRef(null),o=vt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:y,defaultValue:v,referenceDate:b,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:E,minTime:T,disableFuture:C,disablePast:I,minutesStep:O=1,shouldDisableTime:N,onChange:M,view:R,openTo:D,onViewChange:B,focusedView:L,onFocusedViewChange:P,className:F,classes:q,disabled:X,readOnly:G,views:Y=["hours"],skipDisabled:Q=!1,timezone:Z}=o,fe=Ne(o,dG),{value:ge,handleValueChange:we,timezone:Ae}=Zc({name:"DigitalClock",timezone:Z,value:y,defaultValue:v,referenceDate:b,onChange:M,valueManager:Ai}),Pe=Ha(),Re=of(Ae),{ownerState:He}=er(),Ue=H({},He,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Qe=fG(q),ae=(p==null?void 0:p.digitalClockItem)??gG,me=At({elementType:ae,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ue,className:Qe.item}),he=tO({value:ge,referenceDate:b,adapter:r,props:o,timezone:Ae}),te=Ve($e=>we($e,"finish","hours")),{setValueAndGoToNextView:Le}=Gm({view:R,views:Y,openTo:D,onViewChange:B,onChange:te,focusedView:L,onFocusedViewChange:P}),ve=Ve($e=>{Le($e,"finish")});$n(()=>{if(i.current===null)return;const $e=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!$e)return;const Ie=$e.offsetTop;(f||L)&&$e.focus(),i.current.scrollTop=Ie-4});const je=V.useCallback($e=>{const Ie=$m(A,r),Oe=()=>!(T&&Ie(T,$e)||E&&Ie($e,E)||C&&Ie($e,Re)||I&&Ie(Re,$e)),ut=()=>r.getMinutes($e)%O!==0?!1:N?!N($e,"hours"):!0;return!Oe()||!ut()},[A,r,T,E,C,Re,I,O,N]),De=V.useMemo(()=>{const $e=[];let Oe=r.startOfDay(he);for(;r.isSameDay(he,Oe);)$e.push(Oe),Oe=r.addMinutes(Oe,d);return $e},[he,d,r]),Ce=De.findIndex($e=>r.isEqual($e,he)),We=$e=>{switch($e.key){case"PageUp":{const Ie=V1(s.current)-5,Oe=s.current.children,ut=Math.max(0,Ie),xt=Oe[ut];xt&&xt.focus(),$e.preventDefault();break}case"PageDown":{const Ie=V1(s.current)+5,Oe=s.current.children,ut=Math.min(Oe.length-1,Ie),xt=Oe[ut];xt&&xt.focus(),$e.preventDefault();break}}};return x.jsx(hG,H({ref:a,className:jt(Qe.root,F),ownerState:Ue},fe,{children:x.jsx(pG,{ref:s,role:"listbox","aria-label":Pe.timePickerToolbarTitle,className:Qe.list,onKeyDown:We,children:De.map(($e,Ie)=>{const Oe=je($e);if(Q&&Oe)return null;const ut=r.isEqual($e,ge),xt=r.format($e,c?"fullTime12h":"fullTime24h"),In=Ce===Ie||Ce===-1&&Ie===0?0:-1;return x.jsx(ae,H({onClick:()=>!G&&ve($e),selected:ut,disabled:X||Oe,disableRipple:G,role:"option","aria-disabled":G,"aria-selected":ut,tabIndex:In,itemValue:$e,formattedValue:xt},me,{children:xt}),`${$e.valueOf()}-${xt}`)})})}))});function yG(n){return It("MuiMultiSectionDigitalClock",n)}const uw=Dt("MuiMultiSectionDigitalClock",["root"]);function vG(n){return It("MuiMultiSectionDigitalClockSection",n)}const dw=Dt("MuiMultiSectionDigitalClockSection",["root","item"]),xG=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],wG=n=>mt({root:["root"],item:["item"]},vG,n),_G=Me(P3,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:n})=>({maxHeight:eO,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),bG=Me(Un,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:n})=>({padding:8,margin:"2px 4px",width:jh,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:As(n.palette.primary.main,n.palette.action.focusOpacity)}})),AG=V.forwardRef(function(e,t){const r=V.useRef(null),i=Jr(t,r),a=V.useRef(null),s=vt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:y,active:v,slots:b,slotProps:A,skipDisabled:E}=s,T=Ne(s,xG),{ownerState:C}=er(),I=H({},C,{hasDigitalClockAlreadyBeenRendered:!!r.current}),O=wG(f),N=(b==null?void 0:b.digitalClockSectionItem)??bG;$n(()=>{if(r.current===null)return;const D=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(v&&o&&D&&D.focus(),!D||a.current===D)return;a.current=D;const B=D.offsetTop,L=D.offsetHeight,P=r.current.clientHeight,F=r.current.scrollHeight,q=B-P/2+L/2,X=F-P,G=Math.min(q,X);r.current.scrollTop=Math.max(0,G)});const M=y.findIndex(D=>D.isFocused(D.value)),R=D=>{switch(D.key){case"PageUp":{const B=V1(r.current)-5,L=r.current.children,P=Math.max(0,B),F=L[P];F&&F.focus(),D.preventDefault();break}case"PageDown":{const B=V1(r.current)+5,L=r.current.children,P=Math.min(L.length-1,B),F=L[P];F&&F.focus(),D.preventDefault();break}}};return x.jsx(_G,H({ref:i,className:jt(O.root,d),ownerState:I,autoFocusItem:o&&v,role:"listbox",onKeyDown:R},T,{children:y.map((D,B)=>{var X;const L=(X=D.isDisabled)==null?void 0:X.call(D,D.value),P=p||L;if(E&&P)return null;const F=D.isSelected(D.value),q=M===B||M===-1&&B===0?0:-1;return x.jsx(N,H({onClick:()=>!g&&c(D.value),selected:F,disabled:P,disableRipple:g,role:"option","aria-disabled":g||P||void 0,"aria-label":D.ariaLabel,"aria-selected":F,tabIndex:q,className:O.item},A==null?void 0:A.digitalClockSectionItem,{children:D.label}),D.label)})}))}),EG=({now:n,value:e,adapter:t,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?t.getHours(e):null,d=[],f=(y,v)=>{const b=v??c;return b===null?!1:r?y===12?b===12||b===0:b===y||b-12===y:b===y},p=y=>f(y,t.getHours(o)),g=r?11:23;for(let y=0;y<=g;y+=s){let v=t.format(t.setHours(n,y),r?"hours12h":"hours24h");const b=a(parseInt(v,10).toString());v=t.formatNumber(v),d.push({value:y,label:v,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:b})}return d},WI=({value:n,adapter:e,isDisabled:t,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>n===null?!1:s&&n===d,c=d=>n===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:t,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},SG=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],TG=n=>mt({root:["root"]},yG,n),CG=Me(Z_,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:n})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(n.vars||n).palette.divider}`})),IG=V.forwardRef(function(e,t){const r=Gt(),i=ya(),a=vt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:y,disableIgnoringDatePartForTimeValidation:v=!1,maxTime:b,minTime:A,disableFuture:E,disablePast:T,minutesStep:C=1,shouldDisableTime:I,onChange:O,view:N,views:M=["hours","minutes"],openTo:R,onViewChange:D,focusedView:B,onFocusedViewChange:L,className:P,classes:F,disabled:q,readOnly:X,skipDisabled:G=!1,timezone:Y}=a,Q=Ne(a,SG),{value:Z,handleValueChange:fe,timezone:ge}=Zc({name:"MultiSectionDigitalClock",timezone:Y,value:p,defaultValue:g,referenceDate:y,onChange:O,valueManager:Ai}),we=Ha(),Ae=of(ge),Pe=V.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),Re=tO({value:Z,referenceDate:y,adapter:r,props:a,timezone:ge}),He=Ve((Ie,Oe,ut)=>fe(Ie,Oe,ut)),Ue=V.useMemo(()=>!s||!M.includes("hours")||M.includes("meridiem")?M:[...M,"meridiem"],[s,M]),{view:Qe,setValueAndGoToNextView:ae,focusedView:me}=Gm({view:N,views:Ue,openTo:R,onViewChange:D,onChange:He,focusedView:B,onFocusedViewChange:L}),he=Ve(Ie=>{ae(Ie,"finish","meridiem")}),{meridiemMode:te,handleMeridiemChange:Le}=J4(Re,s,he,"finish"),ve=V.useCallback((Ie,Oe)=>{const ut=$m(v,r),xt=Oe==="hours"||Oe==="minutes"&&Ue.includes("seconds"),hn=({start:tt,end:rt})=>!(A&&ut(A,rt)||b&&ut(tt,b)||E&&ut(tt,Ae)||T&&ut(Ae,xt?rt:tt)),In=(tt,rt=1)=>{if(tt%rt!==0)return!1;if(I)switch(Oe){case"hours":return!I(r.setHours(Re,tt),"hours");case"minutes":return!I(r.setMinutes(Re,tt),"minutes");case"seconds":return!I(r.setSeconds(Re,tt),"seconds");default:return!1}return!0};switch(Oe){case"hours":{const tt=lw(Ie,te,s),rt=r.setHours(Re,tt);if(r.getHours(rt)!==tt)return!0;const _n=r.setSeconds(r.setMinutes(rt,0),0),Xe=r.setSeconds(r.setMinutes(rt,59),59);return!hn({start:_n,end:Xe})||!In(tt)}case"minutes":{const tt=r.setMinutes(Re,Ie),rt=r.setSeconds(tt,0),_n=r.setSeconds(tt,59);return!hn({start:rt,end:_n})||!In(Ie,C)}case"seconds":{const tt=r.setSeconds(Re,Ie);return!hn({start:tt,end:tt})||!In(Ie)}default:throw new Error("not supported")}},[s,Re,v,b,te,A,C,I,r,E,T,Ae,Ue]),je=V.useCallback(Ie=>{switch(Ie){case"hours":return{onChange:Oe=>{const ut=lw(Oe,te,s);ae(r.setHours(Re,ut),"finish","hours")},items:EG({now:Ae,value:Z,ampm:s,adapter:r,isDisabled:Oe=>ve(Oe,"hours"),timeStep:Pe.hours,resolveAriaLabel:we.hoursClockNumberText,valueOrReferenceDate:Re})};case"minutes":return{onChange:Oe=>{ae(r.setMinutes(Re,Oe),"finish","minutes")},items:WI({value:r.getMinutes(Re),adapter:r,isDisabled:Oe=>ve(Oe,"minutes"),resolveLabel:Oe=>r.format(r.setMinutes(Ae,Oe),"minutes"),timeStep:Pe.minutes,hasValue:!!Z,resolveAriaLabel:we.minutesClockNumberText})};case"seconds":return{onChange:Oe=>{ae(r.setSeconds(Re,Oe),"finish","seconds")},items:WI({value:r.getSeconds(Re),adapter:r,isDisabled:Oe=>ve(Oe,"seconds"),resolveLabel:Oe=>r.format(r.setSeconds(Ae,Oe),"seconds"),timeStep:Pe.seconds,hasValue:!!Z,resolveAriaLabel:we.secondsClockNumberText})};case"meridiem":{const Oe=Kh(r,"am"),ut=Kh(r,"pm");return{onChange:Le,items:[{value:"am",label:Oe,isSelected:()=>!!Z&&te==="am",isFocused:()=>!!Re&&te==="am",ariaLabel:Oe},{value:"pm",label:ut,isSelected:()=>!!Z&&te==="pm",isFocused:()=>!!Re&&te==="pm",ariaLabel:ut}]}}default:throw new Error(`Unknown view: ${Ie} found.`)}},[Ae,Z,s,r,Pe.hours,Pe.minutes,Pe.seconds,we.hoursClockNumberText,we.minutesClockNumberText,we.secondsClockNumberText,te,ae,Re,ve,Le]),De=V.useMemo(()=>{if(!i)return Ue;const Ie=Ue.filter(Oe=>Oe!=="meridiem");return Ie.reverse(),Ue.includes("meridiem")&&Ie.push("meridiem"),Ie},[i,Ue]),Ce=V.useMemo(()=>Ue.reduce((Ie,Oe)=>H({},Ie,{[Oe]:je(Oe)}),{}),[Ue,je]),{ownerState:We}=er(),$e=TG(F);return x.jsx(CG,H({ref:t,className:jt($e.root,P),ownerState:We,role:"group"},Q,{children:De.map(Ie=>x.jsx(AG,{items:Ce[Ie].items,onChange:Ce[Ie].onChange,active:Qe===Ie,autoFocus:c||me===Ie,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:G,"aria-label":we.selectViewText(Ie)},Ie))}))});function DG(n){return It("MuiPickersDay",n)}const vc=Dt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function rO(n){const{disabled:e,selected:t,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=n,d=Gt(),{ownerState:f}=er();return V.useMemo(()=>H({},f,{day:a,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,t,e,r,i,s,o,c])}const RG=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],MG=(n,e)=>{const{isDaySelected:t,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return mt({root:["root",t&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},DG,n)},iO=({theme:n})=>H({},n.typography.caption,{width:h0,height:h0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:As(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${vc.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${vc.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${vc.disabled}:not(.${vc.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${vc.disabled}&.${vc.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Wm}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${vc.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),aO=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},OG=Me(eN,{name:"MuiPickersDay",slot:"Root",overridesResolver:aO})(iO),PG=Me("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:aO})(({theme:n})=>H({},iO({theme:n}),{opacity:0,pointerEvents:"none"})),wh=()=>{},kG=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=wh,onBlur:p=wh,onKeyDown:g=wh,onMouseDown:y=wh,onMouseEnter:v=wh,children:b,day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:I,disableMargin:O,disableHighlightToday:N,showDaysOutsideCurrentMonth:M}=r,R=Ne(r,RG),D=rO({day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:I,disableMargin:O,disableHighlightToday:N,showDaysOutsideCurrentMonth:M}),B=MG(s,D),L=Gt(),P=V.useRef(null),F=Jr(P,t);$n(()=>{i&&!T&&!o&&!I&&P.current.focus()},[i,T,o,I]);const q=G=>{y(G),I&&G.preventDefault()},X=G=>{G.defaultMuiPrevented=!0,T||d(A),I&&G.currentTarget.focus(),c&&c(G)};return I&&!M?x.jsx(PG,{className:jt(B.root,B.hiddenDaySpacingFiller,a),ownerState:D,role:R.role}):x.jsx(OG,H({className:jt(B.root,a),ref:F,centerRipple:!0,disabled:T,tabIndex:E?0:-1,onKeyDown:G=>g(G,A),onFocus:G=>f(G,A),onBlur:G=>p(G,A),onMouseEnter:G=>v(G,A),onClick:X,onMouseDown:q},R,{ownerState:D,children:b??L.format(A,"dayOfMonth")}))}),NG=V.memo(kG),Xu=n=>n.saveQuery!=null,sO=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Gt(),c=({keyPressed:p,sectionIndex:g},y,v)=>{const b=p.toLowerCase(),A=t.sections[g];if(t.characterQuery!=null&&(!v||v(t.characterQuery.value))&&t.characterQuery.sectionIndex===g){const T=`${t.characterQuery.value}${b}`,C=y(T,A);if(!Xu(C))return i({sectionIndex:g,value:T,sectionType:A.type}),C}const E=y(b,A);return Xu(E)&&!E.saveQuery?(i(null),null):(i({sectionIndex:g,value:b,sectionType:A.type}),Xu(E)?null:E)},d=p=>{const g=(b,A,E)=>{const T=A.filter(C=>C.toLowerCase().startsWith(E));return T.length===0?{saveQuery:!1}:{sectionValue:T[0],shouldGoToNextSection:T.length===1}},y=(b,A,E,T)=>{const C=I=>U4(o,r,A.type,I);if(A.contentType==="letter")return g(A.format,C(A.format),b);if(E&&T!=null&&j4(o,E).contentType==="letter"){const I=C(E),O=g(E,I,b);return Xu(O)?{saveQuery:!1}:H({},O,{sectionValue:T(O.sectionValue,I)})}return{saveQuery:!1}};return c(p,(b,A)=>{switch(A.type){case"month":{const E=T=>FI(o,T,o.formats.month,A.format);return y(b,A,o.formats.month,E)}case"weekDay":{const E=(T,C)=>C.indexOf(T).toString();return y(b,A,o.formats.weekday,E)}case"meridiem":return y(b,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:v,skipIfBelowMinimum:b,section:A})=>{const E=Gc(v,n),T=Number(E),C=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(T>C.maximum)return{saveQuery:!1};if(b&&T<C.minimum)return{saveQuery:!0};const I=T*10>C.maximum||E.length===C.maximum.toString().length;return{sectionValue:H4(o,T,C,n,A),shouldGoToNextSection:I}};return c(p,(v,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return g({queryValue:v,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){z4(o,"digit","month","MM");const A=g({queryValue:v,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(Xu(A))return A;const E=FI(o,A.sectionValue,"MM",b.format);return H({},A,{sectionValue:E})}if(b.type==="weekDay"){const A=g({queryValue:v,skipIfBelowMinimum:!0,section:b});if(Xu(A))return A;const E=zm(o,b.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:E})}return{saveQuery:!1}},v=>VI(v,n))};return Ve(p=>{const g=t.sections[p.sectionIndex],v=VI(p.keyPressed,n)?f(H({},p,{keyPressed:Y_(p.keyPressed,n)})):d(p);if(v==null){a(null);return}s({section:g,newSectionValue:v.sectionValue,shouldGoToNextSection:v.shouldGoToNextSection})})},J_=({props:n,value:e,timezone:t,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=n,p=r.date(void 0,t);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};J_.valueManager=Ai;const oO=({adapter:n,value:e,timezone:t,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=n.date(void 0,t),g=$m(c,n);switch(!0){case!n.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&n.isAfter(e,p)):return"disableFuture";case!!(d&&n.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&n.getMinutes(e)%s!==0):return"minutesStep";default:return null}};oO.valueManager=Ai;const Ym=({adapter:n,value:e,timezone:t,props:r})=>{const i=J_({adapter:n,value:e,timezone:t,props:r});return i!==null?i:oO({adapter:n,value:e,timezone:t,props:r})};Ym.valueManager=Ai;function lO(n){const{props:e,validator:t,value:r,timezone:i,onError:a}=n,s=Gt(),o=V.useRef(t.valueManager.defaultErrorState),c=t({adapter:s,value:r,timezone:i,props:e}),d=t.valueManager.hasError(c);V.useEffect(()=>{a&&!t.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[t,a,c,r]);const f=Ve(p=>t({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const LG=5e3,cO=n=>{var De;const e=Gt(),t=Ha(),r=ya(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:y,formatDensity:v="dense",selectedSections:b,onSelectedSectionsChange:A,shouldRespectLeadingZeros:E=!1,timezone:T,enableAccessibleFieldDOMStructure:C=!0},forwardedProps:{error:I}}=n,{value:O,handleValueChange:N,timezone:M}=Zc({name:"a field component",timezone:T,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),R=V.useRef(O);V.useEffect(()=>{R.current=O},[O]);const{hasValidationError:D}=lO({props:c,validator:i,timezone:M,value:O,onError:c.onError}),B=V.useMemo(()=>I!==void 0?I:D,[D,I]),L=V.useMemo(()=>y$(e),[e]),P=V.useMemo(()=>b$(e,L,M),[e,L,M]),F=V.useCallback(Ce=>o.getSectionsFromValue(Ce,We=>HI({adapter:e,localeText:t,localizedDigits:L,format:y,date:We,formatDensity:v,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r})),[o,y,t,L,r,E,e,v,C]),[q,X]=V.useState(()=>{const Ce=F(O),We={sections:Ce,lastExternalValue:O,lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},$e=nG(Ce),Ie=s.getInitialReferenceValue({referenceDate:p,value:O,adapter:e,props:c,granularity:$e,timezone:M});return H({},We,{referenceValue:Ie})}),[G,Y]=Od({controlled:b,default:null,name:"useField",state:"selectedSections"}),Q=Ce=>{Y(Ce),A==null||A(Ce)},Z=V.useMemo(()=>ow(G,q.sections),[G,q.sections]),fe=Z==="all"?0:Z,ge=V.useMemo(()=>S$(q.sections,r&&!C),[q.sections,r,C]),we=V.useMemo(()=>q.sections.every(Ce=>Ce.value===""),[q.sections]),Ae=Ce=>{const We={validationError:i({adapter:e,value:Ce,timezone:M,props:c})};N(Ce,We)},Pe=(Ce,We)=>{const $e=[...q.sections];return $e[Ce]=H({},$e[Ce],{value:We,modified:!0}),$e},Re=V.useRef(null),He=wd(),Ue=Ce=>{fe!=null&&(Re.current={sectionIndex:fe,value:Ce},He.start(0,()=>{Re.current=null}))},Qe=()=>{s.areValuesEqual(e,O,s.emptyValue)?X(Ce=>H({},Ce,{sections:Ce.sections.map(We=>H({},We,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(Ce=>H({},Ce,{characterQuery:null})),Ae(s.emptyValue))},ae=()=>{if(fe==null)return;const Ce=q.sections[fe];Ce.value!==""&&(Ue(""),o.getDateFromSection(O,Ce)===null?X(We=>H({},We,{sections:Pe(fe,""),tempValueStrAndroid:null,characterQuery:null})):(X(We=>H({},We,{characterQuery:null})),Ae(o.updateDateInValue(O,Ce,null))))},me=Ce=>{const We=(Ie,Oe)=>{const ut=e.parse(Ie,y);if(!e.isValid(ut))return null;const xt=HI({adapter:e,localeText:t,localizedDigits:L,format:y,date:ut,formatDensity:v,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r});return UI(e,ut,xt,Oe,!1)},$e=o.parseValueStr(Ce,q.referenceValue,We);Ae($e)},he=wd(),te=({section:Ce,newSectionValue:We,shouldGoToNextSection:$e})=>{He.clear(),he.clear();const Ie=o.getDateFromSection(O,Ce);$e&&fe<q.sections.length-1&&Q(fe+1);const Oe=Pe(fe,We),ut=o.getDateSectionsFromValue(Oe,Ce),xt=x$(e,ut,L);if(e.isValid(xt)){const hn=UI(e,xt,ut,o.getDateFromSection(q.referenceValue,Ce),!0);return Ie==null&&he.start(0,()=>{R.current===O&&X(In=>H({},In,{sections:o.clearDateSections(q.sections,Ce),tempValueStrAndroid:null}))}),Ae(o.updateDateInValue(O,Ce,hn))}return ut.every(hn=>hn.value!=="")&&(Ie==null||e.isValid(Ie))?(Ue(We),Ae(o.updateDateInValue(O,Ce,xt))):Ie!=null?(Ue(We),Ae(o.updateDateInValue(O,Ce,null))):X(hn=>H({},hn,{sections:Oe,tempValueStrAndroid:null}))},Le=Ce=>X(We=>H({},We,{tempValueStrAndroid:Ce})),ve=Ve(Ce=>{X(We=>H({},We,{characterQuery:Ce}))});if(O!==q.lastExternalValue){let Ce;Re.current!=null&&!e.isValid(o.getDateFromSection(O,q.sections[Re.current.sectionIndex]))?Ce=Pe(Re.current.sectionIndex,Re.current.value):Ce=F(O),X(We=>H({},We,{lastExternalValue:O,sections:Ce,sectionsDependencies:{format:y,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,O,We.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||y!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const Ce=F(O);X(We=>H({},We,{lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},sections:Ce,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!B&&fe==null&&ve(null),q.characterQuery!=null&&((De=q.sections[q.characterQuery.sectionIndex])==null?void 0:De.type)!==q.characterQuery.sectionType&&ve(null),V.useEffect(()=>{Re.current!=null&&(Re.current=null)});const je=wd();return V.useEffect(()=>(q.characterQuery!=null&&je.start(LG,()=>ve(null)),()=>{}),[q.characterQuery,ve,je]),V.useEffect(()=>{q.tempValueStrAndroid!=null&&fe!=null&&ae()},[q.sections]),{activeSectionIndex:fe,areAllSectionsEmpty:we,error:B,localizedDigits:L,parsedSelectedSections:Z,sectionOrder:ge,sectionsValueBoundaries:P,state:q,timezone:M,value:O,clearValue:Qe,clearActiveSection:ae,setCharacterQuery:ve,setSelectedSections:Q,setTempAndroidValueStr:Le,updateSectionValue:te,updateValueFromValueStr:me,getSectionsFromValue:F}};function uO(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:r}=n,i=Q_(),a=W4(),s=Jr(t.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=V.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=V.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},t):t,[i,a,t,c,s]);return e(d)}function eb(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:r,state:i}}=n;if(!t.isReady())return;const a=zh(t.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&t.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(li(t.getRoot())))return;const s=new window.Range;let o;r==="all"?o=t.getRoot():i.sections[r].type==="empty"?o=t.getSectionContainer(r):o=t.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function dO(n){const e=Gt(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:y,clearValue:v,clearActiveSection:b,setSelectedSections:A,updateSectionValue:E}}=n;return Ve(T=>{if(!i)switch(!0){case((T.ctrlKey||T.metaKey)&&String.fromCharCode(T.keyCode)==="A"&&!T.shiftKey&&!T.altKey):{T.preventDefault(),A("all");break}case T.key==="ArrowRight":{if(T.preventDefault(),d==null)A(y.startIndex);else if(d==="all")A(y.endIndex);else{const C=y.neighbors[d].rightIndex;C!==null&&A(C)}break}case T.key==="ArrowLeft":{if(T.preventDefault(),d==null)A(y.endIndex);else if(d==="all")A(y.startIndex);else{const C=y.neighbors[d].leftIndex;C!==null&&A(C)}break}case T.key==="Delete":{if(T.preventDefault(),a)break;d==null||d==="all"?v():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(T.key):{if(T.preventDefault(),a||c==null)break;d==="all"&&A(c);const C=s.sections[c],I=VG(e,g,C,T.key,f,p,t.getDateFromSection(o,C),{minutesStep:r});E({section:C,newSectionValue:I,shouldGoToNextSection:!1});break}}})}function BG(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function VG(n,e,t,r,i,a,s,o){const c=BG(r),d=r==="Home",f=r==="End",p=t.value===""||d||f,g=()=>{const v=i[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),b=T=>H4(n,T,v,a,t),A=t.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let E;if(p){if(t.type==="year"&&!f&&!d)return n.formatByString(n.date(void 0,e),t.format);c>0||d?E=v.minimum:E=v.maximum}else E=parseInt(Gc(t.value,a),10)+c*A;return E%A!==0&&((c<0||d)&&(E+=A-(A+E)%A),(c>0||f)&&(E-=E%A)),E>v.maximum?b(v.minimum+(E-v.maximum-1)%(v.maximum-v.minimum+1)):E<v.minimum?b(v.maximum-(v.minimum-E-1)%(v.maximum-v.minimum+1)):b(E)},y=()=>{const v=U4(n,e,t.type,t.format);if(v.length===0)return t.value;if(p)return c>0||d?v[0]:v[v.length-1];const E=((v.indexOf(t.value)+c)%v.length+v.length)%v.length;return v[E]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?g():y()}function FG(n){const{manager:e,focused:t,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:y,updateValueFromValueStr:v},internalPropsWithDefaults:{disabled:b=!1,readOnly:A=!1}}=n,E=dO({manager:e,internalPropsWithDefaults:o,stateResponse:a}),T=wd(),C=Ve(R=>{b||!i.isReady()||(r(!0),c==="all"?T.start(0,()=>{const D=document.getSelection().getRangeAt(0).startOffset;if(D===0){y(d.startIndex);return}let B=0,L=0;for(;L<D&&B<f.sections.length;){const P=f.sections[B];B+=1,L+=`${P.startSeparator}${P.value||P.placeholder}${P.endSeparator}`.length}y(B-1)}):t?i.getRoot().contains(R.target)||y(d.startIndex):(r(!0),y(d.startIndex)))}),I=Ve(R=>{if(!i.isReady()||c!=="all")return;const B=R.target.textContent??"";i.getRoot().innerHTML=f.sections.map(L=>`${L.startSeparator}${L.value||L.placeholder}${L.endSeparator}`).join(""),eb({focused:t,domGetters:i,stateResponse:a}),B.length===0||B.charCodeAt(0)===10?(p(),y("all")):B.length>1?v(B):(c==="all"&&y(0),s({keyPressed:B,sectionIndex:0}))}),O=Ve(R=>{if(A||c!=="all"){R.preventDefault();return}const D=R.clipboardData.getData("text");R.preventDefault(),g(null),v(D)}),N=Ve(()=>{if(t||b||!i.isReady())return;const R=li(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(R)!=null||y(d.startIndex)}),M=Ve(()=>{setTimeout(()=>{if(!i.isReady())return;const R=li(i.getRoot());!i.getRoot().contains(R)&&(r(!1),y(null))})});return{onKeyDown:E,onBlur:M,onFocus:N,onClick:C,onPaste:O,onInput:I,contentEditable:c==="all",tabIndex:c===0?-1:0}}function jG(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:r,updateValueFromValueStr:i}}=n,a=Ve(o=>{i(o.target.value)});return{value:V.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(r.sections),[t,r.sections,e]),onChange:a}}function UG(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,r=V.useCallback(i=>a=>{t||a.isDefaultPrevented()||e(i)},[t,e]);return V.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function HG(n){const e=Gt(),t=Ha(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:y,setSelectedSections:v,updateSectionValue:b,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:E=!1,readOnly:T=!1}}=n,C=c==="all",I=!C&&!E&&!T,O=Ve(L=>{if(!i.isReady())return;const P=f.sections[L];i.getSectionContent(L).innerHTML=P.value||P.placeholder,eb({focused:r,domGetters:i,stateResponse:a})}),N=Ve(L=>{if(!i.isReady())return;const P=L.target,F=P.textContent??"",q=i.getSectionIndexFromDOMElement(P),X=f.sections[q];if(T){O(q);return}if(F.length===0){if(X.value===""){O(q);return}const G=L.nativeEvent.inputType;if(G==="insertParagraph"||G==="insertLineBreak"){O(q);return}O(q),g();return}s({keyPressed:F,sectionIndex:q}),O(q)}),M=Ve(L=>{L.preventDefault()}),R=Ve(L=>{if(L.preventDefault(),T||E||typeof c!="number")return;const P=f.sections[c],F=L.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(F),X=/^[0-9]+$/.test(F),G=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(F);P.contentType==="letter"&&q||P.contentType==="digit"&&X||P.contentType==="digit-with-letter"&&G?(y(null),b({section:P,newSectionValue:F,shouldGoToNextSection:!0})):!q&&!X&&(y(null),A(F))}),D=Ve(L=>{L.preventDefault(),L.dataTransfer.dropEffect="none"}),B=V.useCallback(L=>()=>{E||v(L)},[E,v]);return V.useCallback((L,P)=>{const F=d[L.type]({currentDate:o.getDateFromSection(p,L),contentType:L.contentType,format:L.format});return{onInput:N,onPaste:R,onMouseUp:M,onDragOver:D,onFocus:B(P),"aria-readonly":T,"aria-valuenow":$G(L,e),"aria-valuemin":F.minimum,"aria-valuemax":F.maximum,"aria-valuetext":L.value?zG(L,e):t.empty,"aria-label":t[L.type],"aria-disabled":E,tabIndex:C||P>0?-1:0,contentEditable:!C&&!E&&!T,role:"spinbutton","data-range-position":L.dateName||void 0,spellCheck:I?!1:void 0,autoCapitalize:I?"off":void 0,autoCorrect:I?"off":void 0,children:L.value||L.placeholder,inputMode:L.contentType==="letter"?"text":"numeric"}},[d,C,E,T,I,t,e,N,R,M,D,B,o,p])}function zG(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit"){const r=e.setMonth(e.date(),Number(n.value)-1);return e.isValid(r)?e.format(r,"month"):""}const t=e.parse(n.value,n.format);return t&&e.isValid(t)?e.format(t,"month"):void 0}case"day":if(n.contentType==="digit"){const t=e.setDate(e.startOfYear(e.date()),Number(n.value));return e.isValid(t)?e.format(t,"dayOfMonthFull"):""}return n.value;case"weekDay":return;default:return}}function $G(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const GG=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=n,{internalProps:s,forwardedProps:o}=V4(e,i),c=uO({manager:t,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:y,onPaste:v,onKeyDown:b,onClear:A,clearable:E}=o,{disabled:T=!1,readOnly:C=!1,autoFocus:I=!1,focused:O,unstableFieldRef:N}=c,M=V.useRef(null),R=Jr(d,M),D=V.useMemo(()=>({isReady:()=>M.current!=null,getRoot:()=>M.current.getRoot(),getSectionContainer:De=>M.current.getSectionContainer(De),getSectionContent:De=>M.current.getSectionContent(De),getSectionIndexFromDOMElement:De=>M.current.getSectionIndexFromDOMElement(De)}),[M]),B=cO({manager:t,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:L,error:P,parsedSelectedSections:F,sectionOrder:q,state:X,value:G,clearValue:Y,setSelectedSections:Q}=B,Z=sO({stateResponse:B}),fe=a(G),[ge,we]=V.useState(!1);function Ae(De=0){if(T||!M.current||YI(M)!=null)return;const Ce=ow(De,X.sections);we(!0),M.current.getSectionContent(Ce).focus()}const Pe=FG({manager:t,internalPropsWithDefaults:c,stateResponse:B,applyCharacterEditing:Z,focused:ge,setFocused:we,domGetters:D}),Re=jG({manager:t,stateResponse:B}),He=UG({stateResponse:B,internalPropsWithDefaults:c}),Ue=HG({manager:t,stateResponse:B,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:D,focused:ge}),Qe=Ve(De=>{b==null||b(De),Pe.onKeyDown(De)}),ae=Ve(De=>{f==null||f(De),Pe.onBlur(De)}),me=Ve(De=>{g==null||g(De),Pe.onFocus(De)}),he=Ve(De=>{De.isDefaultPrevented()||(p==null||p(De),Pe.onClick(De))}),te=Ve(De=>{v==null||v(De),Pe.onPaste(De)}),Le=Ve(De=>{y==null||y(De),Pe.onInput(De)}),ve=Ve((De,...Ce)=>{De.preventDefault(),A==null||A(De,...Ce),Y(),qI(M)?Q(q.startIndex):Ae(0)}),je=V.useMemo(()=>X.sections.map((De,Ce)=>{const We=Ue(De,Ce);return{container:He(Ce),content:Ue(De,Ce),before:{children:De.startSeparator},after:{children:De.endSeparator,"data-range-position":De.isEndFormatSeparator?We["data-range-position"]:void 0}}}),[X.sections,He,Ue]);return V.useEffect(()=>{if(M.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));I&&!T&&M.current&&M.current.getSectionContent(q.startIndex).focus()},[]),$n(()=>{if(!(!ge||!M.current)){if(F==="all")M.current.getRoot().focus();else if(typeof F=="number"){const De=M.current.getSectionContent(F);De&&De.focus()}}},[F,ge]),$n(()=>{eb({focused:ge,domGetters:D,stateResponse:B})}),V.useImperativeHandle(N,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>YI(M),setSelectedSections:De=>{if(T||!M.current)return;const Ce=ow(De,X.sections);we((Ce==="all"?0:Ce)!==null),Q(De)},focusField:Ae,isFieldFocused:()=>qI(M)})),H({},o,Pe,{onBlur:ae,onClick:he,onFocus:me,onInput:Le,onPaste:te,onKeyDown:Qe,onClear:ve},Re,{error:P,clearable:!!(E&&!L&&!C&&!T),focused:O??ge,sectionListRef:R,enableAccessibleFieldDOMStructure:!0,elements:je,areAllSectionsEmpty:L,disabled:T,readOnly:C,autoFocus:I,openPickerAriaLabel:fe})};function YI(n){var t;const e=li((t=n.current)==null?void 0:t.getRoot());return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function qI(n){var t;const e=li((t=n.current)==null?void 0:t.getRoot());return!!n.current&&n.current.getRoot().contains(e)}const gd=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),WG=(n,e,t)=>{let r=0,i=t?1:0;const a=[];for(let s=0;s<n.length;s+=1){const o=n[s],c=X_(o,t?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=gd(d).length,p=d.length,g=gd(c),y=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,v=y+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:y,endInInput:v})),r+=f,i+=p}return a},YG=n=>{const e=ya(),t=wd(),r=wd(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=n,{internalProps:p,forwardedProps:g}=V4(i,o),y=uO({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:v,onClick:b,onPaste:A,onBlur:E,onKeyDown:T,onClear:C,clearable:I,inputRef:O,placeholder:N}=g,{readOnly:M=!1,disabled:R=!1,autoFocus:D=!1,focused:B,unstableFieldRef:L}=y,P=V.useRef(null),F=Jr(O,P),q=cO({manager:a,internalPropsWithDefaults:y,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:G,error:Y,localizedDigits:Q,parsedSelectedSections:Z,sectionOrder:fe,state:ge,value:we,clearValue:Ae,clearActiveSection:Pe,setCharacterQuery:Re,setSelectedSections:He,setTempAndroidValueStr:Ue,updateSectionValue:Qe,updateValueFromValueStr:ae,getSectionsFromValue:me}=q,he=sO({stateResponse:q}),te=f(we),Le=V.useMemo(()=>WG(ge.sections,Q,e),[ge.sections,Q,e]);function ve(){const Xe=P.current.selectionStart??0;let ht;Xe<=Le[0].startInInput||Xe>=Le[Le.length-1].endInInput?ht=1:ht=Le.findIndex(Zt=>Zt.startInInput-Zt.startSeparator.length>Xe);const kt=ht===-1?Le.length-1:ht-1;He(kt)}function je(Xe=0){var ht;li(P.current)!==P.current&&((ht=P.current)==null||ht.focus(),He(Xe))}const De=Ve(Xe=>{v==null||v(Xe);const ht=P.current;t.start(0,()=>{!ht||ht!==P.current||X==null&&(ht.value.length&&Number(ht.selectionEnd)-Number(ht.selectionStart)===ht.value.length?He("all"):ve())})}),Ce=Ve((Xe,...ht)=>{Xe.isDefaultPrevented()||(b==null||b(Xe,...ht),ve())}),We=Ve(Xe=>{if(A==null||A(Xe),Xe.preventDefault(),M||R)return;const ht=Xe.clipboardData.getData("text");if(typeof Z=="number"){const kt=ge.sections[Z],Zt=/^[a-zA-Z]+$/.test(ht),vn=/^[0-9]+$/.test(ht),bn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(ht);if(kt.contentType==="letter"&&Zt||kt.contentType==="digit"&&vn||kt.contentType==="digit-with-letter"&&bn){Re(null),Qe({section:kt,newSectionValue:ht,shouldGoToNextSection:!0});return}if(Zt||vn)return}Re(null),ae(ht)}),$e=Ve(Xe=>{E==null||E(Xe),He(null)}),Ie=Ve(Xe=>{if(M)return;const ht=Xe.target.value;if(ht===""){Ae();return}const kt=Xe.nativeEvent.data,Zt=kt&&kt.length>1,vn=Zt?kt:ht,bn=gd(vn);if(Z==="all"&&He(X),X==null||Zt){ae(Zt?kt:bn);return}let Wt;if(Z==="all"&&bn.length===1)Wt=bn;else{const jr=gd(d.getV6InputValueFromSections(Le,Q,e));let pt=-1,Pn=-1;for(let tr=0;tr<jr.length;tr+=1)pt===-1&&jr[tr]!==bn[tr]&&(pt=tr),Pn===-1&&jr[jr.length-tr-1]!==bn[bn.length-tr-1]&&(Pn=tr);const Wn=Le[X];if(pt<Wn.start||jr.length-Pn-1>Wn.end)return;const hi=bn.length-jr.length+Wn.end-gd(Wn.endSeparator||"").length;Wt=bn.slice(Wn.start+gd(Wn.startSeparator||"").length,hi)}if(Wt.length===0){E$()&&Ue(vn),Pe();return}he({keyPressed:Wt,sectionIndex:X})}),Oe=Ve((Xe,...ht)=>{Xe.preventDefault(),C==null||C(Xe,...ht),Ae(),XI(P)?He(fe.startIndex):je(0)}),ut=dO({manager:a,internalPropsWithDefaults:y,stateResponse:q}),xt=Ve(Xe=>{T==null||T(Xe),ut(Xe)}),hn=V.useMemo(()=>N!==void 0?N:d.getV6InputValueFromSections(me(c.emptyValue),Q,e),[N,d,me,c.emptyValue,Q,e]),In=V.useMemo(()=>ge.tempValueStrAndroid??d.getV6InputValueFromSections(ge.sections,Q,e),[ge.sections,d,ge.tempValueStrAndroid,Q,e]);V.useEffect(()=>{P.current&&P.current===li(P.current)&&He("all")},[]),$n(()=>{function Xe(){if(!P.current)return;if(Z==null){P.current.scrollLeft&&(P.current.scrollLeft=0);return}if(P.current!==li(P.current))return;const ht=P.current.scrollTop;if(Z==="all")P.current.select();else{const kt=Le[Z],Zt=kt.type==="empty"?kt.startInInput-kt.startSeparator.length:kt.startInInput,vn=kt.type==="empty"?kt.endInInput+kt.endSeparator.length:kt.endInInput;(Zt!==P.current.selectionStart||vn!==P.current.selectionEnd)&&P.current===li(P.current)&&P.current.setSelectionRange(Zt,vn),r.start(0,()=>{P.current&&P.current===li(P.current)&&P.current.selectionStart===P.current.selectionEnd&&(P.current.selectionStart!==Zt||P.current.selectionEnd!==vn)&&Xe()})}P.current.scrollTop=ht}Xe()});const tt=V.useMemo(()=>X==null||ge.sections[X].contentType==="letter"?"text":"numeric",[X,ge.sections]),_n=!(P.current&&P.current===li(P.current))&&G;return V.useImperativeHandle(L,()=>({getSections:()=>ge.sections,getActiveSectionIndex:()=>{const Xe=P.current.selectionStart??0,ht=P.current.selectionEnd??0;if(Xe===0&&ht===0)return null;const kt=Xe<=Le[0].startInInput?1:Le.findIndex(Zt=>Zt.startInInput-Zt.startSeparator.length>Xe);return kt===-1?Le.length-1:kt-1},setSelectedSections:Xe=>He(Xe),focusField:je,isFieldFocused:()=>XI(P)})),H({},g,{error:Y,clearable:!!(I&&!G&&!M&&!R),onBlur:$e,onClick:Ce,onFocus:De,onPaste:We,onKeyDown:xt,onClear:Oe,inputRef:F,enableAccessibleFieldDOMStructure:!1,placeholder:hn,inputMode:tt,autoComplete:"off",value:_n?"":In,onChange:Ie,focused:B,disabled:R,readOnly:M,autoFocus:D,openPickerAriaLabel:te})};function XI(n){return n.current===li(n.current)}const qG=n=>{const e=W4();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?GG:YG)(n)};function tb(n){const e=Gt(),t=K4();return V.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:B1(e,n.minDate,t.minDate),maxDate:B1(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function XG(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return V.useMemo(()=>({valueType:"date-time",validator:Ym,internal_valueManager:Ai,internal_fieldValueManager:aG,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:QG,internal_useOpenPickerButtonAriaLabel:KG}),[e])}function KG(n){const e=Gt(),t=Ha();return V.useMemo(()=>{const r=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(r)},[n,t,e])}function QG(n){const e=Gt(),t=fO(n),r=V.useMemo(()=>n.ampm??e.is12HourCycleInCurrentLocale(),[n.ampm,e]);return V.useMemo(()=>H({},n,t,{format:n.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[n,t,r,e])}function fO(n){const e=Gt(),t=K4();return V.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!n.minDateTime||!!n.maxDateTime||!!n.disableFuture||!!n.disablePast,minDate:B1(e,n.minDateTime??n.minDate,t.minDate),maxDate:B1(e,n.maxDateTime??n.maxDate,t.maxDate),minTime:n.minDateTime??n.minTime,maxTime:n.maxDateTime??n.maxTime}),[n.minDateTime,n.maxDateTime,n.minTime,n.maxTime,n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function nb(n){const{ownerState:e}=er(),t=ya();return V.useMemo(()=>H({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}function ZG(n){return It("MuiPickersTextField",n)}Dt("MuiPickersTextField",["root","focused","disabled","error","required"]);function JG(n){return It("MuiPickersInputBase",n)}const Sd=Dt("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function eW(n){return It("MuiPickersSectionList",n)}const _h=Dt("MuiPickersSectionList",["root","section","sectionContent"]),tW=["slots","slotProps","elements","sectionListRef","classes"],hO=Me("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),pO=Me("span",{name:"MuiPickersSectionList",slot:"Section"})({}),gO=Me("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),mO=Me("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),nW=n=>mt({root:["root"],section:["section"],sectionContent:["sectionContent"]},eW,n);function rW(n){const{slots:e,slotProps:t,element:r,classes:i}=n,{ownerState:a}=er(),s=(e==null?void 0:e.section)??pO,o=At({elementType:s,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??mO,d=At({elementType:c,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??gO,p=At({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=At({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return x.jsxs(s,H({},o,{children:[x.jsx(f,H({},p)),x.jsx(c,H({},d)),x.jsx(f,H({},g))]}))}const iW=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=Ne(r,tW),f=nW(c),{ownerState:p}=er(),g=V.useRef(null),y=Jr(t,g),v=E=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${E} before the mount of the component.`);return g.current};V.useImperativeHandle(o,()=>({getRoot(){return v("getRoot")},getSectionContainer(E){return v("getSectionContainer").querySelector(`.${_h.section}[data-sectionindex="${E}"]`)},getSectionContent(E){return v("getSectionContent").querySelector(`.${_h.section}[data-sectionindex="${E}"] .${_h.sectionContent}`)},getSectionIndexFromDOMElement(E){const T=v("getSectionIndexFromDOMElement");if(E==null||!T.contains(E))return null;let C=null;return E.classList.contains(_h.section)?C=E:E.classList.contains(_h.sectionContent)&&(C=E.parentElement),C==null?null:Number(C.dataset.sectionindex)}}));const b=(i==null?void 0:i.root)??hO,A=At({elementType:b,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:y,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return x.jsx(b,H({},A,{children:A.contentEditable?s.map(({content:E,before:T,after:C})=>`${T.children}${E.children}${C.children}`).join(""):x.jsx(V.Fragment,{children:s.map((E,T)=>x.jsx(rW,{slots:i,slotProps:a,element:E,classes:f},T))})}))}),yO=V.createContext(null),qm=()=>{const n=V.useContext(yO);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},aW=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],sW=n=>Math.round(n*1e5)/1e5,Xm=Me("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>H({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${sW(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),rb=Me(hO,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),oW=Me(pO,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),lW=Me(mO,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),cW=Me(gO,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),uW=Me("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(H({},nN)),dW=Me("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),fW=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",t&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${tN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return mt(p,JG,n)};function KI(n,e,t,r){var i;if(n.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function hW(n,e){var i,a,s,o,c;let t=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=n.length-1;d>=n.length/2;d-=1)t+=KI(n[d],e,d,"end");else for(let d=0;d<n.length/2;d+=1)t+=KI(n[d],e,d,"start");return{activeBarWidth:t,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const ib=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:y,contentEditable:v,tabIndex:b,onInput:A,onPaste:E,onKeyDown:T,name:C,readOnly:I,inputProps:O,inputRef:N,sectionListRef:M,onFocus:R,onBlur:D,classes:B,ownerState:L}=r,P=Ne(r,aW),F=qm(),q=V.useRef(null),X=V.useRef(null),G=V.useRef([]),Y=Jr(t,q),Q=Jr(O==null?void 0:O.ref,N),Z=k3();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const fe=L??F,ge=me=>{var he;(he=Z.onFocus)==null||he.call(Z,me),R==null||R(me)},we=me=>{ge(me)},Ae=me=>{var he,te;if(T==null||T(me),me.key==="Enter"&&!me.defaultMuiPrevented){if((he=q.current)!=null&&he.dataset.multiInput)return;const Le=(te=q.current)==null?void 0:te.closest("form"),ve=Le==null?void 0:Le.querySelector('[type="submit"]');if(!Le||!ve)return;me.preventDefault(),Le.requestSubmit(ve)}},Pe=me=>{var he;(he=Z.onBlur)==null||he.call(Z,me),D==null||D(me)};V.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),V.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const Re=fW(B,fe),He=(g==null?void 0:g.root)||Xm,Ue=At({elementType:He,externalSlotProps:y==null?void 0:y.root,externalForwardedProps:P,additionalProps:{"aria-invalid":Z.error,ref:Y},className:Re.root,ownerState:fe}),Qe=(g==null?void 0:g.input)||rb,ae=i.some(me=>me.content["data-range-position"]!==void 0);return V.useEffect(()=>{if(!ae||!fe.isPickerOpen)return;const{activeBarWidth:me,sectionOffsets:he}=hW(i,q);G.current=[he[0],he[1]],X.current&&(X.current.style.width=`${me}px`)},[i,ae,fe.isPickerOpen]),x.jsxs(He,H({},Ue,{children:[f,x.jsx(iW,{sectionListRef:M,elements:i,contentEditable:v,tabIndex:b,className:Re.sectionsContainer,onFocus:ge,onBlur:Pe,onInput:A,onPaste:E,onKeyDown:Ae,slots:{root:Qe,section:oW,sectionContent:lW,sectionSeparator:cW},slotProps:{root:H({},y==null?void 0:y.input,{ownerState:fe}),sectionContent:{className:Sd.sectionContent},sectionSeparator:({separatorPosition:me})=>({className:me==="before"?Sd.sectionBefore:Sd.sectionAfter})}}),d,p?p(H({},Z)):null,x.jsx(uW,H({name:C,className:Re.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:I,required:Z.required,disabled:Z.disabled,onFocus:we},O,{ref:Q})),ae&&x.jsx(dW,{className:Re.activeBar,ref:X,ownerState:{sectionOffsets:G.current}})]}))});function pW(n){return It("MuiPickersOutlinedInput",n)}const Ca=H({},Sd,Dt("MuiPickersOutlinedInput",["root","notchedOutline","input"])),gW=["children","className","label","notched","shrink"],mW=Me("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),QI=Me("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),yW=Me("legend",{shouldForwardProp:n=>va(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function vW(n){const{className:e,label:t,notched:r}=n,i=Ne(n,gW),a=qm();return x.jsx(mW,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:x.jsx(yW,{ownerState:a,notched:r,children:t?x.jsx(QI,{children:t}):x.jsx(QI,{className:"notranslate",children:"​"})})}))}const xW=["label","autoFocus","ownerState","classes","notched"],wW=Me(Xm,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ca.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ca.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ca.focused} .${Ca.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ca.disabled}`]:{[`& .${Ca.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${Ca.error} .${Ca.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var r;return((r=(n.vars??n).palette[t])==null?void 0:r.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${Ca.focused}:not(.${Ca.error}) .${Ca.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),_W=Me(rb,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),bW=n=>{const t=mt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},pW,n);return H({},n,t)},vO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=Ne(r,xW),c=k3(),d=bW(a);return x.jsx(ib,H({slots:{root:wW,input:_W},renderSuffix:f=>x.jsx(vW,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?x.jsxs(V.Fragment,{children:[i," ","*"]}):i})},o,{label:i,classes:d,ref:t}))});vO.muiName="Input";function AW(n){return It("MuiPickersFilledInput",n)}const xc=H({},Sd,Dt("MuiPickersFilledInput",["root","underline","input"])),EW=["label","autoFocus","disableUnderline","hiddenLabel","classes"],SW=Me(Xm,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${xc.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${xc.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xc.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xc.disabled}, .${xc.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${xc.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),TW=Me(rb,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>va(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),CW=(n,e)=>{const{inputHasUnderline:t}=e,i=mt({root:["root",t&&"underline"],input:["input"]},AW,n);return H({},n,i)},xO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=Ne(r,EW),d=qm(),f=H({},d,{inputHasUnderline:!a}),p=CW(o,f);return x.jsx(ib,H({slots:{root:SW,input:TW},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:t,ownerState:f}))});xO.muiName="Input";function IW(n){return It("MuiPickersFilledInput",n)}const bh=H({},Sd,Dt("MuiPickersInput",["root","underline","input"])),DW=["label","autoFocus","disableUnderline","ownerState","classes"],RW=Me(Xm,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(r=>(n.vars??n).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bh.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bh.disabled}, .${bh.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${bh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),MW=(n,e)=>{const{inputHasUnderline:t}=e,i=mt({root:["root",!t&&"underline"],input:["input"]},IW,n);return H({},n,i)},wO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=Ne(r,DW),c=qm(),d=H({},c,{inputHasUnderline:!a}),f=MW(s,d);return x.jsx(ib,H({slots:{root:RW},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:t}))});wO.muiName="Input";const OW=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],PW={standard:wO,filled:xO,outlined:vO},kW=Me(fa,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),NW=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldRequired:i}=e;return mt({root:["root",t&&!r&&"focused",r&&"disabled",i&&"required"]},ZG,n)},_O=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:y=!1,InputProps:v,inputProps:b,inputRef:A,sectionListRef:E,elements:T,areAllSectionsEmpty:C,onClick:I,onKeyDown:O,onKeyUp:N,onPaste:M,onInput:R,endAdornment:D,startAdornment:B,tabIndex:L,contentEditable:P,focused:F,value:q,onChange:X,fullWidth:G,id:Y,name:Q,helperText:Z,FormHelperTextProps:fe,label:ge,InputLabelProps:we,"data-active-range-position":Ae}=r,Pe=Ne(r,OW),Re=V.useRef(null),He=Jr(t,Re),Ue=_0(Y),Qe=Z&&Ue?`${Ue}-helper-text`:void 0,ae=ge&&Ue?`${Ue}-label`:void 0,me=nb({disabled:r.disabled,required:r.required,readOnly:v==null?void 0:v.readOnly}),he=V.useMemo(()=>H({},me,{isFieldValueEmpty:C,isFieldFocused:F??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:G??!1,hasStartAdornment:!!(B??(v==null?void 0:v.startAdornment)),hasEndAdornment:!!(D??(v==null?void 0:v.endAdornment)),inputHasLabel:!!ge,isLabelShrunk:!!(we!=null&&we.shrink)}),[me,C,F,f,r.size,c,G,B,D,v==null?void 0:v.startAdornment,v==null?void 0:v.endAdornment,ge,we==null?void 0:we.shrink]),te=NW(o,he),Le=PW[p],ve={};return p==="outlined"?(we&&typeof we.shrink<"u"&&(ve.notched=we.shrink),ve.label=ge):p==="filled"&&(ve.hiddenLabel=y),x.jsx(yO.Provider,{value:he,children:x.jsxs(kW,H({className:jt(te.root,s),ref:He,focused:F,disabled:d,variant:p,error:f,color:c,fullWidth:G,required:g,ownerState:he},Pe,{children:[ge!=null&&ge!==""&&x.jsx(Js,H({htmlFor:Ue,id:ae},we,{children:ge})),x.jsx(Le,H({elements:T,areAllSectionsEmpty:C,onClick:I,onKeyDown:O,onKeyUp:N,onInput:R,onPaste:M,onFocus:i,onBlur:a,endAdornment:D,startAdornment:B,tabIndex:L,contentEditable:P,value:q,onChange:X,id:Ue,fullWidth:G,inputProps:b,inputRef:A,sectionListRef:E,label:ge,name:Q,role:"group","aria-labelledby":ae,"aria-describedby":Qe,"aria-live":Qe?"polite":void 0,"data-active-range-position":Ae},ve,v)),Z&&x.jsx(rN,H({id:Qe},fe,{children:Z}))]}))})}),LW=["enableAccessibleFieldDOMStructure"],BW=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],VW=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],FW=["ownerState"],jW=["ownerState"],UW=["ownerState"],HW=["ownerState"],zW=["InputProps","inputProps"],Vx=()=>{},$W=n=>{var T,C,I,O,N,M,R,D,B;let{enableAccessibleFieldDOMStructure:e}=n,t=Ne(n,LW);if(e){const{InputProps:L,readOnly:P,onClear:F,clearable:q,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:Y}=t,Q=Ne(t,BW),Z=Sc>=6&&((T=Q==null?void 0:Q.slotProps)!=null&&T.input)?Qh((C=Q==null?void 0:Q.slotProps)==null?void 0:C.input,L):Vx;return{clearable:q,onClear:F,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:Y,textFieldProps:H({},Q,Sc>=6&&((I=Q==null?void 0:Q.slotProps)!=null&&I.input)?{slotProps:H({},Q==null?void 0:Q.slotProps,{input:fe=>H({},so(Z,fe),{readOnly:P})})}:{InputProps:H({},L??{},{readOnly:P})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:v}=t,b=Ne(t,VW),A=Sc>=6&&((O=b==null?void 0:b.slotProps)!=null&&O.input)?Qh((N=b==null?void 0:b.slotProps)==null?void 0:N.input,o):Vx,E=Sc>=6&&((M=b==null?void 0:b.slotProps)!=null&&M.htmlInput)?Qh((R=b==null?void 0:b.slotProps)==null?void 0:R.htmlInput,c):Vx;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:v,textFieldProps:H({},b,Sc>=6&&((D=b==null?void 0:b.slotProps)!=null&&D.input||(B=b==null?void 0:b.slotProps)!=null&&B.htmlInput)?{slotProps:H({},b==null?void 0:b.slotProps,{input:L=>H({},so(A,L),{readOnly:s}),htmlInput:L=>H({},so(E,L),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},ab=V.createContext({slots:{},slotProps:{},inputRef:void 0});function GW(n){var fe,ge,we;const{fieldResponse:e,defaultOpenPickerIcon:t}=n,r=Ha(),i=Q_(),a=V.useContext(ab),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=$W(e),g=nb(s),y=Ve(Ae=>{Ae.preventDefault(),i==null||i.setOpen(Pe=>!Pe)}),v=i?i.triggerStatus:"hidden",b=c?f:null,A=v!=="hidden"?p:null,E=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?Pt:_O),T=a.slots.inputAdornment??iN,C=At({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),I=Ne(C,FW),O=At({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),N=Ne(O,jW),M=a.slots.openPickerButton??Qr,R=At({elementType:M,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:v==="disabled",onClick:y,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),D=Ne(R,UW),B=a.slots.openPickerIcon??t,L=At({elementType:B,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),P=a.slots.clearButton??Qr,F=At({elementType:P,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&b!==A?b:!1},ownerState:g}),q=Ne(F,HW),X=a.slots.clearIcon??j$,G=At({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=Jr(s.ref,i==null?void 0:i.rootRef);const Y={},Q=so((Sc>=6&&((fe=s==null?void 0:s.slotProps)==null?void 0:fe.input))??s.InputProps,g);i&&(Y.ref=i.triggerRef),!(Q!=null&&Q.startAdornment)&&(b==="start"||A==="start")&&(Y.startAdornment=x.jsxs(T,H({},I,{children:[A==="start"&&x.jsx(M,H({},D,{children:x.jsx(B,H({},L))})),b==="start"&&x.jsx(P,H({},q,{children:x.jsx(X,H({},G))}))]}))),!(Q!=null&&Q.endAdornment)&&(b==="end"||A==="end")&&(Y.endAdornment=x.jsxs(T,H({},N,{children:[b==="end"&&x.jsx(P,H({},q,{children:x.jsx(X,H({},G))})),A==="end"&&x.jsx(M,H({},D,{children:x.jsx(B,H({},L))}))]}))),!(Y!=null&&Y.endAdornment)&&!(Y!=null&&Y.startAdornment)&&a.slots.inputAdornment&&(Y.endAdornment=x.jsx(T,H({},N))),b!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Sc>=6&&((ge=s==null?void 0:s.slotProps)!=null&&ge.input)?so(Qh(Q,Y),g):H({},Q,Y);return(we=s==null?void 0:s.slotProps)==null||delete we.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),x.jsx(E,H({},s,{InputProps:Z}))}function Qh(n,e){return n?e?t=>H({},so(e,t),so(n,t)):n:e}function WW(n){const{ref:e,externalForwardedProps:t,slotProps:r}=n,i=V.useContext(ab),a=Q_(),s=nb(t),{InputProps:o,inputProps:c}=t,d=Ne(t,zW),f=At({elementType:_O,externalSlotProps:Qh(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function YW(n){const{slots:e={},slotProps:t={},inputRef:r,children:i}=n,a=V.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return x.jsx(ab.Provider,{value:a,children:i})}const qW=n=>{const e=XG(n);return qG({manager:e,props:n})},XW=["slots","slotProps"],bO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=Ne(r,XW),o=WW({slotProps:a,ref:t,externalForwardedProps:s}),c=qW(o);return x.jsx(YW,{slots:i,slotProps:a,inputRef:s.inputRef,children:x.jsx(GW,{fieldResponse:c,defaultOpenPickerIcon:B$})})}),AO=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Gt();return V.useCallback(d=>J_({adapter:c,value:d,timezone:o,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,n,e,t,r,i,a,s,o])},KW=(n,e)=>(t,r)=>{switch(r.type){case"setVisibleDate":return H({},t,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,t.currentMonth)&&!n&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(t.currentMonth)===i)return t;let a=e.setTimezone(t.currentMonth,i);return e.getMonth(a)!==e.getMonth(t.currentMonth)&&(a=e.setMonth(a,e.getMonth(t.currentMonth))),H({},t,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},QW=n=>{const{value:e,referenceDate:t,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=n,y=Gt(),v=V.useRef(KW(!!d,y)).current,b=V.useMemo(()=>Ai.getInitialReferenceValue({value:e,adapter:y,timezone:p,props:n,referenceDate:t,granularity:Ra.day}),[t,p]),[A,E]=V.useReducer(v,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:y.startOfMonth(b),slideDirection:"left"}),T=AO({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});V.useEffect(()=>{E({type:"changeMonthTimezone",newTimezone:y.getTimezone(b)})},[b,y]);const C=Ve(({target:O,reason:N})=>{if(N==="cell-interaction"&&A.focusedDay!=null&&y.isSameDay(O,A.focusedDay))return;const M=N==="cell-interaction";let R,D;if(N==="cell-interaction")R=g(O,A.currentMonth),D=O;else if(R=y.isSameMonth(O,A.currentMonth)?A.currentMonth:y.startOfMonth(O),D=O,T(D)){const P=y.startOfMonth(O),F=y.endOfMonth(O);D=d0({adapter:y,date:D,minDate:y.isBefore(s,P)?P:s,maxDate:y.isAfter(a,F)?F:a,disablePast:i,disableFuture:r,isDateDisabled:T,timezone:p})}const B=!y.isSameMonth(A.currentMonth,R),L=!y.isSameYear(A.currentMonth,R);B&&(o==null||o(R)),L&&(c==null||c(y.startOfYear(R))),E({type:"setVisibleDate",month:R,direction:y.isAfterDay(R,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&D!=null&&y.isSameDay(D,A.focusedDay)?A.focusedDay:D,skipAnimation:M})}),I=V.useCallback(()=>{E({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:A,setVisibleDate:C,isDateDisabled:T,onMonthSwitchingAnimationEnd:I}},ZW=n=>It("MuiPickersFadeTransitionGroup",n);Dt("MuiPickersFadeTransitionGroup",["root"]);const JW=["children"],eY=n=>mt({root:["root"]},ZW,n),tY=Me(N3,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function EO(n){const e=vt({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=Ne(e,JW),c=eY(a),d=Yc();return r?s:x.jsx(tY,{className:jt(c.root,t),ownerState:o,children:x.jsx(pm,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const nY=n=>It("MuiPickersSlideTransition",n),oa=Dt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),rY=["children","className","reduceAnimations","slideDirection","transKey","classes"],iY=(n,e)=>{const{slideDirection:t}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return mt(r,nY,n)},aY=Me(N3,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${oa["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${oa["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${oa.slideEnterActive}`]:e.slideEnterActive},{[`.${oa.slideExit}`]:e.slideExit},{[`.${oa["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${oa["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${oa["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${oa["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${oa.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${oa.slideExit}`]:{transform:"translate(0%)"},[`& .${oa["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${oa["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function sY(n){const e=vt({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=Ne(e,rY),{ownerState:d}=er(),f=H({},d,{slideDirection:a}),p=iY(o,f),g=Yc();if(i)return x.jsx("div",{className:jt(p.root,r),children:t});const y={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return x.jsx(aY,{className:jt(p.root,r),childFactory:v=>V.cloneElement(v,{classNames:y}),role:"presentation",ownerState:f,children:x.jsx(aN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:y},c,{children:t}),s)})}const oY=n=>It("MuiDayCalendar",n);Dt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const lY=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],cY=["ownerState"],uY=n=>mt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},oY,n),SO=(h0+Wm*2)*6,dY=Me("div",{name:"MuiDayCalendar",slot:"Root"})({}),fY=Me("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),hY=Me(se,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),pY=Me(se,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),gY=Me(se,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>H({},n.typography.caption,{width:h0,height:h0,padding:0,margin:`0 ${Wm}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),mY=Me("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:SO}),yY=Me(sY,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:SO}),vY=Me("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),xY=Me("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Wm}px 0`,display:"flex",justifyContent:"center"});function wY(n){let{parentProps:e,day:t,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=n,c=Ne(n,lY);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:y,slotProps:v,timezone:b}=e,A=Gt(),E=of(b),T=r!=null&&A.isSameDay(t,r),C=o&&T,I=i.some(q=>A.isSameDay(q,t)),O=A.isSameDay(t,E),N=V.useMemo(()=>d||a(t),[d,a,t]),M=V.useMemo(()=>A.getMonth(t)!==s,[A,t,s]),R=rO({day:t,selected:I,disabled:N,today:O,outsideCurrentMonth:M,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),D=(y==null?void 0:y.day)??NG,B=At({elementType:D,externalSlotProps:v==null?void 0:v.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(t).valueOf()},c),ownerState:H({},R,{day:t,isDayDisabled:N,isDaySelected:I})}),L=Ne(B,cY),P=V.useMemo(()=>{const q=A.startOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.startOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]),F=V.useMemo(()=>{const q=A.endOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.endOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]);return x.jsx(D,H({},L,{day:t,disabled:N,autoFocus:!M&&C,today:O,outsideCurrentMonth:M,isFirstVisibleCell:P,isLastVisibleCell:F,selected:I,tabIndex:T?0:-1,"aria-selected":I,"aria-current":O?"date":void 0}))}function _Y(n){const e=vt({props:n,name:"MuiDayCalendar"}),t=Gt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:y,renderLoading:v=()=>x.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:A,disablePast:E,disableFuture:T,minDate:C,maxDate:I,shouldDisableDate:O,shouldDisableMonth:N,shouldDisableYear:M,dayOfWeekFormatter:R=he=>t.format(he,"weekdayShort").charAt(0).toUpperCase(),hasFocus:D,onFocusedViewChange:B,gridLabelId:L,displayWeekNumber:P,fixedWeekNumber:F,timezone:q}=e,X=of(q),G=uY(a),Y=ya(),Q=AO({shouldDisableDate:O,shouldDisableMonth:N,shouldDisableYear:M,minDate:C,maxDate:I,disablePast:E,disableFuture:T,timezone:q}),Z=Ha(),fe=Ve(he=>{g||f(he)}),ge=he=>{Q(he)||(r(he),B==null||B(!0))},we=Ve((he,te)=>{switch(he.key){case"ArrowUp":ge(t.addDays(te,-7)),he.preventDefault();break;case"ArrowDown":ge(t.addDays(te,7)),he.preventDefault();break;case"ArrowLeft":{const Le=t.addDays(te,Y?1:-1),ve=t.addMonths(te,Y?1:-1),je=d0({adapter:t,date:Le,minDate:Y?Le:t.startOfMonth(ve),maxDate:Y?t.endOfMonth(ve):Le,isDateDisabled:Q,timezone:q});ge(je||Le),he.preventDefault();break}case"ArrowRight":{const Le=t.addDays(te,Y?-1:1),ve=t.addMonths(te,Y?-1:1),je=d0({adapter:t,date:Le,minDate:Y?t.startOfMonth(ve):Le,maxDate:Y?Le:t.endOfMonth(ve),isDateDisabled:Q,timezone:q});ge(je||Le),he.preventDefault();break}case"Home":ge(t.startOfWeek(te)),he.preventDefault();break;case"End":ge(t.endOfWeek(te)),he.preventDefault();break;case"PageUp":ge(t.addMonths(te,1)),he.preventDefault();break;case"PageDown":ge(t.addMonths(te,-1)),he.preventDefault();break}}),Ae=Ve((he,te)=>ge(te)),Pe=Ve((he,te)=>{c!=null&&t.isSameDay(c,te)&&(B==null||B(!1))}),Re=t.getMonth(s),He=t.getYear(s),Ue=V.useMemo(()=>o.filter(he=>!!he).map(he=>t.startOfDay(he)),[t,o]),Qe=`${He}-${Re}`,ae=V.useMemo(()=>V.createRef(),[Qe]),me=V.useMemo(()=>{const he=t.getWeekArray(s);let te=t.addMonths(s,1);for(;F&&he.length<F;){const Le=t.getWeekArray(te),ve=t.isSameDay(he[he.length-1][0],Le[0][0]);Le.slice(ve?1:0).forEach(je=>{he.length<F&&he.push(je)}),te=t.addMonths(te,1)}return he},[s,F,t]);return x.jsxs(dY,{role:"grid","aria-labelledby":L,className:G.root,children:[x.jsxs(fY,{role:"row",className:G.header,children:[P&&x.jsx(pY,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),g$(t,X).map((he,te)=>x.jsx(hY,{variant:"caption",role:"columnheader","aria-label":t.format(he,"weekday"),className:G.weekDayLabel,children:R(he)},te.toString()))]}),d?x.jsx(mY,{className:G.loadingContainer,children:v()}):x.jsx(yY,H({transKey:Qe,onExited:p,reduceAnimations:y,slideDirection:b,className:jt(i,G.slideTransition)},A,{nodeRef:ae,children:x.jsx(vY,{ref:ae,role:"rowgroup",className:G.monthContainer,children:me.map((he,te)=>x.jsxs(xY,{role:"row",className:G.weekContainer,"aria-rowindex":te+1,children:[P&&x.jsx(gY,{className:G.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(t.getWeekNumber(he[0])),children:Z.calendarWeekNumberText(t.getWeekNumber(he[0]))}),he.map((Le,ve)=>x.jsx(wY,{parentProps:e,day:Le,selectedDays:Ue,isViewFocused:D,focusedDay:c,onKeyDown:we,onFocus:Ae,onBlur:Pe,onDaySelect:fe,isDateDisabled:Q,currentMonthNumber:Re,"aria-colindex":ve+1},Le.toString()))]},`week-${he[0]}`))})}))]})}function TO(n){return It("MuiMonthCalendar",n)}const Pg=Dt("MuiMonthCalendar",["root","button","disabled","selected"]),bY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],AY=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return mt(t,TO,n)},EY=Me("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Pg.disabled}`]:e.disabled},{[`&.${Pg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Pg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Pg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),SY=V.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Ne(e,bY),v=V.useRef(null),{ownerState:b}=er(),A=H({},b,{isMonthDisabled:i,isMonthSelected:a}),E=AY(r,A);$n(()=>{var I;t&&((I=v.current)==null||I.focus())},[t]);const T=(p==null?void 0:p.monthButton)??EY,C=At({elementType:T,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:v,type:"button",role:"radio","aria-checked":a,onClick:I=>o(I,s),onKeyDown:I=>c(I,s),onFocus:I=>d(I,s),onBlur:I=>f(I,s)},ownerState:A,className:E.button});return x.jsx(T,H({},C))}),TY=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],CY=n=>mt({root:["root"]},TO,n);function IY(n,e){const t=vt({props:n,name:e}),r=tb(t);return H({},t,r,{monthsPerRow:t.monthsPerRow??3})}const ZI=(n,e,t,r,i)=>!!(n===e&&r&&i.isSameYear(t,r)),DY=Me("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Ud,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),RY=V.forwardRef(function(e,t){const r=IY(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:y,maxDate:v,minDate:b,onChange:A,shouldDisableMonth:E,readOnly:T,onMonthFocus:C,hasFocus:I,onFocusedViewChange:O,monthsPerRow:N,timezone:M,gridLabelId:R,slots:D,slotProps:B}=r,L=Ne(r,TY),{value:P,handleValueChange:F,timezone:q}=Zc({name:"MonthCalendar",timezone:M,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Ai}),X=of(q),G=ya(),Y=Gt(),{ownerState:Q}=er(),Z=V.useMemo(()=>Ai.getInitialReferenceValue({value:P,adapter:Y,props:r,timezone:q,referenceDate:f,granularity:Ra.month}),[]),fe=CY(o),ge=V.useMemo(()=>Y.getMonth(X),[Y,X]),we=V.useMemo(()=>P!=null?Y.getMonth(P):null,[P,Y]),[Ae,Pe]=V.useState(()=>we||Y.getMonth(Z)),[Re,He]=Od({name:"MonthCalendar",state:"hasFocus",controlled:I,default:i??!1}),Ue=Ve(ve=>{He(ve),O&&O(ve)}),Qe=V.useCallback(ve=>{const je=Y.startOfMonth(y&&Y.isAfter(X,b)?X:b),De=Y.startOfMonth(g&&Y.isBefore(X,v)?X:v),Ce=Y.startOfMonth(ve);return Y.isBefore(Ce,je)||Y.isAfter(Ce,De)?!0:E?E(Ce):!1},[g,y,v,b,X,E,Y]),ae=Ve((ve,je)=>{if(T)return;const De=P&&s&&!Y.isSameYear(P,s)?Y.setYear(P,Y.getYear(s)):P,Ce=Y.setMonth(De??Z,je);F(Ce)}),me=Ve(ve=>{Qe(Y.setMonth(P??s??Z,ve))||(Pe(ve),Ue(!0),C&&C(ve))});V.useEffect(()=>{Pe(ve=>we!==null&&ve!==we?we:ve)},[we]);const he=Ve((ve,je)=>{switch(ve.key){case"ArrowUp":me((12+je-3)%12),ve.preventDefault();break;case"ArrowDown":me((12+je+3)%12),ve.preventDefault();break;case"ArrowLeft":me((12+je+(G?1:-1))%12),ve.preventDefault();break;case"ArrowRight":me((12+je+(G?-1:1))%12),ve.preventDefault();break}}),te=Ve((ve,je)=>{me(je)}),Le=Ve((ve,je)=>{Ae===je&&Ue(!1)});return x.jsx(DY,H({ref:t,className:jt(fe.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":R,monthsPerRow:N},L,{children:G_(Y,s??P??Z).map(ve=>{const je=Y.getMonth(ve),De=Y.format(ve,"monthShort"),Ce=Y.format(ve,"month"),We=ZI(je,we,ve,P,Y),$e=p||Qe(ve);return x.jsx(SY,{selected:We,value:je,onClick:ae,onKeyDown:he,autoFocus:Re&&je===Ae,disabled:$e,tabIndex:je===Ae&&!$e?0:-1,onFocus:te,onBlur:Le,"aria-current":ZI(je,ge,ve,X,Y)?"date":void 0,"aria-label":Ce,slots:D,slotProps:B,classes:o,children:De},De)})}))});function CO(n){return It("MuiYearCalendar",n)}const kg=Dt("MuiYearCalendar",["root","button","disabled","selected"]),MY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],OY=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return mt(t,CO,n)},PY=Me("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${kg.disabled}`]:e.disabled},{[`&.${kg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:As(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:As(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${kg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${kg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),kY=V.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Ne(e,MY),v=V.useRef(null),{ownerState:b}=er(),A=H({},b,{isYearDisabled:i,isYearSelected:a}),E=OY(r,A);$n(()=>{var I;t&&((I=v.current)==null||I.focus())},[t]);const T=(p==null?void 0:p.yearButton)??PY,C=At({elementType:T,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:v,type:"button",role:"radio","aria-checked":a,onClick:I=>o(I,s),onKeyDown:I=>c(I,s),onFocus:I=>d(I,s),onBlur:I=>f(I,s)},ownerState:A,className:E.button});return x.jsx(T,H({},C))}),NY=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],LY=n=>mt({root:["root"]},CO,n);function BY(n,e){const t=vt({props:n,name:e}),r=tb(t);return H({},t,r,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const VY=Me("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Ud,maxHeight:tG,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),FY=Me("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),jY=V.forwardRef(function(e,t){const r=BY(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:y,minDate:v,onChange:b,readOnly:A,shouldDisableYear:E,onYearFocus:T,hasFocus:C,onFocusedViewChange:I,yearsOrder:O,yearsPerRow:N,timezone:M,gridLabelId:R,slots:D,slotProps:B}=r,L=Ne(r,NY),{value:P,handleValueChange:F,timezone:q}=Zc({name:"YearCalendar",timezone:M,value:o,defaultValue:c,referenceDate:d,onChange:b,valueManager:Ai}),X=of(q),G=ya(),Y=Gt(),{ownerState:Q}=er(),Z=V.useMemo(()=>Ai.getInitialReferenceValue({value:P,adapter:Y,props:r,timezone:q,referenceDate:d,granularity:Ra.year}),[]),fe=LY(s),ge=V.useMemo(()=>Y.getYear(X),[Y,X]),we=V.useMemo(()=>P!=null?Y.getYear(P):null,[P,Y]),[Ae,Pe]=V.useState(()=>we||Y.getYear(Z)),[Re,He]=Od({name:"YearCalendar",state:"hasFocus",controlled:C,default:i??!1}),Ue=Ve(Ie=>{He(Ie),I&&I(Ie)}),Qe=V.useCallback(Ie=>{if(g&&Y.isBeforeYear(Ie,X)||p&&Y.isAfterYear(Ie,X)||v&&Y.isBeforeYear(Ie,v)||y&&Y.isAfterYear(Ie,y))return!0;if(!E)return!1;const Oe=Y.startOfYear(Ie);return E(Oe)},[p,g,y,v,X,E,Y]),ae=Ve((Ie,Oe)=>{if(A)return;const ut=Y.setYear(P??Z,Oe);F(ut)}),me=Ve(Ie=>{Qe(Y.setYear(P??Z,Ie))||(Pe(Ie),Ue(!0),T==null||T(Ie))});V.useEffect(()=>{Pe(Ie=>we!==null&&Ie!==we?we:Ie)},[we]);const he=O!=="desc"?N*1:N*-1,te=G&&O==="asc"||!G&&O==="desc"?-1:1,Le=Ve((Ie,Oe)=>{switch(Ie.key){case"ArrowUp":me(Oe-he),Ie.preventDefault();break;case"ArrowDown":me(Oe+he),Ie.preventDefault();break;case"ArrowLeft":me(Oe-te),Ie.preventDefault();break;case"ArrowRight":me(Oe+te),Ie.preventDefault();break}}),ve=Ve((Ie,Oe)=>{me(Oe)}),je=Ve((Ie,Oe)=>{Ae===Oe&&Ue(!1)}),De=V.useRef(null),Ce=Jr(t,De);V.useEffect(()=>{if(i||De.current===null)return;const Ie=De.current.querySelector('[tabindex="0"]');if(!Ie)return;const Oe=Ie.offsetHeight,ut=Ie.offsetTop,xt=De.current.clientHeight,hn=De.current.scrollTop,In=ut+Oe;Oe>xt||ut<hn||(De.current.scrollTop=In-xt/2-Oe/2)},[i]);const We=Y.getYearRange([v,y]);O==="desc"&&We.reverse();let $e=N-We.length%N;return $e===N&&($e=0),x.jsxs(VY,H({ref:Ce,className:jt(fe.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":R,yearsPerRow:N},L,{children:[We.map(Ie=>{const Oe=Y.getYear(Ie),ut=Oe===we,xt=f||Qe(Ie);return x.jsx(kY,{selected:ut,value:Oe,onClick:ae,onKeyDown:Le,autoFocus:Re&&Oe===Ae,disabled:xt,tabIndex:Oe===Ae&&!xt?0:-1,onFocus:ve,onBlur:je,"aria-current":ge===Oe?"date":void 0,slots:D,slotProps:B,classes:s,children:Y.format(Ie,"year")},Y.format(Ie,"year"))}),Array.from({length:$e},(Ie,Oe)=>x.jsx(FY,{},Oe))]}))}),UY=n=>It("MuiPickersCalendarHeader",n),HY=Dt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),zY=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],$Y=["ownerState"],GY=n=>mt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},UY,n),WY=Me("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),YY=Me("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),qY=Me("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),XY=Me(Qr,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${HY.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),KY=Me(k$,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),QY=V.forwardRef(function(e,t){const r=Ha(),i=Gt(),a=vt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:y,onMonthChange:v,onViewChange:b,view:A,reduceAnimations:E,views:T,labelId:C,className:I,classes:O,timezone:N,format:M=`${i.formats.month} ${i.formats.year}`}=a,R=Ne(a,zY),{ownerState:D}=er(),B=GY(O),L=(s==null?void 0:s.switchViewButton)??XY,P=At({elementType:L,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},D,{view:A}),className:B.switchViewButton}),F=(s==null?void 0:s.switchViewIcon)??KY,q=At({elementType:F,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:D,className:B.switchViewIcon}),X=Ne(q,$Y),G=()=>v(i.addMonths(c,1)),Y=()=>v(i.addMonths(c,-1)),Q=J$(c,{disableFuture:f,maxDate:g,timezone:N}),Z=eG(c,{disablePast:p,minDate:y,timezone:N}),fe=()=>{if(!(T.length===1||!b||d))if(T.length===2)b(T.find(we=>we!==A)||T[0]);else{const we=T.indexOf(A)!==0?0:1;b(T[we])}};if(T.length===1&&T[0]==="year")return null;const ge=i.formatByString(c,M);return x.jsxs(WY,H({},R,{ownerState:D,className:jt(B.root,I),ref:t,children:[x.jsxs(YY,{role:"presentation",onClick:fe,ownerState:D,"aria-live":"polite",className:B.labelContainer,children:[x.jsx(EO,{reduceAnimations:E,transKey:ge,children:x.jsx(qY,{id:C,ownerState:D,className:B.label,children:ge})}),T.length>1&&!d&&x.jsx(L,H({},P,{children:x.jsx(F,H({},X))}))]}),x.jsx(pm,{in:A==="day",appear:!E,enter:!E,children:x.jsx(q$,{slots:s,slotProps:o,onGoToPrevious:Y,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:G,isNextDisabled:Q,nextLabel:r.nextMonth})})]}))}),ZY="@media (prefers-reduced-motion: reduce)",Td=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),JI=Td&&Td[1]?parseInt(Td[1],10):null,eD=Td&&Td[2]?parseInt(Td[2],10):null,JY=JI&&JI<10||eD&&eD<13||!1;function IO(n){const e=hm(ZY,{defaultMatches:!1});return n??(e||JY)}const eq=n=>It("MuiDateCalendar",n);Dt("MuiDateCalendar",["root","viewTransitionContainer"]);const tq=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],nq=n=>mt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},eq,n);function rq(n,e){const t=vt({props:n,name:e}),r=IO(t.reduceAnimations),i=tb(t);return H({},t,i,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:r,renderLoading:t.renderLoading??(()=>x.jsx("span",{children:"..."}))})}const iq=Me(Z_,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Hd}),aq=Me(EO,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),sq=V.forwardRef(function(e,t){const r=Gt(),{ownerState:i}=er(),a=_0(),s=rq(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:y,onChange:v,onMonthChange:b,reduceAnimations:A,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,view:I,views:O,openTo:N,className:M,classes:R,disabled:D,readOnly:B,minDate:L,maxDate:P,disableHighlightToday:F,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:G,fixedWeekNumber:Y,dayOfWeekFormatter:Q,slots:Z,slotProps:fe,loading:ge,renderLoading:we,displayWeekNumber:Ae,yearsOrder:Pe,yearsPerRow:Re,monthsPerRow:He,timezone:Ue}=s,Qe=Ne(s,tq),{value:ae,handleValueChange:me,timezone:he}=Zc({name:"DateCalendar",timezone:Ue,value:d,defaultValue:f,referenceDate:p,onChange:v,valueManager:Ai}),{view:te,setView:Le,focusedView:ve,setFocusedView:je,goToNextView:De,setValueAndGoToNextView:Ce}=Gm({view:I,views:O,openTo:N,onChange:me,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:We,calendarState:$e,setVisibleDate:Ie,isDateDisabled:Oe,onMonthSwitchingAnimationEnd:ut}=QW({value:ae,referenceDate:p,reduceAnimations:A,onMonthChange:b,minDate:L,maxDate:P,shouldDisableDate:E,disablePast:y,disableFuture:g,timezone:he,getCurrentMonthFromVisibleDate:(pt,Pn)=>r.isSameMonth(pt,Pn)?Pn:r.startOfMonth(pt)}),xt=D&&ae||L,hn=D&&ae||P,In=`${a}-grid-label`,tt=ve!==null,rt=(Z==null?void 0:Z.calendarHeader)??QY,_n=At({elementType:rt,externalSlotProps:fe==null?void 0:fe.calendarHeader,additionalProps:{views:O,view:te,currentMonth:$e.currentMonth,onViewChange:Le,onMonthChange:pt=>Ie({target:pt,reason:"header-navigation"}),minDate:xt,maxDate:hn,disabled:D,disablePast:y,disableFuture:g,reduceAnimations:A,timezone:he,labelId:In},ownerState:i}),Xe=Ve(pt=>{const Pn=r.startOfMonth(pt),Wn=r.endOfMonth(pt),Ur=Oe(pt)?d0({adapter:r,date:pt,minDate:r.isBefore(L,Pn)?Pn:L,maxDate:r.isAfter(P,Wn)?Wn:P,disablePast:y,disableFuture:g,isDateDisabled:Oe,timezone:he}):pt;Ur?(Ce(Ur,"finish"),Ie({target:Ur,reason:"cell-interaction"})):(De(),Ie({target:Pn,reason:"cell-interaction"}))}),ht=Ve(pt=>{const Pn=r.startOfYear(pt),Wn=r.endOfYear(pt),Ur=Oe(pt)?d0({adapter:r,date:pt,minDate:r.isBefore(L,Pn)?Pn:L,maxDate:r.isAfter(P,Wn)?Wn:P,disablePast:y,disableFuture:g,isDateDisabled:Oe,timezone:he}):pt;Ur?(Ce(Ur,"finish"),Ie({target:Ur,reason:"cell-interaction"})):(De(),Ie({target:Pn,reason:"cell-interaction"}))}),kt=Ve(pt=>me(pt&&L1(r,pt,ae??We),"finish",te));V.useEffect(()=>{r.isValid(ae)&&Ie({target:ae,reason:"controlled-value-change"})},[ae]);const Zt=nq(R),vn={disablePast:y,disableFuture:g,maxDate:P,minDate:L},bn={disableHighlightToday:F,readOnly:B,disabled:D,timezone:he,gridLabelId:In,slots:Z,slotProps:fe},Wt=V.useRef(te);V.useEffect(()=>{Wt.current!==te&&(ve===Wt.current&&je(te,!0),Wt.current=te)},[ve,je,te]);const jr=V.useMemo(()=>[ae],[ae]);return x.jsxs(iq,H({ref:t,className:jt(Zt.root,M),ownerState:i},Qe,{children:[x.jsx(rt,H({},_n,{slots:Z,slotProps:fe})),x.jsx(aq,{reduceAnimations:A,className:Zt.viewTransitionContainer,transKey:te,ownerState:i,children:x.jsxs("div",{children:[te==="year"&&x.jsx(jY,H({},vn,bn,{value:ae,onChange:ht,shouldDisableYear:C,hasFocus:tt,onFocusedViewChange:pt=>je("year",pt),yearsOrder:Pe,yearsPerRow:Re,referenceDate:We})),te==="month"&&x.jsx(RY,H({},vn,bn,{currentMonth:$e.currentMonth,hasFocus:tt,className:M,value:ae,onChange:Xe,shouldDisableMonth:T,onFocusedViewChange:pt=>je("month",pt),monthsPerRow:He,referenceDate:We})),te==="day"&&x.jsx(_Y,H({},$e,vn,bn,{onMonthSwitchingAnimationEnd:ut,hasFocus:tt,onFocusedDayChange:pt=>Ie({target:pt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:jr,onSelectedDaysChange:kt,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,onFocusedViewChange:pt=>je("day",pt),showDaysOutsideCurrentMonth:G,fixedWeekNumber:Y,dayOfWeekFormatter:Q,displayWeekNumber:Ae,loading:ge,renderLoading:we}))]})})]}))});function DO(n){return It("MuiPickersToolbar",n)}const oq=Dt("MuiPickersToolbar",["root","title","content"]);function RO(){const{ownerState:n}=er(),e=ya();return V.useMemo(()=>H({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const lq=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],cq=n=>mt({root:["root"],title:["title"],content:["content"]},DO,n),uq=Me("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),dq=Me("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>va(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),fq=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=Ne(r,lq),g=RO(),y=cq(s);return c?null:x.jsxs(uq,H({ref:t,className:jt(y.root,a),ownerState:g},p,{children:[x.jsx(se,{color:"text.secondary",variant:"overline",id:d,className:y.title,children:o}),x.jsx(dq,{className:y.content,ownerState:g,landscapeDirection:f,children:i})]}))});function hq(n){return It("MuiPickerPopper",n)}Dt("MuiPickerPopper",["root","paper"]);const pq=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],gq=n=>mt({root:["root"],paper:["paper"]},hq,n),mq=Me(L3,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),yq=Me(da,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>new Set(["top","top-start","top-end"]).has(n),style:{transformOrigin:"bottom center"}}]});function vq(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function xq(n,e){const t=V.useRef(!1),r=V.useRef(!1),i=V.useRef(null),a=V.useRef(!1);V.useEffect(()=>{if(!n)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[n]);const s=Ve(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=zh(i.current);if(!i.current||"clientX"in c&&vq(c,f))return;if(t.current){t.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return V.useEffect(()=>{if(n){const c=zh(i.current),d=()=>{t.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[n,s]),V.useEffect(()=>{if(n){const c=zh(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[n,s]),[i,o,o]}const wq=V.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=n,d=Ne(n,pq),f=At({elementType:t,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return x.jsx(t,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function _q(n){const e=vt({props:n,name:"MuiPickerPopper"}),{children:t,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=Ll(),{ownerState:f,rootRefObject:p}=er(),{dismissViews:g,getCurrentViewMode:y,onPopperExited:v,triggerElement:b,viewContainerRole:A}=er();V.useEffect(()=>{function Y(Q){o&&Q.key==="Escape"&&g()}return document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)}},[g,o]);const E=V.useRef(null);V.useEffect(()=>{A==="tooltip"||y()==="field"||(o?E.current=li(p.current):E.current&&E.current instanceof HTMLElement&&setTimeout(()=>{E.current instanceof HTMLElement&&E.current.focus()}))},[o,A,y,p]);const T=gq(s),C=Ve(()=>{A==="tooltip"?lG(()=>{var Y,Q;(Y=p.current)!=null&&Y.contains(li(p.current))||(Q=c.current)!=null&&Q.contains(li(c.current))||g()}):g()}),[I,O,N]=xq(o,C),M=V.useRef(null),R=Jr(M,c),D=Jr(R,I),B=Y=>{Y.key==="Escape"&&(Y.stopPropagation(),g())},L=(i==null?void 0:i.desktopTransition)??d?pm:sN,P=(i==null?void 0:i.desktopTrapFocus)??oN,F=(i==null?void 0:i.desktopPaper)??yq,q=(i==null?void 0:i.popper)??mq,X=At({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:b,onKeyDown:B},className:T.root,ownerState:f}),G=V.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return x.jsx(q,H({},X,{children:({TransitionProps:Y})=>x.jsx(P,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:x.jsx(L,H({},Y,a==null?void 0:a.desktopTransition,{onExited:Q=>{var Z,fe,ge;v==null||v(),(fe=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||fe.call(Z,Q),(ge=Y==null?void 0:Y.onExited)==null||ge.call(Y)},children:x.jsx(wq,{PaperComponent:F,ownerState:G,ref:D,onPaperClick:O,onPaperTouchStart:N,paperClasses:T.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:t})}))}))}))}function tD(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function bq(n,e){const[t,r]=V.useState(tD);return $n(()=>{const i=()=>{r(tD())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),oG(n,["hours","minutes","seconds"])?"portrait":e??t}function Aq(n){const{props:e,valueManager:t,validator:r}=n,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:y}=e,{current:v}=V.useRef(a),{current:b}=V.useRef(i!==void 0),{current:A}=V.useRef(p!==void 0),E=Gt(),{timezone:T,value:C,handleValueChange:I}=Zc({name:"a picker component",timezone:c,value:i,defaultValue:v,referenceDate:o,onChange:s,valueManager:t}),[O,N]=V.useState(()=>({open:!1,lastExternalValue:C,clockShallowValue:void 0,lastCommittedValue:C,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:M}=lO({props:e,validator:r,timezone:T,value:C,onError:e.onError}),R=Ve(P=>{const F=typeof P=="function"?P(O.open):P;A||N(q=>H({},q,{open:F})),F&&g&&g(),F||y==null||y()}),D=Ve((P,F)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:G,shortcut:Y,shouldClose:Q=q==="accept"}=F??{};let Z,fe;!X&&!b&&!O.hasBeenModifiedSinceMount?(Z=!0,fe=q==="accept"):(Z=!t.areValuesEqual(E,P,C),fe=q==="accept"&&!t.areValuesEqual(E,P,O.lastCommittedValue)),N(Ae=>H({},Ae,{clockShallowValue:Z?void 0:Ae.clockShallowValue,lastCommittedValue:fe?P:Ae.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ge=null;const we=()=>(ge||(ge={validationError:G??M(P)},Y&&(ge.shortcut=Y)),ge);Z&&I(P,we()),fe&&d&&d(P,we()),Q&&R(!1)});C!==O.lastExternalValue&&N(P=>H({},P,{lastExternalValue:C,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const B=Ve((P,F="partial")=>{if(F==="shallow"){N(q=>H({},q,{clockShallowValue:P,hasBeenModifiedSinceMount:!0}));return}D(P,{changeImportance:F==="finish"&&f?"accept":"set"})});V.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");N(P=>H({},P,{open:p}))}},[A,p]);const L=V.useMemo(()=>t.cleanValue(E,O.clockShallowValue===void 0?C:O.clockShallowValue),[E,t,O.clockShallowValue,C]);return{timezone:T,state:O,setValue:D,setValueFromView:B,setOpen:R,value:C,viewValue:L}}const Eq=["className","sx"],MO=({ref:n,props:e,valueManager:t,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:y,openTo:v,onViewChange:b,viewRenderers:A,reduceAnimations:E,orientation:T,disableOpenPicker:C,closeOnSelect:I,disabled:O,readOnly:N,formatDensity:M,enableAccessibleFieldDOMStructure:R,selectedSections:D,onSelectedSectionsChange:B,format:L,label:P,autoFocus:F,name:q}=e,{className:X,sx:G}=e,Y=Ne(e,Eq),Q=_0(),Z=Gt(),fe=IO(E),ge=bq(g,T),{current:we}=V.useRef(v??null),[Ae,Pe]=V.useState(null),Re=V.useRef(null),He=V.useRef(null),Ue=V.useRef(null),Qe=Jr(n,Ue),{timezone:ae,state:me,setOpen:he,setValue:te,setValueFromView:Le,value:ve,viewValue:je}=Aq({props:e,valueManager:t,validator:a}),{view:De,setView:Ce,defaultView:We,focusedView:$e,setFocusedView:Ie,setValueAndGoToNextView:Oe,goToNextStep:ut,hasNextStep:xt,hasSeveralSteps:hn}=Gm({view:y,views:g,openTo:v,onChange:Le,onViewChange:b,autoFocus:o,getStepNavigation:p}),In=Ve(()=>te(t.emptyValue)),tt=Ve(()=>te(t.getTodayValue(Z,ae,r))),rt=Ve(()=>te(ve)),_n=Ve(()=>te(me.lastCommittedValue,{skipPublicationIfPristine:!0})),Xe=Ve(()=>{te(ve,{skipPublicationIfPristine:!0})}),{hasUIView:ht,viewModeLookup:kt,timeViewsCount:Zt}=V.useMemo(()=>g.reduce((pn,nr)=>{const jl=A[nr]==null?"field":"UI";return pn.viewModeLookup[nr]=jl,jl==="UI"&&(pn.hasUIView=!0,f0(nr)&&(pn.timeViewsCount+=1)),pn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),vn=kt[De],bn=Ve(()=>vn),[Wt,jr]=V.useState(vn==="UI"?De:null);Wt!==De&&kt[De]==="UI"&&jr(De),$n(()=>{vn==="field"&&me.open&&(he(!1),setTimeout(()=>{var pn,nr;(pn=He==null?void 0:He.current)==null||pn.setSelectedSections(De),(nr=He==null?void 0:He.current)==null||nr.focusField(De)}))},[De]),$n(()=>{if(!me.open)return;let pn=De;vn==="field"&&Wt!=null&&(pn=Wt),pn!==We&&kt[pn]==="UI"&&kt[We]==="UI"&&(pn=We),pn!==De&&Ce(pn),Ie(pn,!0)},[me.open]);const pt=V.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(Z,ve,t.emptyValue),isPickerOpen:me.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ge,pickerVariant:i}),[Z,t,ve,me.open,ge,i,e.disabled,e.readOnly]),Pn=V.useMemo(()=>C||!ht?"hidden":O||N?"disabled":"enabled",[C,ht,O,N]),Wn=Ve(ut),Ur=V.useMemo(()=>I&&!hn?[]:["cancel","nextOrAccept"],[I,hn]),hi=V.useMemo(()=>({setValue:te,setOpen:he,clearValue:In,setValueToToday:tt,acceptValueChanges:rt,cancelValueChanges:_n,setView:Ce,goToNextStep:Wn}),[te,he,In,tt,rt,_n,Ce,Wn]),tr=V.useMemo(()=>H({},hi,{value:ve,timezone:ae,open:me.open,views:g,view:Wt,initialView:we,disabled:O??!1,readOnly:N??!1,autoFocus:F??!1,variant:i,orientation:ge,popupRef:Re,reduceAnimations:fe,triggerRef:Pe,triggerStatus:Pn,hasNextStep:xt,fieldFormat:L??"",name:q,label:P,rootSx:G,rootRef:Qe,rootClassName:X}),[hi,ve,Qe,i,ge,fe,O,N,L,X,q,P,G,Pn,xt,ae,me.open,Wt,g,we,F]),Fl=V.useMemo(()=>({dismissViews:Xe,ownerState:pt,hasUIView:ht,getCurrentViewMode:bn,rootRefObject:Ue,labelId:Q,triggerElement:Ae,viewContainerRole:f,defaultActionBarActions:Ur,onPopperExited:s}),[Xe,pt,ht,bn,Q,Ae,f,Ur,s]),qi=V.useMemo(()=>({formatDensity:M,enableAccessibleFieldDOMStructure:R,selectedSections:D,onSelectedSectionsChange:B,fieldRef:He}),[M,R,D,B,He]);return{providerProps:{localeText:d,contextValue:tr,privateContextValue:Fl,actionsContextValue:hi,fieldPrivateContextValue:qi,isValidContextValue:pn=>{const nr=a({adapter:Z,value:pn,timezone:ae,props:e});return!t.hasError(nr)}},renderCurrentView:()=>{if(Wt==null)return null;const pn=A[Wt];if(pn==null)return null;const nr=H({},Y,{views:g,timezone:ae,value:je,onChange:Oe,view:Wt,onViewChange:Ce,showViewSwitcher:Zt>1,timeViewsCount:Zt},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:$e,onFocusedViewChange:Ie});return c?x.jsx(c,{viewRenderers:A,popperView:Wt,rendererProps:nr}):pn(nr)},ownerState:pt}};function OO(n){return It("MuiPickersLayout",n)}const Da=Dt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Sq=["actions"],Tq=Me(Fa,{name:"MuiPickersLayout",slot:"ActionBar"})({});function Cq(n){const{actions:e}=n,t=Ne(n,Sq),r=Ha(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=Ll();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return x.jsx(st,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return x.jsx(st,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return x.jsx(st,{onClick:s,children:r.okButtonLabel},p);case"today":return x.jsx(st,{onClick:a,children:r.todayButtonLabel},p);case"next":return x.jsx(st,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?x.jsx(st,{onClick:c,children:r.nextStepButtonLabel},p):x.jsx(st,{onClick:s,children:r.okButtonLabel},p);default:return null}});return x.jsx(Tq,H({},t,{children:f}))}const Iq=V.memo(Cq),Dq=["items","changeImportance"],Rq=["getValue"],Mq=Me(V3,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function Oq(n){const{items:e,changeImportance:t="accept"}=n,r=Ne(n,Dq),{setValue:i}=P$(),a=O$();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=Ne(o,Rq);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:t,shortcut:d})},disabled:!a(f)})});return x.jsx(Mq,H({dense:!0,sx:[{maxHeight:Hd,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>x.jsx(B3,{children:x.jsx(Cn,H({},o))},o.id??o.label))}))}const Pq=["ownerState"];function kq(n){return n.view!==null}const Nq=(n,e)=>{const{pickerOrientation:t}=e;return mt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},OO,n)},PO=n=>{const{ownerState:e,defaultActionBarActions:t}=er(),{view:r}=Ll(),i=ya(),{children:a,slots:s,slotProps:o,classes:c}=n,d=V.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=Nq(c,d),p=(s==null?void 0:s.actionBar)??Iq,g=At({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:t},className:f.actionBar,ownerState:d}),y=Ne(g,Pq),v=x.jsx(p,H({},y)),b=s==null?void 0:s.toolbar,A=At({elementType:b,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),E=kq(A)&&b?x.jsx(b,H({},A)):null,T=a,C=s==null?void 0:s.tabs,I=r&&C?x.jsx(C,H({className:f.tabs},o==null?void 0:o.tabs)):null,O=(s==null?void 0:s.shortcuts)??Oq,N=At({elementType:O,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),M=Array.isArray(N==null?void 0:N.items)&&N.items.length>0,R=r&&O?x.jsx(O,H({},N)):null;return{toolbar:E,content:T,tabs:I,actionBar:v,shortcuts:R,ownerState:H({},d,{hasShortcuts:M})}},Lq=(n,e)=>{const{pickerOrientation:t}=e;return mt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},OO,n)},kO=Me("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Da.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${Da.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${Da.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${Da.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${Da.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Da.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${Da.shortcuts}`]:{gridColumn:4}}}]}),NO=Me("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),LO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=PO(r),{orientation:f,variant:p}=Ll(),{sx:g,className:y,classes:v}=r,b=Lq(v,d);return x.jsxs(kO,{ref:t,sx:g,className:jt(b.root,y),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,x.jsx(NO,{className:b.contentWrapper,ownerState:d,children:p==="desktop"?x.jsxs(V.Fragment,{children:[a,s]}):x.jsxs(V.Fragment,{children:[s,a]})}),o]})});function BO(n){const{steps:e}=n;return Z$({steps:e,isViewMatchingStep:(t,r)=>r.views==null||r.views.includes(t),onStepChange:({step:t,defaultView:r,setView:i,view:a,views:s})=>{const o=t.views==null?r:t.views.find(c=>s.includes(c));o!==a&&i(o)}})}const Bq=["props","steps"],Vq=["ownerState"],Fq=n=>{var N;let{props:e,steps:t}=n,r=Ne(n,Bq);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=BO({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=MO(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),y=f.privateContextValue.labelId,v=((N=a==null?void 0:a.toolbar)==null?void 0:N.hidden)??!1,b=i.field,A=At({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},v&&{id:y}),ownerState:g}),E=Ne(A,Vq),T=i.layout??LO;let C=y;v&&(s?C=`${y}-label`:C=void 0);const I=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),popper:H({"aria-labelledby":C},a==null?void 0:a.popper)});return{renderPicker:()=>x.jsxs(X4,H({},f,{children:[x.jsx(b,H({},E,{slots:i,slotProps:I,inputRef:o})),x.jsx(_q,{slots:i,slotProps:I,children:x.jsx(T,H({},I==null?void 0:I.layout,{slots:i,slotProps:I,children:p()}))})]}))}},Cd=({view:n,onViewChange:e,views:t,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:v,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:I,onYearChange:O,yearsOrder:N,yearsPerRow:M,slots:R,slotProps:D,loading:B,renderLoading:L,disableHighlightToday:P,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:Y,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge})=>x.jsx(sq,{view:n,onViewChange:e,views:t.filter(jd),focusedView:r&&jd(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:v,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:I,onYearChange:O,yearsOrder:N,yearsPerRow:M,slots:R,slotProps:D,loading:B,renderLoading:L,disableHighlightToday:P,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:Y,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge}),jq=Me(Ba)({[`& .${fT.container}`]:{outline:0},[`& .${fT.paper}`]:{outline:0,minWidth:Ud}}),Uq=Me(Va)({"&:first-of-type":{padding:0}});function Hq(n){const{children:e,slots:t,slotProps:r}=n,{open:i}=Ll(),{dismissViews:a,onPopperExited:s}=er(),o=(t==null?void 0:t.dialog)??jq,c=(t==null?void 0:t.mobileTransition)??pm;return x.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:x.jsx(Uq,{children:e})}))}const zq=["props","steps"],$q=["ownerState"],Gq=n=>{var N;let{props:e,steps:t}=n,r=Ne(n,zq);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=BO({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=MO(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),y=f.privateContextValue.labelId,v=((N=a==null?void 0:a.toolbar)==null?void 0:N.hidden)??!1,b=i.field,A=At({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},v&&{id:y}),ownerState:g}),E=Ne(A,$q),T=i.layout??LO;let C=y;v&&(s?C=`${y}-label`:C=void 0);const I=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),mobilePaper:H({"aria-labelledby":C},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>x.jsxs(X4,H({},f,{children:[x.jsx(b,H({},E,{slots:i,slotProps:I,inputRef:o})),x.jsx(Hq,{slots:i,slotProps:I,children:x.jsx(T,H({},I==null?void 0:I.layout,{slots:i,slotProps:I,children:p()}))})]}))}};function Wq(n){return It("MuiPickersToolbarText",n)}const Yq=Dt("MuiPickersToolbarText",["root"]),qq=["className","classes","selected","value"],Xq=n=>mt({root:["root"]},Wq,n),Kq=Me(se,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:n})=>({transition:n.transitions.create("color"),color:(n.vars||n).palette.text.secondary,"&[data-selected]":{color:(n.vars||n).palette.text.primary}})),VO=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=Ne(r,qq),d=Xq(a);return x.jsx(Kq,H({ref:t,className:jt(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),Qq=["align","className","classes","selected","typographyClassName","value","variant","width"],Zq=n=>mt({root:["root"]},DO,n),Jq=Me(st,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),il=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=Ne(r,Qq),y=Zq(s);return x.jsx(Jq,H({variant:"text",ref:t,className:jt(y.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:x.jsx(VO,{align:i,className:c,variant:f,value:d,selected:o})}))}),FO=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:I,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:D,skipDisabled:B,timezone:L})=>x.jsx(mG,{view:n,onViewChange:e,focusedView:t&&f0(t)?t:null,onFocusedViewChange:r,views:i.filter(f0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:I,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeStep:D==null?void 0:D.minutes,skipDisabled:B,timezone:L}),F1=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:I,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:D,skipDisabled:B,timezone:L})=>x.jsx(IG,{view:n,onViewChange:e,focusedView:t&&pd(t)?t:null,onFocusedViewChange:r,views:i.filter(f0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:I,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:D,skipDisabled:B,timezone:L}),eX=["views","format"],jO=(n,e,t)=>{let{views:r,format:i}=e,a=Ne(e,eX);if(i)return i;const s=[],o=[];if(r.forEach(f=>{f0(f)?o.push(f):jd(f)&&s.push(f)}),o.length===0)return LI(n,H({views:s},a));if(s.length===0)return GI(n,H({views:o},a));const c=GI(n,H({views:o},a));return`${LI(n,H({views:s},a))} ${c}`},tX=(n,e,t)=>t?e.filter(r=>!pd(r)||r==="hours"):n?[...e,"meridiem"]:e,nX=(n,e)=>1440/((n.hours??1)*(n.minutes??5))<=e;function rX({thresholdToRenderTimeInASingleColumn:n,ampm:e,timeSteps:t,views:r}){const i=n??24,a=H({hours:1,minutes:5,seconds:5},t),s=nX(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:tX(e,r,s)}}function iX(n){return It("MuiDateTimePickerTabs",n)}Dt("MuiDateTimePickerTabs",["root"]);const aX=n=>jd(n)?"date":"time",sX=n=>n==="date"?"day":"hours",oX=n=>mt({root:["root"]},iX,n),lX=Me(fm,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:n})=>({boxShadow:`0 -1px 0 0 inset ${(n.vars||n).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(n.vars||n).palette.divider}`,[`& .${lN.indicator}`]:{bottom:"auto",top:0}}})),cX=function(e){const t=vt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=x.jsx(V$,{}),timeIcon:i=x.jsx(F$,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=t,d=Ha(),{ownerState:f}=er(),{view:p,setView:g}=Ll(),y=oX(o),v=(b,A)=>{g(sX(A))};return a?null:x.jsxs(lX,{ownerState:f,variant:"fullWidth",value:aX(p),onChange:v,className:jt(s,y.root),sx:c,children:[x.jsx(Ma,{value:"date","aria-label":d.dateTableLabel,icon:x.jsx(V.Fragment,{children:r})}),x.jsx(Ma,{value:"time","aria-label":d.timeTableLabel,icon:x.jsx(V.Fragment,{children:i})})]})};function uX(n){return It("MuiDateTimePickerToolbar",n)}const Fx=Dt("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),dX=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],fX=(n,e)=>{const{pickerOrientation:t,toolbarDirection:r}=e;return mt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",t==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},uX,n)},hX=Me(fq,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="toolbarVariant"})(({theme:n})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,[`& .${oq.content} .${Yq.root}[data-selected]`]:{color:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),pX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),gX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:n=>va(n)&&n!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:n,toolbarVariant:e})=>n==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:n,toolbarVariant:e,toolbarDirection:t})=>n==="landscape"&&e!=="desktop"&&t==="rtl",style:{flexDirection:"column-reverse"}}]}),mX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:n=>va(n)&&n!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),nD=Me(VO,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:n=>va(n)&&n!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),yX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(n,e)=>[{[`.${Fx.ampmLabel}`]:e.ampmLabel},{[`&.${Fx.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${Fx.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),vX=V.createContext(null);function xX(n){const e=vt({props:n,name:"MuiDateTimePickerToolbar"}),{ampm:t,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="––",toolbarTitle:s,className:o,classes:c}=e,d=Ne(e,dX),{value:f,setValue:p,disabled:g,readOnly:y,variant:v,orientation:b,view:A,setView:E,views:T}=Ll(),C=Ha(),I=RO(),O=fX(c,I),N=Gt(),M=V.useContext(vX),R=M?M.value:f,D=M?M.setValue:p,B=M?M.view:A,L=M?M.setView:E,{meridiemMode:P,handleMeridiemChange:F}=J4(R,t,fe=>D(fe,{changeImportance:"set"})),q=M!=null&&M.forceDesktopVariant?"desktop":v,X=q==="desktop",G=!!(t&&!r),Y=s??C.dateTimePickerToolbarTitle,Q=V.useMemo(()=>N.isValid(R)?i?N.formatByString(R,i):N.format(R,"shortDate"):a,[R,i,a,N]),Z=(fe,ge)=>N.isValid(R)?N.format(R,fe):ge;return x.jsxs(hX,H({className:jt(O.root,o),toolbarTitle:Y,toolbarVariant:q},d,{ownerState:I,children:[x.jsxs(pX,{className:O.dateContainer,ownerState:I,children:[T.includes("year")&&x.jsx(il,{tabIndex:-1,variant:"subtitle1",onClick:()=>L("year"),selected:B==="year",value:Z("year","–")}),T.includes("day")&&x.jsx(il,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>L("day"),selected:B==="day",value:Q})]}),x.jsxs(gX,{className:O.timeContainer,ownerState:I,toolbarVariant:q,children:[x.jsxs(mX,{className:O.timeDigitsContainer,ownerState:I,toolbarVariant:q,children:[T.includes("hours")&&x.jsxs(V.Fragment,{children:[x.jsx(il,{variant:X?"h5":"h3",width:X&&b==="portrait"?jh:void 0,onClick:()=>L("hours"),selected:B==="hours",value:Z(t?"hours12h":"hours24h","--")}),x.jsx(nD,{variant:X?"h5":"h3",value:":",className:O.separator,ownerState:I,toolbarVariant:q}),x.jsx(il,{variant:X?"h5":"h3",width:X&&b==="portrait"?jh:void 0,onClick:()=>L("minutes"),selected:B==="minutes"||!T.includes("minutes")&&B==="hours",value:Z("minutes","--"),disabled:!T.includes("minutes")})]}),T.includes("seconds")&&x.jsxs(V.Fragment,{children:[x.jsx(nD,{variant:X?"h5":"h3",value:":",className:O.separator,ownerState:I,toolbarVariant:q}),x.jsx(il,{variant:X?"h5":"h3",width:X&&b==="portrait"?jh:void 0,onClick:()=>L("seconds"),selected:B==="seconds",value:Z("seconds","--")})]})]}),G&&!X&&x.jsxs(yX,{className:O.ampmSelection,ownerState:I,children:[x.jsx(il,{variant:"subtitle2",selected:P==="am",typographyClassName:O.ampmLabel,value:Kh(N,"am"),onClick:y?void 0:()=>F("am"),disabled:g}),x.jsx(il,{variant:"subtitle2",selected:P==="pm",typographyClassName:O.ampmLabel,value:Kh(N,"pm"),onClick:y?void 0:()=>F("pm"),disabled:g})]}),t&&X&&x.jsx(il,{variant:"h5",onClick:()=>L("meridiem"),selected:B==="meridiem",value:R&&P?Kh(N,P):"--",width:jh})]})]}))}function UO(n,e){var y;const t=Gt(),r=vt({props:n,name:e}),i=fO(r),a=r.ampm??t.is12HourCycleInCurrentLocale(),s=V.useMemo(()=>{var v;return((v=r.localeText)==null?void 0:v.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=f$({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=rX({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:xX,tabs:cX},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(y=r.slotProps)==null?void 0:y.toolbar)})})}const wX=V.forwardRef(function(e,t){var v;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=PO(e),{orientation:d}=Ll(),{sx:f,className:p,classes:g}=e,y=s&&(((v=s.props.actions)==null?void 0:v.length)??0)>0;return x.jsxs(kO,{ref:t,className:jt(Da.root,g==null?void 0:g.root,p),sx:[{[`& .${Da.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${Da.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,x.jsxs(NO,{className:jt(Da.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,y&&x.jsx(Pc,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),_X=["openTo","focusedView","timeViewsCount"],bX=function(e){var y,v;const{viewRenderers:t,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=Ne(i,_X),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${uw.root}`]:{borderBottom:0},[`&.${uw.root}, .${dw.root}, &.${cw.root}`]:{maxHeight:Hd}}]}),f=pd(r),p=f?"day":r,g=f?r:"hours";return x.jsxs(V.Fragment,{children:[(y=t[p])==null?void 0:y.call(t,H({},i,{view:f?"day":r,focusedView:s&&jd(s)?s:null,views:i.views.filter(jd),sx:[{gridColumn:1},...d.sx]})),o>0&&x.jsxs(V.Fragment,{children:[x.jsx(Pc,{orientation:"vertical",sx:{gridColumn:2}}),(v=t[g])==null?void 0:v.call(t,H({},d,{view:f?r:"hours",focusedView:s&&pd(s)?s:null,openTo:pd(a)?a:"hours",views:i.views.filter(pd),sx:[{gridColumn:3},...d.sx]}))]})]})},HO=V.forwardRef(function(e,t){var g,y,v;const r=Gt(),i=UO(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?FO:F1,s=H({day:Cd,month:Cd,year:Cd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===F1.name?i.views:i.views.filter(b=>b!=="meridiem"),f=H({},i,{viewRenderers:s,format:jO(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:bO,layout:wX},i.slots),slotProps:H({},i.slotProps,{field:b=>{var A;return H({},so((A=i.slotProps)==null?void 0:A.field,b),B4(i))},toolbar:H({hidden:!0,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!0},(v=i.slotProps)==null?void 0:v.tabs)})}),{renderPicker:p}=Fq({ref:t,props:f,valueManager:Ai,valueType:"date-time",validator:Ym,rendererInterceptor:bX,steps:null});return p()});HO.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:F3,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const AX=[{views:F4},{views:Q4}],zO=V.forwardRef(function(e,t){var g,y,v,b,A,E;const r=Gt(),i=UO(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?FO:F1,s=H({day:Cd,month:Cd,year:Cd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===F1.name?i.views:i.views.filter(T=>T!=="meridiem"),f=H({},i,{viewRenderers:s,format:jO(r,i),views:d,ampmInClock:o,slots:H({field:bO},i.slots),slotProps:H({},i.slotProps,{field:T=>{var C;return H({},so((C=i.slotProps)==null?void 0:C.field,T),B4(i))},toolbar:H({hidden:!1,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!1},(v=i.slotProps)==null?void 0:v.tabs),layout:H({},(b=i.slotProps)==null?void 0:b.layout,{sx:uG([{[`& .${uw.root}`]:{width:Ud},[`& .${dw.root}`]:{flex:1,maxHeight:Hd-1,[`.${dw.item}`]:{width:"auto"}},[`& .${cw.root}`]:{width:Ud,maxHeight:Hd,flex:1,[`.${cw.item}`]:{justifyContent:"center"}}}],(E=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:E.sx)})})}),{renderPicker:p}=Gq({ref:t,props:f,valueManager:Ai,valueType:"date-time",validator:Ym,steps:AX});return p()});zO.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:F3,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const EX=["desktopModeMediaQuery"],SX=V.forwardRef(function(e,t){const r=vt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=cG}=r,a=Ne(r,EX);return hm(i,{defaultMatches:!0})?x.jsx(HO,H({ref:t},a)):x.jsx(zO,H({ref:t},a))}),$O=6048e5,TX=864e5,GO=6e4,WO=36e5,CX=1e3,rD=Symbol.for("constructDateFrom");function On(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&rD in n?n[rD](e):n instanceof Date?new n.constructor(e):new Date(e)}function et(n,e){return On(e||n,n)}function Km(n,e,t){const r=et(n,t==null?void 0:t.in);return isNaN(e)?On((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function YO(n,e,t){return On(n,+et(n)+e)}function IX(n,e,t){return YO(n,e*1e3)}function DX(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*GO),r}function RX(n,e,t){return YO(n,e*WO)}function MX(n,e,t){return Km(n,e*7,t)}function qO(n,e,t){const r=et(n,t==null?void 0:t.in);if(isNaN(e))return On(n,NaN);if(!e)return r;const i=r.getDate(),a=On(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function OX(n,e,t){return qO(n,e*12,t)}function iD(n,e){const t=et(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let PX={};function Jc(){return PX}function kX(n,e){var o,c,d,f;const t=Jc(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=et(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function aD(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}const NX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LX=(n,e,t)=>{let r;const i=NX[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Id(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const BX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jX={date:Id({formats:BX,defaultWidth:"full"}),time:Id({formats:VX,defaultWidth:"full"}),dateTime:Id({formats:FX,defaultWidth:"full"})},UX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HX=(n,e,t,r)=>UX[n];function us(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const zX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$X={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XX=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},KX={ordinalNumber:XX,era:us({values:zX,defaultWidth:"wide"}),quarter:us({values:$X,defaultWidth:"wide",argumentCallback:n=>n-1}),month:us({values:GX,defaultWidth:"wide"}),day:us({values:WX,defaultWidth:"wide"}),dayPeriod:us({values:YX,defaultWidth:"wide",formattingValues:qX,defaultFormattingWidth:"wide"})};function ds(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?ZX(o,p=>p.test(s)):QX(o,p=>p.test(s));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function QX(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function ZX(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function XO(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const JX=/^(\d+)(th|st|nd|rd)?/i,eK=/\d+/i,tK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nK={any:[/^b/i,/^(a|c)/i]},rK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iK={any:[/1/i,/2/i,/3/i,/4/i]},aK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dK={ordinalNumber:XO({matchPattern:JX,parsePattern:eK,valueCallback:n=>parseInt(n,10)}),era:ds({matchPatterns:tK,defaultMatchWidth:"wide",parsePatterns:nK,defaultParseWidth:"any"}),quarter:ds({matchPatterns:rK,defaultMatchWidth:"wide",parsePatterns:iK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ds({matchPatterns:aK,defaultMatchWidth:"wide",parsePatterns:sK,defaultParseWidth:"any"}),day:ds({matchPatterns:oK,defaultMatchWidth:"wide",parsePatterns:lK,defaultParseWidth:"any"}),dayPeriod:ds({matchPatterns:cK,defaultMatchWidth:"any",parsePatterns:uK,defaultParseWidth:"any"})},sb={code:"en-US",formatDistance:LX,formatLong:jX,formatRelative:HX,localize:KX,match:dK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function j1(n){const e=et(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function U0(n,...e){const t=On.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function p0(n,e){const t=et(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function fK(n,e,t){const[r,i]=U0(t==null?void 0:t.in,n,e),a=p0(r),s=p0(i),o=+a-j1(a),c=+s-j1(s);return Math.round((o-c)/TX)}function KO(n,e){const t=et(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function hK(n,e){const t=et(n,e==null?void 0:e.in);return fK(t,KO(t))+1}function xo(n,e){var o,c,d,f;const t=Jc(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=et(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function zd(n,e){return xo(n,{...e,weekStartsOn:1})}function QO(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=On(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=zd(i),s=On(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=zd(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function pK(n,e){const t=QO(n,e),r=On(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),zd(r)}function ZO(n,e){const t=et(n,e==null?void 0:e.in),r=+zd(t)-+pK(t);return Math.round(r/$O)+1}function ob(n,e){var f,p,g,y;const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=Jc(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=On((e==null?void 0:e.in)||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=xo(s,e),c=On((e==null?void 0:e.in)||n,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=xo(c,e);return+t>=+o?r+1:+t>=+d?r:r-1}function gK(n,e){var o,c,d,f;const t=Jc(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=ob(n,e),a=On((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),xo(a,e)}function lb(n,e){const t=et(n,e==null?void 0:e.in),r=+xo(t,e)-+gK(t,e);return Math.round(r/$O)+1}function on(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const al={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return on(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):on(t+1,2)},d(n,e){return on(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return on(n.getHours()%12||12,e.length)},H(n,e){return on(n.getHours(),e.length)},m(n,e){return on(n.getMinutes(),e.length)},s(n,e){return on(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return on(i,e.length)}},Ku={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sD={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return al.y(n,e)},Y:function(n,e,t,r){const i=ob(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return on(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):on(a,e.length)},R:function(n,e){const t=QO(n);return on(t,e.length)},u:function(n,e){const t=n.getFullYear();return on(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return on(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return on(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return al.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return on(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=lb(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):on(i,e.length)},I:function(n,e,t){const r=ZO(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):on(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):al.d(n,e)},D:function(n,e,t){const r=hK(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):on(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return on(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return on(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return on(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ku.noon:r===0?i=Ku.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ku.evening:r>=12?i=Ku.afternoon:r>=4?i=Ku.morning:i=Ku.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return al.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):al.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):on(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):on(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):al.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):al.s(n,e)},S:function(n,e){return al.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return lD(r);case"XXXX":case"XX":return Ac(r);case"XXXXX":case"XXX":default:return Ac(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return lD(r);case"xxxx":case"xx":return Ac(r);case"xxxxx":case"xxx":default:return Ac(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+oD(r,":");case"OOOO":default:return"GMT"+Ac(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+oD(r,":");case"zzzz":default:return"GMT"+Ac(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return on(r,e.length)},T:function(n,e,t){return on(+n,e.length)}};function oD(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+on(a,2)}function lD(n,e){return n%60===0?(n>0?"-":"+")+on(Math.abs(n)/60,2):Ac(n,e)}function Ac(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=on(Math.trunc(r/60),2),a=on(r%60,2);return t+i+e+a}const cD=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},JO=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return cD(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",cD(r,e)).replace("{{time}}",JO(i,e))},U1={p:JO,P:mK},yK=/^D+$/,vK=/^Y+$/,xK=["D","DD","YY","YYYY"];function eP(n){return yK.test(n)}function tP(n){return vK.test(n)}function fw(n,e,t){const r=wK(n,e,t);if(console.warn(r),xK.includes(n))throw new RangeError(r)}function wK(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function _K(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function nP(n){return!(!_K(n)&&typeof n!="number"||isNaN(+et(n)))}const bK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EK=/^'([^]*?)'?$/,SK=/''/g,TK=/[a-zA-Z]/;function CK(n,e,t){var f,p,g,y,v,b,A,E;const r=Jc(),i=(t==null?void 0:t.locale)??r.locale??sb,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((E=(A=r.locale)==null?void 0:A.options)==null?void 0:E.weekStartsOn)??0,o=et(n,t==null?void 0:t.in);if(!nP(o))throw new RangeError("Invalid time value");let c=e.match(AK).map(T=>{const C=T[0];if(C==="p"||C==="P"){const I=U1[C];return I(T,i.formatLong)}return T}).join("").match(bK).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const C=T[0];if(C==="'")return{isToken:!1,value:IK(T)};if(sD[C])return{isToken:!0,value:T};if(C.match(TK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(T=>{if(!T.isToken)return T.value;const C=T.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&tP(C)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&eP(C))&&fw(C,e,String(n));const I=sD[C[0]];return I(o,C,i.localize,d)}).join("")}function IK(n){const e=n.match(EK);return e?e[1].replace(SK,"'"):n}function DK(n,e){return et(n,e==null?void 0:e.in).getDate()}function rP(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=t.getMonth(),a=On(t,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function RK(n,e){return et(n,e==null?void 0:e.in).getHours()}function MK(n,e){return et(n,e==null?void 0:e.in).getMinutes()}function OK(n,e){return et(n,e==null?void 0:e.in).getMonth()}function PK(n){return et(n).getSeconds()}function kK(n){return et(n).getMilliseconds()}function NK(n,e){return et(n,e==null?void 0:e.in).getFullYear()}function jx(n,e){return+et(n)>+et(e)}function Ux(n,e){return+et(n)<+et(e)}function LK(n,e){return+et(n)==+et(e)}function BK(n,e,t){const[r,i]=U0(t==null?void 0:t.in,n,e);return+p0(r)==+p0(i)}function VK(n,e,t){const[r,i]=U0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()}function FK(n,e,t){const[r,i]=U0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function uD(n,e){const t=et(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function jK(n,e,t){const[r,i]=U0(t==null?void 0:t.in,n,e);return+uD(r)==+uD(i)}function UK(){return Object.assign({},Jc())}function HK(n,e){const t=zK(e)?new e(0):On(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function zK(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const $K=10;class iP{constructor(){ye(this,"subPriority",0)}validate(e,t){return!0}}class GK extends iP{constructor(e,t,r,i,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class WK extends iP{constructor(t,r){super();ye(this,"priority",$K);ye(this,"subPriority",-1);this.context=t||(i=>On(r,i))}set(t,r){return r.timestampIsSet?t:On(t,HK(t,this.context))}}class Qt{run(e,t,r,i){const a=this.parse(e,t,r,i);return a?{setter:new GK(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class YK extends Qt{constructor(){super(...arguments);ye(this,"priority",140);ye(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const Zn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},fs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Jn(n,e){return n&&{value:e(n.value),rest:n.rest}}function Nn(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function hs(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:r*(i*WO+a*GO+s*CX),rest:e.slice(t[0].length)}}function aP(n){return Nn(Zn.anyDigitsSigned,n)}function Gn(n,e){switch(n){case 1:return Nn(Zn.singleDigit,e);case 2:return Nn(Zn.twoDigits,e);case 3:return Nn(Zn.threeDigits,e);case 4:return Nn(Zn.fourDigits,e);default:return Nn(new RegExp("^\\d{1,"+n+"}"),e)}}function H1(n,e){switch(n){case 1:return Nn(Zn.singleDigitSigned,e);case 2:return Nn(Zn.twoDigitsSigned,e);case 3:return Nn(Zn.threeDigitsSigned,e);case 4:return Nn(Zn.fourDigitsSigned,e);default:return Nn(new RegExp("^-?\\d{1,"+n+"}"),e)}}function cb(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function sP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=n>=a%100;i=n+s-(o?100:0)}return t?i:1-i}function oP(n){return n%400===0||n%4===0&&n%100!==0}class qK extends Qt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return Jn(Gn(4,t),a);case"yo":return Jn(i.ordinalNumber(t,{unit:"year"}),a);default:return Jn(Gn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const a=t.getFullYear();if(i.isTwoDigitYear){const o=sP(i.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const s=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class XK extends Qt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Jn(Gn(4,t),a);case"Yo":return Jn(i.ordinalNumber(t,{unit:"year"}),a);default:return Jn(Gn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,a){const s=ob(t,a);if(i.isTwoDigitYear){const c=sP(i.year,s);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),xo(t,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),xo(t,a)}}class KK extends Qt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return H1(r==="R"?4:r.length,t)}set(t,r,i){const a=On(t,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),zd(a)}}class QK extends Qt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return H1(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class ZK extends Qt{constructor(){super(...arguments);ye(this,"priority",120);ye(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Gn(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class JK extends Qt{constructor(){super(...arguments);ye(this,"priority",120);ye(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Gn(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class eQ extends Qt{constructor(){super(...arguments);ye(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ye(this,"priority",110)}parse(t,r,i){const a=s=>s-1;switch(r){case"M":return Jn(Nn(Zn.month,t),a);case"MM":return Jn(Gn(2,t),a);case"Mo":return Jn(i.ordinalNumber(t,{unit:"month"}),a);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class tQ extends Qt{constructor(){super(...arguments);ye(this,"priority",110);ye(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const a=s=>s-1;switch(r){case"L":return Jn(Nn(Zn.month,t),a);case"LL":return Jn(Gn(2,t),a);case"Lo":return Jn(i.ordinalNumber(t,{unit:"month"}),a);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function nQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=lb(r,t)-e;return r.setDate(r.getDate()-i*7),et(r,t==null?void 0:t.in)}class rQ extends Qt{constructor(){super(...arguments);ye(this,"priority",100);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Nn(Zn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Gn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,a){return xo(nQ(t,i,a),a)}}function iQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=ZO(r,t)-e;return r.setDate(r.getDate()-i*7),r}class aQ extends Qt{constructor(){super(...arguments);ye(this,"priority",100);ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Nn(Zn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Gn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return zd(iQ(t,i))}}const sQ=[31,28,31,30,31,30,31,31,30,31,30,31],oQ=[31,29,31,30,31,30,31,31,30,31,30,31];class lQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"subPriority",1);ye(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Nn(Zn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Gn(r.length,t)}}validate(t,r){const i=t.getFullYear(),a=oP(i),s=t.getMonth();return a?r>=1&&r<=oQ[s]:r>=1&&r<=sQ[s]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class cQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"subpriority",1);ye(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Nn(Zn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Gn(r.length,t)}}validate(t,r){const i=t.getFullYear();return oP(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function ub(n,e,t){var p,g,y,v;const r=Jc(),i=(t==null?void 0:t.weekStartsOn)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=et(n,t==null?void 0:t.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return Km(a,f,t)}class uQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=ub(t,i,a),t.setHours(0,0,0,0),t}}class dQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return Jn(Gn(r.length,t),s);case"eo":return Jn(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=ub(t,i,a),t.setHours(0,0,0,0),t}}class fQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return Jn(Gn(r.length,t),s);case"co":return Jn(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=ub(t,i,a),t.setHours(0,0,0,0),t}}function hQ(n,e){const t=et(n,e==null?void 0:e.in).getDay();return t===0?7:t}function pQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=hQ(r,t),a=e-i;return Km(r,a,t)}class gQ extends Qt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Gn(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Jn(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return Jn(i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Jn(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Jn(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=pQ(t,i),t.setHours(0,0,0,0),t}}class mQ extends Qt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cb(i),0,0,0),t}}class yQ extends Qt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cb(i),0,0,0),t}}class vQ extends Qt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(cb(i),0,0,0),t}}class xQ extends Qt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Nn(Zn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Gn(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const a=t.getHours()>=12;return a&&i<12?t.setHours(i+12,0,0,0):!a&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class wQ extends Qt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Nn(Zn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Gn(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class _Q extends Qt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Nn(Zn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Gn(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class bQ extends Qt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Nn(Zn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Gn(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const a=i<=24?i%24:i;return t.setHours(a,0,0,0),t}}class AQ extends Qt{constructor(){super(...arguments);ye(this,"priority",60);ye(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Nn(Zn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Gn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class EQ extends Qt{constructor(){super(...arguments);ye(this,"priority",50);ye(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Nn(Zn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Gn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class SQ extends Qt{constructor(){super(...arguments);ye(this,"priority",30);ye(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return Jn(Gn(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class TQ extends Qt{constructor(){super(...arguments);ye(this,"priority",10);ye(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return hs(fs.basicOptionalMinutes,t);case"XX":return hs(fs.basic,t);case"XXXX":return hs(fs.basicOptionalSeconds,t);case"XXXXX":return hs(fs.extendedOptionalSeconds,t);case"XXX":default:return hs(fs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:On(t,t.getTime()-j1(t)-i)}}class CQ extends Qt{constructor(){super(...arguments);ye(this,"priority",10);ye(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return hs(fs.basicOptionalMinutes,t);case"xx":return hs(fs.basic,t);case"xxxx":return hs(fs.basicOptionalSeconds,t);case"xxxxx":return hs(fs.extendedOptionalSeconds,t);case"xxx":default:return hs(fs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:On(t,t.getTime()-j1(t)-i)}}class IQ extends Qt{constructor(){super(...arguments);ye(this,"priority",40);ye(this,"incompatibleTokens","*")}parse(t){return aP(t)}set(t,r,i){return[On(t,i*1e3),{timestampIsSet:!0}]}}class DQ extends Qt{constructor(){super(...arguments);ye(this,"priority",20);ye(this,"incompatibleTokens","*")}parse(t){return aP(t)}set(t,r,i){return[On(t,i),{timestampIsSet:!0}]}}const RQ={G:new YK,y:new qK,Y:new XK,R:new KK,u:new QK,Q:new ZK,q:new JK,M:new eQ,L:new tQ,w:new rQ,I:new aQ,d:new lQ,D:new cQ,E:new uQ,e:new dQ,c:new fQ,i:new gQ,a:new mQ,b:new yQ,B:new vQ,h:new xQ,H:new wQ,K:new _Q,k:new bQ,m:new AQ,s:new EQ,S:new SQ,X:new TQ,x:new CQ,t:new IQ,T:new DQ},MQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,OQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PQ=/^'([^]*?)'?$/,kQ=/''/g,NQ=/\S/,LQ=/[a-zA-Z]/;function BQ(n,e,t,r){var A,E,T,C,I,O,N,M;const i=()=>On((r==null?void 0:r.in)||t,NaN),a=UK(),s=(r==null?void 0:r.locale)??a.locale??sb,o=(r==null?void 0:r.firstWeekContainsDate)??((E=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((O=(I=r==null?void 0:r.locale)==null?void 0:I.options)==null?void 0:O.weekStartsOn)??a.weekStartsOn??((M=(N=a.locale)==null?void 0:N.options)==null?void 0:M.weekStartsOn)??0;if(!e)return n?i():et(t,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new WK(r==null?void 0:r.in,t)],p=e.match(OQ).map(R=>{const D=R[0];if(D in U1){const B=U1[D];return B(R,s.formatLong)}return R}).join("").match(MQ),g=[];for(let R of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&tP(R)&&fw(R,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&eP(R)&&fw(R,e,n);const D=R[0],B=RQ[D];if(B){const{incompatibleTokens:L}=B;if(Array.isArray(L)){const F=g.find(q=>L.includes(q.token)||q.token===D);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${R}\` at the same time`)}else if(B.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);g.push({token:D,fullToken:R});const P=B.run(n,R,s.match,d);if(!P)return i();f.push(P.setter),n=P.rest}else{if(D.match(LQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");if(R==="''"?R="'":D==="'"&&(R=VQ(R)),n.indexOf(R)===0)n=n.slice(R.length);else return i()}}if(n.length>0&&NQ.test(n))return i();const y=f.map(R=>R.priority).sort((R,D)=>D-R).filter((R,D,B)=>B.indexOf(R)===D).map(R=>f.filter(D=>D.priority===R).sort((D,B)=>B.subPriority-D.subPriority)).map(R=>R[0]);let v=et(t,r==null?void 0:r.in);if(isNaN(+v))return i();const b={};for(const R of y){if(!R.validate(v,d))return i();const D=R.set(v,b,d);Array.isArray(D)?(v=D[0],Object.assign(b,D[1])):v=D}return v}function VQ(n){return n.match(PQ)[1].replace(kQ,"'")}function FQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setDate(e),r}function jQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setHours(e),r}function UQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setMinutes(e),r}function HQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=r.getFullYear(),a=r.getDate(),s=On(n,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=rP(s);return r.setMonth(e,Math.min(a,o)),r}function zQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setSeconds(e),r}function $Q(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function GQ(n,e,t){const r=et(n,t==null?void 0:t.in);return isNaN(+r)?On(n,NaN):(r.setFullYear(e),r)}function WQ(n,e){const t=et(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function YQ(n,e){const t=et(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function qQ(n,e,t){const r=+et(n,t==null?void 0:t.in),[i,a]=[+et(e.start,t==null?void 0:t.in),+et(e.end,t==null?void 0:t.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const XQ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},KQ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class QQ{constructor(e){ye(this,"isMUIAdapter",!0);ye(this,"isTimezoneCompatible",!1);ye(this,"formatTokenMap",XQ);ye(this,"escapedCharacters",{start:"'",end:"'"});ye(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));ye(this,"getInvalidDate",()=>new Date("Invalid Date"));ye(this,"getTimezone",()=>"default");ye(this,"setTimezone",e=>e);ye(this,"toJsDate",e=>e);ye(this,"getCurrentLocaleCode",()=>this.locale.code);ye(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));ye(this,"expandFormat",e=>{const t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(t).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});ye(this,"formatNumber",e=>e);ye(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:t,formats:r,longFormatters:i,lib:a}=e;this.locale=t,this.formats=H({},KQ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class ZQ extends QQ{constructor({locale:t,formats:r}={}){super({locale:t??sb,formats:r,longFormatters:U1});ye(this,"parse",(t,r)=>t===""?null:BQ(t,r,new Date,{locale:this.locale}));ye(this,"isValid",t=>t==null?!1:nP(t));ye(this,"format",(t,r)=>this.formatByString(t,this.formats[r]));ye(this,"formatByString",(t,r)=>CK(t,r,{locale:this.locale}));ye(this,"isEqual",(t,r)=>t===null&&r===null?!0:t===null||r===null?!1:LK(t,r));ye(this,"isSameYear",(t,r)=>VK(t,r));ye(this,"isSameMonth",(t,r)=>FK(t,r));ye(this,"isSameDay",(t,r)=>BK(t,r));ye(this,"isSameHour",(t,r)=>jK(t,r));ye(this,"isAfter",(t,r)=>jx(t,r));ye(this,"isAfterYear",(t,r)=>jx(t,aD(r)));ye(this,"isAfterDay",(t,r)=>jx(t,iD(r)));ye(this,"isBefore",(t,r)=>Ux(t,r));ye(this,"isBeforeYear",(t,r)=>Ux(t,this.startOfYear(r)));ye(this,"isBeforeDay",(t,r)=>Ux(t,this.startOfDay(r)));ye(this,"isWithinRange",(t,[r,i])=>qQ(t,{start:r,end:i}));ye(this,"startOfYear",t=>KO(t));ye(this,"startOfMonth",t=>WQ(t));ye(this,"startOfWeek",t=>xo(t,{locale:this.locale}));ye(this,"startOfDay",t=>p0(t));ye(this,"endOfYear",t=>aD(t));ye(this,"endOfMonth",t=>YQ(t));ye(this,"endOfWeek",t=>kX(t,{locale:this.locale}));ye(this,"endOfDay",t=>iD(t));ye(this,"addYears",(t,r)=>OX(t,r));ye(this,"addMonths",(t,r)=>qO(t,r));ye(this,"addWeeks",(t,r)=>MX(t,r));ye(this,"addDays",(t,r)=>Km(t,r));ye(this,"addHours",(t,r)=>RX(t,r));ye(this,"addMinutes",(t,r)=>DX(t,r));ye(this,"addSeconds",(t,r)=>IX(t,r));ye(this,"getYear",t=>NK(t));ye(this,"getMonth",t=>OK(t));ye(this,"getDate",t=>DK(t));ye(this,"getHours",t=>RK(t));ye(this,"getMinutes",t=>MK(t));ye(this,"getSeconds",t=>PK(t));ye(this,"getMilliseconds",t=>kK(t));ye(this,"setYear",(t,r)=>GQ(t,r));ye(this,"setMonth",(t,r)=>HQ(t,r));ye(this,"setDate",(t,r)=>FQ(t,r));ye(this,"setHours",(t,r)=>jQ(t,r));ye(this,"setMinutes",(t,r)=>UQ(t,r));ye(this,"setSeconds",(t,r)=>zQ(t,r));ye(this,"setMilliseconds",(t,r)=>$Q(t,r));ye(this,"getDaysInMonth",t=>rP(t));ye(this,"getWeekArray",t=>{const r=this.startOfWeek(this.startOfMonth(t)),i=this.endOfWeek(this.endOfMonth(t));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});ye(this,"getWeekNumber",t=>lb(t,{locale:this.locale}));ye(this,"getYearRange",([t,r])=>{const i=this.startOfYear(t),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const JQ={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},eZ=(n,e,t)=>{t=t||{};let r;const i=JQ[n];return typeof i=="string"?r=i:e===1?t.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:t.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),t.addSuffix?t.comparison&&t.comparison>0?r+"後":r+"前":r},tZ={full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},nZ={full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},rZ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},iZ={date:Id({formats:tZ,defaultWidth:"full"}),time:Id({formats:nZ,defaultWidth:"full"}),dateTime:Id({formats:rZ,defaultWidth:"full"})},aZ={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},sZ=(n,e,t,r)=>aZ[n],oZ={narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},lZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},cZ={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},uZ={narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},dZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},fZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},hZ=(n,e)=>{const t=Number(n);switch(String(e==null?void 0:e.unit)){case"year":return`${t}年`;case"quarter":return`第${t}四半期`;case"month":return`${t}月`;case"week":return`第${t}週`;case"date":return`${t}日`;case"hour":return`${t}時`;case"minute":return`${t}分`;case"second":return`${t}秒`;default:return`${t}`}},pZ={ordinalNumber:hZ,era:us({values:oZ,defaultWidth:"wide"}),quarter:us({values:lZ,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:us({values:cZ,defaultWidth:"wide"}),day:us({values:uZ,defaultWidth:"wide"}),dayPeriod:us({values:dZ,defaultWidth:"wide",formattingValues:fZ,defaultFormattingWidth:"wide"})},gZ=/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,mZ=/\d+/i,yZ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},vZ={narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},xZ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},wZ={any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},_Z={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},bZ={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},AZ={narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},EZ={any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},SZ={any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},TZ={any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},CZ={ordinalNumber:XO({matchPattern:gZ,parsePattern:mZ,valueCallback:function(n){return parseInt(n,10)}}),era:ds({matchPatterns:yZ,defaultMatchWidth:"wide",parsePatterns:vZ,defaultParseWidth:"any"}),quarter:ds({matchPatterns:xZ,defaultMatchWidth:"wide",parsePatterns:wZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ds({matchPatterns:_Z,defaultMatchWidth:"wide",parsePatterns:bZ,defaultParseWidth:"any"}),day:ds({matchPatterns:AZ,defaultMatchWidth:"wide",parsePatterns:EZ,defaultParseWidth:"any"}),dayPeriod:ds({matchPatterns:SZ,defaultMatchWidth:"any",parsePatterns:TZ,defaultParseWidth:"any"})},IZ={code:"ja",formatDistance:eZ,formatLong:iZ,formatRelative:sZ,localize:pZ,match:CZ,options:{weekStartsOn:0,firstWeekContainsDate:1}},DZ=({open:n,onClose:e,onAdd:t,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=V.useState(new Date),[c,d]=V.useState(yt.READING),[f,p]=V.useState(""),[g,y]=V.useState(!1),[v,b]=V.useState(""),A=()=>Object.values(yt).filter(C=>C!==c);Pi.useEffect(()=>{f===c&&p("")},[c,f]),Pi.useEffect(()=>{n&&p(a&&a!==c?a:"")},[n,a,c]);const E=async()=>{b(""),y(!0);try{if(!s)throw new Error("日時を選択してください");if(!O1(c))throw new Error("無効なステータスです");if(s>new Date)throw new Error("未来の日時は設定できません");if(i.some(I=>{const O=I.changedAt.toDate?I.changedAt.toDate():new Date(I.changedAt);return Math.abs(O-s)<6e4}))throw new Error("同じ日時の履歴が既に存在します");await t(s,c,f,i),T()}catch(C){b(C.message)}finally{y(!1)}},T=()=>{o(new Date),d(yt.READING),p(""),b(""),y(!1),e()};return x.jsx(N4,{dateAdapter:ZQ,adapterLocale:IZ,children:x.jsxs(Ba,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,children:[x.jsx(bs,{children:"📝 ステータス履歴を追加"}),x.jsx(Va,{children:x.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[x.jsx(SX,{label:"日時",value:s,onChange:C=>o(C),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),x.jsxs(fa,{fullWidth:!0,children:[x.jsx(Js,{children:"ステータス"}),x.jsx(pl,{value:c,onChange:C=>d(C.target.value),label:"ステータス",children:Object.entries(M1).map(([C,I])=>x.jsx(Un,{value:C,children:I},C))})]}),x.jsxs(fa,{fullWidth:!0,children:[x.jsx(Js,{children:"前のステータス"}),x.jsxs(pl,{value:f,onChange:C=>p(C.target.value),label:"前のステータス",children:[x.jsx(Un,{value:"",children:x.jsx("em",{children:"なし"})}),A().map(C=>x.jsx(Un,{value:C,children:M1[C]},C))]})]}),v&&x.jsx(se,{color:"error",variant:"body2",children:v})]})}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:T,disabled:g,children:"キャンセル"}),x.jsx(st,{onClick:E,variant:"contained",disabled:g,children:g?"保存中...":"保存"})]})]})})},RZ=({history:n=[],loading:e=!1,error:t=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=V.useState(!1),p=async(b,A,E,T)=>{o&&await o(b,A,E,T)},g=b=>{switch(b){case yt.TSUNDOKU:return x.jsx(hT,{});case yt.READING:return x.jsx(hN,{});case yt.RE_READING:return x.jsx(fN,{});case yt.FINISHED:return x.jsx(dN,{});default:return x.jsx(hT,{})}},y=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=()=>!r||Object.keys(r).length===0?null:x.jsxs(de,{sx:{mb:3},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"重要日付"}),x.jsxs(da,{sx:{p:2,mb:2},children:[r.readingStartedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読書開始日"}),x.jsx(se,{variant:"body1",children:y(r.readingStartedAt)})]}),r.reReadingStartedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"再読開始日"}),x.jsx(se,{variant:"body1",children:y(r.reReadingStartedAt)})]}),r.finishedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読了日"}),x.jsx(se,{variant:"body1",children:y(r.finishedAt)})]}),i&&x.jsxs(de,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読書期間"}),x.jsxs(se,{variant:"body1",children:[i,"日間"]})]})]})]});return e?x.jsx(de,{sx:{p:2},children:x.jsx(se,{children:"履歴を読み込み中..."})}):t?x.jsx(de,{sx:{p:2},children:x.jsxs(se,{color:"error",children:["エラー: ",t]})}):x.jsxs(de,{sx:{p:2},children:[v(),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[x.jsx(se,{variant:"h6",children:"ステータス変更履歴"}),a&&x.jsx(st,{variant:"outlined",size:"small",startIcon:x.jsx(j3,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:"履歴追加"})]}),(!n||n.length===0)&&x.jsxs(de,{sx:{textAlign:"center",py:4},children:[x.jsx(se,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"履歴がありません"}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"過去のステータス変更履歴を追加できます"})]}),x.jsx(V3,{children:(n||[]).map((b,A)=>x.jsxs(B3,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[x.jsx(cN,{sx:{minWidth:"auto"},children:x.jsx(uN,{sx:{bgcolor:ls(b.status)==="primary"?"primary.main":ls(b.status)==="secondary"?"secondary.main":ls(b.status)==="success"?"success.main":"default",width:32,height:32},children:g(b.status)})}),x.jsxs(de,{sx:{flexGrow:1},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[x.jsx(Cn,{label:yo(b.status),color:ls(b.status),size:"small"}),b.previousStatus&&x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"←"}),x.jsx(Cn,{label:yo(b.previousStatus),color:ls(b.previousStatus),size:"small",variant:"outlined"})]})]}),x.jsx(se,{variant:"body2",color:"text.secondary",children:y(b.changedAt)}),b.notes&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:b.notes})]})]}),A<n.length-1&&x.jsx(Pc,{sx:{width:"100%",mt:1}})]},b.id))}),a&&x.jsx(DZ,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:n,currentBookStatus:c})]})},MZ=({bookId:n})=>{const{latestHistory:e,loading:t,error:r}=z_(n);if(t)return x.jsxs(da,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(pN,{variant:"rectangular",height:40})]});if(r)return x.jsxs(da,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(se,{color:"error",children:"履歴の取得に失敗しました"})]});if(!e)return x.jsxs(da,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(se,{color:"text.secondary",children:"履歴がありません"})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return x.jsxs(da,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),x.jsx(Cn,{label:yo(e.status),color:ls(e.status),size:"small"}),e.previousStatus&&x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"←"}),x.jsx(Cn,{label:yo(e.previousStatus),color:ls(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},OZ=n=>{const{user:e}=hr(),t=V.useContext(di),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState(null),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(async()=>{if(!e||!n){o(!1);return}try{o(!0),d(null);const v=mo(Ot,"books",n),b=await GF(v);b.exists()&&b.data().userId===e.uid?a({id:b.id,...b.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),d("書籍が見つからないか、アクセス権限がありません。"))}catch(v){console.error("Error fetching document:",v),r("書籍情報の取得に失敗しました。"),d("書籍情報の取得に失敗しました。")}finally{o(!1)}},[n,e]),p=V.useCallback(async v=>{if(!e||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const b=mo(Ot,"books",n);return await Vm(b,{...v,updatedAt:$i()}),a(A=>({...A,...v})),!0}catch(b){throw console.error("Error updating book:",b),r("書籍情報の更新に失敗しました。"),b}},[n,e]),g=V.useCallback(async v=>await p({status:v}),[p]),y=V.useCallback(async v=>await p({tags:v}),[p]);return V.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:y}},Ng=n=>n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:new Date(n),PZ=()=>{const{id:n}=ON(),e=gm(),{book:t,loading:r,error:i,updateBookStatus:a,updateBookTags:s}=OZ(n),{history:o,loading:c,error:d,addManualStatusHistory:f,getImportantDates:p,getReadingDuration:g}=z_(n),[y,v]=V.useState(0),[b,A]=V.useState(!1),[E,T]=V.useState(0);V.useEffect(()=>{console.log("📖 BookDetail mounted:",{id:n,pathname:e.pathname})},[n,e.pathname]);const C=P=>{a(P)},I=P=>{s(P)},O=async(P,F,q,X=[])=>{try{await f(P,F,q),console.log("Manual history added successfully");const G=[...X],Y={status:F,previousStatus:q,changedAt:P};G.push(Y),G.sort((Z,fe)=>Ng(fe.changedAt)-Ng(Z.changedAt));const Q=G.length>0&&Ng(G[0].changedAt).getTime()===Ng(P).getTime();if(!t)return;Q&&F!==t.status&&await a(F)}catch(G){console.error("Failed to add manual history:",G)}},N=()=>{console.log("BookDetail - handleMemoAdded: MemoListを再レンダリング"),v(P=>P+1),A(!1)},M=()=>{console.log("BookDetail - handleMemoUpdated: MemoListを再レンダリング"),v(P=>P+1)},R=()=>{A(!0)},D=()=>{A(!1)},B=(P,F)=>{T(F)},L=()=>{switch(E){case 0:return x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),x.jsx(n$,{bookId:t.id,onMemoUpdated:M},y)]});case 1:return x.jsx(RZ,{history:o,loading:c,error:d,importantDates:p(),readingDuration:g(),showAddButton:!0,bookId:n,onAddHistory:O,currentBookStatus:t==null?void 0:t.status});default:return null}};return r?x.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):i?(console.error("📖 BookDetail error:",i),x.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",i]})):t?x.jsxs(de,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[x.jsxs(da,{sx:{p:{xs:2,sm:3}},children:[x.jsx(a$,{book:t,bookId:n,onStatusChange:C}),x.jsx(MZ,{bookId:n}),x.jsx(s$,{book:t,bookId:n,onTagsChange:I}),x.jsx(Pc,{sx:{my:{xs:1,sm:2}}}),x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:x.jsxs(fm,{value:E,onChange:B,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[x.jsx(Ma,{label:"メモ一覧","data-testid":"memo-list-tab"}),x.jsx(Ma,{label:"ステータス履歴","data-testid":"status-history-tab"})]})}),L()]}),x.jsx(gN,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:R,"data-testid":"memo-add-fab",children:x.jsx(j3,{})}),x.jsx(Ba,{open:b,onClose:D,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:x.jsx(r$,{bookId:t.id,bookTags:t.tags||[],onMemoAdded:N,onClose:D})})]}):(console.warn("📖 BookDetail: Book not found for ID:",n),x.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"}))};function dD({children:n,value:e,index:t,...r}){return x.jsx("div",{role:"tabpanel",hidden:e!==t,id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,...r,children:e===t&&x.jsx(de,{sx:{p:3},children:n})})}const kZ=n=>{const[e,t]=V.useState({}),[r,i]=V.useState(!1),[a,s]=V.useState(null),o=V.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: タグ統計取得開始, userId:",n.uid);const[p,g]=await Promise.all([lr(Hn(Br(Ot,"books"),Sn("userId","==",n.uid))),lr(Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)))]);console.log("useTagStats: データ取得完了, 本:",p.size,"メモ:",g.size);const y={};p.forEach(v=>{const b=v.data();console.log("useTagStats: 本データ:",{id:v.id,title:b.title,tags:b.tags}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(A=>{var T,C;y[A]||(y[A]={bookCount:0,memoCount:0,lastUsed:null}),y[A].bookCount++;const E=((C=(T=b.updatedAt)==null?void 0:T.toDate)==null?void 0:C.call(T))||new Date;(!y[A].lastUsed||E>y[A].lastUsed)&&(y[A].lastUsed=E)})}),console.log("useTagStats: 本のタグ集計完了"),g.forEach(v=>{var A,E;const b=v.data();console.log("useTagStats: メモデータ:",{id:v.id,bookId:(A=v.ref.parent.parent)==null?void 0:A.id,tags:b.tags,text:((E=b.text)==null?void 0:E.substring(0,30))+"..."}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(T=>{var I,O;y[T]||(y[T]={bookCount:0,memoCount:0,lastUsed:null}),y[T].memoCount++;const C=((O=(I=b.updatedAt)==null?void 0:I.toDate)==null?void 0:O.call(I))||new Date;(!y[T].lastUsed||C>y[T].lastUsed)&&(y[T].lastUsed=C)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",y),t(y),console.log("useTagStats: タグ統計設定完了")}catch(p){console.error("タグ統計の取得に失敗しました:",p),s(p)}finally{i(!1)}},[n==null?void 0:n.uid]),c=V.useCallback((p="count",g="desc")=>Object.entries(e).map(([v,b])=>({tag:v,...b,totalCount:b.bookCount+b.memoCount,type:b.bookCount>0&&b.memoCount>0?"both":b.bookCount>0?"book":"memo"})).sort((v,b)=>{let A=0;switch(p){case"count":A=b.totalCount-v.totalCount;break;case"name":A=v.tag.localeCompare(b.tag,"ja");break;case"lastUsed":A=(b.lastUsed||0)-(v.lastUsed||0);break;default:A=b.totalCount-v.totalCount}return g==="asc"?-A:A}),[e]),d=V.useCallback(p=>e[p]||null,[e]),f=V.useCallback(()=>{t({}),s(null)},[]);return V.useEffect(()=>{n!=null&&n.uid?o():f()},[n==null?void 0:n.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function sl(n){var e,t;if(n==null)return"";try{return(((t=(e=String(n)).normalize)==null?void 0:t.call(e,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function NZ(){const{user:n}=hr(),e=V.useContext(di),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),a=async(f,p)=>{for(let y=0;y<f.length;y+=450){const v=f.slice(y,y+450),b=XF(Ot);v.forEach(A=>p(b,A)),await b.commit()}},s=V.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=sl(f),y=sl(p);if(!g||!y)throw new Error("タグ名が不正です。");if(g===y)return{booksUpdated:0,memosUpdated:0};i(!0);try{const v=Hn(Br(Ot,"books"),Sn("userId","==",n.uid)),b=await lr(v),A=[];b.forEach(I=>{const O=I.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.includes(g)){const M=Array.from(new Set(N.map(R=>R===g?y:R)));A.push({ref:I.ref,tags:M})}});const E=Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)),T=await lr(E),C=[];return T.forEach(I=>{const O=I.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.includes(g)){const M=Array.from(new Set(N.map(R=>R===g?y:R)));C.push({ref:I.ref,tags:M})}}),await a(A,(I,O)=>{I.update(O.ref,{tags:O.tags})}),await a(C,(I,O)=>{I.update(O.ref,{tags:O.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(v){throw console.error("タグ名変更に失敗:",v),t("タグ名の変更に失敗しました。"),v}finally{i(!1)}},[n==null?void 0:n.uid]),o=V.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const p=sl(f);if(!p)throw new Error("タグ名が不正です。");i(!0);try{const g=Hn(Br(Ot,"books"),Sn("userId","==",n.uid)),y=await lr(g),v=[];y.forEach(T=>{const C=T.data(),I=Array.isArray(C.tags)?C.tags:[];if(I.includes(p)){const O=I.filter(N=>N!==p);v.push({ref:T.ref,tags:O})}});const b=Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)),A=await lr(b),E=[];return A.forEach(T=>{const C=T.data(),I=Array.isArray(C.tags)?C.tags:[];if(I.includes(p)){const O=I.filter(N=>N!==p);E.push({ref:T.ref,tags:O})}}),await a(v,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:v.length,memosUpdated:E.length}}catch(g){throw console.error("タグ削除に失敗:",g),t("タグの削除に失敗しました。"),g}finally{i(!1)}},[n==null?void 0:n.uid]),c=V.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>sl(g)).filter(g=>!!g));if(p.size===0)throw new Error("削除対象のタグがありません。");i(!0);try{const g=Hn(Br(Ot,"books"),Sn("userId","==",n.uid)),y=await lr(g),v=[];y.forEach(T=>{const C=T.data(),I=Array.isArray(C.tags)?C.tags:[],O=I.filter(N=>!p.has(sl(N)));O.length!==I.length&&v.push({ref:T.ref,tags:O})});const b=Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)),A=await lr(b),E=[];return A.forEach(T=>{const C=T.data(),I=Array.isArray(C.tags)?C.tags:[],O=I.filter(N=>!p.has(sl(N)));O.length!==I.length&&E.push({ref:T.ref,tags:O})}),await a(v,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:v.length,memosUpdated:E.length}}catch(g){throw console.error("タグ一括削除に失敗:",g),t("タグの一括削除に失敗しました。"),g}finally{i(!1)}},[n==null?void 0:n.uid]),d=V.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=sl(p),y=Array.from(new Set(String(f||"").split(",").map(v=>sl(v)).filter(v=>!!v)));if(!g||y.length===0)throw new Error("統合先と別名を入力してください。");if(y.includes(g))throw new Error("統合先と別名が同一です。");i(!0);try{const v=Hn(Br(Ot,"books"),Sn("userId","==",n.uid)),b=await lr(v),A=[];b.forEach(I=>{const O=I.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.some(R=>y.includes(R))){const R=N.filter(B=>!y.includes(B)),D=Array.from(new Set([...R,g]));D.join("|")!==N.join("|")&&A.push({ref:I.ref,tags:D})}});const E=Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)),T=await lr(E),C=[];return T.forEach(I=>{const O=I.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.some(R=>y.includes(R))){const R=N.filter(B=>!y.includes(B)),D=Array.from(new Set([...R,g]));D.join("|")!==N.join("|")&&C.push({ref:I.ref,tags:D})}}),await a(A,(I,O)=>{I.update(O.ref,{tags:O.tags})}),await a(C,(I,O)=>{I.update(O.ref,{tags:O.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(v){throw console.error("タグ統合に失敗:",v),t("タグの統合に失敗しました。"),v}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function LZ({open:n,tag:e,onClose:t,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=V.useState(e||""),[d,f]=V.useState(""),[p,g]=V.useState(""),y=()=>{c(e||""),t==null||t()};return x.jsxs(Ba,{open:n,onClose:y,maxWidth:"xs",fullWidth:!0,children:[x.jsx(bs,{children:"タグを編集"}),x.jsxs(Va,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"タグ名の変更またはタグの削除を行えます。"}),x.jsx(Pt,{autoFocus:!0,fullWidth:!0,label:"新しいタグ名",value:o,onChange:v=>c(v.target.value),disabled:s}),x.jsxs(de,{sx:{mt:2},children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"類似タグの統合（カンマ区切りで別名を指定）"}),x.jsx(Pt,{fullWidth:!0,label:"統合先（正規化タグ名）",value:d,onChange:v=>f(v.target.value),disabled:s}),x.jsx(Pt,{fullWidth:!0,label:"別名（カンマ区切り）",value:p,onChange:v=>g(v.target.value),disabled:s,sx:{mt:1}})]})]}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:"削除"}),x.jsx(st,{onClick:y,disabled:s,children:"キャンセル"}),x.jsx(st,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:"変更"}),x.jsx(st,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:"統合"})]})]})}function BZ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=hr(),{tagOptions:a,fetchTagHistory:s}=vo("book",i),{tagOptions:o,fetchTagHistory:c}=vo("memo",i),[d,f]=V.useState([]),[p,g]=V.useState("");V.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),V.useEffect(()=>{n||(f([]),g(""))},[n]);const y=V.useMemo(()=>{const v=new Set([...a||[],...o||[]]);return Array.from(v).sort((b,A)=>b.localeCompare(A,"ja"))},[a,o]);return x.jsxs(Ba,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[x.jsx(bs,{children:"タグを一括削除"}),x.jsxs(Va,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"削除するタグを選択または入力してください。複数選択できます。"}),x.jsx(uo,{multiple:!0,freeSolo:!0,options:y,value:d,inputValue:p,onInputChange:(v,b)=>g(b),onChange:(v,b)=>f(b),renderTags:(v,b)=>v.map((A,E)=>{const{key:T,...C}=b({index:E});return x.jsx(Cn,{label:A,...C,color:"error",variant:"outlined"},T)}),renderInput:v=>x.jsx(Pt,{...v,label:"削除タグ",placeholder:"タグ名を入力...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&x.jsx(de,{sx:{mt:1},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["削除対象: ",d.join(", ")]})})]}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:e,disabled:r,children:"キャンセル"}),x.jsx(st,{onClick:()=>t==null?void 0:t(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:"削除"})]})]})}function VZ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=hr(),{tagOptions:a,fetchTagHistory:s}=vo("book",i),{tagOptions:o,fetchTagHistory:c}=vo("memo",i),[d,f]=V.useState(""),[p,g]=V.useState([]),[y,v]=V.useState("");V.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),V.useEffect(()=>{n||(f(""),g([]),v(""))},[n]);const b=V.useMemo(()=>{const E=new Set([...a||[],...o||[]]);return Array.from(E).sort((T,C)=>T.localeCompare(C,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return x.jsxs(Ba,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[x.jsx(bs,{children:"タグを一括統合"}),x.jsxs(Va,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"複数の別名タグを正規タグへ統合します。正規タグと、統合したい別名タグを選択してください。"}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"subtitle2",sx:{mb:1},children:"正規タグ"}),x.jsx(uo,{freeSolo:!0,options:b,value:d,inputValue:y,onInputChange:(E,T)=>v(T),onChange:(E,T)=>f(T||y),renderInput:E=>x.jsx(Pt,{...E,label:"正規タグ",placeholder:"統合先のタグ名",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",sx:{mb:1},children:"別名タグ（複数可）"}),x.jsx(uo,{multiple:!0,freeSolo:!0,options:b,value:p,onChange:(E,T)=>g(T),renderTags:(E,T)=>E.map((C,I)=>{const{key:O,...N}=T({index:I});return x.jsx(Cn,{label:C,...N,color:"primary",variant:"outlined"},O)}),renderInput:E=>x.jsx(Pt,{...E,label:"別名タグ",placeholder:"統合したい別名を入力...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),x.jsxs(Fa,{children:[x.jsx(st,{onClick:e,disabled:r,children:"キャンセル"}),x.jsx(st,{onClick:()=>t==null?void 0:t(p,d||y),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:"統合"})]})]})}function FZ({onTagClick:n}){const{user:e}=hr(),{tagStats:t,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=kZ(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=NZ(),[g,y]=V.useState("count"),[v,b]=V.useState("desc"),[A,E]=V.useState(!1),[T,C]=V.useState(""),[I,O]=V.useState(!1),[N,M]=V.useState(!1),R=a(g,v),D=Object.keys(t).length,B=Object.values(t).reduce((P,F)=>P+F.bookCount,0),L=Object.values(t).reduce((P,F)=>P+F.memoCount,0);return r?x.jsx(de,{sx:{display:"flex",justifyContent:"center",p:3},children:x.jsx(Mw,{})}):i?x.jsx(de,{sx:{p:2},children:x.jsxs(ao,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):D===0?x.jsx(de,{sx:{p:3},children:x.jsx(ao,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):x.jsxs(de,{children:[x.jsxs(da,{sx:{p:2,mb:3},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"primary",children:D}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"総タグ数"})]}),x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"secondary",children:B}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"本の総件数"})]}),x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"info.main",children:L}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})]})]}),x.jsxs(de,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[x.jsxs(se,{variant:"h6",children:["タグ一覧 (",D,"件)"]}),x.jsx(Cn,{label:"一括削除",size:"small",color:"error",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-delete"}),x.jsx(Cn,{label:"一括統合",size:"small",color:"primary",variant:"outlined",onClick:()=>M(!0),"data-testid":"open-bulk-merge"}),x.jsxs(fa,{size:"small",sx:{minWidth:120},children:[x.jsx(Js,{children:"ソート基準"}),x.jsxs(pl,{value:g,label:"ソート基準",onChange:P=>y(P.target.value),children:[x.jsx(Un,{value:"count",children:"使用頻度"}),x.jsx(Un,{value:"name",children:"名前順"}),x.jsx(Un,{value:"lastUsed",children:"最終使用日"})]})]}),x.jsxs(fa,{size:"small",sx:{minWidth:100},children:[x.jsx(Js,{children:"順序"}),x.jsxs(pl,{value:v,label:"順序",onChange:P=>b(P.target.value),children:[x.jsx(Un,{value:"desc",children:"降順"}),x.jsx(Un,{value:"asc",children:"昇順"})]})]})]}),x.jsx(de,{className:"tag-stats-grid",children:R.map(P=>x.jsx(Fn,{"data-testid":`tag-stat-card-${P.tag}`,onClick:()=>n==null?void 0:n(P.tag),className:"tag-stat-card",children:x.jsxs(jn,{children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[x.jsx(se,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:P.tag}),x.jsx(Cn,{label:P.type,size:"small",color:P.type==="both"?"primary":P.type==="book"?"secondary":"info",variant:"outlined"})]}),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[x.jsxs(se,{variant:"body2",color:"text.secondary",children:["本: ",P.bookCount,"件"]}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["メモ: ",P.memoCount,"件"]})]}),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsxs(se,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",P.totalCount,"件"]}),x.jsx(de,{sx:{display:"flex",gap:1},children:x.jsx(Cn,{size:"small",label:"編集",onClick:F=>{F.stopPropagation(),C(P.tag),E(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${P.tag}`})})]}),P.lastUsed&&x.jsxs(se,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",P.lastUsed.toLocaleDateString("ja-JP")]})]})},P.tag))}),x.jsx(LZ,{open:A,tag:T,busy:o,onClose:()=>E(!1),onRename:async(P,F)=>{await c(P,F),await s(),E(!1)},onDelete:async P=>{await d(P),await s(),E(!1)},onMerge:async(P,F)=>{await p(P,F),await s(),E(!1)}}),x.jsx(BZ,{open:I,onClose:()=>O(!1),busy:o,onConfirm:async P=>{!P||P.length===0||(await f(P),await s(),O(!1))}}),x.jsx(VZ,{open:N,onClose:()=>M(!1),busy:o,onConfirm:async(P,F)=>{!P||P.length===0||!F||(await p(P.join(","),F),await s(),M(!1))}})]})}function jZ({value:n,onChange:e}){const[t,r]=V.useState((n==null?void 0:n.type)||"none"),[i,a]=V.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,o]=V.useState((n==null?void 0:n.month)||1),[c,d]=V.useState((n==null?void 0:n.quarter)||1),[f,p]=V.useState((n==null?void 0:n.startDate)||""),[g,y]=V.useState((n==null?void 0:n.endDate)||""),v=I=>{const O=I.target.value;r(O);let N={type:O};switch(O){case"year":N.year=i;break;case"month":N.year=i,N.month=s;break;case"quarter":N.year=i,N.quarter=c;break;case"custom":N.startDate=f,N.endDate=g;break}e==null||e(N)},b=I=>{const O=I.target.value;a(O),e==null||e({...n,year:O})},A=I=>{const O=I.target.value;o(O),e==null||e({...n,month:O})},E=I=>{const O=I.target.value;d(O),e==null||e({...n,quarter:O})},T=I=>{const O=I.target.value;p(O),e==null||e({...n,startDate:O})},C=I=>{const O=I.target.value;y(O),e==null||e({...n,endDate:O})};return x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),x.jsxs(da,{sx:{p:2},children:[x.jsxs(fa,{fullWidth:!0,margin:"normal",children:[x.jsx(Js,{children:"日時範囲"}),x.jsxs(pl,{value:t,onChange:v,label:"日時範囲","data-testid":"date-range-type-select",children:[x.jsx(Un,{value:"none",children:"指定なし"}),x.jsx(Un,{value:"year",children:"年別"}),x.jsx(Un,{value:"month",children:"年月別"}),x.jsx(Un,{value:"quarter",children:"四半期別"}),x.jsx(Un,{value:"custom",children:"カスタム期間"})]})]}),(t==="year"||t==="month"||t==="quarter")&&x.jsxs(fa,{fullWidth:!0,margin:"normal",children:[x.jsx(Js,{children:"年"}),x.jsx(pl,{value:i,onChange:b,label:"年","data-testid":"year-select",children:Array.from({length:10},(I,O)=>new Date().getFullYear()-O).map(I=>x.jsxs(Un,{value:I,children:[I,"年"]},I))})]}),t==="month"&&x.jsxs(fa,{fullWidth:!0,margin:"normal",children:[x.jsx(Js,{children:"月"}),x.jsx(pl,{value:s,onChange:A,label:"月","data-testid":"month-select",children:Array.from({length:12},(I,O)=>O+1).map(I=>x.jsxs(Un,{value:I,children:[I,"月"]},I))})]}),t==="quarter"&&x.jsxs(fa,{fullWidth:!0,margin:"normal",children:[x.jsx(Js,{children:"四半期"}),x.jsxs(pl,{value:c,onChange:E,label:"四半期","data-testid":"quarter-select",children:[x.jsx(Un,{value:1,children:"第1四半期（1-3月）"}),x.jsx(Un,{value:2,children:"第2四半期（4-6月）"}),x.jsx(Un,{value:3,children:"第3四半期（7-9月）"}),x.jsx(Un,{value:4,children:"第4四半期（10-12月）"})]})]}),t==="custom"&&x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[x.jsx(de,{"data-testid":"start-date-grid-item",children:x.jsx(Pt,{label:"開始日",type:"date",value:f,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),x.jsx(de,{"data-testid":"end-date-grid-item",children:x.jsx(Pt,{label:"終了日",type:"date",value:g,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),t!=="none"&&x.jsxs(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[t==="year"&&`${i}年に読了した本を検索します`,t==="month"&&`${i}年${s}月に読了した本を検索します`,t==="quarter"&&`${i}年第${c}四半期に読了した本を検索します`,t==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function UZ({selectedTags:n=[],onTagsChange:e,type:t="book"}){const{user:r}=hr(),{tagOptions:i,loading:a,fetchTagHistory:s}=vo(t,r),[o,c]=V.useState("");V.useEffect(()=>{r&&s()},[r,s]);const d=(g,y)=>{if(y&&!n.includes(y)){const v=[...n,y];e==null||e(v),c("")}},f=g=>{const y=n.filter(v=>v!==g);e==null||e(y)},p=(g,y)=>{c(y)};return x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),x.jsxs(da,{sx:{p:2},children:[x.jsx(uo,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,y)=>g.map((v,b)=>{const{key:A,...E}=y({index:b});return x.jsx(Cn,{label:v,...E,onDelete:()=>f(v),color:"primary",variant:"outlined","data-testid":`selected-tag-${v}`},A)}),renderInput:g=>x.jsx(Pt,{...g,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`選択されたタグ: ${n.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function HZ({searchConditions:n,onSearchConditionsChange:e,onSearch:t}){const[r,i]=V.useState(Kn.ALL),a=f=>{e==null||e({...n,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...n,status:p})},o=f=>{e==null||e({...n,dateRange:f})},c=f=>{e==null||e({...n,selectedTags:f})},d=()=>{t==null||t(n)};return x.jsxs(de,{children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"検索条件"}),x.jsxs(da,{sx:{p:2,mb:2},children:[x.jsx(Pt,{label:"テキスト検索（タイトル・著者・メモ内容・タグ）",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),x.jsxs(de,{sx:{mt:2},children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),x.jsx(de,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Object.values(Kn).map(f=>x.jsx(st,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:cd[f]},f))})]}),x.jsx(de,{sx:{mt:2},children:x.jsx(jZ,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:o})}),x.jsx(de,{sx:{mt:2},children:x.jsx(UZ,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),x.jsx(de,{sx:{display:"flex",justifyContent:"center"},children:x.jsx(st,{variant:"contained",onClick:d,"data-testid":"search-button",children:"検索実行"})})]})}function zZ({results:n=[],loading:e=!1,searchQuery:t="",onResultClick:r}){const{user:i}=hr();if(e)return x.jsx(de,{sx:{display:"flex",justifyContent:"center",p:4},children:x.jsx(Mw,{})});if(!n||n.length===0)return x.jsx(de,{sx:{p:3},children:x.jsx(ao,{severity:"info",children:t?`「${t}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const a=n.filter(d=>d.type==="book"),s=n.filter(d=>d.type==="memo"),o=d=>x.jsx(Fn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>r==null?void 0:r("memo",d.bookId,d.id),"data-testid":`memo-result-${d.id}`,children:x.jsxs(jn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[x.jsx("span",{children:"📝"}),x.jsxs("span",{children:[d.bookTitle||"メモ"," - ページ",d.page||"未設定"]})]})}),d.text&&x.jsx(de,{sx:{mb:2,flexGrow:1},children:x.jsx(se,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:d.text.length>120?`${d.text.substring(0,120)}...`:d.text})}),d.comment&&x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:["💭 ",d.comment.length>100?`${d.comment.substring(0,100)}...`:d.comment]})}),d.tags&&d.tags.length>0&&x.jsx(de,{sx:{mb:2},children:x.jsx(de,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>x.jsx(Cn,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),x.jsx(de,{sx:{mt:"auto"},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["作成日: ",d.createdAt?new Date(d.createdAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},d.id),c=d=>x.jsx(Fn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>r==null?void 0:r("book",d.id),"data-testid":`book-result-${d.id}`,children:x.jsxs(jn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[x.jsx("span",{children:"📚"}),x.jsx("span",{children:d.title})]})}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:d.author||"著者不明"}),x.jsx(Cn,{label:yo(d.status),size:"small",color:ls(d.status),sx:{fontSize:"0.75rem"}})]}),d.tags&&d.tags.length>0&&x.jsx(de,{sx:{mb:2},children:x.jsx(de,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>x.jsx(Cn,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),x.jsx(de,{sx:{mt:"auto"},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["更新日: ",d.updatedAt?new Date(d.updatedAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},d.id);return x.jsxs(de,{children:[x.jsxs(de,{sx:{mb:3},children:[x.jsxs(se,{variant:"h6",gutterBottom:!0,children:["検索結果 (",n.length,"件)"]}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["📚 書籍: ",a.length,"件, 📝 メモ: ",s.length,"件"]})]}),x.jsx(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:n.map(d=>x.jsx(de,{children:d.type==="book"?c(d):o(d)},`${d.type}-${d.id}`))})]})}function $Z(n={}){const{user:e}=hr(),[t,r]=V.useState([]),[i,a]=V.useState(!1),[s,o]=V.useState(null),{limit:c=50}=n,d=V.useCallback(A=>{if(!e)return[];const{text:E,status:T,dateRange:C,selectedTags:I}=A,O=[],N=[Sn("userId","==",e.uid)];if(T&&T!=="all"&&N.push(Sn("status","==",T)),C&&C.type!=="none"){const{startDate:B,endDate:L}=f(C);B&&N.push(Sn("updatedAt",">=",B)),L&&N.push(Sn("updatedAt","<=",L))}I&&I.length>0&&(console.log("タグフィルター適用:",I),console.log("タグフィルターの型:",typeof I,Array.isArray(I)),console.log("タグフィルターの内容:",JSON.stringify(I)),!Array.isArray(I)||I.some(B=>Array.isArray(B))?console.log("ネストした配列または無効なタグ形式を検出、クライアントサイドフィルタリングのみ使用"):N.push(Sn("tags","array-contains-any",I)));const M=Hn(Br(Ot,"books"),...N,u0("updatedAt","desc"),Cg(c));O.push({type:"book",query:M});const R=[Sn("userId","==",e.uid)],D=Hn(ml(Ot,"memos"),...R,Cg(c*3));return O.push({type:"memo",query:D}),O},[e,c]),f=V.useCallback(A=>{const E=new Date;let T=null,C=null;switch(A.type){case"year":A.year&&(T=new Date(A.year,0,1),C=new Date(A.year,11,31,23,59,59));break;case"month":A.year&&A.month&&(T=new Date(A.year,A.month-1,1),C=new Date(A.year,A.month,0,23,59,59));break;case"quarter":if(A.year&&A.quarter){const I=(A.quarter-1)*3;T=new Date(A.year,I,1),C=new Date(A.year,I+3,0,23,59,59)}break;case"custom":A.startDate&&(T=new Date(A.startDate)),A.endDate&&(C=new Date(A.endDate),C.setHours(23,59,59));break;case"recent":A.months&&(T=new Date(E.getFullYear(),E.getMonth()-A.months,E.getDate()),C=E);break}return{startDate:T,endDate:C}},[]),p=V.useCallback((A,E)=>{if(!E)return A;const T=E.toLowerCase();return A.filter(C=>C.type==="book"?C.title&&C.title.toLowerCase().includes(T)||C.author&&C.author.toLowerCase().includes(T)||C.tags&&C.tags.some(I=>I.toLowerCase().includes(T)):C.type==="memo"?C.text&&C.text.toLowerCase().includes(T)||C.comment&&C.comment.toLowerCase().includes(T)||C.tags&&C.tags.some(I=>I.toLowerCase().includes(T)):!1)},[]),g=V.useCallback((A,E)=>{if(!E||E.length===0)return A;const T=I=>{if(!Array.isArray(I))return[];const O=[],N=M=>{Array.isArray(M)?M.forEach(N):typeof M=="string"&&M.trim()&&O.push(M.toLowerCase().trim())};return I.forEach(N),O},C=T(E);return console.log("正規化された選択タグ:",C),A.filter(I=>{if(!I.tags||!Array.isArray(I.tags))return!1;const O=T(I.tags);console.log(`アイテム ${I.id} のタグ:`,O);const N=O.some(M=>C.includes(M));return console.log(`アイテム ${I.id} のマッチ結果:`,N),N})},[]),y=V.useCallback((A,E)=>{if(!E)return A;const T=E.toLowerCase();return A.filter(C=>C.text&&C.text.toLowerCase().includes(T)||C.comment&&C.comment.toLowerCase().includes(T))},[]),v=V.useCallback(async A=>{var E,T,C;if(!e){o("ユーザーが認証されていません");return}a(!0),o(null);try{console.log("検索条件:",A);const I=d(A);console.log("構築されたクエリ:",I);const O=[];for(const{type:M,query:R}of I){console.log(`${M}クエリ実行開始`);try{const D=await lr(R);if(console.log(`${M}クエリ実行成功, 結果数:`,D.size),M==="memo"){console.log("メモクエリの結果を処理中...");for(const B of D.docs){const L=B.data(),P=(E=B.ref.parent.parent)==null?void 0:E.id;console.log("メモデータ:",{id:B.id,bookId:P,tags:L.tags,userId:L.userId,text:((T=L.text)==null?void 0:T.substring(0,50))+"..."});let F="メモ";if(P)try{const q=await lr(Hn(Br(Ot,"books"),Sn("__name__","==",P),Sn("userId","==",e.uid)));q.empty||(F=q.docs[0].data().title||"メモ")}catch(q){console.warn("親の本の情報取得に失敗:",q)}O.push({id:B.id,type:M,bookId:P,bookTitle:F,...L})}console.log("メモ処理完了, 追加されたメモ数:",D.size)}else D.forEach(B=>{const L=B.data();O.push({id:B.id,type:M,...L})})}catch(D){if(console.error(`${M}クエリエラー:`,D),D.code==="failed-precondition"||D.message.includes("index")||D.message.includes("array-contains-any"))if(console.log("インデックスエラー検出、クライアントサイドフィルタリングにフォールバック"),M==="memo"){const B=Hn(ml(Ot,"memos"),Sn("userId","==",e.uid),Cg(c*2)),L=await lr(B);console.log("メモフォールバッククエリ実行成功, 結果数:",L.size);for(const P of L.docs){const F=P.data(),q=(C=P.ref.parent.parent)==null?void 0:C.id;let X="メモ";if(q)try{const G=await lr(Hn(Br(Ot,"books"),Sn("__name__","==",q),Sn("userId","==",e.uid)));G.empty||(X=G.docs[0].data().title||"メモ")}catch(G){console.warn("親の本の情報取得に失敗:",G)}O.push({id:P.id,type:M,bookId:q,bookTitle:X,...F})}}else{const B=Hn(Br(Ot,"books"),Sn("userId","==",e.uid),u0("updatedAt","desc"),Cg(c*2)),L=await lr(B);console.log("本フォールバッククエリ実行成功, 結果数:",L.size),L.forEach(P=>{const F=P.data();O.push({id:P.id,type:M,...F})})}else throw D}}console.log("全クエリ実行完了, 総結果数:",O.length),console.log("結果の内訳:",{books:O.filter(M=>M.type==="book").length,memos:O.filter(M=>M.type==="memo").length});let N=p(O,A.text);if(A.selectedTags&&A.selectedTags.length>0&&(console.log("クライアントサイドタグフィルタリング実行:",A.selectedTags),N=g(N,A.selectedTags),console.log("タグフィルタリング後の結果数:",N.length)),A.memoContent){const M=N.filter(D=>D.type==="book"),R=y(N.filter(D=>D.type==="memo"),A.memoContent);N=[...M,...R]}N.sort((M,R)=>{const D=A.sortBy||"updatedAt",B=A.sortOrder||"desc";let L=M[D],P=R[D];return(D==="updatedAt"||D==="createdAt")&&(L=L!=null&&L.toDate?L.toDate():new Date(L),P=P!=null&&P.toDate?P.toDate():new Date(P)),typeof L=="string"&&typeof P=="string"&&(L=L.toLowerCase(),P=P.toLowerCase()),B==="asc"?L>P?1:-1:L<P?1:-1}),r(N)}catch(I){console.error("検索エラー:",I),o("検索中にエラーが発生しました")}finally{a(!1)}},[e,d,p,g,y]),b=V.useCallback(()=>{r([]),o(null)},[]);return{results:t,loading:i,error:s,executeSearch:v,clearResults:b}}function GZ(){const{user:n}=hr(),e=b0(),[t,r]=V.useState(0),[i,a]=V.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f}=$Z(),[p,g]=V.useState(!1),[y,v]=V.useState(null),[b,A]=V.useState(null),E=(R,D)=>{r(D)},T=R=>{a(R)},C=R=>{console.log("検索実行:",R),d(R)},I=(R,D,B)=>{if(R==="book")e(`/book/${D}`);else if(R==="memo"){const L=(s||[]).find(P=>P.type==="memo"&&P.id===B);L?(v(L),A(D),g(!0)):e(`/book/${D}?memo=${B}`)}},O=()=>{g(!1),v(null),A(null)},N=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},M=R=>{console.log("タグがクリックされました:",R);const D={...i,selectedTags:[R],text:""};a(D),r(0),d(D)};return n?x.jsxs(de,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[x.jsx(Fm,{title:"検索・タグ",subtitle:"高度な検索とタグ管理"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:x.jsxs(fm,{value:t,onChange:E,centered:!0,"data-testid":"tag-search-tabs",children:[x.jsx(Ma,{label:"高度な検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),x.jsx(Ma,{label:"タグ管理",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),x.jsx(dD,{value:t,index:0,"data-testid":"search-tab-panel",children:x.jsx(WZ,{searchConditions:i,onSearchConditionsChange:T,onSearch:C,results:s,loading:o,error:c,onResultClick:I,onClearSearch:N})}),x.jsx(dD,{value:t,index:1,"data-testid":"tag-management-tab-panel",children:x.jsx(YZ,{onTagClick:M})}),x.jsx(P4,{open:p,memo:y,bookId:b,onClose:O,onUpdate:O,onDelete:O})]})]}):x.jsx(de,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:x.jsx(se,{variant:"h6",color:"error",children:"ログインが必要です"})})}function WZ({searchConditions:n,onSearchConditionsChange:e,onSearch:t,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return x.jsxs(de,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,children:"高度な検索"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"タイトル・著者・タグ・メモ内容で絞り込みできます。"}),x.jsx(HZ,{searchConditions:n,onSearchConditionsChange:e,onSearch:t}),a&&x.jsx(de,{sx:{mt:2},children:x.jsx(ao,{severity:"error",children:a})}),(r.length>0||i)&&x.jsx(de,{sx:{mt:4},children:x.jsx(zZ,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&x.jsx(de,{sx:{mt:2,textAlign:"center"},children:x.jsx(se,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:"検索結果をクリア"})})]})}function YZ({onTagClick:n}){return x.jsxs(de,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"統計を確認し、タグクリックで検索できます。"}),x.jsx(FZ,{onTagClick:n})]})}function Lg(n,e,t=1){if(!e)return;const r=n.get(e)||0;n.set(e,r+t)}function qZ(){const{user:n}=hr(),e=V.useContext(di),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!0),[a,s]=V.useState(null),[o,c]=V.useState([]),[d,f]=V.useState([]);V.useEffect(()=>{let C=!1;async function I(){if(!n){c([]),f([]),i(!1);return}i(!0),s(null);try{const O=Hn(Br(Ot,"books"),Sn("userId","==",n.uid)),M=(await lr(O)).docs.map(L=>({id:L.id,...L.data()})),R=Hn(ml(Ot,"memos"),Sn("userId","==",n.uid)),B=(await lr(R)).docs.map(L=>({id:L.id,...L.data()}));C||(c(M),f(B))}catch(O){console.error("Failed to load stats:",O),C||(s("統計情報の取得に失敗しました。"),t("統計情報の取得に失敗しました。"))}finally{C||i(!1)}}return I(),()=>{C=!0}},[n]);const p=V.useMemo(()=>{const C=o.length,I=o.filter(R=>(R.status||cr)===yt.TSUNDOKU).length,O=o.filter(R=>(R.status||cr)===yt.READING).length,N=o.filter(R=>(R.status||cr)===yt.RE_READING).length,M=o.filter(R=>(R.status||cr)===yt.FINISHED).length;return{totalBooks:C,tsundokuBooks:I,readingBooks:O,reReadingBooks:N,finishedBooks:M}},[o]),g=V.useMemo(()=>{const C=o.filter(M=>(M.status||cr)===yt.TSUNDOKU).length,I=o.filter(M=>(M.status||cr)===yt.READING).length,O=o.filter(M=>(M.status||cr)===yt.RE_READING).length,N=o.filter(M=>(M.status||cr)===yt.FINISHED).length;return{tsundoku:C,reading:I,reReading:O,finished:N}},[o]),y=V.useMemo(()=>{const C=new Map,I=new Map;for(const M of o){const R=Array.isArray(M.tags)?M.tags:[];for(const D of R)Lg(C,String(D).trim())}for(const M of d){const R=Array.isArray(M.tags)?M.tags:[];for(const D of R)Lg(I,String(D).trim())}const O=new Set([...C.keys(),...I.keys()]),N=[];for(const M of O){const R=C.get(M)||0,D=I.get(M)||0;N.push({tag:M,bookCount:R,memoCount:D,totalCount:R+D})}return N.sort((M,R)=>R.totalCount-M.totalCount||M.tag.localeCompare(R.tag)),N},[o,d]),v=V.useMemo(()=>{var N;const C=new Date,I=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(D,I.length),I.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of o){const R=M.status||"reading",D=M.finishedAt||M.updatedAt||M.createdAt;if(!D||R!=="finished")continue;const B=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((N=B==null?void 0:B.getTime)==null?void 0:N.call(B)))continue;const L=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}`;if(!O.has(L))continue;const P=O.get(L);I[P].count+=1}return I},[o]),b=V.useMemo(()=>{var N;const C=new Date,I=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(D,I.length),I.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of o){const R=M.createdAt||M.updatedAt||M.finishedAt;if(!R)continue;const D=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((N=D==null?void 0:D.getTime)==null?void 0:N.call(D)))continue;const B=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!O.has(B))continue;const L=O.get(B);I[L].count+=1}return I},[o]),A=V.useMemo(()=>{var N;const C=new Date,I=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(D,I.length),I.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of d){const R=M.createdAt||M.updatedAt;if(!R)continue;const D=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((N=D==null?void 0:D.getTime)==null?void 0:N.call(D)))continue;const B=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!O.has(B))continue;const L=O.get(B);I[L].count+=1}return I},[d]),E=V.useMemo(()=>{const C=new Map;for(const O of o){const N=(O.author||"").toString().trim();N&&Lg(C,N)}const I=[...C.entries()].map(([O,N])=>({author:O,total:N}));return I.sort((O,N)=>N.total-O.total||O.author.localeCompare(N.author)),I},[o]),T=V.useMemo(()=>{const C=new Map;for(const O of o){const N=(O.publisher||"").toString().trim();N&&Lg(C,N)}const I=[...C.entries()].map(([O,N])=>({publisher:O,total:N}));return I.sort((O,N)=>N.total-O.total||O.publisher.localeCompare(N.publisher)),I},[o]);return{loading:r,error:a,summary:p,tagStats:y,monthlyFinished:v,monthlyAddedBooks:b,monthlyMemos:A,topAuthors:E,topPublishers:T,statusDistribution:g}}const db="DEFAULT_X_AXIS_KEY",fb="DEFAULT_Y_AXIS_KEY",XZ={top:20,bottom:20,left:20,right:20},KZ=45,QZ=25,lP=20;class ZZ{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}),this.getSnapshot=()=>this.value,this.update=t=>{const r=t(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const Qm=({params:n,store:e})=>{V.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:n.skipAnimation})}))},[e,n.skipAnimation]);const t=V.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return $n(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=t():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[t,e]),{instance:{disableAnimation:t}}};Qm.params={skipAnimation:!0};Qm.getDefaultizedParams=({params:n})=>H({},n,{skipAnimation:n.skipAnimation??!1});Qm.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var z1=Symbol("NOT_FOUND");function JZ(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function eJ(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function tJ(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var fD=n=>Array.isArray(n)?n:[n];function nJ(n){const e=Array.isArray(n[0])?n[0]:n;return tJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function rJ(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}function iJ(n){let e;return{get(t){return e&&n(e.key,t)?e.value:z1},put(t,r){e={key:t,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function aJ(n,e){let t=[];function r(o){const c=t.findIndex(d=>e(o,d.key));if(c>-1){const d=t[c];return c>0&&(t.splice(c,1),t.unshift(d)),d.value}return z1}function i(o,c){r(o)===z1&&(t.unshift({key:o,value:c}),t.length>n&&t.pop())}function a(){return t}function s(){t=[]}return{get:r,put:i,getEntries:a,clear:s}}var sJ=(n,e)=>n===e;function oJ(n){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;const{length:i}=t;for(let a=0;a<i;a++)if(!n(t[a],r[a]))return!1;return!0}}function lJ(n,e){const t=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=sJ,maxSize:i=1,resultEqualityCheck:a}=t,s=oJ(r);let o=0;const c=i<=1?iJ(s):aJ(i,s);function d(){let f=c.get(arguments);if(f===z1){if(f=n.apply(null,arguments),o++,a){const g=c.getEntries().find(y=>a(y.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var cJ=class{constructor(n){this.value=n}deref(){return this.value}},uJ=typeof WeakRef<"u"?WeakRef:cJ,dJ=0,hD=1;function Bg(){return{s:dJ,v:void 0,o:null,p:null}}function cP(n,e={}){let t=Bg();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let g=0,y=c;g<y;g++){const v=arguments[g];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const A=b.get(v);A===void 0?(o=Bg(),b.set(v,o)):o=A}else{let b=o.p;b===null&&(o.p=b=new Map);const A=b.get(v);A===void 0?(o=Bg(),b.set(v,o)):o=A}}const d=o;let f;if(o.s===hD)f=o.v;else if(f=n.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new uJ(f):f}return d.s=hD,d.v=f,f}return s.clearCache=()=>{t=Bg(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function uP(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),JZ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...t,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=cP,argsMemoizeOptions:v=[]}=f,b=fD(g),A=fD(v),E=nJ(i),T=p(function(){return a++,d.apply(null,arguments)},...b),C=y(function(){s++;const O=rJ(E,arguments);return o=T.apply(null,O),o},...A);return Object.assign(C,{resultFunc:d,memoizedResultFunc:T,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var fJ=uP(cP),hJ=Object.assign((n,e=fJ)=>{eJ(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(a=>n[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>hJ});const pJ=uP({memoize:lJ,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),pD=new WeakMap,Ge=(...n)=>(t,...r)=>{const i=t.cacheKey;let a=pD.get(i);a||(a=new Map,pD.set(i,a));const s=a.get(n);if(s)return s(t,...r);const o=pJ(...n);return a.set(n,o),o(t,...r)},gJ=n=>n.animation,mJ=Ge([gJ],n=>n.skip||n.skipAnimationRequests>0);var Hx={exports:{}},zx={},$x={exports:{}},Gx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD;function yJ(){if(gD)return Gx;gD=1;var n=Ow();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,g){var y=g(),v=r({inst:{value:y,getSnapshot:g}}),b=v[0].inst,A=v[1];return a(function(){b.value=y,b.getSnapshot=g,c(b)&&A({inst:b})},[p,y,g]),i(function(){return c(b)&&A({inst:b}),p(function(){c(b)&&A({inst:b})})},[p]),s(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Gx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Gx}var mD;function vJ(){return mD||(mD=1,$x.exports=yJ()),$x.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD;function xJ(){if(yD)return zx;yD=1;var n=Ow(),e=vJ();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return zx.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var v=a(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=o(function(){function E(N){if(!T){if(T=!0,C=N,N=g(N),y!==void 0&&b.hasValue){var M=b.value;if(y(M,N))return I=M}return I=N}if(M=I,r(C,N))return M;var R=g(N);return y!==void 0&&y(M,R)?(C=N,M):(C=N,I=R)}var T=!1,C,I,O=p===void 0?null:p;return[function(){return E(f())},O===null?void 0:function(){return E(O())}]},[f,p,g,y]);var A=i(d,v[0],v[1]);return s(function(){b.hasValue=!0,b.value=A},[A]),c(A),A},zx}var vD;function wJ(){return vD||(vD=1,Hx.exports=xJ()),Hx.exports}var _J=wJ();const bJ=Object.is,dt=(n,e,t=[],r=bJ)=>{const i=a=>e(a,...t);return _J.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},eu=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.x},lf=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.y},AJ=Ge([lf],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="left"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),EJ=Ge([lf],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="right"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),SJ=Ge([eu],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="top"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),TJ=Ge([eu],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="bottom"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),CJ=n=>n.dimensions,dP=n=>n.dimensions.width,fP=n=>n.dimensions.height,IJ=n=>n.dimensions.margin.top,DJ=n=>n.dimensions.margin.right,RJ=n=>n.dimensions.margin.bottom,MJ=n=>n.dimensions.margin.left,So=Ge([dP,fP,IJ,DJ,RJ,MJ,SJ,EJ,TJ,AJ],(n,e,t,r,i,a,s,o,c,d)=>({width:n-a-r-d-o,left:a+d,right:r+o,height:e-t-i-s-c,top:t+s,bottom:i+c})),hP=Ge([CJ],n=>({width:n.propsWidth,height:n.propsHeight})),OJ=Ge([dP,fP],(n,e)=>({width:n,height:e}));function pP(n,e){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:e?H({},e,n):n}const PJ=10,Zm=({params:n,store:e,svgRef:t})=>{const r=n.width!==void 0&&n.height!==void 0,i=V.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=V.useState(0),[o,c]=V.useState(0),d=V.useCallback(()=>{const v=t==null?void 0:t.current;if(!v)return{};const A=mN(v).getComputedStyle(v),E=Math.floor(parseFloat(A.height))||0,T=Math.floor(parseFloat(A.width))||0;return e.update(C=>C.dimensions.width===T&&C.dimensions.height===E?C:H({},C,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??T,height:n.height??E,propsWidth:n.width,propsHeight:n.height}})),{height:E,width:T}},[e,t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);V.useEffect(()=>{e.update(v=>{const b=n.width??v.dimensions.width,A=n.height??v.dimensions.height;return H({},v,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:b,height:A,propsHeight:n.height,propsWidth:n.width}})})},[e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),V.useEffect(()=>{i.current.displayError=!0},[]),$n(()=>{if(r||!i.current.initialCompute||i.current.computeRun>PJ)return;const v=d();v.width!==a||v.height!==o?(i.current.computeRun+=1,v.width!==void 0&&s(v.width),v.height!==void 0&&c(v.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),$n(()=>{if(r)return()=>{};d();const v=t.current;if(typeof ResizeObserver>"u")return()=>{};let b;const A=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{d()})});return v&&A.observe(v),()=>{b&&cancelAnimationFrame(b),v&&A.unobserve(v)}},[d,r,t]);const f=dt(e,So),p=V.useCallback(v=>v>=f.left-1&&v<=f.left+f.width,[f.left,f.width]),g=V.useCallback(v=>v>=f.top-1&&v<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:V.useCallback((v,b,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(v)&&g(b),[p,g]),isXInside:p,isYInside:g}}};Zm.params={width:!0,height:!0,margin:!0};Zm.getDefaultizedParams=({params:n})=>H({},n,{margin:pP(n.margin,XZ)});Zm.getInitialState=({width:n,height:e,margin:t})=>({dimensions:{margin:t,width:n??0,height:e??0,propsWidth:n,propsHeight:e}});const hb=({params:n,store:e})=>($n(()=>{e.update(t=>H({},t,{experimentalFeatures:n.experimentalFeatures}))},[e,n.experimentalFeatures]),{});hb.params={experimentalFeatures:!0};hb.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const kJ=n=>n.experimentalFeatures,gP=Ge([kJ],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let xD=0;const NJ=()=>(xD+=1,`mui-chart-${xD}`),pb=({params:n,store:e})=>(V.useEffect(()=>{e.update(t=>n.id===void 0||n.id===t.id.providedChartId&&t.id.chartId!==void 0?t:H({},t,{id:H({},t.id,{chartId:n.id??NJ()})}))},[e,n.id]),{});pb.params={id:!0};pb.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const LJ=n=>n.id,BJ=Ge([LJ],n=>n.chartId),VJ=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],FJ=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],mP=n=>n==="dark"?FJ:VJ,yP=({series:n,colors:e,seriesConfig:t,dataset:r})=>{const i={};n.forEach((s,o)=>{var f;const c=t[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(t).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=t[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},Jm=({params:n,store:e,seriesConfig:t})=>{const{series:r,dataset:i,theme:a,colors:s}=n,o=V.useRef(!0);return V.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:yP({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:t,dataset:i})})}))},[s,i,r,a,t,e]),{}};Jm.params={dataset:!0,series:!0,colors:!0,theme:!0};const jJ=[];Jm.getDefaultizedParams=({params:n})=>{var e;return H({},n,{series:(e=n.series)!=null&&e.length?n.series:jJ,colors:n.colors??mP,theme:n.theme??"light"})};Jm.getInitialState=({series:n=[],colors:e,theme:t,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:yP({series:n,colors:typeof e=="function"?e(t):e,seriesConfig:a,dataset:r})}});const vP=n=>n.series,za=Ge([vP],n=>n.processedSeries),To=Ge([vP],n=>n.seriesConfig),UJ={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class xP{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in UJ)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,t,r,i){this.element=e,this.pointerManager=t,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const t=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>t[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const t=`${this.name}ChangeState`;this.element.removeEventListener(t,this.handleStateChange.bind(this))}}class HJ{constructor(){this.activeGestures=new Map}registerActiveGesture(e,t){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:t,element:e};r.add(i)}unregisterActiveGesture(e,t){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===t&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const t=this.activeGestures.get(e);return t?Array.from(t).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,t){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===t):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class zJ{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(t=>t==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(t))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class $J{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=t=>{const{type:r,pointerId:i}=t;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(t));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(i);return}this.notifyHandlers(t)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(t=>t(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class GJ{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new HJ,this.pointerManager=void 0,this.keyboardManager=new zJ,this.pointerManager=new $J({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(t=>{this.addGestureTemplate(t)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}setGestureState(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}registerElement(e,t,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,t,a)}),t}registerSingleGesture(e,t,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(t)||this.elementGestureMap.set(t,new Map);const a=this.elementGestureMap.get(t);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,t));const s=i.clone(r);return s.init(t,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,t){const r=this.elementGestureMap.get(t);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(t),r.size===0&&this.elementGestureMap.delete(t),!0)}unregisterAllGestures(e){const t=this.elementGestureMap.get(e);if(t){for(const[,r]of t)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class H0 extends xP{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,t,r,i){super.init(e,t,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,t){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(t===r.target||r.target===this.originalTarget||t===this.originalTarget||"contains"in t&&t.contains(r.target))||"getRootNode"in t&&t.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(t))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function WJ(n,e){const t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}function Wx(n){if(n.length<2)return 0;let e=0,t=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)e+=WJ({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),t+=1;return t>0?e/t:0}function wo(n){if(n.length===0)return{x:0,y:0};const e=n.reduce((t,r)=>(t.x+=r.clientX,t.y+=r.clientY,t),{x:0,y:0});return{x:e.x/n.length,y:e.y/n.length}}function cf(n,e){return`${n}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const Vg=1e-5,ol=1e-5,wD=.15;function YJ(n,e){const t=e.x-n.x,r=e.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=qJ(e,n),s=Math.abs(t)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?Vg:wD,c=a?Vg:s==="horizontal"?wD:Vg;return Math.abs(t)>o&&(i.horizontal=t>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function qJ(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.atan2(r,t)*180/Math.PI;return i>=-45+ol&&i<=-22.5+ol||i>=22.5+ol&&i<=45+ol||i>=135+ol&&i<=157.5+ol||i>=-157.5+ol&&i<=-135+ol}function XJ(n,e){if(!n.vertical&&!n.horizontal)return!1;if(e.length===0)return!0;const t=n.vertical===null||e.includes(n.vertical),r=n.horizontal===null||e.includes(n.horizontal);return t&&r}const _D=0,KJ=n=>n>_D?1:n<-_D?-1:0;class gb extends H0{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new gb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,t){if(t.type!=="pointermove"||t.pointerType!=="mouse"&&t.pointerType!=="pen")return;this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,t);return}const a={x:t.clientX,y:t.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,t)),this.emitMoveEvent(i,"ongoing",r,t)}emitMoveEvent(e,t,r,i){const a=this.state.lastPosition||wo(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=cf(this.name,t),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class mb extends H0{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new mb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancel(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=wo(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=wo(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=YJ(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&XJ(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,t,s),this.emitPanEvent(i,"ongoing",a,t,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,t,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;t.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,t,s),this.emitPanEvent(i,"end",a,t,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,t,r,i,a){var E,T;if(!this.state.startCentroid)return;const s=((E=this.state.lastDeltas)==null?void 0:E.x)??0,o=((T=this.state.lastDeltas)==null?void 0:T.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),y=this.gesturesRegistry.getActiveGestures(e),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:y,customData:this.customData},b=cf(this.name,t),A=new CustomEvent(b,{bubbles:!0,cancelable:!0,composed:!0,detail:v});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,t,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",t,r,this.state.lastCentroid),this.emitPanEvent(i,"end",t,r,this.state.lastCentroid)}this.resetState()}}class yb extends H0{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new yb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,t),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(t.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=Wx(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=t.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=Wx(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(t.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=t.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,t):(this.isActive=!0,this.emitPinchEvent(i,"start",a,t),this.emitPinchEvent(i,"ongoing",a,t))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)t.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,t),this.emitPinchEvent(i,"end",a,t),this.resetState();else if(s.length>=2){const o=Wx(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,t,r,i){const a=wo(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:KJ(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=cf(this.name,t),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class vb extends H0{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new vb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancelPress(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=wo(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=t.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,t,s),this.emitPressEvent(i,"ongoing",a,t,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=wo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,t)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,t,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,t);break}}emitPressEvent(e,t,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=cf(this.name,t),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,t,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",t,r,i),this.emitPressEvent(e??this.element,"end",t,r,i)}this.resetState()}}class xb extends H0{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new xb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,t);return}switch(t.type){case"pointerdown":this.isActive||(this.state.startCentroid=wo(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=wo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,t)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,t);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,t,s),this.resetState()):(this.state.lastTapTime=t.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,t);break}}fireTapEvent(e,t,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,t,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=cf(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class wb extends xP{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new wb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,t){const r=e.length>0?wo(e):{x:t.clientX,y:t.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:t.target,srcEvent:t,phase:"ongoing",pointers:e,timeStamp:t.timeStamp,deltaX:t.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:t.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:t.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:t.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const s=cf(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const Qu=n=>n.preventDefault(),_b=({svgRef:n})=>{V.useEffect(()=>{const t=n.current;if(!t)return;const r=new GJ({gestures:[new mb({name:"pan",threshold:0,maxPointers:1}),new gb({name:"move",preventIf:["pan","pinch"]}),new yb({name:"pinch",threshold:5,preventIf:["pan"]}),new wb({name:"turnWheel",sensitivity:.01,initialDelta:1}),new xb({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new vb({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],t),()=>{r.destroy()}},[n]);const e=V.useCallback((t,r,i)=>{const a=n.current;return a==null||a.addEventListener(t,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(t,r)}},[n]);return V.useEffect(()=>{const t=n.current;return t==null||t.addEventListener("gesturestart",Qu),t==null||t.addEventListener("gesturechange",Qu),t==null||t.addEventListener("gestureend",Qu),()=>{t==null||t.removeEventListener("gesturestart",Qu),t==null||t.removeEventListener("gesturechange",Qu),t==null||t.removeEventListener("gestureend",Qu)}},[n]),{instance:{addInteractionListener:e}}};_b.params={};_b.getInitialState=()=>({});const QJ=[pb,hb,Zm,Jm,_b,Qm],ZJ=["apiRef"],JJ=n=>{let{plugins:e}=n,t=Ne(n.props,ZJ);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(t).forEach(s=>{const o=t[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let bD=0;function eee(n,e,t){const r=_0(),i=V.useMemo(()=>[...QJ,...n],[n]),a=JJ({plugins:i,props:e});a.id=a.id??r;const o=V.useRef({}).current,c=nee(e.apiRef),d=V.useRef(null),f=V.useRef(null),p=V.useRef(null);if(p.current==null){bD+=1;const v={cacheKey:{id:bD}};i.forEach(b=>{b.getInitialState&&Object.assign(v,b.getInitialState(a,v,t))}),p.current=new ZZ(v)}const g=v=>{const b=v({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:t});b.publicAPI&&Object.assign(c.current,b.publicAPI),b.instance&&Object.assign(o,b.instance)};return i.forEach(g),{contextValue:V.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function tee(n){return n.current==null&&(n.current={}),n}function nee(n){const e=V.useRef({});return n?tee(n):e}const wP=V.createContext(null),_P=()=>{},bP=4,AP=20+2*bP,ree=40+2*bP,iee="hover",aee={top:5,bottom:5,left:5,right:5},Fg={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:AP,showTooltip:iee}},bb=(n,e,t)=>{var r;if(n)return n===!0?H({axisId:e,axisDirection:t},Fg):H({axisId:e,axisDirection:t},Fg,n,{slider:H({},Fg.slider,{size:((r=n.slider)==null?void 0:r.preview)??Fg.slider.preview?ree:AP},n.slider)})};function EP(n,e){const t={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:db,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=QZ+(a.label?lP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,height:a.height??f,zoom:bb(a.zoom,p,"x")});if(d!=="none"&&(t[d]+=g.height,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(v=>v[o])})})}function SP(n,e){const t={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:fb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=KZ+(a.label?lP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,width:a.width??f,zoom:bb(a.zoom,p,"y")});if(d!=="none"&&(t[d]+=g.width,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(v=>v[o])})})}function o1(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function see(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Ab(n){let e,t,r;n.length!==2?(e=o1,t=(o,c)=>o1(n(o),c),r=(o,c)=>n(o)-c):(e=n===o1||n===see?n:oee,t=n,r=n);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function oee(){return 0}function lee(n){return n===null?NaN:+n}const cee=Ab(o1),TP=cee.right;Ab(lee).center;class AD extends Map{constructor(e,t=fee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ED(this,e))}has(e){return super.has(ED(this,e))}set(e,t){return super.set(uee(this,e),t)}delete(e){return super.delete(dee(this,e))}}function ED({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function uee({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function dee({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function fee(n){return n!==null&&typeof n=="object"?n.valueOf():n}const hee=Math.sqrt(50),pee=Math.sqrt(10),gee=Math.sqrt(2);function $1(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=hee?10:a>=pee?5:a>=gee?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(n*d),c=Math.round(e*d),o/d<n&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(n/d),c=Math.round(e/d),o*d<n&&++o,c*d>e&&--c),c<o&&.5<=t&&t<2?$1(n,e,t*2):[o,c,d]}function hw(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?$1(e,n,t):$1(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function pw(n,e,t){return e=+e,n=+n,t=+t,$1(n,e,t)[2]}function gw(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?pw(e,n,t):pw(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function mee(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Co(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function yee(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const SD=Symbol("implicit");function G1(){var n=new AD,e=[],t=[],r=SD;function i(a){let s=n.get(a);if(s===void 0){if(r!==SD)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new AD;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return G1(e,t).unknown(r)},Co.apply(i,arguments),i}function ey(){var n=G1().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete n.unknown;function p(){var g=e().length,y=i<r,v=y?i:r,b=y?r:i;a=(b-v)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),v+=(b-v-a*(g-c))*f,s=a*(1-c),o&&(v=Math.round(v),s=Math.round(s));var A=mee(g).map(function(E){return v+a*E});return t(y?A.reverse():A)}return n.domain=function(g){return arguments.length?(e(g),p()):e()},n.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},n.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(g){return arguments.length?(o=!!g,p()):o},n.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},n.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},n.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},n.copy=function(){return ey(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},Co.apply(p(),arguments)}function CP(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return CP(e())},n}function IP(){return CP(ey.apply(null,arguments).paddingInner(1))}function Eb(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function DP(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function z0(){}var g0=.7,W1=1/g0,Dd="\\s*([+-]?\\d+)\\s*",m0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vee=/^#([0-9a-f]{3,8})$/,xee=new RegExp(`^rgb\\(${Dd},${Dd},${Dd}\\)$`),wee=new RegExp(`^rgb\\(${_s},${_s},${_s}\\)$`),_ee=new RegExp(`^rgba\\(${Dd},${Dd},${Dd},${m0}\\)$`),bee=new RegExp(`^rgba\\(${_s},${_s},${_s},${m0}\\)$`),Aee=new RegExp(`^hsl\\(${m0},${_s},${_s}\\)$`),Eee=new RegExp(`^hsla\\(${m0},${_s},${_s},${m0}\\)$`),TD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eb(z0,y0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:CD,formatHex:CD,formatHex8:See,formatHsl:Tee,formatRgb:ID,toString:ID});function CD(){return this.rgb().formatHex()}function See(){return this.rgb().formatHex8()}function Tee(){return RP(this).formatHsl()}function ID(){return this.rgb().formatRgb()}function y0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=vee.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?DD(e):t===3?new Oi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?jg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?jg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xee.exec(n))?new Oi(e[1],e[2],e[3],1):(e=wee.exec(n))?new Oi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_ee.exec(n))?jg(e[1],e[2],e[3],e[4]):(e=bee.exec(n))?jg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Aee.exec(n))?OD(e[1],e[2]/100,e[3]/100,1):(e=Eee.exec(n))?OD(e[1],e[2]/100,e[3]/100,e[4]):TD.hasOwnProperty(n)?DD(TD[n]):n==="transparent"?new Oi(NaN,NaN,NaN,0):null}function DD(n){return new Oi(n>>16&255,n>>8&255,n&255,1)}function jg(n,e,t,r){return r<=0&&(n=e=t=NaN),new Oi(n,e,t,r)}function Cee(n){return n instanceof z0||(n=y0(n)),n?(n=n.rgb(),new Oi(n.r,n.g,n.b,n.opacity)):new Oi}function mw(n,e,t,r){return arguments.length===1?Cee(n):new Oi(n,e,t,r??1)}function Oi(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Eb(Oi,mw,DP(z0,{brighter(n){return n=n==null?W1:Math.pow(W1,n),new Oi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?g0:Math.pow(g0,n),new Oi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Oi(Bc(this.r),Bc(this.g),Bc(this.b),Y1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RD,formatHex:RD,formatHex8:Iee,formatRgb:MD,toString:MD}));function RD(){return`#${Rc(this.r)}${Rc(this.g)}${Rc(this.b)}`}function Iee(){return`#${Rc(this.r)}${Rc(this.g)}${Rc(this.b)}${Rc((isNaN(this.opacity)?1:this.opacity)*255)}`}function MD(){const n=Y1(this.opacity);return`${n===1?"rgb(":"rgba("}${Bc(this.r)}, ${Bc(this.g)}, ${Bc(this.b)}${n===1?")":`, ${n})`}`}function Y1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Bc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Rc(n){return n=Bc(n),(n<16?"0":"")+n.toString(16)}function OD(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Na(n,e,t,r)}function RP(n){if(n instanceof Na)return new Na(n.h,n.s,n.l,n.opacity);if(n instanceof z0||(n=y0(n)),!n)return new Na;if(n instanceof Na)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Na(s,o,c,n.opacity)}function Dee(n,e,t,r){return arguments.length===1?RP(n):new Na(n,e,t,r??1)}function Na(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Eb(Na,Dee,DP(z0,{brighter(n){return n=n==null?W1:Math.pow(W1,n),new Na(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?g0:Math.pow(g0,n),new Na(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Oi(Yx(n>=240?n-240:n+120,i,r),Yx(n,i,r),Yx(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Na(PD(this.h),Ug(this.s),Ug(this.l),Y1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Y1(this.opacity);return`${n===1?"hsl(":"hsla("}${PD(this.h)}, ${Ug(this.s)*100}%, ${Ug(this.l)*100}%${n===1?")":`, ${n})`}`}}));function PD(n){return n=(n||0)%360,n<0?n+360:n}function Ug(n){return Math.max(0,Math.min(1,n||0))}function Yx(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Sb=n=>()=>n;function Ree(n,e){return function(t){return n+t*e}}function Mee(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Oee(n){return(n=+n)==1?MP:function(e,t){return t-e?Mee(e,t,n):Sb(isNaN(e)?t:e)}}function MP(n,e){var t=e-n;return t?Ree(n,t):Sb(isNaN(n)?e:n)}const kD=function n(e){var t=Oee(e);function r(i,a){var s=t((i=mw(i)).r,(a=mw(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),d=MP(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=n,r}(1);function Pee(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function kee(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Nee(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=ty(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Tb(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Kt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Lee(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=ty(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var yw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qx=new RegExp(yw.source,"g");function Bee(n){return function(){return n}}function Vee(n){return function(e){return n(e)+""}}function Fee(n,e){var t=yw.lastIndex=qx.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=yw.exec(n))&&(i=qx.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Kt(r,i)})),t=qx.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Vee(c[0].x):Bee(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function ty(n,e){var t=typeof e,r;return e==null||t==="boolean"?Sb(e):(t==="number"?Kt:t==="string"?(r=y0(e))?(e=r,kD):Fee:e instanceof y0?kD:e instanceof Date?Tb:kee(e)?Pee:Array.isArray(e)?Nee:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lee:Kt)(n,e)}function OP(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function jee(n){return function(){return n}}function Uee(n){return+n}var ND=[0,1];function pa(n){return n}function vw(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:jee(isNaN(e)?NaN:.5)}function Hee(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function zee(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=vw(i,r),a=t(s,a)):(r=vw(r,i),a=t(a,s)),function(o){return a(r(o))}}function $ee(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=vw(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=TP(n,o,1,r)-1;return a[c](i[c](o))}}function $0(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ny(){var n=ND,e=ND,t=ty,r,i,a,s=pa,o,c,d;function f(){var g=Math.min(n.length,e.length);return s!==pa&&(s=Hee(n[0],n[g-1])),o=g>2?$ee:zee,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(n.map(r),e,t)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,n.map(r),Kt)))(g)))},p.domain=function(g){return arguments.length?(n=Array.from(g,Uee),f()):n.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),t=OP,f()},p.clamp=function(g){return arguments.length?(s=g?!0:pa,f()):s!==pa},p.interpolate=function(g){return arguments.length?(t=g,f()):t},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return r=g,i=y,f()}}function PP(){return ny()(pa,pa)}function Gee(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function q1(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function $d(n){return n=q1(Math.abs(n)),n?n[1]:NaN}function Wee(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function Yee(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var qee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v0(n){if(!(e=qee.exec(n)))throw new Error("invalid format: "+n);var e;return new Cb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}v0.prototype=Cb.prototype;function Cb(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Cb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xee(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var kP;function Kee(n,e){var t=q1(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(kP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+q1(n,Math.max(0,e+a-1))[0]}function LD(n,e){var t=q1(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const BD={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Gee,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>LD(n*100,e),r:LD,s:Kee,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function VD(n){return n}var FD=Array.prototype.map,jD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qee(n){var e=n.grouping===void 0||n.thousands===void 0?VD:Wee(FD.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?VD:Yee(FD.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function d(p){p=v0(p);var g=p.fill,y=p.align,v=p.sign,b=p.symbol,A=p.zero,E=p.width,T=p.comma,C=p.precision,I=p.trim,O=p.type;O==="n"?(T=!0,O="g"):BD[O]||(C===void 0&&(C=12),I=!0,O="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var N=b==="$"?t:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",M=b==="$"?r:/[%p]/.test(O)?s:"",R=BD[O],D=/[defgprs%]/.test(O);C=C===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(L){var P=N,F=M,q,X,G;if(O==="c")F=R(L)+F,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:R(Math.abs(L),C),I&&(L=Xee(L)),Y&&+L==0&&v!=="+"&&(Y=!1),P=(Y?v==="("?v:o:v==="-"||v==="("?"":v)+P,F=(O==="s"?jD[8+kP/3]:"")+F+(Y&&v==="("?")":""),D){for(q=-1,X=L.length;++q<X;)if(G=L.charCodeAt(q),48>G||G>57){F=(G===46?i+L.slice(q+1):L.slice(q))+F,L=L.slice(0,q);break}}}T&&!A&&(L=e(L,1/0));var Q=P.length+L.length+F.length,Z=Q<E?new Array(E-Q+1).join(g):"";switch(T&&A&&(L=e(Z+L,Z.length?E-F.length:1/0),Z=""),y){case"<":L=P+L+F+Z;break;case"=":L=P+Z+L+F;break;case"^":L=Z.slice(0,Q=Z.length>>1)+P+L+F+Z.slice(Q);break;default:L=Z+P+L+F;break}return a(L)}return B.toString=function(){return p+""},B}function f(p,g){var y=d((p=v0(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor($d(g)/3)))*3,b=Math.pow(10,-v),A=jD[8+v/3];return function(E){return y(b*E)+A}}return{format:d,formatPrefix:f}}var Hg,Ib,NP;Zee({thousands:",",grouping:[3],currency:["$",""]});function Zee(n){return Hg=Qee(n),Ib=Hg.format,NP=Hg.formatPrefix,Hg}function Jee(n){return Math.max(0,-$d(Math.abs(n)))}function ete(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($d(e)/3)))*3-$d(Math.abs(n)))}function tte(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,$d(e)-$d(n))+1}function nte(n,e,t,r){var i=gw(n,e,t),a;switch(r=v0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=ete(i,s))&&(r.precision=a),NP(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=tte(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Jee(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ib(r)}function ry(n){var e=n.domain;return n.ticks=function(t){var r=e();return hw(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return nte(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=pw(s,o,t),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return n},n}function Db(){var n=PP();return n.copy=function(){return $0(n,Db())},Co.apply(n,arguments),ry(n)}function LP(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function UD(n){return Math.log(n)}function HD(n){return Math.exp(n)}function rte(n){return-Math.log(-n)}function ite(n){return-Math.exp(-n)}function ate(n){return isFinite(n)?+("1e"+n):n<0?0:n}function ste(n){return n===10?ate:n===Math.E?Math.exp:e=>Math.pow(n,e)}function ote(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function zD(n){return(e,t)=>-n(-e,t)}function lte(n){const e=n(UD,HD),t=e.domain;let r=10,i,a;function s(){return i=ote(r),a=ste(r),t()[0]<0?(i=zD(i),a=zD(a),n(rte,ite)):n(UD,HD),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),y=i(f),v,b;const A=o==null?10:+o;let E=[];if(!(r%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(v=1;v<r;++v)if(b=g<0?v/a(-g):v*a(g),!(b<d)){if(b>f)break;E.push(b)}}else for(;g<=y;++g)for(v=r-1;v>=1;--v)if(b=g>0?v/a(-g):v*a(g),!(b<d)){if(b>f)break;E.push(b)}E.length*2<A&&(E=hw(d,f,A))}else E=hw(g,y,Math.min(y-g,A)).map(a);return p?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=v0(c)).precision==null&&(c.trim=!0),c=Ib(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>t(LP(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function X1(){const n=lte(ny()).domain([1,10]);return n.copy=()=>$0(n,X1()).base(n.base()),Co.apply(n,arguments),n}function $D(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function GD(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function cte(n){var e=1,t=n($D(e),GD(e));return t.constant=function(r){return arguments.length?n($D(e=+r),GD(e)):e},ry(t)}function BP(){var n=cte(ny());return n.copy=function(){return $0(n,BP()).constant(n.constant())},Co.apply(n,arguments)}function WD(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function ute(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function dte(n){return n<0?-n*n:n*n}function fte(n){var e=n(pa,pa),t=1;function r(){return t===1?n(pa,pa):t===.5?n(ute,dte):n(WD(t),WD(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},ry(e)}function Rb(){var n=fte(ny());return n.copy=function(){return $0(n,Rb()).exponent(n.exponent())},Co.apply(n,arguments),n}function hte(){return Rb.apply(null,arguments).exponent(.5)}function VP(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[TP(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return VP().domain(n).range(e).unknown(t)},Co.apply(i,arguments)}const Xx=new Date,Kx=new Date;function Cr(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),n(a);while(d<a&&a<s);return c},i.filter=a=>Cr(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(Xx.setTime(+a),Kx.setTime(+s),n(Xx),n(Kx),Math.floor(t(Xx,Kx))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const K1=Cr(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);K1.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Cr(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):K1);K1.range;const no=1e3,ga=no*60,ro=ga*60,_o=ro*24,Mb=_o*7,YD=_o*30,Qx=_o*365,Mc=Cr(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*no)},(n,e)=>(e-n)/no,n=>n.getUTCSeconds());Mc.range;const Ob=Cr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*no)},(n,e)=>{n.setTime(+n+e*ga)},(n,e)=>(e-n)/ga,n=>n.getMinutes());Ob.range;const Pb=Cr(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ga)},(n,e)=>(e-n)/ga,n=>n.getUTCMinutes());Pb.range;const kb=Cr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*no-n.getMinutes()*ga)},(n,e)=>{n.setTime(+n+e*ro)},(n,e)=>(e-n)/ro,n=>n.getHours());kb.range;const Nb=Cr(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*ro)},(n,e)=>(e-n)/ro,n=>n.getUTCHours());Nb.range;const G0=Cr(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ga)/_o,n=>n.getDate()-1);G0.range;const iy=Cr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/_o,n=>n.getUTCDate()-1);iy.range;const FP=Cr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/_o,n=>Math.floor(n/_o));FP.range;function tu(n){return Cr(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ga)/Mb)}const ay=tu(0),Q1=tu(1),pte=tu(2),gte=tu(3),Gd=tu(4),mte=tu(5),yte=tu(6);ay.range;Q1.range;pte.range;gte.range;Gd.range;mte.range;yte.range;function nu(n){return Cr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/Mb)}const sy=nu(0),Z1=nu(1),vte=nu(2),xte=nu(3),Wd=nu(4),wte=nu(5),_te=nu(6);sy.range;Z1.range;vte.range;xte.range;Wd.range;wte.range;_te.range;const Lb=Cr(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Lb.range;const Bb=Cr(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Bb.range;const bo=Cr(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());bo.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Cr(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});bo.range;const Ao=Cr(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ao.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Cr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ao.range;function jP(n,e,t,r,i,a){const s=[[Mc,1,no],[Mc,5,5*no],[Mc,15,15*no],[Mc,30,30*no],[a,1,ga],[a,5,5*ga],[a,15,15*ga],[a,30,30*ga],[i,1,ro],[i,3,3*ro],[i,6,6*ro],[i,12,12*ro],[r,1,_o],[r,2,2*_o],[t,1,Mb],[e,1,YD],[e,3,3*YD],[n,1,Qx]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),v=y?y.range(d,+f+1):[];return g?v.reverse():v}function c(d,f,p){const g=Math.abs(f-d)/p,y=Ab(([,,A])=>A).right(s,g);if(y===s.length)return n.every(gw(d/Qx,f/Qx,p));if(y===0)return K1.every(Math.max(gw(d,f,p),1));const[v,b]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return v.every(b)}return[o,c]}const[bte,Ate]=jP(Ao,Bb,sy,FP,Nb,Pb),[Ete,Ste]=jP(bo,Lb,ay,G0,kb,Ob);function Zx(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Jx(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ah(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Tte(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,d=Eh(i),f=Sh(i),p=Eh(a),g=Sh(a),y=Eh(s),v=Sh(s),b=Eh(o),A=Sh(o),E=Eh(c),T=Sh(c),C={a:Y,A:Q,b:Z,B:fe,c:null,d:JD,e:JD,f:Xte,g:ane,G:one,H:Wte,I:Yte,j:qte,L:UP,m:Kte,M:Qte,p:ge,q:we,Q:n3,s:r3,S:Zte,u:Jte,U:ene,V:tne,w:nne,W:rne,x:null,X:null,y:ine,Y:sne,Z:lne,"%":t3},I={a:Ae,A:Pe,b:Re,B:He,c:null,d:e3,e:e3,f:fne,g:bne,G:Ene,H:cne,I:une,j:dne,L:zP,m:hne,M:pne,p:Ue,q:Qe,Q:n3,s:r3,S:gne,u:mne,U:yne,V:vne,w:xne,W:wne,x:null,X:null,y:_ne,Y:Ane,Z:Sne,"%":t3},O={a:B,A:L,b:P,B:F,c:q,d:QD,e:QD,f:Hte,g:KD,G:XD,H:ZD,I:ZD,j:Vte,L:Ute,m:Bte,M:Fte,p:D,q:Lte,Q:$te,s:Gte,S:jte,u:Mte,U:Ote,V:Pte,w:Rte,W:kte,x:X,X:G,y:KD,Y:XD,Z:Nte,"%":zte};C.x=N(t,C),C.X=N(r,C),C.c=N(e,C),I.x=N(t,I),I.X=N(r,I),I.c=N(e,I);function N(ae,me){return function(he){var te=[],Le=-1,ve=0,je=ae.length,De,Ce,We;for(he instanceof Date||(he=new Date(+he));++Le<je;)ae.charCodeAt(Le)===37&&(te.push(ae.slice(ve,Le)),(Ce=qD[De=ae.charAt(++Le)])!=null?De=ae.charAt(++Le):Ce=De==="e"?" ":"0",(We=me[De])&&(De=We(he,Ce)),te.push(De),ve=Le+1);return te.push(ae.slice(ve,Le)),te.join("")}}function M(ae,me){return function(he){var te=Ah(1900,void 0,1),Le=R(te,ae,he+="",0),ve,je;if(Le!=he.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(me&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ve=Jx(Ah(te.y,0,1)),je=ve.getUTCDay(),ve=je>4||je===0?Z1.ceil(ve):Z1(ve),ve=iy.offset(ve,(te.V-1)*7),te.y=ve.getUTCFullYear(),te.m=ve.getUTCMonth(),te.d=ve.getUTCDate()+(te.w+6)%7):(ve=Zx(Ah(te.y,0,1)),je=ve.getDay(),ve=je>4||je===0?Q1.ceil(ve):Q1(ve),ve=G0.offset(ve,(te.V-1)*7),te.y=ve.getFullYear(),te.m=ve.getMonth(),te.d=ve.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),je="Z"in te?Jx(Ah(te.y,0,1)).getUTCDay():Zx(Ah(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(je+5)%7:te.w+te.U*7-(je+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Jx(te)):Zx(te)}}function R(ae,me,he,te){for(var Le=0,ve=me.length,je=he.length,De,Ce;Le<ve;){if(te>=je)return-1;if(De=me.charCodeAt(Le++),De===37){if(De=me.charAt(Le++),Ce=O[De in qD?me.charAt(Le++):De],!Ce||(te=Ce(ae,he,te))<0)return-1}else if(De!=he.charCodeAt(te++))return-1}return te}function D(ae,me,he){var te=d.exec(me.slice(he));return te?(ae.p=f.get(te[0].toLowerCase()),he+te[0].length):-1}function B(ae,me,he){var te=y.exec(me.slice(he));return te?(ae.w=v.get(te[0].toLowerCase()),he+te[0].length):-1}function L(ae,me,he){var te=p.exec(me.slice(he));return te?(ae.w=g.get(te[0].toLowerCase()),he+te[0].length):-1}function P(ae,me,he){var te=E.exec(me.slice(he));return te?(ae.m=T.get(te[0].toLowerCase()),he+te[0].length):-1}function F(ae,me,he){var te=b.exec(me.slice(he));return te?(ae.m=A.get(te[0].toLowerCase()),he+te[0].length):-1}function q(ae,me,he){return R(ae,e,me,he)}function X(ae,me,he){return R(ae,t,me,he)}function G(ae,me,he){return R(ae,r,me,he)}function Y(ae){return s[ae.getDay()]}function Q(ae){return a[ae.getDay()]}function Z(ae){return c[ae.getMonth()]}function fe(ae){return o[ae.getMonth()]}function ge(ae){return i[+(ae.getHours()>=12)]}function we(ae){return 1+~~(ae.getMonth()/3)}function Ae(ae){return s[ae.getUTCDay()]}function Pe(ae){return a[ae.getUTCDay()]}function Re(ae){return c[ae.getUTCMonth()]}function He(ae){return o[ae.getUTCMonth()]}function Ue(ae){return i[+(ae.getUTCHours()>=12)]}function Qe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var me=N(ae+="",C);return me.toString=function(){return ae},me},parse:function(ae){var me=M(ae+="",!1);return me.toString=function(){return ae},me},utcFormat:function(ae){var me=N(ae+="",I);return me.toString=function(){return ae},me},utcParse:function(ae){var me=M(ae+="",!0);return me.toString=function(){return ae},me}}}var qD={"-":"",_:" ",0:"0"},Fr=/^\s*\d+/,Cte=/^%/,Ite=/[\\^$*+?|[\]().{}]/g;function $t(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function Dte(n){return n.replace(Ite,"\\$&")}function Eh(n){return new RegExp("^(?:"+n.map(Dte).join("|")+")","i")}function Sh(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function Rte(n,e,t){var r=Fr.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function Mte(n,e,t){var r=Fr.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function Ote(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function Pte(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function kte(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function XD(n,e,t){var r=Fr.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function KD(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function Nte(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Lte(n,e,t){var r=Fr.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function Bte(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function QD(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function Vte(n,e,t){var r=Fr.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function ZD(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function Fte(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function jte(n,e,t){var r=Fr.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function Ute(n,e,t){var r=Fr.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function Hte(n,e,t){var r=Fr.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function zte(n,e,t){var r=Cte.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function $te(n,e,t){var r=Fr.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function Gte(n,e,t){var r=Fr.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function JD(n,e){return $t(n.getDate(),e,2)}function Wte(n,e){return $t(n.getHours(),e,2)}function Yte(n,e){return $t(n.getHours()%12||12,e,2)}function qte(n,e){return $t(1+G0.count(bo(n),n),e,3)}function UP(n,e){return $t(n.getMilliseconds(),e,3)}function Xte(n,e){return UP(n,e)+"000"}function Kte(n,e){return $t(n.getMonth()+1,e,2)}function Qte(n,e){return $t(n.getMinutes(),e,2)}function Zte(n,e){return $t(n.getSeconds(),e,2)}function Jte(n){var e=n.getDay();return e===0?7:e}function ene(n,e){return $t(ay.count(bo(n)-1,n),e,2)}function HP(n){var e=n.getDay();return e>=4||e===0?Gd(n):Gd.ceil(n)}function tne(n,e){return n=HP(n),$t(Gd.count(bo(n),n)+(bo(n).getDay()===4),e,2)}function nne(n){return n.getDay()}function rne(n,e){return $t(Q1.count(bo(n)-1,n),e,2)}function ine(n,e){return $t(n.getFullYear()%100,e,2)}function ane(n,e){return n=HP(n),$t(n.getFullYear()%100,e,2)}function sne(n,e){return $t(n.getFullYear()%1e4,e,4)}function one(n,e){var t=n.getDay();return n=t>=4||t===0?Gd(n):Gd.ceil(n),$t(n.getFullYear()%1e4,e,4)}function lne(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$t(e/60|0,"0",2)+$t(e%60,"0",2)}function e3(n,e){return $t(n.getUTCDate(),e,2)}function cne(n,e){return $t(n.getUTCHours(),e,2)}function une(n,e){return $t(n.getUTCHours()%12||12,e,2)}function dne(n,e){return $t(1+iy.count(Ao(n),n),e,3)}function zP(n,e){return $t(n.getUTCMilliseconds(),e,3)}function fne(n,e){return zP(n,e)+"000"}function hne(n,e){return $t(n.getUTCMonth()+1,e,2)}function pne(n,e){return $t(n.getUTCMinutes(),e,2)}function gne(n,e){return $t(n.getUTCSeconds(),e,2)}function mne(n){var e=n.getUTCDay();return e===0?7:e}function yne(n,e){return $t(sy.count(Ao(n)-1,n),e,2)}function $P(n){var e=n.getUTCDay();return e>=4||e===0?Wd(n):Wd.ceil(n)}function vne(n,e){return n=$P(n),$t(Wd.count(Ao(n),n)+(Ao(n).getUTCDay()===4),e,2)}function xne(n){return n.getUTCDay()}function wne(n,e){return $t(Z1.count(Ao(n)-1,n),e,2)}function _ne(n,e){return $t(n.getUTCFullYear()%100,e,2)}function bne(n,e){return n=$P(n),$t(n.getUTCFullYear()%100,e,2)}function Ane(n,e){return $t(n.getUTCFullYear()%1e4,e,4)}function Ene(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Wd(n):Wd.ceil(n),$t(n.getUTCFullYear()%1e4,e,4)}function Sne(){return"+0000"}function t3(){return"%"}function n3(n){return+n}function r3(n){return Math.floor(+n/1e3)}var Zu,GP,WP;Tne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tne(n){return Zu=Tte(n),GP=Zu.format,Zu.parse,WP=Zu.utcFormat,Zu.utcParse,Zu}function Cne(n){return new Date(n)}function Ine(n){return n instanceof Date?+n:+new Date(+n)}function Vb(n,e,t,r,i,a,s,o,c,d){var f=PP(),p=f.invert,g=f.domain,y=d(".%L"),v=d(":%S"),b=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),T=d("%b %d"),C=d("%B"),I=d("%Y");function O(N){return(c(N)<N?y:o(N)<N?v:s(N)<N?b:a(N)<N?A:r(N)<N?i(N)<N?E:T:t(N)<N?C:I)(N)}return f.invert=function(N){return new Date(p(N))},f.domain=function(N){return arguments.length?g(Array.from(N,Ine)):g().map(Cne)},f.ticks=function(N){var M=g();return n(M[0],M[M.length-1],N??10)},f.tickFormat=function(N,M){return M==null?O:d(M)},f.nice=function(N){var M=g();return(!N||typeof N.range!="function")&&(N=e(M[0],M[M.length-1],N??10)),N?g(LP(M,N)):f},f.copy=function(){return $0(f,Vb(n,e,t,r,i,a,s,o,c,d))},f}function YP(){return Co.apply(Vb(Ete,Ste,bo,Lb,ay,G0,kb,Ob,Mc,GP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dne(){return Co.apply(Vb(bte,Ate,Ao,Bb,sy,iy,Nb,Pb,Mc,WP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rne(){var n=0,e=1,t,r,i,a,s=pa,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-t)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var y,v;return arguments.length?([y,v]=g,s=p(y,v),d):[s(0),s(1)]}}return d.range=f(ty),d.rangeRound=f(OP),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,t=p(n),r=p(e),i=t===r?0:1/(r-t),d}}function Mne(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function qP(){var n=ry(Rne()(pa));return n.copy=function(){return Mne(n,qP())},yee.apply(n,arguments)}function One(n,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function J1(n){return n.scaleType==="band"}function Fb(n){return n.scaleType==="point"}function Pne(n){return n.scaleType==="symlog"}function kne(n){return n.type==="piecewise"?VP(n.thresholds,n.colors):qP([n.min??0,n.max??100],n.color)}function Yd(n){return n.values?G1(n.values,n.colors).unknown(n.unknownColor??null):G1(n.colors.map((e,t)=>t),n.colors).unknown(n.unknownColor??null)}function Vc(n){return n.type==="ordinal"?Yd(n):kne(n)}function XP(n){const{tickMaxStep:e,tickMinStep:t,tickNumber:r,range:i,domain:a}=n,s=t===void 0?999:Math.floor(Math.abs(a[1]-a[0])/t),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function KP(n,e){return e[1]-e[0]===0?1:n/((e[1]-e[0])/100)}function Nne(n,e){const t=BP(n,e),r=t.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=Lne(t);return t.ticks=o=>{const c=r(o),d=t.constant();let f=0,p=0,g=0;c.forEach(v=>{v>-d&&v<d&&(p+=1),v<=-d&&(f+=1),v>=d&&(g+=1)});const y=[];if(f>0&&y.push(...i.ticks(f)),p>0){const v=a.ticks(p);y.at(-1)===v[0]?y.push(...v.slice(1)):y.push(...v)}if(g>0){const v=s.ticks(g);y.at(-1)===v[0]?y.push(...v.slice(1)):y.push(...v)}return y},t.tickFormat=(o=10,c)=>{const d=t.constant(),[f,p]=t.domain(),g=p-f,y=i.domain(),v=y[1]-y[0],A=(g===0?0:v/g)*o,E=a.domain(),T=E[1]-E[0],I=(g===0?0:T/g)*o,O=s.domain(),N=O[1]-O[0],R=(g===0?0:N/g)*o,D=i.tickFormat(A,c),B=a.tickFormat(I,c),L=s.tickFormat(R,c);return P=>(P.valueOf()<=-d?D:P.valueOf()>=d?L:B)(P)},t}function Lne(n){const e=n.constant(),t=n.domain(),r=[t[0],Math.min(t[1],-e)],i=X1(r,n.range()),a=[Math.max(t[0],-e),Math.min(t[1],e)],s=Db(a,n.range()),o=[Math.max(t[0],e),t[1]],c=X1(o,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function em(n,e,t){switch(n){case"log":return X1(e,t);case"pow":return Rb(e,t);case"sqrt":return hte(e,t);case"time":return YP(e,t);case"utc":return Dne(e,t);case"symlog":return Nne(e,t);default:return Db(e,t)}}const tm=n=>(n==null?void 0:n[0])instanceof Date;function nm(n,e){const t=YP(n.data,e);return(r,{location:i})=>i==="tick"?t.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const e2=(n,e)=>{const t=n[1]-n[0],r=e[1]-e[0],i=n[0]-e[0]*t/r,a=n[1]+(100-e[1])*t/r;return[i,a]};let i3,a3;class Bne{constructor(){if(this.types=new Set,i3)throw new Error("You can only create one instance!");i3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class Vne{constructor(){if(this.types=new Set,a3)throw new Error("You can only create one instance!");a3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const oy=new Bne;oy.addType("bar");oy.addType("line");oy.addType("scatter");const QP=new Vne;QP.addType("radar");function jb(n){return oy.getTypes().has(n)}const Fne=(n,e,t,r,i,a,s,o)=>{var v;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((v=s[e])==null?void 0:v.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:t,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,y]=n;return[Math.min(f,g),Math.max(p,y)]},ZP=(n,e,t,r,i,a)=>{const o=Object.keys(t).filter(jb).reduce((c,d)=>Fne(c,d,n,e,t,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},jne=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(jb).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i},Une=(n,e,t,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&t===0)return"strict"}return"nice"};function Hne(n,e,t){const r=e==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return t.reverse?[r[1],r[0]]:r}const zne=.2,$ne=.1;function JP({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(t===void 0)return{axis:{},axisIds:[]};const d=jne(i,r,e,t[0].id),f={};return t.forEach((p,g)=>{const y=p,v=s==null?void 0:s[y.id],b=a==null?void 0:a.get(y.id),A=b?[b.start,b.end]:[0,100],E=Hne(n,i,y),[T,C]=ZP(y,i,r,g,e,b===void 0&&!v?o:void 0),I=!y.ignoreTooltip&&d.has(y.id),O=y.data??[];if(J1(y)){const Y=y.categoryGapRatio??zne,Q=y.barGapRatio??$ne,Z=i==="y"?[E[1],E[0]]:E,fe=e2(Z,A);if(f[y.id]=H({offset:0,height:0,categoryGapRatio:Y,barGapRatio:Q,triggerTooltip:I},y,{data:O,scale:ey(y.data,fe).paddingInner(Y).paddingOuter(Y/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Yd(H({values:y.data},y.colorMap)):Vc(y.colorMap))}),tm(y.data)){const ge=nm(y,Z);f[y.id].valueFormatter=y.valueFormatter??ge}}if(Fb(y)){const Y=i==="y"?[...E].reverse():E,Q=e2(Y,A);if(f[y.id]=H({offset:0,height:0,triggerTooltip:I},y,{data:O,scale:IP(y.data,Q),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Yd(H({values:y.data},y.colorMap)):Vc(y.colorMap))}),tm(y.data)){const Z=nm(y,Y);f[y.id].valueFormatter=y.valueFormatter??Z}}if(y.scaleType==="band"||y.scaleType==="point")return;const N=y.scaleType??"linear",M=c?Une(y,i,g,e):y.domainLimit??"nice",R=[y.min??T,y.max??C];if(typeof M=="function"){const{min:Y,max:Q}=M(T,C);R[0]=Y,R[1]=Q}const D=XP(H({},y,{range:E,domain:R})),B=KP(D,A),L=e2(E,A),P=em(N,R,L);Pne(y)&&y.constant!=null&&P.constant(y.constant);const F=M==="nice"?P.nice(D):P,[q,X]=F.domain(),G=[y.min??q,y.max??X];f[y.id]=H({offset:0,height:0,triggerTooltip:I},y,{data:O,scaleType:N,scale:F.domain(G),tickNumber:B,colorScale:y.colorMap&&Vc(y.colorMap),valueFormatter:y.valueFormatter??One(B,em(N,E.map(Y=>P.invert(Y)),E))})}),{axis:f,axisIds:t.map(({id:p})=>p)}}function Gne(n){return n!=null}function ek({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?Wne(a.data,c.start,c.end,i):Yne(d,ZP(a,i,t,s,r),c.start,c.end,i,a.data)}}function Wne(n,e,t,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(e*i/100),s=Math.ceil(t*i/100);return function(c,d){return(c[r]??(n==null?void 0:n[d]))==null?!0:d>=a&&d<s}}function Yne(n,e,t,r,i,a){let s,o;[s,o]=em(n??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+t*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const y=p[i]??(a==null?void 0:a[g]);return y==null?!0:y>=c&&y<=d}}const qne=n=>({currentAxisId:e,seriesXAxisId:t,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===t?r:t)||i?((f=(d=Object.values(n??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,t].filter(p=>p!==e).map(p=>n[p??""]).filter(Gne).every(p=>p(a,s))},s3=n=>(e=[])=>e.reduce((t,r)=>{const{zoom:i,id:a}=r,s=bb(i,a,n);return s&&(t[a]=s),t},{}),Xne=n=>{const e=new Map;return n.forEach(t=>{e.set(t.axisId,t)}),e},tk=n=>n.zoom,nk=Ge([tk],n=>n==null?void 0:n.isInteracting),ly=Ge([tk],n=>(n==null?void 0:n.zoomData)&&Xne(n==null?void 0:n.zoomData)),W0=Ge([eu,lf],(n,e)=>H({},s3("x")(n),s3("y")(e)));Ge([W0,(n,e)=>e],(n,e)=>n[e]);const Kne=Ge([ly,W0,To,za],(n,e,t,r)=>n&&e&&ek({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"x"})),Qne=Ge([ly,W0,To,za],(n,e,t,r)=>n&&e&&ek({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"y"})),rk=Ge([Kne,Qne,eu,lf],(n,e,t,r)=>{if(n===void 0||e===void 0)return;const i=t==null?void 0:t.reduce((s,o,c)=>{const d=n(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return qne(H({},i,a))}),Wi=Ge([eu,So,za,To,ly,W0,rk,gP],(n,e,t,r,i,a,s,o)=>JP({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),Yi=Ge([lf,So,za,To,ly,W0,rk,gP],(n,e,t,r,i,a,s,o)=>JP({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));Ge([Wi,Yi,(n,e)=>e],(n,e,t)=>(n==null?void 0:n.axis[t])??(e==null?void 0:e.axis[t]));Ge([eu,lf,(n,e)=>e],(n,e,t)=>{const r=(n==null?void 0:n.find(i=>i.id===t))??(e==null?void 0:e.find(i=>i.id===t))??null;if(r)return r});function $a(n){return n.bandwidth!==void 0}function Ju(n){return n instanceof Date?n.getTime():n}function qd(n,e){const{scale:t,data:r,reverse:i}=n;if(!$a(t)){const s=t.invert(e);if(r===void 0)return-1;const o=Ju(s);return r==null?void 0:r.findIndex((d,f)=>{const p=Ju(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-Ju(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(Ju(s)-p)<Math.abs(Ju(s)-Ju(r[f+1])))})}const a=t.bandwidth()===0?Math.floor((e-Math.min(...t.range())+t.step()/2)/t.step()):Math.floor((e-Math.min(...t.range()))/t.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function o3(n,e,t){const{scale:r,data:i}=n;if(!$a(r)){const a=r.invert(e);return t<0?a:i[t]}return t<0||t>=i.length?null:i[t]}function xw(n,e){const t=n.createSVGPoint();return t.x=e.clientX,t.y=e.clientY,t.matrixTransform(n.getScreenCTM().inverse())}const Zne=Object.is;function ik(n,e){if(n===e)return!0;if(!(n instanceof Object)||!(e instanceof Object))return!1;let t=0,r=0;for(const i in n)if(t+=1,!Zne(n[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return t===r}const uf=({store:n})=>{const e=Ve(function(){n.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),t=Ve(function(s){n.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=Ve(function(s){n.update(o=>ik(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=Ve(function(s){n.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:t,setPointerCoordinate:i}}};uf.getInitialState=()=>({interaction:{item:null,pointer:null}});uf.params={};const Ub=n=>n.interaction,Jne=Ge([Ub],n=>n!==void 0),ak=Ge([Ub],n=>(n==null?void 0:n.item)??null),sk=Ge([Ub],n=>(n==null?void 0:n.pointer)??null),Y0=Ge([sk],n=>n&&n.x),q0=Ge([sk],n=>n&&n.y),ere=Ge([ak],n=>n!==null);function Rd(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!Rd(n[a],e[a]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!Rd(s[1],e.get(s[0])))return!1}return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==e[a])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const t=Object.keys(n),r=t.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,t[i]))return!1;for(let i=0;i<r;i+=1){const a=t[i];if(!Rd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}const cy=(n,e)=>e;function ww(n,e,t=e.axisIds[0]){return Array.isArray(t)?t.map(r=>qd(e.axis[r],n)):qd(e.axis[t],n)}const ok=(n,e,t)=>{if(n===null)return null;const r=ww(n,e,t);return r===-1?null:r},Hb=Ge([Y0,Wi,cy],ok),zb=Ge([q0,Yi,cy],ok),tre=Ge([Y0,q0,Wi,Yi],(n,e,t,r)=>[...n===null?[]:t.axisIds.map(i=>({axisId:i,dataIndex:ww(n,t,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:ww(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function lk(n,e,t,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>o3(e.axis[i],n,t[a])):o3(e.axis[r],n,t)}const nre=Ge([Y0,Wi,Hb,cy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:lk(n,e,t,r)),rre=Ge([q0,Yi,zb,cy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:lk(n,e,t,r)),ck=Ge([Y0,Wi],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:qd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:Rd}}),uk=Ge([q0,Yi],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:qd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:Rd}}),ire=Ge([ck,uk],(n,e)=>n.length>0||e.length>0),are=()=>{};function sre(n,e,t,r){const i=U3(ore,{store:n,selector:e,skip:r}).current;i.effect=t,V.useEffect(i.onMount(r),[r])}function ore(n){const{store:e,selector:t,skip:r}=n;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=t(c);o.effect(a,d),a=d}))},o={effect:are,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=t(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=t(e.value),s()),o}const df=({params:n,store:e,seriesConfig:t,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=n,d=dt(e,So),f=dt(e,za),p=dt(e,Jne),{axis:g,axisIds:y}=dt(e,Wi),{axis:v,axisIds:b}=dt(e,Yi);_P({controlled:n.highlightedAxis}),$n(()=>{n.highlightedAxis!==void 0&&e.update(C=>C.controlledCartesianAxisHighlight===n.highlightedAxis?C:H({},C,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[e,n.highlightedAxis]);const A=V.useRef(!0);V.useEffect(()=>{if(A.current){A.current=!1;return}e.update(C=>H({},C,{cartesianAxis:H({},C.cartesianAxis,{x:EP(a,o),y:SP(s,o)})}))},[t,d,a,s,o,e]);const E=y[0],T=b[0];return sre(e,tre,(C,I)=>{if(!Object.is(C,I)){if(C.length!==I.length){c(I);return}C!=null&&C.some(({axisId:O,dataIndex:N},M)=>I[M].axisId!==O||I[M].dataIndex!==N)&&c(I)}},!c),V.useEffect(()=>{const C=r.current;if(!p||!C||n.disableAxisListener)return()=>{};const I=i.addInteractionListener("moveEnd",L=>{var P;L.detail.activeGestures.pan||(P=i.cleanInteraction)==null||P.call(i)}),O=i.addInteractionListener("panEnd",L=>{var P;L.detail.activeGestures.move||(P=i.cleanInteraction)==null||P.call(i)}),N=i.addInteractionListener("quickPressEnd",L=>{var P;!L.detail.activeGestures.move&&!L.detail.activeGestures.pan&&((P=i.cleanInteraction)==null||P.call(i))}),M=L=>{var X,G;const P=L.detail.srcEvent,F=L.detail.target,q=xw(C,P);if(L.detail.srcEvent.buttons>=1&&(F!=null&&F.hasPointerCapture(L.detail.srcEvent.pointerId))&&!(F!=null&&F.closest("[data-charts-zoom-slider]"))&&(F==null||F.releasePointerCapture(L.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,F)){(X=i.cleanInteraction)==null||X.call(i);return}(G=i.setPointerCoordinate)==null||G.call(i,q)},R=i.addInteractionListener("move",M),D=i.addInteractionListener("pan",M),B=i.addInteractionListener("quickPress",M);return()=>{R.cleanup(),I.cleanup(),D.cleanup(),O.cleanup(),B.cleanup(),N.cleanup()}},[r,e,g,E,v,T,i,n.disableAxisListener,p]),V.useEffect(()=>{const C=r.current,I=n.onAxisClick;if(C===null||!I)return()=>{};const O=i.addInteractionListener("tap",N=>{let M=null,R=!1;const D=xw(C,N.detail.srcEvent),B=qd(g[E],D.x);R=B!==-1,M=R?B:qd(v[T],D.y);const L=R?y[0]:b[0];if(M==null||M===-1)return;const P=(R?g:v)[L].data[M],F={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(G=>{const Y=f[q].series[G],Q=Y.xAxisId,Z=Y.yAxisId,fe=R?Q:Z;(fe===void 0||fe===L)&&(F[G]=Y.data[M])})}),I(N.detail.srcEvent,{dataIndex:M,axisValue:P,seriesValues:F})});return()=>{O.cleanup()}},[n.onAxisClick,f,r,g,y,v,b,E,T,i]),{}};df.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};df.getDefaultizedParams=({params:n})=>H({},n,{colors:n.colors??mP,theme:n.theme??"light",defaultizedXAxis:EP(n.xAxis,n.dataset),defaultizedYAxis:SP(n.yAxis,n.dataset)});df.getInitialState=n=>H({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const ff=n=>n.controlledCartesianAxisHighlight,dk=(n,e,t)=>t!==void 0?t.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:e.axisIds[0],dataIndex:n}];Ge([Hb,Wi,ff],dk);Ge([zb,Yi,ff],dk);const fk=(n,e,t,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=t.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:t.axisIds[0],dataIndex:n,value:e}],lre=Ge([Hb,nre,Wi,ff],fk),cre=Ge([zb,rre,Yi,ff],fk),hk=(n,e)=>n===void 0?[e.axis[e.axisIds[0]]]:n.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);Ge([ff,Wi],hk);Ge([ff,Yi],hk);function l3(n,e){return n.id!==void 0?n:H({id:e},n)}function c3(n){return n.colorMap?H({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?Yd(H({values:n.data},n.colorMap)):Vc(n.colorMap.type==="continuous"?H({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function pk(n,e){if(!n||n.length===0)return{axis:{},axisIds:[]};const t={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){t[o]=c3(l3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");t[o]=c3(l3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:t,axisIds:r}}const X0=({params:n,store:e})=>{const{zAxis:t,dataset:r}=n,i=V.useRef(!0);return V.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:pk(t,r)}))},[t,r,e]),{}};X0.params={zAxis:!0,dataset:!0};X0.getInitialState=n=>({zAxis:pk(n.zAxis,n.dataset)});const ure=n=>n,dre=Ge([ure],n=>n.zAxis),ru=({store:n,params:e})=>{_P({controlled:e.highlightedItem}),$n(()=>{n.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[n,e.highlightedItem]);const t=Ve(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),n.update(a=>H({},a,{highlight:{item:null}}))}),r=Ve(i=>{var s;const a=n.getSnapshot().highlight.item;ik(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),n.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:t,setHighlight:r}}};ru.getDefaultizedParams=({params:n})=>H({},n,{highlightedItem:n.highlightedItem??null});ru.getInitialState=n=>({highlight:{item:n.highlightedItem}});ru.params={highlightedItem:!0,onHighlightChange:!0};function gk(n){let e=1/0,t=-1/0;for(const r of n??[])r<e&&(e=r),r>t&&(t=r);return[e,t]}const u3=(n,e)=>e==="x"?{x:n,y:null}:{x:null,y:n},mk=n=>{var s;const{axis:e,getFilters:t,isDefaultAxis:r}=n,i=t==null?void 0:t({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return gk(a??[])},yk=n=>e=>{const{series:t,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(t).filter(s=>{const o=n==="x"?t[s].xAxisId:t[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=t[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,y,v)=>d&&(!d(u3(y[0],n),v)||!d(u3(y[1],n),v))?g:[Math.min(...y,g[0]),Math.max(...y,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},fre=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?yk("x")(n):mk(n),hre=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?mk(n):yk("y")(n);function br(n){return function(){return n}}const d3=Math.abs,ri=Math.atan2,wc=Math.cos,pre=Math.max,t2=Math.min,ss=Math.sin,md=Math.sqrt,Ii=1e-12,x0=Math.PI,rm=x0/2,l1=2*x0;function gre(n){return n>1?0:n<-1?x0:Math.acos(n)}function f3(n){return n>=1?rm:n<=-1?-rm:Math.asin(n)}const _w=Math.PI,bw=2*_w,Ec=1e-6,mre=bw-Ec;function vk(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function yre(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return vk;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let vre=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?vk:yre(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-t,f=s-e,p=o-t,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Ec)if(!(Math.abs(p*c-d*f)>Ec)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,v=i-o,b=c*c+d*d,A=y*y+v*v,E=Math.sqrt(b),T=Math.sqrt(g),C=a*Math.tan((_w-Math.acos((b+g-A)/(2*E*T)))/2),I=C/T,O=C/E;Math.abs(I-1)>Ec&&this._append`L${e+I*f},${t+I*p}`,this._append`A${a},${a},0,0,${+(p*y>f*v)},${this._x1=e+O*c},${this._y1=t+O*d}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=t+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ec||Math.abs(this._y1-f)>Ec)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%bw+bw),g>mre?this._append`A${r},${r},0,1,${p},${e-o},${t-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Ec&&this._append`A${r},${r},0,${+(g>=_w)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function xre(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new vre(e)}function wre(n){return n.innerRadius}function _re(n){return n.outerRadius}function bre(n){return n.startAngle}function Are(n){return n.endAngle}function Ere(n){return n&&n.padAngle}function Sre(n,e,t,r,i,a,s,o){var c=t-n,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<Ii))return g=(f*(e-a)-p*(n-i))/g,[n+g*c,e+g*d]}function zg(n,e,t,r,i,a,s){var o=n-t,c=e-r,d=(s?a:-a)/md(o*o+c*c),f=d*c,p=-d*o,g=n+f,y=e+p,v=t+f,b=r+p,A=(g+v)/2,E=(y+b)/2,T=v-g,C=b-y,I=T*T+C*C,O=i-a,N=g*b-v*y,M=(C<0?-1:1)*md(pre(0,O*O*I-N*N)),R=(N*C-T*M)/I,D=(-N*T-C*M)/I,B=(N*C+T*M)/I,L=(-N*T+C*M)/I,P=R-A,F=D-E,q=B-A,X=L-E;return P*P+F*F>q*q+X*X&&(R=B,D=L),{cx:R,cy:D,x01:-f,y01:-p,x11:R*(i/O-1),y11:D*(i/O-1)}}function xk(){var n=wre,e=_re,t=br(0),r=null,i=bre,a=Are,s=Ere,o=null,c=xre(d);function d(){var f,p,g=+n.apply(this,arguments),y=+e.apply(this,arguments),v=i.apply(this,arguments)-rm,b=a.apply(this,arguments)-rm,A=d3(b-v),E=b>v;if(o||(o=f=c()),y<g&&(p=y,y=g,g=p),!(y>Ii))o.moveTo(0,0);else if(A>l1-Ii)o.moveTo(y*wc(v),y*ss(v)),o.arc(0,0,y,v,b,!E),g>Ii&&(o.moveTo(g*wc(b),g*ss(b)),o.arc(0,0,g,b,v,E));else{var T=v,C=b,I=v,O=b,N=A,M=A,R=s.apply(this,arguments)/2,D=R>Ii&&(r?+r.apply(this,arguments):md(g*g+y*y)),B=t2(d3(y-g)/2,+t.apply(this,arguments)),L=B,P=B,F,q;if(D>Ii){var X=f3(D/g*ss(R)),G=f3(D/y*ss(R));(N-=X*2)>Ii?(X*=E?1:-1,I+=X,O-=X):(N=0,I=O=(v+b)/2),(M-=G*2)>Ii?(G*=E?1:-1,T+=G,C-=G):(M=0,T=C=(v+b)/2)}var Y=y*wc(T),Q=y*ss(T),Z=g*wc(O),fe=g*ss(O);if(B>Ii){var ge=y*wc(C),we=y*ss(C),Ae=g*wc(I),Pe=g*ss(I),Re;if(A<x0)if(Re=Sre(Y,Q,Ae,Pe,ge,we,Z,fe)){var He=Y-Re[0],Ue=Q-Re[1],Qe=ge-Re[0],ae=we-Re[1],me=1/ss(gre((He*Qe+Ue*ae)/(md(He*He+Ue*Ue)*md(Qe*Qe+ae*ae)))/2),he=md(Re[0]*Re[0]+Re[1]*Re[1]);L=t2(B,(g-he)/(me-1)),P=t2(B,(y-he)/(me+1))}else L=P=0}M>Ii?P>Ii?(F=zg(Ae,Pe,Y,Q,y,P,E),q=zg(ge,we,Z,fe,y,P,E),o.moveTo(F.cx+F.x01,F.cy+F.y01),P<B?o.arc(F.cx,F.cy,P,ri(F.y01,F.x01),ri(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,P,ri(F.y01,F.x01),ri(F.y11,F.x11),!E),o.arc(0,0,y,ri(F.cy+F.y11,F.cx+F.x11),ri(q.cy+q.y11,q.cx+q.x11),!E),o.arc(q.cx,q.cy,P,ri(q.y11,q.x11),ri(q.y01,q.x01),!E))):(o.moveTo(Y,Q),o.arc(0,0,y,T,C,!E)):o.moveTo(Y,Q),!(g>Ii)||!(N>Ii)?o.lineTo(Z,fe):L>Ii?(F=zg(Z,fe,ge,we,g,-L,E),q=zg(Y,Q,Ae,Pe,g,-L,E),o.lineTo(F.cx+F.x01,F.cy+F.y01),L<B?o.arc(F.cx,F.cy,L,ri(F.y01,F.x01),ri(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,L,ri(F.y01,F.x01),ri(F.y11,F.x11),!E),o.arc(0,0,g,ri(F.cy+F.y11,F.cx+F.x11),ri(q.cy+q.y11,q.cx+q.x11),E),o.arc(q.cx,q.cy,L,ri(q.y11,q.x11),ri(q.y01,q.x01),!E))):o.arc(0,0,g,O,I,E)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-x0/2;return[wc(p)*f,ss(p)*f]},d.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:br(+f),d):n},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:br(+f),d):e},d.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:br(+f),d):t},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:br(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:br(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:br(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:br(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function wk(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Tre(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function Cre(n){return n}function Ire(){var n=Cre,e=Tre,t=null,r=br(0),i=br(l1),a=br(0);function s(o){var c,d=(o=wk(o)).length,f,p,g=0,y=new Array(d),v=new Array(d),b=+r.apply(this,arguments),A=Math.min(l1,Math.max(-l1,i.apply(this,arguments)-b)),E,T=Math.min(Math.abs(A)/d,a.apply(this,arguments)),C=T*(A<0?-1:1),I;for(c=0;c<d;++c)(I=v[y[c]=c]=+n(o[c],c,o))>0&&(g+=I);for(e!=null?y.sort(function(O,N){return e(v[O],v[N])}):t!=null&&y.sort(function(O,N){return t(o[O],o[N])}),c=0,p=g?(A-d*C)/g:0;c<d;++c,b=E)f=y[c],I=v[f],E=b+(I>0?I*p:0)+C,v[f]={data:o[f],index:c,value:I,startAngle:b,endAngle:E,padAngle:T};return v}return s.value=function(o){return arguments.length?(n=typeof o=="function"?o:br(+o),s):n},s.sortValues=function(o){return arguments.length?(e=o,t=null,s):e},s.sort=function(o){return arguments.length?(t=o,e=null,s):t},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:br(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:br(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:br(+o),s):a},s}function Xd(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Kd(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Dre(n,e){return n[e]}function Rre(n){const e=[];return e.key=n,e}function _k(){var n=br([]),e=Kd,t=Xd,r=Dre;function i(a){var s=Array.from(n.apply(this,arguments),Rre),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=wk(e(s));o<c;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:br(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:br(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Kd:typeof a=="function"?a:br(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Xd,i):t},i}function Mre(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}Xd(n,e)}}function Ore(n,e){if((c=n.length)>0)for(var t,r=0,i,a,s,o,c,d=n[e[0]].length;r<d;++r)for(s=o=0,t=0;t<c;++t)(a=(i=n[e[t]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function Pre(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}Xd(n,e)}}function kre(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=n[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,y=(p-g)/2,v=0;v<o;++v){var b=n[e[v]],A=b[r][1]||0,E=b[r-1][1]||0;y+=A-E}c+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=t,c&&(t-=d/c)}i[r-1][1]+=i[r-1][0]=t,Xd(n,e)}}function bk(n){var e=n.map(Nre);return Kd(n).sort(function(t,r){return e[t]-e[r]})}function Nre(n){for(var e=-1,t=0,r=n.length,i,a=-1/0;++e<r;)(i=+n[e][1])>a&&(a=i,t=e);return t}function Ak(n){var e=n.map(Ek);return Kd(n).sort(function(t,r){return e[t]-e[r]})}function Ek(n){for(var e=0,t=-1,r=n.length,i;++t<r;)(i=+n[t][1])&&(e+=i);return e}function Lre(n){return Ak(n).reverse()}function Bre(n){var e=n.length,t,r,i=n.map(Ek),a=bk(n),s=0,o=0,c=[],d=[];for(t=0;t<e;++t)r=a[t],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function Vre(n){return Kd(n).reverse()}const n2={appearance:bk,ascending:Ak,descending:Lre,insideOut:Bre,none:Kd,reverse:Vre},r2={expand:Mre,diverging:Ore,none:Xd,silhouette:Pre,wiggle:kre},Sk=n=>{const{series:e,seriesOrder:t,defaultStrategy:r}=n,i=[],a={};return t.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:n2.none,stackingOffset:r2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:n2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:r2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=n2[c]),d!==void 0&&(i[a[o]].stackingOffset=r2[d]))}),i},Fre=n=>n==null?"":n.toLocaleString(),jre=(n,e)=>{const{seriesOrder:t,series:r}=n,i=Sk(n),a=e??[];t.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=_k().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(f).offset(d)(a);c.forEach((g,y)=>{const v=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??Fre},r[g],{data:v?e.map(b=>{const A=b[v];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:s}};function Gi(n,e){return typeof n=="function"?n(e):n}const Ure=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Gi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},Tk=(n,e,t)=>{const r=n.layout==="vertical",i=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,a=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:t==null?void 0:t.data;return a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c);return d===null?n.color:d}:i&&s?o=>{if(o===void 0)return n.color;const c=s[o],d=c===null?n.color:i(c);return d===null?n.color:d}:()=>n.color},Hre=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Gi(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},zre=n=>Object.values(n).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),$re=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Gre={seriesProcessor:jre,colorProcessor:Tk,legendGetter:Ure,tooltipGetter:Hre,axisTooltipGetter:zre,xExtremumGetter:fre,yExtremumGetter:hre,getSeriesWithDefaultValues:$re},Wre=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},Yre=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},qre=({series:n,seriesOrder:e},t)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(t==null?void 0:t.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),Xre=(n,e,t,r)=>{const i=r==null?void 0:r.colorScale,a=t==null?void 0:t.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return n.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=n.data[o],d=c===null?n.color:i(c.z);return d===null?n.color:d}:a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c.y);return d===null?n.color:d}:s?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:s(c.x);return d===null?n.color:d}:()=>n.color},Kre=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Gi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},Qre=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Gi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Zre=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Jre={seriesProcessor:qre,colorProcessor:Xre,legendGetter:Kre,tooltipGetter:Qre,xExtremumGetter:Wre,yExtremumGetter:Yre,getSeriesWithDefaultValues:Zre},eie=n=>{const{axis:e}=n;return gk(e.data??[])};function tie(n,e,t,r){return t.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=n(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const nie=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===t.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&t.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],y=tie(g,d,c,p),[v,b]=y;return[Math.min(v,a[0]),Math.max(b,a[1])]},[1/0,-1/0])};function rie(n,e){const t={};return Object.keys(n).forEach(r=>{t[r]=H({},n[r],{valueFormatter:n[r].valueFormatter??e})}),t}const iie=(n,e)=>{const{seriesOrder:t,series:r}=n,i=Sk(H({},n,{defaultStrategy:{stackOffset:"none"}})),a=e??[];t.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=_k().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(d).offset(f)(a);c.forEach((g,y)=>{const v=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:v?e.map(b=>{const A=b[v];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:rie(s,o=>o==null?"":o.toLocaleString())}},aie=(n,e,t)=>{const r=t==null?void 0:t.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],o=s===null?n.color:r(s);return o===null?n.color:o}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?n.color:i(s);return o===null?n.color:o}:()=>n.color},sie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Gi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},oie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Gi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},lie=n=>Object.values(n).map(e=>({direction:"x",axisId:e.xAxisId})),cie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),uie={colorProcessor:aie,seriesProcessor:iie,legendGetter:sie,tooltipGetter:oie,axisTooltipGetter:lie,xExtremumGetter:eie,yExtremumGetter:nie,getSeriesWithDefaultValues:cie},die=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(e,t)=>t-e;case"asc":return(e,t)=>e-t;default:return null}},fie=n=>{const{seriesOrder:e,series:t}=n,r={};return e.forEach(i=>{const a=Ire().startAngle(2*Math.PI*(t[i].startAngle??0)/360).endAngle(2*Math.PI*(t[i].endAngle??360)/360).padAngle(2*Math.PI*(t[i].paddingAngle??0)/360).sortValues(die(t[i].sortingValues??"none"))(t[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},t[i],{data:t[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=t[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:Gi(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},hie=n=>e=>n.data[e].color,pie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>(t[i].data.forEach((a,s)=>{const o=Gi(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??t[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},gie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=Gi(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},mie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`},n,{data:n.data.map((r,i)=>H({color:t[i%t.length]},r))}),yie={colorProcessor:hie,seriesProcessor:fie,legendGetter:pie,tooltipGetter:gie,getSeriesWithDefaultValues:mie},vie={bar:Gre,scatter:Jre,line:uie,pie:yie},xie=[X0,df,uf,ru];function wie(n){const{children:e,plugins:t=xie,pluginParams:r={},seriesConfig:i=vie}=n,{contextValue:a}=eee(t,r,i);return x.jsx(wP.Provider,{value:a,children:e})}const Bl=()=>{const n=V.useContext(wP);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function yn(){const n=Bl();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function xa(){const n=yn();return dt(n,So)}function $b(){const n=yn();return dt(n,BJ)}function Gb(n){return QP.getTypes().has(n)}const _ie=(n,e,t,r,i,a,s)=>{var y;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((y=s[e])==null?void 0:y.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:t,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=n;return[Math.min(d,p),Math.max(f,g)]},bie=(n,e,t,r,i)=>{const s=Object.keys(t).filter(Gb).reduce((o,c)=>_ie(o,c,n,e,t,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},yd=(n,e)=>n===void 0?e:Math.PI*n/180,Aie=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(Gb).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i};function Eie(n,e,t){if(e==="rotation"){if(t.scaleType==="point"){const r=[yd(t.startAngle,0),yd(t.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/t.data.length),r}return[yd(t.startAngle,0),yd(t.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const Sie=.2,Tie=.1;function Ck({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i}){if(t===void 0)return{axis:{},axisIds:[]};const a=Aie(i,r,e,t[0].id),s={};return t.forEach((o,c)=>{const d=o,f=Eie(n,i,d),[p,g]=bie(d,i,r,c,e),y=!d.ignoreTooltip&&a.has(d.id),v=d.data??[];if(J1(d)){const D=d.categoryGapRatio??Sie,B=d.barGapRatio??Tie;if(s[d.id]=H({offset:0,categoryGapRatio:D,barGapRatio:B,triggerTooltip:y},d,{data:v,scale:ey(d.data,f).paddingInner(D).paddingOuter(D/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Yd(H({values:d.data},d.colorMap)):Vc(d.colorMap))}),tm(d.data)){const L=nm(d,f);s[d.id].valueFormatter=d.valueFormatter??L}}if(Fb(d)&&(s[d.id]=H({offset:0,triggerTooltip:y},d,{data:v,scale:IP(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Yd(H({values:d.data},d.colorMap)):Vc(d.colorMap))}),tm(d.data))){const D=nm(d,f);s[d.id].valueFormatter=d.valueFormatter??D}if(d.scaleType==="band"||d.scaleType==="point")return;const b=d.scaleType??"linear",A=d.domainLimit??"nice",E=[d.min??p,d.max??g];if(typeof A=="function"){const{min:D,max:B}=A(p,g);E[0]=D,E[1]=B}const T=XP(H({},d,{range:f,domain:E})),C=KP(T,f),I=em(b,E,f),O=A==="nice"?I.nice(T):I,[N,M]=O.domain(),R=[d.min??N,d.max??M];s[d.id]=H({offset:0,triggerTooltip:y},d,{data:v,scaleType:b,scale:O.domain(R),tickNumber:C,colorScale:d.colorMap&&Vc(d.colorMap)})}),{axis:s,axisIds:t.map(({id:o})=>o)}}const Ik=n=>n.polarAxis,Dk=Ge([Ik],n=>n==null?void 0:n.rotation),Cie=Ge([Ik],n=>n==null?void 0:n.radius),iu=Ge([Dk,So,za,To],(n,e,t,r)=>Ck({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"rotation"})),Iie=Ge([Cie,So,za,To],(n,e,t,r)=>Ck({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"radius"})),Die=Ge([So],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),Rie=n=>(e,t)=>Math.atan2(e-n.cx,n.cy-t);function uy(n){return(n%360+360)%360}const i2=2*Math.PI;function Mie(n){return(n%i2+i2)%i2}function h3(n,e){const{scale:t,data:r,reverse:i}=n;if(!$a(t))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=Mie(e-Math.min(...t.range())),s=t.bandwidth()===0?Math.floor((a+t.step()/2)/t.step())%r.length:Math.floor(a/t.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function Io(){const n=yn(),{axis:e,axisIds:t}=dt(n,Wi);return{xAxis:e,xAxisIds:t}}function Vl(){const n=yn(),{axis:e,axisIds:t}=dt(n,Yi);return{yAxis:e,yAxisIds:t}}function Oie(n){const e=yn(),{axis:t,axisIds:r}=dt(e,Wi),i=r[0];return t[i]}function Pie(n){const e=yn(),{axis:t,axisIds:r}=dt(e,Yi),i=r[0];return t[i]}function Rk(){const n=yn(),{axis:e,axisIds:t}=dt(n,iu);return{rotationAxis:e,rotationAxisIds:t}}function kie(){const n=yn(),{axis:e,axisIds:t}=dt(n,Iie);return{radiusAxis:e,radiusAxisIds:t}}function Nie(n){const e=yn(),{axis:t,axisIds:r}=dt(e,iu),i=r[0];return t[i]}function im(n){return $a(n)?e=>(n(e)??0)+n.bandwidth()/2:e=>n(e)}function Wb(){const n=yn(),{axis:e,axisIds:t}=dt(n,dre)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:t}}function Yb(){const n=Bl();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function dy(){const n=yn();return dt(n,za)}function Lie(n,e){if(n===e)return!0;if(!Array.isArray(n)||!Array.isArray(e))return!1;let t=n.length;if(t!==e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function Mk(n){const e=Ge([za,(t,r)=>r],(t,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=t[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=t[n])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=t[n])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=t[n])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return t=>{const r=yn();return dt(r,e,[t],Lie)}}function Ok(n){const e=Ge([za],t=>t[n]);return()=>{const t=yn();return dt(t,e)}}Mk("pie");const Bie=Ok("pie");function Vie(){return Bie()}Mk("bar");const Fie=Ok("bar");function jie(){return Fie()}function Uie(){return!1}function Pk(n,e){return!n||!e?Uie:function(r){return r?n.highlight==="series"?r.seriesId===e.seriesId:n.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function Hie(){return!1}function kk(n,e){return!n||!e?Hie:function(r){return r?n.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:n.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const zie=n=>n.highlight,$ie=n=>n.series,Gie=Ge([$ie],n=>{const e=new Map;return Object.keys(n.processedSeries).forEach(t=>{var i;const r=n.processedSeries[t];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),K0=Ge([zie],function(e){return e.item}),fy=Ge([Gie,K0],function(e,t){if(!t)return null;const r=e.get(t.seriesId);return r===void 0?null:r}),Wie=Ge([fy,K0],Pk),Yie=Ge([fy,K0],kk),qie=Ge([fy,K0,(n,e)=>e],function(e,t,r){return Pk(e,t)(r)}),Xie=Ge([fy,K0,(n,e)=>e],function(e,t,r){return kk(e,t)(r)});function Nk(n){const e=yn(),t=dt(e,qie,[n]),r=dt(e,Xie,[n]);return{isHighlighted:t,isFaded:!t&&r}}function Kie(){const n=yn(),e=dt(n,Wie),t=dt(n,Yie);return{isHighlighted:e,isFaded:t}}function Qie(n,e){return Object.keys(n).flatMap(t=>{const r=e[t].legendGetter;return r===void 0?[]:r(n[t])})}function Zie(){const n=dy(),e=yn(),t=dt(e,To);return{items:Qie(n,t)}}function Jie(){const n=$b();return V.useCallback(e=>`${n}-gradient-${e}`,[n])}function eae(){const n=$b();return V.useCallback(e=>`${n}-gradient-${e}-object-bound`,[n])}var a2,p3;function tae(){if(p3)return a2;p3=1;var n=4,e=.001,t=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(b,A){return 1-3*A+3*b}function c(b,A){return 3*A-6*b}function d(b){return 3*b}function f(b,A,E){return((o(A,E)*b+c(A,E))*b+d(A))*b}function p(b,A,E){return 3*o(A,E)*b*b+2*c(A,E)*b+d(A)}function g(b,A,E,T,C){var I,O,N=0;do O=A+(E-A)/2,I=f(O,T,C)-b,I>0?E=O:A=O;while(Math.abs(I)>t&&++N<r);return O}function y(b,A,E,T){for(var C=0;C<n;++C){var I=p(A,E,T);if(I===0)return A;var O=f(A,E,T)-b;A-=O/I}return A}function v(b){return b}return a2=function(A,E,T,C){if(!(0<=A&&A<=1&&0<=T&&T<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===E&&T===C)return v;for(var I=s?new Float32Array(i):new Array(i),O=0;O<i;++O)I[O]=f(O*a,A,T);function N(M){for(var R=0,D=1,B=i-1;D!==B&&I[D]<=M;++D)R+=a;--D;var L=(M-I[D])/(I[D+1]-I[D]),P=R+L*a,F=p(P,A,T);return F>=e?y(M,P,A,T):F===0?P:g(M,R,R+a,A,T)}return function(R){return R===0?0:R===1?1:f(N(R),E,C)}},a2}var nae=tae();const rae=MN(nae),qb=300,Lk="cubic-bezier(0.66, 0, 0.34, 1)",iae=rae(.66,0,.34,1);var Qd=0,Uh=0,Th=0,Bk=1e3,am,Hh,sm=0,Wc=0,hy=0,w0=typeof performance=="object"&&performance.now?performance:Date,Vk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Xb(){return Wc||(Vk(aae),Wc=w0.now()+hy)}function aae(){Wc=0}function om(){this._call=this._time=this._next=null}om.prototype=Fk.prototype={constructor:om,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Xb():+t)+(e==null?0:+e),!this._next&&Hh!==this&&(Hh?Hh._next=this:am=this,Hh=this),this._call=n,this._time=t,Ew()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ew())}};function Fk(n,e,t){var r=new om;return r.restart(n,e,t),r}function Aw(){Xb(),++Qd;for(var n=am,e;n;)(e=Wc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Qd}function g3(){Wc=(sm=w0.now())+hy,Qd=Uh=0;try{Aw()}finally{Qd=0,oae(),Wc=0}}function sae(){var n=w0.now(),e=n-sm;e>Bk&&(hy-=e,sm=n)}function oae(){for(var n,e=am,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:am=t);Hh=n,Ew(r)}function Ew(n){if(!Qd){Uh&&(Uh=clearTimeout(Uh));var e=n-Wc;e>24?(n<1/0&&(Uh=setTimeout(g3,n-w0.now()-hy)),Th&&(Th=clearInterval(Th))):(Th||(sm=w0.now(),Th=setInterval(sae,Bk)),Qd=1,Vk(g3))}}function lae(n,e,t){var r=new om;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}class cae{constructor(e,t,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=t,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const t=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(t);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=Xb()-this.elapsed;return this.timer=Fk(t=>this.timerCallback(t),0,e),Aw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),lae(()=>this.timerCallback(this.duration)),Aw(),this}}function uae(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1){const a=t[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(n[a],e[a]))return!1}return!0}function dae(n,{createInterpolator:e,applyProps:t,skip:r,initialProps:i=n}){const a=V.useRef(i),s=V.useRef(null),o=V.useRef(null),c=V.useRef(n);$n(()=>{c.current=n},[n]),$n(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=n)},[n,r]);const d=V.useCallback(p=>{const g=a.current,y=e(g,n);s.current=new cae(qb,iae,v=>{const b=y(v);a.current=b,t(p,b)})},[t,e,n]);return V.useCallback(p=>{var y,v,b,A;if(p===null){(y=s.current)==null||y.stop();return}const g=o.current;if(g===p){if(uae(c.current,n)){(v=s.current)==null||v.resume();return}(b=s.current)==null||b.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,n,r])}function Q0(n,{createInterpolator:e,transformProps:t,applyProps:r,skip:i,initialProps:a=n,ref:s}){const o=t??(f=>f),c=dae(n,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},t(i?n:a),{ref:Jr(c,s)})}function fae(n,e){const t=Kt(n.x,e.x),r=Kt(n.y,e.y),i=Kt(n.width,e.width),a=Kt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function hae(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return Q0({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:fae,applyProps(t,r){t.setAttribute("x",r.x.toString()),t.setAttribute("y",r.y.toString()),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString())},transformProps:t=>t,initialProps:e,skip:n.skipAnimation,ref:n.ref})}function pae(n,e){const t=Kt(n.x,e.x),r=Kt(n.y,e.y),i=Kt(n.width,e.width),a=Kt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function gae(n){const e={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},t={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return Q0(t,{createInterpolator:pae,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function mae(n,e){const t=Kt(n.startAngle,e.startAngle),r=Kt(n.endAngle,e.endAngle),i=Kt(n.innerRadius,e.innerRadius),a=Kt(n.outerRadius,e.outerRadius),s=Kt(n.paddingAngle,e.paddingAngle),o=Kt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function yae(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return Q0({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:mae,transformProps:t=>({d:xk().cornerRadius(t.cornerRadius)({padAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}),visibility:t.startAngle===t.endAngle?"hidden":"visible"}),applyProps(t,r){t.setAttribute("d",r.d),t.setAttribute("visibility",r.visibility)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function vae(n,e){const t=Kt(n.startAngle,e.startAngle),r=Kt(n.endAngle,e.endAngle),i=Kt(n.innerRadius,e.innerRadius),a=Kt(n.outerRadius,e.outerRadius),s=Kt(n.paddingAngle,e.paddingAngle),o=Kt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function xae(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return Q0({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:vae,transformProps:t=>{const[r,i]=xk().cornerRadius(t.cornerRadius).centroid({padAngle:t.paddingAngle,startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius});return{x:r,y:i}},applyProps(t,{x:r,y:i}){t.setAttribute("x",r.toString()),t.setAttribute("y",i.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function wae(){return Bl().chartRootRef}const _ae={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},bae=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),jk={loading:"Loading data…",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${_ae[n]??n}`},Aae=jk;bae(jk);const Eae=["localeText"],Sw=V.createContext(null);function Sae(n){const{localeText:e}=n,t=Ne(n,Eae),{localeText:r}=V.useContext(Sw)??{localeText:void 0},i=vt({props:t,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=V.useMemo(()=>H({},Aae,s,r,e),[s,r,e]),c=V.useMemo(()=>({localeText:o}),[o]);return x.jsx(Sw.Provider,{value:c,children:a})}const Uk=()=>{const n=V.useContext(Sw);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function Tae(n){const{id:e,offset:t}=n,{left:r,top:i,width:a,height:s}=xa(),o=H({top:0,right:0,bottom:0,left:0},t);return x.jsx("clipPath",{id:e,children:x.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function Cae(){return typeof window>"u"}const $g=new Map,Iae=2e3,Dae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Rae=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],m3="mui_measurement_span";function Hk(n,e){return Rae.indexOf(n)>=0&&e===+e?`${e}px`:e}function zk(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const Mae=n=>Object.keys(n).sort().reduce((e,t)=>`${e}${zk(t)}:${Hk(t,n[t])};`,"");let s2;const Z0=(n,e={})=>{if(n==null||Cae())return{width:0,height:0};const t=`${n}`,r=Mae(e),i=`${t}-${r}`,a=$g.get(i);if(a)return a;try{let s=document.getElementById(m3);s===null&&(s=document.createElement("span"),s.setAttribute("id",m3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},Dae,e);Object.keys(o).map(f=>(s.style[zk(f)]=Hk(f,o[f]),f)),s.textContent=t;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return $g.set(i,d),$g.size+1>Iae&&$g.clear(),s2&&clearTimeout(s2),s2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function $k({style:n,needsComputation:e,text:t}){return t.split(`
`).map(r=>H({text:r},e?Z0(r,n):{width:0,height:0}))}function Kb(){const[n,e]=V.useState(typeof window<"u"||!1);return V.useEffect(()=>{e(!0)},[]),n}const Oae=["x","y","style","text","ownerState"],Pae=["angle","textAnchor","dominantBaseline"];function lm(n){const{x:e,y:t,style:r,text:i}=n,a=Ne(n,Oae),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=Ne(s,Pae),p=Kb(),g=V.useMemo(()=>$k({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let y;switch(d){case"hanging":case"text-before-edge":y=0;break;case"central":y=(g.length-1)/2*-g[0].height;break;default:y=(g.length-1)*-g[0].height;break}return x.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${t})`:void 0,x:e,y:t,textAnchor:c,dominantBaseline:d,style:f,children:g.map((v,b)=>x.jsx("tspan",{x:e,dy:`${b===0?y:g[0].height}px`,dominantBaseline:d,children:v.text},b))}))}function Qb(n){return typeof n=="number"&&!Number.isFinite(n)}const o2={start:0,extremities:0,end:1,middle:.5};function kae(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=n;if($a(e)){const g=e.domain(),y=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const E=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:E}))??E,offset:e(A)-(e.step()-e.bandwidth())/2+o2[a]*e.step(),labelOffset:y==="tick"?0:e.step()*(o2[y]-o2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(b=>{const A=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:A}))??A,offset:e(b),labelOffset:0}})}if(e.domain().some(Qb))return[];const d=s,f=typeof i=="object"?i:e.ticks(t),p=[];for(let g=0;g<f.length;g+=1){const y=f[g],v=e(y);if(o(v)){const b=e.tickFormat(t)(y);p.push({value:y,formattedValue:(r==null?void 0:r(y,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:b}))??b,offset:v,labelOffset:d==="middle"?e(f[g-1]??0)-(v+e(f[g-1]??0))/2:0})}}return p}function py(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=n,{instance:c}=Bl(),d=o==="x"?c.isXInside:c.isYInside;return V.useMemo(()=>kae({scale:e,tickNumber:t,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,t,a,i,s,r,d])}function Nae(n=!1){const[e,t]=V.useState(!1);return $n(()=>{n||t(!0)},[n]),V.useEffect(()=>{n&&t(!0)},[n]),e}const Gk=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Lae(n){return n.length}function Bae(n){const e=Gk.segment(n);let t=0;for(const r of e)t+=1;return t}const Vae=Gk?Bae:Lae;function Fae(n){return n*(Math.PI/180)}const Wk=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function jae(n,e){return n.slice(0,e)}function Uae(n,e){const t=Wk.segment(n);let r="",i=0;for(const a of t)if(r+=a.segment,i+=1,i>=e)break;return r}const Hae=Wk?Uae:jae,y3="…";function Yk(n,e){const{width:t,height:r,measureText:i}=e,a=Fae(e.angle),s=i(n),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=t&&c<=r}function qk(n,e){if(e(n))return n;let t=n,r=1,i=1/2;const a=Vae(n);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;t=Hae(n,s).trim();const d=e(t+y3);r+=1,d?(c=t,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+y3:""}function zae(n,e,t,r,i){const a=new Map,s=uy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>Yk(g,{width:f,height:t,angle:s,measureText:y=>Z0(y,i)});a.set(d,qk(d.formattedValue.toString(),p))}return a}const v3=5;function $ae(n,e,t=0){const r=Math.min(Math.abs(t)%180,Math.abs(Math.abs(t)%180-180)%180);if(r<v3)return n;if(r>90-v3)return e;const i=yd(r),a=Math.atan2(e,n);return i<a?n/Math.cos(i):e/Math.sin(i)}function Gae(n,{tickLabelStyle:e,tickLabelInterval:t,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=$k({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof t=="function")return new Set(n.filter((f,p)=>t(f.value,p)));let c=0;const d=i?-1:1;return new Set(n.filter((f,p)=>{const{offset:g,labelOffset:y}=f,v=g+y;if(p>0&&d*v<d*(c+r)||!s(v))return!1;const{width:b,height:A}=o(f),E=$ae(b,A,e==null?void 0:e.angle),T=v-d*E/2;return p>0&&d*T<d*(c+r)?!1:(c=v+d*E/2,!0)}))}function Xk(n){return It("MuiChartsAxis",n)}const Gg=Dt("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),Kk=Me("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${Gg.tickLabel}`]:H({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${Gg.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${Gg.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Gg.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),Wae=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionX",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return mt(i,Xk,e)},Tw=3,Yae=4,Qk=Me(Kk,{name:"MuiChartsXAxis",slot:"Root"})({}),qae={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Zk(n){const e=uy(n);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function Jk(n){const e=uy(n);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function e6(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const Xae=["scale","tickNumber","reverse"],t6=n=>{const{xAxis:e,xAxisIds:t}=Io(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a,reverse:s}=r,o=Ne(r,Xae),c=vt({props:H({},o,n),name:"MuiChartsXAxis"}),d=H({},qae,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:y,slotProps:v}=d,b=Yc(),A=ya(),E=Wae(d),T=f==="bottom"?1:-1,C=(y==null?void 0:y.axisLine)??"line",I=(y==null?void 0:y.axisTick)??"line",O=(y==null?void 0:y.axisTickLabel)??lm,N=(y==null?void 0:y.axisLabel)??lm,M=Zk((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),R=Jk((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),D=At({elementType:O,externalSlotProps:v==null?void 0:v.axisTickLabel,additionalProps:{style:H({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?e6(M):M,dominantBaseline:R},p)},className:E.tickLabel,ownerState:{}}),B=At({elementType:N,externalSlotProps:v==null?void 0:v.axisLabel,additionalProps:{style:H({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),L=i.domain(),P=$a(i),F=P&&L.length===0||!P&&L.some(Qb)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:T,skipAxisRendering:F,classes:E,Line:C,Tick:I,TickLabel:O,Label:N,axisTickLabelProps:D,axisLabelProps:B,reverse:s,isRtl:A}};function Kae(n){const{xScale:e,defaultizedProps:t,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:y,isRtl:v}=t6(n),b=Nae(),{position:A,disableLine:E,disableTicks:T,label:C,tickSize:I,valueFormatter:O,slotProps:N,tickInterval:M,tickLabelInterval:R,tickPlacement:D,tickLabelPlacement:B,tickLabelMinGap:L,sx:P,offset:F,height:q}=t,X=xa(),{left:G,top:Y,width:Q,height:Z}=X,{instance:fe}=Bl(),ge=Kb(),we=T?4:I,Ae=py({scale:e,tickNumber:r,valueFormatter:O,tickInterval:M,tickPlacement:D,tickLabelPlacement:B,direction:"x"}),Pe=Gae(Ae,{tickLabelStyle:p.style,tickLabelInterval:R,tickLabelMinGap:L,reverse:y,isMounted:b,isXInside:fe.isXInside});if(a)return null;const Re=C?Z0(C,g.style).height:0,He={x:G+Q/2,y:i*q},Ue=Math.max(0,q-(C?Re+Yae:0)-we-Tw),Qe=ge?zae(Pe,X,Ue,v,p.style):new Map(Array.from(Pe).map(ae=>[ae,ae.formattedValue]));return x.jsxs(Qk,{transform:`translate(0, ${A==="bottom"?Y+Z+F:Y-F})`,className:s.root,sx:P,children:[!E&&x.jsx(o,H({x1:G,x2:G+Q,className:s.line},N==null?void 0:N.axisLine)),Ae.map((ae,me)=>{const{offset:he,labelOffset:te}=ae,Le=te??0,ve=i*(we+Tw),je=fe.isXInside(he),De=Qe.get(ae),Ce=Pe.has(ae);return x.jsxs("g",{transform:`translate(${he}, 0)`,className:s.tickContainer,children:[!T&&je&&x.jsx(c,H({y2:i*we,className:s.tick},N==null?void 0:N.axisTick)),De!==void 0&&Ce&&x.jsx(d,H({x:Le,y:ve},p,{text:De}))]},me)}),C&&x.jsx("g",{className:s.label,children:x.jsx(f,H({},He,g,{text:C}))})]})}const Ch={start:0,extremities:0,end:1,middle:.5,tick:0};function Qae(n){const{scale:e,tickInterval:t,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return V.useMemo(()=>{const s=e.domain(),o=typeof t=="function"&&s.filter(t)||typeof t=="object"&&t||s;if(e.bandwidth()>0){const c=x3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return x3(o,a,i,r,e)},[e,t,a,i,r])}function x3(n,e,t,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<n.length;d+=1){const f=n[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const v=$a(i)?i(f)-(i.step()-i.bandwidth())/2+Ch[t]*i.step():i(f),b=i.step()*o*(Ch[r]-Ch[t]);a.push({value:p,formattedValue:`${p}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:b}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const E of A.values())a[E].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const v=i.step()*o*(Ch[r]-Ch[t]);g.labelOffset=v}}return a}const w3={tickSize:6},Zae=(n,e,t)=>{const r=n[e]??{},i=t??w3.tickSize,a=i*e*2+i;return H({},w3,r,{tickSize:r.tickSize??a})};function Jae(n){const{xScale:e,defaultizedProps:t,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=t6(n);if(!$a(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:y,disableTicks:v,label:b,tickSize:A,valueFormatter:E,slotProps:T,tickInterval:C,tickPlacement:I,tickLabelPlacement:O,sx:N,offset:M,height:R}=t,D=t.groups,B=xa(),{left:L,top:P,width:F,height:q}=B,{instance:X}=Bl(),G={x:L+F/2,y:r*R},Y=Qae({scale:e,tickInterval:C,tickPlacement:I,tickLabelPlacement:O,groups:D});return i?null:x.jsxs(Qk,{transform:`translate(0, ${g==="bottom"?P+q+M:P-M})`,className:a.root,sx:N,children:[!y&&x.jsx(s,H({x1:L,x2:L+F,className:a.line},T==null?void 0:T.axisLine)),Y.map((Q,Z)=>{const{offset:fe,labelOffset:ge}=Q,we=ge??0,Ae=X.isXInside(fe),Pe=Q.formattedValue,Re=Q.ignoreTick??!1,He=Q.groupIndex??0,Ue=Zae(D,He,A),Qe=r*Ue.tickSize,ae=r*(Ue.tickSize+Tw);return x.jsxs("g",{transform:`translate(${fe}, 0)`,className:a.tickContainer,"data-group-index":He,children:[!v&&!Re&&Ae&&x.jsx(o,H({y2:Qe,className:a.tick},T==null?void 0:T.axisTick)),Pe!==void 0&&x.jsx(c,H({x:we,y:ae},f,{text:Pe}))]},Z)}),b&&x.jsx("g",{className:a.label,children:x.jsx(d,H({},G,p,{text:b}))})]})}function ese(n){const{xAxis:e,xAxisIds:t}=Io(),r=e[n.axisId??t[0]];return"groups"in r&&Array.isArray(r.groups)?x.jsx(Jae,H({},n)):x.jsx(Kae,H({},n))}function tse(n,e,t,r,i){const a=new Map,s=uy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>Yk(g,{width:t,height:f,angle:s,measureText:y=>Z0(y,i)});a.set(d,qk(d.formattedValue.toString(),p))}return a}const nse=["scale","tickNumber"],rse=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionY",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return mt(i,Xk,e)},_3=2,ise=2,ase=Me(Kk,{name:"MuiChartsYAxis",slot:"Root"})({}),sse={disableLine:!1,disableTicks:!1,tickSize:6};function ose(n){const{yAxisIds:e,yAxis:t}=Vl(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a}=r,s=Ne(r,nse),o=vt({props:H({},s,n),name:"MuiChartsYAxis"}),c=H({},sse,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:y,tickLabelStyle:v,tickSize:b,valueFormatter:A,slots:E,slotProps:T,tickPlacement:C,tickLabelPlacement:I,tickInterval:O,tickLabelInterval:N,sx:M,offset:R,width:D}=c,B=Yc(),L=ya(),P=Kb(),F=rse(c),{instance:q}=Bl(),X=xa(),{left:G,top:Y,width:Q,height:Z}=X,fe=p?4:b,ge=py({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:C,tickLabelPlacement:I,tickInterval:O,direction:"y"}),we=d==="right"?1:-1,Ae=typeof(v==null?void 0:v.fontSize)=="number"?v.fontSize:12,Pe=(E==null?void 0:E.axisLine)??"line",Re=(E==null?void 0:E.axisTick)??"line",He=(E==null?void 0:E.axisTickLabel)??lm,Ue=(E==null?void 0:E.axisLabel)??lm,Qe=Zk((d==="right"?-90:90)-((v==null?void 0:v.angle)??0)),ae=Jk((d==="right"?-90:90)-((v==null?void 0:v.angle)??0)),me=At({elementType:He,externalSlotProps:T==null?void 0:T.axisTickLabel,additionalProps:{style:H({},B.typography.caption,{fontSize:Ae,textAnchor:L?e6(Qe):Qe,dominantBaseline:ae},v)},className:F.tickLabel,ownerState:{}}),he=At({elementType:Ue,externalSlotProps:T==null?void 0:T.axisLabel,additionalProps:{style:H({},B.typography.body1,{lineHeight:1,fontSize:14,angle:we*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},y)},ownerState:{}}),te=At({elementType:Pe,externalSlotProps:T==null?void 0:T.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Le=i.domain(),ve=$a(i);if(ve&&Le.length===0||!ve&&Le.some(Qb)||d==="none")return null;const je={x:we*D,y:Y+Z/2},De=Math.max(0,D-(g?Z0(g,he.style).height+ise:0)-fe-_3),Ce=P?tse(ge,X,De,L,me.style):new Map(Array.from(ge).map(We=>[We,We.formattedValue]));return x.jsxs(ase,{transform:`translate(${d==="right"?G+Q+R:G-R}, 0)`,className:F.root,sx:M,children:[!f&&x.jsx(Pe,H({y1:Y,y2:Y+Z,className:F.line},te)),ge.map((We,$e)=>{const{offset:Ie,labelOffset:Oe,value:ut}=We,xt=we*(fe+_3),hn=Oe,In=typeof N=="function"&&!(N!=null&&N(ut,$e)),tt=q.isYInside(Ie),rt=Ce.get(We);return tt?x.jsxs("g",{transform:`translate(0, ${Ie})`,className:F.tickContainer,children:[!p&&x.jsx(Re,H({x2:we*fe,className:F.tick},T==null?void 0:T.axisTick)),rt!==void 0&&!In&&x.jsx(He,H({x:xt,y:hn,text:rt},me))]},$e):null}),g&&P&&x.jsx("g",{className:F.label,children:x.jsx(Ue,H({},je,he,{text:g}))})]})}function lse(n){const{slots:e,slotProps:t}=n,{xAxisIds:r,xAxis:i}=Io(),{yAxisIds:a,yAxis:s}=Vl();return x.jsxs(V.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:x.jsx(ese,{slots:e,slotProps:t,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:x.jsx(ose,{slots:e,slotProps:t,axisId:o},o))]})}function cse(n){return It("MuiChartsGrid",n)}const b3=Dt("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),use=Me("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,e)=>[{[`&.${b3.verticalLine}`]:e.verticalLine},{[`&.${b3.horizontalLine}`]:e.horizontalLine},e.root]})({}),n6=Me("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function dse(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=py({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return x.jsx(V.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return x.jsx(n6,{y1:t,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function fse(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=py({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return x.jsx(V.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return x.jsx(n6,{y1:f,y2:f,x1:t,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const hse=["vertical","horizontal"],pse=({classes:n})=>mt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},cse,n);function gse(n){const e=vt({props:n,name:"MuiChartsGrid"}),t=xa(),{vertical:r,horizontal:i}=e,a=Ne(e,hse),{xAxis:s,xAxisIds:o}=Io(),{yAxis:c,yAxisIds:d}=Vl(),f=pse(e),p=c[d[0]],g=s[o[0]];return x.jsxs(use,H({},a,{className:f.root,children:[r&&x.jsx(dse,{axis:g,start:t.top,end:t.height+t.top,classes:f}),i&&x.jsx(fse,{axis:p,start:t.left,end:t.width+t.left,classes:f})]}))}function mse(n){return It("MuiChartsTooltip",n)}const ud=Dt("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),gy=n=>mt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},mse,n);function yse(){var N,M,R;const n=yn(),e=dt(n,ak),t=dt(n,To),r=dy(),{xAxis:i,xAxisIds:a}=Io(),{yAxis:s,yAxisIds:o}=Vl(),{zAxis:c,zAxisIds:d}=Wb(),{rotationAxis:f,rotationAxisIds:p}=Rk(),{radiusAxis:g,radiusAxisIds:y}=kie(),v=r.xAxisId??a[0],b=r.yAxisId??o[0],A=r.zAxisId??d[0],E=r.rotationAxisId??p[0],T=r.radiusAxisId??y[0];if(!e)return null;const C=(N=r[e.type])==null?void 0:N.series[e.seriesId];if(!C)return null;const I=((R=(M=t[C.type]).colorProcessor)==null?void 0:R.call(M,C,v&&i[v],b&&s[b],A&&c[A]))??(()=>""),O={};return v!==void 0&&(O.x=i[v]),b!==void 0&&(O.y=s[b]),E!==void 0&&(O.rotation=f[E]),T!==void 0&&(O.radius=g[T]),t[C.type].tooltipGetter({series:C,axesConfig:O,getColor:I,identifier:e})}const Cw=Me("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,e)=>e.paper})(({theme:n})=>{var e;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(e=(n.vars||n).shape)==null?void 0:e.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),Iw=Me("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${ud.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),Dw=Me("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),vd=Me(se,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${ud.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${ud.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${ud.valueCell}, &.${ud.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${ud.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function vse(n){return It("MuiChartsLabelMark",n)}const ed=Dt("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),xse=n=>{const{type:e}=n;return mt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},vse,n.classes)},r6=(n,e,t)=>V.forwardRef(function(i,a){var g;const s=vt({props:i,name:n}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=H3(o,s),d=Yc(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=V.forwardRef(t);return x.jsx(p,H({},c,{classes:f,ref:a}))}),wse=["type","color","className","classes"],_se=Me("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${ed.line}`]:{width:16,height:"unset",alignItems:"center",[`.${ed.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${ed.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${ed.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${ed.mask} > *`]:{height:"100%",width:"100%"},[`& .${ed.mask}`]:{height:"100%",width:"100%"}})),cm=r6("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:xse},function(e,t){const{type:r,color:i,className:a,classes:s}=e,o=Ne(e,wse),c=r;return x.jsx(_se,H({className:jt(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:t},o,{children:x.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?x.jsx(c,{className:s==null?void 0:s.fill,color:i}):x.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?x.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):x.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function bse(n){const{classes:e,sx:t}=n,r=yse(),i=gy(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return x.jsx(Cw,{sx:t,className:i.paper,children:x.jsxs(Iw,{className:i.table,children:[x.jsxs(se,{component:"caption",children:[x.jsx("div",{className:i.markContainer,children:x.jsx(cm,{type:p,color:f,className:i.mark})}),d]}),x.jsx("tbody",{children:r.values.map(({formattedValue:g,label:y})=>x.jsxs(Dw,{className:i.row,children:[x.jsx(vd,{className:jt(i.labelCell,i.cell),component:"th",children:y}),x.jsx(vd,{className:jt(i.valueCell,i.cell),component:"td",children:g})]},y))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return x.jsx(Cw,{sx:t,className:i.paper,children:x.jsx(Iw,{className:i.table,children:x.jsx("tbody",{children:x.jsxs(Dw,{className:i.row,children:[x.jsxs(vd,{className:jt(i.labelCell,i.cell),component:"th",children:[x.jsx("div",{className:i.markContainer,children:x.jsx(cm,{type:c,color:a,className:i.mark})}),s]}),x.jsx(vd,{className:jt(i.valueCell,i.cell),component:"td",children:o})]})})})})}function Ase(n){const e=yn(),t=dt(e,To);return V.useMemo(()=>{const i={};return Object.keys(t).forEach(a=>{i[a]=t[a].colorProcessor}),i},[t])}function Ese(){const n=Yb(),[e,t]=V.useState(null);return V.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&t(null)},a=s=>{t({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),e}function Sse(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const Tse="@media (pointer: fine)",Cse=()=>hm(Tse,{defaultMatches:!0}),i6=(n,e)=>e,a6=(n,e)=>e;function s6(n,e,t){return Array.isArray(t)?t.map(r=>h3(e.axis[r],n)):h3(e.axis[t],n)}const o6=Ge([Y0,q0,Die],(n,e,t)=>n===null||e===null?null:Rie(t)(n,e)),Ise=Ge([o6,iu,i6],(n,e,t=e.axisIds[0])=>n===null?null:s6(n,e,t)),l6=Ge([o6,iu,a6],(n,e,t=e.axisIds)=>n===null?null:s6(n,e,t));Ge([iu,Ise,i6],(n,e,t=n.axisIds[0])=>{var i;if(e===null||e===-1||n.axisIds.length===0)return null;const r=(i=n.axis[t])==null?void 0:i.data;return r?r[e]:null});Ge([iu,l6,a6],(n,e,t=n.axisIds)=>e===null?null:t.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const c6=Ge([l6,iu],(n,e)=>n===null?[]:e.axisIds.map((t,r)=>({axisId:t,dataIndex:n[r]})).filter(({axisId:t,dataIndex:r})=>e.axis[t].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:Rd}});Ge([],()=>[]);const Dse=Ge([c6],n=>n.length>0);function l2(n,e,t){var s;const r=((s=n.data)==null?void 0:s[e])??null,a=(n.valueFormatter??(o=>n.scaleType==="utc"?Sse(o):o.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:t,axisId:n.id,mainAxis:n,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Rse(n={}){const{multipleAxes:e,directions:t}=n,r=Oie(),i=Pie(),a=Nie(),s=yn(),o=dt(s,ck),c=dt(s,uk),d=dt(s,c6),f=dy(),{xAxis:p}=Io(),{yAxis:g}=Vl(),{zAxis:y,zAxisIds:v}=Wb(),{rotationAxis:b}=Rk(),A=Ase();if(o.length===0&&c.length===0&&d.length===0)return null;const E=[];return(t===void 0||t.includes("x"))&&o.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(l2(p[T],C,"x"))}),(t===void 0||t.includes("y"))&&c.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(l2(g[T],C,"y"))}),(t===void 0||t.includes("rotation"))&&d.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(l2(b[T],C,"rotation"))}),Object.keys(f).filter(jb).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(I=>{var D;const O=C.series[I],N=O.xAxisId??r.id,M=O.yAxisId??i.id,R=E.findIndex(({axisDirection:B,axisId:L})=>B==="x"&&L===N||B==="y"&&L===M);if(R>=0){const B="zAxisId"in O?O.zAxisId:v[0],{dataIndex:L}=E[R],P=((D=A[T])==null?void 0:D.call(A,O,p[N],g[M],B?y[B]:void 0)(L))??"",F=O.data[L]??null,q=O.valueFormatter(F,{dataIndex:L}),X=Gi(O.label,"tooltip")??null;E[R].seriesItems.push({seriesId:I,color:P,value:F,formattedValue:q,formattedLabel:X,markType:O.labelMarkType})}}):[]}),Object.keys(f).filter(Gb).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(I=>{var R;const O=C.series[I],N=O.rotationAxisId??(a==null?void 0:a.id),M=E.findIndex(({axisDirection:D,axisId:B})=>D==="rotation"&&B===N);if(M>=0){const{dataIndex:D}=E[M],B=((R=A[T])==null?void 0:R.call(A,O)(D))??"",L=O.data[D]??null,P=O.valueFormatter(L,{dataIndex:D}),F=Gi(O.label,"tooltip")??null;E[M].seriesItems.push({seriesId:I,color:B,value:L,formattedValue:P,formattedLabel:F,markType:O.labelMarkType})}}):[]}),e?E:E.length===0?E[0]:null}function Mse(n){return Rse(H({},n,{multipleAxes:!0}))}function Ose(n){const e=gy(n.classes),t=Mse();return t===null?null:x.jsx(Cw,{sx:n.sx,className:e.paper,children:t.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>x.jsxs(Iw,{className:e.table,children:[a!=null&&!i.hideTooltip&&x.jsx(se,{component:"caption",children:s}),x.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:x.jsxs(Dw,{className:e.row,children:[x.jsxs(vd,{className:jt(e.labelCell,e.cell),component:"th",children:[x.jsx("div",{className:e.markContainer,children:x.jsx(cm,{type:g,color:d,className:e.mark})}),p||null]}),x.jsx(vd,{className:jt(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function Pse(n){let e,t;const r=()=>{t=null,n(...e)};function i(...a){e=a,t||(t=requestAnimationFrame(r))}return i.clear=()=>{t&&(cancelAnimationFrame(t),t=null)},i}function kse(){const n=yn(),e=dt(n,Dk),t=dt(n,eu);return e!==void 0?"polar":t!==void 0?"cartesian":"none"}const Nse=["trigger","classes","children"],Lse=()=>!1,Bse=Me(L3,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function Vse(n){const e=vt({props:n,name:"MuiChartsTooltipContainer"}),{trigger:t="axis",classes:r,children:i}=e,a=Ne(e,Nse),s=Yb(),o=gy(r),c=Ese(),d=Cse(),f=V.useRef(null),p=U3(()=>({x:0,y:0})),g=kse(),y=yn(),v=dt(y,t==="axis"?g==="polar"&&Dse||g==="cartesian"&&ire||Lse:ere);V.useEffect(()=>{const C=s.current;if(C===null)return()=>{};const I=Pse(()=>{var N;return(N=f.current)==null?void 0:N.update()}),O=N=>{p.current={x:N.clientX,y:N.clientY},I()};return C.addEventListener("pointerdown",O),C.addEventListener("pointermove",O),()=>{C.removeEventListener("pointerdown",O),C.removeEventListener("pointermove",O),I.clear()}},[s,p]);const b=V.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,E=(c==null?void 0:c.pointerType)==="touch"||!d,T=V.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,E]);return t==="none"?null:x.jsx(yN,{children:v&&x.jsx(Bse,H({className:o==null?void 0:o.root,open:v,placement:A?"right-start":"top",popperRef:f,anchorEl:b,modifiers:T},a,{children:i}))})}function u6(n){const{classes:e,trigger:t="axis"}=n,r=gy(e);return x.jsx(Vse,H({},n,{classes:e,children:t==="axis"?x.jsx(Ose,{classes:r}):x.jsx(bse,{classes:r})}))}function Fse(n){return It("MuiChartsLabel",n)}Dt("MuiChartsLabel",["root"]);const jse=n=>mt({root:["root"]},Fse,n.classes),Use=["children","className","classes"],Hse=r6("MuiChartsLabel",{classesResolver:jse},function(e,t){const{children:r,className:i,classes:a}=e,s=Ne(e,Use);return x.jsx("span",H({className:jt(a==null?void 0:a.root,i),ref:t},s,{children:r}))}),zse=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function $se(n){return It("MuiChartsLegend",n)}const Gse=n=>{const{classes:e,direction:t}=n;return mt({root:["root",t],item:["item"],mark:["mark"],label:["label"],series:["series"]},$se,e)},A3=Dt("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Wse=["slots","slotProps"],Yse=["ownerState"],qse=(n,e,t,r)=>{function i(a,s){var O;const o=vt({props:a,name:n}),c=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},d=H3(c,o),f=d,{slots:p,slotProps:g}=f,y=Ne(f,Wse),v=Yc(),b=(O=t.classesResolver)==null?void 0:O.call(t,d,v),A=(p==null?void 0:p[e])??r,E=t.propagateSlots&&!(p!=null&&p[e]),T=At({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},y,{classes:b},E&&{slots:p,slotProps:g}),ownerState:{}}),C=Ne(T,Yse),I=H({},C);for(const N of t.omitProps??[])delete I[N];return x.jsx(A,H({},I,{ref:s}))}return V.forwardRef(i)},Xse=["direction","onItemClick","className","classes"],Kse=Me("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${A3.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${A3.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),d6=qse("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Gse},V.forwardRef(function(e,t){const r=Zie(),{onItemClick:i,className:a,classes:s}=e,o=Ne(e,Xse);if(r.items.length===0)return null;const c=i?"button":"div";return x.jsx(Kse,H({className:jt(s==null?void 0:s.root,a),ref:t},o,{ownerState:e,children:r.items.map((d,f)=>x.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:x.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,zse(d),f):void 0,children:[x.jsx(cm,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),x.jsx(Hse,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function Qse(n){return It("MuiChartsAxisHighlight",n)}Dt("MuiChartsAxisHighlight",["root"]);const um=Me("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function Zse(n){const{type:e,classes:t}=n,{left:r,width:i}=xa(),a=yn(),s=dt(a,cre),o=dt(a,Yi);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=im(p),y=e==="band"&&d!==null&&$a(p);return x.jsxs(V.Fragment,{children:[y&&p(d)!==void 0&&x.jsx(um,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&x.jsx(um,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Jse(n){const{type:e,classes:t}=n,{top:r,height:i}=xa(),a=yn(),s=dt(a,lre),o=dt(a,Wi);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=im(p),y=e==="band"&&d!==null&&$a(p);return x.jsxs(V.Fragment,{children:[y&&p(d)!==void 0&&x.jsx(um,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&x.jsx(um,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const eoe=()=>mt({root:["root"]},Qse);function toe(n){const{x:e,y:t}=n,r=eoe();return x.jsxs(V.Fragment,{children:[e&&x.jsx(Jse,{type:e,classes:r}),t&&x.jsx(Zse,{type:t,classes:r})]})}function noe(n){return It("MuiBarElement",n)}const roe=Dt("MuiBarElement",["root","highlighted","faded","series"]),ioe=n=>{const{classes:e,id:t,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${t}`,r&&"highlighted",i&&"faded"]};return mt(a,noe,e)};function aoe(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const f6=(n,e)=>{const{instance:t}=Bl(),r=V.useRef(!1),i=V.useCallback(()=>{r.current=!0,t.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[t,n.type,n.seriesId,n.dataIndex]),a=V.useCallback(()=>{r.current=!1,t.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.clearHighlight()},[t,n.type,n.seriesId,n.dataIndex]);return V.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:aoe}},soe=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function ooe(n){const{ownerState:e}=n,t=Ne(n,soe),r=hae(n);return x.jsx("rect",H({},t,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const loe=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function coe(n){const{id:e,dataIndex:t,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y,yOrigin:v,width:b,height:A}=n,E=Ne(n,loe),T=f6({type:"bar",seriesId:e,dataIndex:t}),{isFaded:C,isHighlighted:I}=Nk({seriesId:e,dataIndex:t}),O={id:e,dataIndex:t,classes:r,color:i,isFaded:C,isHighlighted:I},N=ioe(O),M=(a==null?void 0:a.bar)??ooe,R=At({elementType:M,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:E,additionalProps:H({},T,{id:e,dataIndex:t,color:i,x:p,xOrigin:g,y,yOrigin:v,width:b,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:N.root,ownerState:O});return x.jsx(M,H({},R))}function uoe(n,e){const t=Kt(n.x,e.x),r=Kt(n.y,e.y),i=Kt(n.width,e.width),a=Kt(n.height,e.height),s=Kt(n.borderRadius,e.borderRadius);return o=>({x:t(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function doe(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return Q0({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:uoe,transformProps:t=>({d:hoe(n.hasNegative,n.hasPositive,n.layout,t.x,t.y,t.width,t.height,n.xOrigin,n.yOrigin,t.borderRadius)}),applyProps(t,{d:r}){r&&t.setAttribute("d",r)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function foe(n){const{maskId:e,x:t,y:r,width:i,height:a,skipAnimation:s}=n,{ref:o,d:c}=doe({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:t,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:x.jsx("clipPath",{id:e,children:x.jsx("path",{ref:o,d:c})})}function hoe(n,e,t,r,i,a,s,o,c,d){if(t==="vertical"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(n)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(t==="horizontal"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(n)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function poe(n){return It("MuiBarLabel",n)}const c2=Dt("MuiBarLabel",["root","highlighted","faded","animate"]),goe=n=>{const{classes:e,seriesId:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return mt(s,poe,e)},moe=n=>{const{barLabel:e,value:t,dataIndex:r,seriesId:i,height:a,width:s}=n;return e==="value"?t?t==null?void 0:t.toString():null:e({seriesId:i,dataIndex:r,value:t},{bar:{height:a,width:s}})},yoe=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],voe=Me("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,e)=>[{[`&.${c2.faded}`]:e.faded},{[`&.${c2.highlighted}`]:e.highlighted},e.root]})(({theme:n})=>{var e,t,r,i;return H({},(e=n==null?void 0:n.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(t=n.vars||n)==null?void 0:t.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${c2.faded}`]:{opacity:.3}})});function xoe(n){const e=vt({props:n,name:"MuiBarLabel"}),t=Ne(e,yoe),r=gae(e);return x.jsx(voe,H({},t,r))}const woe=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],_oe=["ownerState"];function boe(n){const{seriesId:e,classes:t,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,value:v,skipAnimation:b,layout:A}=n,E=Ne(n,woe),{isFaded:T,isHighlighted:C}=Nk({seriesId:e,dataIndex:i}),I={seriesId:e,classes:t,color:r,isFaded:T,isHighlighted:C,dataIndex:i,skipAnimation:b,layout:A},O=goe(I),N=(s==null?void 0:s.barLabel)??xoe,M=At({elementType:N,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},E,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,className:O.root}),ownerState:I}),{ownerState:R}=M,D=Ne(M,_oe);if(!a)return null;const B=moe({barLabel:a,value:v,dataIndex:i,seriesId:e,height:y,width:g});return B?x.jsx(N,H({},D,R,{children:B})):null}function Aoe(n){return It("MuiBar",n)}Dt("MuiBar",["root","series","seriesLabels"]);const h6=n=>mt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Aoe,n),Eoe=["bars","skipAnimation"];function Soe(n){const{bars:e,skipAnimation:t}=n,r=Ne(n,Eoe),i=h6();return x.jsx(V.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>x.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:y,width:v,height:b,layout:A})=>x.jsx(boe,H({seriesId:a,dataIndex:p,value:y,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:v,height:b,skipAnimation:t??!1,layout:A??"vertical"},r),p))},a))})}function p6(n){const e=yn(),t=dt(e,mJ);return n||t}function Toe(){const n=yn();return dt(n,nk)}const u2=(n,e)=>{const t=`${n}-axis`,r=`${n}Axis`;return e===(n==="x"?db:fb)?`The first \`${r}\``:`The ${t} with id "${e}"`};function Coe(n,e,t,r,i,a,s){const o=i[r],c=s[a],d=n?o:c,f=n?c:o,p=n?r:a,g=n?a:r,y=n?"x":"y",v=n?"y":"x";if(!J1(d))throw new Error(`MUI X Charts: ${u2(y,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${u2(y,p)} should have data property.`);if(J1(f)||Fb(f))throw new Error(`MUI X Charts: ${u2(v,g)} should be a continuous type to display the bar series of id "${e}".`)}function Ioe(n,e,t){const r=jie()??{series:{},stackingGroups:[]},i=Io().xAxisIds[0],a=Vl().yAxisIds[0],s=$b(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const y=n.left,v=n.left+n.width,b=n.top,A=n.top+n.height;return p.map(E=>{const T=o[E].xAxisId??i,C=o[E].yAxisId??a,I=e[T],O=t[C],N=o[E].layout==="vertical";Coe(N,E,o[E],T,e,C,t);const M=N?I:O,R=I.scale,D=O.scale,B=Tk(o[E],e[T],t[C]),L=M.scale.bandwidth(),{barWidth:P,offset:F}=Doe({bandWidth:L,numberOfGroups:c.length,gapRatio:M.barGapRatio}),q=g*(P+F),{stackedData:X,data:G,layout:Y,minBarSize:Q}=o[E],Z=M.data.map((fe,ge)=>{if(G[ge]==null)return null;const Ae=X[ge].map(he=>N?D(he):R(he)),Pe=Math.round(Math.min(...Ae)),Re=Math.round(Math.max(...Ae)),He=o[E].stack,{barSize:Ue,startCoordinate:Qe}=Roe(N,Pe,Re,G[ge],Q),ae={seriesId:E,dataIndex:ge,layout:Y,x:N?R(fe)+q:Qe,y:N?Qe:D(fe)+q,xOrigin:R(0)??0,yOrigin:D(0)??0,height:N?Ue:P,width:N?P:Ue,color:B(ge),value:G[ge],maskId:`${s}_${He||E}_${g}_${ge}`};if(ae.x>v||ae.x+ae.width<y||ae.y>A||ae.y+ae.height<b)return null;d[ae.maskId]||(d[ae.maskId]={id:ae.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ae.layout,xOrigin:R(0),yOrigin:D(0),x:0,y:0});const me=d[ae.maskId];return me.width=ae.layout==="vertical"?ae.width:me.width+ae.width,me.height=ae.layout==="vertical"?me.height+ae.height:ae.height,me.x=Math.min(me.x===0?1/0:me.x,ae.x),me.y=Math.min(me.y===0?1/0:me.y,ae.y),me.hasNegative=me.hasNegative||(ae.value??0)<0,me.hasPositive=me.hasPositive||(ae.value??0)>0,ae}).filter(fe=>fe!==null);return{seriesId:E,data:Z}})}),masksData:Object.values(d)}}function Doe({bandWidth:n,numberOfGroups:e,gapRatio:t}){if(t===0)return{barWidth:n/e,offset:0};const r=n/(e+(e-1)*t),i=t*r;return{barWidth:r,offset:i}}function Roe(n,e,t,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=t-e<i,s=a?i:t-e,o=n&&r>=0,c=!n&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:t-s}:{barSize:s,startCoordinate:e}}const Moe=["skipAnimation","onItemClick","borderRadius","barLabel"],Ooe=Me("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${roe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function Poe(n){const{skipAnimation:e,onItemClick:t,borderRadius:r,barLabel:i}=n,a=Ne(n,Moe),s=Toe(),o=p6(s||e),{xAxis:c}=Io(),{yAxis:d}=Vl(),{completedData:f,masksData:p}=Ioe(xa(),c,d),g=!r||r<=0,y=h6();return x.jsxs(Ooe,{className:y.root,children:[!g&&p.map(({id:v,x:b,y:A,xOrigin:E,yOrigin:T,width:C,height:I,hasPositive:O,hasNegative:N,layout:M})=>x.jsx(foe,{maskId:v,borderRadius:r,hasNegative:N,hasPositive:O,layout:M,x:b,y:A,xOrigin:E,yOrigin:T,width:C,height:I,skipAnimation:o??!1},v)),f.map(({seriesId:v,data:b})=>x.jsx("g",{"data-series":v,className:y.series,children:b.map(({dataIndex:A,color:E,maskId:T,layout:C,x:I,xOrigin:O,y:N,yOrigin:M,width:R,height:D})=>{const B=x.jsx(coe,H({id:v,dataIndex:A,color:E,skipAnimation:o??!1,layout:C??"vertical",x:I,xOrigin:O,y:N,yOrigin:M,width:R,height:D},a,{onClick:t&&(L=>{t(L,{type:"bar",seriesId:v,dataIndex:A})})}),A);return g?B:x.jsx("g",{clipPath:`url(#${T})`,children:B},A)})},v)),i&&x.jsx(Soe,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const koe=["message"],Noe=Me("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Loe(n){const{message:e}=n,t=Ne(n,koe),{top:r,left:i,height:a,width:s}=xa(),{localeText:o}=Uk();return x.jsx(Noe,H({x:i+s/2,y:r+a/2},t,{children:e??o.loading}))}const Boe=["message"],Voe=Me("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Foe(n){const{message:e}=n,t=Ne(n,Boe),{top:r,left:i,height:a,width:s}=xa(),{localeText:o}=Uk();return x.jsx(Voe,H({x:i+s/2,y:r+a/2},t,{children:e??o.noData}))}function joe(){const n=dy();return Object.values(n).every(e=>{if(!e)return!0;const{series:t,seriesOrder:r}=e;return r.every(i=>t[i].data.length===0)})}function g6(n){var t,r,i,a;const e=joe();if(n.loading){const s=((t=n.slots)==null?void 0:t.loadingOverlay)??Loe;return x.jsx(s,H({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??Foe;return x.jsx(s,H({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const Uoe=[X0,df,uf,ru],Hoe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],zoe=n=>{var ae,me,he,te,Le;const{xAxis:e,yAxis:t,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:y,slotProps:v,skipAnimation:b,loading:A,layout:E,onItemClick:T,highlightedItem:C,onHighlightChange:I,borderRadius:O,barLabel:N,className:M}=n,R=Ne(n,Hoe),B=`${_0()}-clip-path`,L=E==="horizontal"||E===void 0&&r.some(ve=>ve.layout==="horizontal"),P=V.useMemo(()=>[{id:db,scaleType:"band",data:Array.from({length:Math.max(...r.map(ve=>(ve.data??c??[]).length))},(ve,je)=>je)}],[c,r]),F=V.useMemo(()=>[{id:fb,scaleType:"band",data:Array.from({length:Math.max(...r.map(ve=>(ve.data??c??[]).length))},(ve,je)=>je)}],[c,r]),q=V.useMemo(()=>r.map(ve=>H({type:"bar"},ve,{layout:L?"horizontal":"vertical"})),[L,r]),X=L?void 0:P,G=V.useMemo(()=>e?L?e:e.map(ve=>H({scaleType:"band"},ve)):X,[X,L,e]),Y=L?F:void 0,Q=V.useMemo(()=>t?L?t.map(ve=>H({scaleType:"band"},ve)):t:Y,[Y,L,t]),Z=H({},R,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:G,yAxis:Q,highlightedItem:C,onHighlightChange:I,disableAxisListener:((ae=v==null?void 0:v.tooltip)==null?void 0:ae.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:M,skipAnimation:b,plugins:Uoe}),fe={onItemClick:T,slots:y,slotProps:v,borderRadius:O,barLabel:N},ge={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},we={clipPath:`url(#${B})`},Ae={id:B},Pe={slots:y,slotProps:v,loading:A},Re={slots:y,slotProps:v},He=H({},L?{y:"band"}:{x:"band"},f),Ue={slots:y,slotProps:v};return{chartsWrapperProps:{sx:d,legendPosition:(he=(me=n.slotProps)==null?void 0:me.legend)==null?void 0:he.position,legendDirection:(Le=(te=n.slotProps)==null?void 0:te.legend)==null?void 0:Le.direction},chartContainerProps:Z,barPlotProps:fe,gridProps:ge,clipPathProps:Ae,clipPathGroupProps:we,overlayProps:Pe,chartsAxisProps:Re,axisHighlightProps:He,legendProps:Ue,children:g}},$oe={baseButton:st,baseIconButton:Qr},Goe={},Woe=H({},$oe,Goe),Yoe=V.createContext(null);function qoe(n){const{slots:e,slotProps:t={},defaultSlots:r,children:i}=n,a=V.useMemo(()=>({slots:H({},r,e),slotProps:t}),[r,e,t]);return x.jsx(Yoe.Provider,{value:a,children:i})}const co=11102230246251565e-32,ii=134217729,Xoe=(3+8*co)*co;function d2(n,e,t,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let y=0;if(p<n&&g<t)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[y++]=o);p<n&&g<t;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[y++]=o);for(;p<n;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[y++]=o);for(;g<t;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[y++]=o);return(a!==0||y===0)&&(i[y++]=a),y}function Koe(n,e){let t=e[0];for(let r=1;r<n;r++)t+=e[r];return t}function J0(n){return new Float64Array(n)}const Qoe=(3+16*co)*co,Zoe=(2+12*co)*co,Joe=(9+64*co)*co*co,td=J0(4),E3=J0(8),S3=J0(12),T3=J0(16),wi=J0(4);function ele(n,e,t,r,i,a,s){let o,c,d,f,p,g,y,v,b,A,E,T,C,I,O,N,M,R;const D=n-i,B=t-i,L=e-a,P=r-a;I=D*P,g=ii*D,y=g-(g-D),v=D-y,g=ii*P,b=g-(g-P),A=P-b,O=v*A-(I-y*b-v*b-y*A),N=L*B,g=ii*L,y=g-(g-L),v=L-y,g=ii*B,b=g-(g-B),A=B-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,td[0]=O-(E+p)+(p-M),T=I+E,p=T-I,C=I-(T-p)+(E-p),E=C-N,p=C-E,td[1]=C-(E+p)+(p-N),R=T+E,p=R-T,td[2]=T-(R-p)+(E-p),td[3]=R;let F=Koe(4,td),q=Zoe*s;if(F>=q||-F>=q||(p=n-D,o=n-(D+p)+(p-i),p=t-B,d=t-(B+p)+(p-i),p=e-L,c=e-(L+p)+(p-a),p=r-P,f=r-(P+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=Joe*s+Xoe*Math.abs(F),F+=D*f+P*o-(L*d+B*c),F>=q||-F>=q))return F;I=o*P,g=ii*o,y=g-(g-o),v=o-y,g=ii*P,b=g-(g-P),A=P-b,O=v*A-(I-y*b-v*b-y*A),N=c*B,g=ii*c,y=g-(g-c),v=c-y,g=ii*B,b=g-(g-B),A=B-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,wi[0]=O-(E+p)+(p-M),T=I+E,p=T-I,C=I-(T-p)+(E-p),E=C-N,p=C-E,wi[1]=C-(E+p)+(p-N),R=T+E,p=R-T,wi[2]=T-(R-p)+(E-p),wi[3]=R;const X=d2(4,td,4,wi,E3);I=D*f,g=ii*D,y=g-(g-D),v=D-y,g=ii*f,b=g-(g-f),A=f-b,O=v*A-(I-y*b-v*b-y*A),N=L*d,g=ii*L,y=g-(g-L),v=L-y,g=ii*d,b=g-(g-d),A=d-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,wi[0]=O-(E+p)+(p-M),T=I+E,p=T-I,C=I-(T-p)+(E-p),E=C-N,p=C-E,wi[1]=C-(E+p)+(p-N),R=T+E,p=R-T,wi[2]=T-(R-p)+(E-p),wi[3]=R;const G=d2(X,E3,4,wi,S3);I=o*f,g=ii*o,y=g-(g-o),v=o-y,g=ii*f,b=g-(g-f),A=f-b,O=v*A-(I-y*b-v*b-y*A),N=c*d,g=ii*c,y=g-(g-c),v=c-y,g=ii*d,b=g-(g-d),A=d-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,wi[0]=O-(E+p)+(p-M),T=I+E,p=T-I,C=I-(T-p)+(E-p),E=C-N,p=C-E,wi[1]=C-(E+p)+(p-N),R=T+E,p=R-T,wi[2]=T-(R-p)+(E-p),wi[3]=R;const Y=d2(G,S3,4,wi,T3);return T3[Y-1]}function Wg(n,e,t,r,i,a){const s=(e-a)*(t-i),o=(n-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=Qoe*d?c:-ele(n,e,t,r,i,a,d)}const C3=Math.pow(2,-52),Yg=new Uint32Array(512);class dm{static from(e,t=ale,r=sle){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=t(o),a[2*s+1]=r(o)}return new dm(a)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let D=0;D<s;D++){const B=e[2*D],L=e[2*D+1];B<o&&(o=B),L<c&&(c=L),B>d&&(d=B),L>f&&(f=L),this._ids[D]=D}const p=(o+d)/2,g=(c+f)/2;let y,v,b;for(let D=0,B=1/0;D<s;D++){const L=f2(p,g,e[2*D],e[2*D+1]);L<B&&(y=D,B=L)}const A=e[2*y],E=e[2*y+1];for(let D=0,B=1/0;D<s;D++){if(D===y)continue;const L=f2(A,E,e[2*D],e[2*D+1]);L<B&&L>0&&(v=D,B=L)}let T=e[2*v],C=e[2*v+1],I=1/0;for(let D=0;D<s;D++){if(D===y||D===v)continue;const B=rle(A,E,T,C,e[2*D],e[2*D+1]);B<I&&(b=D,I=B)}let O=e[2*b],N=e[2*b+1];if(I===1/0){for(let L=0;L<s;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];xd(this._ids,this._dists,0,s-1);const D=new Uint32Array(s);let B=0;for(let L=0,P=-1/0;L<s;L++){const F=this._ids[L],q=this._dists[F];q>P&&(D[B++]=F,P=q)}this.hull=D.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Wg(A,E,T,C,O,N)<0){const D=v,B=T,L=C;v=b,T=O,C=N,b=D,O=B,N=L}const M=ile(A,E,T,C,O,N);this._cx=M.x,this._cy=M.y;for(let D=0;D<s;D++)this._dists[D]=f2(e[2*D],e[2*D+1],M.x,M.y);xd(this._ids,this._dists,0,s-1),this._hullStart=y;let R=3;r[y]=t[b]=v,r[v]=t[y]=b,r[b]=t[v]=y,i[y]=0,i[v]=1,i[b]=2,a.fill(-1),a[this._hashKey(A,E)]=y,a[this._hashKey(T,C)]=v,a[this._hashKey(O,N)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let D=0,B,L;D<this._ids.length;D++){const P=this._ids[D],F=e[2*P],q=e[2*P+1];if(D>0&&Math.abs(F-B)<=C3&&Math.abs(q-L)<=C3||(B=F,L=q,P===y||P===v||P===b))continue;let X=0;for(let fe=0,ge=this._hashKey(F,q);fe<this._hashSize&&(X=a[(ge+fe)%this._hashSize],!(X!==-1&&X!==r[X]));fe++);X=t[X];let G=X,Y;for(;Y=r[G],Wg(F,q,e[2*G],e[2*G+1],e[2*Y],e[2*Y+1])>=0;)if(G=Y,G===X){G=-1;break}if(G===-1)continue;let Q=this._addTriangle(G,P,r[G],-1,-1,i[G]);i[P]=this._legalize(Q+2),i[G]=Q,R++;let Z=r[G];for(;Y=r[Z],Wg(F,q,e[2*Z],e[2*Z+1],e[2*Y],e[2*Y+1])<0;)Q=this._addTriangle(Z,P,Y,i[P],-1,i[Z]),i[P]=this._legalize(Q+2),r[Z]=Z,R--,Z=Y;if(G===X)for(;Y=t[G],Wg(F,q,e[2*Y],e[2*Y+1],e[2*G],e[2*G+1])<0;)Q=this._addTriangle(Y,P,G,-1,i[G],i[Y]),this._legalize(Q+2),i[Y]=Q,r[G]=G,R--,G=Y;this._hullStart=t[P]=G,r[G]=t[Z]=P,r[P]=Z,a[this._hashKey(F,q)]=P,a[this._hashKey(e[2*G],e[2*G+1])]=G}this.hull=new Uint32Array(R);for(let D=0,B=this._hullStart;D<R;D++)this.hull[D]=B,B=r[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(tle(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=Yg[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=t[s],y=t[e],v=t[f],b=t[p];if(nle(i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1],i[2*b],i[2*b+1])){t[e]=b,t[o]=g;const E=r[p];if(E===-1){let C=this._hullStart;do{if(this._hullTri[C]===p){this._hullTri[C]=e;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(e,E),this._link(o,r[s]),this._link(s,p);const T=d+(o+1)%3;a<Yg.length&&(Yg[a++]=T)}else{if(a===0)break;e=Yg[--a]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function tle(n,e){const t=n/(Math.abs(n)+Math.abs(e));return(e>0?3-t:1+t)/4}function f2(n,e,t,r){const i=n-t,a=e-r;return i*i+a*a}function nle(n,e,t,r,i,a,s,o){const c=n-s,d=e-o,f=t-s,p=r-o,g=i-s,y=a-o,v=c*c+d*d,b=f*f+p*p,A=g*g+y*y;return c*(p*A-b*y)-d*(f*A-b*g)+v*(f*y-p*g)<0}function rle(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=(d*f-o*p)*g,v=(s*p-c*f)*g;return y*y+v*v}function ile(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=n+(d*f-o*p)*g,v=e+(s*p-c*f)*g;return{x:y,y:v}}function xd(n,e,t,r){if(r-t<=20)for(let i=t+1;i<=r;i++){const a=n[i],s=e[a];let o=i-1;for(;o>=t&&e[n[o]]>s;)n[o+1]=n[o--];n[o+1]=a}else{const i=t+r>>1;let a=t+1,s=r;Ih(n,i,a),e[n[t]]>e[n[r]]&&Ih(n,t,r),e[n[a]]>e[n[r]]&&Ih(n,a,r),e[n[t]]>e[n[a]]&&Ih(n,t,a);const o=n[a],c=e[o];for(;;){do a++;while(e[n[a]]<c);do s--;while(e[n[s]]>c);if(s<a)break;Ih(n,a,s)}n[t+1]=n[s],n[s]=o,r-a+1>=s-t?(xd(n,e,a,r),xd(n,e,t,s-1)):(xd(n,e,t,s-1),xd(n,e,a,r))}}function Ih(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ale(n){return n[0]}function sle(n){return n[1]}const I3=1e-6;class Oc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e=+e,t=+t,r=+r;const i=e+r,a=t;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>I3||Math.abs(this._y1-a)>I3)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Rw{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class ole{constructor(e,[t,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b=0,A=0,E=r.length,T,C;b<E;b+=3,A+=2){const I=r[b]*2,O=r[b+1]*2,N=r[b+2]*2,M=e[I],R=e[I+1],D=e[O],B=e[O+1],L=e[N],P=e[N+1],F=D-M,q=B-R,X=L-M,G=P-R,Y=(F*G-q*X)*2;if(Math.abs(Y)<1e-9){if(a===void 0){a=s=0;for(const Z of t)a+=e[Z*2],s+=e[Z*2+1];a/=t.length,s/=t.length}const Q=1e9*Math.sign((a-M)*G-(s-R)*X);T=(M+L)/2-Q*G,C=(R+P)/2+Q*X}else{const Q=1/Y,Z=F*F+q*q,fe=X*X+G*G;T=M+(G*Z-q*fe)*Q,C=R+(F*fe-X*Z)*Q}o[A]=T,o[A+1]=C}let c=t[t.length-1],d,f=c*4,p,g=e[2*c],y,v=e[2*c+1];i.fill(0);for(let b=0;b<t.length;++b)c=t[b],d=f,p=g,y=v,f=c*4,g=e[2*c],v=e[2*c+1],i[d+2]=i[f]=y-v,i[d+3]=i[f+1]=g-p}render(e){const t=e==null?e=new Oc:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const y=Math.floor(f/3)*2,v=Math.floor(g/3)*2,b=s[y],A=s[y+1],E=s[v],T=s[v+1];this._renderSegment(b,A,E,T,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],y=s[p+1],v=c*4,b=this._project(g,y,o[v+2],o[v+3]);b&&this._renderSegment(g,y,b[0],b[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Oc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=t==null?t=new Oc:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&t.lineTo(i[s],i[s+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new Rw;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,a){let s;const o=this._regioncode(e,t),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,t),a.lineTo(r,i)):(s=this._clipSegment(e,t,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,t,r){return t=+t,t!==t||(r=+r,r!==r)?!1:this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=t.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(t[a]===i[o]&&t[a+1]===i[o+1]&&t[(a+2)%s]===i[(o+c-2)%c]&&t[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(t[d*2],t[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const r=t.length;let i=null,a,s,o=t[r-2],c=t[r-1],d,f=this._regioncode(o,c),p,g=0;for(let y=0;y<r;y+=2)if(a=o,s=c,o=t[y],c=t[y+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let v,b,A,E,T;if(d===0){if((v=this._clipSegment(a,s,o,c,d,f))===null)continue;[b,A,E,T]=v}else{if((v=this._clipSegment(o,c,a,s,f,d))===null)continue;[E,T,b,A]=v,p=g,g=this._edgecode(b,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(b,A):i=[b,A]}p=g,g=this._edgecode(E,T),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(E,T):i=[E,T]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,r,i,a,s){const o=a<s;for(o&&([e,t,r,i,a,s]=[r,i,e,t,s,a]);;){if(a===0&&s===0)return o?[r,i,e,t]:[e,t,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-t)/(i-t),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-t)/(i-t),d=this.ymin):f&2?(d=t+(i-t)*(this.xmax-e)/(r-e),c=this.xmax):(d=t+(i-t)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,t=d,a=this._regioncode(e,t)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,a,s){let o=Array.from(t),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,r,i,a){for(;t!==r;){let s,o;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,t,r,i){let a=1/0,s,o,c;if(i<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=t+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=t+(a=s)*i)}return[o,c]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}const lle=2*Math.PI,nd=Math.pow;function cle(n){return n[0]}function ule(n){return n[1]}function dle(n){const{triangles:e,coords:t}=n;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((t[s]-t[i])*(t[a+1]-t[i+1])-(t[a]-t[i])*(t[s+1]-t[i+1])>1e-10)return!1}return!0}function fle(n,e,t){return[n+Math.sin(n+e)*t,e+Math.cos(n-e)*t]}class Zb{static from(e,t=cle,r=ule,i){return new Zb("length"in e?hle(e,t,r,i):Float64Array.from(ple(e,t,r,i)))}constructor(e){this._delaunator=new dm(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&dle(e)){this.collinear=Int32Array.from({length:t.length/2},(g,y)=>y).sort((g,y)=>t[2*g]-t[2*y]||t[2*g+1]-t[2*y+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[t[2*c],t[2*c+1],t[2*d],t[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,y=t.length/2;g<y;++g){const v=fle(t[2*g],t[2*g+1],p);t[2*g]=v[0],t[2*g+1]=v[1]}this._delaunator=new dm(t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new ole(this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=t[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,t,r=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const i=r;let a;for(;(a=this._step(r,e,t))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,t,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=nd(t-d[e*2],2)+nd(r-d[e*2+1],2);const g=i[e];let y=g;do{let v=c[y];const b=nd(t-d[v*2],2)+nd(r-d[v*2+1],2);if(b<p&&(p=b,f=v),y=y%3===2?y-2:y+1,c[y]!==e)break;if(y=o[y],y===-1){if(y=a[(s[e]+1)%a.length],y!==v&&nd(t-d[y*2],2)+nd(r-d[y*2+1],2)<p)return y;break}}while(y!==g);return f}render(e){const t=e==null?e=new Oc:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const r=e==null?e=new Oc:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+t,c),e.arc(o,c,t,0,lle)}return r&&r.value()}renderHull(e){const t=e==null?e=new Oc:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Rw;return this.renderHull(e),e.value()}renderTriangle(e,t){const r=t==null?t=new Oc:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return t.moveTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.lineTo(i[c],i[c+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Rw;return this.renderTriangle(e,t),t.value()}}function hle(n,e,t,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=n[s];a[s*2]=e.call(r,o,s,n),a[s*2+1]=t.call(r,o,s,n)}return a}function*ple(n,e,t,r){let i=0;for(const a of n)yield e.call(r,a,i,n),yield t.call(r,a,i,n),++i}const my=({svgRef:n,params:e,store:t,instance:r})=>{var N;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=dt(t,So),{axis:c,axisIds:d}=dt(t,Wi),{axis:f,axisIds:p}=dt(t,Yi),g=dt(t,nk),{series:y,seriesOrder:v}=((N=dt(t,za))==null?void 0:N.scatter)??{},b=V.useRef({}),A=V.useRef(void 0),E=V.useRef(void 0),T=d[0],C=p[0];$n(()=>{t.update(M=>M.voronoi.isVoronoiEnabled===!i?M:H({},M,{voronoi:{isVoronoiEnabled:!i}}))},[t,i]),$n(()=>{if(g||v===void 0||y===void 0||i)return;b.current={};let M=[];v.forEach(R=>{const{data:D,xAxisId:B,yAxisId:L}=y[R],P=c[B??T].scale,F=f[L??C].scale,q=im(P),X=im(F),G=[],Y=[];for(let Q=0;Q<D.length;Q+=1){const{x:Z,y:fe}=D[Q],ge=q(Z),we=X(fe);r.isPointInside(ge,we)&&(G.push(ge),G.push(we),Y.push(Q))}b.current[R]={seriesId:R,seriesIndexes:Y,startIndex:M.length,endIndex:M.length+G.length},M=M.concat(G)}),A.current=new Zb(M),E.current=void 0},[g,T,C,y,v,c,f,o,r,i]),V.useEffect(()=>{if(n.current===null||i)return;const M=n.current;function R(Y){const Q=xw(M,Y);if(!r.isPointInside(Q.x,Q.y))return E.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(Q.x,Q.y,E.current);if(Z===void 0)return"no-point-found";E.current=Z;const fe=Object.values(b.current).find(Ae=>2*Z>=Ae.startIndex&&2*Z<Ae.endIndex);if(fe===void 0)return"no-point-found";const ge=(2*Z-b.current[fe.seriesId].startIndex)/2,we=b.current[fe.seriesId].seriesIndexes[ge];if(a!==void 0){const Ae=A.current.points[2*Z],Pe=A.current.points[2*Z+1];if((Ae-Q.x)**2+(Pe-Q.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:fe.seriesId,dataIndex:we}}const D=r.addInteractionListener("moveEnd",Y=>{var Q,Z;Y.detail.activeGestures.pan||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),B=r.addInteractionListener("panEnd",Y=>{var Q,Z;Y.detail.activeGestures.move||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),L=r.addInteractionListener("quickPressEnd",Y=>{var Q,Z;!Y.detail.activeGestures.move&&!Y.detail.activeGestures.pan&&((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),P=Y=>{var ge,we,Ae,Pe,Re,He;const Q=R(Y.detail.srcEvent);if(Q==="outside-chart"){(ge=r.cleanInteraction)==null||ge.call(r),(we=r.clearHighlight)==null||we.call(r);return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){(Ae=r.removeItemInteraction)==null||Ae.call(r),(Pe=r.clearHighlight)==null||Pe.call(r);return}const{seriesId:Z,dataIndex:fe}=Q;(Re=r.setItemInteraction)==null||Re.call(r,{type:"scatter",seriesId:Z,dataIndex:fe}),(He=r.setHighlight)==null||He.call(r,{seriesId:Z,dataIndex:fe})},F=r.addInteractionListener("tap",Y=>{const Q=R(Y.detail.srcEvent);if(typeof Q!="string"&&s){const{seriesId:Z,dataIndex:fe}=Q;s(Y.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:fe})}}),q=r.addInteractionListener("move",P),X=r.addInteractionListener("pan",P),G=r.addInteractionListener("quickPress",P);return()=>{F.cleanup(),q.cleanup(),D.cleanup(),X.cleanup(),B.cleanup(),G.cleanup(),L.cleanup()}},[n,f,c,a,s,i,o,r]);const I=Ve(()=>{t.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!0})}))}),O=Ve(()=>{t.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:I,disableVoronoi:O}}};my.getDefaultizedParams=({params:n})=>H({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(e=>e.type==="scatter")});my.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});my.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const m6=[X0,df,uf,ru,my],gle=["children","localeText","plugins","seriesConfig","slots","slotProps"],mle=n=>{const e=vt({props:n,name:"MuiChartDataProvider"}),{children:t,localeText:r,plugins:i=m6,seriesConfig:a,slots:s,slotProps:o}=e,c=Ne(e,gle),d=Yc(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:t,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function y6(n){const{children:e,localeText:t,chartProviderProps:r,slots:i,slotProps:a}=mle(n);return x.jsx(wie,H({},r,{children:x.jsx(Sae,{localeText:t,children:x.jsx(qoe,{slots:i,slotProps:a,defaultSlots:Woe,children:e})})}))}function D3(n){const{isReversed:e,gradientId:t,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:x.jsx("linearGradient",{id:t,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:x.jsxs(V.Fragment,{children:[x.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),x.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const yle=10;function R3(n){const{gradientUnits:e,isReversed:t,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=n,d=[c.min??0,c.max??100],f=d.map(s).filter(v=>v!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Kt(d[0],d[1]):Tb(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/yle),y=`${d[0]}-${d[1]}-`;return x.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${t?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(v,b)=>{const A=p(b/g);if(A===void 0)return null;const E=s(A);if(E===void 0)return null;const T=t?1-E/i:E/i,C=o(A);return C===null?null:x.jsx("stop",{offset:T,stopColor:C,stopOpacity:1},y+b)})})}const vle=10,xle=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function h2(n){const{isReversed:e,gradientId:t,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Kt(a[0],a[1]):Tb(a[0],a[1]),o=vle,c=`${a[0]}-${a[1]}-`;return x.jsx("linearGradient",H({id:t},xle(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const y=r(g);return y===null?null:x.jsx("stop",{offset:p,stopColor:y,stopOpacity:1},c+f)})}))}function wle(){const{top:n,height:e,bottom:t,left:r,width:i,right:a}=xa(),s=n+e+t,o=r+i+a,c=Jie(),d=eae(),{xAxis:f,xAxisIds:p}=Io(),{yAxis:g,yAxisIds:y}=Vl(),{zAxis:v,zAxisIds:b}=Wb(),A=y.filter(C=>g[C].colorMap!==void 0),E=p.filter(C=>f[C].colorMap!==void 0),T=b.filter(C=>v[C].colorMap!==void 0);return A.length===0&&E.length===0&&T.length===0?null:x.jsxs("defs",{children:[A.map(C=>{const I=c(C),O=d(C),{colorMap:N,scale:M,colorScale:R,reverse:D}=g[C];return(N==null?void 0:N.type)==="piecewise"?x.jsx(D3,{isReversed:!D,scale:M,colorMap:N,size:s,gradientId:I,direction:"y"},I):(N==null?void 0:N.type)==="continuous"?x.jsxs(V.Fragment,{children:[x.jsx(R3,{isReversed:!D,scale:M,colorScale:R,colorMap:N,size:s,gradientId:I,direction:"y"}),x.jsx(h2,{isReversed:D,colorScale:R,colorMap:N,gradientId:O})]},I):null}),E.map(C=>{const I=c(C),O=d(C),{colorMap:N,scale:M,reverse:R,colorScale:D}=f[C];return(N==null?void 0:N.type)==="piecewise"?x.jsx(D3,{isReversed:R,scale:M,colorMap:N,size:o,gradientId:I,direction:"x"},I):(N==null?void 0:N.type)==="continuous"?x.jsxs(V.Fragment,{children:[x.jsx(R3,{isReversed:R,scale:M,colorScale:D,colorMap:N,size:o,gradientId:I,direction:"x"}),x.jsx(h2,{isReversed:R,colorScale:D,colorMap:N,gradientId:O})]},I):null}),T.map(C=>{const I=d(C),{colorMap:O,colorScale:N}=v[C];return(O==null?void 0:O.type)==="continuous"?x.jsx(h2,{colorScale:N,colorMap:O,gradientId:I},I):null})]})}const _le=["children","className","title","desc"],ble=Me("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),v6=V.forwardRef(function(e,t){const r=yn(),{width:i,height:a}=dt(r,OJ),{width:s,height:o}=dt(r,hP),c=Yb(),d=Jr(c,t),f=vt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:y,desc:v}=f,b=Ne(f,_le),A=a>0&&i>0;return x.jsxs(ble,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},b,{ref:d,children:[y&&x.jsx("title",{children:y}),v&&x.jsx("desc",{children:v}),x.jsx(wle,{}),A&&p]}))}),Ale=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],x6=(n,e)=>{const t=n,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:v,voronoiMaxRadius:b,onItemClick:A,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,sx:I,title:O,xAxis:N,yAxis:M,zAxis:R,rotationAxis:D,radiusAxis:B,skipAnimation:L,seriesConfig:P,plugins:F,localeText:q,slots:X,slotProps:G,experimentalFeatures:Y}=t,Q=Ne(t,Ale),Z=H({title:O,desc:f,sx:I,ref:e},Q);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:v,voronoiMaxRadius:b,onItemClick:A,xAxis:N,yAxis:M,zAxis:R,rotationAxis:D,radiusAxis:B,skipAnimation:L,width:r,height:i,localeText:q,seriesConfig:P,experimentalFeatures:Y,plugins:F??m6,slots:X,slotProps:G},chartsSurfaceProps:Z,children:s}},Ele=(n,e)=>n==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",Sle=(n,e)=>{if(n==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},Tle=Me("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>va(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:Ele(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:Sle(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function w6(n){const{children:e,sx:t,extendVertically:r}=n,i=wae(),a=yn(),{height:s}=dt(a,hP);return x.jsx(Tle,{ref:i,ownerState:n,sx:t,extendVertically:r??s===void 0,children:e})}const p2=V.forwardRef(function(e,t){var C,I,O,N;const r=vt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:y,children:v}=zoe(r),{chartDataProviderProps:b,chartsSurfaceProps:A}=x6(a,t),E=((C=r.slots)==null?void 0:C.tooltip)??u6,T=(I=r.slots)==null?void 0:I.toolbar;return x.jsx(y6,H({},b,{children:x.jsxs(w6,H({},i,{children:[r.showToolbar&&T?x.jsx(T,H({},(O=r.slotProps)==null?void 0:O.toolbar)):null,!r.hideLegend&&x.jsx(d6,H({},y)),x.jsxs(v6,H({},A,{children:[x.jsx(gse,H({},o)),x.jsxs("g",H({},d,{children:[x.jsx(Poe,H({},s)),x.jsx(g6,H({},f)),x.jsx(toe,H({},g))]})),x.jsx(lse,H({},p)),x.jsx(Tae,H({},c)),v]})),!r.loading&&x.jsx(E,H({},(N=r.slotProps)==null?void 0:N.tooltip))]}))}))}),Cle=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function Ile(n){return It("MuiPieArc",n)}Dt("MuiPieArc",["root","highlighted","faded","series"]);const Dle=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${t}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return mt(s,Ile,e)},Rle=Me("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,e)=>e.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${qb}ms`,transitionTimingFunction:Lk})),Mle=V.forwardRef(function(e,t){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:v,paddingAngle:b,skipAnimation:A}=e,E=Ne(e,Cle),T={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},C=Dle(T),I=f6({type:"pie",seriesId:s,dataIndex:a}),O=yae({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:v,paddingAngle:b,skipAnimation:A,ref:t});return x.jsx(Rle,H({onClick:d,cursor:d?"pointer":"unset",ownerState:T,className:C.root,fill:T.color,opacity:T.isFaded?.3:1,filter:T.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":T.isHighlighted||void 0,"data-faded":T.isFaded||void 0},E,I,O))});function _6(n){const{id:e,data:t,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=n,{isFaded:f,isHighlighted:p}=Kie();return V.useMemo(()=>t.map((y,v)=>{const b={seriesId:e,dataIndex:v},A=p(b),E=!A&&f(b),T=H({additionalRadius:0},E&&r||A&&i||{}),C=Math.max(0,yd(T.paddingAngle??a)),I=Math.max(0,T.innerRadius??s),O=Math.max(0,T.outerRadius??c+T.additionalRadius),N=T.cornerRadius??d,M=T.arcLabelRadius??o??(I+O)/2;return H({},y,T,{dataIndex:v,isFaded:E,isHighlighted:A,paddingAngle:C,innerRadius:I,outerRadius:O,cornerRadius:N,arcLabelRadius:M})}),[d,s,c,a,o,t,r,i,f,p,e])}const Ole=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function Ple(n){const{slots:e,slotProps:t,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=n,y=Ne(n,Ole),v=_6({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const b=(e==null?void 0:e.pieArc)??Mle;return x.jsx("g",H({},y,{children:v.map((A,E)=>x.jsx(b,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:E,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(T=>{p(T,{type:"pie",seriesId:o,dataIndex:E},A)})},t==null?void 0:t.pieArc),A.dataIndex))}))}const kle=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function Nle(n){return It("MuiPieArcLabel",n)}const Lle=Dt("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),Ble=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return mt(s,Nle,e)},Vle=Me("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:Lk,[`&.${Lle.animate}`]:{animationDuration:`${qb}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),Fle=V.forwardRef(function(e,t){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:y,skipAnimation:v}=e,b=Ne(e,kle),E=Ble({id:r,classes:i,isFaded:y,isHighlighted:g,skipAnimation:v}),T=xae({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:v,ref:t});return x.jsx(Vle,H({className:E.root},b,T,{children:p}))}),jle=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],Ule=180/Math.PI;function Hle(n,e,t){var i;if(!n||(t.endAngle-t.startAngle)*Ule<e)return null;switch(n){case"label":return Gi(t.label,"arc");case"value":return(i=t.value)==null?void 0:i.toString();case"formattedValue":return t.formattedValue;default:return n(H({},t,{label:Gi(t.label,"arc")}))}}function zle(n){const{arcLabel:e,arcLabelMinAngle:t=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:y,slots:v}=n,b=Ne(n,jle),A=_6({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const E=(v==null?void 0:v.pieArcLabel)??Fle;return x.jsx("g",H({},b,{children:A.map(T=>x.jsx(E,H({startAngle:T.startAngle,endAngle:T.endAngle,paddingAngle:T.paddingAngle,innerRadius:T.innerRadius,outerRadius:T.outerRadius,arcLabelRadius:T.arcLabelRadius,cornerRadius:T.cornerRadius,id:c,color:T.color,isFaded:T.isFaded,isHighlighted:T.isHighlighted,formattedArcLabel:Hle(e,t,T),skipAnimation:g??!1},y==null?void 0:y.pieArcLabel),T.id??T.dataIndex))}))}function Tc(n,e){if(typeof n=="number")return n;if(n==="100%")return e;if(n.endsWith("%")){const t=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(t))return t*e/100}if(n.endsWith("px")){const t=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function M3(n,e){const{height:t,width:r}=e,{cx:i,cy:a}=n,s=Math.min(r,t)/2,o=Tc(i??"50%",r),c=Tc(a??"50%",t);return{cx:o,cy:c,availableRadius:s}}function $le(n){return It("MuiPieChart",n)}Dt("MuiPieChart",["root","series","seriesLabels"]);const Gle=n=>mt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},$le,n);function Wle(n){const{skipAnimation:e,slots:t,slotProps:r,onItemClick:i}=n,a=Vie(),{left:s,top:o,width:c,height:d}=xa(),f=p6(e),p=Gle();if(a===void 0)return null;const{series:g,seriesOrder:y}=a;return x.jsxs("g",{children:[y.map(v=>{const{innerRadius:b,outerRadius:A,cornerRadius:E,paddingAngle:T,data:C,cx:I,cy:O,highlighted:N,faded:M}=g[v],{cx:R,cy:D,availableRadius:B}=M3({cx:I,cy:O},{width:c,height:d}),L=Tc(A??B,B),P=Tc(b??0,B);return x.jsx("g",{className:p.series,transform:`translate(${s+R}, ${o+D})`,"data-series":v,children:x.jsx(Ple,{innerRadius:P,outerRadius:L,cornerRadius:E,paddingAngle:T,id:v,data:C,skipAnimation:f,highlighted:N,faded:M,onItemClick:i,slots:t,slotProps:r})},v)}),y.map(v=>{const{innerRadius:b,outerRadius:A,arcLabelRadius:E,cornerRadius:T,paddingAngle:C,arcLabel:I,arcLabelMinAngle:O,data:N,cx:M,cy:R}=g[v],{cx:D,cy:B,availableRadius:L}=M3({cx:M,cy:R},{width:c,height:d}),P=Tc(A??L,L),F=Tc(b??0,L),q=E===void 0?(P+F)/2:Tc(E,L);return x.jsx("g",{className:p.seriesLabels,transform:`translate(${s+D}, ${o+B})`,"data-series":v,children:x.jsx(zle,{innerRadius:F,outerRadius:P??L,arcLabelRadius:q,cornerRadius:T,paddingAngle:C,id:v,data:N,skipAnimation:f,arcLabel:I,arcLabelMinAngle:O,slots:t,slotProps:r})},v)})]})}const Yle=[uf,ru],qle=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],O3=V.forwardRef(function(e,t){var L,P,F,q,X,G,Y,Q;const r=vt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:y,slotProps:v,onItemClick:b,loading:A,highlightedItem:E,onHighlightChange:T,className:C,showToolbar:I}=r,O=Ne(r,qle),N=pP(o,aee),{chartDataProviderProps:M,chartsSurfaceProps:R}=x6(H({},O,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:N,colors:c,highlightedItem:E,onHighlightChange:T,className:C,skipAnimation:f,plugins:Yle}),t),D=(y==null?void 0:y.tooltip)??u6,B=(L=r.slots)==null?void 0:L.toolbar;return x.jsx(y6,H({},M,{children:x.jsxs(w6,{legendPosition:(F=(P=r.slotProps)==null?void 0:P.legend)==null?void 0:F.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[I&&B?x.jsx(B,H({},(G=r.slotProps)==null?void 0:G.toolbar)):null,!p&&x.jsx(d6,{direction:((Q=(Y=r==null?void 0:r.slotProps)==null?void 0:Y.legend)==null?void 0:Q.direction)??"vertical",slots:y,slotProps:v}),x.jsxs(v6,H({},R,{children:[x.jsx(Wle,{slots:y,slotProps:v,onItemClick:b}),x.jsx(g6,{loading:A,slots:y,slotProps:v}),g]})),!A&&x.jsx(D,H({trigger:"item"},v==null?void 0:v.tooltip))]})}))});function Xle(){const{loading:n,error:e,summary:t,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:o,topPublishers:c,statusDistribution:d}=qZ(),f=t&&(t.totalBooks>0||t.finishedBooks>0||t.readingBooks>0||t.tsundokuBooks>0||t.reReadingBooks>0);return x.jsxs(de,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[x.jsx(Fm,{title:"統計",subtitle:"あなたの読書活動を可視化"}),x.jsxs(de,{sx:{p:2},children:[n&&x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[x.jsx(Mw,{size:20}),x.jsx(se,{variant:"body2",children:"読み込み中..."})]}),e&&x.jsx(se,{color:"error",sx:{mb:2},children:e}),!n&&!e&&!f&&x.jsx(Fn,{sx:{mb:2},children:x.jsxs(jn,{sx:{textAlign:"center",py:4},children:[x.jsx(se,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"📚 読書データがありません"}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"本を追加して読書を始めると、ここに統計が表示されます"})]})}),f&&x.jsxs(x.Fragment,{children:[x.jsxs(de,{className:"stats-summary-grid",children:[x.jsx(Fn,{"data-testid":"stats-total-books",className:"stats-summary-card",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",children:"総冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.totalBooks)??"-"})]})}),x.jsx(Fn,{"data-testid":"stats-tsundoku-books",className:"stats-summary-card",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",children:"積読冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.tsundokuBooks)??"-"})]})}),x.jsx(Fn,{"data-testid":"stats-reading-books",className:"stats-summary-card",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",children:"読書中冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.readingBooks)??"-"})]})}),x.jsx(Fn,{"data-testid":"stats-rereading-books",className:"stats-summary-card",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",children:"再読中冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.reReadingBooks)??"-"})]})}),x.jsx(Fn,{"data-testid":"stats-finished-books",className:"stats-summary-card",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",children:"読了冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.finishedBooks)??"-"})]})})]}),!!t&&x.jsx(Fn,{sx:{mb:2},"data-testid":"chart-status-pie",children:x.jsxs(jn,{children:[x.jsx(se,{variant:"h6",sx:{mb:1},children:"ステータス内訳"}),x.jsx(O3,{height:220,series:[{data:[{id:"tsundoku",label:"積読",value:(d==null?void 0:d.tsundoku)??0},{id:"reading",label:"読書中",value:(d==null?void 0:d.reading)??0},{id:"reReading",label:"再読中",value:(d==null?void 0:d.reReading)??0},{id:"finished",label:"読了",value:(d==null?void 0:d.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),x.jsx(Pc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"月別読了冊数（直近12ヶ月）"}),x.jsx(Fn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:x.jsx(jn,{children:x.jsx(p2,{xAxis:[{scaleType:"band",data:(i??[]).map(p=>p.key)}],series:[{data:(i??[]).map(p=>p.count),label:"読了冊数"}],height:260})})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle1",sx:{mb:1},children:"月別追加冊数（直近12ヶ月）"}),x.jsx(Fn,{"data-testid":"chart-monthly-added",children:x.jsx(jn,{children:x.jsx(p2,{xAxis:[{scaleType:"band",data:(a??[]).map(p=>p.key)}],series:[{data:(a??[]).map(p=>p.count),label:"追加冊数",color:"#42a5f5"}],height:220})})})]}),x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle1",sx:{mb:1},children:"月別メモ数（直近12ヶ月）"}),x.jsx(Fn,{"data-testid":"chart-monthly-memos",children:x.jsx(jn,{children:x.jsx(p2,{xAxis:[{scaleType:"band",data:(s??[]).map(p=>p.key)}],series:[{data:(s??[]).map(p=>p.count),label:"メモ数",color:"#9c27b0"}],height:220})})})]})]}),x.jsx(Pc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"タグ使用頻度（上位）"}),!!(r!=null&&r.length)&&x.jsx(Fn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:x.jsx(jn,{children:x.jsx(O3,{height:260,series:[{data:r.slice(0,6).map(p=>({id:p.tag,label:p.tag,value:p.totalCount})),innerRadius:40,paddingAngle:2}]})})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(Fn,{"data-testid":`tag-stat-${p.tag}`,children:x.jsxs(jn,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.tag}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["本: ",p.bookCount," / メモ: ",p.memoCount," / 合計: ",p.totalCount]})]})})},p.tag)),(!r||r.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"タグデータがありません。"})})]}),x.jsx(Pc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"著者トップ"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[((o==null?void 0:o.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(Fn,{"data-testid":`author-top-${p.author}`,children:x.jsxs(jn,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.author}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.author)),(!o||o.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"著者データがありません。"})})]}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"出版社トップ"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(Fn,{"data-testid":`publisher-top-${p.publisher}`,children:x.jsxs(jn,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.publisher}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.publisher)),(!c||c.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"出版社データがありません。"})})]})]})]})]})}function Kle(){const n=G3({onSwipedLeft:()=>alert("左スワイプ!"),onSwipedRight:()=>alert("右スワイプ!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return x.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[x.jsx("h2",{children:"react-swipeable サンプル"}),x.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:"このエリアを左右にスワイプ（またはドラッグ）してみてください"})]})}const Qle=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:t,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=P_(),[c,d]=V.useState(!1),[f,p]=V.useState(!1),[g,y]=V.useState(!1),[v,b]=V.useState(!1);V.useEffect(()=>{t&&!r&&a?y(!0):t&&!r&&d(!0)},[t,r,a]),V.useEffect(()=>{s&&!r&&b(!0)},[s,r]),V.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),y(!1)}catch(N){console.error("Installation failed:",N)}},E=()=>{d(!1),o&&o()},T=()=>{y(!1),o&&o()},C=()=>{p(!1)},I=()=>{b(!1),o&&o()},O=[{icon:x.jsx(vN,{}),title:"高速起動",description:"アプリのように素早く起動"},{icon:x.jsx(xN,{}),title:"オフライン対応",description:"インターネットなしでも利用可能"},{icon:x.jsx(wN,{}),title:"ホーム画面に追加",description:"いつでも簡単にアクセス"}];return x.jsxs(x.Fragment,{children:[x.jsx(id,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:x.jsx(ao,{severity:"info",action:x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[x.jsx(st,{color:"inherit",size:"small",startIcon:x.jsx(c1,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:"インストール"}),x.jsx(Qr,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:x.jsx(wg,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"BookMemoをホーム画面に追加して、より快適にご利用いただけます"})})}),x.jsx(id,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:x.jsx(Fn,{sx:{width:"100%",boxShadow:3},children:x.jsxs(jn,{sx:{p:2},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[x.jsx(se,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをアプリとしてインストール"}),x.jsx(Qr,{size:"small",onClick:T,sx:{mt:-.5},children:x.jsx(wg,{})})]}),x.jsx(se,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"より快適な読書メモ管理体験をお届けします"}),x.jsx(Zh,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:O.map((N,M)=>x.jsx(Cn,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),x.jsxs(de,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[x.jsx(st,{variant:"outlined",size:"small",onClick:T,children:"後で"}),x.jsx(st,{variant:"contained",size:"small",startIcon:x.jsx(c1,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"今すぐインストール"})]})]})})}),x.jsx(id,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:x.jsx(ao,{severity:"warning",icon:x.jsx(_N,{}),action:x.jsx(Qr,{"aria-label":"close",color:"inherit",size:"small",onClick:C,children:x.jsx(wg,{fontSize:"inherit"})}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"オフラインです。一部の機能が制限される場合があります"})})}),x.jsx(id,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:C,children:x.jsx(ao,{severity:"success",icon:x.jsx(bN,{}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"オンラインに復帰しました"})})}),x.jsx(id,{open:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:x.jsx(Fn,{sx:{width:"100%",boxShadow:3},children:x.jsxs(jn,{sx:{p:2},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[x.jsx(se,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをホーム画面に追加"}),x.jsx(Qr,{size:"small",onClick:I,sx:{mt:-.5},children:x.jsx(wg,{})})]}),x.jsx(se,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneでBookMemoをアプリとして使用するには、以下の手順でホーム画面に追加してください："}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. 共有ボタンをタップ"}),x.jsx(se,{variant:"body2",sx:{mb:1,pl:2},children:"Safariの下部にある「共有」ボタン（□↑）をタップします"}),x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. 「ホーム画面に追加」を選択"}),x.jsx(se,{variant:"body2",sx:{mb:1,pl:2},children:"共有メニューから「ホーム画面に追加」を選択します"}),x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. 追加を確認"}),x.jsx(se,{variant:"body2",sx:{pl:2},children:"「追加」をタップしてホーム画面に追加します"})]}),x.jsx(Zh,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:O.map((N,M)=>x.jsx(Cn,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),x.jsxs(de,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[x.jsx(st,{variant:"outlined",size:"small",onClick:I,children:"後で"}),x.jsx(st,{variant:"contained",size:"small",onClick:I,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"手順を確認しました"})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},Zle=()=>{try{return!(typeof Pi>"u"||!Pi.useState||!Pi.useContext||typeof window>"u"||typeof navigator>"u")}catch(n){return console.warn("React context check failed:",n),!1}},Jle=n=>function(t){const[r,i]=Pi.useState(!1),[a,s]=Pi.useState(0),o=20,c=50;return Pi.useEffect(()=>{const d=()=>{if(Zle()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?x.jsx(n,{...t}):x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"読み込み中..."})},io={saveError:(n,e="")=>{try{const t={timestamp:new Date().toISOString(),error:(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error",stack:(n==null?void 0:n.stack)||"",context:e,url:window.location.href,userAgent:navigator.userAgent},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(t),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error("🔴 PERSISTENT ERROR LOG:",t),t}catch(t){console.error("Error saving error log:",t)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},ece=()=>{window.addEventListener("error",n=>{io.saveError(n.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",n=>{io.saveError(n.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{io.getErrors().length>0&&console.log("📋 Error logs available in localStorage: bookmemo_error_logs")})},tce=z3({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}});function rd({children:n}){const{user:e,loading:t}=hr(),r=gm();return V.useEffect(()=>{!t&&!e&&console.warn("🔐 Authentication required for:",r.pathname)},[e,t,r.pathname]),t?(console.log("⏳ Loading authentication state..."),x.jsx("div",{children:"Loading..."})):e?n:(console.warn("🚫 Unauthenticated access attempt, redirecting to login"),x.jsx(W3,{to:"/login"}))}function nce(){const n=b0(),e=gm(),[t,r]=V.useState(0);return V.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):e.pathname.startsWith("/mypage")?r(4):r(0)},[e.pathname]),x.jsxs(EN,{value:t,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[x.jsx(hh,{label:"本一覧",icon:x.jsx(SN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(hh,{label:"本を追加",icon:x.jsx(TN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(hh,{label:"検索・タグ",icon:x.jsx(CN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(hh,{label:"統計",icon:x.jsx(IN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(hh,{label:"マイページ",icon:x.jsx(DN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function rce(){const n=gm(),{user:e}=hr(),{setGlobalError:t}=V.useContext(di),r=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!e;return V.useEffect(()=>{ece()},[]),V.useEffect(()=>{const i=document.getElementById("app-scroll-container");i&&i.scrollTo(0,0)},[n.pathname]),V.useEffect(()=>{const i=c=>{console.error("Global error caught:",c.error),io.saveError(c.error,"AppRoutes Global Error"),c.error&&c.error.message&&c.error.message.includes("404")?t&&t("リソースが見つかりません。ページを再読み込みしてください。"):t&&t("予期しないエラーが発生しました。ページを再読み込みしてください。")},a=c=>{console.error("Unhandled promise rejection:",c.reason),io.saveError(c.reason,"AppRoutes Unhandled Promise Rejection"),c.reason&&c.reason.message&&(c.reason.message.includes("404")||c.reason.message.includes("Failed to fetch")),t&&t("ネットワークエラーが発生しました。接続を確認してください。")},s=c=>{c.target&&c.target.src&&(console.error("Resource loading error:",c.target.src),io.saveError(new Error(`Resource loading failed: ${c.target.src}`),"AppRoutes Resource Error"),(c.target.src.includes("sw.js")||c.target.src.includes("manifest.webmanifest"))&&t&&t("アプリの設定ファイルの読み込みに失敗しました。ページを再読み込みしてください。"))},o=c=>{c.target&&c.target.src&&c.target.src.includes("404")&&(console.error("404 Error detected:",c.target.src),io.saveError(new Error(`404 Error: ${c.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),t&&t("ページが見つかりません。SPAルーティングの問題の可能性があります。ページを再読み込みしてください。"))};return window.addEventListener("error",o,!0),window.addEventListener("error",i),window.addEventListener("unhandledrejection",a),window.addEventListener("error",s,!0),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",a),window.removeEventListener("error",s,!0)}},[t]),x.jsxs(x.Fragment,{children:[x.jsx(de,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:r?0:{xs:"64px",sm:"72px"},background:`
            url('${Ic.PAPER_TEXTURE()}'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:x.jsxs(kN,{children:[x.jsx(Zs,{path:"/login",element:x.jsx(ZF,{})}),x.jsx(Zs,{path:"/signup",element:x.jsx(JF,{})}),x.jsx(Zs,{path:"/",element:x.jsx(rd,{children:x.jsx(sj,{})})}),x.jsx(Zs,{path:"/add",element:x.jsx(rd,{children:x.jsx(Zz,{})})}),x.jsx(Zs,{path:"/book/:id",element:x.jsx(rd,{children:x.jsx(PZ,{})})}),x.jsx(Zs,{path:"/tags",element:x.jsx(rd,{children:x.jsx(GZ,{})})}),x.jsx(Zs,{path:"/stats",element:x.jsx(rd,{children:x.jsx(Xle,{})})}),x.jsx(Zs,{path:"/mypage",element:x.jsx(rd,{children:x.jsx(Kle,{})})}),x.jsx(Zs,{path:"*",element:x.jsx(W3,{to:"/"})})]})}),!r&&x.jsx(nce,{})]})}function ice(){return x.jsx(QF,{children:x.jsx(nj,{children:x.jsx(PN,{children:x.jsxs($3,{theme:tce,children:[x.jsx(AN,{}),x.jsx(ace,{}),x.jsx(rce,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Ic.IS_DEVELOPMENT()&&x.jsx(Qle,{})]})})})})}function ace(){if(Ic.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=P_();return V.useEffect(()=>{e().catch(t=>{console.warn("Service Worker registration failed in PWAProvider:",t),io.saveError(t,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),io.saveError(e,"PWAProvider Hook Error"),null}}const sce=Jle(ice),oce=z3({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});FN.createRoot(document.getElementById("root")).render(x.jsx(V.StrictMode,{children:x.jsx($3,{theme:oce,children:x.jsx(sce,{})})}));

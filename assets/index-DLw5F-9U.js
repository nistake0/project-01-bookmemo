var aN=Object.defineProperty;var sN=(n,e,t)=>e in n?aN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>sN(n,typeof e!="symbol"?e+"":e,t);import{r as N,j as v,B as ie,T as ne,a as wt,b as Ke,C as kn,c as Nn,d as $3,e as mn,P as ga,R as Ci,D as $a,f as Ds,g as Ga,A as za,h as Wa,i as m1,k as Na,l as oN,m as wx,n as y1,S as G3,o as lN,L as Vw,p as jw,q as cN,s as uN,I as di,t as b2,u as Mh,H as dN,F as Si,v as ma,w as ja,M as pn,x as yo,y as fN,z as hN,E as v1,G as Nd,J as vT,K as r0,N as A2,O as E2,Q as pN,U as ld,V as gN,W as mN,_ as H,X as Be,Y as xt,Z as Nl,$ as Rt,a0 as Ot,a1 as _a,a2 as St,a3 as jt,a4 as Pe,a5 as vt,a6 as Ld,a7 as Ue,a8 as qh,a9 as ei,aa as Wn,ab as Rs,ac as W3,ad as yN,ae as Ed,af as Y3,ag as vN,ah as xN,ai as ba,aj as T0,ak as wN,al as _N,am as ho,an as Dc,ao as Qc,ap as x1,aq as q3,ar as bN,as as AN,at as EN,au as X3,av as xT,aw as SN,ax as Bc,ay as ae,az as K3,aA as Q3,aB as TN,aC as CN,aD as wT,aE as IN,aF as DN,aG as RN,aH as ON,aI as MN,aJ as Z3,aK as J3,aL as PN,aM as kN,aN as NN,aO as LN,aP as _T,aQ as Sg,aR as BN,aS as FN,aT as eR,aU as tR,aV as VN,aW as jN,aX as yh,aY as UN,aZ as HN,a_ as zN,a$ as $N}from"./mui-vendor-Ev5FzqGT.js";import{r as Uw,a as GN,g as WN}from"./react-vendor-DJG_os-6.js";import{u as C0,a as bT,b as nR,c as YN,d as w1,H as qN,R as XN,e as so,N as rR}from"./utils-vendor-B3T5W2NK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var _x={exports:{}},vh={},bx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function KN(){return AT||(AT=1,function(n){function e(W,G){var Q=W.length;W.push(G);e:for(;0<Q;){var Z=Q-1>>>1,de=W[Z];if(0<i(de,G))W[Z]=G,W[Q]=de,Q=Z;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var G=W[0],Q=W.pop();if(Q!==G){W[0]=Q;e:for(var Z=0,de=W.length,ge=de>>>1;Z<ge;){var xe=2*(Z+1)-1,be=W[xe],ke=xe+1,he=W[ke];if(0>i(be,Q))ke<de&&0>i(he,be)?(W[Z]=he,W[ke]=Q,Z=ke):(W[Z]=be,W[xe]=Q,Z=xe);else if(ke<de&&0>i(he,Q))W[Z]=he,W[ke]=Q,Z=ke;else break e}}return G}function i(W,G){var Q=W.sortIndex-G.sortIndex;return Q!==0?Q:W.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,y=!1,x=!1,b=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(W){for(var G=t(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=W)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=t(d)}}function P(W){if(b=!1,R(W),!x)if(t(c)!==null)x=!0,B||(B=!0,M());else{var G=t(d);G!==null&&X(P,G.startTime-W)}}var B=!1,O=-1,C=5,D=-1;function V(){return A?!0:!(n.unstable_now()-D<C)}function L(){if(A=!1,B){var W=n.unstable_now();D=W;var G=!0;try{e:{x=!1,b&&(b=!1,T(O),O=-1),y=!0;var Q=g;try{t:{for(R(W),p=t(c);p!==null&&!(p.expirationTime>W&&V());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var de=Z(p.expirationTime<=W);if(W=n.unstable_now(),typeof de=="function"){p.callback=de,R(W),G=!0;break t}p===t(c)&&r(c),R(W)}else r(c);p=t(c)}if(p!==null)G=!0;else{var ge=t(d);ge!==null&&X(P,ge.startTime-W),G=!1}}break e}finally{p=null,g=Q,y=!1}G=void 0}}finally{G?M():B=!1}}}var M;if(typeof I=="function")M=function(){I(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=L,M=function(){q.postMessage(null)}}else M=function(){S(L,0)};function X(W,G){O=S(function(){W(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(W){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var Q=g;g=G;try{return W()}finally{g=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=g;g=W;try{return G()}finally{g=Q}},n.unstable_scheduleCallback=function(W,G,Q){var Z=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Z+Q:Z):Q=Z,W){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,W={id:f++,callback:G,priorityLevel:W,startTime:Q,expirationTime:de,sortIndex:-1},Q>Z?(W.sortIndex=Q,e(d,W),t(c)===null&&W===t(d)&&(b?(T(O),O=-1):b=!0,X(P,Q-Z))):(W.sortIndex=de,e(c,W),x||y||(x=!0,B||(B=!0,M()))),W},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(W){var G=g;return function(){var Q=g;g=G;try{return W.apply(this,arguments)}finally{g=Q}}}}(Ax)),Ax}var ET;function QN(){return ET||(ET=1,bx.exports=KN()),bx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function ZN(){if(ST)return vh;ST=1;var n=QN(),e=Uw(),t=GN();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,m=u;;){var _=h.return;if(_===null)break;var E=_.alternate;if(E===null){if(m=_.return,m!==null){h=m;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===h)return o(_),l;if(E===m)return o(_),u;E=E.sibling}throw Error(r(188))}if(h.return!==m.return)h=_,m=E;else{for(var U=!1,z=_.child;z;){if(z===h){U=!0,h=_,m=E;break}if(z===m){U=!0,m=_,h=E;break}z=z.sibling}if(!U){for(z=E.child;z;){if(z===h){U=!0,h=E,m=_;break}if(z===m){U=!0,m=E,h=_;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function M(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case I:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case R:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case C:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Z=[],de=-1;function ge(l){return{current:l}}function xe(l){0>de||(l.current=Z[de],Z[de]=null,de--)}function be(l,u){de++,Z[de]=l.current,l.current=u}var ke=ge(null),he=ge(null),Se=ge(null),Ae=ge(null);function Fe(l,u){switch(be(Se,u),be(he,l),be(ke,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?WS(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=WS(u),l=YS(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}xe(ke),be(ke,l)}function re(){xe(ke),xe(he),xe(Se)}function ye(l){l.memoizedState!==null&&be(Ae,l);var u=ke.current,h=YS(u,l.type);u!==h&&(be(he,l),be(ke,h))}function pe(l){he.current===l&&(xe(ke),xe(he)),Ae.current===l&&(xe(Ae),fh._currentValue=Q)}var te=Object.prototype.hasOwnProperty,Ve=n.unstable_scheduleCallback,we=n.unstable_cancelCallback,ze=n.unstable_shouldYield,Me=n.unstable_requestPaint,Re=n.unstable_now,Ye=n.unstable_getCurrentPriorityLevel,Ge=n.unstable_ImmediatePriority,Oe=n.unstable_UserBlockingPriority,Ne=n.unstable_NormalPriority,dt=n.unstable_LowPriority,_t=n.unstable_IdlePriority,yn=n.log,On=n.unstable_setDisableYieldValue,nt=null,it=null;function Tn(l){if(typeof yn=="function"&&On(l),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(nt,l)}catch{}}var Qe=Math.clz32?Math.clz32:Jt,pt=Math.log,kt=Math.LN2;function Jt(l){return l>>>=0,l===0?32:31-(pt(l)/kt|0)|0}var An=256,Cn=4194304;function Yt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Hr(l,u,h){var m=l.pendingLanes;if(m===0)return 0;var _=0,E=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=m&134217727;return z!==0?(m=z&~E,m!==0?_=Yt(m):(U&=z,U!==0?_=Yt(U):h||(h=z&~l,h!==0&&(_=Yt(h))))):(z=m&~E,z!==0?_=Yt(z):U!==0?_=Yt(U):h||(h=m&~l,h!==0&&(_=Yt(h)))),_===0?0:u!==0&&u!==_&&(u&E)===0&&(E=_&-_,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:_}function gt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Fn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(){var l=An;return An<<=1,(An&4194048)===0&&(An=256),l}function zr(){var l=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),l}function mi(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function ir(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function zl(l,u,h,m,_,E){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,K=l.expirationTimes,le=l.hiddenUpdates;for(h=U&~h;0<h;){var Ee=31-Qe(h),Ie=1<<Ee;z[Ee]=0,K[Ee]=-1;var ue=le[Ee];if(ue!==null)for(le[Ee]=null,Ee=0;Ee<ue.length;Ee++){var fe=ue[Ee];fe!==null&&(fe.lane&=-536870913)}h&=~Ie}m!==0&&Zi(l,m,0),E!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=E&~(U&~u))}function Zi(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var m=31-Qe(u);l.entangledLanes|=u,l.entanglements[m]=l.entanglements[m]|1073741824|h&4194090}function cu(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var m=31-Qe(h),_=1<<m;_&u|l[m]&u&&(l[m]|=u),h&=~_}}function Ls(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function vn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ar(){var l=G.p;return l!==0?l:(l=window.event,l===void 0?32:fT(l.type))}function $l(l,u){var h=G.p;try{return G.p=l,u()}finally{G.p=h}}var Mn=Math.random().toString(36).slice(2),mr="__reactFiber$"+Mn,sr="__reactProps$"+Mn,Ji="__reactContainer$"+Mn,yf="__reactEvents$"+Mn,Ay="__reactListeners$"+Mn,ko="__reactHandles$"+Mn,ap="__reactResources$"+Mn,Gl="__reactMarker$"+Mn;function No(l){delete l[mr],delete l[sr],delete l[yf],delete l[Ay],delete l[ko]}function Bs(l){var u=l[mr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[Ji]||h[mr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=QS(l);l!==null;){if(h=l[mr])return h;l=QS(l)}return u}l=h,h=l.parentNode}return null}function Za(l){if(l=l[mr]||l[Ji]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Ja(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function yi(l){var u=l[ap];return u||(u=l[ap]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Xn(l){l[Gl]=!0}var vf=new Set,uu={};function Ea(l,u){Fs(l,u),Fs(l+"Capture",u)}function Fs(l,u){for(uu[l]=u,l=0;l<u.length;l++)vf.add(u[l])}var sp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),op={},Wl={};function lp(l){return te.call(Wl,l)?!0:te.call(op,l)?!1:sp.test(l)?Wl[l]=!0:(op[l]=!0,!1)}function Lo(l,u,h){if(lp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function es(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function $r(l,u,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+m)}}var Yl,cp;function Vs(l){if(Yl===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Yl=u&&u[1]||"",cp=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yl+l+cp}var du=!1;function fu(l,u){if(!l||du)return"";du=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(fe){var ue=fe}Reflect.construct(l,[],Ie)}else{try{Ie.call()}catch(fe){ue=fe}l.call(Ie.prototype)}}else{try{throw Error()}catch(fe){ue=fe}(Ie=l())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(fe){if(fe&&ue&&typeof fe.stack=="string")return[fe.stack,ue.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),U=E[0],z=E[1];if(U&&z){var K=U.split(`
`),le=z.split(`
`);for(_=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;_<le.length&&!le[_].includes("DetermineComponentFrameRoot");)_++;if(m===K.length||_===le.length)for(m=K.length-1,_=le.length-1;1<=m&&0<=_&&K[m]!==le[_];)_--;for(;1<=m&&0<=_;m--,_--)if(K[m]!==le[_]){if(m!==1||_!==1)do if(m--,_--,0>_||K[m]!==le[_]){var Ee=`
`+K[m].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=m&&0<=_);break}}}finally{du=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Vs(h):""}function xf(l){switch(l.tag){case 26:case 27:case 5:return Vs(l.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 15:return fu(l.type,!1);case 11:return fu(l.type.render,!1);case 1:return fu(l.type,!0);case 31:return Vs("Activity");default:return""}}function hu(l){try{var u="";do u+=xf(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function wf(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ey(l){var u=wf(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),m=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){m=""+U,E.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(U){m=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function pu(l){l._valueTracker||(l._valueTracker=Ey(l))}function _f(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return l&&(m=wf(l)?l.checked?"true":"false":l.value),l=m,l!==h?(u.setValue(l),!0):!1}function ql(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Sy=/[\n"\\]/g;function or(l){return l.replace(Sy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ji(l,u,h,m,_,E,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+vi(u)):l.value!==""+vi(u)&&(l.value=""+vi(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?Bo(l,U,vi(u)):h!=null?Bo(l,U,vi(h)):m!=null&&l.removeAttribute("value"),_==null&&E!=null&&(l.defaultChecked=!!E),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+vi(z):l.removeAttribute("name")}function Xl(l,u,h,m,_,E,U,z){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null))return;h=h!=null?""+vi(h):"",u=u!=null?""+vi(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=z?l.checked:!!m,l.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function Bo(l,u,h){u==="number"&&ql(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function js(l,u,h,m){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&m&&(l[h].defaultSelected=!0)}else{for(h=""+vi(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,m&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function cn(l,u,h){if(u!=null&&(u=""+vi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+vi(h):""}function Kl(l,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(r(92));if(X(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=vi(u),l.defaultValue=h,m=l.textContent,m===h&&m!==""&&m!==null&&(l.value=m)}function ea(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Ql=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function up(l,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":m?l.setProperty(u,h):typeof h!="number"||h===0||Ql.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function bf(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var _ in u)m=u[_],u.hasOwnProperty(_)&&h[_]!==m&&up(l,_,m)}else for(var E in u)u.hasOwnProperty(E)&&up(l,E,u[E])}function Af(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ty=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gu(l){return Cy.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Us=null;function ta(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hs=null,zs=null;function Ef(l){var u=Za(l);if(u&&(l=u.stateNode)){var h=l[sr]||null;e:switch(l=u.stateNode,u.type){case"input":if(ji(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+or(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==l&&m.form===l.form){var _=m[sr]||null;if(!_)throw Error(r(90));ji(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===l.form&&_f(m)}break e;case"textarea":cn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&js(l,!!h.multiple,u,!1)}}}var ts=!1;function dp(l,u,h){if(ts)return l(u,h);ts=!0;try{var m=l(u);return m}finally{if(ts=!1,(Hs!==null||zs!==null)&&(ig(),Hs&&(u=Hs,l=zs,zs=Hs=null,Ef(u),l)))for(u=0;u<l.length;u++)Ef(l[u])}}function Zl(l,u){var h=l.stateNode;if(h===null)return null;var m=h[sr]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=!1;if(Sa)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){na=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{na=!1}var ns=null,Fo=null,$s=null;function Sf(){if($s)return $s;var l,u=Fo,h=u.length,m,_="value"in ns?ns.value:ns.textContent,E=_.length;for(l=0;l<h&&u[l]===_[l];l++);var U=h-l;for(m=1;m<=U&&u[h-m]===_[E-m];m++);return $s=_.slice(l,1<m?1-m:void 0)}function rs(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function is(){return!0}function Tf(){return!1}function Or(l){function u(h,m,_,E,U){this._reactName=h,this._targetInst=_,this.type=m,this.nativeEvent=E,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(E):E[z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?is:Tf,this.isPropagationStopped=Tf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),u}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mu=Or(en),ec=f({},en,{view:0,detail:0}),fp=Or(ec),yu,vu,as,tc=f({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==as&&(as&&l.type==="mousemove"?(yu=l.screenX-as.screenX,vu=l.screenY-as.screenY):vu=yu=0,as=l),yu)},movementY:function(l){return"movementY"in l?l.movementY:vu}}),ra=Or(tc),hp=f({},tc,{dataTransfer:0}),Iy=Or(hp),nc=f({},ec,{relatedTarget:0}),xu=Or(nc),Cf=f({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=Or(Cf),pp=f({},en,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),_u=Or(pp),Dy=f({},en,{data:0}),If=Or(Dy),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Df(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=mp[l])?!!u[l]:!1}function ic(){return Df}var yp=f({},ec,{key:function(l){if(l.key){var u=rc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rs(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?gp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(l){return l.type==="keypress"?rs(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rs(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),bu=Or(yp),vp=f({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=Or(vp),Gs=f({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),xp=Or(Gs),wp=f({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),_p=Or(wp),bp=f({},tc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Au=Or(bp),xi=f({},en,{newState:0,oldState:0}),Ap=Or(xi),Ep=[9,13,27,32],ss=Sa&&"CompositionEvent"in window,w=null;Sa&&"documentMode"in document&&(w=document.documentMode);var k=Sa&&"TextEvent"in window&&!w,j=Sa&&(!ss||w&&8<w&&11>=w),$=" ",se=!1;function me(l,u){switch(l){case"keyup":return Ep.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nt=!1;function yr(l,u){switch(l){case"compositionend":return Le(u);case"keypress":return u.which!==32?null:(se=!0,$);case"textInput":return l=u.data,l===$&&se?null:l;default:return null}}function Lt(l,u){if(Nt)return l==="compositionend"||!ss&&me(l,u)?(l=Sf(),$s=Fo=ns=null,Nt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var Mr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Mr[l.type]:u==="textarea"}function Ws(l,u,h,m){Hs?zs?zs.push(m):zs=[m]:Hs=m,u=ug(u,"onChange"),0<u.length&&(h=new mu("onChange","change",null,h,m),l.push({event:h,listeners:u}))}var Gr=null,os=null;function Of(l){US(l,0)}function Sp(l){var u=Ja(l);if(_f(u))return l}function lA(l,u){if(l==="change")return u}var cA=!1;if(Sa){var Ry;if(Sa){var Oy="oninput"in document;if(!Oy){var uA=document.createElement("div");uA.setAttribute("oninput","return;"),Oy=typeof uA.oninput=="function"}Ry=Oy}else Ry=!1;cA=Ry&&(!document.documentMode||9<document.documentMode)}function dA(){Gr&&(Gr.detachEvent("onpropertychange",fA),os=Gr=null)}function fA(l){if(l.propertyName==="value"&&Sp(os)){var u=[];Ws(u,os,l,ta(l)),dp(Of,u)}}function N6(l,u,h){l==="focusin"?(dA(),Gr=u,os=h,Gr.attachEvent("onpropertychange",fA)):l==="focusout"&&dA()}function L6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Sp(os)}function B6(l,u){if(l==="click")return Sp(u)}function F6(l,u){if(l==="input"||l==="change")return Sp(u)}function V6(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ui=typeof Object.is=="function"?Object.is:V6;function Mf(l,u){if(Ui(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var _=h[m];if(!te.call(u,_)||!Ui(l[_],u[_]))return!1}return!0}function hA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function pA(l,u){var h=hA(l);l=0;for(var m;h;){if(h.nodeType===3){if(m=l+h.textContent.length,l<=u&&m>=u)return{node:h,offset:u-l};l=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=hA(h)}}function gA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?gA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function mA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ql(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=ql(l.document)}return u}function My(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var j6=Sa&&"documentMode"in document&&11>=document.documentMode,Eu=null,Py=null,Pf=null,ky=!1;function yA(l,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;ky||Eu==null||Eu!==ql(m)||(m=Eu,"selectionStart"in m&&My(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Pf&&Mf(Pf,m)||(Pf=m,m=ug(Py,"onSelect"),0<m.length&&(u=new mu("onSelect","select",null,u,h),l.push({event:u,listeners:m}),u.target=Eu)))}function ac(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Su={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionrun:ac("Transition","TransitionRun"),transitionstart:ac("Transition","TransitionStart"),transitioncancel:ac("Transition","TransitionCancel"),transitionend:ac("Transition","TransitionEnd")},Ny={},vA={};Sa&&(vA=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function sc(l){if(Ny[l])return Ny[l];if(!Su[l])return l;var u=Su[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in vA)return Ny[l]=u[h];return l}var xA=sc("animationend"),wA=sc("animationiteration"),_A=sc("animationstart"),U6=sc("transitionrun"),H6=sc("transitionstart"),z6=sc("transitioncancel"),bA=sc("transitionend"),AA=new Map,Ly="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ly.push("scrollEnd");function Ta(l,u){AA.set(l,u),Ea(u,[l])}var EA=new WeakMap;function ia(l,u){if(typeof l=="object"&&l!==null){var h=EA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:hu(u)},EA.set(l,u),u)}return{value:l,source:u,stack:hu(u)}}var aa=[],Tu=0,By=0;function Tp(){for(var l=Tu,u=By=Tu=0;u<l;){var h=aa[u];aa[u++]=null;var m=aa[u];aa[u++]=null;var _=aa[u];aa[u++]=null;var E=aa[u];if(aa[u++]=null,m!==null&&_!==null){var U=m.pending;U===null?_.next=_:(_.next=U.next,U.next=_),m.pending=_}E!==0&&SA(h,_,E)}}function Cp(l,u,h,m){aa[Tu++]=l,aa[Tu++]=u,aa[Tu++]=h,aa[Tu++]=m,By|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function Fy(l,u,h,m){return Cp(l,u,h,m),Ip(l)}function Cu(l,u){return Cp(l,null,null,u),Ip(l)}function SA(l,u,h){l.lanes|=h;var m=l.alternate;m!==null&&(m.lanes|=h);for(var _=!1,E=l.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(_=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,_&&u!==null&&(_=31-Qe(h),l=E.hiddenUpdates,m=l[_],m===null?l[_]=[u]:m.push(u),u.lane=h|536870912),E):null}function Ip(l){if(50<ih)throw ih=0,$v=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Iu={};function $6(l,u,h,m){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,u,h,m){return new $6(l,u,h,m)}function Vy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ys(l,u){var h=l.alternate;return h===null?(h=Hi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function TA(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Dp(l,u,h,m,_,E){var U=0;if(m=l,typeof l=="function")Vy(l)&&(U=1);else if(typeof l=="string")U=W8(l,h,ke.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case D:return l=Hi(31,h,u,_),l.elementType=D,l.lanes=E,l;case x:return oc(h.children,_,E,u);case b:U=8,_|=24;break;case A:return l=Hi(12,h,u,_|2),l.elementType=A,l.lanes=E,l;case P:return l=Hi(13,h,u,_),l.elementType=P,l.lanes=E,l;case B:return l=Hi(19,h,u,_),l.elementType=B,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case I:U=10;break e;case T:U=9;break e;case R:U=11;break e;case O:U=14;break e;case C:U=16,m=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),m=null}return u=Hi(U,h,u,_),u.elementType=l,u.type=m,u.lanes=E,u}function oc(l,u,h,m){return l=Hi(7,l,m,u),l.lanes=h,l}function jy(l,u,h){return l=Hi(6,l,null,u),l.lanes=h,l}function Uy(l,u,h){return u=Hi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Du=[],Ru=0,Rp=null,Op=0,sa=[],oa=0,lc=null,qs=1,Xs="";function cc(l,u){Du[Ru++]=Op,Du[Ru++]=Rp,Rp=l,Op=u}function CA(l,u,h){sa[oa++]=qs,sa[oa++]=Xs,sa[oa++]=lc,lc=l;var m=qs;l=Xs;var _=32-Qe(m)-1;m&=~(1<<_),h+=1;var E=32-Qe(u)+_;if(30<E){var U=_-_%5;E=(m&(1<<U)-1).toString(32),m>>=U,_-=U,qs=1<<32-Qe(u)+_|h<<_|m,Xs=E+l}else qs=1<<E|h<<_|m,Xs=l}function Hy(l){l.return!==null&&(cc(l,1),CA(l,1,0))}function zy(l){for(;l===Rp;)Rp=Du[--Ru],Du[Ru]=null,Op=Du[--Ru],Du[Ru]=null;for(;l===lc;)lc=sa[--oa],sa[oa]=null,Xs=sa[--oa],sa[oa]=null,qs=sa[--oa],sa[oa]=null}var wi=null,zn=null,qt=!1,uc=null,ls=!1,$y=Error(r(519));function dc(l){var u=Error(r(418,""));throw Lf(ia(u,l)),$y}function IA(l){var u=l.stateNode,h=l.type,m=l.memoizedProps;switch(u[mr]=l,u[sr]=m,h){case"dialog":Dt("cancel",u),Dt("close",u);break;case"iframe":case"object":case"embed":Dt("load",u);break;case"video":case"audio":for(h=0;h<sh.length;h++)Dt(sh[h],u);break;case"source":Dt("error",u);break;case"img":case"image":case"link":Dt("error",u),Dt("load",u);break;case"details":Dt("toggle",u);break;case"input":Dt("invalid",u),Xl(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),pu(u);break;case"select":Dt("invalid",u);break;case"textarea":Dt("invalid",u),Kl(u,m.value,m.defaultValue,m.children),pu(u)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||GS(u.textContent,h)?(m.popover!=null&&(Dt("beforetoggle",u),Dt("toggle",u)),m.onScroll!=null&&Dt("scroll",u),m.onScrollEnd!=null&&Dt("scrollend",u),m.onClick!=null&&(u.onclick=dg),u=!0):u=!1,u||dc(l)}function DA(l){for(wi=l.return;wi;)switch(wi.tag){case 5:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:wi=wi.return}}function kf(l){if(l!==wi)return!1;if(!qt)return DA(l),qt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||sx(l.type,l.memoizedProps)),h=!h),h&&zn&&dc(l),DA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){zn=Ia(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}zn=null}}else u===27?(u=zn,el(l.type)?(l=ux,ux=null,zn=l):zn=u):zn=wi?Ia(l.stateNode.nextSibling):null;return!0}function Nf(){zn=wi=null,qt=!1}function RA(){var l=uc;return l!==null&&(Mi===null?Mi=l:Mi.push.apply(Mi,l),uc=null),l}function Lf(l){uc===null?uc=[l]:uc.push(l)}var Gy=ge(null),fc=null,Ks=null;function Vo(l,u,h){be(Gy,u._currentValue),u._currentValue=h}function Qs(l){l._currentValue=Gy.current,xe(Gy)}function Wy(l,u,h){for(;l!==null;){var m=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),l===h)break;l=l.return}}function Yy(l,u,h,m){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var E=_.dependencies;if(E!==null){var U=_.child;E=E.firstContext;e:for(;E!==null;){var z=E;E=_;for(var K=0;K<u.length;K++)if(z.context===u[K]){E.lanes|=h,z=E.alternate,z!==null&&(z.lanes|=h),Wy(E.return,h,l),m||(U=null);break e}E=z.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(r(341));U.lanes|=h,E=U.alternate,E!==null&&(E.lanes|=h),Wy(U,h,l),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===l){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function Bf(l,u,h,m){l=null;for(var _=u,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=_.type;Ui(_.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ae.current){if(U=_.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(fh):l=[fh])}_=_.return}l!==null&&Yy(u,l,h,m),u.flags|=262144}function Mp(l){for(l=l.firstContext;l!==null;){if(!Ui(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function hc(l){fc=l,Ks=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ri(l){return OA(fc,l)}function Pp(l,u){return fc===null&&hc(l),OA(l,u)}function OA(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ks===null){if(l===null)throw Error(r(308));Ks=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ks=Ks.next=u;return h}var G6=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,m){l.push(m)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},W6=n.unstable_scheduleCallback,Y6=n.unstable_NormalPriority,xr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qy(){return{controller:new G6,data:new Map,refCount:0}}function Ff(l){l.refCount--,l.refCount===0&&W6(Y6,function(){l.controller.abort()})}var Vf=null,Xy=0,Ou=0,Mu=null;function q6(l,u){if(Vf===null){var h=Vf=[];Xy=0,Ou=Qv(),Mu={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Xy++,u.then(MA,MA),u}function MA(){if(--Xy===0&&Vf!==null){Mu!==null&&(Mu.status="fulfilled");var l=Vf;Vf=null,Ou=0,Mu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function X6(l,u){var h=[],m={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){m.status="fulfilled",m.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(m.status="rejected",m.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),m}var PA=W.S;W.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&q6(l,u),PA!==null&&PA(l,u)};var pc=ge(null);function Ky(){var l=pc.current;return l!==null?l:En.pooledCache}function kp(l,u){u===null?be(pc,pc.current):be(pc,u.pool)}function kA(){var l=Ky();return l===null?null:{parent:xr._currentValue,pool:l}}var jf=Error(r(460)),NA=Error(r(474)),Np=Error(r(542)),Qy={then:function(){}};function LA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Lp(){}function BA(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Lp,Lp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,VA(l),l;default:if(typeof u.status=="string")u.then(Lp,Lp);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(m){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=m}},function(m){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,VA(l),l}throw Uf=u,jf}}var Uf=null;function FA(){if(Uf===null)throw Error(r(459));var l=Uf;return Uf=null,l}function VA(l){if(l===jf||l===Np)throw Error(r(483))}var jo=!1;function Zy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Uo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ho(l,u,h){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(rn&2)!==0){var _=m.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),m.pending=u,u=Ip(l),SA(l,null,h),u}return Cp(l,m,u,h),Ip(l)}function Hf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,cu(l,h)}}function ev(l,u){var h=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var _=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?_=E=U:E=E.next=U,h=h.next}while(h!==null);E===null?_=E=u:E=E.next=u}else _=E=u;h={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var tv=!1;function zf(){if(tv){var l=Mu;if(l!==null)throw l}}function $f(l,u,h,m){tv=!1;var _=l.updateQueue;jo=!1;var E=_.firstBaseUpdate,U=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var K=z,le=K.next;K.next=null,U===null?E=le:U.next=le,U=K;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,z=Ee.lastBaseUpdate,z!==U&&(z===null?Ee.firstBaseUpdate=le:z.next=le,Ee.lastBaseUpdate=K))}if(E!==null){var Ie=_.baseState;U=0,Ee=le=K=null,z=E;do{var ue=z.lane&-536870913,fe=ue!==z.lane;if(fe?(Bt&ue)===ue:(m&ue)===ue){ue!==0&&ue===Ou&&(tv=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ct=l,at=z;ue=u;var fn=h;switch(at.tag){case 1:if(ct=at.payload,typeof ct=="function"){Ie=ct.call(fn,Ie,ue);break e}Ie=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=at.payload,ue=typeof ct=="function"?ct.call(fn,Ie,ue):ct,ue==null)break e;Ie=f({},Ie,ue);break e;case 2:jo=!0}}ue=z.callback,ue!==null&&(l.flags|=64,fe&&(l.flags|=8192),fe=_.callbacks,fe===null?_.callbacks=[ue]:fe.push(ue))}else fe={lane:ue,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ee===null?(le=Ee=fe,K=Ie):Ee=Ee.next=fe,U|=ue;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;fe=z,z=fe.next,fe.next=null,_.lastBaseUpdate=fe,_.shared.pending=null}}while(!0);Ee===null&&(K=Ie),_.baseState=K,_.firstBaseUpdate=le,_.lastBaseUpdate=Ee,E===null&&(_.shared.lanes=0),Ko|=U,l.lanes=U,l.memoizedState=Ie}}function jA(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function UA(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)jA(h[l],u)}var Pu=ge(null),Bp=ge(0);function HA(l,u){l=io,be(Bp,l),be(Pu,u),io=l|u.baseLanes}function nv(){be(Bp,io),be(Pu,Pu.current)}function rv(){io=Bp.current,xe(Pu),xe(Bp)}var zo=0,bt=null,un=null,lr=null,Fp=!1,ku=!1,gc=!1,Vp=0,Gf=0,Nu=null,K6=0;function Kn(){throw Error(r(321))}function iv(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ui(l[h],u[h]))return!1;return!0}function av(l,u,h,m,_,E){return zo=E,bt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,W.H=l===null||l.memoizedState===null?SE:TE,gc=!1,E=h(m,_),gc=!1,ku&&(E=$A(u,h,m,_)),zA(l),E}function zA(l){W.H=Gp;var u=un!==null&&un.next!==null;if(zo=0,lr=un=bt=null,Fp=!1,Gf=0,Nu=null,u)throw Error(r(300));l===null||Pr||(l=l.dependencies,l!==null&&Mp(l)&&(Pr=!0))}function $A(l,u,h,m){bt=l;var _=0;do{if(ku&&(Nu=null),Gf=0,ku=!1,25<=_)throw Error(r(301));if(_+=1,lr=un=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}W.H=r8,E=u(h,m)}while(ku);return E}function Q6(){var l=W.H,u=l.useState()[0];return u=typeof u.then=="function"?Wf(u):u,l=l.useState()[0],(un!==null?un.memoizedState:null)!==l&&(bt.flags|=1024),u}function sv(){var l=Vp!==0;return Vp=0,l}function ov(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function lv(l){if(Fp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Fp=!1}zo=0,lr=un=bt=null,ku=!1,Gf=Vp=0,Nu=null}function Ri(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?bt.memoizedState=lr=l:lr=lr.next=l,lr}function cr(){if(un===null){var l=bt.alternate;l=l!==null?l.memoizedState:null}else l=un.next;var u=lr===null?bt.memoizedState:lr.next;if(u!==null)lr=u,un=l;else{if(l===null)throw bt.alternate===null?Error(r(467)):Error(r(310));un=l,l={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},lr===null?bt.memoizedState=lr=l:lr=lr.next=l}return lr}function cv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wf(l){var u=Gf;return Gf+=1,Nu===null&&(Nu=[]),l=BA(Nu,l,u),u=bt,(lr===null?u.memoizedState:lr.next)===null&&(u=u.alternate,W.H=u===null||u.memoizedState===null?SE:TE),l}function jp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Wf(l);if(l.$$typeof===I)return ri(l)}throw Error(r(438,String(l)))}function uv(l){var u=null,h=bt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=bt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=cv(),bt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),m=0;m<l;m++)h[m]=V;return u.index++,h}function Zs(l,u){return typeof u=="function"?u(l):u}function Up(l){var u=cr();return dv(u,un,l)}function dv(l,u,h){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var _=l.baseQueue,E=m.pending;if(E!==null){if(_!==null){var U=_.next;_.next=E.next,E.next=U}u.baseQueue=_=E,m.pending=null}if(E=l.baseState,_===null)l.memoizedState=E;else{u=_.next;var z=U=null,K=null,le=u,Ee=!1;do{var Ie=le.lane&-536870913;if(Ie!==le.lane?(Bt&Ie)===Ie:(zo&Ie)===Ie){var ue=le.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ie===Ou&&(Ee=!0);else if((zo&ue)===ue){le=le.next,ue===Ou&&(Ee=!0);continue}else Ie={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=Ie,U=E):K=K.next=Ie,bt.lanes|=ue,Ko|=ue;Ie=le.action,gc&&h(E,Ie),E=le.hasEagerState?le.eagerState:h(E,Ie)}else ue={lane:Ie,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=ue,U=E):K=K.next=ue,bt.lanes|=Ie,Ko|=Ie;le=le.next}while(le!==null&&le!==u);if(K===null?U=E:K.next=z,!Ui(E,l.memoizedState)&&(Pr=!0,Ee&&(h=Mu,h!==null)))throw h;l.memoizedState=E,l.baseState=U,l.baseQueue=K,m.lastRenderedState=E}return _===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function fv(l){var u=cr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=h.dispatch,_=h.pending,E=u.memoizedState;if(_!==null){h.pending=null;var U=_=_.next;do E=l(E,U.action),U=U.next;while(U!==_);Ui(E,u.memoizedState)||(Pr=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,m]}function GA(l,u,h){var m=bt,_=cr(),E=qt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!Ui((un||_).memoizedState,h);U&&(_.memoizedState=h,Pr=!0),_=_.queue;var z=qA.bind(null,m,_,l);if(Yf(2048,8,z,[l]),_.getSnapshot!==u||U||lr!==null&&lr.memoizedState.tag&1){if(m.flags|=2048,Lu(9,Hp(),YA.bind(null,m,_,h,u),null),En===null)throw Error(r(349));E||(zo&124)!==0||WA(m,u,h)}return h}function WA(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=bt.updateQueue,u===null?(u=cv(),bt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function YA(l,u,h,m){u.value=h,u.getSnapshot=m,XA(u)&&KA(l)}function qA(l,u,h){return h(function(){XA(u)&&KA(l)})}function XA(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ui(l,h)}catch{return!0}}function KA(l){var u=Cu(l,2);u!==null&&Yi(u,l,2)}function hv(l){var u=Ri();if(typeof l=="function"){var h=l;if(l=h(),gc){Tn(!0);try{h()}finally{Tn(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:l},u}function QA(l,u,h,m){return l.baseState=h,dv(l,un,typeof m=="function"?m:Zs)}function Z6(l,u,h,m,_){if($p(l))throw Error(r(485));if(l=u.action,l!==null){var E={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){E.listeners.push(U)}};W.T!==null?h(!0):E.isTransition=!1,m(E),h=u.pending,h===null?(E.next=u.pending=E,ZA(u,E)):(E.next=h.next,u.pending=h.next=E)}}function ZA(l,u){var h=u.action,m=u.payload,_=l.state;if(u.isTransition){var E=W.T,U={};W.T=U;try{var z=h(_,m),K=W.S;K!==null&&K(U,z),JA(l,u,z)}catch(le){pv(l,u,le)}finally{W.T=E}}else try{E=h(_,m),JA(l,u,E)}catch(le){pv(l,u,le)}}function JA(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){eE(l,u,m)},function(m){return pv(l,u,m)}):eE(l,u,h)}function eE(l,u,h){u.status="fulfilled",u.value=h,tE(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,ZA(l,h)))}function pv(l,u,h){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,tE(u),u=u.next;while(u!==m)}l.action=null}function tE(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function nE(l,u){return u}function rE(l,u){if(qt){var h=En.formState;if(h!==null){e:{var m=bt;if(qt){if(zn){t:{for(var _=zn,E=ls;_.nodeType!==8;){if(!E){_=null;break t}if(_=Ia(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){zn=Ia(_.nextSibling),m=_.data==="F!";break e}}dc(m)}m=!1}m&&(u=h[0])}}return h=Ri(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nE,lastRenderedState:u},h.queue=m,h=bE.bind(null,bt,m),m.dispatch=h,m=hv(!1),E=xv.bind(null,bt,!1,m.queue),m=Ri(),_={state:u,dispatch:null,action:l,pending:null},m.queue=_,h=Z6.bind(null,bt,_,E,h),_.dispatch=h,m.memoizedState=l,[u,h,!1]}function iE(l){var u=cr();return aE(u,un,l)}function aE(l,u,h){if(u=dv(l,u,nE)[0],l=Up(Zs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Wf(u)}catch(U){throw U===jf?Np:U}else m=u;u=cr();var _=u.queue,E=_.dispatch;return h!==u.memoizedState&&(bt.flags|=2048,Lu(9,Hp(),J6.bind(null,_,h),null)),[m,E,l]}function J6(l,u){l.action=u}function sE(l){var u=cr(),h=un;if(h!==null)return aE(u,h,l);cr(),u=u.memoizedState,h=cr();var m=h.queue.dispatch;return h.memoizedState=l,[u,m,!1]}function Lu(l,u,h,m){return l={tag:l,create:h,deps:m,inst:u,next:null},u=bt.updateQueue,u===null&&(u=cv(),bt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(m=h.next,h.next=l,l.next=m,u.lastEffect=l),l}function Hp(){return{destroy:void 0,resource:void 0}}function oE(){return cr().memoizedState}function zp(l,u,h,m){var _=Ri();m=m===void 0?null:m,bt.flags|=l,_.memoizedState=Lu(1|u,Hp(),h,m)}function Yf(l,u,h,m){var _=cr();m=m===void 0?null:m;var E=_.memoizedState.inst;un!==null&&m!==null&&iv(m,un.memoizedState.deps)?_.memoizedState=Lu(u,E,h,m):(bt.flags|=l,_.memoizedState=Lu(1|u,E,h,m))}function lE(l,u){zp(8390656,8,l,u)}function cE(l,u){Yf(2048,8,l,u)}function uE(l,u){return Yf(4,2,l,u)}function dE(l,u){return Yf(4,4,l,u)}function fE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function hE(l,u,h){h=h!=null?h.concat([l]):null,Yf(4,4,fE.bind(null,u,l),h)}function gv(){}function pE(l,u){var h=cr();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&iv(u,m[1])?m[0]:(h.memoizedState=[l,u],l)}function gE(l,u){var h=cr();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&iv(u,m[1]))return m[0];if(m=l(),gc){Tn(!0);try{l()}finally{Tn(!1)}}return h.memoizedState=[m,u],m}function mv(l,u,h){return h===void 0||(zo&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=vS(),bt.lanes|=l,Ko|=l,h)}function mE(l,u,h,m){return Ui(h,u)?h:Pu.current!==null?(l=mv(l,h,m),Ui(l,u)||(Pr=!0),l):(zo&42)===0?(Pr=!0,l.memoizedState=h):(l=vS(),bt.lanes|=l,Ko|=l,u)}function yE(l,u,h,m,_){var E=G.p;G.p=E!==0&&8>E?E:8;var U=W.T,z={};W.T=z,xv(l,!1,u,h);try{var K=_(),le=W.S;if(le!==null&&le(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ee=X6(K,m);qf(l,u,Ee,Wi(l))}else qf(l,u,m,Wi(l))}catch(Ie){qf(l,u,{then:function(){},status:"rejected",reason:Ie},Wi())}finally{G.p=E,W.T=U}}function e8(){}function yv(l,u,h,m){if(l.tag!==5)throw Error(r(476));var _=vE(l).queue;yE(l,_,u,Q,h===null?e8:function(){return xE(l),h(m)})}function vE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:Q},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function xE(l){var u=vE(l).next.queue;qf(l,u,{},Wi())}function vv(){return ri(fh)}function wE(){return cr().memoizedState}function _E(){return cr().memoizedState}function t8(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Wi();l=Uo(h);var m=Ho(u,l,h);m!==null&&(Yi(m,u,h),Hf(m,u,h)),u={cache:qy()},l.payload=u;return}u=u.return}}function n8(l,u,h){var m=Wi();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},$p(l)?AE(u,h):(h=Fy(l,u,h,m),h!==null&&(Yi(h,l,m),EE(h,u,m)))}function bE(l,u,h){var m=Wi();qf(l,u,h,m)}function qf(l,u,h,m){var _={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if($p(l))AE(u,_);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var U=u.lastRenderedState,z=E(U,h);if(_.hasEagerState=!0,_.eagerState=z,Ui(z,U))return Cp(l,u,_,0),En===null&&Tp(),!1}catch{}finally{}if(h=Fy(l,u,_,m),h!==null)return Yi(h,l,m),EE(h,u,m),!0}return!1}function xv(l,u,h,m){if(m={lane:2,revertLane:Qv(),action:m,hasEagerState:!1,eagerState:null,next:null},$p(l)){if(u)throw Error(r(479))}else u=Fy(l,h,m,2),u!==null&&Yi(u,l,2)}function $p(l){var u=l.alternate;return l===bt||u!==null&&u===bt}function AE(l,u){ku=Fp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function EE(l,u,h){if((h&4194048)!==0){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,cu(l,h)}}var Gp={readContext:ri,use:jp,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},SE={readContext:ri,use:jp,useCallback:function(l,u){return Ri().memoizedState=[l,u===void 0?null:u],l},useContext:ri,useEffect:lE,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,zp(4194308,4,fE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return zp(4194308,4,l,u)},useInsertionEffect:function(l,u){zp(4,2,l,u)},useMemo:function(l,u){var h=Ri();u=u===void 0?null:u;var m=l();if(gc){Tn(!0);try{l()}finally{Tn(!1)}}return h.memoizedState=[m,u],m},useReducer:function(l,u,h){var m=Ri();if(h!==void 0){var _=h(u);if(gc){Tn(!0);try{h(u)}finally{Tn(!1)}}}else _=u;return m.memoizedState=m.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},m.queue=l,l=l.dispatch=n8.bind(null,bt,l),[m.memoizedState,l]},useRef:function(l){var u=Ri();return l={current:l},u.memoizedState=l},useState:function(l){l=hv(l);var u=l.queue,h=bE.bind(null,bt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:gv,useDeferredValue:function(l,u){var h=Ri();return mv(h,l,u)},useTransition:function(){var l=hv(!1);return l=yE.bind(null,bt,l.queue,!0,!1),Ri().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var m=bt,_=Ri();if(qt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),En===null)throw Error(r(349));(Bt&124)!==0||WA(m,u,h)}_.memoizedState=h;var E={value:h,getSnapshot:u};return _.queue=E,lE(qA.bind(null,m,E,l),[l]),m.flags|=2048,Lu(9,Hp(),YA.bind(null,m,E,h,u),null),h},useId:function(){var l=Ri(),u=En.identifierPrefix;if(qt){var h=Xs,m=qs;h=(m&~(1<<32-Qe(m)-1)).toString(32)+h,u=""+u+"R"+h,h=Vp++,0<h&&(u+="H"+h.toString(32)),u+=""}else h=K6++,u=""+u+"r"+h.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:vv,useFormState:rE,useActionState:rE,useOptimistic:function(l){var u=Ri();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=xv.bind(null,bt,!0,h),h.dispatch=u,[l,u]},useMemoCache:uv,useCacheRefresh:function(){return Ri().memoizedState=t8.bind(null,bt)}},TE={readContext:ri,use:jp,useCallback:pE,useContext:ri,useEffect:cE,useImperativeHandle:hE,useInsertionEffect:uE,useLayoutEffect:dE,useMemo:gE,useReducer:Up,useRef:oE,useState:function(){return Up(Zs)},useDebugValue:gv,useDeferredValue:function(l,u){var h=cr();return mE(h,un.memoizedState,l,u)},useTransition:function(){var l=Up(Zs)[0],u=cr().memoizedState;return[typeof l=="boolean"?l:Wf(l),u]},useSyncExternalStore:GA,useId:wE,useHostTransitionStatus:vv,useFormState:iE,useActionState:iE,useOptimistic:function(l,u){var h=cr();return QA(h,un,l,u)},useMemoCache:uv,useCacheRefresh:_E},r8={readContext:ri,use:jp,useCallback:pE,useContext:ri,useEffect:cE,useImperativeHandle:hE,useInsertionEffect:uE,useLayoutEffect:dE,useMemo:gE,useReducer:fv,useRef:oE,useState:function(){return fv(Zs)},useDebugValue:gv,useDeferredValue:function(l,u){var h=cr();return un===null?mv(h,l,u):mE(h,un.memoizedState,l,u)},useTransition:function(){var l=fv(Zs)[0],u=cr().memoizedState;return[typeof l=="boolean"?l:Wf(l),u]},useSyncExternalStore:GA,useId:wE,useHostTransitionStatus:vv,useFormState:sE,useActionState:sE,useOptimistic:function(l,u){var h=cr();return un!==null?QA(h,un,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:uv,useCacheRefresh:_E},Bu=null,Xf=0;function Wp(l){var u=Xf;return Xf+=1,Bu===null&&(Bu=[]),BA(Bu,l,u)}function Kf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Yp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function CE(l){var u=l._init;return u(l._payload)}function IE(l){function u(ee,J){if(l){var oe=ee.deletions;oe===null?(ee.deletions=[J],ee.flags|=16):oe.push(J)}}function h(ee,J){if(!l)return null;for(;J!==null;)u(ee,J),J=J.sibling;return null}function m(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function _(ee,J){return ee=Ys(ee,J),ee.index=0,ee.sibling=null,ee}function E(ee,J,oe){return ee.index=oe,l?(oe=ee.alternate,oe!==null?(oe=oe.index,oe<J?(ee.flags|=67108866,J):oe):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function U(ee){return l&&ee.alternate===null&&(ee.flags|=67108866),ee}function z(ee,J,oe,Ce){return J===null||J.tag!==6?(J=jy(oe,ee.mode,Ce),J.return=ee,J):(J=_(J,oe),J.return=ee,J)}function K(ee,J,oe,Ce){var qe=oe.type;return qe===x?Ee(ee,J,oe.props.children,Ce,oe.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===C&&CE(qe)===J.type)?(J=_(J,oe.props),Kf(J,oe),J.return=ee,J):(J=Dp(oe.type,oe.key,oe.props,null,ee.mode,Ce),Kf(J,oe),J.return=ee,J)}function le(ee,J,oe,Ce){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=Uy(oe,ee.mode,Ce),J.return=ee,J):(J=_(J,oe.children||[]),J.return=ee,J)}function Ee(ee,J,oe,Ce,qe){return J===null||J.tag!==7?(J=oc(oe,ee.mode,Ce,qe),J.return=ee,J):(J=_(J,oe),J.return=ee,J)}function Ie(ee,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=jy(""+J,ee.mode,oe),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return oe=Dp(J.type,J.key,J.props,null,ee.mode,oe),Kf(oe,J),oe.return=ee,oe;case y:return J=Uy(J,ee.mode,oe),J.return=ee,J;case C:var Ce=J._init;return J=Ce(J._payload),Ie(ee,J,oe)}if(X(J)||M(J))return J=oc(J,ee.mode,oe,null),J.return=ee,J;if(typeof J.then=="function")return Ie(ee,Wp(J),oe);if(J.$$typeof===I)return Ie(ee,Pp(ee,J),oe);Yp(ee,J)}return null}function ue(ee,J,oe,Ce){var qe=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return qe!==null?null:z(ee,J,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return oe.key===qe?K(ee,J,oe,Ce):null;case y:return oe.key===qe?le(ee,J,oe,Ce):null;case C:return qe=oe._init,oe=qe(oe._payload),ue(ee,J,oe,Ce)}if(X(oe)||M(oe))return qe!==null?null:Ee(ee,J,oe,Ce,null);if(typeof oe.then=="function")return ue(ee,J,Wp(oe),Ce);if(oe.$$typeof===I)return ue(ee,J,Pp(ee,oe),Ce);Yp(ee,oe)}return null}function fe(ee,J,oe,Ce,qe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ee=ee.get(oe)||null,z(J,ee,""+Ce,qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return ee=ee.get(Ce.key===null?oe:Ce.key)||null,K(J,ee,Ce,qe);case y:return ee=ee.get(Ce.key===null?oe:Ce.key)||null,le(J,ee,Ce,qe);case C:var Tt=Ce._init;return Ce=Tt(Ce._payload),fe(ee,J,oe,Ce,qe)}if(X(Ce)||M(Ce))return ee=ee.get(oe)||null,Ee(J,ee,Ce,qe,null);if(typeof Ce.then=="function")return fe(ee,J,oe,Wp(Ce),qe);if(Ce.$$typeof===I)return fe(ee,J,oe,Pp(J,Ce),qe);Yp(J,Ce)}return null}function ct(ee,J,oe,Ce){for(var qe=null,Tt=null,Ze=J,st=J=0,Nr=null;Ze!==null&&st<oe.length;st++){Ze.index>st?(Nr=Ze,Ze=null):Nr=Ze.sibling;var zt=ue(ee,Ze,oe[st],Ce);if(zt===null){Ze===null&&(Ze=Nr);break}l&&Ze&&zt.alternate===null&&u(ee,Ze),J=E(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt,Ze=Nr}if(st===oe.length)return h(ee,Ze),qt&&cc(ee,st),qe;if(Ze===null){for(;st<oe.length;st++)Ze=Ie(ee,oe[st],Ce),Ze!==null&&(J=E(Ze,J,st),Tt===null?qe=Ze:Tt.sibling=Ze,Tt=Ze);return qt&&cc(ee,st),qe}for(Ze=m(Ze);st<oe.length;st++)Nr=fe(Ze,ee,st,oe[st],Ce),Nr!==null&&(l&&Nr.alternate!==null&&Ze.delete(Nr.key===null?st:Nr.key),J=E(Nr,J,st),Tt===null?qe=Nr:Tt.sibling=Nr,Tt=Nr);return l&&Ze.forEach(function(al){return u(ee,al)}),qt&&cc(ee,st),qe}function at(ee,J,oe,Ce){if(oe==null)throw Error(r(151));for(var qe=null,Tt=null,Ze=J,st=J=0,Nr=null,zt=oe.next();Ze!==null&&!zt.done;st++,zt=oe.next()){Ze.index>st?(Nr=Ze,Ze=null):Nr=Ze.sibling;var al=ue(ee,Ze,zt.value,Ce);if(al===null){Ze===null&&(Ze=Nr);break}l&&Ze&&al.alternate===null&&u(ee,Ze),J=E(al,J,st),Tt===null?qe=al:Tt.sibling=al,Tt=al,Ze=Nr}if(zt.done)return h(ee,Ze),qt&&cc(ee,st),qe;if(Ze===null){for(;!zt.done;st++,zt=oe.next())zt=Ie(ee,zt.value,Ce),zt!==null&&(J=E(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt);return qt&&cc(ee,st),qe}for(Ze=m(Ze);!zt.done;st++,zt=oe.next())zt=fe(Ze,ee,st,zt.value,Ce),zt!==null&&(l&&zt.alternate!==null&&Ze.delete(zt.key===null?st:zt.key),J=E(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt);return l&&Ze.forEach(function(iN){return u(ee,iN)}),qt&&cc(ee,st),qe}function fn(ee,J,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===x&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:e:{for(var qe=oe.key;J!==null;){if(J.key===qe){if(qe=oe.type,qe===x){if(J.tag===7){h(ee,J.sibling),Ce=_(J,oe.props.children),Ce.return=ee,ee=Ce;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===C&&CE(qe)===J.type){h(ee,J.sibling),Ce=_(J,oe.props),Kf(Ce,oe),Ce.return=ee,ee=Ce;break e}h(ee,J);break}else u(ee,J);J=J.sibling}oe.type===x?(Ce=oc(oe.props.children,ee.mode,Ce,oe.key),Ce.return=ee,ee=Ce):(Ce=Dp(oe.type,oe.key,oe.props,null,ee.mode,Ce),Kf(Ce,oe),Ce.return=ee,ee=Ce)}return U(ee);case y:e:{for(qe=oe.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){h(ee,J.sibling),Ce=_(J,oe.children||[]),Ce.return=ee,ee=Ce;break e}else{h(ee,J);break}else u(ee,J);J=J.sibling}Ce=Uy(oe,ee.mode,Ce),Ce.return=ee,ee=Ce}return U(ee);case C:return qe=oe._init,oe=qe(oe._payload),fn(ee,J,oe,Ce)}if(X(oe))return ct(ee,J,oe,Ce);if(M(oe)){if(qe=M(oe),typeof qe!="function")throw Error(r(150));return oe=qe.call(oe),at(ee,J,oe,Ce)}if(typeof oe.then=="function")return fn(ee,J,Wp(oe),Ce);if(oe.$$typeof===I)return fn(ee,J,Pp(ee,oe),Ce);Yp(ee,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(h(ee,J.sibling),Ce=_(J,oe),Ce.return=ee,ee=Ce):(h(ee,J),Ce=jy(oe,ee.mode,Ce),Ce.return=ee,ee=Ce),U(ee)):h(ee,J)}return function(ee,J,oe,Ce){try{Xf=0;var qe=fn(ee,J,oe,Ce);return Bu=null,qe}catch(Ze){if(Ze===jf||Ze===Np)throw Ze;var Tt=Hi(29,Ze,null,ee.mode);return Tt.lanes=Ce,Tt.return=ee,Tt}finally{}}}var Fu=IE(!0),DE=IE(!1),la=ge(null),cs=null;function $o(l){var u=l.alternate;be(wr,wr.current&1),be(la,l),cs===null&&(u===null||Pu.current!==null||u.memoizedState!==null)&&(cs=l)}function RE(l){if(l.tag===22){if(be(wr,wr.current),be(la,l),cs===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(cs=l)}}else Go()}function Go(){be(wr,wr.current),be(la,la.current)}function Js(l){xe(la),cs===l&&(cs=null),xe(wr)}var wr=ge(0);function qp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||cx(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function wv(l,u,h,m){u=l.memoizedState,h=h(m,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var _v={enqueueSetState:function(l,u,h){l=l._reactInternals;var m=Wi(),_=Uo(m);_.payload=u,h!=null&&(_.callback=h),u=Ho(l,_,m),u!==null&&(Yi(u,l,m),Hf(u,l,m))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var m=Wi(),_=Uo(m);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=Ho(l,_,m),u!==null&&(Yi(u,l,m),Hf(u,l,m))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Wi(),m=Uo(h);m.tag=2,u!=null&&(m.callback=u),u=Ho(l,m,h),u!==null&&(Yi(u,l,h),Hf(u,l,h))}};function OE(l,u,h,m,_,E,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,E,U):u.prototype&&u.prototype.isPureReactComponent?!Mf(h,m)||!Mf(_,E):!0}function ME(l,u,h,m){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==l&&_v.enqueueReplaceState(u,u.state,null)}function mc(l,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}var Xp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function PE(l){Xp(l)}function kE(l){console.error(l)}function NE(l){Xp(l)}function Kp(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function LE(l,u,h){try{var m=l.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function bv(l,u,h){return h=Uo(h),h.tag=3,h.payload={element:null},h.callback=function(){Kp(l,u)},h}function BE(l){return l=Uo(l),l.tag=3,l}function FE(l,u,h,m){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var E=m.value;l.payload=function(){return _(E)},l.callback=function(){LE(u,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){LE(u,h,m),typeof _!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function i8(l,u,h,m,_){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Bf(u,h,_,!0),h=la.current,h!==null){switch(h.tag){case 13:return cs===null?Wv():h.alternate===null&&$n===0&&($n=3),h.flags&=-257,h.flags|=65536,h.lanes=_,m===Qy?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),qv(l,m,_)),!1;case 22:return h.flags|=65536,m===Qy?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),qv(l,m,_)),!1}throw Error(r(435,h.tag))}return qv(l,m,_),Wv(),!1}if(qt)return u=la.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,m!==$y&&(l=Error(r(422),{cause:m}),Lf(ia(l,h)))):(m!==$y&&(u=Error(r(423),{cause:m}),Lf(ia(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,m=ia(m,h),_=bv(l.stateNode,m,_),ev(l,_),$n!==4&&($n=2)),!1;var E=Error(r(520),{cause:m});if(E=ia(E,h),rh===null?rh=[E]:rh.push(E),$n!==4&&($n=2),u===null)return!0;m=ia(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=bv(h.stateNode,m,l),ev(h,l),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qo===null||!Qo.has(E))))return h.flags|=65536,_&=-_,h.lanes|=_,_=BE(_),FE(_,l,h,m),ev(h,_),!1}h=h.return}while(h!==null);return!1}var VE=Error(r(461)),Pr=!1;function Wr(l,u,h,m){u.child=l===null?DE(u,null,h,m):Fu(u,l.child,h,m)}function jE(l,u,h,m,_){h=h.render;var E=u.ref;if("ref"in m){var U={};for(var z in m)z!=="ref"&&(U[z]=m[z])}else U=m;return hc(u),m=av(l,u,h,U,E,_),z=sv(),l!==null&&!Pr?(ov(l,u,_),eo(l,u,_)):(qt&&z&&Hy(u),u.flags|=1,Wr(l,u,m,_),u.child)}function UE(l,u,h,m,_){if(l===null){var E=h.type;return typeof E=="function"&&!Vy(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,HE(l,u,E,m,_)):(l=Dp(h.type,null,m,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(E=l.child,!Rv(l,_)){var U=E.memoizedProps;if(h=h.compare,h=h!==null?h:Mf,h(U,m)&&l.ref===u.ref)return eo(l,u,_)}return u.flags|=1,l=Ys(E,m),l.ref=u.ref,l.return=u,u.child=l}function HE(l,u,h,m,_){if(l!==null){var E=l.memoizedProps;if(Mf(E,m)&&l.ref===u.ref)if(Pr=!1,u.pendingProps=m=E,Rv(l,_))(l.flags&131072)!==0&&(Pr=!0);else return u.lanes=l.lanes,eo(l,u,_)}return Av(l,u,h,m,_)}function zE(l,u,h){var m=u.pendingProps,_=m.children,E=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=E!==null?E.baseLanes|h:h,l!==null){for(_=u.child=l.child,E=0;_!==null;)E=E|_.lanes|_.childLanes,_=_.sibling;u.childLanes=E&~m}else u.childLanes=0,u.child=null;return $E(l,u,m,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&kp(u,E!==null?E.cachePool:null),E!==null?HA(u,E):nv(),RE(u);else return u.lanes=u.childLanes=536870912,$E(l,u,E!==null?E.baseLanes|h:h,h)}else E!==null?(kp(u,E.cachePool),HA(u,E),Go(),u.memoizedState=null):(l!==null&&kp(u,null),nv(),Go());return Wr(l,u,_,h),u.child}function $E(l,u,h,m){var _=Ky();return _=_===null?null:{parent:xr._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},l!==null&&kp(u,null),nv(),RE(u),l!==null&&Bf(l,u,m,!0),null}function Qp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function Av(l,u,h,m,_){return hc(u),h=av(l,u,h,m,void 0,_),m=sv(),l!==null&&!Pr?(ov(l,u,_),eo(l,u,_)):(qt&&m&&Hy(u),u.flags|=1,Wr(l,u,h,_),u.child)}function GE(l,u,h,m,_,E){return hc(u),u.updateQueue=null,h=$A(u,m,h,_),zA(l),m=sv(),l!==null&&!Pr?(ov(l,u,E),eo(l,u,E)):(qt&&m&&Hy(u),u.flags|=1,Wr(l,u,h,E),u.child)}function WE(l,u,h,m,_){if(hc(u),u.stateNode===null){var E=Iu,U=h.contextType;typeof U=="object"&&U!==null&&(E=ri(U)),E=new h(m,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=_v,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=m,E.state=u.memoizedState,E.refs={},Zy(u),U=h.contextType,E.context=typeof U=="object"&&U!==null?ri(U):Iu,E.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(wv(u,h,U,m),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(U=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),U!==E.state&&_v.enqueueReplaceState(E,E.state,null),$f(u,m,E,_),zf(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(l===null){E=u.stateNode;var z=u.memoizedProps,K=mc(h,z);E.props=K;var le=E.context,Ee=h.contextType;U=Iu,typeof Ee=="object"&&Ee!==null&&(U=ri(Ee));var Ie=h.getDerivedStateFromProps;Ee=typeof Ie=="function"||typeof E.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,Ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z||le!==U)&&ME(u,E,m,U),jo=!1;var ue=u.memoizedState;E.state=ue,$f(u,m,E,_),zf(),le=u.memoizedState,z||ue!==le||jo?(typeof Ie=="function"&&(wv(u,h,Ie,m),le=u.memoizedState),(K=jo||OE(u,h,K,m,ue,le,U))?(Ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=le),E.props=m,E.state=le,E.context=U,m=K):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{E=u.stateNode,Jy(l,u),U=u.memoizedProps,Ee=mc(h,U),E.props=Ee,Ie=u.pendingProps,ue=E.context,le=h.contextType,K=Iu,typeof le=="object"&&le!==null&&(K=ri(le)),z=h.getDerivedStateFromProps,(le=typeof z=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(U!==Ie||ue!==K)&&ME(u,E,m,K),jo=!1,ue=u.memoizedState,E.state=ue,$f(u,m,E,_),zf();var fe=u.memoizedState;U!==Ie||ue!==fe||jo||l!==null&&l.dependencies!==null&&Mp(l.dependencies)?(typeof z=="function"&&(wv(u,h,z,m),fe=u.memoizedState),(Ee=jo||OE(u,h,Ee,m,ue,fe,K)||l!==null&&l.dependencies!==null&&Mp(l.dependencies))?(le||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,fe,K),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,fe,K)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=fe),E.props=m,E.state=fe,E.context=K,m=Ee):(typeof E.componentDidUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=1024),m=!1)}return E=m,Qp(l,u),m=(u.flags&128)!==0,E||m?(E=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,l!==null&&m?(u.child=Fu(u,l.child,null,_),u.child=Fu(u,null,h,_)):Wr(l,u,h,_),u.memoizedState=E.state,l=u.child):l=eo(l,u,_),l}function YE(l,u,h,m){return Nf(),u.flags|=256,Wr(l,u,h,m),u.child}var Ev={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sv(l){return{baseLanes:l,cachePool:kA()}}function Tv(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=ca),l}function qE(l,u,h){var m=u.pendingProps,_=!1,E=(u.flags&128)!==0,U;if((U=E)||(U=l!==null&&l.memoizedState===null?!1:(wr.current&2)!==0),U&&(_=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(qt){if(_?$o(u):Go(),qt){var z=zn,K;if(K=z){e:{for(K=z,z=ls;K.nodeType!==8;){if(!z){z=null;break e}if(K=Ia(K.nextSibling),K===null){z=null;break e}}z=K}z!==null?(u.memoizedState={dehydrated:z,treeContext:lc!==null?{id:qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},K=Hi(18,null,null,0),K.stateNode=z,K.return=u,u.child=K,wi=u,zn=null,K=!0):K=!1}K||dc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return cx(z)?u.lanes=32:u.lanes=536870912,null;Js(u)}return z=m.children,m=m.fallback,_?(Go(),_=u.mode,z=Zp({mode:"hidden",children:z},_),m=oc(m,_,h,null),z.return=u,m.return=u,z.sibling=m,u.child=z,_=u.child,_.memoizedState=Sv(h),_.childLanes=Tv(l,U,h),u.memoizedState=Ev,m):($o(u),Cv(u,z))}if(K=l.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(E)u.flags&256?($o(u),u.flags&=-257,u=Iv(l,u,h)):u.memoizedState!==null?(Go(),u.child=l.child,u.flags|=128,u=null):(Go(),_=m.fallback,z=u.mode,m=Zp({mode:"visible",children:m.children},z),_=oc(_,z,h,null),_.flags|=2,m.return=u,_.return=u,m.sibling=_,u.child=m,Fu(u,l.child,null,h),m=u.child,m.memoizedState=Sv(h),m.childLanes=Tv(l,U,h),u.memoizedState=Ev,u=_);else if($o(u),cx(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var le=U.dgst;U=le,m=Error(r(419)),m.stack="",m.digest=U,Lf({value:m,source:null,stack:null}),u=Iv(l,u,h)}else if(Pr||Bf(l,u,h,!1),U=(h&l.childLanes)!==0,Pr||U){if(U=En,U!==null&&(m=h&-h,m=(m&42)!==0?1:Ls(m),m=(m&(U.suspendedLanes|h))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Cu(l,m),Yi(U,l,m),VE;z.data==="$?"||Wv(),u=Iv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=K.treeContext,zn=Ia(z.nextSibling),wi=u,qt=!0,uc=null,ls=!1,l!==null&&(sa[oa++]=qs,sa[oa++]=Xs,sa[oa++]=lc,qs=l.id,Xs=l.overflow,lc=u),u=Cv(u,m.children),u.flags|=4096);return u}return _?(Go(),_=m.fallback,z=u.mode,K=l.child,le=K.sibling,m=Ys(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,le!==null?_=Ys(le,_):(_=oc(_,z,h,null),_.flags|=2),_.return=u,m.return=u,m.sibling=_,u.child=m,m=_,_=u.child,z=l.child.memoizedState,z===null?z=Sv(h):(K=z.cachePool,K!==null?(le=xr._currentValue,K=K.parent!==le?{parent:le,pool:le}:K):K=kA(),z={baseLanes:z.baseLanes|h,cachePool:K}),_.memoizedState=z,_.childLanes=Tv(l,U,h),u.memoizedState=Ev,m):($o(u),h=l.child,l=h.sibling,h=Ys(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function Cv(l,u){return u=Zp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Zp(l,u){return l=Hi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Iv(l,u,h){return Fu(u,l.child,null,h),l=Cv(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function XE(l,u,h){l.lanes|=u;var m=l.alternate;m!==null&&(m.lanes|=u),Wy(l.return,u,h)}function Dv(l,u,h,m,_){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:_}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=h,E.tailMode=_)}function KE(l,u,h){var m=u.pendingProps,_=m.revealOrder,E=m.tail;if(Wr(l,u,m.children,h),m=wr.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&XE(l,h,u);else if(l.tag===19)XE(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(be(wr,m),_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&qp(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),Dv(u,!1,_,h,E);break;case"backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&qp(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}Dv(u,!0,h,null,E);break;case"together":Dv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function eo(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Ko|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Bf(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Ys(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Ys(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Rv(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Mp(l)))}function a8(l,u,h){switch(u.tag){case 3:Fe(u,u.stateNode.containerInfo),Vo(u,xr,l.memoizedState.cache),Nf();break;case 27:case 5:ye(u);break;case 4:Fe(u,u.stateNode.containerInfo);break;case 10:Vo(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?($o(u),u.flags|=128,null):(h&u.child.childLanes)!==0?qE(l,u,h):($o(u),l=eo(l,u,h),l!==null?l.sibling:null);$o(u);break;case 19:var _=(l.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Bf(l,u,h,!1),m=(h&u.childLanes)!==0),_){if(m)return KE(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),be(wr,wr.current),m)break;return null;case 22:case 23:return u.lanes=0,zE(l,u,h);case 24:Vo(u,xr,l.memoizedState.cache)}return eo(l,u,h)}function QE(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Pr=!0;else{if(!Rv(l,h)&&(u.flags&128)===0)return Pr=!1,a8(l,u,h);Pr=(l.flags&131072)!==0}else Pr=!1,qt&&(u.flags&1048576)!==0&&CA(u,Op,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var m=u.elementType,_=m._init;if(m=_(m._payload),u.type=m,typeof m=="function")Vy(m)?(l=mc(m,l),u.tag=1,u=WE(null,u,m,l,h)):(u.tag=0,u=Av(null,u,m,l,h));else{if(m!=null){if(_=m.$$typeof,_===R){u.tag=11,u=jE(null,u,m,l,h);break e}else if(_===O){u.tag=14,u=UE(null,u,m,l,h);break e}}throw u=q(m)||m,Error(r(306,u,""))}}return u;case 0:return Av(l,u,u.type,u.pendingProps,h);case 1:return m=u.type,_=mc(m,u.pendingProps),WE(l,u,m,_,h);case 3:e:{if(Fe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));m=u.pendingProps;var E=u.memoizedState;_=E.element,Jy(l,u),$f(u,m,null,h);var U=u.memoizedState;if(m=U.cache,Vo(u,xr,m),m!==E.cache&&Yy(u,[xr],h,!0),zf(),m=U.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=YE(l,u,m,h);break e}else if(m!==_){_=ia(Error(r(424)),u),Lf(_),u=YE(l,u,m,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zn=Ia(l.firstChild),wi=u,qt=!0,uc=null,ls=!0,h=DE(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Nf(),m===_){u=eo(l,u,h);break e}Wr(l,u,m,h)}u=u.child}return u;case 26:return Qp(l,u),l===null?(h=tT(u.type,null,u.pendingProps,null))?u.memoizedState=h:qt||(h=u.type,l=u.pendingProps,m=fg(Se.current).createElement(h),m[mr]=u,m[sr]=l,qr(m,h,l),Xn(m),u.stateNode=m):u.memoizedState=tT(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return ye(u),l===null&&qt&&(m=u.stateNode=ZS(u.type,u.pendingProps,Se.current),wi=u,ls=!0,_=zn,el(u.type)?(ux=_,zn=Ia(m.firstChild)):zn=_),Wr(l,u,u.pendingProps.children,h),Qp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&qt&&((_=m=zn)&&(m=P8(m,u.type,u.pendingProps,ls),m!==null?(u.stateNode=m,wi=u,zn=Ia(m.firstChild),ls=!1,_=!0):_=!1),_||dc(u)),ye(u),_=u.type,E=u.pendingProps,U=l!==null?l.memoizedProps:null,m=E.children,sx(_,E)?m=null:U!==null&&sx(_,U)&&(u.flags|=32),u.memoizedState!==null&&(_=av(l,u,Q6,null,null,h),fh._currentValue=_),Qp(l,u),Wr(l,u,m,h),u.child;case 6:return l===null&&qt&&((l=h=zn)&&(h=k8(h,u.pendingProps,ls),h!==null?(u.stateNode=h,wi=u,zn=null,l=!0):l=!1),l||dc(u)),null;case 13:return qE(l,u,h);case 4:return Fe(u,u.stateNode.containerInfo),m=u.pendingProps,l===null?u.child=Fu(u,null,m,h):Wr(l,u,m,h),u.child;case 11:return jE(l,u,u.type,u.pendingProps,h);case 7:return Wr(l,u,u.pendingProps,h),u.child;case 8:return Wr(l,u,u.pendingProps.children,h),u.child;case 12:return Wr(l,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,Vo(u,u.type,m.value),Wr(l,u,m.children,h),u.child;case 9:return _=u.type._context,m=u.pendingProps.children,hc(u),_=ri(_),m=m(_),u.flags|=1,Wr(l,u,m,h),u.child;case 14:return UE(l,u,u.type,u.pendingProps,h);case 15:return HE(l,u,u.type,u.pendingProps,h);case 19:return KE(l,u,h);case 31:return m=u.pendingProps,h=u.mode,m={mode:m.mode,children:m.children},l===null?(h=Zp(m,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Ys(l.child,m),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return zE(l,u,h);case 24:return hc(u),m=ri(xr),l===null?(_=Ky(),_===null&&(_=En,E=qy(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=h),_=E),u.memoizedState={parent:m,cache:_},Zy(u),Vo(u,xr,_)):((l.lanes&h)!==0&&(Jy(l,u),$f(u,null,null,h),zf()),_=l.memoizedState,E=u.memoizedState,_.parent!==m?(_={parent:m,cache:m},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Vo(u,xr,m)):(m=E.cache,Vo(u,xr,m),m!==_.cache&&Yy(u,[xr],h,!0))),Wr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function to(l){l.flags|=4}function ZE(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!sT(u)){if(u=la.current,u!==null&&((Bt&4194048)===Bt?cs!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||u!==cs))throw Uf=Qy,NA;l.flags|=8192}}function Jp(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?zr():536870912,l.lanes|=u,Hu|=u)}function Qf(l,u){if(!qt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Vn(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,m=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=m,l.childLanes=h,u}function s8(l,u,h){var m=u.pendingProps;switch(zy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(u),null;case 1:return Vn(u),null;case 3:return h=u.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Qs(xr),re(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(kf(u)?to(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,RA())),Vn(u),null;case 26:return h=u.memoizedState,l===null?(to(u),h!==null?(Vn(u),ZE(u,h)):(Vn(u),u.flags&=-16777217)):h?h!==l.memoizedState?(to(u),Vn(u),ZE(u,h)):(Vn(u),u.flags&=-16777217):(l.memoizedProps!==m&&to(u),Vn(u),u.flags&=-16777217),null;case 27:pe(u),h=Se.current;var _=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Vn(u),null}l=ke.current,kf(u)?IA(u):(l=ZS(_,m,h),u.stateNode=l,to(u))}return Vn(u),null;case 5:if(pe(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Vn(u),null}if(l=ke.current,kf(u))IA(u);else{switch(_=fg(Se.current),l){case 1:l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=_.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?_.createElement(h,{is:m.is}):_.createElement(h)}}l[mr]=u,l[sr]=m;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)l.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=l;e:switch(qr(l,h,m),h){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&to(u)}}return Vn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(l=Se.current,kf(u)){if(l=u.stateNode,h=u.memoizedProps,m=null,_=wi,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}l[mr]=u,l=!!(l.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||GS(l.nodeValue,h)),l||dc(u)}else l=fg(l).createTextNode(m),l[mr]=u,u.stateNode=l}return Vn(u),null;case 13:if(m=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=kf(u),m!==null&&m.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[mr]=u}else Nf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vn(u),_=!1}else _=RA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Js(u),u):(Js(u),null)}if(Js(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=m!==null,l=l!==null&&l.memoizedState!==null,h){m=u.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==_&&(m.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),Jp(u,u.updateQueue),Vn(u),null;case 4:return re(),l===null&&tx(u.stateNode.containerInfo),Vn(u),null;case 10:return Qs(u.type),Vn(u),null;case 19:if(xe(wr),_=u.memoizedState,_===null)return Vn(u),null;if(m=(u.flags&128)!==0,E=_.rendering,E===null)if(m)Qf(_,!1);else{if($n!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(E=qp(l),E!==null){for(u.flags|=128,Qf(_,!1),l=E.updateQueue,u.updateQueue=l,Jp(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)TA(h,l),h=h.sibling;return be(wr,wr.current&1|2),u.child}l=l.sibling}_.tail!==null&&Re()>ng&&(u.flags|=128,m=!0,Qf(_,!1),u.lanes=4194304)}else{if(!m)if(l=qp(E),l!==null){if(u.flags|=128,m=!0,l=l.updateQueue,u.updateQueue=l,Jp(u,l),Qf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!E.alternate&&!qt)return Vn(u),null}else 2*Re()-_.renderingStartTime>ng&&h!==536870912&&(u.flags|=128,m=!0,Qf(_,!1),u.lanes=4194304);_.isBackwards?(E.sibling=u.child,u.child=E):(l=_.last,l!==null?l.sibling=E:u.child=E,_.last=E)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Re(),u.sibling=null,l=wr.current,be(wr,m?l&1|2:l&1),u):(Vn(u),null);case 22:case 23:return Js(u),rv(),m=u.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(Vn(u),u.subtreeFlags&6&&(u.flags|=8192)):Vn(u),h=u.updateQueue,h!==null&&Jp(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),l!==null&&xe(pc),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Qs(xr),Vn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function o8(l,u){switch(zy(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Qs(xr),re(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return pe(u),null;case 13:if(Js(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Nf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return xe(wr),null;case 4:return re(),null;case 10:return Qs(u.type),null;case 22:case 23:return Js(u),rv(),l!==null&&xe(pc),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Qs(xr),null;case 25:return null;default:return null}}function JE(l,u){switch(zy(u),u.tag){case 3:Qs(xr),re();break;case 26:case 27:case 5:pe(u);break;case 4:re();break;case 13:Js(u);break;case 19:xe(wr);break;case 10:Qs(u.type);break;case 22:case 23:Js(u),rv(),l!==null&&xe(pc);break;case 24:Qs(xr)}}function Zf(l,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var _=m.next;h=_;do{if((h.tag&l)===l){m=void 0;var E=h.create,U=h.inst;m=E(),U.destroy=m}h=h.next}while(h!==_)}}catch(z){xn(u,u.return,z)}}function Wo(l,u,h){try{var m=u.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var E=_.next;m=E;do{if((m.tag&l)===l){var U=m.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,_=u;var K=h,le=z;try{le()}catch(Ee){xn(_,K,Ee)}}}m=m.next}while(m!==E)}}catch(Ee){xn(u,u.return,Ee)}}function eS(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{UA(u,h)}catch(m){xn(l,l.return,m)}}}function tS(l,u,h){h.props=mc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(m){xn(l,u,m)}}function Jf(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof h=="function"?l.refCleanup=h(m):h.current=m}}catch(_){xn(l,u,_)}}function us(l,u){var h=l.ref,m=l.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(_){xn(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){xn(l,u,_)}else h.current=null}function nS(l){var u=l.type,h=l.memoizedProps,m=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(_){xn(l,l.return,_)}}function Ov(l,u,h){try{var m=l.stateNode;I8(m,l.type,h,u),m[sr]=u}catch(_){xn(l,l.return,_)}}function rS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&el(l.type)||l.tag===4}function Mv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||rS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&el(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Pv(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=dg));else if(m!==4&&(m===27&&el(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Pv(l,u,h),l=l.sibling;l!==null;)Pv(l,u,h),l=l.sibling}function eg(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(m!==4&&(m===27&&el(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(eg(l,u,h),l=l.sibling;l!==null;)eg(l,u,h),l=l.sibling}function iS(l){var u=l.stateNode,h=l.memoizedProps;try{for(var m=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);qr(u,m,h),u[mr]=l,u[sr]=h}catch(E){xn(l,l.return,E)}}var no=!1,Qn=!1,kv=!1,aS=typeof WeakSet=="function"?WeakSet:Set,kr=null;function l8(l,u){if(l=l.containerInfo,ix=vg,l=mA(l),My(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var _=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var U=0,z=-1,K=-1,le=0,Ee=0,Ie=l,ue=null;t:for(;;){for(var fe;Ie!==h||_!==0&&Ie.nodeType!==3||(z=U+_),Ie!==E||m!==0&&Ie.nodeType!==3||(K=U+m),Ie.nodeType===3&&(U+=Ie.nodeValue.length),(fe=Ie.firstChild)!==null;)ue=Ie,Ie=fe;for(;;){if(Ie===l)break t;if(ue===h&&++le===_&&(z=U),ue===E&&++Ee===m&&(K=U),(fe=Ie.nextSibling)!==null)break;Ie=ue,ue=Ie.parentNode}Ie=fe}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(ax={focusedElem:l,selectionRange:h},vg=!1,kr=u;kr!==null;)if(u=kr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,kr=l;else for(;kr!==null;){switch(u=kr,E=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,h=u,_=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var ct=mc(h.type,_,h.elementType===h.type);l=m.getSnapshotBeforeUpdate(ct,E),m.__reactInternalSnapshotBeforeUpdate=l}catch(at){xn(h,h.return,at)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)lx(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":lx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,kr=l;break}kr=u.return}}function sS(l,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Yo(l,h),m&4&&Zf(5,h);break;case 1:if(Yo(l,h),m&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){xn(h,h.return,U)}else{var _=mc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){xn(h,h.return,U)}}m&64&&eS(h),m&512&&Jf(h,h.return);break;case 3:if(Yo(l,h),m&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{UA(l,u)}catch(U){xn(h,h.return,U)}}break;case 27:u===null&&m&4&&iS(h);case 26:case 5:Yo(l,h),u===null&&m&4&&nS(h),m&512&&Jf(h,h.return);break;case 12:Yo(l,h);break;case 13:Yo(l,h),m&4&&cS(l,h),m&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=y8.bind(null,h),N8(l,h))));break;case 22:if(m=h.memoizedState!==null||no,!m){u=u!==null&&u.memoizedState!==null||Qn,_=no;var E=Qn;no=m,(Qn=u)&&!E?qo(l,h,(h.subtreeFlags&8772)!==0):Yo(l,h),no=_,Qn=E}break;case 30:break;default:Yo(l,h)}}function oS(l){var u=l.alternate;u!==null&&(l.alternate=null,oS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&No(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pn=null,Oi=!1;function ro(l,u,h){for(h=h.child;h!==null;)lS(l,u,h),h=h.sibling}function lS(l,u,h){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(nt,h)}catch{}switch(h.tag){case 26:Qn||us(h,u),ro(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Qn||us(h,u);var m=Pn,_=Oi;el(h.type)&&(Pn=h.stateNode,Oi=!1),ro(l,u,h),lh(h.stateNode),Pn=m,Oi=_;break;case 5:Qn||us(h,u);case 6:if(m=Pn,_=Oi,Pn=null,ro(l,u,h),Pn=m,Oi=_,Pn!==null)if(Oi)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(h.stateNode)}catch(E){xn(h,u,E)}else try{Pn.removeChild(h.stateNode)}catch(E){xn(h,u,E)}break;case 18:Pn!==null&&(Oi?(l=Pn,KS(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),mh(l)):KS(Pn,h.stateNode));break;case 4:m=Pn,_=Oi,Pn=h.stateNode.containerInfo,Oi=!0,ro(l,u,h),Pn=m,Oi=_;break;case 0:case 11:case 14:case 15:Qn||Wo(2,h,u),Qn||Wo(4,h,u),ro(l,u,h);break;case 1:Qn||(us(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&tS(h,u,m)),ro(l,u,h);break;case 21:ro(l,u,h);break;case 22:Qn=(m=Qn)||h.memoizedState!==null,ro(l,u,h),Qn=m;break;default:ro(l,u,h)}}function cS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{mh(l)}catch(h){xn(u,u.return,h)}}function c8(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new aS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new aS),u;default:throw Error(r(435,l.tag))}}function Nv(l,u){var h=c8(l);u.forEach(function(m){var _=v8.bind(null,l,m);h.has(m)||(h.add(m),m.then(_,_))})}function zi(l,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var _=h[m],E=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(el(z.type)){Pn=z.stateNode,Oi=!1;break e}break;case 5:Pn=z.stateNode,Oi=!1;break e;case 3:case 4:Pn=z.stateNode.containerInfo,Oi=!0;break e}z=z.return}if(Pn===null)throw Error(r(160));lS(E,U,_),Pn=null,Oi=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)uS(u,l),u=u.sibling}var Ca=null;function uS(l,u){var h=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:zi(u,l),$i(l),m&4&&(Wo(3,l,l.return),Zf(3,l),Wo(5,l,l.return));break;case 1:zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),m&64&&no&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var _=Ca;if(zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=l.memoizedState,h===null)if(m===null)if(l.stateNode===null){e:{m=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(m){case"title":E=_.getElementsByTagName("title")[0],(!E||E[Gl]||E[mr]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(m),_.head.insertBefore(E,_.querySelector("head > title"))),qr(E,m,h),E[mr]=l,Xn(E),m=E;break e;case"link":var U=iT("link","href",_).get(m+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(E=U[z],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}E=_.createElement(m),qr(E,m,h),_.head.appendChild(E);break;case"meta":if(U=iT("meta","content",_).get(m+(h.content||""))){for(z=0;z<U.length;z++)if(E=U[z],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}E=_.createElement(m),qr(E,m,h),_.head.appendChild(E);break;default:throw Error(r(468,m))}E[mr]=l,Xn(E),m=E}l.stateNode=m}else aT(_,l.type,l.stateNode);else l.stateNode=rT(_,m,l.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?aT(_,l.type,l.stateNode):rT(_,m,l.memoizedProps)):m===null&&l.stateNode!==null&&Ov(l,l.memoizedProps,h.memoizedProps)}break;case 27:zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),h!==null&&m&4&&Ov(l,l.memoizedProps,h.memoizedProps);break;case 5:if(zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),l.flags&32){_=l.stateNode;try{ea(_,"")}catch(fe){xn(l,l.return,fe)}}m&4&&l.stateNode!=null&&(_=l.memoizedProps,Ov(l,_,h!==null?h.memoizedProps:_)),m&1024&&(kv=!0);break;case 6:if(zi(u,l),$i(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,h=l.stateNode;try{h.nodeValue=m}catch(fe){xn(l,l.return,fe)}}break;case 3:if(gg=null,_=Ca,Ca=hg(u.containerInfo),zi(u,l),Ca=_,$i(l),m&4&&h!==null&&h.memoizedState.isDehydrated)try{mh(u.containerInfo)}catch(fe){xn(l,l.return,fe)}kv&&(kv=!1,dS(l));break;case 4:m=Ca,Ca=hg(l.stateNode.containerInfo),zi(u,l),$i(l),Ca=m;break;case 12:zi(u,l),$i(l);break;case 13:zi(u,l),$i(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Uv=Re()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Nv(l,m)));break;case 22:_=l.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,le=no,Ee=Qn;if(no=le||_,Qn=Ee||K,zi(u,l),Qn=Ee,no=le,$i(l),m&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||K||no||Qn||yc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){K=h=u;try{if(E=K.stateNode,_)U=E.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=K.stateNode;var Ie=K.memoizedProps.style,ue=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;z.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(fe){xn(K,K.return,fe)}}}else if(u.tag===6){if(h===null){K=u;try{K.stateNode.nodeValue=_?"":K.memoizedProps}catch(fe){xn(K,K.return,fe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=l.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Nv(l,h))));break;case 19:zi(u,l),$i(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Nv(l,m)));break;case 30:break;case 21:break;default:zi(u,l),$i(l)}}function $i(l){var u=l.flags;if(u&2){try{for(var h,m=l.return;m!==null;){if(rS(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,E=Mv(l);eg(l,E,_);break;case 5:var U=h.stateNode;h.flags&32&&(ea(U,""),h.flags&=-33);var z=Mv(l);eg(l,z,U);break;case 3:case 4:var K=h.stateNode.containerInfo,le=Mv(l);Pv(l,le,K);break;default:throw Error(r(161))}}catch(Ee){xn(l,l.return,Ee)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function dS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;dS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Yo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)sS(l,u.alternate,u),u=u.sibling}function yc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Wo(4,u,u.return),yc(u);break;case 1:us(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&tS(u,u.return,h),yc(u);break;case 27:lh(u.stateNode);case 26:case 5:us(u,u.return),yc(u);break;case 22:u.memoizedState===null&&yc(u);break;case 30:yc(u);break;default:yc(u)}l=l.sibling}}function qo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,_=l,E=u,U=E.flags;switch(E.tag){case 0:case 11:case 15:qo(_,E,h),Zf(4,E);break;case 1:if(qo(_,E,h),m=E,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(le){xn(m,m.return,le)}if(m=E,_=m.updateQueue,_!==null){var z=m.stateNode;try{var K=_.shared.hiddenCallbacks;if(K!==null)for(_.shared.hiddenCallbacks=null,_=0;_<K.length;_++)jA(K[_],z)}catch(le){xn(m,m.return,le)}}h&&U&64&&eS(E),Jf(E,E.return);break;case 27:iS(E);case 26:case 5:qo(_,E,h),h&&m===null&&U&4&&nS(E),Jf(E,E.return);break;case 12:qo(_,E,h);break;case 13:qo(_,E,h),h&&U&4&&cS(_,E);break;case 22:E.memoizedState===null&&qo(_,E,h),Jf(E,E.return);break;case 30:break;default:qo(_,E,h)}u=u.sibling}}function Lv(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Ff(h))}function Bv(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ff(l))}function ds(l,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)fS(l,u,h,m),u=u.sibling}function fS(l,u,h,m){var _=u.flags;switch(u.tag){case 0:case 11:case 15:ds(l,u,h,m),_&2048&&Zf(9,u);break;case 1:ds(l,u,h,m);break;case 3:ds(l,u,h,m),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ff(l)));break;case 12:if(_&2048){ds(l,u,h,m),l=u.stateNode;try{var E=u.memoizedProps,U=E.id,z=E.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(K){xn(u,u.return,K)}}else ds(l,u,h,m);break;case 13:ds(l,u,h,m);break;case 23:break;case 22:E=u.stateNode,U=u.alternate,u.memoizedState!==null?E._visibility&2?ds(l,u,h,m):eh(l,u):E._visibility&2?ds(l,u,h,m):(E._visibility|=2,Vu(l,u,h,m,(u.subtreeFlags&10256)!==0)),_&2048&&Lv(U,u);break;case 24:ds(l,u,h,m),_&2048&&Bv(u.alternate,u);break;default:ds(l,u,h,m)}}function Vu(l,u,h,m,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var E=l,U=u,z=h,K=m,le=U.flags;switch(U.tag){case 0:case 11:case 15:Vu(E,U,z,K,_),Zf(8,U);break;case 23:break;case 22:var Ee=U.stateNode;U.memoizedState!==null?Ee._visibility&2?Vu(E,U,z,K,_):eh(E,U):(Ee._visibility|=2,Vu(E,U,z,K,_)),_&&le&2048&&Lv(U.alternate,U);break;case 24:Vu(E,U,z,K,_),_&&le&2048&&Bv(U.alternate,U);break;default:Vu(E,U,z,K,_)}u=u.sibling}}function eh(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,m=u,_=m.flags;switch(m.tag){case 22:eh(h,m),_&2048&&Lv(m.alternate,m);break;case 24:eh(h,m),_&2048&&Bv(m.alternate,m);break;default:eh(h,m)}u=u.sibling}}var th=8192;function ju(l){if(l.subtreeFlags&th)for(l=l.child;l!==null;)hS(l),l=l.sibling}function hS(l){switch(l.tag){case 26:ju(l),l.flags&th&&l.memoizedState!==null&&q8(Ca,l.memoizedState,l.memoizedProps);break;case 5:ju(l);break;case 3:case 4:var u=Ca;Ca=hg(l.stateNode.containerInfo),ju(l),Ca=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=th,th=16777216,ju(l),th=u):ju(l));break;default:ju(l)}}function pS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function nh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];kr=m,mS(m,l)}pS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)gS(l),l=l.sibling}function gS(l){switch(l.tag){case 0:case 11:case 15:nh(l),l.flags&2048&&Wo(9,l,l.return);break;case 3:nh(l);break;case 12:nh(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,tg(l)):nh(l);break;default:nh(l)}}function tg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];kr=m,mS(m,l)}pS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Wo(8,u,u.return),tg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,tg(u));break;default:tg(u)}l=l.sibling}}function mS(l,u){for(;kr!==null;){var h=kr;switch(h.tag){case 0:case 11:case 15:Wo(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ff(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,kr=m;else e:for(h=l;kr!==null;){m=kr;var _=m.sibling,E=m.return;if(oS(m),m===h){kr=null;break e}if(_!==null){_.return=E,kr=_;break e}kr=E}}}var u8={getCacheForType:function(l){var u=ri(xr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},d8=typeof WeakMap=="function"?WeakMap:Map,rn=0,En=null,It=null,Bt=0,an=0,Gi=null,Xo=!1,Uu=!1,Fv=!1,io=0,$n=0,Ko=0,vc=0,Vv=0,ca=0,Hu=0,rh=null,Mi=null,jv=!1,Uv=0,ng=1/0,rg=null,Qo=null,Yr=0,Zo=null,zu=null,$u=0,Hv=0,zv=null,yS=null,ih=0,$v=null;function Wi(){if((rn&2)!==0&&Bt!==0)return Bt&-Bt;if(W.T!==null){var l=Ou;return l!==0?l:Qv()}return ar()}function vS(){ca===0&&(ca=(Bt&536870912)===0||qt?qn():536870912);var l=la.current;return l!==null&&(l.flags|=32),ca}function Yi(l,u,h){(l===En&&(an===2||an===9)||l.cancelPendingCommit!==null)&&(Gu(l,0),Jo(l,Bt,ca,!1)),ir(l,h),((rn&2)===0||l!==En)&&(l===En&&((rn&2)===0&&(vc|=h),$n===4&&Jo(l,Bt,ca,!1)),fs(l))}function xS(l,u,h){if((rn&6)!==0)throw Error(r(327));var m=!h&&(u&124)===0&&(u&l.expiredLanes)===0||gt(l,u),_=m?p8(l,u):Yv(l,u,!0),E=m;do{if(_===0){Uu&&!m&&Jo(l,u,0,!1);break}else{if(h=l.current.alternate,E&&!f8(h)){_=Yv(l,u,!1),E=!1;continue}if(_===2){if(E=u,l.errorRecoveryDisabledLanes&E)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;_=rh;var K=z.current.memoizedState.isDehydrated;if(K&&(Gu(z,U).flags|=256),U=Yv(z,U,!1),U!==2){if(Fv&&!K){z.errorRecoveryDisabledLanes|=E,vc|=E,_=4;break e}E=Mi,Mi=_,E!==null&&(Mi===null?Mi=E:Mi.push.apply(Mi,E))}_=U}if(E=!1,_!==2)continue}}if(_===1){Gu(l,0),Jo(l,u,0,!0);break}e:{switch(m=l,E=_,E){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Jo(m,u,ca,!Xo);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Uv+300-Re(),10<_)){if(Jo(m,u,ca,!Xo),Hr(m,0,!0)!==0)break e;m.timeoutHandle=qS(wS.bind(null,m,h,Mi,rg,jv,u,ca,vc,Hu,Xo,E,2,-0,0),_);break e}wS(m,h,Mi,rg,jv,u,ca,vc,Hu,Xo,E,0,-0,0)}}break}while(!0);fs(l)}function wS(l,u,h,m,_,E,U,z,K,le,Ee,Ie,ue,fe){if(l.timeoutHandle=-1,Ie=u.subtreeFlags,(Ie&8192||(Ie&16785408)===16785408)&&(dh={stylesheets:null,count:0,unsuspend:Y8},hS(u),Ie=X8(),Ie!==null)){l.cancelPendingCommit=Ie(CS.bind(null,l,u,E,h,m,_,U,z,K,Ee,1,ue,fe)),Jo(l,E,U,!le);return}CS(l,u,E,h,m,_,U,z,K)}function f8(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var _=h[m],E=_.getSnapshot;_=_.value;try{if(!Ui(E(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Jo(l,u,h,m){u&=~Vv,u&=~vc,l.suspendedLanes|=u,l.pingedLanes&=~u,m&&(l.warmLanes|=u),m=l.expirationTimes;for(var _=u;0<_;){var E=31-Qe(_),U=1<<E;m[E]=-1,_&=~U}h!==0&&Zi(l,h,u)}function ig(){return(rn&6)===0?(ah(0),!1):!0}function Gv(){if(It!==null){if(an===0)var l=It.return;else l=It,Ks=fc=null,lv(l),Bu=null,Xf=0,l=It;for(;l!==null;)JE(l.alternate,l),l=l.return;It=null}}function Gu(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,R8(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Gv(),En=l,It=h=Ys(l.current,null),Bt=u,an=0,Gi=null,Xo=!1,Uu=gt(l,u),Fv=!1,Hu=ca=Vv=vc=Ko=$n=0,Mi=rh=null,jv=!1,(u&8)!==0&&(u|=u&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=u;0<m;){var _=31-Qe(m),E=1<<_;u|=l[_],m&=~E}return io=u,Tp(),h}function _S(l,u){bt=null,W.H=Gp,u===jf||u===Np?(u=FA(),an=3):u===NA?(u=FA(),an=4):an=u===VE?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Gi=u,It===null&&($n=1,Kp(l,ia(u,l.current)))}function bS(){var l=W.H;return W.H=Gp,l===null?Gp:l}function AS(){var l=W.A;return W.A=u8,l}function Wv(){$n=4,Xo||(Bt&4194048)!==Bt&&la.current!==null||(Uu=!0),(Ko&134217727)===0&&(vc&134217727)===0||En===null||Jo(En,Bt,ca,!1)}function Yv(l,u,h){var m=rn;rn|=2;var _=bS(),E=AS();(En!==l||Bt!==u)&&(rg=null,Gu(l,u)),u=!1;var U=$n;e:do try{if(an!==0&&It!==null){var z=It,K=Gi;switch(an){case 8:Gv(),U=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(u=!0);var le=an;if(an=0,Gi=null,Wu(l,z,K,le),h&&Uu){U=0;break e}break;default:le=an,an=0,Gi=null,Wu(l,z,K,le)}}h8(),U=$n;break}catch(Ee){_S(l,Ee)}while(!0);return u&&l.shellSuspendCounter++,Ks=fc=null,rn=m,W.H=_,W.A=E,It===null&&(En=null,Bt=0,Tp()),U}function h8(){for(;It!==null;)ES(It)}function p8(l,u){var h=rn;rn|=2;var m=bS(),_=AS();En!==l||Bt!==u?(rg=null,ng=Re()+500,Gu(l,u)):Uu=gt(l,u);e:do try{if(an!==0&&It!==null){u=It;var E=Gi;t:switch(an){case 1:an=0,Gi=null,Wu(l,u,E,1);break;case 2:case 9:if(LA(E)){an=0,Gi=null,SS(u);break}u=function(){an!==2&&an!==9||En!==l||(an=7),fs(l)},E.then(u,u);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:LA(E)?(an=0,Gi=null,SS(u)):(an=0,Gi=null,Wu(l,u,E,7));break;case 5:var U=null;switch(It.tag){case 26:U=It.memoizedState;case 5:case 27:var z=It;if(!U||sT(U)){an=0,Gi=null;var K=z.sibling;if(K!==null)It=K;else{var le=z.return;le!==null?(It=le,ag(le)):It=null}break t}}an=0,Gi=null,Wu(l,u,E,5);break;case 6:an=0,Gi=null,Wu(l,u,E,6);break;case 8:Gv(),$n=6;break e;default:throw Error(r(462))}}g8();break}catch(Ee){_S(l,Ee)}while(!0);return Ks=fc=null,W.H=m,W.A=_,rn=h,It!==null?0:(En=null,Bt=0,Tp(),$n)}function g8(){for(;It!==null&&!ze();)ES(It)}function ES(l){var u=QE(l.alternate,l,io);l.memoizedProps=l.pendingProps,u===null?ag(l):It=u}function SS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=GE(h,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=GE(h,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:lv(u);default:JE(h,u),u=It=TA(u,io),u=QE(h,u,io)}l.memoizedProps=l.pendingProps,u===null?ag(l):It=u}function Wu(l,u,h,m){Ks=fc=null,lv(u),Bu=null,Xf=0;var _=u.return;try{if(i8(l,_,u,h,Bt)){$n=1,Kp(l,ia(h,l.current)),It=null;return}}catch(E){if(_!==null)throw It=_,E;$n=1,Kp(l,ia(h,l.current)),It=null;return}u.flags&32768?(qt||m===1?l=!0:Uu||(Bt&536870912)!==0?l=!1:(Xo=l=!0,(m===2||m===9||m===3||m===6)&&(m=la.current,m!==null&&m.tag===13&&(m.flags|=16384))),TS(u,l)):ag(u)}function ag(l){var u=l;do{if((u.flags&32768)!==0){TS(u,Xo);return}l=u.return;var h=s8(u.alternate,u,io);if(h!==null){It=h;return}if(u=u.sibling,u!==null){It=u;return}It=u=l}while(u!==null);$n===0&&($n=5)}function TS(l,u){do{var h=o8(l.alternate,l);if(h!==null){h.flags&=32767,It=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){It=l;return}It=l=h}while(l!==null);$n=6,It=null}function CS(l,u,h,m,_,E,U,z,K){l.cancelPendingCommit=null;do sg();while(Yr!==0);if((rn&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(E=u.lanes|u.childLanes,E|=By,zl(l,h,E,U,z,K),l===En&&(It=En=null,Bt=0),zu=u,Zo=l,$u=h,Hv=E,zv=_,yS=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,x8(Ne,function(){return MS(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=W.T,W.T=null,_=G.p,G.p=2,U=rn,rn|=4;try{l8(l,u,h)}finally{rn=U,G.p=_,W.T=m}}Yr=1,IS(),DS(),RS()}}function IS(){if(Yr===1){Yr=0;var l=Zo,u=zu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var m=G.p;G.p=2;var _=rn;rn|=4;try{uS(u,l);var E=ax,U=mA(l.containerInfo),z=E.focusedElem,K=E.selectionRange;if(U!==z&&z&&z.ownerDocument&&gA(z.ownerDocument.documentElement,z)){if(K!==null&&My(z)){var le=K.start,Ee=K.end;if(Ee===void 0&&(Ee=le),"selectionStart"in z)z.selectionStart=le,z.selectionEnd=Math.min(Ee,z.value.length);else{var Ie=z.ownerDocument||document,ue=Ie&&Ie.defaultView||window;if(ue.getSelection){var fe=ue.getSelection(),ct=z.textContent.length,at=Math.min(K.start,ct),fn=K.end===void 0?at:Math.min(K.end,ct);!fe.extend&&at>fn&&(U=fn,fn=at,at=U);var ee=pA(z,at),J=pA(z,fn);if(ee&&J&&(fe.rangeCount!==1||fe.anchorNode!==ee.node||fe.anchorOffset!==ee.offset||fe.focusNode!==J.node||fe.focusOffset!==J.offset)){var oe=Ie.createRange();oe.setStart(ee.node,ee.offset),fe.removeAllRanges(),at>fn?(fe.addRange(oe),fe.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),fe.addRange(oe))}}}}for(Ie=[],fe=z;fe=fe.parentNode;)fe.nodeType===1&&Ie.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ie.length;z++){var Ce=Ie[z];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}vg=!!ix,ax=ix=null}finally{rn=_,G.p=m,W.T=h}}l.current=u,Yr=2}}function DS(){if(Yr===2){Yr=0;var l=Zo,u=zu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var m=G.p;G.p=2;var _=rn;rn|=4;try{sS(l,u.alternate,u)}finally{rn=_,G.p=m,W.T=h}}Yr=3}}function RS(){if(Yr===4||Yr===3){Yr=0,Me();var l=Zo,u=zu,h=$u,m=yS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Yr=5:(Yr=0,zu=Zo=null,OS(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Qo=null),vn(h),u=u.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(nt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=W.T,_=G.p,G.p=2,W.T=null;try{for(var E=l.onRecoverableError,U=0;U<m.length;U++){var z=m[U];E(z.value,{componentStack:z.stack})}}finally{W.T=u,G.p=_}}($u&3)!==0&&sg(),fs(l),_=l.pendingLanes,(h&4194090)!==0&&(_&42)!==0?l===$v?ih++:(ih=0,$v=l):ih=0,ah(0)}}function OS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Ff(u)))}function sg(l){return IS(),DS(),RS(),MS()}function MS(){if(Yr!==5)return!1;var l=Zo,u=Hv;Hv=0;var h=vn($u),m=W.T,_=G.p;try{G.p=32>h?32:h,W.T=null,h=zv,zv=null;var E=Zo,U=$u;if(Yr=0,zu=Zo=null,$u=0,(rn&6)!==0)throw Error(r(331));var z=rn;if(rn|=4,gS(E.current),fS(E,E.current,U,h),rn=z,ah(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(nt,E)}catch{}return!0}finally{G.p=_,W.T=m,OS(l,u)}}function PS(l,u,h){u=ia(h,u),u=bv(l.stateNode,u,2),l=Ho(l,u,2),l!==null&&(ir(l,2),fs(l))}function xn(l,u,h){if(l.tag===3)PS(l,l,h);else for(;u!==null;){if(u.tag===3){PS(u,l,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Qo===null||!Qo.has(m))){l=ia(h,l),h=BE(2),m=Ho(u,h,2),m!==null&&(FE(h,m,u,l),ir(m,2),fs(m));break}}u=u.return}}function qv(l,u,h){var m=l.pingCache;if(m===null){m=l.pingCache=new d8;var _=new Set;m.set(u,_)}else _=m.get(u),_===void 0&&(_=new Set,m.set(u,_));_.has(h)||(Fv=!0,_.add(h),l=m8.bind(null,l,u,h),u.then(l,l))}function m8(l,u,h){var m=l.pingCache;m!==null&&m.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,En===l&&(Bt&h)===h&&($n===4||$n===3&&(Bt&62914560)===Bt&&300>Re()-Uv?(rn&2)===0&&Gu(l,0):Vv|=h,Hu===Bt&&(Hu=0)),fs(l)}function kS(l,u){u===0&&(u=zr()),l=Cu(l,u),l!==null&&(ir(l,u),fs(l))}function y8(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),kS(l,h)}function v8(l,u){var h=0;switch(l.tag){case 13:var m=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),kS(l,h)}function x8(l,u){return Ve(l,u)}var og=null,Yu=null,Xv=!1,lg=!1,Kv=!1,xc=0;function fs(l){l!==Yu&&l.next===null&&(Yu===null?og=Yu=l:Yu=Yu.next=l),lg=!0,Xv||(Xv=!0,_8())}function ah(l,u){if(!Kv&&lg){Kv=!0;do for(var h=!1,m=og;m!==null;){if(l!==0){var _=m.pendingLanes;if(_===0)var E=0;else{var U=m.suspendedLanes,z=m.pingedLanes;E=(1<<31-Qe(42|l)+1)-1,E&=_&~(U&~z),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,FS(m,E))}else E=Bt,E=Hr(m,m===En?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||gt(m,E)||(h=!0,FS(m,E));m=m.next}while(h);Kv=!1}}function w8(){NS()}function NS(){lg=Xv=!1;var l=0;xc!==0&&(D8()&&(l=xc),xc=0);for(var u=Re(),h=null,m=og;m!==null;){var _=m.next,E=LS(m,u);E===0?(m.next=null,h===null?og=_:h.next=_,_===null&&(Yu=h)):(h=m,(l!==0||(E&3)!==0)&&(lg=!0)),m=_}ah(l)}function LS(l,u){for(var h=l.suspendedLanes,m=l.pingedLanes,_=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var U=31-Qe(E),z=1<<U,K=_[U];K===-1?((z&h)===0||(z&m)!==0)&&(_[U]=Fn(z,u)):K<=u&&(l.expiredLanes|=z),E&=~z}if(u=En,h=Bt,h=Hr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,h===0||l===u&&(an===2||an===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&we(m),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||gt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(m!==null&&we(m),vn(h)){case 2:case 8:h=Oe;break;case 32:h=Ne;break;case 268435456:h=_t;break;default:h=Ne}return m=BS.bind(null,l),h=Ve(h,m),l.callbackPriority=u,l.callbackNode=h,u}return m!==null&&m!==null&&we(m),l.callbackPriority=2,l.callbackNode=null,2}function BS(l,u){if(Yr!==0&&Yr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(sg()&&l.callbackNode!==h)return null;var m=Bt;return m=Hr(l,l===En?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(xS(l,m,u),LS(l,Re()),l.callbackNode!=null&&l.callbackNode===h?BS.bind(null,l):null)}function FS(l,u){if(sg())return null;xS(l,u,!0)}function _8(){O8(function(){(rn&6)!==0?Ve(Ge,w8):NS()})}function Qv(){return xc===0&&(xc=qn()),xc}function VS(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:gu(""+l)}function jS(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function b8(l,u,h,m,_){if(u==="submit"&&h&&h.stateNode===_){var E=VS((_[sr]||null).action),U=m.submitter;U&&(u=(u=U[sr]||null)?VS(u.formAction):U.getAttribute("formAction"),u!==null&&(E=u,U=null));var z=new mu("action","action",null,m,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(xc!==0){var K=U?jS(_,U):new FormData(_);yv(h,{pending:!0,data:K,method:_.method,action:E},null,K)}}else typeof E=="function"&&(z.preventDefault(),K=U?jS(_,U):new FormData(_),yv(h,{pending:!0,data:K,method:_.method,action:E},E,K))},currentTarget:_}]})}}for(var Zv=0;Zv<Ly.length;Zv++){var Jv=Ly[Zv],A8=Jv.toLowerCase(),E8=Jv[0].toUpperCase()+Jv.slice(1);Ta(A8,"on"+E8)}Ta(xA,"onAnimationEnd"),Ta(wA,"onAnimationIteration"),Ta(_A,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(U6,"onTransitionRun"),Ta(H6,"onTransitionStart"),Ta(z6,"onTransitionCancel"),Ta(bA,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sh));function US(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var m=l[h],_=m.event;m=m.listeners;e:{var E=void 0;if(u)for(var U=m.length-1;0<=U;U--){var z=m[U],K=z.instance,le=z.currentTarget;if(z=z.listener,K!==E&&_.isPropagationStopped())break e;E=z,_.currentTarget=le;try{E(_)}catch(Ee){Xp(Ee)}_.currentTarget=null,E=K}else for(U=0;U<m.length;U++){if(z=m[U],K=z.instance,le=z.currentTarget,z=z.listener,K!==E&&_.isPropagationStopped())break e;E=z,_.currentTarget=le;try{E(_)}catch(Ee){Xp(Ee)}_.currentTarget=null,E=K}}}}function Dt(l,u){var h=u[yf];h===void 0&&(h=u[yf]=new Set);var m=l+"__bubble";h.has(m)||(HS(u,l,2,!1),h.add(m))}function ex(l,u,h){var m=0;u&&(m|=4),HS(h,l,m,u)}var cg="_reactListening"+Math.random().toString(36).slice(2);function tx(l){if(!l[cg]){l[cg]=!0,vf.forEach(function(h){h!=="selectionchange"&&(S8.has(h)||ex(h,!1,l),ex(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[cg]||(u[cg]=!0,ex("selectionchange",!1,u))}}function HS(l,u,h,m){switch(fT(u)){case 2:var _=Z8;break;case 8:_=J8;break;default:_=gx}h=_.bind(null,u,h,l),_=void 0,!na||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),m?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function nx(l,u,h,m,_){var E=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var z=m.stateNode.containerInfo;if(z===_)break;if(U===4)for(U=m.return;U!==null;){var K=U.tag;if((K===3||K===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;z!==null;){if(U=Bs(z),U===null)return;if(K=U.tag,K===5||K===6||K===26||K===27){m=E=U;continue e}z=z.parentNode}}m=m.return}dp(function(){var le=E,Ee=ta(h),Ie=[];e:{var ue=AA.get(l);if(ue!==void 0){var fe=mu,ct=l;switch(l){case"keypress":if(rs(h)===0)break e;case"keydown":case"keyup":fe=bu;break;case"focusin":ct="focus",fe=xu;break;case"focusout":ct="blur",fe=xu;break;case"beforeblur":case"afterblur":fe=xu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=xp;break;case xA:case wA:case _A:fe=wu;break;case bA:fe=_p;break;case"scroll":case"scrollend":fe=fp;break;case"wheel":fe=Au;break;case"copy":case"cut":case"paste":fe=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Rf;break;case"toggle":case"beforetoggle":fe=Ap}var at=(u&4)!==0,fn=!at&&(l==="scroll"||l==="scrollend"),ee=at?ue!==null?ue+"Capture":null:ue;at=[];for(var J=le,oe;J!==null;){var Ce=J;if(oe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||oe===null||ee===null||(Ce=Zl(J,ee),Ce!=null&&at.push(oh(J,Ce,oe))),fn)break;J=J.return}0<at.length&&(ue=new fe(ue,ct,null,h,Ee),Ie.push({event:ue,listeners:at}))}}if((u&7)===0){e:{if(ue=l==="mouseover"||l==="pointerover",fe=l==="mouseout"||l==="pointerout",ue&&h!==Us&&(ct=h.relatedTarget||h.fromElement)&&(Bs(ct)||ct[Ji]))break e;if((fe||ue)&&(ue=Ee.window===Ee?Ee:(ue=Ee.ownerDocument)?ue.defaultView||ue.parentWindow:window,fe?(ct=h.relatedTarget||h.toElement,fe=le,ct=ct?Bs(ct):null,ct!==null&&(fn=a(ct),at=ct.tag,ct!==fn||at!==5&&at!==27&&at!==6)&&(ct=null)):(fe=null,ct=le),fe!==ct)){if(at=ra,Ce="onMouseLeave",ee="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(at=Rf,Ce="onPointerLeave",ee="onPointerEnter",J="pointer"),fn=fe==null?ue:Ja(fe),oe=ct==null?ue:Ja(ct),ue=new at(Ce,J+"leave",fe,h,Ee),ue.target=fn,ue.relatedTarget=oe,Ce=null,Bs(Ee)===le&&(at=new at(ee,J+"enter",ct,h,Ee),at.target=oe,at.relatedTarget=fn,Ce=at),fn=Ce,fe&&ct)t:{for(at=fe,ee=ct,J=0,oe=at;oe;oe=qu(oe))J++;for(oe=0,Ce=ee;Ce;Ce=qu(Ce))oe++;for(;0<J-oe;)at=qu(at),J--;for(;0<oe-J;)ee=qu(ee),oe--;for(;J--;){if(at===ee||ee!==null&&at===ee.alternate)break t;at=qu(at),ee=qu(ee)}at=null}else at=null;fe!==null&&zS(Ie,ue,fe,at,!1),ct!==null&&fn!==null&&zS(Ie,fn,ct,at,!0)}}e:{if(ue=le?Ja(le):window,fe=ue.nodeName&&ue.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ue.type==="file")var qe=lA;else if(vr(ue))if(cA)qe=F6;else{qe=L6;var Tt=N6}else fe=ue.nodeName,!fe||fe.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Af(le.elementType)&&(qe=lA):qe=B6;if(qe&&(qe=qe(l,le))){Ws(Ie,qe,h,Ee);break e}Tt&&Tt(l,ue,le),l==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Bo(ue,"number",ue.value)}switch(Tt=le?Ja(le):window,l){case"focusin":(vr(Tt)||Tt.contentEditable==="true")&&(Eu=Tt,Py=le,Pf=null);break;case"focusout":Pf=Py=Eu=null;break;case"mousedown":ky=!0;break;case"contextmenu":case"mouseup":case"dragend":ky=!1,yA(Ie,h,Ee);break;case"selectionchange":if(j6)break;case"keydown":case"keyup":yA(Ie,h,Ee)}var Ze;if(ss)e:{switch(l){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Nt?me(l,h)&&(st="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(j&&h.locale!=="ko"&&(Nt||st!=="onCompositionStart"?st==="onCompositionEnd"&&Nt&&(Ze=Sf()):(ns=Ee,Fo="value"in ns?ns.value:ns.textContent,Nt=!0)),Tt=ug(le,st),0<Tt.length&&(st=new If(st,l,null,h,Ee),Ie.push({event:st,listeners:Tt}),Ze?st.data=Ze:(Ze=Le(h),Ze!==null&&(st.data=Ze)))),(Ze=k?yr(l,h):Lt(l,h))&&(st=ug(le,"onBeforeInput"),0<st.length&&(Tt=new If("onBeforeInput","beforeinput",null,h,Ee),Ie.push({event:Tt,listeners:st}),Tt.data=Ze)),b8(Ie,l,le,h,Ee)}US(Ie,u)})}function oh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function ug(l,u){for(var h=u+"Capture",m=[];l!==null;){var _=l,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Zl(l,h),_!=null&&m.unshift(oh(l,_,E)),_=Zl(l,u),_!=null&&m.push(oh(l,_,E))),l.tag===3)return m;l=l.return}return[]}function qu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function zS(l,u,h,m,_){for(var E=u._reactName,U=[];h!==null&&h!==m;){var z=h,K=z.alternate,le=z.stateNode;if(z=z.tag,K!==null&&K===m)break;z!==5&&z!==26&&z!==27||le===null||(K=le,_?(le=Zl(h,E),le!=null&&U.unshift(oh(h,le,K))):_||(le=Zl(h,E),le!=null&&U.push(oh(h,le,K)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var T8=/\r\n?/g,C8=/\u0000|\uFFFD/g;function $S(l){return(typeof l=="string"?l:""+l).replace(T8,`
`).replace(C8,"")}function GS(l,u){return u=$S(u),$S(l)===u}function dg(){}function dn(l,u,h,m,_,E){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||ea(l,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&ea(l,""+m);break;case"className":es(l,"class",m);break;case"tabIndex":es(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":es(l,h,m);break;case"style":bf(l,m,E);break;case"data":if(u!=="object"){es(l,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=gu(""+m),l.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&dn(l,u,"name",_.name,_,null),dn(l,u,"formEncType",_.formEncType,_,null),dn(l,u,"formMethod",_.formMethod,_,null),dn(l,u,"formTarget",_.formTarget,_,null)):(dn(l,u,"encType",_.encType,_,null),dn(l,u,"method",_.method,_,null),dn(l,u,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=gu(""+m),l.setAttribute(h,m);break;case"onClick":m!=null&&(l.onclick=dg);break;case"onScroll":m!=null&&Dt("scroll",l);break;case"onScrollEnd":m!=null&&Dt("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}h=gu(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""+m):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":m===!0?l.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,m):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(h,m):l.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(h):l.setAttribute(h,m);break;case"popover":Dt("beforetoggle",l),Dt("toggle",l),Lo(l,"popover",m);break;case"xlinkActuate":$r(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$r(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$r(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$r(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$r(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$r(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$r(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$r(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$r(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Lo(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Ty.get(h)||h,Lo(l,h,m))}}function rx(l,u,h,m,_,E){switch(h){case"style":bf(l,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof m=="string"?ea(l,m):(typeof m=="number"||typeof m=="bigint")&&ea(l,""+m);break;case"onScroll":m!=null&&Dt("scroll",l);break;case"onScrollEnd":m!=null&&Dt("scrollend",l);break;case"onClick":m!=null&&(l.onclick=dg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),E=l[sr]||null,E=E!=null?E[h]:null,typeof E=="function"&&l.removeEventListener(u,E,_),typeof m=="function")){typeof E!="function"&&E!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,m,_);break e}h in l?l[h]=m:m===!0?l.setAttribute(h,""):Lo(l,h,m)}}}function qr(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",l),Dt("load",l);var m=!1,_=!1,E;for(E in h)if(h.hasOwnProperty(E)){var U=h[E];if(U!=null)switch(E){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,E,U,h,null)}}_&&dn(l,u,"srcSet",h.srcSet,h,null),m&&dn(l,u,"src",h.src,h,null);return;case"input":Dt("invalid",l);var z=E=U=_=null,K=null,le=null;for(m in h)if(h.hasOwnProperty(m)){var Ee=h[m];if(Ee!=null)switch(m){case"name":_=Ee;break;case"type":U=Ee;break;case"checked":K=Ee;break;case"defaultChecked":le=Ee;break;case"value":E=Ee;break;case"defaultValue":z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,u));break;default:dn(l,u,m,Ee,h,null)}}Xl(l,E,z,K,le,U,_,!1),pu(l);return;case"select":Dt("invalid",l),m=U=E=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":E=z;break;case"defaultValue":U=z;break;case"multiple":m=z;default:dn(l,u,_,z,h,null)}u=E,h=U,l.multiple=!!m,u!=null?js(l,!!m,u,!1):h!=null&&js(l,!!m,h,!0);return;case"textarea":Dt("invalid",l),E=_=m=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":m=z;break;case"defaultValue":_=z;break;case"children":E=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:dn(l,u,U,z,h,null)}Kl(l,m,_,E),pu(l);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(m=h[K],m!=null))switch(K){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dn(l,u,K,m,h,null)}return;case"dialog":Dt("beforetoggle",l),Dt("toggle",l),Dt("cancel",l),Dt("close",l);break;case"iframe":case"object":Dt("load",l);break;case"video":case"audio":for(m=0;m<sh.length;m++)Dt(sh[m],l);break;case"image":Dt("error",l),Dt("load",l);break;case"details":Dt("toggle",l);break;case"embed":case"source":case"link":Dt("error",l),Dt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(m=h[le],m!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,le,m,h,null)}return;default:if(Af(u)){for(Ee in h)h.hasOwnProperty(Ee)&&(m=h[Ee],m!==void 0&&rx(l,u,Ee,m,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(m=h[z],m!=null&&dn(l,u,z,m,h,null))}function I8(l,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,U=null,z=null,K=null,le=null,Ee=null;for(fe in h){var Ie=h[fe];if(h.hasOwnProperty(fe)&&Ie!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":K=Ie;default:m.hasOwnProperty(fe)||dn(l,u,fe,null,m,Ie)}}for(var ue in m){var fe=m[ue];if(Ie=h[ue],m.hasOwnProperty(ue)&&(fe!=null||Ie!=null))switch(ue){case"type":E=fe;break;case"name":_=fe;break;case"checked":le=fe;break;case"defaultChecked":Ee=fe;break;case"value":U=fe;break;case"defaultValue":z=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,u));break;default:fe!==Ie&&dn(l,u,ue,fe,m,Ie)}}ji(l,U,z,K,le,Ee,E,_);return;case"select":fe=U=z=ue=null;for(E in h)if(K=h[E],h.hasOwnProperty(E)&&K!=null)switch(E){case"value":break;case"multiple":fe=K;default:m.hasOwnProperty(E)||dn(l,u,E,null,m,K)}for(_ in m)if(E=m[_],K=h[_],m.hasOwnProperty(_)&&(E!=null||K!=null))switch(_){case"value":ue=E;break;case"defaultValue":z=E;break;case"multiple":U=E;default:E!==K&&dn(l,u,_,E,m,K)}u=z,h=U,m=fe,ue!=null?js(l,!!h,ue,!1):!!m!=!!h&&(u!=null?js(l,!!h,u,!0):js(l,!!h,h?[]:"",!1));return;case"textarea":fe=ue=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:dn(l,u,z,null,m,_)}for(U in m)if(_=m[U],E=h[U],m.hasOwnProperty(U)&&(_!=null||E!=null))switch(U){case"value":ue=_;break;case"defaultValue":fe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==E&&dn(l,u,U,_,m,E)}cn(l,ue,fe);return;case"option":for(var ct in h)if(ue=h[ct],h.hasOwnProperty(ct)&&ue!=null&&!m.hasOwnProperty(ct))switch(ct){case"selected":l.selected=!1;break;default:dn(l,u,ct,null,m,ue)}for(K in m)if(ue=m[K],fe=h[K],m.hasOwnProperty(K)&&ue!==fe&&(ue!=null||fe!=null))switch(K){case"selected":l.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:dn(l,u,K,ue,m,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in h)ue=h[at],h.hasOwnProperty(at)&&ue!=null&&!m.hasOwnProperty(at)&&dn(l,u,at,null,m,ue);for(le in m)if(ue=m[le],fe=h[le],m.hasOwnProperty(le)&&ue!==fe&&(ue!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:dn(l,u,le,ue,m,fe)}return;default:if(Af(u)){for(var fn in h)ue=h[fn],h.hasOwnProperty(fn)&&ue!==void 0&&!m.hasOwnProperty(fn)&&rx(l,u,fn,void 0,m,ue);for(Ee in m)ue=m[Ee],fe=h[Ee],!m.hasOwnProperty(Ee)||ue===fe||ue===void 0&&fe===void 0||rx(l,u,Ee,ue,m,fe);return}}for(var ee in h)ue=h[ee],h.hasOwnProperty(ee)&&ue!=null&&!m.hasOwnProperty(ee)&&dn(l,u,ee,null,m,ue);for(Ie in m)ue=m[Ie],fe=h[Ie],!m.hasOwnProperty(Ie)||ue===fe||ue==null&&fe==null||dn(l,u,Ie,ue,m,fe)}var ix=null,ax=null;function fg(l){return l.nodeType===9?l:l.ownerDocument}function WS(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YS(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function sx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ox=null;function D8(){var l=window.event;return l&&l.type==="popstate"?l===ox?!1:(ox=l,!0):(ox=null,!1)}var qS=typeof setTimeout=="function"?setTimeout:void 0,R8=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,O8=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(l){return XS.resolve(null).then(l).catch(M8)}:qS;function M8(l){setTimeout(function(){throw l})}function el(l){return l==="head"}function KS(l,u){var h=u,m=0,_=0;do{var E=h.nextSibling;if(l.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(0<m&&8>m){h=m;var U=l.ownerDocument;if(h&1&&lh(U.documentElement),h&2&&lh(U.body),h&4)for(h=U.head,lh(h),U=h.firstChild;U;){var z=U.nextSibling,K=U.nodeName;U[Gl]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(_===0){l.removeChild(E),mh(u);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:m=h.charCodeAt(0)-48;else m=0;h=E}while(h);mh(u)}function lx(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":lx(h),No(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function P8(l,u,h,m){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Gl])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=Ia(l.nextSibling),l===null)break}return null}function k8(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Ia(l.nextSibling),l===null))return null;return l}function cx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function N8(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Ia(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var ux=null;function QS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function ZS(l,u,h){switch(u=fg(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function lh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);No(l)}var ua=new Map,JS=new Set;function hg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ao=G.d;G.d={f:L8,r:B8,D:F8,C:V8,L:j8,m:U8,X:z8,S:H8,M:$8};function L8(){var l=ao.f(),u=ig();return l||u}function B8(l){var u=Za(l);u!==null&&u.tag===5&&u.type==="form"?xE(u):ao.r(l)}var Xu=typeof document>"u"?null:document;function eT(l,u,h){var m=Xu;if(m&&typeof u=="string"&&u){var _=or(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),JS.has(_)||(JS.add(_),l={rel:l,crossOrigin:h,href:u},m.querySelector(_)===null&&(u=m.createElement("link"),qr(u,"link",l),Xn(u),m.head.appendChild(u)))}}function F8(l){ao.D(l),eT("dns-prefetch",l,null)}function V8(l,u){ao.C(l,u),eT("preconnect",l,u)}function j8(l,u,h){ao.L(l,u,h);var m=Xu;if(m&&l&&u){var _='link[rel="preload"][as="'+or(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+or(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+or(h.imageSizes)+'"]')):_+='[href="'+or(l)+'"]';var E=_;switch(u){case"style":E=Ku(l);break;case"script":E=Qu(l)}ua.has(E)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),ua.set(E,l),m.querySelector(_)!==null||u==="style"&&m.querySelector(ch(E))||u==="script"&&m.querySelector(uh(E))||(u=m.createElement("link"),qr(u,"link",l),Xn(u),m.head.appendChild(u)))}}function U8(l,u){ao.m(l,u);var h=Xu;if(h&&l){var m=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+or(m)+'"][href="'+or(l)+'"]',E=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Qu(l)}if(!ua.has(E)&&(l=f({rel:"modulepreload",href:l},u),ua.set(E,l),h.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(uh(E)))return}m=h.createElement("link"),qr(m,"link",l),Xn(m),h.head.appendChild(m)}}}function H8(l,u,h){ao.S(l,u,h);var m=Xu;if(m&&l){var _=yi(m).hoistableStyles,E=Ku(l);u=u||"default";var U=_.get(E);if(!U){var z={loading:0,preload:null};if(U=m.querySelector(ch(E)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=ua.get(E))&&dx(l,h);var K=U=m.createElement("link");Xn(K),qr(K,"link",l),K._p=new Promise(function(le,Ee){K.onload=le,K.onerror=Ee}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,pg(U,u,m)}U={type:"stylesheet",instance:U,count:1,state:z},_.set(E,U)}}}function z8(l,u){ao.X(l,u);var h=Xu;if(h&&l){var m=yi(h).hoistableScripts,_=Qu(l),E=m.get(_);E||(E=h.querySelector(uh(_)),E||(l=f({src:l,async:!0},u),(u=ua.get(_))&&fx(l,u),E=h.createElement("script"),Xn(E),qr(E,"link",l),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(_,E))}}function $8(l,u){ao.M(l,u);var h=Xu;if(h&&l){var m=yi(h).hoistableScripts,_=Qu(l),E=m.get(_);E||(E=h.querySelector(uh(_)),E||(l=f({src:l,async:!0,type:"module"},u),(u=ua.get(_))&&fx(l,u),E=h.createElement("script"),Xn(E),qr(E,"link",l),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(_,E))}}function tT(l,u,h,m){var _=(_=Se.current)?hg(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Ku(h.href),h=yi(_).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Ku(h.href);var E=yi(_).hoistableStyles,U=E.get(l);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,U),(E=_.querySelector(ch(l)))&&!E._p&&(U.instance=E,U.state.loading=5),ua.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ua.set(l,h),E||G8(_,l,h,U.state))),u&&m===null)throw Error(r(528,""));return U}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Qu(h),h=yi(_).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Ku(l){return'href="'+or(l)+'"'}function ch(l){return'link[rel="stylesheet"]['+l+"]"}function nT(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function G8(l,u,h,m){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=l.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),qr(u,"link",h),Xn(u),l.head.appendChild(u))}function Qu(l){return'[src="'+or(l)+'"]'}function uh(l){return"script[async]"+l}function rT(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=l.querySelector('style[data-href~="'+or(h.href)+'"]');if(m)return u.instance=m,Xn(m),m;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),Xn(m),qr(m,"style",_),pg(m,h.precedence,l),u.instance=m;case"stylesheet":_=Ku(h.href);var E=l.querySelector(ch(_));if(E)return u.state.loading|=4,u.instance=E,Xn(E),E;m=nT(h),(_=ua.get(_))&&dx(m,_),E=(l.ownerDocument||l).createElement("link"),Xn(E);var U=E;return U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),qr(E,"link",m),u.state.loading|=4,pg(E,h.precedence,l),u.instance=E;case"script":return E=Qu(h.src),(_=l.querySelector(uh(E)))?(u.instance=_,Xn(_),_):(m=h,(_=ua.get(E))&&(m=f({},h),fx(m,_)),l=l.ownerDocument||l,_=l.createElement("script"),Xn(_),qr(_,"link",m),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,pg(m,h.precedence,l));return u.instance}function pg(l,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,E=_,U=0;U<m.length;U++){var z=m[U];if(z.dataset.precedence===u)E=z;else if(E!==_)break}E?E.parentNode.insertBefore(l,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function dx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function fx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var gg=null;function iT(l,u,h){if(gg===null){var m=new Map,_=gg=new Map;_.set(h,m)}else _=gg,m=_.get(h),m||(m=new Map,_.set(h,m));if(m.has(l))return m;for(m.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var E=h[_];if(!(E[Gl]||E[mr]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var U=E.getAttribute(u)||"";U=l+U;var z=m.get(U);z?z.push(E):m.set(U,[E])}}return m}function aT(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function W8(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function sT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var dh=null;function Y8(){}function q8(l,u,h){if(dh===null)throw Error(r(475));var m=dh;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ku(h.href),E=l.querySelector(ch(_));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=mg.bind(m),l.then(m,m)),u.state.loading|=4,u.instance=E,Xn(E);return}E=l.ownerDocument||l,h=nT(h),(_=ua.get(_))&&dx(h,_),E=E.createElement("link"),Xn(E);var U=E;U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),qr(E,"link",h),u.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=mg.bind(m),l.addEventListener("load",u),l.addEventListener("error",u))}}function X8(){if(dh===null)throw Error(r(475));var l=dh;return l.stylesheets&&l.count===0&&hx(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&hx(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function mg(){if(this.count--,this.count===0){if(this.stylesheets)hx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var yg=null;function hx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,yg=new Map,u.forEach(K8,l),yg=null,mg.call(l))}function K8(l,u){if(!(u.state.loading&4)){var h=yg.get(l);if(h)var m=h.get(null);else{h=new Map,yg.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var U=_[E];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}_=u.instance,U=_.getAttribute("data-precedence"),E=h.get(U)||m,E===m&&h.set(null,_),h.set(U,_),this.count++,m=mg.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),E?E.parentNode.insertBefore(_,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var fh={$$typeof:I,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Q8(l,u,h,m,_,E,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function oT(l,u,h,m,_,E,U,z,K,le,Ee,Ie){return l=new Q8(l,u,h,U,z,K,le,Ie),u=1,E===!0&&(u|=24),E=Hi(3,null,null,u),l.current=E,E.stateNode=l,u=qy(),u.refCount++,l.pooledCache=u,u.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:u},Zy(E),l}function lT(l){return l?(l=Iu,l):Iu}function cT(l,u,h,m,_,E){_=lT(_),m.context===null?m.context=_:m.pendingContext=_,m=Uo(u),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=Ho(l,m,u),h!==null&&(Yi(h,l,u),Hf(h,l,u))}function uT(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function px(l,u){uT(l,u),(l=l.alternate)&&uT(l,u)}function dT(l){if(l.tag===13){var u=Cu(l,67108864);u!==null&&Yi(u,l,67108864),px(l,67108864)}}var vg=!0;function Z8(l,u,h,m){var _=W.T;W.T=null;var E=G.p;try{G.p=2,gx(l,u,h,m)}finally{G.p=E,W.T=_}}function J8(l,u,h,m){var _=W.T;W.T=null;var E=G.p;try{G.p=8,gx(l,u,h,m)}finally{G.p=E,W.T=_}}function gx(l,u,h,m){if(vg){var _=mx(m);if(_===null)nx(l,u,m,xg,h),hT(l,m);else if(tN(_,l,u,h,m))m.stopPropagation();else if(hT(l,m),u&4&&-1<eN.indexOf(l)){for(;_!==null;){var E=Za(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var U=Yt(E.pendingLanes);if(U!==0){var z=E;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var K=1<<31-Qe(U);z.entanglements[1]|=K,U&=~K}fs(E),(rn&6)===0&&(ng=Re()+500,ah(0))}}break;case 13:z=Cu(E,2),z!==null&&Yi(z,E,2),ig(),px(E,2)}if(E=mx(m),E===null&&nx(l,u,m,xg,h),E===_)break;_=E}_!==null&&m.stopPropagation()}else nx(l,u,m,null,h)}}function mx(l){return l=ta(l),yx(l)}var xg=null;function yx(l){if(xg=null,l=Bs(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return xg=l,null}function fT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Ge:return 2;case Oe:return 8;case Ne:case dt:return 32;case _t:return 268435456;default:return 32}default:return 32}}var vx=!1,tl=null,nl=null,rl=null,hh=new Map,ph=new Map,il=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hT(l,u){switch(l){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":hh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(u.pointerId)}}function gh(l,u,h,m,_,E){return l===null||l.nativeEvent!==E?(l={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[_]},u!==null&&(u=Za(u),u!==null&&dT(u)),l):(l.eventSystemFlags|=m,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function tN(l,u,h,m,_){switch(u){case"focusin":return tl=gh(tl,l,u,h,m,_),!0;case"dragenter":return nl=gh(nl,l,u,h,m,_),!0;case"mouseover":return rl=gh(rl,l,u,h,m,_),!0;case"pointerover":var E=_.pointerId;return hh.set(E,gh(hh.get(E)||null,l,u,h,m,_)),!0;case"gotpointercapture":return E=_.pointerId,ph.set(E,gh(ph.get(E)||null,l,u,h,m,_)),!0}return!1}function pT(l){var u=Bs(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,$l(l.priority,function(){if(h.tag===13){var m=Wi();m=Ls(m);var _=Cu(h,m);_!==null&&Yi(_,h,m),px(h,m)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function wg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=mx(l.nativeEvent);if(h===null){h=l.nativeEvent;var m=new h.constructor(h.type,h);Us=m,h.target.dispatchEvent(m),Us=null}else return u=Za(h),u!==null&&dT(u),l.blockedOn=h,!1;u.shift()}return!0}function gT(l,u,h){wg(l)&&h.delete(u)}function nN(){vx=!1,tl!==null&&wg(tl)&&(tl=null),nl!==null&&wg(nl)&&(nl=null),rl!==null&&wg(rl)&&(rl=null),hh.forEach(gT),ph.forEach(gT)}function _g(l,u){l.blockedOn===u&&(l.blockedOn=null,vx||(vx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nN)))}var bg=null;function mT(l){bg!==l&&(bg=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bg===l&&(bg=null);for(var u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],_=l[u+2];if(typeof m!="function"){if(yx(m||h)===null)continue;break}var E=Za(h);E!==null&&(l.splice(u,3),u-=3,yv(E,{pending:!0,data:_,method:h.method,action:m},m,_))}}))}function mh(l){function u(K){return _g(K,l)}tl!==null&&_g(tl,l),nl!==null&&_g(nl,l),rl!==null&&_g(rl,l),hh.forEach(u),ph.forEach(u);for(var h=0;h<il.length;h++){var m=il[h];m.blockedOn===l&&(m.blockedOn=null)}for(;0<il.length&&(h=il[0],h.blockedOn===null);)pT(h),h.blockedOn===null&&il.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var _=h[m],E=h[m+1],U=_[sr]||null;if(typeof E=="function")U||mT(h);else if(U){var z=null;if(E&&E.hasAttribute("formAction")){if(_=E,U=E[sr]||null)z=U.formAction;else if(yx(_)!==null)continue}else z=U.action;typeof z=="function"?h[m+1]=z:(h.splice(m,3),m-=3),mT(h)}}}function xx(l){this._internalRoot=l}Ag.prototype.render=xx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,m=Wi();cT(h,m,l,u,null,null)},Ag.prototype.unmount=xx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;cT(l.current,2,null,l,null,null),ig(),u[Ji]=null}};function Ag(l){this._internalRoot=l}Ag.prototype.unstable_scheduleHydration=function(l){if(l){var u=ar();l={blockedOn:null,target:l,priority:u};for(var h=0;h<il.length&&u!==0&&u<il[h].priority;h++);il.splice(h,0,l),h===0&&pT(l)}};var yT=e.version;if(yT!=="19.1.0")throw Error(r(527,yT,"19.1.0"));G.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var rN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eg.isDisabled&&Eg.supportsFiber)try{nt=Eg.inject(rN),it=Eg}catch{}}return vh.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,m="",_=PE,E=kE,U=NE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=oT(l,1,!1,null,null,h,m,_,E,U,z,null),l[Ji]=u.current,tx(l),new xx(u)},vh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var m=!1,_="",E=PE,U=kE,z=NE,K=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),u=oT(l,1,!0,u,h??null,m,_,E,U,z,K,le),u.context=lT(null),h=u.current,m=Wi(),m=Ls(m),_=Uo(m),_.callback=null,Ho(h,_,m),h=m,u.current.lanes=h,ir(u,h),fs(u),l[Ji]=u.current,tx(l),new Ag(u)},vh.version="19.1.0",vh}var TT;function JN(){if(TT)return _x.exports;TT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_x.exports=ZN(),_x.exports}var e5=JN();const t5=()=>{};var CT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},n5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},aR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,y=d&63;c||(y=64,s||(g=64)),r.push(t[f],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new r5;const g=a<<2|o>>4;if(r.push(g),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i5=function(n){const e=iR(n);return aR.encodeByteArray(e,!0)},pm=function(n){return i5(n).replace(/\./g,"")},sR=function(n){try{return aR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=()=>a5().__FIREBASE_DEFAULTS__,o5=()=>{if(typeof process>"u"||typeof CT>"u")return;const n=CT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sR(n[1]);return e&&JSON.parse(e)},_1=()=>{try{return t5()||s5()||o5()||l5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oR=n=>{var e,t;return(t=(e=_1())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},c5=n=>{const e=oR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lR=()=>{var n;return(n=_1())===null||n===void 0?void 0:n.config},cR=n=>{var e;return(e=_1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pm(JSON.stringify(t)),pm(JSON.stringify(s)),""].join(".")}const Xh={};function f5(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xh))Xh[e]?n.emulator.push(e):n.prod.push(e);return n}function h5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let IT=!1;function dR(n,e){if(typeof window>"u"||typeof document>"u"||!nf(window.location.host)||Xh[n]===e||Xh[n]||IT)return;Xh[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=f5().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{IT=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=h5(r),y=t("text"),x=document.getElementById(y)||document.createElement("span"),b=t("learnmore"),A=document.getElementById(b)||document.createElement("a"),S=t("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(A,b);const R=d();c(T,S),I.append(T,x,A,R),document.body.appendChild(I)}a?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pi())}function g5(){var n;const e=(n=_1())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function v5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x5(){const n=pi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function w5(){return!g5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _5(){try{return typeof indexedDB=="object"}catch{return!1}}function b5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="FirebaseError";class Do extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=A5,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I0.prototype.create)}}class I0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?E5(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Do(i,o,r)}}function E5(n,e){return n.replace(S5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const S5=/\{\$([^}]+)}/g;function T5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(DT(a)&&DT(s)){if(!zc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function DT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ph(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function kh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function C5(n,e){const t=new I5(n,e);return t.subscribe.bind(t)}class I5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ex),i.error===void 0&&(i.error=Ex),i.complete===void 0&&(i.complete=Ex);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ex(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n){return n&&n._delegate?n._delegate:n}class $c{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new u5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M5(e))try{this.getOrInitializeService({instanceIdentifier:Sc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sc){return this.instances.has(e)}getOptions(e=Sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sc){return this.component?this.component.multipleInstances?e:Sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O5(n){return n===Sc?void 0:n}function M5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Mt||(Mt={}));const k5={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},N5=Mt.INFO,L5={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},B5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=L5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hw{constructor(e){this.name=e,this._logLevel=N5,this._logHandler=B5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}const F5=(n,e)=>e.some(t=>n instanceof t);let RT,OT;function V5(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j5(){return OT||(OT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fR=new WeakMap,S2=new WeakMap,hR=new WeakMap,Sx=new WeakMap,zw=new WeakMap;function U5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(_l(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&fR.set(t,n)}).catch(()=>{}),zw.set(e,n),e}function H5(n){if(S2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});S2.set(n,e)}let T2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return S2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _l(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function z5(n){T2=n(T2)}function $5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tx(this),e,...t);return hR.set(r,e.sort?e.sort():[e]),_l(r)}:j5().includes(n)?function(...e){return n.apply(Tx(this),e),_l(fR.get(this))}:function(...e){return _l(n.apply(Tx(this),e))}}function G5(n){return typeof n=="function"?$5(n):(n instanceof IDBTransaction&&H5(n),F5(n,V5())?new Proxy(n,T2):n)}function _l(n){if(n instanceof IDBRequest)return U5(n);if(Sx.has(n))return Sx.get(n);const e=G5(n);return e!==n&&(Sx.set(n,e),zw.set(e,n)),e}const Tx=n=>zw.get(n);function W5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=_l(s);return r&&s.addEventListener("upgradeneeded",c=>{r(_l(s.result),c.oldVersion,c.newVersion,_l(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Y5=["get","getKey","getAll","getAllKeys","count"],q5=["put","add","delete","clear"],Cx=new Map;function MT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cx.get(e))return Cx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=q5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Y5.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[t](...o),i&&c.done]))[0]};return Cx.set(e,a),a}z5(n=>({...n,get:(e,t,r)=>MT(e,t)||n.get(e,t,r),has:(e,t)=>!!MT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(K5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function K5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const C2="@firebase/app",PT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new Hw("@firebase/app"),Q5="@firebase/app-compat",Z5="@firebase/analytics-compat",J5="@firebase/analytics",e9="@firebase/app-check-compat",t9="@firebase/app-check",n9="@firebase/auth",r9="@firebase/auth-compat",i9="@firebase/database",a9="@firebase/data-connect",s9="@firebase/database-compat",o9="@firebase/functions",l9="@firebase/functions-compat",c9="@firebase/installations",u9="@firebase/installations-compat",d9="@firebase/messaging",f9="@firebase/messaging-compat",h9="@firebase/performance",p9="@firebase/performance-compat",g9="@firebase/remote-config",m9="@firebase/remote-config-compat",y9="@firebase/storage",v9="@firebase/storage-compat",x9="@firebase/firestore",w9="@firebase/ai",_9="@firebase/firestore-compat",b9="firebase",A9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="[DEFAULT]",E9={[C2]:"fire-core",[Q5]:"fire-core-compat",[J5]:"fire-analytics",[Z5]:"fire-analytics-compat",[t9]:"fire-app-check",[e9]:"fire-app-check-compat",[n9]:"fire-auth",[r9]:"fire-auth-compat",[i9]:"fire-rtdb",[a9]:"fire-data-connect",[s9]:"fire-rtdb-compat",[o9]:"fire-fn",[l9]:"fire-fn-compat",[c9]:"fire-iid",[u9]:"fire-iid-compat",[d9]:"fire-fcm",[f9]:"fire-fcm-compat",[h9]:"fire-perf",[p9]:"fire-perf-compat",[g9]:"fire-rc",[m9]:"fire-rc-compat",[y9]:"fire-gcs",[v9]:"fire-gcs-compat",[x9]:"fire-fst",[_9]:"fire-fst-compat",[w9]:"fire-vertex","fire-js":"fire-js",[b9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map,S9=new Map,D2=new Map;function kT(n,e){try{n.container.addComponent(e)}catch(t){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bd(n){const e=n.name;if(D2.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;D2.set(e,n);for(const t of gm.values())kT(t,n);for(const t of S9.values())kT(t,n);return!0}function $w(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ha(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bl=new I0("app","Firebase",T9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $c("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=A9;function pR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:I2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bl.create("bad-app-name",{appName:String(i)});if(t||(t=lR()),!t)throw bl.create("no-options");const a=gm.get(i);if(a){if(zc(t,a.options)&&zc(r,a.config))return a;throw bl.create("duplicate-app",{appName:i})}const s=new P5(i);for(const c of D2.values())s.addComponent(c);const o=new C9(t,r,s);return gm.set(i,o),o}function gR(n=I2){const e=gm.get(n);if(!e&&n===I2&&lR())return pR();if(!e)throw bl.create("no-app",{appName:n});return e}function Al(n,e,t){var r;let i=(r=E9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vo.warn(o.join(" "));return}Bd(new $c(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="firebase-heartbeat-database",D9=1,i0="firebase-heartbeat-store";let Ix=null;function mR(){return Ix||(Ix=W5(I9,D9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(i0)}catch(t){console.warn(t)}}}}).catch(n=>{throw bl.create("idb-open",{originalErrorMessage:n.message})})),Ix}async function R9(n){try{const t=(await mR()).transaction(i0),r=await t.objectStore(i0).get(yR(n));return await t.done,r}catch(e){if(e instanceof Do)vo.warn(e.message);else{const t=bl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vo.warn(t.message)}}}async function NT(n,e){try{const r=(await mR()).transaction(i0,"readwrite");await r.objectStore(i0).put(e,yR(n)),await r.done}catch(t){if(t instanceof Do)vo.warn(t.message);else{const r=bl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vo.warn(r.message)}}}function yR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=1024,M9=30;class P9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=LT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>M9){const s=L9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=LT(),{heartbeatsToSend:r,unsentEntries:i}=k9(this._heartbeatsCache.heartbeats),a=pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return vo.warn(t),""}}}function LT(){return new Date().toISOString().substring(0,10)}function k9(n,e=O9){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),BT(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class N9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _5()?b5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function BT(n){return pm(JSON.stringify({version:2,heartbeats:n})).length}function L9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(n){Bd(new $c("platform-logger",e=>new X5(e),"PRIVATE")),Bd(new $c("heartbeat",e=>new P9(e),"PRIVATE")),Al(C2,PT,n),Al(C2,PT,"esm2017"),Al("fire-js","")}B9("");function Gw(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F9=vR,xR=new I0("auth","Firebase",vR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Hw("@firebase/auth");function V9(n,...e){mm.logLevel<=Mt.WARN&&mm.warn(`Auth (${rf}): ${n}`,...e)}function Jg(n,...e){mm.logLevel<=Mt.ERROR&&mm.error(`Auth (${rf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n,...e){throw Ww(n,...e)}function bs(n,...e){return Ww(n,...e)}function wR(n,e,t){const r=Object.assign(Object.assign({},F9()),{[e]:t});return new I0("auth","Firebase",r).create(e,{appName:n.name})}function po(n){return wR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ww(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xR.create(n,...e)}function ot(n,e,...t){if(!n)throw Ww(e,...t)}function oo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jg(e),new Error(e)}function xo(n,e){n||oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function j9(){return FT()==="http:"||FT()==="https:"}function FT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j9()||y5()||"connection"in navigator)?navigator.onLine:!0}function H9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.shortDelay=e,this.longDelay=t,xo(t>e,"Short delay should be less than long delay!"),this.isMobile=p5()||v5()}get(){return U9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e){xo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G9=new R0(3e4,6e4);function Ll(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Bl(n,e,t,r,i={}){return bR(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=D0(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},a);return m5()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&nf(n.emulatorConfig.host)&&(d.credentials="include"),_R.fetch()(await AR(n,n.config.apiHost,t,o),d)})}async function bR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},z9),e);try{const i=new Y9(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Tg(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Tg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Tg(n,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw wR(n,f,d);Ya(n,f)}}catch(i){if(i instanceof Do)throw i;Ya(n,"network-request-failed",{message:String(i)})}}async function O0(n,e,t,r,i={}){const a=await Bl(n,e,t,r,i);return"mfaPendingCredential"in a&&Ya(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function AR(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?Yw(n.config,i):`${n.config.apiScheme}://${i}`;return $9.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function W9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(bs(this.auth,"network-request-failed")),G9.get())})}}function Tg(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=bs(n,e,r);return i.customData._tokenResponse=t,i}function VT(n){return n!==void 0&&n.enterprise!==void 0}class q9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function X9(n,e){return Bl(n,"GET","/v2/recaptchaConfig",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(n,e){return Bl(n,"POST","/v1/accounts:delete",e)}async function ym(n,e){return Bl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q9(n,e=!1){const t=gr(n),r=await t.getIdToken(e),i=qw(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Kh(Dx(i.auth_time)),issuedAtTime:Kh(Dx(i.iat)),expirationTime:Kh(Dx(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Dx(n){return Number(n)*1e3}function qw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jg("JWT malformed, contained fewer than 3 sections"),null;try{const i=sR(t);return i?JSON.parse(i):(Jg("Failed to decode base64 JWT payload"),null)}catch(i){return Jg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jT(n){const e=qw(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Do&&Z9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Z9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kh(this.lastLoginAt),this.creationTime=Kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await a0(n,ym(t,{idToken:r}));ot(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ER(a.providerUserInfo):[],o=t7(n.providerData,s),c=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new O2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function e7(n){const e=gr(n);await vm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ER(n){return n.map(e=>{var{providerId:t}=e,r=Gw(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n7(n,e){const t=await bR(n,{},async()=>{const r=D0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await AR(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&nf(n.emulatorConfig.host)&&(c.credentials="include"),_R.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function r7(n,e){return Bl(n,"POST","/v2/accounts:revokeToken",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=jT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await n7(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Sd;return r&&(ot(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ot(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sd,this.toJSON())}_performRefresh(){return oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ua{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Gw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new O2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await a0(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q9(this,e)}reload(){return e7(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ha(this.auth.app))return Promise.reject(po(this.auth));const e=await this.getIdToken();return await a0(this,K9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,o,c,d,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(s=t.photoURL)!==null&&s!==void 0?s:void 0,b=(o=t.tenantId)!==null&&o!==void 0?o:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,S=(d=t.createdAt)!==null&&d!==void 0?d:void 0,T=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:R,isAnonymous:P,providerData:B,stsTokenManager:O}=t;ot(I&&O,e,"internal-error");const C=Sd.fromJSON(this.name,O);ot(typeof I=="string",e,"internal-error"),sl(p,e.name),sl(g,e.name),ot(typeof R=="boolean",e,"internal-error"),ot(typeof P=="boolean",e,"internal-error"),sl(y,e.name),sl(x,e.name),sl(b,e.name),sl(A,e.name),sl(S,e.name),sl(T,e.name);const D=new Ua({uid:I,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:P,photoURL:x,phoneNumber:y,tenantId:b,stsTokenManager:C,createdAt:S,lastLoginAt:T});return B&&Array.isArray(B)&&(D.providerData=B.map(V=>Object.assign({},V))),A&&(D._redirectEventId=A),D}static async _fromIdTokenResponse(e,t,r=!1){const i=new Sd;i.updateFromServerResponse(t);const a=new Ua({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vm(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ot(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?ER(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Sd;o.updateFromIdToken(r);const c=new Ua({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new O2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function lo(n){xo(n instanceof Function,"Expected a class definition");let e=UT.get(n);return e?(xo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SR.type="NONE";const HT=SR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(n,e,t){return`firebase:${n}:${e}:${t}`}class Td{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=em(this.userKey,i.apiKey,a),this.fullPersistenceKey=em("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ym(this.auth,{idToken:e}).catch(()=>{});return t?Ua._fromGetAccountInfoResponse(this.auth,t,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Td(lo(HT),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||lo(HT);const s=em(r,e.config.apiKey,e.name);let o=null;for(const d of t)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await ym(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Ua._fromGetAccountInfoResponse(e,g,f)}else p=Ua._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Td(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Td(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OR(e))return"Blackberry";if(MR(e))return"Webos";if(CR(e))return"Safari";if((e.includes("chrome/")||IR(e))&&!e.includes("edge/"))return"Chrome";if(RR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TR(n=pi()){return/firefox\//i.test(n)}function CR(n=pi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IR(n=pi()){return/crios\//i.test(n)}function DR(n=pi()){return/iemobile/i.test(n)}function RR(n=pi()){return/android/i.test(n)}function OR(n=pi()){return/blackberry/i.test(n)}function MR(n=pi()){return/webos/i.test(n)}function Xw(n=pi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function i7(n=pi()){var e;return Xw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a7(){return x5()&&document.documentMode===10}function PR(n=pi()){return Xw(n)||RR(n)||MR(n)||OR(n)||/windows phone/i.test(n)||DR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n,e=[]){let t;switch(n){case"Browser":t=zT(pi());break;case"Worker":t=`${zT(pi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(n,e={}){return Bl(n,"GET","/v2/passwordPolicy",Ll(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=6;class c7{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:l7,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $T(this),this.idTokenSubscription=new $T(this),this.beforeStateQueue=new s7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lo(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Td.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ym(this,{idToken:e}),r=await Ua._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ha(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ha(this.app))return Promise.reject(po(this));const t=e?gr(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ha(this.app)?Promise.reject(po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ha(this.app)?Promise.reject(po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o7(this),t=new c7(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new I0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await r7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lo(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await Td.create(this,[lo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ha(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&V9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Zc(n){return gr(n)}class $T{constructor(e){this.auth=e,this.observer=null,this.addObserver=C5(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d7(n){b1=n}function NR(n){return b1.loadJS(n)}function f7(){return b1.recaptchaEnterpriseScript}function h7(){return b1.gapiScript}function p7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class g7{constructor(){this.enterprise=new m7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class m7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const y7="recaptcha-enterprise",LR="NO_RECAPTCHA";class v7{constructor(e){this.type=y7,this.auth=Zc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{X9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new q9(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;VT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(LR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new g7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!t&&VT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=f7();c.length!==0&&(c+=o),NR(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function GT(n,e,t,r=!1,i=!1){const a=new v7(n);let s;if(i)s=LR;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const o=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function M2(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await GT(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await GT(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(n,e){const t=$w(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(zc(a,e??{}))return i;Ya(i,"already-initialized")}return t.initialize({options:e})}function w7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(lo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _7(n,e,t){const r=Zc(n);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=BR(e),{host:s,port:o}=b7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(zc(d,r.config.emulator)&&zc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,nf(s)?(uR(`${a}//${s}${c}`),dR("Auth",!0)):A7()}function BR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b7(n){const e=BR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:WT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:WT(s)}}}function WT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function A7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oo("not implemented")}_getIdTokenResponse(e){return oo("not implemented")}_linkToIdToken(e,t){return oo("not implemented")}_getReauthenticationResolver(e){return oo("not implemented")}}async function E7(n,e){return Bl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S7(n,e){return O0(n,"POST","/v1/accounts:signInWithPassword",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(n,e){return O0(n,"POST","/v1/accounts:signInWithEmailLink",Ll(n,e))}async function C7(n,e){return O0(n,"POST","/v1/accounts:signInWithEmailLink",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends Kw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new s0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new s0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M2(e,t,"signInWithPassword",S7);case"emailLink":return T7(e,{email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M2(e,r,"signUpPassword",E7);case"emailLink":return C7(e,{idToken:t,email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n,e){return O0(n,"POST","/v1/accounts:signInWithIdp",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="http://localhost";class Gc extends Kw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ya("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Gw(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gc(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Cd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cd(e,t)}buildRequest(){const e={requestUri:I7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=D0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R7(n){const e=Ph(kh(n)).link,t=e?Ph(kh(e)).deep_link_id:null,r=Ph(kh(n)).deep_link_id;return(r?Ph(kh(r)).link:null)||r||t||e||n}class Qw{constructor(e){var t,r,i,a,s,o;const c=Ph(kh(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=D7((i=c.mode)!==null&&i!==void 0?i:null);ot(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=R7(e);try{return new Qw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.providerId=af.PROVIDER_ID}static credential(e,t){return s0._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Qw.parseLink(t);return ot(r,"argument-error"),s0._fromEmailAndCode(e,r.code,r.tenantId)}}af.PROVIDER_ID="password";af.EMAIL_PASSWORD_SIGN_IN_METHOD="password";af.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends FR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends M0{constructor(){super("facebook.com")}static credential(e){return Gc._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gl.credential(e.oauthAccessToken)}catch{return null}}}gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends M0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gc._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ml.credentialFromTaggedObject(e)}static credentialFromError(e){return ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ml.credential(t,r)}catch{return null}}}ml.GOOGLE_SIGN_IN_METHOD="google.com";ml.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends M0{constructor(){super("github.com")}static credential(e){return Gc._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yl.credential(e.oauthAccessToken)}catch{return null}}}yl.GITHUB_SIGN_IN_METHOD="github.com";yl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends M0{constructor(){super("twitter.com")}static credential(e,t){return Gc._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return vl.credential(t,r)}catch{return null}}}vl.TWITTER_SIGN_IN_METHOD="twitter.com";vl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(n,e){return O0(n,"POST","/v1/accounts:signUp",Ll(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ua._fromIdTokenResponse(e,r,i),s=YT(r);return new Wc({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=YT(r);return new Wc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function YT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Do{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,xm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new xm(e,t,r,i)}}function VR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xm._fromErrorAndOperation(n,a,e,r):a})}async function M7(n,e,t=!1){const r=await a0(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(n,e,t=!1){const{auth:r}=n;if(ha(r.app))return Promise.reject(po(r));const i="reauthenticate";try{const a=await a0(n,VR(r,i,e,n),t);ot(a.idToken,r,"internal-error");const s=qw(a.idToken);ot(s,r,"internal-error");const{sub:o}=s;return ot(n.uid===o,r,"user-mismatch"),Wc._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ya(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n,e,t=!1){if(ha(n.app))return Promise.reject(po(n));const r="signIn",i=await VR(n,r,e),a=await Wc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function k7(n,e){return jR(Zc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n){const e=Zc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N7(n,e,t){if(ha(n.app))return Promise.reject(po(n));const r=Zc(n),s=await M2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&UR(n),c}),o=await Wc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function L7(n,e,t){return ha(n.app)?Promise.reject(po(n)):k7(gr(n),af.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UR(n),r})}function B7(n,e,t,r){return gr(n).onIdTokenChanged(e,t,r)}function F7(n,e,t){return gr(n).beforeAuthStateChanged(e,t)}function V7(n,e,t,r){return gr(n).onAuthStateChanged(e,t,r)}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=1e3,U7=10;class zR extends HR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);a7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U7):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},j7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zR.type="LOCAL";const H7=zR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R extends HR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$R.type="SESSION";const GR=$R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new A1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(t.origin,a)),c=await z7(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}A1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=Zw("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return window}function G7(n){As().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function W7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function q7(){return WR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="firebaseLocalStorageDb",X7=1,_m="firebaseLocalStorage",qR="fbase_key";class P0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function E1(n,e){return n.transaction([_m],e?"readwrite":"readonly").objectStore(_m)}function K7(){const n=indexedDB.deleteDatabase(YR);return new P0(n).toPromise()}function P2(){const n=indexedDB.open(YR,X7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(_m,{keyPath:qR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(_m)?e(r):(r.close(),await K7(),e(await P2()))})})}async function qT(n,e,t){const r=E1(n,!0).put({[qR]:e,value:t});return new P0(r).toPromise()}async function Q7(n,e){const t=E1(n,!1).get(e),r=await new P0(t).toPromise();return r===void 0?null:r.value}function XT(n,e){const t=E1(n,!0).delete(e);return new P0(t).toPromise()}const Z7=800,J7=3;class XR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>J7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A1._getInstance(q7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await W7(),!this.activeServiceWorker)return;this.sender=new $7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P2();return await qT(e,wm,"1"),await XT(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Q7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>XT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=E1(i,!1).getAll();return new P0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XR.type="LOCAL";const eL=XR;new R0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(n,e){return e?lo(e):(ot(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Kw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nL(n){return jR(n.auth,new Jw(n),n.bypassAuthState)}function rL(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),P7(t,new Jw(n),n.bypassAuthState)}async function iL(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),M7(t,new Jw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nL;case"linkViaPopup":case"linkViaRedirect":return iL;case"reauthViaPopup":case"reauthViaRedirect":return rL;default:Ya(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=new R0(2e3,1e4);class gd extends KR{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,gd.currentPopupAction&&gd.currentPopupAction.cancel(),gd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){xo(this.filter.length===1,"Popup operations only handle one event");const e=Zw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aL.get())};e()}}gd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="pendingRedirect",tm=new Map;class oL extends KR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const r=await lL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lL(n,e){const t=dL(e),r=uL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function cL(n,e){tm.set(n._key(),e)}function uL(n){return lo(n._redirectPersistence)}function dL(n){return em(sL,n.config.apiKey,n.name)}async function fL(n,e,t=!1){if(ha(n.app))return Promise.reject(po(n));const r=Zc(n),i=tL(r,e),s=await new oL(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=600*1e3;class pL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!QR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(bs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hL&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(n,e={}){return Bl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vL=/^https?/;async function xL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mL(n);for(const t of e)try{if(wL(t))return}catch{}Ya(n,"unauthorized-domain")}function wL(n){const e=R2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!vL.test(t))return!1;if(yL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new R0(3e4,6e4);function QT(){const n=As().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function bL(n){return new Promise((e,t)=>{var r,i,a;function s(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),t(bs(n,"network-request-failed"))},timeout:_L.get()})}if(!((i=(r=As().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=As().gapi)===null||a===void 0)&&a.load)s();else{const o=p7("iframefcb");return As()[o]=()=>{gapi.load?s():t(bs(n,"network-request-failed"))},NR(`${h7()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw nm=null,e})}let nm=null;function AL(n){return nm=nm||bL(n),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new R0(5e3,15e3),SL="__/auth/iframe",TL="emulator/auth/iframe",CL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DL(n){const e=n.config;ot(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Yw(e,TL):`https://${n.config.authDomain}/${SL}`,r={apiKey:e.apiKey,appName:n.name,v:rf},i=IL.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${D0(r).slice(1)}`}async function RL(n){const e=await AL(n),t=As().gapi;return ot(t,n,"internal-error"),e.open({where:document.body,url:DL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=bs(n,"network-request-failed"),o=As().setTimeout(()=>{a(s)},EL.get());function c(){As().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ML=500,PL=600,kL="_blank",NL="http://localhost";class ZT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LL(n,e,t,r=ML,i=PL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},OL),{width:r.toString(),height:i.toString(),top:a,left:s}),d=pi().toLowerCase();t&&(o=IR(d)?kL:t),TR(d)&&(e=e||NL,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[y,x])=>`${g}${y}=${x},`,"");if(i7(d)&&o!=="_self")return BL(e||"",o),new ZT(null);const p=window.open(e||"",o,f);ot(p,n,"popup-blocked");try{p.focus()}catch{}return new ZT(p)}function BL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="__/auth/handler",VL="emulator/auth/handler",jL=encodeURIComponent("fac");async function JT(n,e,t,r,i,a){ot(n.config.authDomain,n,"auth-domain-config-required"),ot(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:rf,eventId:i};if(e instanceof FR){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",T5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof M0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await n._getAppCheckToken(),d=c?`#${jL}=${encodeURIComponent(c)}`:"";return`${UL(n)}?${D0(o).slice(1)}${d}`}function UL({config:n}){return n.emulator?Yw(n,VL):`https://${n.authDomain}/${FL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="webStorageSupport";class HL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GR,this._completeRedirectFn=fL,this._overrideRedirectResult=cL}async _openPopup(e,t,r,i){var a;xo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await JT(e,t,r,R2(),i);return LL(e,s,Zw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await JT(e,t,r,R2(),i);return G7(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(xo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await RL(e),r=new pL(e);return t.register("authEvent",i=>(ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rx,{type:Rx},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Rx];s!==void 0&&t(!!s),Ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PR()||CR()||Xw()}}const zL=HL;var eC="@firebase/auth",tC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WL(n){Bd(new $c("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ot(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kR(n)},d=new u7(r,i,a,c);return w7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bd(new $c("auth-internal",e=>{const t=Zc(e.getProvider("auth").getImmediate());return(r=>new $L(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Al(eC,tC,GL(n)),Al(eC,tC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=300,qL=cR("authIdTokenMaxAge")||YL;let nC=null;const XL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qL)return;const i=t==null?void 0:t.token;nC!==i&&(nC=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KL(n=gR()){const e=$w(n,"auth");if(e.isInitialized())return e.getImmediate();const t=x7(n,{popupRedirectResolver:zL,persistence:[eL,H7,GR]}),r=cR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=XL(a.toString());F7(t,s,()=>s(t.currentUser)),B7(t,o=>s(o))}}const i=oR("auth");return i&&_7(t,`http://${i}`),t}function QL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}d7({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=bs("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",QL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WL("Browser");var ZL="firebase",JL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al(ZL,JL,"app");var rC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var El,ZR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,C){function D(){}D.prototype=C.prototype,O.D=C.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(V,L,M){for(var F=Array(arguments.length-2),q=2;q<arguments.length;q++)F[q-2]=arguments[q];return C.prototype[L].apply(V,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,C,D){D||(D=0);var V=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)V[L]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(L=0;16>L;++L)V[L]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=O.g[0],D=O.g[1],L=O.g[2];var M=O.g[3],F=C+(M^D&(L^M))+V[0]+3614090360&4294967295;C=D+(F<<7&4294967295|F>>>25),F=M+(L^C&(D^L))+V[1]+3905402710&4294967295,M=C+(F<<12&4294967295|F>>>20),F=L+(D^M&(C^D))+V[2]+606105819&4294967295,L=M+(F<<17&4294967295|F>>>15),F=D+(C^L&(M^C))+V[3]+3250441966&4294967295,D=L+(F<<22&4294967295|F>>>10),F=C+(M^D&(L^M))+V[4]+4118548399&4294967295,C=D+(F<<7&4294967295|F>>>25),F=M+(L^C&(D^L))+V[5]+1200080426&4294967295,M=C+(F<<12&4294967295|F>>>20),F=L+(D^M&(C^D))+V[6]+2821735955&4294967295,L=M+(F<<17&4294967295|F>>>15),F=D+(C^L&(M^C))+V[7]+4249261313&4294967295,D=L+(F<<22&4294967295|F>>>10),F=C+(M^D&(L^M))+V[8]+1770035416&4294967295,C=D+(F<<7&4294967295|F>>>25),F=M+(L^C&(D^L))+V[9]+2336552879&4294967295,M=C+(F<<12&4294967295|F>>>20),F=L+(D^M&(C^D))+V[10]+4294925233&4294967295,L=M+(F<<17&4294967295|F>>>15),F=D+(C^L&(M^C))+V[11]+2304563134&4294967295,D=L+(F<<22&4294967295|F>>>10),F=C+(M^D&(L^M))+V[12]+1804603682&4294967295,C=D+(F<<7&4294967295|F>>>25),F=M+(L^C&(D^L))+V[13]+4254626195&4294967295,M=C+(F<<12&4294967295|F>>>20),F=L+(D^M&(C^D))+V[14]+2792965006&4294967295,L=M+(F<<17&4294967295|F>>>15),F=D+(C^L&(M^C))+V[15]+1236535329&4294967295,D=L+(F<<22&4294967295|F>>>10),F=C+(L^M&(D^L))+V[1]+4129170786&4294967295,C=D+(F<<5&4294967295|F>>>27),F=M+(D^L&(C^D))+V[6]+3225465664&4294967295,M=C+(F<<9&4294967295|F>>>23),F=L+(C^D&(M^C))+V[11]+643717713&4294967295,L=M+(F<<14&4294967295|F>>>18),F=D+(M^C&(L^M))+V[0]+3921069994&4294967295,D=L+(F<<20&4294967295|F>>>12),F=C+(L^M&(D^L))+V[5]+3593408605&4294967295,C=D+(F<<5&4294967295|F>>>27),F=M+(D^L&(C^D))+V[10]+38016083&4294967295,M=C+(F<<9&4294967295|F>>>23),F=L+(C^D&(M^C))+V[15]+3634488961&4294967295,L=M+(F<<14&4294967295|F>>>18),F=D+(M^C&(L^M))+V[4]+3889429448&4294967295,D=L+(F<<20&4294967295|F>>>12),F=C+(L^M&(D^L))+V[9]+568446438&4294967295,C=D+(F<<5&4294967295|F>>>27),F=M+(D^L&(C^D))+V[14]+3275163606&4294967295,M=C+(F<<9&4294967295|F>>>23),F=L+(C^D&(M^C))+V[3]+4107603335&4294967295,L=M+(F<<14&4294967295|F>>>18),F=D+(M^C&(L^M))+V[8]+1163531501&4294967295,D=L+(F<<20&4294967295|F>>>12),F=C+(L^M&(D^L))+V[13]+2850285829&4294967295,C=D+(F<<5&4294967295|F>>>27),F=M+(D^L&(C^D))+V[2]+4243563512&4294967295,M=C+(F<<9&4294967295|F>>>23),F=L+(C^D&(M^C))+V[7]+1735328473&4294967295,L=M+(F<<14&4294967295|F>>>18),F=D+(M^C&(L^M))+V[12]+2368359562&4294967295,D=L+(F<<20&4294967295|F>>>12),F=C+(D^L^M)+V[5]+4294588738&4294967295,C=D+(F<<4&4294967295|F>>>28),F=M+(C^D^L)+V[8]+2272392833&4294967295,M=C+(F<<11&4294967295|F>>>21),F=L+(M^C^D)+V[11]+1839030562&4294967295,L=M+(F<<16&4294967295|F>>>16),F=D+(L^M^C)+V[14]+4259657740&4294967295,D=L+(F<<23&4294967295|F>>>9),F=C+(D^L^M)+V[1]+2763975236&4294967295,C=D+(F<<4&4294967295|F>>>28),F=M+(C^D^L)+V[4]+1272893353&4294967295,M=C+(F<<11&4294967295|F>>>21),F=L+(M^C^D)+V[7]+4139469664&4294967295,L=M+(F<<16&4294967295|F>>>16),F=D+(L^M^C)+V[10]+3200236656&4294967295,D=L+(F<<23&4294967295|F>>>9),F=C+(D^L^M)+V[13]+681279174&4294967295,C=D+(F<<4&4294967295|F>>>28),F=M+(C^D^L)+V[0]+3936430074&4294967295,M=C+(F<<11&4294967295|F>>>21),F=L+(M^C^D)+V[3]+3572445317&4294967295,L=M+(F<<16&4294967295|F>>>16),F=D+(L^M^C)+V[6]+76029189&4294967295,D=L+(F<<23&4294967295|F>>>9),F=C+(D^L^M)+V[9]+3654602809&4294967295,C=D+(F<<4&4294967295|F>>>28),F=M+(C^D^L)+V[12]+3873151461&4294967295,M=C+(F<<11&4294967295|F>>>21),F=L+(M^C^D)+V[15]+530742520&4294967295,L=M+(F<<16&4294967295|F>>>16),F=D+(L^M^C)+V[2]+3299628645&4294967295,D=L+(F<<23&4294967295|F>>>9),F=C+(L^(D|~M))+V[0]+4096336452&4294967295,C=D+(F<<6&4294967295|F>>>26),F=M+(D^(C|~L))+V[7]+1126891415&4294967295,M=C+(F<<10&4294967295|F>>>22),F=L+(C^(M|~D))+V[14]+2878612391&4294967295,L=M+(F<<15&4294967295|F>>>17),F=D+(M^(L|~C))+V[5]+4237533241&4294967295,D=L+(F<<21&4294967295|F>>>11),F=C+(L^(D|~M))+V[12]+1700485571&4294967295,C=D+(F<<6&4294967295|F>>>26),F=M+(D^(C|~L))+V[3]+2399980690&4294967295,M=C+(F<<10&4294967295|F>>>22),F=L+(C^(M|~D))+V[10]+4293915773&4294967295,L=M+(F<<15&4294967295|F>>>17),F=D+(M^(L|~C))+V[1]+2240044497&4294967295,D=L+(F<<21&4294967295|F>>>11),F=C+(L^(D|~M))+V[8]+1873313359&4294967295,C=D+(F<<6&4294967295|F>>>26),F=M+(D^(C|~L))+V[15]+4264355552&4294967295,M=C+(F<<10&4294967295|F>>>22),F=L+(C^(M|~D))+V[6]+2734768916&4294967295,L=M+(F<<15&4294967295|F>>>17),F=D+(M^(L|~C))+V[13]+1309151649&4294967295,D=L+(F<<21&4294967295|F>>>11),F=C+(L^(D|~M))+V[4]+4149444226&4294967295,C=D+(F<<6&4294967295|F>>>26),F=M+(D^(C|~L))+V[11]+3174756917&4294967295,M=C+(F<<10&4294967295|F>>>22),F=L+(C^(M|~D))+V[2]+718787259&4294967295,L=M+(F<<15&4294967295|F>>>17),F=D+(M^(L|~C))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+M&4294967295}r.prototype.u=function(O,C){C===void 0&&(C=O.length);for(var D=C-this.blockSize,V=this.B,L=this.h,M=0;M<C;){if(L==0)for(;M<=D;)i(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<C;)if(V[L++]=O.charCodeAt(M++),L==this.blockSize){i(this,V),L=0;break}}else for(;M<C;)if(V[L++]=O[M++],L==this.blockSize){i(this,V),L=0;break}}this.h=L,this.o+=C},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;var D=8*this.o;for(C=O.length-8;C<O.length;++C)O[C]=D&255,D/=256;for(this.u(O),O=Array(16),C=D=0;4>C;++C)for(var V=0;32>V;V+=8)O[D++]=this.g[C]>>>V&255;return O};function a(O,C){var D=o;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=C(O)}function s(O,C){this.h=C;for(var D=[],V=!0,L=O.length-1;0<=L;L--){var M=O[L]|0;V&&M==C||(D[L]=M,V=!1)}this.g=D}var o={};function c(O){return-128<=O&&128>O?a(O,function(C){return new s([C|0],0>C?-1:0)}):new s([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return p;if(0>O)return A(d(-O));for(var C=[],D=1,V=0;O>=D;V++)C[V]=O/D|0,D*=4294967296;return new s(C,0)}function f(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return A(f(O.substring(1),C));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(C,8)),V=p,L=0;L<O.length;L+=8){var M=Math.min(8,O.length-L),F=parseInt(O.substring(L,L+M),C);8>M?(M=d(Math.pow(C,M)),V=V.j(M).add(d(F))):(V=V.j(D),V=V.add(d(F)))}return V}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-A(this).m();for(var O=0,C=1,D=0;D<this.g.length;D++){var V=this.i(D);O+=(0<=V?V:4294967296+V)*C,C*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(x(this))return"0";if(b(this))return"-"+A(this).toString(O);for(var C=d(Math.pow(O,6)),D=this,V="";;){var L=R(D,C).g;D=S(D,L.j(C));var M=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=L,x(D))return M+V;for(;6>M.length;)M="0"+M;V=M+V}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function x(O){if(O.h!=0)return!1;for(var C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function b(O){return O.h==-1}n.l=function(O){return O=S(this,O),b(O)?-1:x(O)?0:1};function A(O){for(var C=O.g.length,D=[],V=0;V<C;V++)D[V]=~O.g[V];return new s(D,~O.h).add(g)}n.abs=function(){return b(this)?A(this):this},n.add=function(O){for(var C=Math.max(this.g.length,O.g.length),D=[],V=0,L=0;L<=C;L++){var M=V+(this.i(L)&65535)+(O.i(L)&65535),F=(M>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);V=F>>>16,M&=65535,F&=65535,D[L]=F<<16|M}return new s(D,D[D.length-1]&-2147483648?-1:0)};function S(O,C){return O.add(A(C))}n.j=function(O){if(x(this)||x(O))return p;if(b(this))return b(O)?A(this).j(A(O)):A(A(this).j(O));if(b(O))return A(this.j(A(O)));if(0>this.l(y)&&0>O.l(y))return d(this.m()*O.m());for(var C=this.g.length+O.g.length,D=[],V=0;V<2*C;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<O.g.length;L++){var M=this.i(V)>>>16,F=this.i(V)&65535,q=O.i(L)>>>16,X=O.i(L)&65535;D[2*V+2*L]+=F*X,T(D,2*V+2*L),D[2*V+2*L+1]+=M*X,T(D,2*V+2*L+1),D[2*V+2*L+1]+=F*q,T(D,2*V+2*L+1),D[2*V+2*L+2]+=M*q,T(D,2*V+2*L+2)}for(V=0;V<C;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=C;V<2*C;V++)D[V]=0;return new s(D,0)};function T(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function I(O,C){this.g=O,this.h=C}function R(O,C){if(x(C))throw Error("division by zero");if(x(O))return new I(p,p);if(b(O))return C=R(A(O),C),new I(A(C.g),A(C.h));if(b(C))return C=R(O,A(C)),new I(A(C.g),C.h);if(30<O.g.length){if(b(O)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var D=g,V=C;0>=V.l(O);)D=P(D),V=P(V);var L=B(D,1),M=B(V,1);for(V=B(V,2),D=B(D,2);!x(V);){var F=M.add(V);0>=F.l(O)&&(L=L.add(D),M=F),V=B(V,1),D=B(D,1)}return C=S(O,L.j(C)),new I(L,C)}for(L=p;0<=O.l(C);){for(D=Math.max(1,Math.floor(O.m()/C.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),M=d(D),F=M.j(C);b(F)||0<F.l(O);)D-=V,M=d(D),F=M.j(C);x(M)&&(M=g),L=L.add(M),O=S(O,F)}return new I(L,O)}n.A=function(O){return R(this,O).h},n.and=function(O){for(var C=Math.max(this.g.length,O.g.length),D=[],V=0;V<C;V++)D[V]=this.i(V)&O.i(V);return new s(D,this.h&O.h)},n.or=function(O){for(var C=Math.max(this.g.length,O.g.length),D=[],V=0;V<C;V++)D[V]=this.i(V)|O.i(V);return new s(D,this.h|O.h)},n.xor=function(O){for(var C=Math.max(this.g.length,O.g.length),D=[],V=0;V<C;V++)D[V]=this.i(V)^O.i(V);return new s(D,this.h^O.h)};function P(O){for(var C=O.g.length+1,D=[],V=0;V<C;V++)D[V]=O.i(V)<<1|O.i(V-1)>>>31;return new s(D,O.h)}function B(O,C){var D=C>>5;C%=32;for(var V=O.g.length-D,L=[],M=0;M<V;M++)L[M]=0<C?O.i(M+D)>>>C|O.i(M+D+1)<<32-C:O.i(M+D);return new s(L,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZR=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,El=s}).apply(typeof rC<"u"?rC:typeof self<"u"?self:typeof window<"u"?window:{});var Cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JR,Nh,eO,rm,k2,tO,nO,rO;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,k,j){return w==Array.prototype||w==Object.prototype||(w[k]=j.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cg=="object"&&Cg];for(var k=0;k<w.length;++k){var j=w[k];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function i(w,k){if(k)e:{var j=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var se=w[$];if(!(se in j))break e;j=j[se]}w=w[w.length-1],$=j[w],k=k($),k!=$&&k!=null&&e(j,w,{configurable:!0,writable:!0,value:k})}}function a(w,k){w instanceof String&&(w+="");var j=0,$=!1,se={next:function(){if(!$&&j<w.length){var me=j++;return{value:k(me,w[me]),done:!1}}return $=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}i("Array.prototype.values",function(w){return w||function(){return a(this,function(k,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var k=typeof w;return k=k!="object"?k:w?Array.isArray(w)?"array":k:"null",k=="array"||k=="object"&&typeof w.length=="number"}function d(w){var k=typeof w;return k=="object"&&w!=null||k=="function"}function f(w,k,j){return w.call.apply(w.bind,arguments)}function p(w,k,j){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,$),w.apply(k,se)}}return function(){return w.apply(k,arguments)}}function g(w,k,j){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(w,k){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),w.apply(this,$)}}function x(w,k){function j(){}j.prototype=k.prototype,w.aa=k.prototype,w.prototype=new j,w.prototype.constructor=w,w.Qb=function($,se,me){for(var Le=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Le[Nt-2]=arguments[Nt];return k.prototype[se].apply($,Le)}}function b(w){const k=w.length;if(0<k){const j=Array(k);for(let $=0;$<k;$++)j[$]=w[$];return j}return[]}function A(w,k){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(c($)){const se=w.length||0,me=$.length||0;w.length=se+me;for(let Le=0;Le<me;Le++)w[se+Le]=$[Le]}else w.push($)}}class S{constructor(k,j){this.i=k,this.j=j,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function T(w){return/^[\s\xa0]*$/.test(w)}function I(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function R(w){return R[" "](w),w}R[" "]=function(){};var P=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(w,k,j){for(const $ in w)k.call(j,w[$],$,w)}function O(w,k){for(const j in w)k.call(void 0,w[j],j,w)}function C(w){const k={};for(const j in w)k[j]=w[j];return k}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(w,k){let j,$;for(let se=1;se<arguments.length;se++){$=arguments[se];for(j in $)w[j]=$[j];for(let me=0;me<D.length;me++)j=D[me],Object.prototype.hasOwnProperty.call($,j)&&(w[j]=$[j])}}function L(w){var k=1;w=w.split(":");const j=[];for(;0<k&&w.length;)j.push(w.shift()),k--;return w.length&&j.push(w.join(":")),j}function M(w){o.setTimeout(()=>{throw w},0)}function F(){var w=Z;let k=null;return w.g&&(k=w.g,w.g=w.g.next,w.g||(w.h=null),k.next=null),k}class q{constructor(){this.h=this.g=null}add(k,j){const $=X.get();$.set(k,j),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new S(()=>new W,w=>w.reset());class W{constructor(){this.next=this.g=this.h=null}set(k,j){this.h=k,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Q=!1,Z=new q,de=()=>{const w=o.Promise.resolve(void 0);G=()=>{w.then(ge)}};var ge=()=>{for(var w;w=F();){try{w.h.call(w.g)}catch(j){M(j)}var k=X;k.j(w),100>k.h&&(k.h++,w.next=k.g,k.g=w)}Q=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(w,k){this.type=w,this.g=this.target=k,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,k=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const j=()=>{};o.addEventListener("test",j,k),o.removeEventListener("test",j,k)}catch{}return w}();function he(w,k){if(be.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var j=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=k,k=w.relatedTarget){if(P){e:{try{R(k.nodeName);var se=!0;break e}catch{}se=!1}se||(k=null)}}else j=="mouseover"?k=w.fromElement:j=="mouseout"&&(k=w.toElement);this.relatedTarget=k,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:Se[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&he.aa.h.call(this)}}x(he,be);var Se={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function re(w,k,j,$,se){this.listener=w,this.proxy=null,this.src=k,this.type=j,this.capture=!!$,this.ha=se,this.key=++Fe,this.da=this.fa=!1}function ye(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function pe(w){this.src=w,this.g={},this.h=0}pe.prototype.add=function(w,k,j,$,se){var me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);var Le=Ve(w,k,$,se);return-1<Le?(k=w[Le],j||(k.fa=!1)):(k=new re(k,this.src,me,!!$,se),k.fa=j,w.push(k)),k};function te(w,k){var j=k.type;if(j in w.g){var $=w.g[j],se=Array.prototype.indexOf.call($,k,void 0),me;(me=0<=se)&&Array.prototype.splice.call($,se,1),me&&(ye(k),w.g[j].length==0&&(delete w.g[j],w.h--))}}function Ve(w,k,j,$){for(var se=0;se<w.length;++se){var me=w[se];if(!me.da&&me.listener==k&&me.capture==!!j&&me.ha==$)return se}return-1}var we="closure_lm_"+(1e6*Math.random()|0),ze={};function Me(w,k,j,$,se){if(Array.isArray(k)){for(var me=0;me<k.length;me++)Me(w,k[me],j,$,se);return null}return j=On(j),w&&w[Ae]?w.K(k,j,d($)?!!$.capture:!1,se):Re(w,k,j,!1,$,se)}function Re(w,k,j,$,se,me){if(!k)throw Error("Invalid event type");var Le=d(se)?!!se.capture:!!se,Nt=_t(w);if(Nt||(w[we]=Nt=new pe(w)),j=Nt.add(k,j,$,Le,me),j.proxy)return j;if($=Ye(),j.proxy=$,$.src=w,$.listener=j,w.addEventListener)ke||(se=Le),se===void 0&&(se=!1),w.addEventListener(k.toString(),$,se);else if(w.attachEvent)w.attachEvent(Ne(k.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function Ye(){function w(j){return k.call(w.src,w.listener,j)}const k=dt;return w}function Ge(w,k,j,$,se){if(Array.isArray(k))for(var me=0;me<k.length;me++)Ge(w,k[me],j,$,se);else $=d($)?!!$.capture:!!$,j=On(j),w&&w[Ae]?(w=w.i,k=String(k).toString(),k in w.g&&(me=w.g[k],j=Ve(me,j,$,se),-1<j&&(ye(me[j]),Array.prototype.splice.call(me,j,1),me.length==0&&(delete w.g[k],w.h--)))):w&&(w=_t(w))&&(k=w.g[k.toString()],w=-1,k&&(w=Ve(k,j,$,se)),(j=-1<w?k[w]:null)&&Oe(j))}function Oe(w){if(typeof w!="number"&&w&&!w.da){var k=w.src;if(k&&k[Ae])te(k.i,w);else{var j=w.type,$=w.proxy;k.removeEventListener?k.removeEventListener(j,$,w.capture):k.detachEvent?k.detachEvent(Ne(j),$):k.addListener&&k.removeListener&&k.removeListener($),(j=_t(k))?(te(j,w),j.h==0&&(j.src=null,k[we]=null)):ye(w)}}}function Ne(w){return w in ze?ze[w]:ze[w]="on"+w}function dt(w,k){if(w.da)w=!0;else{k=new he(k,this);var j=w.listener,$=w.ha||w.src;w.fa&&Oe(w),w=j.call($,k)}return w}function _t(w){return w=w[we],w instanceof pe?w:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(w){return typeof w=="function"?w:(w[yn]||(w[yn]=function(k){return w.handleEvent(k)}),w[yn])}function nt(){xe.call(this),this.i=new pe(this),this.M=this,this.F=null}x(nt,xe),nt.prototype[Ae]=!0,nt.prototype.removeEventListener=function(w,k,j,$){Ge(this,w,k,j,$)};function it(w,k){var j,$=w.F;if($)for(j=[];$;$=$.F)j.push($);if(w=w.M,$=k.type||k,typeof k=="string")k=new be(k,w);else if(k instanceof be)k.target=k.target||w;else{var se=k;k=new be($,w),V(k,se)}if(se=!0,j)for(var me=j.length-1;0<=me;me--){var Le=k.g=j[me];se=Tn(Le,$,!0,k)&&se}if(Le=k.g=w,se=Tn(Le,$,!0,k)&&se,se=Tn(Le,$,!1,k)&&se,j)for(me=0;me<j.length;me++)Le=k.g=j[me],se=Tn(Le,$,!1,k)&&se}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var w=this.i,k;for(k in w.g){for(var j=w.g[k],$=0;$<j.length;$++)ye(j[$]);delete w.g[k],w.h--}}this.F=null},nt.prototype.K=function(w,k,j,$){return this.i.add(String(w),k,!1,j,$)},nt.prototype.L=function(w,k,j,$){return this.i.add(String(w),k,!0,j,$)};function Tn(w,k,j,$){if(k=w.i.g[String(k)],!k)return!0;k=k.concat();for(var se=!0,me=0;me<k.length;++me){var Le=k[me];if(Le&&!Le.da&&Le.capture==j){var Nt=Le.listener,yr=Le.ha||Le.src;Le.fa&&te(w.i,Le),se=Nt.call(yr,$)!==!1&&se}}return se&&!$.defaultPrevented}function Qe(w,k,j){if(typeof w=="function")j&&(w=g(w,j));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:o.setTimeout(w,k||0)}function pt(w){w.g=Qe(()=>{w.g=null,w.i&&(w.i=!1,pt(w))},w.l);const k=w.h;w.h=null,w.m.apply(null,k)}class kt extends xe{constructor(k,j){super(),this.m=k,this.l=j,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:pt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(w){xe.call(this),this.h=w,this.g={}}x(Jt,xe);var An=[];function Cn(w){B(w.g,function(k,j){this.g.hasOwnProperty(j)&&Oe(k)},w),w.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Cn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=o.JSON.stringify,Hr=o.JSON.parse,gt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function Fn(){}Fn.prototype.h=null;function qn(w){return w.h||(w.h=w.i())}function zr(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){be.call(this,"d")}x(ir,be);function zl(){be.call(this,"c")}x(zl,be);var Zi={},cu=null;function Ls(){return cu=cu||new nt}Zi.La="serverreachability";function vn(w){be.call(this,Zi.La,w)}x(vn,be);function ar(w){const k=Ls();it(k,new vn(k))}Zi.STAT_EVENT="statevent";function $l(w,k){be.call(this,Zi.STAT_EVENT,w),this.stat=k}x($l,be);function Mn(w){const k=Ls();it(k,new $l(k,w))}Zi.Ma="timingevent";function mr(w,k){be.call(this,Zi.Ma,w),this.size=k}x(mr,be);function sr(w,k){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},k)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function yf(w,k,j,$,se,me){w.info(function(){if(w.g)if(me)for(var Le="",Nt=me.split("&"),yr=0;yr<Nt.length;yr++){var Lt=Nt[yr].split("=");if(1<Lt.length){var Mr=Lt[0];Lt=Lt[1];var vr=Mr.split("_");Le=2<=vr.length&&vr[1]=="type"?Le+(Mr+"="+Lt+"&"):Le+(Mr+"=redacted&")}}else Le=null;else Le=me;return"XMLHTTP REQ ("+$+") [attempt "+se+"]: "+k+`
`+j+`
`+Le})}function Ay(w,k,j,$,se,me,Le){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+se+"]: "+k+`
`+j+`
`+me+" "+Le})}function ko(w,k,j,$){w.info(function(){return"XMLHTTP TEXT ("+k+"): "+Gl(w,j)+($?" "+$:"")})}function ap(w,k){w.info(function(){return"TIMEOUT: "+k})}Ji.prototype.info=function(){};function Gl(w,k){if(!w.g)return k;if(!k)return null;try{var j=JSON.parse(k);if(j){for(w=0;w<j.length;w++)if(Array.isArray(j[w])){var $=j[w];if(!(2>$.length)){var se=$[1];if(Array.isArray(se)&&!(1>se.length)){var me=se[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Le=1;Le<se.length;Le++)se[Le]=""}}}}return Yt(j)}catch{return k}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Za;function Ja(){}x(Ja,Fn),Ja.prototype.g=function(){return new XMLHttpRequest},Ja.prototype.i=function(){return{}},Za=new Ja;function yi(w,k,j,$){this.j=w,this.i=k,this.l=j,this.R=$||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var vf={},uu={};function Ea(w,k,j){w.L=1,w.v=Kl(ji(k)),w.m=j,w.P=!0,Fs(w,null)}function Fs(w,k){w.F=Date.now(),Wl(w),w.A=ji(w.v);var j=w.A,$=w.R;Array.isArray($)||($=[String($)]),Ef(j.i,"t",$),w.C=0,j=w.j.J,w.h=new Xn,w.g=_p(w.j,j?k:null,!w.m),0<w.O&&(w.M=new kt(g(w.Y,w,w.g),w.O)),k=w.U,j=w.g,$=w.ca;var se="readystatechange";Array.isArray(se)||(se&&(An[0]=se.toString()),se=An);for(var me=0;me<se.length;me++){var Le=Me(j,se[me],$||k.handleEvent,!1,k.h||k);if(!Le)break;k.g[Le.key]=Le}k=w.H?C(w.H):{},w.m?(w.u||(w.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,k)):(w.u="GET",w.g.ea(w.A,w.u,null,k)),ar(),yf(w.i,w.u,w.A,w.l,w.R,w.m)}yi.prototype.ca=function(w){w=w.target;const k=this.M;k&&ra(w)==3?k.j():this.Y(w)},yi.prototype.Y=function(w){try{if(w==this.g)e:{const vr=ra(this.g);var k=this.g.Ba();const Ws=this.g.Z();if(!(3>vr)&&(vr!=3||this.g&&(this.h.h||this.g.oa()||hp(this.g)))){this.J||vr!=4||k==7||(k==8||0>=Ws?ar(3):ar(2)),Lo(this);var j=this.g.Z();this.X=j;t:if(sp(this)){var $=hp(this.g);w="";var se=$.length,me=ra(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),es(this);var Le="";break t}this.h.i=new o.TextDecoder}for(k=0;k<se;k++)this.h.h=!0,w+=this.h.i.decode($[k],{stream:!(me&&k==se-1)});$.length=0,this.h.g+=w,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=j==200,Ay(this.i,this.u,this.A,this.l,this.R,vr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,yr=this.g;if((Nt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Nt)){var Lt=Nt;break t}}Lt=null}if(j=Lt)ko(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yl(this,j);else{this.o=!1,this.s=3,Mn(12),$r(this),es(this);break e}}if(this.P){j=!0;let Gr;for(;!this.J&&this.C<Le.length;)if(Gr=op(this,Le),Gr==uu){vr==4&&(this.s=4,Mn(14),j=!1),ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==vf){this.s=4,Mn(15),ko(this.i,this.l,Le,"[Invalid Chunk]"),j=!1;break}else ko(this.i,this.l,Gr,null),Yl(this,Gr);if(sp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vr!=4||Le.length!=0||this.h.h||(this.s=1,Mn(16),j=!1),this.o=this.o&&j,!j)ko(this.i,this.l,Le,"[Invalid Chunked Response]"),$r(this),es(this);else if(0<Le.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),ic(Mr),Mr.M=!0,Mn(11))}}else ko(this.i,this.l,Le,null),Yl(this,Le);vr==4&&$r(this),this.o&&!this.J&&(vr==4?vp(this.j,this):(this.o=!1,Wl(this)))}else Iy(this.g),j==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Mn(12)):(this.s=0,Mn(13)),$r(this),es(this)}}}catch{}finally{}};function sp(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function op(w,k){var j=w.C,$=k.indexOf(`
`,j);return $==-1?uu:(j=Number(k.substring(j,$)),isNaN(j)?vf:($+=1,$+j>k.length?uu:(k=k.slice($,$+j),w.C=$+j,k)))}yi.prototype.cancel=function(){this.J=!0,$r(this)};function Wl(w){w.S=Date.now()+w.I,lp(w,w.I)}function lp(w,k){if(w.B!=null)throw Error("WatchDog timer not null");w.B=sr(g(w.ba,w),k)}function Lo(w){w.B&&(o.clearTimeout(w.B),w.B=null)}yi.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(ap(this.i,this.A),this.L!=2&&(ar(),Mn(17)),$r(this),this.s=2,es(this)):lp(this,this.S-w)};function es(w){w.j.G==0||w.J||vp(w.j,w)}function $r(w){Lo(w);var k=w.M;k&&typeof k.ma=="function"&&k.ma(),w.M=null,Cn(w.U),w.g&&(k=w.g,w.g=null,k.abort(),k.ma())}function Yl(w,k){try{var j=w.j;if(j.G!=0&&(j.g==w||xf(j.h,w))){if(!w.K&&xf(j.h,w)&&j.G==3){try{var $=j.Da.g.parse(k)}catch{$=null}if(Array.isArray($)&&$.length==3){var se=$;if(se[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<w.F)bu(j),wu(j);else break e;Df(j),Mn(18)}}else j.za=se[1],0<j.za-j.T&&37500>se[2]&&j.F&&j.v==0&&!j.C&&(j.C=sr(g(j.Za,j),6e3));if(1>=fu(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Gs(j,11)}else if((w.K||j.g==w)&&bu(j),!T(k))for(se=j.Da.g.parse(k),k=0;k<se.length;k++){let Lt=se[k];if(j.T=Lt[0],Lt=Lt[1],j.G==2)if(Lt[0]=="c"){j.K=Lt[1],j.ia=Lt[2];const Mr=Lt[3];Mr!=null&&(j.la=Mr,j.j.info("VER="+j.la));const vr=Lt[4];vr!=null&&(j.Aa=vr,j.j.info("SVER="+j.Aa));const Ws=Lt[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&($=1.5*Ws,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const Gr=w.g;if(Gr){const os=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var me=$.h;me.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(hu(me,me.h),me.h=null))}if($.D){const Of=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Of&&($.ya=Of,cn($.I,$.D,Of))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-w.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var Le=w;if($.qa=wp($,$.J?$.ia:null,$.W),Le.K){vi($.h,Le);var Nt=Le,yr=$.L;yr&&(Nt.I=yr),Nt.B&&(Lo(Nt),Wl(Nt)),$.g=Le}else mp($);0<j.i.length&&_u(j)}else Lt[0]!="stop"&&Lt[0]!="close"||Gs(j,7);else j.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Gs(j,7):Cf(j):Lt[0]!="noop"&&j.l&&j.l.ta(Lt),j.v=0)}}ar(4)}catch{}}var cp=class{constructor(w,k){this.g=w,this.map=k}};function Vs(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function du(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function fu(w){return w.h?1:w.g?w.g.size:0}function xf(w,k){return w.h?w.h==k:w.g?w.g.has(k):!1}function hu(w,k){w.g?w.g.add(k):w.h=k}function vi(w,k){w.h&&w.h==k?w.h=null:w.g&&w.g.has(k)&&w.g.delete(k)}Vs.prototype.cancel=function(){if(this.i=wf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function wf(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let k=w.i;for(const j of w.g.values())k=k.concat(j.D);return k}return b(w.i)}function Ey(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var k=[],j=w.length,$=0;$<j;$++)k.push(w[$]);return k}k=[],j=0;for($ in w)k[j++]=w[$];return k}function pu(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var k=[];w=w.length;for(var j=0;j<w;j++)k.push(j);return k}k=[],j=0;for(const $ in w)k[j++]=$;return k}}}function _f(w,k){if(w.forEach&&typeof w.forEach=="function")w.forEach(k,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,k,void 0);else for(var j=pu(w),$=Ey(w),se=$.length,me=0;me<se;me++)k.call(void 0,$[me],j&&j[me],w)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sy(w,k){if(w){w=w.split("&");for(var j=0;j<w.length;j++){var $=w[j].indexOf("="),se=null;if(0<=$){var me=w[j].substring(0,$);se=w[j].substring($+1)}else me=w[j];k(me,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function or(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof or){this.h=w.h,Xl(this,w.j),this.o=w.o,this.g=w.g,Bo(this,w.s),this.l=w.l;var k=w.i,j=new Us;j.i=k.i,k.g&&(j.g=new Map(k.g),j.h=k.h),js(this,j),this.m=w.m}else w&&(k=String(w).match(ql))?(this.h=!1,Xl(this,k[1]||"",!0),this.o=ea(k[2]||""),this.g=ea(k[3]||"",!0),Bo(this,k[4]),this.l=ea(k[5]||"",!0),js(this,k[6]||"",!0),this.m=ea(k[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}or.prototype.toString=function(){var w=[],k=this.j;k&&w.push(Ql(k,bf,!0),":");var j=this.g;return(j||k=="file")&&(w.push("//"),(k=this.o)&&w.push(Ql(k,bf,!0),"@"),w.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&w.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&w.push("/"),w.push(Ql(j,j.charAt(0)=="/"?Ty:Af,!0))),(j=this.i.toString())&&w.push("?",j),(j=this.m)&&w.push("#",Ql(j,gu)),w.join("")};function ji(w){return new or(w)}function Xl(w,k,j){w.j=j?ea(k,!0):k,w.j&&(w.j=w.j.replace(/:$/,""))}function Bo(w,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);w.s=k}else w.s=null}function js(w,k,j){k instanceof Us?(w.i=k,dp(w.i,w.h)):(j||(k=Ql(k,Cy)),w.i=new Us(k,w.h))}function cn(w,k,j){w.i.set(k,j)}function Kl(w){return cn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function ea(w,k){return w?k?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Ql(w,k,j){return typeof w=="string"?(w=encodeURI(w).replace(k,up),j&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function up(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var bf=/[#\/\?@]/g,Af=/[#\?:]/g,Ty=/[#\?]/g,Cy=/[#\?@]/g,gu=/#/g;function Us(w,k){this.h=this.g=null,this.i=w||null,this.j=!!k}function ta(w){w.g||(w.g=new Map,w.h=0,w.i&&Sy(w.i,function(k,j){w.add(decodeURIComponent(k.replace(/\+/g," ")),j)}))}n=Us.prototype,n.add=function(w,k){ta(this),this.i=null,w=ts(this,w);var j=this.g.get(w);return j||this.g.set(w,j=[]),j.push(k),this.h+=1,this};function Hs(w,k){ta(w),k=ts(w,k),w.g.has(k)&&(w.i=null,w.h-=w.g.get(k).length,w.g.delete(k))}function zs(w,k){return ta(w),k=ts(w,k),w.g.has(k)}n.forEach=function(w,k){ta(this),this.g.forEach(function(j,$){j.forEach(function(se){w.call(k,se,$,this)},this)},this)},n.na=function(){ta(this);const w=Array.from(this.g.values()),k=Array.from(this.g.keys()),j=[];for(let $=0;$<k.length;$++){const se=w[$];for(let me=0;me<se.length;me++)j.push(k[$])}return j},n.V=function(w){ta(this);let k=[];if(typeof w=="string")zs(this,w)&&(k=k.concat(this.g.get(ts(this,w))));else{w=Array.from(this.g.values());for(let j=0;j<w.length;j++)k=k.concat(w[j])}return k},n.set=function(w,k){return ta(this),this.i=null,w=ts(this,w),zs(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[k]),this.h+=1,this},n.get=function(w,k){return w?(w=this.V(w),0<w.length?String(w[0]):k):k};function Ef(w,k,j){Hs(w,k),0<j.length&&(w.i=null,w.g.set(ts(w,k),b(j)),w.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],k=Array.from(this.g.keys());for(var j=0;j<k.length;j++){var $=k[j];const me=encodeURIComponent(String($)),Le=this.V($);for($=0;$<Le.length;$++){var se=me;Le[$]!==""&&(se+="="+encodeURIComponent(String(Le[$]))),w.push(se)}}return this.i=w.join("&")};function ts(w,k){return k=String(k),w.j&&(k=k.toLowerCase()),k}function dp(w,k){k&&!w.j&&(ta(w),w.i=null,w.g.forEach(function(j,$){var se=$.toLowerCase();$!=se&&(Hs(this,$),Ef(this,se,j))},w)),w.j=k}function Zl(w,k){const j=new Ji;if(o.Image){const $=new Image;$.onload=y(na,j,"TestLoadImage: loaded",!0,k,$),$.onerror=y(na,j,"TestLoadImage: error",!1,k,$),$.onabort=y(na,j,"TestLoadImage: abort",!1,k,$),$.ontimeout=y(na,j,"TestLoadImage: timeout",!1,k,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else k(!1)}function Sa(w,k){const j=new Ji,$=new AbortController,se=setTimeout(()=>{$.abort(),na(j,"TestPingServer: timeout",!1,k)},1e4);fetch(w,{signal:$.signal}).then(me=>{clearTimeout(se),me.ok?na(j,"TestPingServer: ok",!0,k):na(j,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(se),na(j,"TestPingServer: error",!1,k)})}function na(w,k,j,$,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),$(j)}catch{}}function Jl(){this.g=new gt}function ns(w,k,j){const $=j||"";try{_f(w,function(se,me){let Le=se;d(se)&&(Le=Yt(se)),k.push($+me+"="+encodeURIComponent(Le))})}catch(se){throw k.push($+"type="+encodeURIComponent("_badmap")),se}}function Fo(w){this.l=w.Ub||null,this.j=w.eb||!1}x(Fo,Fn),Fo.prototype.g=function(){return new $s(this.l,this.j)},Fo.prototype.i=function(w){return function(){return w}}({});function $s(w,k){nt.call(this),this.D=w,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x($s,nt),n=$s.prototype,n.open=function(w,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=k,this.readyState=1,is(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(k.body=w),(this.D||o).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sf(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sf(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var k=w.value?w.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!w.done}))&&(this.response=this.responseText+=k)}w.done?rs(this):is(this),this.readyState==3&&Sf(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,rs(this))},n.Qa=function(w){this.g&&(this.response=w,rs(this))},n.ga=function(){this.g&&rs(this)};function rs(w){w.readyState=4,w.l=null,w.j=null,w.v=null,is(w)}n.setRequestHeader=function(w,k){this.u.append(w,k)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],k=this.h.entries();for(var j=k.next();!j.done;)j=j.value,w.push(j[0]+": "+j[1]),j=k.next();return w.join(`\r
`)};function is(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Tf(w){let k="";return B(w,function(j,$){k+=$,k+=":",k+=j,k+=`\r
`}),k}function Or(w,k,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=Tf(j),typeof w=="string"?j!=null&&encodeURIComponent(String(j)):cn(w,k,j))}function en(w){nt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(en,nt);var mu=/^https?$/i,ec=["POST","PUT"];n=en.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,k,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);k=k?k.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Za.g(),this.v=this.o?qn(this.o):qn(Za),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(k,String(w),!0),this.B=!1}catch(me){fp(this,me);return}if(w=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var se in $)j.set(se,$[se]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const me of $.keys())j.set(me,$.get(me));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(me=>me.toLowerCase()=="content-type"),se=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ec,k,void 0))||$||se||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Le]of j)this.g.setRequestHeader(me,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tc(this),this.u=!0,this.g.send(w),this.u=!1}catch(me){fp(this,me)}};function fp(w,k){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=k,w.m=5,yu(w),as(w)}function yu(w){w.A||(w.A=!0,it(w,"complete"),it(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,it(this,"complete"),it(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),en.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},n.bb=function(){vu(this)};function vu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||ra(w)!=4||w.Z()!=2)){if(w.u&&ra(w)==4)Qe(w.Ea,0,w);else if(it(w,"readystatechange"),ra(w)==4){w.h=!1;try{const Le=w.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var j;if(!(j=k)){var $;if($=Le===0){var se=String(w.D).match(ql)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),$=!mu.test(se?se.toLowerCase():"")}j=$}if(j)it(w,"complete"),it(w,"success");else{w.m=6;try{var me=2<ra(w)?w.g.statusText:""}catch{me=""}w.l=me+" ["+w.Z()+"]",yu(w)}}finally{as(w)}}}}function as(w,k){if(w.g){tc(w);const j=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,k||it(w,"ready");try{j.onreadystatechange=$}catch{}}}function tc(w){w.I&&(o.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function ra(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<ra(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var k=this.g.responseText;return w&&k.indexOf(w)==0&&(k=k.substring(w.length)),Hr(k)}};function hp(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Iy(w){const k={};w=(w.g&&2<=ra(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(T(w[$]))continue;var j=L(w[$]);const se=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const me=k[se]||[];k[se]=me,me.push(j)}O(k,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nc(w,k,j){return j&&j.internalChannelParams&&j.internalChannelParams[w]||k}function xu(w){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nc("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nc("baseRetryDelayMs",5e3,w),this.cb=nc("retryDelaySeedMs",1e4,w),this.Wa=nc("forwardChannelMaxRetries",2,w),this.wa=nc("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Vs(w&&w.concurrentRequestLimit),this.Da=new Jl,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xu.prototype,n.la=8,n.G=1,n.connect=function(w,k,j,$){Mn(0),this.W=w,this.H=k||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=wp(this,null,this.W),_u(this)};function Cf(w){if(pp(w),w.G==3){var k=w.U++,j=ji(w.I);if(cn(j,"SID",w.K),cn(j,"RID",k),cn(j,"TYPE","terminate"),rc(w,j),k=new yi(w,w.j,k),k.L=2,k.v=Kl(ji(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(k.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=k.v,j=!0),j||(k.g=_p(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Wl(k)}xp(w)}function wu(w){w.g&&(ic(w),w.g.cancel(),w.g=null)}function pp(w){wu(w),w.u&&(o.clearTimeout(w.u),w.u=null),bu(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function _u(w){if(!du(w.h)&&!w.s){w.s=!0;var k=w.Ga;G||de(),Q||(G(),Q=!0),Z.add(k,w),w.B=0}}function Dy(w,k){return fu(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=k.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=sr(g(w.Ga,w,k),Rf(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const se=new yi(this,this.j,w);let me=this.o;if(this.S&&(me?(me=C(me),V(me,this.S)):me=this.S),this.m!==null||this.O||(se.H=me,me=null),this.P)e:{for(var k=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(k+=$,4096<k){k=j;break e}if(k===4096||j===this.i.length-1){k=j+1;break e}}k=1e3}else k=1e3;k=gp(this,se,k),j=ji(this.I),cn(j,"RID",w),cn(j,"CVER",22),this.D&&cn(j,"X-HTTP-Session-Id",this.D),rc(this,j),me&&(this.O?k="headers="+encodeURIComponent(String(Tf(me)))+"&"+k:this.m&&Or(j,this.m,me)),hu(this.h,se),this.Ua&&cn(j,"TYPE","init"),this.P?(cn(j,"$req",k),cn(j,"SID","null"),se.T=!0,Ea(se,j,null)):Ea(se,j,k),this.G=2}}else this.G==3&&(w?If(this,w):this.i.length==0||du(this.h)||If(this))};function If(w,k){var j;k?j=k.l:j=w.U++;const $=ji(w.I);cn($,"SID",w.K),cn($,"RID",j),cn($,"AID",w.T),rc(w,$),w.m&&w.o&&Or($,w.m,w.o),j=new yi(w,w.j,j,w.B+1),w.m===null&&(j.H=w.o),k&&(w.i=k.D.concat(w.i)),k=gp(w,j,1e3),j.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),hu(w.h,j),Ea(j,$,k)}function rc(w,k){w.H&&B(w.H,function(j,$){cn(k,$,j)}),w.l&&_f({},function(j,$){cn(k,$,j)})}function gp(w,k,j){j=Math.min(w.i.length,j);var $=w.l?g(w.l.Na,w.l,w):null;e:{var se=w.i;let me=-1;for(;;){const Le=["count="+j];me==-1?0<j?(me=se[0].g,Le.push("ofs="+me)):me=0:Le.push("ofs="+me);let Nt=!0;for(let yr=0;yr<j;yr++){let Lt=se[yr].g;const Mr=se[yr].map;if(Lt-=me,0>Lt)me=Math.max(0,se[yr].g-100),Nt=!1;else try{ns(Mr,Le,"req"+Lt+"_")}catch{$&&$(Mr)}}if(Nt){$=Le.join("&");break e}}}return w=w.i.splice(0,j),k.D=w,$}function mp(w){if(!w.g&&!w.u){w.Y=1;var k=w.Fa;G||de(),Q||(G(),Q=!0),Z.add(k,w),w.v=0}}function Df(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=sr(g(w.Fa,w),Rf(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=sr(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mn(10),wu(this),yp(this))};function ic(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function yp(w){w.g=new yi(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var k=ji(w.qa);cn(k,"RID","rpc"),cn(k,"SID",w.K),cn(k,"AID",w.T),cn(k,"CI",w.F?"0":"1"),!w.F&&w.ja&&cn(k,"TO",w.ja),cn(k,"TYPE","xmlhttp"),rc(w,k),w.m&&w.o&&Or(k,w.m,w.o),w.L&&(w.g.I=w.L);var j=w.g;w=w.ia,j.L=1,j.v=Kl(ji(k)),j.m=null,j.P=!0,Fs(j,w)}n.Za=function(){this.C!=null&&(this.C=null,wu(this),Df(this),Mn(19))};function bu(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function vp(w,k){var j=null;if(w.g==k){bu(w),ic(w),w.g=null;var $=2}else if(xf(w.h,k))j=k.D,vi(w.h,k),$=1;else return;if(w.G!=0){if(k.o)if($==1){j=k.m?k.m.length:0,k=Date.now()-k.F;var se=w.B;$=Ls(),it($,new mr($,j)),_u(w)}else mp(w);else if(se=k.s,se==3||se==0&&0<k.X||!($==1&&Dy(w,k)||$==2&&Df(w)))switch(j&&0<j.length&&(k=w.h,k.i=k.i.concat(j)),se){case 1:Gs(w,5);break;case 4:Gs(w,10);break;case 3:Gs(w,6);break;default:Gs(w,2)}}}function Rf(w,k){let j=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(j*=2),j*k}function Gs(w,k){if(w.j.info("Error code "+k),k==2){var j=g(w.fb,w),$=w.Xa;const se=!$;$=new or($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xl($,"https"),Kl($),se?Zl($.toString(),j):Sa($.toString(),j)}else Mn(2);w.G=0,w.l&&w.l.sa(k),xp(w),pp(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function xp(w){if(w.G=0,w.ka=[],w.l){const k=wf(w.h);(k.length!=0||w.i.length!=0)&&(A(w.ka,k),A(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function wp(w,k,j){var $=j instanceof or?ji(j):new or(j);if($.g!="")k&&($.g=k+"."+$.g),Bo($,$.s);else{var se=o.location;$=se.protocol,k=k?k+"."+se.hostname:se.hostname,se=+se.port;var me=new or(null);$&&Xl(me,$),k&&(me.g=k),se&&Bo(me,se),j&&(me.l=j),$=me}return j=w.D,k=w.ya,j&&k&&cn($,j,k),cn($,"VER",w.la),rc(w,$),$}function _p(w,k,j){if(k&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=w.Ca&&!w.pa?new en(new Fo({eb:j})):new en(w.pa),k.Ha(w.J),k}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bp(){}n=bp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Au(){}Au.prototype.g=function(w,k){return new xi(w,k)};function xi(w,k){nt.call(this),this.g=new xu(k),this.l=w,this.h=k&&k.messageUrlParams||null,w=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(w?w["X-WebChannel-Content-Type"]=k.messageContentType:w={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(w?w["X-WebChannel-Client-Profile"]=k.va:w={"X-WebChannel-Client-Profile":k.va}),this.g.S=w,(w=k&&k.Sb)&&!T(w)&&(this.g.m=w),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!T(k)&&(this.g.D=k,w=this.h,w!==null&&k in w&&(w=this.h,k in w&&delete w[k])),this.j=new ss(this)}x(xi,nt),xi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xi.prototype.close=function(){Cf(this.g)},xi.prototype.o=function(w){var k=this.g;if(typeof w=="string"){var j={};j.__data__=w,w=j}else this.u&&(j={},j.__data__=Yt(w),w=j);k.i.push(new cp(k.Ya++,w)),k.G==3&&_u(k)},xi.prototype.N=function(){this.g.l=null,delete this.j,Cf(this.g),delete this.g,xi.aa.N.call(this)};function Ap(w){ir.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var k=w.__sm__;if(k){e:{for(const j in k){w=j;break e}w=void 0}(this.i=w)&&(w=this.i,k=k!==null&&w in k?k[w]:void 0),this.data=k}else this.data=w}x(Ap,ir);function Ep(){zl.call(this),this.status=1}x(Ep,zl);function ss(w){this.g=w}x(ss,bp),ss.prototype.ua=function(){it(this.g,"a")},ss.prototype.ta=function(w){it(this.g,new Ap(w))},ss.prototype.sa=function(w){it(this.g,new Ep)},ss.prototype.ra=function(){it(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,xi.prototype.send=xi.prototype.o,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,rO=function(){return new Au},nO=function(){return Ls()},tO=Zi,k2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,rm=No,Bs.COMPLETE="complete",eO=Bs,zr.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Nh=zr,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,JR=en}).apply(typeof Cg<"u"?Cg:typeof self<"u"?self:typeof window<"u"?window:{});const iC="@firebase/firestore",aC="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Hw("@firebase/firestore");function cd(){return Yc.logLevel}function $e(n,...e){if(Yc.logLevel<=Mt.DEBUG){const t=e.map(e_);Yc.debug(`Firestore (${sf}): ${n}`,...t)}}function wo(n,...e){if(Yc.logLevel<=Mt.ERROR){const t=e.map(e_);Yc.error(`Firestore (${sf}): ${n}`,...t)}}function Il(n,...e){if(Yc.logLevel<=Mt.WARN){const t=e.map(e_);Yc.warn(`Firestore (${sf}): ${n}`,...t)}}function e_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iO(n,r,t)}function iO(n,e,t){let r=`FIRESTORE (${sf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wo(r),new Error(r)}function nn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||iO(e,i,r)}function mt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Do{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class tB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nB{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new go;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new go,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new aO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new li(e)}}class rB{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iB{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new rB(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ha(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nn(this.o===void 0,3512);const r=a=>{a.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=sB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function N2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Et(r,i);{const a=sO(),s=oB(a.encode(oC(n,t)),a.encode(oC(e,t)));return s!==0?s:Et(r,i)}}t+=r>65535?2:1}return Et(n.length,e.length)}function oC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function oB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Et(n[t],e[t]);return Et(n.length,e.length)}function Fd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__name__";class ps{constructor(e,t,r){t===void 0?t=0:t>e.length&&lt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&lt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ps.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Et(e.length,t.length)}static compareSegments(e,t){const r=ps.isNumericId(e),i=ps.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ps.extractNumericId(e).compare(ps.extractNumericId(t)):N2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return El.fromString(e.substring(4,e.length-2))}}class _n extends ps{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(Te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const lB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends ps{construct(e,t,r){return new Zr(e,t,r)}static isValidIdentifier(e){return lB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lC}static keyField(){return new Zr([lC])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new He(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new He(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new He(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new He(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(_n.fromString(e))}static fromName(e){return new Je(_n.fromString(e).popFirst(5))}static empty(){return new Je(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new _n(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n,e,t){if(!t)throw new He(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cB(n,e,t,r){if(e===!0&&r===!0)throw new He(Te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cC(n){if(!Je.isDocumentKey(n))throw new He(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uC(n){if(Je.isDocumentKey(n))throw new He(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function S1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=S1(n);throw new He(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uB(n,e){if(e<=0)throw new He(Te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n,e){const t={typeString:n};return e&&(t.value=e),t}function k0(n,e){if(!oO(n))throw new He(Te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new He(Te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=-62135596800,fC=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fC);return new Rn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dC)throw new He(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fC}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(k0(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:hr("string",Rn._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Rn(0,0))}static max(){return new ht(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=-1;function dB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(r===1e9?new Rn(t+1,0):new Rn(t,r));return new Dl(i,Je.empty(),e)}function fB(n){return new Dl(n.readTime,n.key,o0)}class Dl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Dl(ht.min(),Je.empty(),o0)}static max(){return new Dl(ht.max(),Je.empty(),o0)}}function hB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(n.documentKey,e.documentKey),t!==0?t:Et(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==pB)throw n;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,r)=>{t(e)})}static reject(e){return new De((t,r)=>{r(e)})}static waitFor(e){return new De((t,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&t()},c=>r(c))}),s=!0,a===i&&t()})}static or(e){let t=De.resolve(!1);for(const r of e)t=t.next(i=>i?De.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new De((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;t(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,t){return new De((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function mB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}T1.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=-1;function C1(n){return n==null}function bm(n){return n===0&&1/n==-1/0}function yB(n){return typeof n=="number"&&Number.isInteger(n)&&!bm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="";function vB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hC(e)),e=xB(n.get(t),e);return hC(e)}function xB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case lO:t+="";break;default:t+=a}}return t}function hC(n){return n+lO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ig(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ig(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ig(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ig(this.root,e,this.comparator,!0)}}class Ig{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Qr.RED,this.left=i??Qr.EMPTY,this.right=a??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gC(this.data.getIterator())}getIteratorFrom(e){return new gC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dr(this.comparator);return t.data=e,t}}class gC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new qi([])}unionWith(e){let t=new Dr(Zr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uO("Invalid base64 string: "+a):a}}(e);return new ti(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const wB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rl(n){if(nn(!!n,39018),typeof n=="string"){let e=0;const t=wB.exec(n);if(nn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ol(n){return typeof n=="string"?ti.fromBase64String(n):ti.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="server_timestamp",fO="__type__",hO="__previous_value__",pO="__local_write_time__";function i_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[fO])===null||t===void 0?void 0:t.stringValue)===dO}function I1(n){const e=n.mapValue.fields[hO];return i_(e)?I1(e):e}function l0(n){const e=Rl(n.mapValue.fields[pO].timestampValue);return new Rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,t,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Am="(default)";class c0{constructor(e,t){this.projectId=e,this.database=t||Am}static empty(){return new c0("","")}get isDefaultDatabase(){return this.database===Am}isEqual(e){return e instanceof c0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="__type__",bB="__max__",Dg={mapValue:{}},mO="__vector__",Em="value";function Ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?i_(n)?4:EB(n)?9007199254740991:AB(n)?10:11:lt(28295,{value:n})}function Os(n,e){if(n===e)return!0;const t=Ml(n);if(t!==Ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return l0(n).isEqual(l0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Rl(i.timestampValue),o=Rl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Ol(i.bytesValue).isEqual(Ol(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Zn(i.geoPointValue.latitude)===Zn(a.geoPointValue.latitude)&&Zn(i.geoPointValue.longitude)===Zn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Zn(i.integerValue)===Zn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Zn(i.doubleValue),o=Zn(a.doubleValue);return s===o?bm(s)===bm(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Fd(n.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(pC(s)!==pC(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Os(s[c],o[c])))return!1;return!0}(n,e);default:return lt(52216,{left:n})}}function u0(n,e){return(n.values||[]).find(t=>Os(t,e))!==void 0}function Vd(n,e){if(n===e)return 0;const t=Ml(n),r=Ml(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Zn(a.integerValue||a.doubleValue),c=Zn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return mC(n.timestampValue,e.timestampValue);case 4:return mC(l0(n),l0(e));case 5:return N2(n.stringValue,e.stringValue);case 6:return function(a,s){const o=Ol(a),c=Ol(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=Et(o[d],c[d]);if(f!==0)return f}return Et(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Et(Zn(a.latitude),Zn(s.latitude));return o!==0?o:Et(Zn(a.longitude),Zn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return yC(n.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},y=(o=p[Em])===null||o===void 0?void 0:o.arrayValue,x=(c=g[Em])===null||c===void 0?void 0:c.arrayValue,b=Et(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:yC(y,x)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===Dg.mapValue&&s===Dg.mapValue)return 0;if(a===Dg.mapValue)return 1;if(s===Dg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=N2(c[p],f[p]);if(g!==0)return g;const y=Vd(o[c[p]],d[f[p]]);if(y!==0)return y}return Et(c.length,f.length)}(n.mapValue,e.mapValue);default:throw lt(23264,{le:t})}}function mC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Et(n,e);const t=Rl(n),r=Rl(e),i=Et(t.seconds,r.seconds);return i!==0?i:Et(t.nanos,r.nanos)}function yC(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Vd(t[i],r[i]);if(a)return a}return Et(t.length,r.length)}function jd(n){return L2(n)}function L2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Rl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ol(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=L2(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${L2(t.fields[s])}`;return i+"}"}(n.mapValue):lt(61005,{value:n})}function im(n){switch(Ml(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=I1(n);return e?16+im(e):16;case 5:return 2*n.stringValue.length;case 6:return Ol(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+im(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Fl(r.fields,(a,s)=>{i+=a.length+im(s)}),i}(n.mapValue);default:throw lt(13486,{value:n})}}function vC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function B2(n){return!!n&&"integerValue"in n}function a_(n){return!!n&&"arrayValue"in n}function xC(n){return!!n&&"nullValue"in n}function wC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function am(n){return!!n&&"mapValue"in n}function AB(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gO])===null||t===void 0?void 0:t.stringValue)===mO}function Qh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!am(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qh(t)}setAll(e){let t=Zr.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=Qh(s):i.push(o.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());am(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];am(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Li(Qh(this.value))}}function yO(n){const e=[];return Fl(n.fields,(t,r)=>{const i=new Zr([t]);if(am(r)){const a=yO(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new qi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ci(e,0,ht.min(),ht.min(),ht.min(),Li.empty(),0)}static newFoundDocument(e,t,r,i){return new ci(e,1,t,ht.min(),r,i,0)}static newNoDocument(e,t){return new ci(e,2,t,ht.min(),ht.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new ci(e,3,t,ht.min(),ht.min(),Li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.position=e,this.inclusive=t}}function _C(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=Je.comparator(Je.fromName(s.referenceValue),t.key):r=Vd(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Os(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t="asc"){this.field=e,this.dir=t}}function SB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{}class fr extends vO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CB(e,t,r):t==="array-contains"?new RB(e,r):t==="in"?new OB(e,r):t==="not-in"?new MB(e,r):t==="array-contains-any"?new PB(e,r):new fr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IB(e,r):new DB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vd(t,this.value)):t!==null&&Ml(this.value)===Ml(t)&&this.matchesComparison(Vd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qa extends vO{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new qa(e,t)}matches(e){return xO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function xO(n){return n.op==="and"}function wO(n){return TB(n)&&xO(n)}function TB(n){for(const e of n.filters)if(e instanceof qa)return!1;return!0}function F2(n){if(n instanceof fr)return n.field.canonicalString()+n.op.toString()+jd(n.value);if(wO(n))return n.filters.map(e=>F2(e)).join(",");{const e=n.filters.map(t=>F2(t)).join(",");return`${n.op}(${e})`}}function _O(n,e){return n instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.field.isEqual(i.field)&&Os(r.value,i.value)}(n,e):n instanceof qa?function(r,i){return i instanceof qa&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&_O(s,i.filters[o]),!0):!1}(n,e):void lt(19439)}function bO(n){return n instanceof fr?function(t){return`${t.field.canonicalString()} ${t.op} ${jd(t.value)}`}(n):n instanceof qa?function(t){return t.op.toString()+" {"+t.getFilters().map(bO).join(" ,")+"}"}(n):"Filter"}class CB extends fr{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class IB extends fr{constructor(e,t){super(e,"in",t),this.keys=AO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DB extends fr{constructor(e,t){super(e,"not-in",t),this.keys=AO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class RB extends fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return a_(t)&&u0(t.arrayValue,this.value)}}class OB extends fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&u0(this.value.arrayValue,t)}}class MB extends fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(u0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!u0(this.value.arrayValue,t)}}class PB extends fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!a_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>u0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function AC(n,e=null,t=[],r=[],i=null,a=null,s=null){return new kB(n,e,t,r,i,a,s)}function s_(n){const e=mt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>F2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),C1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jd(r)).join(",")),e.Pe=t}return e.Pe}function o_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_O(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bC(n.startAt,e.startAt)&&bC(n.endAt,e.endAt)}function V2(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function NB(n,e,t,r,i,a,s,o){return new Jc(n,e,t,r,i,a,s,o)}function D1(n){return new Jc(n)}function EC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function EO(n){return n.collectionGroup!==null}function Zh(n){const e=mt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Dr(Zr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new d0(a,r))}),t.has(Zr.keyField().canonicalString())||e.Te.push(new d0(Zr.keyField(),r))}return e.Te}function Es(n){const e=mt(n);return e.Ie||(e.Ie=LB(e,Zh(n))),e.Ie}function LB(n,e){if(n.limitType==="F")return AC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new d0(i.field,a)});const t=n.endAt?new Sm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sm(n.startAt.position,n.startAt.inclusive):null;return AC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function j2(n,e){const t=n.filters.concat([e]);return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tm(n,e,t){return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function R1(n,e){return o_(Es(n),Es(e))&&n.limitType===e.limitType}function SO(n){return`${s_(Es(n))}|lt:${n.limitType}`}function ud(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bO(i)).join(", ")}]`),C1(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jd(i)).join(",")),`Target(${r})`}(Es(n))}; limitType=${n.limitType})`}function O1(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Zh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=_C(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,Zh(r),i)||r.endAt&&!function(s,o,c){const d=_C(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,Zh(r),i))}(n,e)}function BB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TO(n){return(e,t)=>{let r=!1;for(const i of Zh(n)){const a=FB(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function FB(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?Vd(c,d):lt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return cO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new Hn(Je.comparator);function _o(){return VB}const CO=new Hn(Je.comparator);function Lh(...n){let e=CO;for(const t of n)e=e.insert(t.key,t);return e}function IO(n){let e=CO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oc(){return Jh()}function DO(){return Jh()}function Jh(){return new eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const jB=new Hn(Je.comparator),UB=new Dr(Je.comparator);function Pt(...n){let e=UB;for(const t of n)e=e.add(t);return e}const HB=new Dr(Et);function zB(){return HB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bm(e)?"-0":e}}function RO(n){return{integerValue:""+n}}function $B(n,e){return yB(e)?RO(e):l_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this._=void 0}}function GB(n,e,t){return n instanceof f0?function(i,a){const s={fields:{[fO]:{stringValue:dO},[pO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&i_(a)&&(a=I1(a)),a&&(s.fields[hO]=a),{mapValue:s}}(t,e):n instanceof h0?MO(n,e):n instanceof p0?PO(n,e):function(i,a){const s=OO(i,a),o=SC(s)+SC(i.Ee);return B2(s)&&B2(i.Ee)?RO(o):l_(i.serializer,o)}(n,e)}function WB(n,e,t){return n instanceof h0?MO(n,e):n instanceof p0?PO(n,e):t}function OO(n,e){return n instanceof Cm?function(r){return B2(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class f0 extends M1{}class h0 extends M1{constructor(e){super(),this.elements=e}}function MO(n,e){const t=kO(e);for(const r of n.elements)t.some(i=>Os(i,r))||t.push(r);return{arrayValue:{values:t}}}class p0 extends M1{constructor(e){super(),this.elements=e}}function PO(n,e){let t=kO(e);for(const r of n.elements)t=t.filter(i=>!Os(i,r));return{arrayValue:{values:t}}}class Cm extends M1{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function SC(n){return Zn(n.integerValue||n.doubleValue)}function kO(n){return a_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,t){this.field=e,this.transform=t}}function qB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof h0&&i instanceof h0||r instanceof p0&&i instanceof p0?Fd(r.elements,i.elements,Os):r instanceof Cm&&i instanceof Cm?Os(r.Ee,i.Ee):r instanceof f0&&i instanceof f0}(n.transform,e.transform)}class XB{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class P1{}function NO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new k1(n.key,Ii.none()):new N0(n.key,n.data,Ii.none());{const t=n.data,r=Li.empty();let i=new Dr(Zr.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Vl(n.key,r,new qi(i.toArray()),Ii.none())}}function KB(n,e,t){n instanceof N0?function(i,a,s){const o=i.value.clone(),c=CC(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Vl?function(i,a,s){if(!sm(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=CC(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(LO(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function e0(n,e,t,r){return n instanceof N0?function(a,s,o,c){if(!sm(a.precondition,s))return o;const d=a.value.clone(),f=IC(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vl?function(a,s,o,c){if(!sm(a.precondition,s))return o;const d=IC(a.fieldTransforms,c,s),f=s.data;return f.setAll(LO(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,s,o){return sm(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function QB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=OO(r.transform,i||null);a!=null&&(t===null&&(t=Li.empty()),t.set(r.field,a))}return t||null}function TC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fd(r,i,(a,s)=>qB(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class N0 extends P1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vl extends P1{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function LO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CC(n,e,t){const r=new Map;nn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,WB(s,o,t[i]))}return r}function IC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,GB(a,s,e))}return r}class k1 extends P1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZB extends P1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&KB(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=e0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=e0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=DO();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const c=NO(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(t,r)=>TC(t,r))&&Fd(this.baseMutations,e.baseMutations,(t,r)=>TC(t,r))}}class c_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return jB}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new c_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,Ft;function nF(n){switch(n){case Te.OK:return lt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function BO(n){if(n===void 0)return wo("GRPC error has no .code"),Te.UNKNOWN;switch(n){case dr.OK:return Te.OK;case dr.CANCELLED:return Te.CANCELLED;case dr.UNKNOWN:return Te.UNKNOWN;case dr.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case dr.INTERNAL:return Te.INTERNAL;case dr.UNAVAILABLE:return Te.UNAVAILABLE;case dr.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case dr.NOT_FOUND:return Te.NOT_FOUND;case dr.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case dr.ABORTED:return Te.ABORTED;case dr.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case dr.DATA_LOSS:return Te.DATA_LOSS;default:return lt(39323,{code:n})}}(Ft=dr||(dr={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new El([4294967295,4294967295],0);function DC(n){const e=sO().encode(n),t=new ZR;return t.update(e),new Uint8Array(t.digest())}function RC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new El([t,r],0),new El([i,a],0)]}class u_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bh(`Invalid padding: ${t}`);if(r<0)throw new Bh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=El.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(El.fromNumber(r)));return i.compare(rF)===1&&(i=new El([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=DC(e),[r,i]=RC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new u_(a,i,t);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const t=DC(e),[r,i]=RC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,L0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new N1(ht.min(),i,new Hn(Et),_o(),Pt())}}class L0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new L0(r,t,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class FO{constructor(e,t){this.targetId=e,this.De=t}}class VO{constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class OC{constructor(){this.ve=0,this.Ce=MC(),this.Fe=ti.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pt(),t=Pt(),r=Pt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt(38017,{changeType:a})}}),new L0(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=MC()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class iF{constructor(e){this.We=e,this.Ge=new Map,this.ze=_o(),this.je=Rg(),this.Je=Rg(),this.He=new Hn(Et)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(V2(a))if(r===0){const s=new Je(a.path);this.Xe(t,s,ci.newNoDocument(s,ht.min()))}else nn(r===1,20013,{expectedCount:r});else{const s=this.ot(t);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=Ol(r).toUint8Array()}catch(c){if(c instanceof uO)return Il("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new u_(s,i,a)}catch(c){return Il(c instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&V2(o.target)){const c=new Je(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ci.newNoDocument(c,e))}a.Ne&&(t.set(s,a.Le()),a.ke())}});let r=Pt();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new N1(e,t,this.He,this.ze,r);return this.ze=_o(),this.je=Rg(),this.Je=Rg(),this.He=new Hn(Et),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new OC,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dr(Et),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dr(Et),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new OC),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Rg(){return new Hn(Je.comparator)}function MC(){return new Hn(Je.comparator)}const aF={asc:"ASCENDING",desc:"DESCENDING"},sF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oF={and:"AND",or:"OR"};class lF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U2(n,e){return n.useProto3Json||C1(e)?e:{value:e}}function Im(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cF(n,e){return Im(n,e.toTimestamp())}function Ss(n){return nn(!!n,49232),ht.fromTimestamp(function(t){const r=Rl(t);return new Rn(r.seconds,r.nanos)}(n))}function d_(n,e){return H2(n,e).canonicalString()}function H2(n,e){const t=function(i){return new _n(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function UO(n){const e=_n.fromString(n);return nn(WO(e),10190,{key:e.toString()}),e}function z2(n,e){return d_(n.databaseId,e.path)}function Ox(n,e){const t=UO(e);if(t.get(1)!==n.databaseId.projectId)throw new He(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(zO(t))}function HO(n,e){return d_(n.databaseId,e)}function uF(n){const e=UO(n);return e.length===4?_n.emptyPath():zO(e)}function $2(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zO(n){return nn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function PC(n,e,t){return{name:z2(n,e),fields:t.value.mapValue.fields}}function dF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:lt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(nn(f===void 0||typeof f=="string",58123),ti.fromBase64String(f||"")):(nn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ti.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?Te.UNKNOWN:BO(d.code);return new He(f,d.message||"")}(s);t=new VO(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ox(n,r.document.name),a=Ss(r.document.updateTime),s=r.document.createTime?Ss(r.document.createTime):ht.min(),o=new Li({mapValue:{fields:r.document.fields}}),c=ci.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];t=new om(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ox(n,r.document),a=r.readTime?Ss(r.readTime):ht.min(),s=ci.newNoDocument(i,a),o=r.removedTargetIds||[];t=new om([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ox(n,r.document),a=r.removedTargetIds||[];t=new om([],a,i,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new tF(i,a),o=r.targetId;t=new FO(o,s)}}return t}function fF(n,e){let t;if(e instanceof N0)t={update:PC(n,e.key,e.value)};else if(e instanceof k1)t={delete:z2(n,e.key)};else if(e instanceof Vl)t={update:PC(n,e.key,e.data),updateMask:_F(e.fieldMask)};else{if(!(e instanceof ZB))return lt(16599,{Rt:e.type});t={verify:z2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof f0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof h0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof p0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Cm)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw lt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:cF(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:lt(27497)}(n,e.precondition)),t}function hF(n,e){return n&&n.length>0?(nn(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?Ss(i.updateTime):Ss(a);return s.isEqual(ht.min())&&(s=Ss(a)),new XB(s,i.transformResults||[])}(t,e))):[]}function pF(n,e){return{documents:[HO(n,e.path)]}}function gF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HO(n,i);const a=function(d){if(d.length!==0)return GO(qa.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:dd(g.field),direction:vF(g.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=U2(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:i}}function mF(n){let e=uF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];t.where&&(a=function(p){const g=$O(p);return g instanceof qa&&wO(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(x){return new d0(fd(x.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,C1(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new Sm(y,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new Sm(y,g)}(t.endAt)),NB(e,i,s,a,o,"F",c,d)}function yF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $O(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fd(t.unaryFilter.field);return fr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fd(t.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fd(t.unaryFilter.field);return fr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fd(t.unaryFilter.field);return fr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(n):n.fieldFilter!==void 0?function(t){return fr.create(fd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return qa.create(t.compositeFilter.filters.map(r=>$O(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(t.compositeFilter.op))}(n):lt(30097,{filter:n})}function vF(n){return aF[n]}function xF(n){return sF[n]}function wF(n){return oF[n]}function dd(n){return{fieldPath:n.canonicalString()}}function fd(n){return Zr.fromServerFormat(n.fieldPath)}function GO(n){return n instanceof fr?function(t){if(t.op==="=="){if(wC(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NAN"}};if(xC(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wC(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NAN"}};if(xC(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(t.field),op:xF(t.op),value:t.value}}}(n):n instanceof qa?function(t){const r=t.getFilters().map(i=>GO(i));return r.length===1?r[0]:{compositeFilter:{op:wF(t.op),filters:r}}}(n):lt(54877,{filter:n})}function _F(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,r,i,a=ht.min(),s=ht.min(),o=ti.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.gt=e}}function AF(n){const e=mF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.Dn=new SF}addToCollectionParentIndex(e,t){return this.Dn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(Dl.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(Dl.min())}updateCollectionGroup(e,t,r){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class SF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dr(_n.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dr(_n.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YO=41943040;class Ni{static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(YO,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ud(0)}static ur(){return new Ud(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="LruGarbageCollector",TF=1048576;function LC([n,e],[t,r]){const i=Et(n,t);return i===0?Et(e,r):i}class CF{constructor(e){this.Tr=e,this.buffer=new Dr(LC),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$e(NC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lf(t)?$e(NC,"Ignoring IndexedDB error during garbage collection: ",t):await of(t)}await this.Rr(3e5)})}}class DF{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return De.resolve(T1.ue);const r=new CF(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(kC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kC):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),cd()<=Mt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function RF(n,e){return new DF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?De.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&e0(r.mutation,i,qi.empty(),Rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=Oc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=Lh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Oc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{t.set(s,o)})})}computeViews(e,t,r,i){let a=_o();const s=Jh(),o=function(){return Jh()}();return t.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Vl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),e0(f.mutation,d,f.mutation.getFieldMask(),Rn.now())):s.set(d.key,qi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var p;return o.set(d,new MF(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,t){const r=Jh();let i=new Hn((s,o)=>s-o),a=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let f=r.get(c)||qi.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||Pt()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=DO();f.forEach(g=>{if(!a.has(g)){const y=NO(t.get(g),r.get(g));y!==null&&p.set(g,y),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return De.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):De.resolve(Oc());let o=o0,c=a;return s.next(d=>De.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?De.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,Pt())).next(f=>({batchId:o,changes:IO(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=Lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Lh();return this.indexManager.getCollectionParents(e,a).next(o=>De.forEach(o,c=>{const d=function(p,g){return new Jc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,ci.newInvalidDocument(f)))});let o=Lh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&e0(f.mutation,d,qi.empty(),Rn.now()),O1(t,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return De.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ss(i.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:AF(i.bundledQuery),readTime:Ss(i.readTime)}}(t)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.overlays=new Hn(Je.comparator),this.kr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oc();return De.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),De.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),De.resolve()}getOverlaysForCollection(e,t,r){const i=Oc(),a=t.length+1,s=new Je(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return De.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Hn((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Oc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=Oc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return De.resolve(o)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new eF(t,r));let a=this.kr.get(t);a===void 0&&(a=Pt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.qr=new Dr(Fr.Qr),this.$r=new Dr(Fr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Fr(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Je(new _n([])),r=new Fr(t,e),i=new Fr(t,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Je(new _n([])),r=new Fr(t,e),i=new Fr(t,e+1);let a=Pt();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new Fr(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Je.comparator(e.key,t.key)||Et(e.Hr,t.Hr)}static Ur(e,t){return Et(e.Hr,t.Hr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dr(Fr.Qr)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new JB(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Fr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return De.resolve(s)}lookupMutationBatch(e,t){return De.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return De.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?r_:this.er-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),i=new Fr(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),De.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dr(Et);return t.forEach(i=>{const a=new Fr(i,0),s=new Fr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),De.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const s=new Fr(new Je(a),0);let o=new Dr(Et);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),De.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){nn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return De.forEach(t.mutations,i=>{const a=new Fr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Fr(t,0),i=this.Yr.firstAfterOrEqual(r);return De.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.ni=e,this.docs=function(){return new Hn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return De.resolve(r?r.document.mutableCopy():ci.newInvalidDocument(t))}getEntries(e,t){let r=_o();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ci.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=_o();const s=t.path,o=new Je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||hB(fB(f),r)<=0||(i.has(f.key)||O1(t,f))&&(a=a.insert(f.key,f.mutableCopy()))}return De.resolve(a)}getAllFromCollectionGroup(e,t,r,i){lt(9500)}ri(e,t){return De.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VF(this)}getSize(e){return De.resolve(this.size)}}class VF extends OF{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),De.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.persistence=e,this.ii=new eu(t=>s_(t),o_),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.si=0,this.oi=new f_,this.targetCount=0,this._i=Ud.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),De.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ud(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.hr(t),De.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),De.waitFor(a).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return De.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),De.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),De.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return De.resolve(r)}containsKey(e,t){return De.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,t){this.ai={},this.overlays={},this.ui=new T1(0),this.ci=!1,this.ci=!0,this.li=new LF,this.referenceDelegate=e(this),this.hi=new jF(this),this.indexManager=new EF,this.remoteDocumentCache=function(i){return new FF(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new bF(t),this.Ti=new kF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new BF(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new UF(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return De.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class UF extends gB{constructor(e){super(),this.currentSequenceNumber=e}}class h_{constructor(e){this.persistence=e,this.Ai=new f_,this.Ri=null}static Vi(e){return new h_(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),De.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.mi,r=>{const i=Je.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,ht.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return De.or([()=>De.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dm{constructor(e,t){this.persistence=e,this.gi=new eu(r=>vB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RF(this,t)}static Vi(e,t){return new Dm(e,t)}Ii(){}di(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return De.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?De.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(o=>{o||(r++,a.removeEntry(s,ht.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),De.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=im(e.data.value)),t}Sr(e,t,r){return De.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return De.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Pt(),i=Pt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new p_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return w5()?8:mB(pi())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new HF;return this.ws(e,t,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,t,s,o.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(cd()<=Mt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",ud(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),De.resolve()):(cd()<=Mt.DEBUG&&$e("QueryEngine","Query:",ud(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(cd()<=Mt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",ud(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):De.resolve())}ps(e,t){if(EC(t))return De.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Tm(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Pt(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(t,o);return this.Ds(t,d,s,c.readTime)?this.ps(e,Tm(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return EC(t)||i.isEqual(ht.min())?De.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(t,a);return this.Ds(t,s,r,i)?De.resolve(null):(cd()<=Mt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ud(t)),this.vs(e,s,t,dB(i,o0)).next(o=>o))})}bs(e,t){let r=new Dr(TO(e));return t.forEach((i,a)=>{O1(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return cd()<=Mt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",ud(t)),this.gs.getDocumentsMatchingQuery(e,t,Dl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="LocalStore",$F=3e8;class GF{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Hn(Et),this.Ms=new eu(a=>s_(a),o_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function WF(n,e,t,r){return new GF(n,e,t,r)}async function XO(n,e){const t=mt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=Pt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function YF(n,e){const t=mt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let y=De.resolve();return g.forEach(x=>{y=y.next(()=>f.getEntry(c,x)).next(b=>{const A=d.docVersions.get(x);nn(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Pt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KO(n){const e=mt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function qF(n,e){const t=mt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(t.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(a,f.addedDocuments,p)));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ti.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(b,A,S){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=$F?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,y,f)&&o.push(t.hi.updateTargetData(a,y))});let c=_o(),d=Pt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(XF(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(ht.min())){const f=t.hi.getLastRemoteSnapshotVersion(a).next(p=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return De.waitFor(o).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(t.Fs=i,a))}function XF(n,e,t){let r=Pt(),i=Pt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=_o();return t.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(ht.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):$e(g_,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function KF(n,e){const t=mt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=r_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QF(n,e){const t=mt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,De.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new xl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function G2(n,e,t){const r=mt(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!lf(s))throw s;$e(g_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function BC(n,e,t){const r=mt(n);let i=ht.min(),a=Pt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=mt(c),g=p.Ms.get(f);return g!==void 0?De.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,Es(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ht.min(),t?a:Pt())).next(o=>(ZF(r,BB(e),o),{documents:o,qs:a})))}function ZF(n,e,t){let r=n.xs.get(e)||ht.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class FC{constructor(){this.activeTargetIds=zB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JF{constructor(){this.Fo=new FC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new FC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="ConnectivityMonitor";class jC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$e(VC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){$e(VC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og=null;function W2(){return Og===null?Og=function(){return 268435456+Math.round(2147483648*Math.random())}():Og++,"0x"+Og.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="RestConnection",tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Am?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=W2(),o=this.Go(e,t.toUriEncodedString());$e(Mx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=nf(d);return this.jo(e,o,c,r,f).then(p=>($e(Mx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Il(Mx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=tV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="WebChannelConnection";class iV extends nV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const s=W2();return new Promise((o,c)=>{const d=new JR;d.setWithCredentials(!0),d.listenOnce(eO.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case rm.NO_ERROR:const p=d.getResponseJson();$e(ii,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case rm.TIMEOUT:$e(ii,`RPC '${e}' ${s} timed out`),c(new He(Te.DEADLINE_EXCEEDED,"Request time out"));break;case rm.HTTP_ERROR:const g=d.getStatus();if($e(ii,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const b=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(T)>=0?T:Te.UNKNOWN}(x.status);c(new He(b,x.message))}else c(new He(Te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new He(Te.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{$e(ii,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);$e(ii,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}P_(e,t,r){const i=W2(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rO(),o=nO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=a.join("");$e(ii,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,y=!1;const x=new rV({Ho:A=>{y?$e(ii,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||($e(ii,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$e(ii,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),b=(A,S,T)=>{A.listen(S,I=>{try{T(I)}catch(R){setTimeout(()=>{throw R},0)}})};return b(p,Nh.EventType.OPEN,()=>{y||($e(ii,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),b(p,Nh.EventType.CLOSE,()=>{y||(y=!0,$e(ii,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(p))}),b(p,Nh.EventType.ERROR,A=>{y||(y=!0,Il(ii,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),x.__(new He(Te.UNAVAILABLE,"The operation could not be completed")))}),b(p,Nh.EventType.MESSAGE,A=>{var S;if(!y){const T=A.data[0];nn(!!T,16349);const I=T,R=(I==null?void 0:I.error)||((S=I[0])===null||S===void 0?void 0:S.error);if(R){$e(ii,`RPC '${e}' stream ${i} received error:`,R);const P=R.status;let B=function(D){const V=dr[D];if(V!==void 0)return BO(V)}(P),O=R.message;B===void 0&&(B=Te.INTERNAL,O="Unknown error status: "+P+" with message "+R.message),y=!0,x.__(new He(B,O)),p.close()}else $e(ii,`RPC '${e}' stream ${i} received:`,T),x.a_(T)}}),b(o,tO.STAT_EVENT,A=>{A.stat===k2.PROXY?$e(ii,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===k2.NOPROXY&&$e(ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Px(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n){return new lF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="PersistentStream";class ZO{constructor(e,t,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new QO(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(wo(t.toString()),wo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new He(Te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return $e(UC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():($e(UC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aV extends ZO{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=dF(this.serializer,e),r=function(a){if(!("targetChange"in a))return ht.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?ht.min():s.readTime?Ss(s.readTime):ht.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=$2(this.serializer),t.addTarget=function(a,s){let o;const c=s.target;if(o=V2(c)?{documents:pF(a,c)}:{query:gF(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=jO(a,s.resumeToken);const d=U2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(ht.min())>0){o.readTime=Im(a,s.snapshotVersion.toTimestamp());const d=U2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=yF(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=$2(this.serializer),t.removeTarget=e,this.k_(t)}}class sV extends ZO{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=hF(e.writeResults,e.commitTime),r=Ss(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=$2(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fF(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{}class lV extends oV{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new He(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,H2(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(Te.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,H2(t,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(Te.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class cV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wo(t),this._a=!1):$e("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="RemoteStore";class uV{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{tu(this)&&($e(qc,"Restarting streams for network reachability change."),await async function(c){const d=mt(c);d.Ia.add(4),await B0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await B1(d)}(this))})}),this.Aa=new cV(r,i)}}async function B1(n){if(tu(n))for(const e of n.da)await e(!0)}async function B0(n){for(const e of n.da)await e(!1)}function JO(n,e){const t=mt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),x_(t)?v_(t):cf(t).x_()&&y_(t,e))}function m_(n,e){const t=mt(n),r=cf(t);t.Ta.delete(e),r.x_()&&eM(t,e),t.Ta.size===0&&(r.x_()?r.B_():tu(t)&&t.Aa.set("Unknown"))}function y_(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cf(n).H_(e)}function eM(n,e){n.Ra.$e(e),cf(n).Y_(e)}function v_(n){n.Ra=new iF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),cf(n).start(),n.Aa.aa()}function x_(n){return tu(n)&&!cf(n).M_()&&n.Ta.size>0}function tu(n){return mt(n).Ia.size===0}function tM(n){n.Ra=void 0}async function dV(n){n.Aa.set("Online")}async function fV(n){n.Ta.forEach((e,t)=>{y_(n,e)})}async function hV(n,e){tM(n),x_(n)?(n.Aa.la(e),v_(n)):n.Aa.set("Unknown")}async function pV(n,e,t){if(n.Aa.set("Online"),e instanceof VO&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(n,e)}catch(r){$e(qc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rm(n,r)}else if(e instanceof om?n.Ra.Ye(e):e instanceof FO?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ht.min()))try{const r=await KO(n.localStore);t.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(ti.EMPTY_BYTE_STRING,f.snapshotVersion)),eM(a,c);const p=new xl(f.target,c,d,f.sequenceNumber);y_(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){$e(qc,"Failed to raise snapshot:",r),await Rm(n,r)}}async function Rm(n,e,t){if(!lf(e))throw e;n.Ia.add(1),await B0(n),n.Aa.set("Offline"),t||(t=()=>KO(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$e(qc,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await B1(n)})}function nM(n,e){return e().catch(t=>Rm(n,t,e))}async function F1(n){const e=mt(n),t=Pl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:r_;for(;gV(e);)try{const i=await KF(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,mV(e,i)}catch(i){await Rm(e,i)}rM(e)&&iM(e)}function gV(n){return tu(n)&&n.Pa.length<10}function mV(n,e){n.Pa.push(e);const t=Pl(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function rM(n){return tu(n)&&!Pl(n).M_()&&n.Pa.length>0}function iM(n){Pl(n).start()}async function yV(n){Pl(n).na()}async function vV(n){const e=Pl(n);for(const t of n.Pa)e.X_(t.mutations)}async function xV(n,e,t){const r=n.Pa.shift(),i=c_.from(r,e,t);await nM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await F1(n)}async function wV(n,e){e&&Pl(n).Z_&&await async function(r,i){if(function(s){return nF(s)&&s!==Te.ABORTED}(i.code)){const a=r.Pa.shift();Pl(r).N_(),await nM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await F1(r)}}(n,e),rM(n)&&iM(n)}async function HC(n,e){const t=mt(n);t.asyncQueue.verifyOperationInProgress(),$e(qc,"RemoteStore received new credentials");const r=tu(t);t.Ia.add(3),await B0(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await B1(t)}async function _V(n,e){const t=mt(n);e?(t.Ia.delete(2),await B1(t)):e||(t.Ia.add(2),await B0(t),t.Aa.set("Unknown"))}function cf(n){return n.Va||(n.Va=function(t,r,i){const a=mt(t);return a.ia(),new aV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:dV.bind(null,n),e_:fV.bind(null,n),n_:hV.bind(null,n),J_:pV.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),x_(n)?v_(n):n.Aa.set("Unknown")):(await n.Va.stop(),tM(n))})),n.Va}function Pl(n){return n.ma||(n.ma=function(t,r,i){const a=mt(t);return a.ia(),new sV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:yV.bind(null,n),n_:wV.bind(null,n),ea:vV.bind(null,n),ta:xV.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await F1(n)):(await n.ma.stop(),n.Pa.length>0&&($e(qc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new w_(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(n,e){if(wo("AsyncQueue",`${e}: ${n}`),lf(n))return new He(Te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{static emptySet(e){return new Id(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Lh(),this.sortedSet=new Hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Id)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.fa=new Hn(Je.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):lt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hd{constructor(e,t,r,i,a,s,o,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Hd(e,t,Id.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class AV{constructor(){this.queries=$C(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=mt(t),a=i.queries;i.queries=$C(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new He(Te.ABORTED,"Firestore shutting down"))}}function $C(){return new eu(n=>SO(n),R1)}async function b_(n,e){const t=mt(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new bV,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=__(s,`Initialization of query '${ud(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&E_(t)}async function A_(n,e){const t=mt(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EV(n,e){const t=mt(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&E_(t)}function SV(n,e,t){const r=mt(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function E_(n){n.Da.forEach(e=>{e.next()})}var Y2,GC;(GC=Y2||(Y2={})).Fa="default",GC.Cache="cache";class S_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Hd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Y2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.key=e}}class sM{constructor(e){this.key=e}}class TV{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pt(),this.mutatedKeys=Pt(),this.Xa=TO(e),this.eu=new Id(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new zC,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),y=O1(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?x!==b&&(r.track({type:3,doc:y}),A=!0):this.iu(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(o=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(y?(s=s.add(y),a=b?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(y,x){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:A})}};return b(y)-b(x)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new Hd(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new sM(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new aM(r))}),t}uu(e){this.Ha=e.qs,this.Za=Pt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Hd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const T_="SyncEngine";class CV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IV{constructor(e){this.key=e,this.lu=!1}}class DV{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new eu(o=>SO(o),R1),this.Tu=new Map,this.Iu=new Set,this.du=new Hn(Je.comparator),this.Eu=new Map,this.Au=new f_,this.Ru={},this.Vu=new Map,this.mu=Ud.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function RV(n,e,t=!0){const r=fM(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await oM(r,e,t,!0),i}async function OV(n,e){const t=fM(n);await oM(t,e,!0,!1)}async function oM(n,e,t,r){const i=await QF(n.localStore,Es(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await MV(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&JO(n.remoteStore,i),o}async function MV(n,e,t,r,i){n.gu=(p,g,y)=>async function(b,A,S,T){let I=A.view.nu(S);I.Ds&&(I=await BC(b.localStore,A.query,!1).then(({documents:O})=>A.view.nu(O,I)));const R=T&&T.targetChanges.get(A.targetId),P=T&&T.targetMismatches.get(A.targetId)!=null,B=A.view.applyChanges(I,b.isPrimaryClient,R,P);return YC(b,A.targetId,B._u),B.snapshot}(n,p,g,y);const a=await BC(n.localStore,e,!0),s=new TV(e,a.qs),o=s.nu(a.documents),c=L0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(o,n.isPrimaryClient,c);YC(n,t,d._u);const f=new CV(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function PV(n,e,t){const r=mt(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!R1(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await G2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&m_(r.remoteStore,i.targetId),q2(r,i.targetId)}).catch(of)):(q2(r,i.targetId),await G2(r.localStore,i.targetId,!0))}async function kV(n,e){const t=mt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),m_(t.remoteStore,r.targetId))}async function NV(n,e,t){const r=HV(n);try{const i=await function(s,o){const c=mt(s),d=Rn.now(),f=o.reduce((y,x)=>y.add(x.key),Pt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=_o(),b=Pt();return c.Os.getEntries(y,f).next(A=>{x=A,x.forEach((S,T)=>{T.isValidDocument()||(b=b.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,x)).next(A=>{p=A;const S=[];for(const T of o){const I=QB(T,p.get(T.key).overlayedDocument);I!=null&&S.push(new Vl(T.key,I,yO(I.value.mapValue),Ii.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,S,o)}).next(A=>{g=A;const S=A.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(y,A.batchId,S)})}).then(()=>({batchId:g.batchId,changes:IO(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Hn(Et)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,t),await F0(r,i.changes),await F1(r.remoteStore)}catch(i){const a=__(i,"Failed to persist write");t.reject(a)}}async function lM(n,e){const t=mt(n);try{const r=await qF(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Eu.get(a);s&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?nn(s.lu,14607):i.removedDocuments.size>0&&(nn(s.lu,42227),s.lu=!1))}),await F0(t,r,e)}catch(r){await of(r)}}function WC(n,e,t){const r=mt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=mt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&E_(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LV(n,e,t){const r=mt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Hn(Je.comparator);s=s.insert(a,ci.newNoDocument(a,ht.min()));const o=Pt().add(a),c=new N1(ht.min(),new Map,new Hn(Et),s,o);await lM(r,c),r.du=r.du.remove(a),r.Eu.delete(e),C_(r)}else await G2(r.localStore,e,!1).then(()=>q2(r,e,t)).catch(of)}async function BV(n,e){const t=mt(n),r=e.batch.batchId;try{const i=await YF(t.localStore,e);uM(t,r,null),cM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await F0(t,i)}catch(i){await of(i)}}async function FV(n,e,t){const r=mt(n);try{const i=await function(s,o){const c=mt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(nn(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);uM(r,e,t),cM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await F0(r,i)}catch(i){await of(i)}}function cM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function uM(n,e,t){const r=mt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function q2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||dM(n,r)})}function dM(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(m_(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),C_(n))}function YC(n,e,t){for(const r of t)r instanceof aM?(n.Au.addReference(r.key,e),VV(n,r)):r instanceof sM?($e(T_,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||dM(n,r.key)):lt(19791,{yu:r})}function VV(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||($e(T_,"New document in limbo: "+t),n.Iu.add(r),C_(n))}function C_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Je(_n.fromString(e)),r=n.mu.next();n.Eu.set(r,new IV(t)),n.du=n.du.insert(t,r),JO(n.remoteStore,new xl(Es(D1(t.path)),r,"TargetPurposeLimboResolution",T1.ue))}}async function F0(n,e,t){const r=mt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=p_.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=mt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>De.forEach(d,g=>De.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>De.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!lf(p))throw p;$e(g_,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=f.Fs.get(g),x=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,a))}async function jV(n,e){const t=mt(n);if(!t.currentUser.isEqual(e)){$e(T_,"User change. New user:",e.toKey());const r=await XO(t.localStore,e);t.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new He(Te.CANCELLED,s))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await F0(t,r.Bs)}}function UV(n,e){const t=mt(n),r=t.Eu.get(e);if(r&&r.lu)return Pt().add(r.key);{let i=Pt();const a=t.Tu.get(e);if(!a)return i;for(const s of a){const o=t.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function fM(n){const e=mt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LV.bind(null,e),e.hu.J_=EV.bind(null,e.eventManager),e.hu.pu=SV.bind(null,e.eventManager),e}function HV(n){const e=mt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FV.bind(null,e),e}class Om{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return WF(this.persistence,new zF,e.initialUser,this.serializer)}Du(e){return new qO(h_.Vi,this.serializer)}bu(e){return new JF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Om.provider={build:()=>new Om};class zV extends Om{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nn(this.persistence.referenceDelegate instanceof Dm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IF(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new qO(r=>Dm.Vi(r,t),this.serializer)}}class X2{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jV.bind(null,this.syncEngine),await _V(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AV}()}createDatastore(e){const t=L1(e.databaseInfo.databaseId),r=function(a){return new iV(a)}(e.databaseInfo);return function(a,s,o,c){return new lV(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,o){return new uV(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,t=>WC(this.syncEngine,t,0),function(){return jC.C()?new jC:new eV}())}createSyncEngine(e,t){return function(i,a,s,o,c,d,f){const p=new DV(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=mt(i);$e(qc,"RemoteStore shutting down."),a.Ia.add(5),await B0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}X2.provider={build:()=>new X2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):wo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="FirestoreClient";class $V{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{$e(kl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($e(kl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=__(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kx(n,e){n.asyncQueue.verifyOperationInProgress(),$e(kl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XO(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Il("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{$e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Il("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function qC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GV(n);$e(kl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>HC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>HC(e.remoteStore,i)),n._onlineComponents=e}async function GV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(kl,"Using user provided OfflineComponentProvider");try{await kx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Il("Error using user provided cache. Falling back to memory cache: "+t),await kx(n,new Om)}}else $e(kl,"Using default OfflineComponentProvider"),await kx(n,new zV(void 0));return n._offlineComponents}async function hM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(kl,"Using user provided OnlineComponentProvider"),await qC(n,n._uninitializedComponentsProvider._online)):($e(kl,"Using default OnlineComponentProvider"),await qC(n,new X2))),n._onlineComponents}function WV(n){return hM(n).then(e=>e.syncEngine)}async function Mm(n){const e=await hM(n),t=e.eventManager;return t.onListen=RV.bind(null,e.syncEngine),t.onUnlisten=PV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kV.bind(null,e.syncEngine),t}function YV(n,e,t={}){const r=new go;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new I_({next:g=>{f.Ou(),s.enqueueAndForget(()=>A_(a,p));const y=g.docs.has(o);!y&&g.fromCache?d.reject(new He(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?d.reject(new He(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new S_(D1(o.path),f,{includeMetadataChanges:!0,ka:!0});return b_(a,p)}(await Mm(n),n.asyncQueue,e,t,r)),r.promise}function qV(n,e,t={}){const r=new go;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new I_({next:g=>{f.Ou(),s.enqueueAndForget(()=>A_(a,p)),g.fromCache&&c.source==="server"?d.reject(new He(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new S_(o,f,{includeMetadataChanges:!0,ka:!0});return b_(a,p)}(await Mm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="firestore.googleapis.com",KC=!0;class QC{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gM,this.ssl=KC}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:KC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TF)throw new He(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eB;switch(r.type){case"firstParty":return new iB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=XC.get(t);r&&($e("ComponentProvider","Removing Datastore"),XC.delete(t),r.terminate())}(this),Promise.resolve()}}function XV(n,e,t,r={}){var i;n=hi(n,V0);const a=nf(e),s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(uR(`https://${c}`),dR("Firestore",!0)),s.host!==gM&&s.host!==c&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!zc(d,o)&&(n._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=li.MOCK_USER;else{f=d5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new He(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new li(g)}n._authCredentials=new tB(new aO(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(k0(t,Gn._jsonSchema))return new Gn(e,r||null,new Je(_n.fromString(t.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:hr("string",Gn._jsonSchemaVersion),referencePath:hr("string")};class Sl extends Ns{constructor(e,t,r){super(e,t,D1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Je(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function pr(n,e,...t){if(n=gr(n),n_("collection","path",e),n instanceof V0){const r=_n.fromString(e,...t);return uC(r),new Sl(n,null,r)}{if(!(n instanceof Gn||n instanceof Sl))throw new He(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return uC(r),new Sl(n.firestore,null,r)}}function wl(n,e){if(n=hi(n,V0),n_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(Te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ns(n,null,function(r){return new Jc(_n.emptyPath(),r)}(e))}function bo(n,e,...t){if(n=gr(n),arguments.length===1&&(e=t_.newId()),n_("doc","path",e),n instanceof V0){const r=_n.fromString(e,...t);return cC(r),new Gn(n,null,new Je(r))}{if(!(n instanceof Gn||n instanceof Sl))throw new He(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return cC(r),new Gn(n.firestore,n instanceof Sl?n.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="AsyncQueue";class JC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new QO(this,"async_queue_retry"),this.oc=()=>{const r=Px();r&&$e(ZC,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Px();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Px();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new go;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lf(e))throw e;$e(ZC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,wo("INTERNAL UNHANDLED ERROR: ",eI(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=w_.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&lt(47125,{hc:eI(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function eI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Ms extends V0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new JC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JC(e),this._firestoreClient=void 0,await e}}}function KV(n,e){const t=typeof n=="object"?n:gR(),r=typeof n=="string"?n:Am,i=$w(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=c5("firestore");a&&XV(i,...a)}return i}function j0(n){if(n._terminated)throw new He(Te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QV(n),n._firestoreClient}function QV(n){var e,t,r;const i=n._freezeSettings(),a=function(o,c,d,f){return new _B(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,pM(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $V(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pa(ti.fromBase64String(e))}catch(t){throw new He(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pa(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(k0(e,pa._jsonSchema))return pa.fromBase64String(e.bytes)}}pa._jsonSchemaVersion="firestore/bytes/1.0",pa._jsonSchema={type:hr("string",pa._jsonSchemaVersion),bytes:hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(k0(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:hr("string",Ts._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(k0(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Cs(e.vectorValues);throw new He(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:hr("string",Cs._jsonSchemaVersion),vectorValues:hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=/^__.*__$/;class JV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new N0(e,this.data,t,this.fieldTransforms)}}class mM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}class D_{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new D_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Pm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yM(this.Ec)&&ZV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ej{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||L1(e)}Dc(e,t,r,i=!1){return new D_({Ec:e,methodName:t,bc:r,path:Zr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H0(n){const e=n._freezeSettings(),t=L1(n._databaseId);return new ej(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R_(n,e,t,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);M_("Data must be an object, but it was:",s,r);const o=wM(r,s);let c,d;if(a.merge)c=new qi(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=K2(e,p,t);if(!s.contains(g))throw new He(Te.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bM(f,g)||f.push(g)}c=new qi(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new JV(new Li(o),c,d)}class j1 extends V1{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j1}}class O_ extends V1{_toFieldTransform(e){return new YB(e.path,new f0)}isEqual(e){return e instanceof O_}}function vM(n,e,t,r){const i=n.Dc(1,e,t);M_("Data must be an object, but it was:",i,r);const a=[],s=Li.empty();Fl(r,(c,d)=>{const f=P_(e,c,t);d=gr(d);const p=i.gc(f);if(d instanceof j1)a.push(f);else{const g=z0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new qi(a);return new mM(s,o,i.fieldTransforms)}function xM(n,e,t,r,i,a){const s=n.Dc(1,e,t),o=[K2(e,r,t)],c=[i];if(a.length%2!=0)throw new He(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(K2(e,a[g])),c.push(a[g+1]);const d=[],f=Li.empty();for(let g=o.length-1;g>=0;--g)if(!bM(d,o[g])){const y=o[g];let x=c[g];x=gr(x);const b=s.gc(y);if(x instanceof j1)d.push(y);else{const A=z0(x,b);A!=null&&(d.push(y),f.set(y,A))}}const p=new qi(d);return new mM(f,p,s.fieldTransforms)}function tj(n,e,t,r=!1){return z0(t,n.Dc(r?4:3,e))}function z0(n,e){if(_M(n=gr(n)))return M_("Unsupported field value:",e,n),wM(n,e);if(n instanceof V1)return function(r,i){if(!yM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=z0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=gr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $B(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Rn.fromDate(r);return{timestampValue:Im(i.serializer,a)}}if(r instanceof Rn){const a=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Im(i.serializer,a)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pa)return{bytesValue:jO(i.serializer,r._byteString)};if(r instanceof Gn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:d_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cs)return function(s,o){return{mapValue:{fields:{[gO]:{stringValue:mO},[Em]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return l_(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${S1(r)}`)}(n,e)}function wM(n,e){const t={};return cO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fl(n,(r,i)=>{const a=z0(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function _M(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof Ts||n instanceof pa||n instanceof Gn||n instanceof V1||n instanceof Cs)}function M_(n,e,t){if(!_M(t)||!oO(t)){const r=S1(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function K2(n,e,t){if((e=gr(e))instanceof U0)return e._internalPath;if(typeof e=="string")return P_(n,e);throw Pm("Field path arguments must be of type string or ",n,!1,void 0,t)}const nj=new RegExp("[~\\*/\\[\\]]");function P_(n,e,t){if(e.search(nj)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new U0(...e.split("."))._internalPath}catch{throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pm(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new He(Te.INVALID_ARGUMENT,o+n+c)}function bM(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(U1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rj extends AM{data(){return super.data()}}function U1(n,e){return typeof e=="string"?P_(n,e):e instanceof U0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new He(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k_{}class N_ extends k_{}function jn(n,e,...t){let r=[];e instanceof k_&&r.push(e),r=r.concat(t),function(a){const s=a.filter(c=>c instanceof L_).length,o=a.filter(c=>c instanceof H1).length;if(s>1||s>0&&o>0)throw new He(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class H1 extends N_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new H1(e,t,r)}_apply(e){const t=this._parse(e);return SM(e._query,t),new Ns(e.firestore,e.converter,j2(e._query,t))}_parse(e){const t=H0(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new He(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){rI(p,f);const x=[];for(const b of p)x.push(nI(c,a,b));g={arrayValue:{values:x}}}else g=nI(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||rI(p,f),g=tj(o,s,p,f==="in"||f==="not-in");return fr.create(d,f,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(n,e,t){const r=e,i=U1("where",n);return H1._create(i,r,t)}class L_ extends k_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:qa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)SM(s,c),s=j2(s,c)}(e._query,t),new Ns(e.firestore,e.converter,j2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B_ extends N_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new B_(e,t)}_apply(e){const t=function(i,a,s){if(i.startAt!==null)throw new He(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new d0(a,s)}(e._query,this._field,this._direction);return new Ns(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new Jc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function z1(n,e="asc"){const t=e,r=U1("orderBy",n);return B_._create(r,t)}class F_ extends N_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new F_(e,t,r)}_apply(e){return new Ns(e.firestore,e.converter,Tm(e._query,this._limit,this._limitType))}}function km(n){return uB("limit",n),F_._create("limit",n,"F")}function nI(n,e,t){if(typeof(t=gr(t))=="string"){if(t==="")throw new He(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EO(e)&&t.indexOf("/")!==-1)throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!Je.isDocumentKey(r))throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vC(n,new Je(r))}if(t instanceof Gn)return vC(n,t._key);throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S1(t)}.`)}function rI(n,e){if(!Array.isArray(n)||n.length===0)throw new He(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SM(n,e){const t=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new He(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ij{convertValue(e,t="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Em].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Zn(s.doubleValue));return new Cs(a)}convertGeoPoint(e){return new Ts(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I1(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(l0(e));default:return null}}convertTimestamp(e){const t=Rl(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);nn(WO(r),9688,{name:e});const i=new c0(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||wo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends AM{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(U1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fc._jsonSchema={type:hr("string",Fc._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class lm extends Fc{data(e={}){return super.data(e)}}class Vc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lm(this._firestore,this._userDataWriter,r.key,r,new Fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new lm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Fh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new lm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Fh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:aj(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=t_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(n){n=hi(n,Gn);const e=hi(n.firestore,Ms);return YV(j0(e),n._key).then(t=>TM(e,n,t))}Vc._jsonSchemaVersion="firestore/querySnapshot/1.0",Vc._jsonSchema={type:hr("string",Vc._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};class j_ extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function Jn(n){n=hi(n,Ns);const e=hi(n.firestore,Ms),t=j0(e),r=new j_(e);return EM(n._query),qV(t,n._query).then(i=>new Vc(e,r,n,i))}function iI(n,e,t){n=hi(n,Gn);const r=hi(n.firestore,Ms),i=V_(n.converter,e,t);return $0(r,[R_(H0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ii.none())])}function $1(n,e,t,...r){n=hi(n,Gn);const i=hi(n.firestore,Ms),a=H0(i);let s;return s=typeof(e=gr(e))=="string"||e instanceof U0?xM(a,"updateDoc",n._key,e,t,r):vM(a,"updateDoc",n._key,e),$0(i,[s.toMutation(n._key,Ii.exists(!0))])}function oj(n){return $0(hi(n.firestore,Ms),[new k1(n._key,Ii.none())])}function g0(n,e){const t=hi(n.firestore,Ms),r=bo(n),i=V_(n.converter,e);return $0(t,[R_(H0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ii.exists(!1))]).then(()=>r)}function lj(n,...e){var t,r,i;n=gr(n);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||tI(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(tI(e[s])){const p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(n instanceof Gn)d=hi(n.firestore,Ms),f=D1(n._key.path),c={next:p=>{e[s]&&e[s](TM(d,n,p))},error:e[s+1],complete:e[s+2]};else{const p=hi(n,Ns);d=hi(p.firestore,Ms),f=p._query;const g=new j_(d);c={next:y=>{e[s]&&e[s](new Vc(d,g,p,y))},error:e[s+1],complete:e[s+2]},EM(n._query)}return function(g,y,x,b){const A=new I_(b),S=new S_(y,A,x);return g.asyncQueue.enqueueAndForget(async()=>b_(await Mm(g),S)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>A_(await Mm(g),S))}}(j0(d),f,o,c)}function $0(n,e){return function(r,i){const a=new go;return r.asyncQueue.enqueueAndForget(async()=>NV(await WV(r),i,a)),a.promise}(j0(n),e)}function TM(n,e,t){const r=t.docs.get(e._key),i=new j_(n);return new Fc(n,i,e._key,r,new Fh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=H0(e)}set(e,t,r){this._verifyNotCommitted();const i=Nx(e,this._firestore),a=V_(i.converter,t,r),s=R_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ii.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nx(e,this._firestore);let s;return s=typeof(t=gr(t))=="string"||t instanceof U0?xM(this._dataReader,"WriteBatch.update",a._key,t,r,i):vM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(s.toMutation(a._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nx(e,this._firestore);return this._mutations=this._mutations.concat(new k1(t._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nx(n,e){if((n=gr(n)).firestore!==e)throw new He(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Ti(){return new O_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(n){return j0(n=hi(n,Ms)),new cj(n,e=>$0(n,e))}(function(e,t=!0){(function(i){sf=i})(rf),Bd(new $c("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Ms(new nB(r.getProvider("auth-internal")),new aB(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new He(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Al(iC,aC,e),Al(iC,aC,"esm2017")})();const dj={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},CM=pR(dj),U_=KL(CM),Ht=KV(CM),IM=N.createContext();function fj({children:n}){const[e,t]=N.useState(null),[r,i]=N.useState(!0);return N.useEffect(()=>{const a=V7(U_,s=>{t(s),i(!1)});return()=>a()},[]),v.jsx(IM.Provider,{value:{user:e,loading:r},children:n})}function rr(){return N.useContext(IM)}function hj(){const[n,e]=N.useState(""),[t,r]=N.useState(""),[i,a]=N.useState(""),[s,o]=N.useState(!1),c=C0(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await L7(U_,n,t),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return v.jsxs(ie,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(ne,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:""}),v.jsx(wt,{label:"",type:"email",value:n,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),v.jsx(wt,{label:"",type:"password",value:t,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&v.jsx(ne,{color:"error",children:i}),v.jsx(Ke,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"...":""})]})}function pj(){const[n,e]=N.useState(""),[t,r]=N.useState(""),[i,a]=N.useState(""),[s,o]=N.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await N7(U_,n,t)}catch(f){a(f.message)}finally{o(!1)}}};return v.jsxs(ie,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(ne,{variant:"h5",align:"center",gutterBottom:!0,children:""}),v.jsx(wt,{label:"",type:"email",value:n,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),v.jsx(wt,{label:"",type:"password",value:t,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&v.jsx(ne,{color:"error",children:i}),v.jsx(Ke,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"...":""})]})}const ut={TSUNDOKU:"tsundoku",READING:"reading",SUSPENDED:"suspended",RE_READING:"re-reading",FINISHED:"finished"},Ha={BOUGHT:"bought",BORROWED:"borrowed",GIFT:"gift",UNKNOWN:"unknown"},Nm={[ut.TSUNDOKU]:"",[ut.READING]:"",[ut.SUSPENDED]:"",[ut.RE_READING]:"",[ut.FINISHED]:""},aI={[Ha.BOUGHT]:"",[Ha.BORROWED]:"",[Ha.GIFT]:"",[Ha.UNKNOWN]:""},sI={[ut.TSUNDOKU]:"default",[ut.READING]:"primary",[ut.SUSPENDED]:"warning",[ut.RE_READING]:"secondary",[ut.FINISHED]:"success"},Ar=ut.TSUNDOKU,H_=[ut.TSUNDOKU,ut.READING,ut.SUSPENDED,ut.RE_READING,ut.FINISHED],gj=[Ha.BOUGHT,Ha.BORROWED,Ha.GIFT,Ha.UNKNOWN],gn={ALL:"all",TSUNDOKU:ut.TSUNDOKU,READING_GROUP:"reading-group",READING:ut.READING,SUSPENDED:ut.SUSPENDED,RE_READING:ut.RE_READING,FINISHED:ut.FINISHED},hd={[gn.ALL]:"",[gn.TSUNDOKU]:"",[gn.READING_GROUP]:"",[gn.READING]:"",[gn.SUSPENDED]:"",[gn.RE_READING]:"",[gn.FINISHED]:""},Lm=n=>H_.includes(n),Ps=n=>Nm[n]||Nm[Ar],gs=n=>sI[n]||sI[Ar],DM=n=>aI[n]||aI[Ha.UNKNOWN];function mj({book:n,onClick:e,testId:t}){return v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:e,"data-testid":t||`book-card-${n.id}`,children:v.jsx(Nn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:v.jsxs(ie,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&v.jsx($3,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),v.jsxs(ie,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[v.jsx(ne,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||""}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||""}),v.jsx(ie,{sx:{mb:1},children:v.jsx(mn,{label:Ps(n.status||Ar),color:gs(n.status||Ar),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(n.publisher||n.publishedDate)&&v.jsxs(ne,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&""," ",n.publishedDate]}),v.jsx(ie,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((r,i)=>v.jsx(mn,{label:r,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},i)):v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:""})}),v.jsxs(ne,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:[": ",Ps(n.status||Ar)]})]})]})})})}const G1=({title:n,subtitle:e,children:t})=>v.jsxs(ga,{elevation:0,"data-testid":"page-header",sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[v.jsxs(ie,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[v.jsx(ne,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:n}),e&&v.jsx(ne,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:e}),t&&v.jsx(ie,{sx:{mt:2},children:t})]}),v.jsx(ie,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),ni=Ci.createContext({setGlobalError:()=>{}}),yj=({open:n,message:e,onClose:t})=>v.jsxs($a,{open:n,onClose:t,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[v.jsx(Ds,{sx:{color:"error.main",fontWeight:"bold"},children:""}),v.jsx(Ga,{children:v.jsx(za,{severity:"error",sx:{mb:2},children:e})}),v.jsx(Wa,{sx:{justifyContent:"center",pb:2},children:v.jsx(Ke,{onClick:t,color:"error",variant:"contained",autoFocus:!0,children:""})})]}),vj=({children:n})=>{const[e,t]=N.useState(null),r=a=>{t(a)},i=()=>{t(null)};return v.jsxs(ni.Provider,{value:{setGlobalError:r},children:[n,e&&v.jsx(yj,{open:!!e,message:e,onClose:i})]})};function Vh(n){return n?(t=>t.replace(/[---]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(String(n)).toLowerCase():""}function xj(n,e,t){return Array.isArray(n)?n.filter(i=>{if(e!==gn.ALL){const s=i.status||Ar;if(e===gn.READING_GROUP){if(![ut.READING,ut.RE_READING].includes(s))return!1}else if(s!==e)return!1}if(!t||!String(t).trim())return!0;const a=Vh(t);return i.title&&Vh(i.title).includes(a)||i.author&&Vh(i.author).includes(a)||Array.isArray(i.tags)&&i.tags.some(s=>Vh(s).includes(a))}):[]}function wj(n,e){const t=Array.isArray(n)?n:[],r=t.length,i=a=>t.filter(s=>(s.status||Ar)===a).length;return{total:r,tsundoku:i(ut.TSUNDOKU),reading:i(ut.READING),reReading:i(ut.RE_READING),finished:i(ut.FINISHED),filtered:Array.isArray(e)?e.length:0}}const _j=()=>{try{if(typeof Ci>"u"||!Ci.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:gn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(R){return console.warn("React context not available in useBookList:",R),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState([]),[a,s]=N.useState(!0),[o,c]=N.useState(null),[d,f]=N.useState(gn.READING_GROUP),[p,g]=N.useState(""),y=N.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null);const R=jn(pr(Ht,"books"),wn("userId","==",n.uid),z1("updatedAt","desc")),B=(await Jn(R)).docs.map(O=>({id:O.id,...O.data()}));i(B)}catch(R){console.error("Error fetching books:",R),t(""),c("")}finally{s(!1)}},[n,t]),x=N.useCallback((R,P)=>{f(P)},[]),b=N.useCallback(R=>{g(R.target.value)},[]),A=N.useCallback(()=>{g("")},[]),S=N.useCallback(()=>{f(gn.READING_GROUP)},[]),T=xj(r,d,p),I=wj(r,T);return N.useEffect(()=>{y()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:T,stats:I,loading:a,error:o,filter:d,searchText:p,fetchBooks:y,handleFilterChange:x,handleSearchChange:b,clearSearch:A,clearFilter:S,normalizeTag:Vh}};function bj(){const n=C0(),{filteredBooks:e,loading:t,error:r,filter:i,searchText:a,handleFilterChange:s,handleSearchChange:o}=_j(),c=d=>{n(`/book/${d}`)};return t?v.jsx("div",{children:"Loading..."}):v.jsxs(ie,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(G1,{title:"",subtitle:"","data-testid":"book-list-header"}),v.jsxs(ie,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(wt,{label:"",value:a,onChange:o,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(ie,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(m1,{value:i,onChange:s,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[v.jsx(Na,{label:hd[gn.ALL],value:gn.ALL}),v.jsx(Na,{label:hd[gn.TSUNDOKU],value:gn.TSUNDOKU}),v.jsx(Na,{label:hd[gn.READING_GROUP],value:gn.READING_GROUP}),v.jsx(Na,{label:hd[gn.SUSPENDED],value:gn.SUSPENDED}),v.jsx(Na,{label:hd[gn.FINISHED],value:gn.FINISHED})]})}),e.length===0?v.jsx(ie,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:v.jsx(ne,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:""})}):v.jsx(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:e.map(d=>v.jsx(ie,{"data-testid":`book-grid-item-${d.id}`,children:v.jsx(mj,{book:d,onClick:()=>c(d.id),testId:`book-list-card-${d.id}`})},d.id))})]})]})}const Ao=(n,e)=>{const[t,r]=N.useState([]),[i,a]=N.useState(!1),s=N.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=n==="book"?"bookTagHistory":"memoTagHistory",f=jn(pr(Ht,"users",e.uid,d),z1("updatedAt","desc")),p=await Jn(f),g=[];p.forEach(y=>{const x=y.data();x.tag&&g.push(x.tag)}),r(g)}catch(d){throw console.error(":",d),d}finally{a(!1)}},[e==null?void 0:e.uid,n]),o=N.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=n==="book"?"bookTagHistory":"memoTagHistory",p=bo(Ht,"users",e.uid,f,d);await iI(p,{tag:d,updatedAt:Ti()})}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,n]),c=N.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=n==="book"?"bookTagHistory":"memoTagHistory",y=bo(Ht,"users",e.uid,g,p);return iI(y,{tag:p,updatedAt:Ti()})});await Promise.all(f)}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,n]);return{tagOptions:t,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},Aj=()=>{const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState(!1),[a,s]=N.useState(null),{saveTagsToHistory:o}=Ao("book",n),c=N.useCallback(async f=>{if(!n)throw new Error("");if(!f.title)throw new Error("");try{i(!0),s(null);let p=(f.tags||[]).filter(x=>x&&x.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(x=>x&&x.trim()!=="");const g=await g0(pr(Ht,"books"),{userId:n.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:f.status||Ar,acquisitionType:f.acquisitionType||"unknown",createdAt:Ti(),updatedAt:Ti()});p.length>0&&await o(p);const y=f.status||Ar;if(y)try{const x=pr(Ht,"books",g.id,"statusHistory");await g0(x,{status:y,previousStatus:null,changedAt:Ti(),changedBy:n.uid,notes:"",createdAt:Ti()})}catch(x){console.error("Error adding initial status history:",x)}return g.id}catch(p){console.error("Error adding book:",p);const g=": "+p.message;throw t(g),s(g),p}finally{i(!1)}},[n,t,o]),d=N.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},Ej=()=>{const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState(!1),[a,s]=N.useState(""),[o,c]=N.useState(!1),d=N.useCallback(async g=>{if(!g||!g.trim())return s("ISBN"),null;s(""),i(!0),c(!0);try{const y=g.trim(),b=(await bT.get(`https://api.openbd.jp/v1/get?isbn=${y}`)).data[0];let A="",S="",T="",I="",R="",P=[];if(b&&b.summary&&(A=b.summary.title||"",S=b.summary.author||"",T=b.summary.publisher||"",I=b.summary.pubdate||"",R=b.summary.cover||"",b.summary.subject&&P.push(b.summary.subject),b.summary.ndc&&P.push(b.summary.ndc)),!R||!A)try{const O=(await bT.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${y}`)).data;if(O.items&&O.items.length>0){const C=O.items[0].volumeInfo;A||(A=C.title||""),S||(S=C.authors?C.authors.join(", "):""),T||(T=C.publisher||""),I||(I=C.publishedDate||""),!R&&C.imageLinks&&(R=C.imageLinks.thumbnail||C.imageLinks.smallThumbnail||""),C.categories&&C.categories.length>0&&(P=[...P,...C.categories])}}catch(B){console.error("Failed to fetch from Google Books API",B)}return A?{isbn:y,title:A,author:S,publisher:T,publishedDate:I,coverImageUrl:R,tags:Array.from(new Set(P))}:(t(""),null)}catch{const x="";return t(x),s(x),null}finally{i(!1)}},[t]),f=N.useCallback(()=>{s(null)},[]),p=N.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}},RM=()=>{const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState(!1),[a,s]=N.useState(null),[o,c]=N.useState(null),d=N.useCallback(async p=>{if(!n||!p||!p.trim())return s(null),null;i(!0),c(null),s(null);try{const g=pr(Ht,"books"),y=jn(g,wn("userId","==",n.uid),wn("isbn","==",p.trim())),x=await Jn(y);if(x.empty)return s(null),null;{const b=x.docs[0],A={id:b.id,...b.data()};return s(A),A}}catch(g){console.error("Error checking book duplicate:",g);const y=": "+g.message;return c(y),t(y),null}finally{i(!1)}},[n,t]),f=N.useCallback(()=>{s(null),c(null),i(!1)},[]);return{isChecking:r,duplicateBook:a,error:o,checkDuplicate:d,resetDuplicateCheck:f}};var Sj={};const Tj=()=>typeof jest<"u"?Sj.VITE_GOOGLE_BOOKS_API_KEY:"AIzaSyA4Zzn47v8NQiFSs-pwDxO8iqTZtdt0Df0",Cj=()=>{const[n,e]=N.useState([]),[t,r]=N.useState(!1),[i,a]=N.useState(""),[s,o]=N.useState(null),[c,d]=N.useState([]),[f,p]=N.useState({author:"",publisher:"",yearFrom:"",yearTo:""}),g=N.useCallback(()=>{try{const L=localStorage.getItem("bookSearchHistory");if(L){const M=JSON.parse(L);d(Array.isArray(M)?M:[])}}catch(L){console.warn("Failed to load search history:",L),d([])}},[]),y=N.useCallback(L=>{try{localStorage.setItem("bookSearchHistory",JSON.stringify(L))}catch(M){console.warn("Failed to save search history:",M)}},[]),x=N.useCallback((L,M)=>{if(!L||L.trim().length<2)return;const F={query:L.trim(),searchType:M,timestamp:Date.now()};d(q=>{const X=q.filter(G=>!(G.query===F.query&&G.searchType===F.searchType)),W=[F,...X].slice(0,10);return y(W),W})},[y]),b=N.useCallback(L=>{d(M=>{const F=M.filter((q,X)=>X!==L);return y(F),F})},[y]),A=N.useCallback(()=>{d([]),y([])},[y]),S=N.useCallback(L=>!L||L.length===0?L:L.filter(M=>{if(f.author&&M.author&&!M.author.toLowerCase().includes(f.author.toLowerCase())||f.publisher&&M.publisher&&!M.publisher.toLowerCase().includes(f.publisher.toLowerCase()))return!1;if(f.yearFrom||f.yearTo){const F=M.publishedDate?parseInt(M.publishedDate.split("-")[0]):null;if(F){if(f.yearFrom&&F<parseInt(f.yearFrom)||f.yearTo&&F>parseInt(f.yearTo))return!1}else return!1}return!0}),[f]),T=N.useCallback(L=>{p(M=>({...M,...L}))},[]),I=N.useCallback(()=>{p({author:"",publisher:"",yearFrom:"",yearTo:""})},[]),R=N.useCallback((L,M)=>Array.isArray(L)?L.map((F,q)=>({id:`${M}-${q}`,source:M,title:F.title||"",author:F.author||"",publisher:F.publisher||"",publishedDate:F.publishedDate||"",isbn:F.isbn||"",coverImageUrl:F.coverImageUrl||"",description:F.description||"",confidence:M==="google"?.8:.6})):[],[]),P=N.useCallback(async(L,M)=>{try{let F;try{F=Tj()}catch(G){console.error("Error accessing environment variables:",G),F=void 0}if(console.log("Google Books API Key check:",{hasApiKey:!!F,apiKeyLength:F?F.length:0,isJestEnvironment:typeof jest<"u",environment:typeof jest<"u"?"test":"browser"}),!F)return console.warn("Google Books API key is not configured, skipping Google Books search"),[];let q=L;M==="author"?q=`inauthor:${L}`:M==="publisher"?q=`inpublisher:${L}`:q=`intitle:${L}`;const X=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(q)}&key=${F}&maxResults=10`);if(!X.ok)throw new Error(`Google Books API error: ${X.status}`);const W=await X.json();return W.items?W.items.map(G=>{var ge,xe,be;const Q=G.volumeInfo||{},Z=Q.industryIdentifiers||[],de=((ge=Z.find(ke=>ke.type==="ISBN_13"))==null?void 0:ge.identifier)||((xe=Z.find(ke=>ke.type==="ISBN_10"))==null?void 0:xe.identifier)||"";return{title:Q.title||"",author:Q.authors?Q.authors.join(", "):"",publisher:Q.publisher||"",publishedDate:Q.publishedDate||"",isbn:de,coverImageUrl:((be=Q.imageLinks)==null?void 0:be.thumbnail)||"",description:Q.description||""}}):[]}catch(F){throw console.error("Google Books API error:",F),F}},[]),B=N.useCallback(L=>{const M=L.message||L.toString();return M.includes("API key")||M.includes("API key is not configured")?"":M.includes("network")||M.includes("fetch")?"":M.includes("timeout")?"":M.includes("404")||M.includes("Not Found")?"":M.includes("429")||M.includes("Too Many Requests")?"":M.includes("500")||M.includes("Internal Server Error")?"":""},[]),O=N.useCallback(async(L,M="title")=>{if(!L||L.trim()===""){e([]);return}r(!0),a("..."),o(null),e([]);try{const F=[];let q=!1,X=null;try{a("Google Books..."),console.log("Trying Google Books API for query:",L);const G=await P(L,M);if(console.log("Google Books raw results:",G),G&&G.length>0){const Q=R(G,"google");console.log("Google Books normalized results:",Q),F.push(...Q)}}catch(G){console.warn("Google Books API failed:",G),q=!0,X=G}a("..."),console.log("Search results:",F),console.log("Results length:",F.length);const W=F.sort((G,Q)=>Q.confidence-G.confidence);e(W),F.length>0&&x(L,M),q&&F.length===0?o(B(X)):F.length===0&&o(M==="title"?`

 : `:"")}catch(F){console.error("External book search error:",F),o(B(F))}finally{r(!1),a("")}},[B,x]),C=N.useCallback(()=>{e([]),o(null)},[]),D=N.useCallback(()=>{o(null)},[]),V=S(n);return{searchResults:n,filteredResults:V,loading:t,loadingStep:i,error:s,searchBooks:O,clearSearchResults:C,clearError:D,searchHistory:c,loadSearchHistory:g,addToSearchHistory:x,removeFromSearchHistory:b,clearSearchHistory:A,filters:f,updateFilters:T,clearFilters:I}},Ij=({onBookSelect:n,onCancel:e})=>{const[t,r]=N.useState("title"),[i,a]=N.useState(""),[s,o]=N.useState("relevance"),[c,d]=N.useState(!1),[f,p]=N.useState({}),{searchResults:g,filteredResults:y,loading:x,loadingStep:b,error:A,searchBooks:S,clearSearchResults:T,clearError:I,searchHistory:R,loadSearchHistory:P,removeFromSearchHistory:B,clearSearchHistory:O,filters:C,updateFilters:D,clearFilters:V}=Cj(),{checkDuplicate:L}=RM(),M=N.useCallback((Se,Ae)=>{Ae!==null&&(r(Ae),T())},[T]),F=N.useCallback(Se=>{a(Se.target.value),A&&I()},[A,I]),q=N.useCallback(async()=>{i.trim()&&(p({}),await S(i.trim(),t))},[i,t,S]),X=N.useCallback(async Se=>{if(!Se||Se.length===0)return;const Ae={};for(const Fe of Se)if(Fe.isbn)try{const re=await L(Fe.isbn);re&&(Ae[Fe.id]=re)}catch(re){console.error("Error checking duplicate for book:",Fe.title,re)}p(Ae)},[L]),W=N.useCallback(Se=>{p({}),n(Se)},[n]),G=N.useCallback(()=>{T(),a(""),p({}),e()},[T,e]),Q=N.useCallback((Se,Ae)=>{a(Se),r(Ae),d(!1),p({}),S(Se,Ae)},[S]),Z=N.useCallback(Se=>{B(Se)},[B]),de=N.useCallback(()=>{O()},[O]),ge=N.useCallback(()=>{c||P(),d(!c)},[c,P]),xe=N.useCallback(Se=>{if(!Se||Se.length===0)return Se;const Ae=[...Se];switch(s){case"title":return Ae.sort((Fe,re)=>Fe.title.localeCompare(re.title,"ja"));case"author":return Ae.sort((Fe,re)=>Fe.author.localeCompare(re.author,"ja"));case"date":return Ae.sort((Fe,re)=>{const ye=new Date(Fe.publishedDate||"1900-01-01");return new Date(re.publishedDate||"1900-01-01")-ye});case"relevance":default:return Ae.sort((Fe,re)=>re.confidence-Fe.confidence)}},[s]);Ci.useEffect(()=>{y&&y.length>0&&!x&&X(y)},[y,x]);const be=()=>{if(x)return v.jsxs(ie,{sx:{mt:2},children:[v.jsx(ne,{variant:"subtitle2",sx:{mb:2,color:"primary.main",fontWeight:"bold",fontSize:{xs:"0.9rem",sm:"1rem"}},children:b||"..."}),[...Array(3)].map((Ae,Fe)=>v.jsx(kn,{sx:{mb:2},children:v.jsx(Nn,{children:v.jsxs(ie,{sx:{display:"flex",gap:2},children:[v.jsx(Mh,{variant:"rectangular",width:60,height:80}),v.jsxs(ie,{sx:{flex:1},children:[v.jsx(Mh,{variant:"text",width:"80%",height:24}),v.jsx(Mh,{variant:"text",width:"60%",height:20}),v.jsx(Mh,{variant:"text",width:"40%",height:16})]})]})})},Fe))]});if(A)return v.jsx(za,{severity:"error",sx:{mt:2},action:v.jsx(Ke,{color:"inherit",size:"small",onClick:I,children:""}),children:A});if(g.length===0&&i.trim())return v.jsxs(ie,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsxs(ne,{variant:"body1",color:"text.secondary",children:["",i,""]}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mt:1},children:""})]});if(g.length===0)return v.jsxs(ie,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsx(ne,{variant:"body1",color:"text.secondary",children:""}),R&&R.length>0&&v.jsx(ie,{sx:{mt:2},children:v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(dN,{}),onClick:ge,size:"small",children:""})})]});const Se=xe(y||[]);return v.jsxs(ie,{sx:{mt:2},children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[v.jsxs(ne,{variant:"subtitle2",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:[" (",g.length,")"]}),v.jsxs(Si,{size:"small",sx:{minWidth:120},children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:s,onChange:Ae=>o(Ae.target.value),label:"",children:[v.jsx(pn,{value:"relevance",children:""}),v.jsx(pn,{value:"title",children:""}),v.jsx(pn,{value:"author",children:""}),v.jsx(pn,{value:"date",children:""})]})]})]}),Se.map(Ae=>v.jsx(kn,{sx:{mb:2,cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>W(Ae),"data-testid":`search-result-${Ae.id}`,children:v.jsx(Nn,{children:v.jsxs(ie,{sx:{display:"flex",gap:2},children:[v.jsx(ie,{sx:{flexShrink:0},children:Ae.coverImageUrl?v.jsx($3,{component:"img",image:Ae.coverImageUrl,alt:Ae.title,sx:{width:60,height:80,objectFit:"cover",borderRadius:1}}):v.jsx(ie,{sx:{width:60,height:80,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1},children:v.jsx(ne,{variant:"caption",color:"text.secondary",children:""})})}),v.jsxs(ie,{sx:{flex:1,minWidth:0},children:[v.jsx(ne,{variant:"subtitle1",sx:{fontWeight:"bold",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"0.9rem",sm:"1rem"}},children:Ae.title}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:Ae.author}),v.jsxs(ne,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:[Ae.publisher,Ae.publishedDate&&` - ${Ae.publishedDate}`]}),v.jsxs(ie,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:{xs:1,sm:1.5}},children:[v.jsx(mn,{label:Ae.source==="google"?"Google Books":"OpenBD",size:"small",color:Ae.source==="google"?"primary":"secondary",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}}),Ae.isbn&&v.jsx(mn,{label:`ISBN: ${Ae.isbn}`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}})]})]}),v.jsx(ie,{sx:{flexShrink:0,alignSelf:"center",mt:{xs:1,sm:0}},children:f[Ae.id]?v.jsx(Ke,{variant:"outlined",size:"small",disabled:!0,"data-testid":`duplicate-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"},color:"text.secondary",borderColor:"text.secondary"},children:""}):v.jsx(Ke,{variant:"contained",size:"small",onClick:Fe=>{Fe.stopPropagation(),W(Ae)},"data-testid":`select-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"}},children:""})})]})})},Ae.id))]})},ke=()=>g.length===0?null:v.jsxs(ie,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(ne,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsx(Ke,{size:"small",onClick:V,disabled:!(C!=null&&C.author)&&!(C!=null&&C.publisher)&&!(C!=null&&C.yearFrom)&&!(C!=null&&C.yearTo),children:""})]}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(wt,{label:"",value:(C==null?void 0:C.author)||"",onChange:Se=>D({author:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(wt,{label:"",value:(C==null?void 0:C.publisher)||"",onChange:Se=>D({publisher:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(wt,{label:"",type:"number",value:(C==null?void 0:C.yearFrom)||"",onChange:Se=>D({yearFrom:Se.target.value}),size:"small",placeholder:": 2020",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(wt,{label:"",type:"number",value:(C==null?void 0:C.yearTo)||"",onChange:Se=>D({yearTo:Se.target.value}),size:"small",placeholder:": 2024",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}})]}),v.jsxs(ne,{variant:"caption",color:"text.secondary",children:[(y==null?void 0:y.length)||0,"",(g==null?void 0:g.length)||0,""]})]}),he=()=>!c||!R||R.length===0?null:v.jsxs(ie,{sx:{mt:2},children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[v.jsx(ne,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsxs(ie,{children:[v.jsx(Ke,{size:"small",onClick:de,startIcon:v.jsx(lN,{}),sx:{mr:1},children:""}),v.jsx(Ke,{size:"small",onClick:()=>d(!1),children:""})]})]}),v.jsx(Vw,{sx:{bgcolor:"background.paper",borderRadius:1},children:R.map((Se,Ae)=>v.jsx(jw,{sx:{px:1},secondaryAction:v.jsx(di,{edge:"end",onClick:()=>Z(Ae),size:"small",children:v.jsx(b2,{fontSize:"small"})}),children:v.jsx(cN,{onClick:()=>Q(Se.query,Se.searchType),sx:{borderRadius:1},children:v.jsx(uN,{primary:Se.query,secondary:`${Se.searchType==="title"?"":Se.searchType==="author"?"":""}`})})},`${Se.query}-${Se.timestamp}`))})]});return v.jsxs(ie,{sx:{p:{xs:1.5,sm:2},border:1,borderColor:"primary.main",borderRadius:1,bgcolor:"primary.50",mt:{xs:1.5,sm:2},maxWidth:"100%",overflow:"hidden"},"data-testid":"external-book-search",children:[v.jsx(ne,{variant:"h6",sx:{mb:{xs:1.5,sm:2},fontSize:{xs:"1rem",sm:"1.25rem"}},children:" "}),v.jsx(ie,{sx:{mb:{xs:1.5,sm:2},display:"flex",justifyContent:"center"},children:v.jsxs(oN,{value:t,exclusive:!0,onChange:M,"aria-label":"search type",size:"small",children:[v.jsx(wx,{value:"title","aria-label":"title","data-testid":"search-type-title",children:""}),v.jsx(wx,{value:"author","aria-label":"author","data-testid":"search-type-author",children:""}),v.jsx(wx,{value:"publisher","aria-label":"publisher","data-testid":"search-type-publisher",children:""})]})}),v.jsxs(ie,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[v.jsx(wt,{fullWidth:!0,placeholder:`${t==="title"?"":t==="author"?"":""}`,value:i,onChange:F,onKeyPress:Se=>{Se.key==="Enter"&&q()},"data-testid":"search-query-input",size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(Ke,{variant:"contained",onClick:q,disabled:!i.trim()||x,startIcon:x?v.jsx(y1,{size:16}):v.jsx(G3,{}),"data-testid":"search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},minWidth:{xs:"100%",sm:"auto"}},children:x?"...":""})]}),he(),ke(),be(),v.jsx(ie,{sx:{mt:{xs:2,sm:3},textAlign:"right"},children:v.jsx(Ke,{onClick:G,"data-testid":"cancel-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:" ISBN"})})]})};function Dj({isbn:n="",onBookAdded:e}){const[t,r]=N.useState(n),[i,a]=N.useState(""),[s,o]=N.useState(""),[c,d]=N.useState(""),[f,p]=N.useState(""),[g,y]=N.useState(""),[x,b]=N.useState([]),[A,S]=N.useState(""),[T,I]=N.useState(ut.TSUNDOKU),[R,P]=N.useState(Ha.UNKNOWN),[B,O]=N.useState(!1),{user:C}=rr(),{tagOptions:D,fetchTagHistory:V}=Ao("book",C),{addBook:L,loading:M,error:F}=Aj(),{searchBookByIsbn:q,loading:X,error:W}=Ej(),{duplicateBook:G,checkDuplicate:Q,resetDuplicateCheck:Z}=RM();N.useEffect(()=>{V()},[V]),N.useEffect(()=>{n&&n!==t&&(console.log("[BookForm] useEffect: propsisbn:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: ",n),de(n)))},[n,t]);const de=async he=>{const Se=he!==void 0?he:t;if(!Se||!Se.trim())return;Z();const Ae=await q(Se);Ae&&(a(Ae.title),o(Ae.author),d(Ae.publisher),p(Ae.publishedDate),y(Ae.coverImageUrl),b(Ae.tags),await Q(Se))},ge=async he=>{if(he.preventDefault(),!i)return;const Ae=await L({isbn:t,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:x,inputTagValue:A,status:T,acquisitionType:R});Ae&&e(Ae)},xe=()=>{O(!B)},be=async he=>{a(he.title),o(he.author),d(he.publisher),p(he.publishedDate),y(he.coverImageUrl),r(he.isbn),O(!1),he.isbn&&await Q(he.isbn)},ke=()=>{O(!1)};return v.jsxs(ie,{component:"form",onSubmit:ge,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[v.jsx(ie,{children:v.jsx(wt,{label:"ISBN",value:t,onChange:he=>r(he.target.value),fullWidth:!0,size:"small",placeholder:": 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(ie,{children:v.jsx(Ke,{onClick:()=>de(),variant:"outlined",disabled:X,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:X?"...":"ISBN"})})]}),v.jsxs(ie,{sx:{mt:1.5,textAlign:"center"},children:[v.jsx(Ke,{variant:"outlined",onClick:xe,startIcon:v.jsx("span",{children:""}),"data-testid":"external-search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},px:3,py:1},children:""}),v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"ISBN"})]}),B&&v.jsx(Ij,{onBookSelect:be,onCancel:ke}),g&&v.jsx(ie,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:v.jsx("img",{src:g,alt:"",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[v.jsx(ie,{children:v.jsx(wt,{label:"",value:i,onChange:he=>a(he.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(ie,{children:v.jsx(wt,{label:"",value:s,onChange:he=>o(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(ie,{children:v.jsx(wt,{label:"",value:c,onChange:he=>d(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(ie,{children:v.jsx(wt,{label:"",value:f,onChange:he=>p(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),v.jsx(ie,{sx:{mt:{xs:1.5,sm:2}},children:v.jsx(yo,{multiple:!0,freeSolo:!0,options:D,value:x,getOptionLabel:he=>typeof he=="string"?he:he.inputValue||he.tag||"",onChange:(he,Se)=>{const Ae=(Se||[]).map(Fe=>{if(typeof Fe=="string")return Fe;if(Fe&&typeof Fe=="object"){if("inputValue"in Fe&&Fe.inputValue)return Fe.inputValue;if("tag"in Fe&&Fe.tag)return Fe.tag}return""}).filter(Boolean);b(Ae)},inputValue:A,onInputChange:(he,Se)=>S(Se),renderInput:he=>v.jsx(wt,{...he,label:"",fullWidth:!0,size:"small",placeholder:": ,,",inputProps:{...he.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),v.jsx(ie,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Si,{fullWidth:!0,size:"small",children:[v.jsx(ma,{id:"book-status-label",children:""}),v.jsx(ja,{labelId:"book-status-label",value:T,label:"",onChange:he=>I(he.target.value),"data-testid":"book-status-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:H_.map(he=>v.jsx(pn,{value:he,children:Ps(he)},he))})]})}),v.jsx(ie,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Si,{fullWidth:!0,size:"small",children:[v.jsx(ma,{id:"book-acquisition-type-label",children:""}),v.jsx(ja,{labelId:"book-acquisition-type-label",value:R,label:"",onChange:he=>P(he.target.value),"data-testid":"book-acquisition-type-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:gj.map(he=>v.jsx(pn,{value:he,children:DM(he)},he))})]})}),G&&v.jsxs(za,{severity:"info",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"duplicate-book-alert",children:[": ",G.title]}),(W||F)&&v.jsx(ne,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:W||F}),v.jsx(Ke,{type:"submit",variant:"contained",disabled:M||G,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:M?"...":G?"":""})]})}function Rj(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Oj(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Mj=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pj=function(n){Mj(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Rj(a,i.prototype),Oj(a),a}return e}(Error),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vi=function(n){kj(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Pj),Nj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ma=function(n){Nj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Vi),Lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rt=function(n){Lj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Vi),Bj=function(){function n(e){if(this.binarizer=e,e===null)throw new rt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vr=function(n){Fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Vi),Vj=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Sn=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z_=function(n){jj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Vi),Uj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oI=function(n){Uj(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(z_),Hj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cr=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new rt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new oI(t);if(r>e)throw new oI(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=Hj(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Sn.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Ct=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),jr=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Sn.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var o=i*32+Ct.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var o=i*32+Ct.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new rt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:t&31,d=(2<<c)-(1<<o);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new rt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:t&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new rt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new rt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Cr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Cr.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Q2;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Q2||(Q2={}));const Ln=Q2;var zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),je=function(n){zj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Vi),$j=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sn;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(sn||(sn={}));var Tr=function(){function n(e,t,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];n.VALUES_TO_ECI.set(p,this)}try{for(var g=$j(s),y=g.next();!y.done;y=g.next()){var x=y.value;n.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new je("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new je("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new je("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(sn.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(sn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(sn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(sn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(sn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(sn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(sn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(sn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(sn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(sn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(sn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(sn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(sn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(sn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(sn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(sn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(sn.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(sn.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(sn.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(sn.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(sn.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(sn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(sn.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(sn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(sn.Big5,28,"Big5"),n.GB18030=new n(sn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(sn.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cm=function(n){Gj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Vi),wa=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Tr?e:Tr.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Tr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new cm("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Tr.UTF8)||e.equals(Tr.ISO8859_1)||e.equals(Tr.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),Vt=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return wa.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Ln.CHARACTER_SET)!==void 0)return t.get(Ln.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,y=0,x=0,b=0,A=0,S=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,I=0;I<r&&(i||a||s);I++){var R=e[I]&255;s&&(o>0?(R&128)===0?s=!1:o--:(R&128)!==0&&((R&64)===0?s=!1:(o++,(R&32)===0?c++:(o++,(R&16)===0?d++:(o++,(R&8)===0?f++:s=!1))))),i&&(R>127&&R<160?i=!1:R>159&&(R<192||R===215||R===247)&&S++),a&&(p>0?R<64||R===127||R>252?a=!1:p--:R===128||R===160||R>239?a=!1:R>160&&R<224?(g++,x=0,y++,y>b&&(b=y)):R>127?(p++,y=0,x++,x>A&&(A=x)):(y=0,x=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(T||c+d+f>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||A>=3)?n.SHIFT_JIS:i&&a?b===2&&g===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(t[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(o);break;case"p":x=parseFloat(t[i]).toPrecision(o);break;case"e":x=parseFloat(t[i]).toExponential(o);break;case"x":x=parseInt(t[i]).toString(y||16);break;case"d":x=parseFloat(parseInt(t[i],y||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var b=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";x.length<b;)x=c!==void 0?x+A:A+x;return x}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return wa.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Tr.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Tr.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Tr.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),At=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Vt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),ks=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new rt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new rt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rt("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new rt("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rt("row lengths do not match");c++}for(var f=new n(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new rt("input matrix dimensions do not match");for(var t=new jr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new rt("Left and top must be nonnegative");if(i<1||r<1)throw new rt("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new rt("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=t;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new jr(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){Sn.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new jr(e),i=new jr(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,o=-1,c=-1,d=0;d<t;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Cr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Cr.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new At,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_e=function(n){Wj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Vi),Yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qj=function(n){Yj(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new jr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new ks(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=t.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),x=t.getMatrix(),o=0;o<i;o++)for(var b=o*r,p=0;p<r;p++){var g=x[b+p]&255;g<y&&a.set(p,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,o=0;o<r;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=t[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new _e;for(var y=c-1,x=-1,o=c-1;o>a;o--){var b=o-a,p=b*b*(c-o)*(i-t[o]);p>x&&(y=o,x=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Vj),Xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kj=function(n){Xj(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new ks(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var y=e.cap(p,2,i-3),x=0;x<r;x++){var b=x<<e.BLOCK_SIZE_POWER;b>f&&(b=f);for(var A=e.cap(x,2,r-3),S=0,T=-2;T<=2;T++){var I=o[y+T];S+=I[A-2]+I[A-1]+I[A]+I[A+1]+I[A+2]}var R=S/25;e.thresholdBlock(t,b,g,R,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(t[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(t,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var x=0,b=255,A=0,S=0,T=p*a+y;S<e.BLOCK_SIZE;S++,T+=a){for(var I=0;I<e.BLOCK_SIZE;I++){var R=t[T+I]&255;x+=R,R<b&&(b=R),R>A&&(A=R)}if(A-b>e.MIN_DYNAMIC_RANGE)for(S++,T+=a;S<e.BLOCK_SIZE;S++,T+=a)for(var I=0;I<e.BLOCK_SIZE;I++)x+=t[T+I]&255}var P=x>>e.BLOCK_SIZE_POWER*2;if(A-b<=e.MIN_DYNAMIC_RANGE&&(P=b/2,f>0&&g>0)){var B=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;b<B&&(P=B)}d[f][g]=P}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(qj),W1=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new cm("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new cm("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new cm("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new At,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},n}(),Qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$_=function(n){Qj(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(W1),Zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jj=function(n){Zj(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=t.length;o<d;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],x=t[o+2];f=306*g+601*y+117*x+512>>10}s[c]=f}else for(var o=0,c=0,b=t.length;o<b;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],x=t[o+2];f=306*g+601*y+117*x+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new $_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(W1),eU=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),_i=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(n,e||[])).next())})},bi=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},tU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uf=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e,t,r,i,a,s,o,c,d,f,p,g;return bi(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=tU(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},t.push(f))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e;return bi(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new eU(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return _i(this,void 0,void 0,function(){var t;return bi(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return _i(this,void 0,void 0,function(){return bi(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return _i(this,void 0,void 0,function(){var i,a;return bi(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Ma("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Ma("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ma("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ma("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Ma("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Ma("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ma("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new _e("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=t&&g instanceof _e,f=g instanceof Vr||g instanceof je,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof Vr||c instanceof je,o=c instanceof _e;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Jj(r,t),a=new Kj(i);return new Bj(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),gi=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Sn.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Sn.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Sn.arraycopy(t,0,r,0,t.length),Sn.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Z2;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Z2||(Z2={}));const et=Z2;var J2;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(J2||(J2={}));const Jr=J2;var Y1=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),jh=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Tl=function(){function n(e,t){if(t.length===0)throw new rt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=jh.addOrSubtract(r,s)}return r}r=t[0];for(var o=t.length,c=this.field,i=1;i<o;i++)r=jh.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=jh.addOrSubtract(t[o-s],r[o]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)s[c+f]=jh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new n(o,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new rt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=t.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),nU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OM=function(n){nU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Vi),rU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bi=function(n){rU(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=t,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new Tl(a,Int32Array.from([0])),a.one=new Tl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Tl(this,i)},e.prototype.inverse=function(t){if(t===0)throw new OM;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ct.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(jh),iU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mg=function(n){iU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Vi),aU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G0=function(n){aU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Vi),q1=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Tl(r,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new Tl(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),p=f[0],g=f[1],y=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,y),o=0;o<y.length;o++){var b=e.length-1-r.log(y[o]);if(b<0)throw new Mg("Bad error location");e[b]=Bi.addOrSubtract(e[b],x[o])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new Mg("r_{i-1} was zero");o=f;for(var g=a.getZero(),y=s.getCoefficient(s.getDegree()),x=a.inverse(y);o.getDegree()>=s.getDegree()&&!o.isZero();){var b=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(b,A)),o=o.addOrSubtract(s.multiplyByMonomial(b,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new G0("Division algorithm failed to reduce polynomial?")}var S=d.getCoefficient(0);if(S===0)throw new Mg("sigmaTilde(0) was zero");var T=a.inverse(S),I=d.multiplyScalar(T),R=o.multiplyScalar(T);return[I,R]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new Mg("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(t[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(t[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},n}(),Xr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Xr||(Xr={}));var lI=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),o=new Y1(a,s,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Xr.UPPER,i=Xr.UPPER,a="",s=0;s<t;)if(i===Xr.BINARY){if(t-s<5)break;var o=n.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=Vt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===Xr.DIGIT?4:5;if(t-s<f)break;var d=n.readCode(e,s,f);s+=f;var p=n.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Xr.LOWER;case"P":return Xr.PUNCT;case"M":return Xr.MIXED;case"D":return Xr.DIGIT;case"B":return Xr.BINARY;case"U":default:return Xr.UPPER}},n.getCharacter=function(e,t){switch(e){case Xr.UPPER:return n.UPPER_TABLE[t];case Xr.LOWER:return n.LOWER_TABLE[t];case Xr.MIXED:return n.MIXED_TABLE[t];case Xr.PUNCT:return n.PUNCT_TABLE[t];case Xr.DIGIT:return n.DIGIT_TABLE[t];default:throw new G0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Bi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Bi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Bi.AZTEC_DATA_10):(r=12,t=Bi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new je;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=n.readCode(e,s,r);try{var d=new q1(t);d.decode(o,a-i)}catch(A){throw new je(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new je;(g===1||g===f-1)&&p++}for(var y=new Array(i*r-p),x=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)y.fill(g>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)y[x++]=(g&1<<b)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*Ct.truncDivision(Ct.truncDivision(i,2)-1,15),d=i/2,f=Ct.truncDivision(c,2),o=0;o<d;o++){var p=o+Ct.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var y=(r-o)*4+(t?9:12),x=o*2,b=i-1-x,A=0;A<y;A++)for(var S=A*2,T=0;T<2;T++)s[g+S+T]=e.get(a[x+T],a[x+A]),s[g+2*y+S+T]=e.get(a[x+A],a[b-T]),s[g+4*y+S+T]=e.get(a[b-T],a[b-A]),s[g+6*y+S+T]=e.get(a[b-A],a[x+T]);g+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),$t=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),ew=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Xe=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ew.floatToIntBits(this.x)+ew.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=t&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},n.distance=function(e,t){return $t.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),G_=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),sU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oU=function(n){sU(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(G_),tw=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new _e}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,y=this.height;s;){s=!1;for(var x=!0;(x||!c)&&t<g;)x=this.containsBlackPoint(r,i,t,!1),x?(t++,s=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var b=!0;(b||!d)&&i<y;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,s=!0,d=!0):d||i++;if(i>=y){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&r>=0;)S=this.containsBlackPoint(e,t,r,!0),S?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var T=t-e,I=null,R=1;I===null&&R<T;R++)I=this.getBlackPointOnSegment(e,i-R,e+R,i);if(I==null)throw new _e;for(var P=null,R=1;P===null&&R<T;R++)P=this.getBlackPointOnSegment(e,r+R,e+R,r);if(P==null)throw new _e;for(var B=null,R=1;B===null&&R<T;R++)B=this.getBlackPointOnSegment(t,r+R,t-R,r);if(B==null)throw new _e;for(var O=null,R=1;O===null&&R<T;R++)O=this.getBlackPointOnSegment(t,i-R,t-R,i);if(O==null)throw new _e;return this.centerEdges(O,I,B,P)}else throw new _e},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=$t.round($t.distance(e,t,r,i)),s=(r-e)/a,o=(i-t)/a,c=this.image,d=0;d<a;d++){var f=$t.round(e+d*s),p=$t.round(t+d*o);if(c.get(f,p))return new Xe(f,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),o=t.getX(),c=t.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),y=n.CORR;return a<this.width/2?[new Xe(p-y,g+y),new Xe(o+y,c+y),new Xe(d-y,f-y),new Xe(a+y,s-y)]:[new Xe(p+y,g+y),new Xe(o+y,c-y),new Xe(d-y,f+y),new Xe(a-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var o=e;o<=t;o++)if(a.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),cI=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}},n}(),MM=function(){function n(e,t,r,i,a,s,o,c,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,o,c,d,f,p,g,y,x,b,A){var S=n.quadrilateralToSquare(e,t,r,i,a,s,o,c),T=n.squareToQuadrilateral(d,f,p,g,y,x,b,A);return T.times(S)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<t;g+=2){var y=e[g],x=e[g+1],b=a*y+c*x+p;e[g]=(r*y+s*x+d)/b,e[g+1]=(i*y+o*x+f)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var x=e[y],b=t[y],A=a*x+c*b+p;e[y]=(r*x+s*b+d)/A,t[y]=(i*x+o*b+f)/A}},n.squareToQuadrilateral=function(e,t,r,i,a,s,o,c){var d=e-r+a-o,f=t-i+s-c;if(d===0&&f===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var p=r-a,g=o-a,y=i-s,x=c-s,b=p*x-g*y,A=(d*x-g*f)/b,S=(p*f-d*y)/b;return new n(r-e+A*r,o-e+S*o,e,i-t+A*i,c-t+S*c,t,A,S,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,o,c){return n.squareToQuadrilateral(e,t,r,i,a,s,o,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),lU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cU=function(n){lU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,o,c,d,f,p,g,y,x,b,A,S,T,I,R){var P=MM.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,y,x,b,A,S,T,I,R);return this.sampleGridWithTransform(t,r,i,P)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new _e;for(var s=new ks(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),cI.checkAndNudgePoints(t,o);try{for(var p=0;p<d;p+=2)t.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new _e}}return s},e}(cI),W_=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new cU,n}(),Pi=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Xe(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),uU=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new oU(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new _e;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,o){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ct.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new _e},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new q1(Bi.AZTEC_PARAM);c.decode(s,a)}catch{throw new _e}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}t=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new _e;this.compact=this.nbCenterLayers===5;var g=new Xe(t.getX()+.5,t.getY()-.5),y=new Xe(r.getX()+.5,r.getY()+.5),x=new Xe(i.getX()-.5,i.getY()+.5),b=new Xe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new tw(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Pi(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Pi(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Pi(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Pi(s-7,o-7),!1,-1,-1).toResultPoint()}var c=$t.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new tw(this.image,15,c,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Pi(c+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Pi(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Pi(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Pi(c-7,d-7),!1,-1,-1).toResultPoint()}return c=$t.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Pi(c,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=W_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,o=e.getX(),c=e.getY(),d=s*(t.getX()-e.getX())/a,f=s*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get($t.round(o+p*d),$t.round(c+p*f))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Pi(e.getX()-a,e.getY()+a),t=new Pi(t.getX()-a,t.getY()-a),r=new Pi(r.getX()+a,r.getY()-a),i=new Pi(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get($t.round(o),$t.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Pi(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Xe(o+i*a,c+i*s),f=new Xe(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Xe(o+i*a,c+i*s),g=new Xe(o-i*a,c-i*s),y=[d,p,f,g];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=$t.round(e.getX()),r=$t.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return $t.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return $t.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ct.truncDivision(this.nbLayers-4,8)+1)+15},n}(),nw=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new uU(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new lI().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new lI().decode(o)}catch(p){throw r??p}var c=new gi(s.getText(),s.getRawBytes(),s.getNumBits(),a,et.AZTEC,Sn.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(Jr.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(Jr.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Ln.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),dU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){dU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new nw,t)||this}return e})(uf);var Ir=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Ln.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(Jr.ORIENTATION)===!0&&(o=o+s.get(Jr.ORIENTATION)%360),a.putMetadata(Jr.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new Xe(d-c[f].getY()-1,c[f].getX());return a}else throw new _e}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new jr(r),s=t&&t.get(Ln.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,y=d+o*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var x=function(T){if(T===1&&(a.reverse(),t&&t.get(Ln.NEED_RESULT_POINT_CALLBACK)===!0)){var I=new Map;t.forEach(function(B,O){return I.set(O,B)}),I.delete(Ln.NEED_RESULT_POINT_CALLBACK),t=I}try{var R=b.decodeRow(y,a,t);if(T===1){R.putMetadata(Jr.ORIENTATION,180);var P=R.getResultPoints();P!==null&&(P[0]=new Xe(r-P[0].getX()-1,P[0].getY()),P[1]=new Xe(r-P[1].getX()-1,P[1].getY()))}return{value:R}}catch{}},b=this,A=0;A<2;A++){var S=x(A);if(typeof S=="object")return S.value}}throw new _e},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new _e;for(var o=!e.get(t),c=0,d=t;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new _e},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new _e;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return Number.POSITIVE_INFINITY;d+=y}return d/a},n}(),fU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uI=function(n){fU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(t.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var x=Ir.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=y)}if(g>=0&&t.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new _e},e.decodeCode=function(t,r,i){Ir.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new _e},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Ln.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new je}for(var p=!1,g=!1,y="",x=s[0],b=s[1],A=Int32Array.from([0,0,0,0,0,0]),S=0,T=0,I=o,R=0,P=!0,B=!1,O=!1;!p;){var C=g;switch(g=!1,S=T,T=e.decodeCode(r,A,b),d[c++]=T,T!==e.CODE_STOP&&(P=!0),T!==e.CODE_STOP&&(R++,I+=R*T),x=b,b+=A.reduce(function(G,Q){return G+Q},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new je}switch(f){case e.CODE_CODE_A:if(T<64)O===B?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else if(T<96)O===B?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),O=!1;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(T<96)O===B?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}C&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new _e;if(I-=R*S,I%103!==S)throw new Vr;var V=y.length;if(V===0)throw new _e;V>0&&P&&(f===e.CODE_CODE_C?y=y.substring(0,V-2):y=y.substring(0,V-1));for(var L=(s[1]+s[0])/2,M=x+D/2,F=d.length,q=new Uint8Array(F),X=0;X<F;X++)q[X]=d[X];var W=[new Xe(L,t),new Xe(M,t)];return new gi(y,q,0,W,et.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Ir),hU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dI=function(n){hU(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),y,x;do{e.recordPattern(r,p,d);var b=e.toNarrowWidePattern(d);if(b<0)throw new _e;y=e.patternToChar(b),this.decodeRowResult+=y,x=p;try{for(var A=(a=void 0,Lx(d)),S=A.next();!S.done;S=A.next()){var T=S.value;p+=T}}catch(F){a={error:F}}finally{try{S&&!S.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var R=Lx(d),P=R.next();!P.done;P=R.next()){var T=P.value;I+=T}}catch(F){o={error:F}}finally{try{P&&!P.done&&(c=R.return)&&c.call(R)}finally{if(o)throw o.error}}var B=p-x-I;if(p!==g&&B*2<I)throw new _e;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,C=0,D=0;D<O;D++)C+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(C%43))throw new Vr;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new _e;var V;this.extendedMode?V=e.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;var L=(f[1]+f[0])/2,M=x+I/2;return new gi(V,null,0,[new Xe(L,t),new Xe(M,t)],et.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(t.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new _e},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,Lx(t)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(b){r={error:b}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,y=0,x=0;x<a;x++){var p=t[x];p>s&&(y|=1<<a-1-x,o++,g+=p)}if(o===3){for(var x=0;x<a&&o>0;x++){var p=t[x];if(p>s&&(o--,p*2>=g))return-1}return y}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new _e},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new je;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Ir),pU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fI=function(n){pU(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,x;do{e.recordPattern(r,f,g);var b=this.toPattern(g);if(b<0)throw new _e;y=this.patternToChar(b),this.decodeRowResult+=y,x=f;try{for(var A=(a=void 0,Bx(g)),S=A.next();!S.done;S=A.next()){var T=S.value;f+=T}}catch(D){a={error:D}}finally{try{S&&!S.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var R=Bx(g),P=R.next();!P.done;P=R.next()){var T=P.value;I+=T}}catch(D){o={error:D}}finally{try{P&&!P.done&&(c=R.return)&&c.call(R)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new _e;if(this.decodeRowResult.length<2)throw new _e;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),O=(d[1]+d[0])/2,C=x+I/2;return new gi(B,null,0,[new Xe(O,t),new Xe(C,t)],et.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(t.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new _e},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Bx(t),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=t.length,p=0;p<f;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new _e},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new je;var o=t.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new je;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Vr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Ir),gU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hI=function(n){gU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new At;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(Ln.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,y=!1,x=0;try{for(var b=mU(p),A=b.next();!A.done;A=b.next()){var S=A.value;if(g===S){y=!0;break}S>x&&(x=S)}}catch(R){a={error:R}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!y&&g>x&&(y=!0),!y)throw new je;var T=[new Xe(o[1],t),new Xe(c[0],t)],I=new gi(f,null,0,T,et.ITF,new Date().getTime());return I},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Ir.recordPattern(t,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new _e},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new _e;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof _e&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(t.get(p)!==c)s[d]++;else{if(d===a-1){if(Ir.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],Sn.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new _e},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Ir.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new _e},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Ir),yU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zd=function(n){yU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=t.isRange(c,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var o=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(t.get(g)!==p)s[c]++;else{if(c===f-1){if(Ir.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var y=s.slice(2,s.length),x=0;x<c-1;x++)s[x]=y[x];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new _e},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Ir.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new _e},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Ir),vU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xU=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new Xe((r[0]+r[1])/2,e),new Xe(a,e)],d=new gi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<5&&c<o;f++){var p=zd.decodeDigit(e,s,c,zd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,vU(s)),y=g.next();!y.done;y=g.next()){var x=y.value;c+=x}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new _e;var b=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==b)throw new _e;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new _e},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Jr.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),wU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_U=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new Xe((r[0]+r[1])/2,e),new Xe(a,e)],d=new gi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<2&&c<o;f++){var p=zd.decodeDigit(e,s,c,zd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,wU(s)),y=g.next();!y.done;y=g.next()){var x=y.value;c+=x}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new _e;if(parseInt(r.toString())%4!==d)throw new _e;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Jr.ISSUE_NUMBER,parseInt(e)]])},n}(),bU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=zd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new xU;return a.decodeRow(e,t,i)}catch{var s=new _U;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),AU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Er=function(n){AU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Ln.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Xe((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new Xe(d,t);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var y=new Xe((g[0]+g[1])/2,t);s.foundPossibleResultPoint(y)}var x=g[1],b=x+(x-g[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new _e;var A=f.toString();if(A.length<8)throw new je;if(!e.checkChecksum(A))throw new Vr;var S=(a[1]+a[0])/2,T=(g[1]+g[0])/2,I=this.getBarcodeFormat(),R=[new Xe(S,t),new Xe(T,t)],P=new gi(A,null,0,R,I,new Date().getTime()),B=0;try{var O=bU.decodeRow(t,r,g[1]);P.putMetadata(Jr.UPC_EAN_EXTENSION,O.getText()),P.putAllMetadata(O.getResultMetadata()),P.addResultPoints(O.getResultPoints()),B=O.getText().length}catch{}var C=i==null?null:i.get(Ln.ALLOWED_EAN_EXTENSIONS);if(C!=null){var D=!1;for(var V in C)if(B.toString()===V){D=!0;break}if(!D)throw new _e}return I===et.EAN_13||et.UPC_A,P},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(zd),EU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rw=function(n){EU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0,y=0;y<6&&p<f;y++){var x=Er.decodeDigit(t,d,p,Er.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(a=void 0,pI(d)),A=b.next();!A.done;A=b.next()){var S=A.value;p+=S}}catch(P){a={error:P}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var T=Er.findGuardPattern(t,p,!0,Er.MIDDLE_PATTERN,new Int32Array(Er.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var y=0;y<6&&p<f;y++){var x=Er.decodeDigit(t,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var I=(o=void 0,pI(d)),R=I.next();!R.done;R=I.next()){var S=R.value;p+=S}}catch(O){o={error:O}}finally{try{R&&!R.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new _e},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Er),SU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mI=function(n){SU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0;g<4&&p<f;g++){var y=Er.decodeDigit(t,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var x=(a=void 0,gI(d)),b=x.next();!b.done;b=x.next()){var A=b.value;p+=A}}catch(R){a={error:R}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}}var S=Er.findGuardPattern(t,p,!0,Er.MIDDLE_PATTERN,new Int32Array(Er.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<f;g++){var y=Er.decodeDigit(t,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(o=void 0,gI(d)),I=T.next();!I.done;I=T.next()){var A=I.value;p+=A}}catch(B){o={error:B}}finally{try{I&&!I.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_8},e}(Er),TU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yI=function(n){TU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new rw,t}return e.prototype.getBarcodeFormat=function(){return et.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new gi(r.substring(1),null,null,t.getResultPoints(),et.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new _e},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Er),CU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vI=function(n){CU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=t.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(t,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,IU(o)),x=y.next();!x.done;x=y.next()){var b=x.value;d+=b}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new At(i),f),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Er.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw _e.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return et.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new At;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Er),DU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fx=function(n){DU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Ln.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(et.EAN_13)>-1&&a.push(new rw),i.indexOf(et.UPC_A)>-1&&a.push(new yI),i.indexOf(et.EAN_8)>-1&&a.push(new mI),i.indexOf(et.UPC_E)>-1&&a.push(new vI)),a.length===0&&(a.push(new rw),a.push(new yI),a.push(new mI),a.push(new vI)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var o=xI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(t,r,i),p=f.getBarcodeFormat()===et.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(Ln.POSSIBLE_FORMATS),y=g==null||g.includes(et.UPC_A);if(p&&y){var x=f.getRawBytes(),b=new gi(f.getText().substring(1),x,x?x.length:null,f.getResultPoints(),et.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new _e},e.prototype.reset=function(){var t,r;try{for(var i=xI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Ir),RU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OU=function(n){RU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new _e;var s=this.codaBarDecodeRow(a.row);if(!s)throw new _e;return new gi(s,null,0,[new Xe(a.left,t),new Xe(a.right,t)],et.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,d){return(c+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Ir),MU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tc=function(n){MU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Ir.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new _e},e.count=function(t){return $t.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=PU(t),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Ir),Bm=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),PM=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Xe(r,a)),this.resultPoints.push(new Xe(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),kU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},md=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var o=kU(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(T){i={error:T}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,y=0;y<g-1;y++){var x=void 0;for(x=1,p|=1<<y;x<e[y];x++,p&=~(1<<y)){var b=n.combins(s-x-1,g-y-2);if(r&&p===0&&s-x-(g-y-1)>=g-y-1&&(b-=n.combins(s-x-(g-y),g-y-2)),g-y-1>1){for(var A=0,S=s-x-(g-y-2);S>t;S--)A+=n.combins(s-x-S-1,g-y-3);b-=A*(g-1-y)}else s-x>t&&b--;f+=b}s-=x}return f},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),NU=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new jr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),wc=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),Y_=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),LU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Da=function(n){LU(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Y_),BU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_c=function(n){BU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Y_),FU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zu=function(n){FU(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new je;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Y_),Pg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new _e;var f=e.substring(0,2);try{for(var p=Pg(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===f)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch(B){t={error:B}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new _e;var x=e.substring(0,3);try{for(var b=Pg(n.THREE_DIGIT_DATA_LENGTH),A=b.next();!A.done;A=b.next()){var y=A.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch(B){i={error:B}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var S=Pg(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=S.next();!T.done;T=S.next()){var y=T.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(B){s={error:B}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}if(e.length<4)throw new _e;var I=e.substring(0,4);try{for(var R=Pg(n.FOUR_DIGIT_DATA_LENGTH),P=R.next();!P.done;P=R.next()){var y=P.value;if(y[0]===I)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(B){c={error:B}}finally{try{P&&!P.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}throw new _e},n.processFixedAI=function(e,t,r){if(r.length<e)throw new _e;var i=r.substring(0,e);if(r.length<e+t)throw new _e;var a=r.substring(e,e+t),s=r.substring(e+t),o="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),um=function(){function n(e){this.buffer=new At,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=VU.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Zu(this.information.getSize(),Zu.FNC1,Zu.FNC1):new Zu(this.information.getSize(),t-1,Zu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Zu(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new _c(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new _c(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new _c(this.current.getPosition(),this.buffer.toString()):t=new _c(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wc(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wc(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Da(e+5,Da.FNC1);if(t>=5&&t<15)return new Da(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Da(e+7,""+(r+1));if(r>=90&&r<116)return new Da(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new je}return new Da(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Da(e+5,Da.FNC1);if(t>=5&&t<15)return new Da(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Da(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new G0("Decoding invalid alphanumeric value: "+r)}return new Da(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),kM=function(){function n(e){this.information=e,this.generalDecoder=new um(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),jU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),La=function(n){jU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(kM),UU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HU=function(n){UU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new At;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(La),zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$U=function(n){zU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new At;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(kM),GU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dm=function(n){GU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(La),WU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NM=function(n){WU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+dm.GTIN_SIZE+e.WEIGHT_SIZE)throw new _e;var t=new At;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+dm.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(dm),YU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qU=function(n){YU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(NM),XU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KU=function(n){XU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(NM),QU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZU=function(n){QU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+La.GTIN_SIZE)throw new _e;var t=new At;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+La.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+La.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(La),JU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eH=function(n){JU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+La.GTIN_SIZE)throw new _e;var t=new At;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+La.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+La.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+La.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(La),tH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ol=function(n){tH(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new _e;var t=new At;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(dm);function nH(n){try{if(n.get(1))return new HU(n);if(!n.get(2))return new $U(n);var e=um.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new qU(n);case 5:return new KU(n)}var t=um.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new ZU(n);case 13:return new eH(n)}var r=um.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new ol(n,"310","11");case 57:return new ol(n,"320","11");case 58:return new ol(n,"310","13");case 59:return new ol(n,"320","13");case 60:return new ol(n,"310","15");case 61:return new ol(n,"320","15");case 62:return new ol(n,"310","17");case 63:return new ol(n,"320","17")}}catch(i){throw console.log(i),new G0("unknown decoder: "+n)}}var wI=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),rH=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),iH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ll=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(n){iH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(o){if(o instanceof _e){if(!this.pairs.length)throw new _e;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new _e},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,ll(t)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new _e},e.isValidSequence=function(t){var r,i;try{for(var a=ll(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var c=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new rH(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,o,c,d;try{for(var f=ll(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==t.length){var y=!0;try{for(var x=(s=void 0,ll(g.getPairs())),b=x.next();!b.done;b=x.next()){var A=b.value,S=!1;try{for(var T=(c=void 0,ll(t)),I=T.next();!I.done;I=T.next()){var R=I.value;if(wI.equals(A,R)){S=!0;break}}}catch(P){c={error:P}}finally{try{I&&!I.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}S||(y=!1)}}catch(P){s={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,o,c,d;try{for(var f=ll(r),p=f.next();!p.done;p=f.next()){var g=p.value,y=!0;try{for(var x=(s=void 0,ll(t)),b=x.next();!b.done;b=x.next()){var A=b.value,S=!1;try{for(var T=(c=void 0,ll(g.getPairs())),I=T.next();!I.done;I=T.next()){var R=I.value;if(A.equals(R)){S=!0;break}}}catch(P){c={error:P}}finally{try{I&&!I.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}if(!S){y=!1;break}}}catch(P){s={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(y)return!0}}catch(P){i={error:P}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=NU.buildBitArray(t),i=nH(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new gi(a,null,null,c,et.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,a),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new _e;var f;try{f=this.decodeDataCharacter(t,s,a,!1)}catch(p){f=null,console.log(p)}return new wI(d,f,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!t.get(o),!!f);)o++;for(var p=0,g=o,y=o;y<s;y++)if(t.get(y)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new _e},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();Sn.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new PM(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=$t.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new _e;for(var x=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var T=1*s[c]/g,I=T+.5;if(I<1){if(T<.3)throw new _e;I=1}else if(I>8){if(T>8.7)throw new _e;I=8}var R=c/2;(c&1)===0?(x[R]=I,A[R]=T-I):(b[R]=I,S[R]=T-I)}this.adjustOddEvenCounts(p);for(var P=4*r.getValue()+(i?0:2)+(a?0:1)-1,B=0,O=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var C=e.WEIGHTS[P][2*c];O+=x[c]*C}B+=x[c]}for(var D=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var C=e.WEIGHTS[P][2*c+1];D+=b[c]*C}var V=O+D;if((B&1)!==0||B>13||B<4)throw new _e;var L=(13-B)/2,M=e.SYMBOL_WIDEST[L],F=9-M,q=md.getRSSvalue(x,M,!0),X=md.getRSSvalue(b,F,!1),W=e.EVEN_TOTAL_SUBSET[L],G=e.GSUM[L],Q=q*W+X+G;return new Bm(Q,V)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=$t.sum(new Int32Array(this.getOddCounts())),i=$t.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-t,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new _e;s=!0}else{if(!p)throw new _e;c=!0}else if(d===-1)if(f){if(p)throw new _e;a=!0}else{if(!p)throw new _e;o=!0}else if(d===0){if(f){if(!p)throw new _e;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new _e}else throw new _e;if(a){if(s)throw new _e;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new _e;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Tc),sH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oH=function(n){sH(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Bm),lH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_I=function(n){lH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=Vx(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var x=(o=void 0,Vx(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var A=b.value;if(A.getCount()>1&&e.checkChecksum(y,A))return e.constructResult(y,A)}}catch(S){o={error:S}}finally{try{b&&!b.done&&(c=x.return)&&c.call(x)}finally{if(o)throw o.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new _e},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var o=Vx(t),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new At,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new gi(s.toString(),null,0,[f[0],f[1],p[0],p[1]],et.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),o=this.parseFoundFinderPattern(t,i,r,s),c=a==null?null:a.get(Ln.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),c.foundPossibleResultPoint(new Xe(d,i))}var f=this.decodeDataCharacter(t,o,!0),p=this.decodeDataCharacter(t,o,!1);return new oH(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Ir.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Ir.recordPattern(t,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=$t.sum(new Int32Array(a))/f,g=this.getOddCounts(),y=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,S=Math.floor(A+.5);S<1?S=1:S>8&&(S=8);var T=Math.floor(o/2);(o&1)===0?(g[T]=S,x[T]=A-S):(y[T]=S,b[T]=A-S)}this.adjustOddEvenCounts(i,f);for(var I=0,R=0,o=g.length-1;o>=0;o--)R*=9,R+=g[o],I+=g[o];for(var P=0,B=0,o=y.length-1;o>=0;o--)P*=9,P+=y[o],B+=y[o];var O=R+3*P;if(i){if((I&1)!==0||I>12||I<4)throw new _e;var C=(12-I)/2,D=e.OUTSIDE_ODD_WIDEST[C],V=9-D,L=md.getRSSvalue(g,D,!1),M=md.getRSSvalue(y,V,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[C],q=e.OUTSIDE_GSUM[C];return new Bm(L*F+M+q,O)}else{if((B&1)!==0||B>10||B<4)throw new _e;var C=(10-B)/2,D=e.INSIDE_ODD_WIDEST[C],V=9-D,L=md.getRSSvalue(g,D,!0),M=md.getRSSvalue(y,V,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[C],q=e.INSIDE_GSUM[C];return new Bm(M*X+L+q,O)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(t.get(f)!==s)i[c]++;else{if(c===3){if(Tc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new _e},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);Sn.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,y=a[1];return i&&(g=t.getSize()-1-g,y=t.getSize()-1-y),new PM(p,[o,a[1]],g,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=$t.sum(new Int32Array(this.getOddCounts())),a=$t.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new _e;o=!0}else{if(!g)throw new _e;d=!0}else if(f===-1)if(p){if(g)throw new _e;s=!0}else{if(!g)throw new _e;c=!0}else if(f===0){if(p){if(!g)throw new _e;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new _e}else throw new _e;if(s){if(o)throw new _e;Tc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Tc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new _e;Tc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Tc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Tc),cH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uh=function(n){cH(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Ln.POSSIBLE_FORMATS):null,a=t&&t.get(Ln.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Ln.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(et.EAN_13)||i.includes(et.UPC_A)||i.includes(et.EAN_8)||i.includes(et.UPC_E))&&r.readers.push(new Fx(t)),i.includes(et.CODE_39)&&r.readers.push(new dI(a,s)),i.includes(et.CODE_93)&&r.readers.push(new fI),i.includes(et.CODE_128)&&r.readers.push(new uI),i.includes(et.ITF)&&r.readers.push(new hI),i.includes(et.CODABAR)&&r.readers.push(new OU),i.includes(et.RSS_14)&&r.readers.push(new _I),i.includes(et.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new aH))),r.readers.length===0&&(r.readers.push(new Fx(t)),r.readers.push(new dI),r.readers.push(new fI),r.readers.push(new Fx(t)),r.readers.push(new uI),r.readers.push(new hI),r.readers.push(new _I)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new _e},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Ir),uH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){uH(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Uh(r),t,r)||this}return e})(uf);var bI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Xt=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),dH=function(){function n(e,t,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=bI(p),y=g.next();!y.done;y=g.next()){var x=y.value;d+=x.getCount()*(x.getDataCodewords()+f)}}catch(b){o={error:b}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new je;try{for(var a=bI(n.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new je},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new tn(5,new Xt(1,3))),new n(2,12,12,10,10,new tn(7,new Xt(1,5))),new n(3,14,14,12,12,new tn(10,new Xt(1,8))),new n(4,16,16,14,14,new tn(12,new Xt(1,12))),new n(5,18,18,16,16,new tn(14,new Xt(1,18))),new n(6,20,20,18,18,new tn(18,new Xt(1,22))),new n(7,22,22,20,20,new tn(20,new Xt(1,30))),new n(8,24,24,22,22,new tn(24,new Xt(1,36))),new n(9,26,26,24,24,new tn(28,new Xt(1,44))),new n(10,32,32,14,14,new tn(36,new Xt(1,62))),new n(11,36,36,16,16,new tn(42,new Xt(1,86))),new n(12,40,40,18,18,new tn(48,new Xt(1,114))),new n(13,44,44,20,20,new tn(56,new Xt(1,144))),new n(14,48,48,22,22,new tn(68,new Xt(1,174))),new n(15,52,52,24,24,new tn(42,new Xt(2,102))),new n(16,64,64,14,14,new tn(56,new Xt(2,140))),new n(17,72,72,16,16,new tn(36,new Xt(4,92))),new n(18,80,80,18,18,new tn(48,new Xt(4,114))),new n(19,88,88,20,20,new tn(56,new Xt(4,144))),new n(20,96,96,22,22,new tn(68,new Xt(4,174))),new n(21,104,104,24,24,new tn(56,new Xt(6,136))),new n(22,120,120,18,18,new tn(68,new Xt(6,175))),new n(23,132,132,20,20,new tn(62,new Xt(8,163))),new n(24,144,144,22,22,new tn(62,new Xt(8,156),new Xt(2,155))),new n(25,8,18,6,16,new tn(7,new Xt(1,5))),new n(26,8,32,6,14,new tn(11,new Xt(1,10))),new n(27,12,26,10,24,new tn(14,new Xt(1,16))),new n(28,12,36,10,16,new tn(18,new Xt(1,22))),new n(29,16,36,14,16,new tn(24,new Xt(1,32))),new n(30,16,48,14,22,new tn(28,new Xt(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),fH=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new je;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ks(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return dH.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new je;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new rt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=r/a|0,c=s*i,d=o*a,f=new ks(d,c),p=0;p<s;++p)for(var g=p*i,y=0;y<o;++y)for(var x=y*a,b=0;b<i;++b)for(var A=p*(i+2)+1+b,S=g+b,T=0;T<a;++T){var I=y*(a+2)+1+T;if(e.get(I,A)){var R=x+T;f.set(R,S)}}return f},n}(),AI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,o=t.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=AI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var y=new Array(c),x=0;try{for(var b=AI(d),A=b.next();!A.done;A=b.next())for(var g=A.value,S=0;S<g.getCount();S++){var T=g.getDataCodewords(),I=o.getECCodewords()+T;y[x++]=new n(T,new Uint8Array(I))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var R=y[0].codewords.length,P=R-o.getECCodewords(),B=P-1,O=0,S=0;S<B;S++)for(var C=0;C<x;C++)y[C].codewords[S]=e[O++];for(var D=t.getVersionNumber()===24,V=D?8:x,C=0;C<V;C++)y[C].codewords[P-1]=e[O++];for(var L=y[0].codewords.length,S=P;S<L;S++)for(var C=0;C<x;C++){var M=D?(C+8)%x:C,F=D&&M>7?S-1:S;y[M].codewords[F]=e[O++]}if(O!==e.length)throw new rt;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),LM=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new rt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;t=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;t=t<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),_r;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(_r||(_r={}));var pH=function(){function n(){}return n.decode=function(e){var t=new LM(e),r=new At,i=new At,a=new Array,s=_r.ASCII_ENCODE;do if(s===_r.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case _r.C40_ENCODE:this.decodeC40Segment(t,r);break;case _r.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case _r.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case _r.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case _r.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new je}s=_r.ASCII_ENCODE}while(s!==_r.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Y1(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new je;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),_r.ASCII_ENCODE;if(a===129)return _r.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return _r.C40_ENCODE;case 231:return _r.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return _r.ANSIX12_ENCODE;case 239:return _r.TEXT_ENCODE;case 240:return _r.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new je;break}}while(e.available()>0);return _r.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new je;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new je}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new je;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new je;break;default:throw new je}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new je;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new je;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new je;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{t.append(wa.decode(o,Vt.ISO88591))}catch(d){throw new G0("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),gH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mH=function(){function n(){this.rsDecoder=new q1(Bi.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new fH(e),a=i.getVersion(),s=i.readCodewords(),o=hH.getDataBlocks(s,a),c=0;try{for(var d=gH(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(I){t={error:I}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),y=o.length,x=0;x<y;x++){var b=o[x],A=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(A,S);for(var T=0;T<S;T++)g[T*y+x]=A[T]}return pH.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Vr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),yH=function(){function n(e){this.image=e,this.rectangleDetector=new tw(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new _e;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=n.sampleGrid(this.image,r,i,a,s,o,c);return new G_(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Xe(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Xe(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),f=s,p=[a,t,r,i];return f>o&&(f=o,p[0]=t,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),f>d&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,t),f=this.transitionsBetween(c,a);return d<f?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(o+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new Xe(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new Xe(a.getX()+(t.getX()-r.getX())/(o+1),a.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),y=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>y?f:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,o*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,f,p),r=n.moveAway(r,f,p),i=n.moveAway(i,f,p),a=n.moveAway(a,f,p);var g,y;return c=n.shiftPoint(t,r,o*4),c=n.shiftPoint(c,a,s*4),g=n.shiftPoint(r,t,o*4),g=n.shiftPoint(g,i,s*4),d=n.shiftPoint(i,a,o*4),d=n.shiftPoint(d,r,s*4),y=n.shiftPoint(a,i,o*4),y=n.shiftPoint(y,t,s*4),[c,g,d,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,o){var c=W_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,y=r<a?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),A=r,S=i;A!==a;A+=y){var T=this.image.get(o?S:A,o?A:S);if(T!==b&&(x++,b=T),p+=f,p>0){if(S===s)break;S+=g,p-=d}}return x},n}(),iw=function(){function n(){this.decoder=new mH}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Ln.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new yH(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new gi(r.getText(),o,8*o.length,i,et.DATA_MATRIX,Sn.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(Jr.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(Jr.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new _e;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new _e;var p=i/2;a+=p,o+=p;for(var g=new ks(d,f),y=0;y<f;y++)for(var x=a+y*i,b=0;b<d;b++)e.get(o+b*i,x)&&g.set(b,y);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new _e;var s=i-e[0];if(s===0)throw new _e;return s},n.NO_POINTS=[],n}(),vH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){vH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new iw,t)||this}return e})(uf);var yd;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(yd||(yd={}));var xH=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ma(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new rt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(yd.L,"L",1),n.M=new n(yd.M,"M",0),n.Q=new n(yd.Q,"Q",3),n.H=new n(yd.H,"H",2),n}(),wH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BM=function(){function n(e){this.errorCorrectionLevel=xH.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ct.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=wH(n.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===t)return new n(d[1]);var p=n.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==t&&(p=n.numBitsDiffering(t,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),_H=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=_H(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Y=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),bH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jc=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=bH(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new je;try{return this.getVersionForNumber((e-17)/4)}catch{throw new je}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new rt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=BM.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ks(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new ce(7,new Y(1,19)),new ce(10,new Y(1,16)),new ce(13,new Y(1,13)),new ce(17,new Y(1,9))),new n(2,Int32Array.from([6,18]),new ce(10,new Y(1,34)),new ce(16,new Y(1,28)),new ce(22,new Y(1,22)),new ce(28,new Y(1,16))),new n(3,Int32Array.from([6,22]),new ce(15,new Y(1,55)),new ce(26,new Y(1,44)),new ce(18,new Y(2,17)),new ce(22,new Y(2,13))),new n(4,Int32Array.from([6,26]),new ce(20,new Y(1,80)),new ce(18,new Y(2,32)),new ce(26,new Y(2,24)),new ce(16,new Y(4,9))),new n(5,Int32Array.from([6,30]),new ce(26,new Y(1,108)),new ce(24,new Y(2,43)),new ce(18,new Y(2,15),new Y(2,16)),new ce(22,new Y(2,11),new Y(2,12))),new n(6,Int32Array.from([6,34]),new ce(18,new Y(2,68)),new ce(16,new Y(4,27)),new ce(24,new Y(4,19)),new ce(28,new Y(4,15))),new n(7,Int32Array.from([6,22,38]),new ce(20,new Y(2,78)),new ce(18,new Y(4,31)),new ce(18,new Y(2,14),new Y(4,15)),new ce(26,new Y(4,13),new Y(1,14))),new n(8,Int32Array.from([6,24,42]),new ce(24,new Y(2,97)),new ce(22,new Y(2,38),new Y(2,39)),new ce(22,new Y(4,18),new Y(2,19)),new ce(26,new Y(4,14),new Y(2,15))),new n(9,Int32Array.from([6,26,46]),new ce(30,new Y(2,116)),new ce(22,new Y(3,36),new Y(2,37)),new ce(20,new Y(4,16),new Y(4,17)),new ce(24,new Y(4,12),new Y(4,13))),new n(10,Int32Array.from([6,28,50]),new ce(18,new Y(2,68),new Y(2,69)),new ce(26,new Y(4,43),new Y(1,44)),new ce(24,new Y(6,19),new Y(2,20)),new ce(28,new Y(6,15),new Y(2,16))),new n(11,Int32Array.from([6,30,54]),new ce(20,new Y(4,81)),new ce(30,new Y(1,50),new Y(4,51)),new ce(28,new Y(4,22),new Y(4,23)),new ce(24,new Y(3,12),new Y(8,13))),new n(12,Int32Array.from([6,32,58]),new ce(24,new Y(2,92),new Y(2,93)),new ce(22,new Y(6,36),new Y(2,37)),new ce(26,new Y(4,20),new Y(6,21)),new ce(28,new Y(7,14),new Y(4,15))),new n(13,Int32Array.from([6,34,62]),new ce(26,new Y(4,107)),new ce(22,new Y(8,37),new Y(1,38)),new ce(24,new Y(8,20),new Y(4,21)),new ce(22,new Y(12,11),new Y(4,12))),new n(14,Int32Array.from([6,26,46,66]),new ce(30,new Y(3,115),new Y(1,116)),new ce(24,new Y(4,40),new Y(5,41)),new ce(20,new Y(11,16),new Y(5,17)),new ce(24,new Y(11,12),new Y(5,13))),new n(15,Int32Array.from([6,26,48,70]),new ce(22,new Y(5,87),new Y(1,88)),new ce(24,new Y(5,41),new Y(5,42)),new ce(30,new Y(5,24),new Y(7,25)),new ce(24,new Y(11,12),new Y(7,13))),new n(16,Int32Array.from([6,26,50,74]),new ce(24,new Y(5,98),new Y(1,99)),new ce(28,new Y(7,45),new Y(3,46)),new ce(24,new Y(15,19),new Y(2,20)),new ce(30,new Y(3,15),new Y(13,16))),new n(17,Int32Array.from([6,30,54,78]),new ce(28,new Y(1,107),new Y(5,108)),new ce(28,new Y(10,46),new Y(1,47)),new ce(28,new Y(1,22),new Y(15,23)),new ce(28,new Y(2,14),new Y(17,15))),new n(18,Int32Array.from([6,30,56,82]),new ce(30,new Y(5,120),new Y(1,121)),new ce(26,new Y(9,43),new Y(4,44)),new ce(28,new Y(17,22),new Y(1,23)),new ce(28,new Y(2,14),new Y(19,15))),new n(19,Int32Array.from([6,30,58,86]),new ce(28,new Y(3,113),new Y(4,114)),new ce(26,new Y(3,44),new Y(11,45)),new ce(26,new Y(17,21),new Y(4,22)),new ce(26,new Y(9,13),new Y(16,14))),new n(20,Int32Array.from([6,34,62,90]),new ce(28,new Y(3,107),new Y(5,108)),new ce(26,new Y(3,41),new Y(13,42)),new ce(30,new Y(15,24),new Y(5,25)),new ce(28,new Y(15,15),new Y(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Y(4,116),new Y(4,117)),new ce(26,new Y(17,42)),new ce(28,new Y(17,22),new Y(6,23)),new ce(30,new Y(19,16),new Y(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Y(2,111),new Y(7,112)),new ce(28,new Y(17,46)),new ce(30,new Y(7,24),new Y(16,25)),new ce(24,new Y(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Y(4,121),new Y(5,122)),new ce(28,new Y(4,47),new Y(14,48)),new ce(30,new Y(11,24),new Y(14,25)),new ce(30,new Y(16,15),new Y(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Y(6,117),new Y(4,118)),new ce(28,new Y(6,45),new Y(14,46)),new ce(30,new Y(11,24),new Y(16,25)),new ce(30,new Y(30,16),new Y(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Y(8,106),new Y(4,107)),new ce(28,new Y(8,47),new Y(13,48)),new ce(30,new Y(7,24),new Y(22,25)),new ce(30,new Y(22,15),new Y(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Y(10,114),new Y(2,115)),new ce(28,new Y(19,46),new Y(4,47)),new ce(28,new Y(28,22),new Y(6,23)),new ce(30,new Y(33,16),new Y(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Y(8,122),new Y(4,123)),new ce(28,new Y(22,45),new Y(3,46)),new ce(30,new Y(8,23),new Y(26,24)),new ce(30,new Y(12,15),new Y(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Y(3,117),new Y(10,118)),new ce(28,new Y(3,45),new Y(23,46)),new ce(30,new Y(4,24),new Y(31,25)),new ce(30,new Y(11,15),new Y(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Y(7,116),new Y(7,117)),new ce(28,new Y(21,45),new Y(7,46)),new ce(30,new Y(1,23),new Y(37,24)),new ce(30,new Y(19,15),new Y(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Y(5,115),new Y(10,116)),new ce(28,new Y(19,47),new Y(10,48)),new ce(30,new Y(15,24),new Y(25,25)),new ce(30,new Y(23,15),new Y(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Y(13,115),new Y(3,116)),new ce(28,new Y(2,46),new Y(29,47)),new ce(30,new Y(42,24),new Y(1,25)),new ce(30,new Y(23,15),new Y(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Y(17,115)),new ce(28,new Y(10,46),new Y(23,47)),new ce(30,new Y(10,24),new Y(35,25)),new ce(30,new Y(19,15),new Y(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Y(17,115),new Y(1,116)),new ce(28,new Y(14,46),new Y(21,47)),new ce(30,new Y(29,24),new Y(19,25)),new ce(30,new Y(11,15),new Y(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Y(13,115),new Y(6,116)),new ce(28,new Y(14,46),new Y(23,47)),new ce(30,new Y(44,24),new Y(7,25)),new ce(30,new Y(59,16),new Y(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Y(12,121),new Y(7,122)),new ce(28,new Y(12,47),new Y(26,48)),new ce(30,new Y(39,24),new Y(14,25)),new ce(30,new Y(22,15),new Y(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Y(6,121),new Y(14,122)),new ce(28,new Y(6,47),new Y(34,48)),new ce(30,new Y(46,24),new Y(10,25)),new ce(30,new Y(2,15),new Y(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Y(17,122),new Y(4,123)),new ce(28,new Y(29,46),new Y(14,47)),new ce(30,new Y(49,24),new Y(10,25)),new ce(30,new Y(24,15),new Y(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Y(4,122),new Y(18,123)),new ce(28,new Y(13,46),new Y(32,47)),new ce(30,new Y(48,24),new Y(14,25)),new ce(30,new Y(42,15),new Y(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Y(20,117),new Y(4,118)),new ce(28,new Y(40,47),new Y(7,48)),new ce(30,new Y(43,24),new Y(22,25)),new ce(30,new Y(10,15),new Y(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Y(19,118),new Y(6,119)),new ce(28,new Y(18,47),new Y(31,48)),new ce(30,new Y(34,24),new Y(34,25)),new ce(30,new Y(20,15),new Y(61,16)))],n}(),Lr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Lr||(Lr={}));var EI=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Lr.DATA_MASK_000,new n(Lr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Lr.DATA_MASK_001,new n(Lr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Lr.DATA_MASK_010,new n(Lr.DATA_MASK_010,function(e,t){return t%3===0})],[Lr.DATA_MASK_011,new n(Lr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Lr.DATA_MASK_100,new n(Lr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Lr.DATA_MASK_101,new n(Lr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Lr.DATA_MASK_110,new n(Lr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Lr.DATA_MASK_111,new n(Lr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),AH=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new je;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=BM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new je},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return jc.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=jc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=jc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new je},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=EI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=s?i-1-g:g,x=0;x<2;x++)a.get(p-x,y)||(f++,d<<=1,this.bitMatrix.get(p-x,y)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==t.getTotalCodewords())throw new je;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=EI.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),SI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new rt;var c=t.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=SI(f),g=p.next();!g.done;g=p.next()){var y=g.value;d+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(d),b=0;try{for(var A=SI(f),S=A.next();!S.done;S=A.next())for(var y=S.value,T=0;T<y.getCount();T++){var I=y.getDataCodewords(),R=c.getECCodewordsPerBlock()+I;x[b++]=new n(I,new Uint8Array(R))}}catch(F){s={error:F}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var P=x[0].codewords.length,B=x.length-1;B>=0;){var O=x[B].codewords.length;if(O===P)break;B--}B++;for(var C=P-c.getECCodewordsPerBlock(),D=0,T=0;T<C;T++)for(var V=0;V<b;V++)x[V].codewords[T]=e[D++];for(var V=B;V<b;V++)x[V].codewords[C]=e[D++];for(var L=x[0].codewords.length,T=C;T<L;T++)for(var V=0;V<b;V++){var M=V<B?T:T+1;x[V].codewords[M]=e[D++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),fa;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(fa||(fa={}));var Dn=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new rt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(fa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(fa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(fa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(fa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(fa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(fa.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(fa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(fa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(fa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(fa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),SH=function(){function n(){}return n.decode=function(e,t,r,i){var a=new LM(e),s=new At,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=Dn.TERMINATOR;else{var y=a.readBits(4);g=Dn.forBits(y)}switch(g){case Dn.TERMINATOR:break;case Dn.FNC1_FIRST_POSITION:case Dn.FNC1_SECOND_POSITION:p=!0;break;case Dn.STRUCTURED_APPEND:if(a.available()<16)throw new je;c=a.readBits(8),d=a.readBits(8);break;case Dn.ECI:var x=n.parseECIValue(a);if(f=Tr.getCharacterSetECIByValue(x),f===null)throw new je;break;case Dn.HANZI:var b=a.readBits(4),A=a.readBits(g.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,A);break;default:var S=a.readBits(g.getCharacterCountBits(t));switch(g){case Dn.NUMERIC:n.decodeNumericSegment(a,s,S);break;case Dn.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,S,p);break;case Dn.BYTE:n.decodeByteSegment(a,s,S,f,o,i);break;case Dn.KANJI:n.decodeKanjiSegment(a,s,S);break;default:throw new je}break}}while(g!==Dn.TERMINATOR)}catch{throw new je}return new Y1(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{t.append(wa.decode(i,Vt.GB2312))}catch(c){throw new je(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{t.append(wa.decode(i,Vt.SHIFT_JIS))}catch(c){throw new je(c)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new je;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=Vt.guessEncoding(o,s):d=i.getName();try{t.append(wa.decode(o,d))}catch(f){throw new je(f)}a.push(o)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new je;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new je;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new je;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new je;var i=e.readBits(10);if(i>=1e3)throw new je;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new je;var a=e.readBits(7);if(a>=100)throw new je;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new je;var s=e.readBits(4);if(s>=10)throw new je;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new je},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),FM=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),TI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TH=function(){function n(){this.rsDecoder=new q1(Bi.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ks.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new AH(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new FM(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=EH.getDataBlocks(d,o,c),p=0;try{for(var g=TI(f),y=g.next();!y.done;y=g.next()){var x=y.value;p+=x.getNumDataCodewords()}}catch(B){r={error:B}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),A=0;try{for(var S=TI(f),T=S.next();!T.done;T=S.next()){var x=T.value,I=x.getCodewords(),R=x.getNumDataCodewords();this.correctErrors(I,R);for(var P=0;P<R;P++)b[A++]=I[P]}}catch(B){a={error:B}}finally{try{T&&!T.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}return SH.decode(b,o,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Vr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),CH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IH=function(n){CH(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Xe),DH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RH=function(){function n(e,t,r,i,a,s,o){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),o=this.image,c=0;c<t;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new _e},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(t,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=DH(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var y=new IH(o,c,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n}(),OH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MH=function(n){OH(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(Xe),PH=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),xh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kH=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Ln.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ln.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*n.MAX_MODULES));(o<n.MIN_SKIP||t)&&(o=n.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,g,r);if(y===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>d[2]&&(f+=x-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,s,r);y===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Xe.orderBestPatterns(b),new PH(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&t+s<d&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=c||t+s>=d)return!1;for(;e+s<c&&t+s<d&&!o.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||t+s>=d||a[3]>=r)return!1;for(;e+s<c&&t+s<d&&o.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(t,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(t,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,t);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,t)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,t)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var y=f[p];if(y.aboutEquals(c,o,s)){f[p]=y.combineEstimate(o,s,c),d=!0;break}}if(!d){var x=new MH(s,o,c);f.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=xh(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=xh(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=n.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var y=xh(this.possibleCenters),x=y.next();!x.done;x=y.next()){var f=x.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return g<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new _e;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=xh(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,d+=y*y}}catch(P){e={error:P}}finally{try{p&&!p.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}o=c/a;var x=Math.sqrt(d/a-o*o);s.sort(function(P,B){var O=Math.abs(B.getEstimatedModuleSize()-o),C=Math.abs(P.getEstimatedModuleSize()-o);return O<C?-1:O>C?1:0});for(var b=Math.max(.2*o,x),A=0;A<s.length&&s.length>3;A++){var S=s[A];Math.abs(S.getEstimatedModuleSize()-o)>b&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var T=xh(s),I=T.next();!I.done;I=T.next()){var R=I.value;c+=R.getEstimatedModuleSize()}}catch(B){r={error:B}}finally{try{I&&!I.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(B,O){if(O.getCount()===B.getCount()){var C=Math.abs(O.getEstimatedModuleSize()-o),D=Math.abs(B.getEstimatedModuleSize()-o);return C<D?1:C>D?-1:0}else return O.getCount()-B.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),NH=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ln.NEED_RESULT_POINT_CALLBACK);var t=new kH(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new _e("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),o=jc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,y=Math.floor(t.getX()+g*(f-t.getX())),x=Math.floor(t.getY()+g*(p-t.getY())),b=4;b<=16;b<<=1)try{d=this.findAlignmentInRegion(a,y,x,b);break}catch(I){if(!(I instanceof _e))throw I}var A=n.createTransform(t,r,i,d,s),S=n.sampleGrid(this.image,A,s),T;return d===null?T=[i,t,r]:T=[i,t,r,d],new G_(S,T)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),d=s,f=s),MM.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=W_.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=$t.round(Xe.distance(e,t)/i),s=$t.round(Xe.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new _e("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-t),d=-o/2,f=e<r?1:-1,p=t<i?1:-1,g=0,y=r+f,x=e,b=t;x!==y;x+=f){var A=a?b:x,S=a?x:b;if(g===1===this.image.get(A,S)){if(g===2)return $t.distance(x,b,e,t);g++}if(d+=c,d>0){if(b===i)break;b+=p,d-=o}}return g===2?$t.distance(r+f,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new _e("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new _e("Alignment bottom exceeds estimated module size.");var f=new RH(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},n}(),aw=function(){function n(){this.decoder=new TH}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Ln.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new NH(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof FM&&r.getOther().applyMirroredCorrection(i);var o=new gi(r.getText(),r.getRawBytes(),void 0,i,et.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(Jr.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(Jr.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(Jr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(Jr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new _e;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0];if(o>=c||a>=s)throw new _e;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new _e;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new _e;if(f!==d)throw new _e;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new _e;o-=g}var y=a+Math.floor((f-1)*i)-s;if(y>0){if(y>p)throw new _e;a-=y}for(var x=new ks(d,f),b=0;b<f;b++)for(var A=a+Math.floor(b*i),S=0;S<d;S++)e.get(o+Math.floor(S*i),A)&&x.set(S,b);return x},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==t.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new _e;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),LH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return $t.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=LH(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Cr.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),BH=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),FH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VH=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new BH(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,o=0,c=!1;s<t.getHeight();){var d=n.findVertices(t,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,FH(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var f=n.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new Xe(f[0],i),o[1]=new Xe(f[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<t;g++){var f=n.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<n.MAX_PATTERN_DRIFT)p=f,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,o[2]=new Xe(p[0],g),o[3]=new Xe(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Cr.fill(o,null),o},n.findGuardPattern=function(e,t,r,i,a,s,o){Cr.fillWithin(o,0,o.length,0);for(var c=t,d=0;e.get(c,r)&&c>0&&d++<n.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,y=a;f<i;f++){var x=e.get(f,r);if(x!==y)o[p]++;else{if(p===g-1){if(n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],Sn.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}}return p===g-1&&n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return 1/0;d+=y}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),jH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mc=function(){function n(e,t){if(t.length===0)throw new rt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=jH(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(t[o-s],r[o]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=t[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new At,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),UH=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new OM;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),HH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zH=function(n){HH(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Mc(i,new Int32Array([0])),i.one=new Mc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Mc(this,i)},e.PDF417_GF=new e(Ut.NUMBER_OF_CODEWORDS,3),e}(UH),$H=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GH=function(){function n(){this.field=zH.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Mc(this.field,e),o=new Int32Array(t),c=!1,d=t;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[t-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=$H(r),y=g.next();!y.done;y=g.next()){var x=y.value,b=this.field.exp(e.length-1-x),A=new Mc(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(A)}}catch(C){i={error:C}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new Mc(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),S,t),I=T[0],R=T[1],P=this.findErrorLocations(I),B=this.findErrorMagnitudes(R,I,P),d=0;d<P.length;d++){var O=e.length-1-this.field.log(P[d]);if(O<0)throw Vr.getChecksumInstance();e[O]=this.field.subtract(e[O],B[d])}return P.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw Vr.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var x=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(x,b)),s=s.subtract(a.multiplyByMonomial(x,b))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw Vr.getChecksumInstance();var S=this.field.inverse(A),T=c.multiply(S),I=s.multiply(S);return[T,I]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Vr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new Mc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},n}(),sw=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,o=i==null||a==null;if(s&&o)throw new _e;s?(t=new Xe(0,i.getY()),r=new Xe(0,a.getY())):o&&(i=new Xe(e.getWidth()-1,t.getY()),a=new Xe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new Xe(c.getX(),d);r?i=f:s=f}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new Xe(p.getX(),g);r?a=y:o=y}return new n(this.image,i,a,s,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),WH=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),q_=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(g||16);break;case"d":y=parseFloat(parseInt(t[r],g||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var x=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";y.length<x;)y=o!==void 0?y+b:b+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),YH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VM=function(){function n(e){this.boundingBox=new sw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new q_,i=0;try{for(var a=YH(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),qH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Hh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=qH(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=XH(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Ut.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),KH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CI=function(n){KH(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=jx(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var y=r[g],x=y.getRowNumber()-d;if(x===0)p++;else if(x===1)f=Math.max(f,p),p=1,d=y.getRowNumber();else if(x<0||y.getRowNumber()>=t.getRowCount()||x>g)r[g]=null;else{var b=void 0;f>2?b=(f-2)*x:b=x;for(var A=b>=g,S=1;S<=b&&!A;S++)A=r[g-S]!=null;A?r[g]=null:(d=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=jx(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Hh,s=new Hh,o=new Hh,c=new Hh;try{for(var d=jx(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){t={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;var x=new WH(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(VM),QH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZH=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ut.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[t],d[3]=c[t],t>0&&(d[0]=r[t-1],d[4]=o[t-1],d[5]=c[t-1]),t>1&&(d[8]=r[t-2],d[10]=o[t-2],d[11]=c[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=o[t+1],d[7]=c[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=o[t+2],d[13]=c[t+2]);try{for(var f=QH(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(n.adjustRowNumber(s,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new q_,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),JH=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),ez=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ut.SYMBOL_TABLE.length;e++)for(var t=Ut.SYMBOL_TABLE[e],r=t&1,i=0;i<Ut.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-i-1]=Math.fround(a/Ut.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=$t.sum(e),r=new Int32Array(Ut.BARS_IN_MODULE),i=0,a=0,s=0;s<Ut.MODULES_IN_CODEWORD;s++){var o=t/(2*Ut.MODULES_IN_CODEWORD)+s*t/Ut.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ut.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=$t.sum(e),r=new Array(Ut.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=ew.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var c=0,d=n.RATIOS_TABLE[o],f=0;f<Ut.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=Ut.SYMBOL_TABLE[o])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(function(e){return new Array(Ut.BARS_IN_MODULE)}),n}(),tz=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),II=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),nz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rz=function(n){nz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Vi),iz=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new rz;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new z_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sz=function(n){az(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Vi),oz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lz=function(n){oz(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new rt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new sz;i=Ct.MAX_VALUE}this.buf=Cr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new z_;this.ensureCapacity(this.count+i),Sn.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Cr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(iz),hn;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hn||(hn={}));function jM(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var kg;function hl(n){if(typeof kg>"u"&&(kg=jM()),kg===null)throw new Error("BigInt is not supported!");return kg(n)}function cz(){var n=[];n[0]=hl(1);var e=hl(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var uz=function(){function n(){}return n.decode=function(e,t){var r=new At(""),i=Tr.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new tz;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Tr.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new je;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw je.getFormatInstance()}if(r.length()===0)throw je.getFormatInstance();var c=new Y1(null,r.toString(),null,t);return c.setOther(o),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw je.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ct.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new At;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var o=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new At;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new At;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new At;t=n.textCompaction(e,t+1,f),r.setAddressee(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new At;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Ct.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new At;t=n.numericCompaction(e,t+1,g),r.setTimestamp(II.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new At;t=n.numericCompaction(e,t+1,y),r.setChecksum(Ct.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new At;t=n.numericCompaction(e,t+1,x),r.setFileSize(II.parseLong(x.toString()));break;default:throw je.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw je.getFormatInstance()}if(o!==-1){var b=t-o;r.isLastSegment()&&b--,r.setOptionalData(Cr.copyOfRange(e,o,o+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=hn.ALPHA,s=hn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case hn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.LL:a=hn.LOWER;break;case n.ML:a=hn.MIXED;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case n.AS:s=a,a=hn.ALPHA_SHIFT;break;case n.ML:a=hn.MIXED;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.MIXED:if(c<n.PL)d=n.MIXED_CHARS[c];else switch(c){case n.PL:a=hn.PUNCT;break;case 26:d=" ";break;case n.LL:a=hn.LOWER;break;case n.AL:a=hn.ALPHA;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT:if(c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=hn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT_SHIFT:if(a=s,c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=hn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break}d!==""&&i.append(d),o++}},n.byteCompaction=function(e,t,r,i,a){var s=new lz,o=0,c=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=t[i++];i<t[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(hl(c)>>hl(8*(5-g))));c=0,o=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var y=0;y<o;y++)s.write(f[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var x=t[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(hl(c)>>hl(8*(5-g))));c=0,o=0}}break}return a.append(wa.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<n.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=hl(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*hl(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new je;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=jM()?cz():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),wh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dz=function(){function n(){}return n.decode=function(e,t,r,i,a,s,o){for(var c=new sw(e,t,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,c,t,!0,s,o)),i!=null&&(f=n.getRowIndicatorColumn(e,c,i,!1,s,o)),p=n.merge(d,f),p==null)throw _e.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(x,f);for(var b=d!=null,A=1;A<=x;A++){var S=b?A:x-A;if(p.getDetectionResultColumn(S)===void 0){var T=void 0;S===0||S===x?T=new CI(c,S===0):T=new VM(c),p.setDetectionResultColumn(S,T);for(var I=-1,R=I,P=c.getMinY();P<=c.getMaxY();P++){if(I=n.getStartColumn(p,S,P,b),I<0||I>c.getMaxX()){if(R===-1)continue;I=R}var B=n.detectCodeword(e,c.getMinX(),c.getMaxX(),b,I,P,s,o);B!=null&&(T.setCodeword(P,B),R=I,s=Math.min(s,B.getWidth()),o=Math.max(o,B.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=sw.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new ZH(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var o=wh(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=wh(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var o=new CI(t,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var g=n.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ut.MAX_CODEWORDS_IN_BARCODE)throw _e.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=t[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ut.toIntArray(r),Ut.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=a[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(f){var d=f instanceof Vr;if(!d)throw f}if(s.length===0)throw Vr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Vr.getChecksumInstance()}throw Vr.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new Hh;var d=0;try{for(var f=wh(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,wh(g.getCodewords())),x=y.next();!x.done;x=y.next()){var b=x.value;if(b!=null){var A=b.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(b.getValue())}}}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}d++}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,o=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var f=(a=void 0,wh(e.getDetectionResultColumn(t).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,o,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var f,p=$t.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var y=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=y}f=a,a=f-p}if(!n.checkCodewordSkew(p,o,c))return null;var x=ez.getDecodedValue(d),b=Ut.getCodeword(x);return b===-1?null:new JH(a,f,n.getCodewordBucketNumber(x),b)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=t)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:t)&&d===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=t:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>n.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw je.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=uz.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Vr.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw je.getFormatInstance();var r=e[0];if(r>e.length)throw je.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw je.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new q_,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new GH,n}(),fz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw _e.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof je||r instanceof Vr?_e.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,o=VH.detectMultiple(e,t,r);try{for(var c=fz(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=dz.decode(o.getBits(),f[4],f[5],f[6],f[7],n.getMinCodewordWidth(f),n.getMaxCodewordWidth(f)),g=new gi(p.getText(),p.getRawBytes(),void 0,f,et.PDF_417);g.putMetadata(Jr.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(Jr.PDF417_EXTRA_METADATA,y),s.push(g)}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(x){return x})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ct.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),hz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DI=function(n){hz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Vi),RI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pz=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ln.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ln.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===et.UPC_A||s===et.UPC_E||s===et.EAN_13||s===et.EAN_8||s===et.CODABAR||s===et.CODE_39||s===et.CODE_93||s===et.CODE_128||s===et.ITF||s===et.RSS_14||s===et.RSS_EXPANDED});a&&!t&&i.push(new Uh(e)),r.includes(et.QR_CODE)&&i.push(new aw),r.includes(et.DATA_MATRIX)&&i.push(new iw),r.includes(et.AZTEC)&&i.push(new nw),r.includes(et.PDF_417)&&i.push(new ow),a&&t&&i.push(new Uh(e))}i.length===0&&(t||i.push(new Uh(e)),i.push(new aw),i.push(new iw),i.push(new nw),i.push(new ow),t&&i.push(new Uh(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=RI(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new DI("No readers where selected, nothing can be read.");try{for(var i=RI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof DI)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new _e("No MultiFormat Readers were able to detect the code.")},n}(),gz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mz=function(n){gz(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new pz;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(uf),yz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){yz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ow,t)||this}return e})(uf);var vz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){vz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new aw,t)||this}return e})(uf);var lw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(lw||(lw={}));const Ng=lw;var UM=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Tl(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new Tl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new rt("No error correction bytes");var r=e.length-t;if(r<=0)throw new rt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Sn.arraycopy(e,0,a,0,r);var s=new Tl(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=t-c.length,f=0;f<d;f++)e[r+f]=0;Sn.arraycopy(c,0,e,r+d,c.length)},n}(),zh=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(n.isWhiteHorizontal(c,o-4,o)||n.isWhiteHorizontal(c,o+7,o+11))&&t++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(n.isWhiteVertical(r,o,s-4,s)||n.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&t++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(t*2-d)*10/d);return f*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new rt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=t?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,d=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),xz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wz=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=xz(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Cr.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},n.prototype.toString=function(){for(var e=new At,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),cw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new At;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),_z=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),In=function(n){_z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Vi),OI=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new jr;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new jr;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(n.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,t!==255&&zh.getDataMaskBit(t,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new In("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ct.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new rt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!cw.isValidMaskPattern(t))throw new In("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new jr;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new In("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new In("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new In;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new In;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new In;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&n.isEmpty(t.get(d,o))&&n.embedPositionAdjustmentPattern(d-2,o-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),bz=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),MI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return zh.applyMaskPenaltyRule1(e)+zh.applyMaskPenaltyRule2(e)+zh.applyMaskPenaltyRule3(e)+zh.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Ng.CHARACTER_SET)!==void 0;a&&(i=r.get(Ng.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new jr;if(s===Dn.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Tr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new jr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(Ng.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Ng.QR_VERSION).toString(),10);f=jc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,t))throw new In("Data too big for requested version")}else f=this.recommendVersion(t,s,o,d);var y=new jr;y.appendBitArray(o);var x=s===Dn.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(x,f,s,y),y.appendBitArray(d);var b=f.getECBlocksForLevel(t),A=f.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,y);var S=this.interleaveWithECBytes(y,f.getTotalCodewords(),A,b.getNumBlocks()),T=new cw;T.setECLevel(t),T.setMode(s),T.setVersion(f);var I=f.getDimensionForVersion(),R=new wz(I,I),P=this.chooseMaskPattern(S,t,f,R);return T.setMaskPattern(P),OI.buildMatrix(S,t,f,P,R),T.setMatrix(R),T},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,jc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(o,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Tr.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Dn.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return Dn.BYTE}return i?Dn.ALPHANUMERIC:r?Dn.NUMERIC:Dn.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=wa.encode(e,Tr.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<cw.NUM_MASK_PATTERNS;o++){OI.buildMatrix(e,t,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=jc.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new In("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new In("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new In("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(t/r),g=p+1,y=d-p,x=f-g;if(y!==x)throw new In("EC bytes mismatch");if(r!==c+o)throw new In("RS blocks mismatch");if(e!==(p+y)*c+(g+x)*o)throw new In("Total bytes mismatch");i<c?(a[0]=p,s[0]=y):(a[0]=g,s[0]=x)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new In("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,y=0;y<i;++y){var x=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,x,b);var A=x[0],S=new Uint8Array(A);e.toBytes(8*d,S,0,A);var T=n.generateECBytes(S,b[0]);g.push(new bz(S,T)),f=Math.max(f,A),p=Math.max(p,T.length),d+=x[0]}if(r!==d)throw new In("Data bytes does not match offset");for(var I=new jr,y=0;y<f;++y)try{for(var R=(a=void 0,MI(g)),P=R.next();!P.done;P=R.next()){var B=P.value,S=B.getDataBytes();y<S.length&&I.appendBits(S[y],8)}}catch(V){a={error:V}}finally{try{P&&!P.done&&(s=R.return)&&s.call(R)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var O=(o=void 0,MI(g)),C=O.next();!C.done;C=O.next()){var B=C.value,T=B.getErrorCorrectionBytes();y<T.length&&I.appendBits(T[y],8)}}catch(V){o={error:V}}finally{try{C&&!C.done&&(c=O.return)&&c.call(O)}finally{if(o)throw o.error}}if(t!==I.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+I.getSizeInBytes()+" differ.");return I},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new UM(Bi.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new In(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Dn.NUMERIC:n.appendNumericBytes(e,r);break;case Dn.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Dn.BYTE:n.append8BitBytes(e,r,i);break;case Dn.KANJI:n.appendKanjiBytes(e,r);break;default:throw new In("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),o=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new In;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new In;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=wa.encode(e,r)}catch(c){throw new In(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=wa.encode(e,Tr.SJIS)}catch(p){throw new In(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new In("Invalid byte sequence");var f=(d>>8)*192+(d&255);t.appendBits(f,13)}},n.appendECI=function(e,t){t.appendBits(Dn.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Tr.UTF8.getName(),n})();var Az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Az(e,n);function e(t,r,i,a,s,o,c,d){var f=n.call(this,o,c)||this;if(f.yuvData=t,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new rt("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sn.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;Sn.arraycopy(this.yuvData,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*t,d=0;d<t;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+t/2,c=s,d=s+t-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new $_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(W1);var Ez=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Ez(e,n);function e(t,r,i,a,s,o,c){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,t.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var y=t[g],x=y>>16&255,b=y>>7&510,A=y&255;p[g]=(x+b+A)/4&255}d.luminances=p}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new rt("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sn.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;Sn.arraycopy(this.luminances,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new $_(this)},e})(W1);var Sz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tz=function(n){Sz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Tr),Cz=function(){function n(){}return n.ISO_8859_1=Tr.ISO8859_1,n}(),uw,Iz=301,Dz=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=Iz);return{LOG:n,ALOG:e}};uw=Dz([],[]),uw.LOG;uw.ALOG;var PI;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(PI||(PI={}));var kI=129,HM=230,Rz=231,Oz=235,Mz=236,Pz=237,kz=238,Nz=239,Lz=240,Ux=254,Bz=254,NI="[)>05",LI="[)>06",BI="",on=0,Kr=1,Ei=2,br=3,Br=4,oi=5,Fz=function(){function n(){}return n.prototype.getEncodingMode=function(){return on},n.prototype.encode=function(e){var t=Ba.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ba.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case oi:e.writeCodeword(Rz),e.signalEncoderChange(oi);return;case Kr:e.writeCodeword(HM),e.signalEncoderChange(Kr);return;case br:e.writeCodeword(kz),e.signalEncoderChange(br);break;case Ei:e.writeCodeword(Nz),e.signalEncoderChange(Ei);break;case Br:e.writeCodeword(Lz),e.signalEncoderChange(Br);break;default:throw new Error("Illegal mode: "+i)}else Ba.isExtendedASCII(r)?(e.writeCodeword(Oz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Ba.isDigit(e)&&Ba.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),Vz=function(){function n(){}return n.prototype.getEncodingMode=function(){return oi},n.prototype.encode=function(e){var t=new At;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Ba.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(on);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,Vt.getCharAt(a));else if(a<=1555)t.setCharAt(0,Vt.getCharAt(Math.floor(a/250)+249)),t.insert(1,Vt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),X_=function(){function n(){}return n.prototype.getEncodingMode=function(){return Kr},n.prototype.encodeMaximal=function(e){for(var t=new At,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(t.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(HM),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new At;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new At;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var d=t.length();if(d%3===0){var f=Ba.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Ux)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Ux),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Ux)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(on)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new At;return a.append(r),a.append(i),a.toString()},n}(),jz=function(){function n(){}return n.prototype.getEncodingMode=function(){return Br},n.prototype.encode=function(e){for(var t=new At;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=Ba.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}t.append(Vt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(on)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Vt.getCharAt(e-64)):Ba.illegalCharacter(Vt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new At;return p.append(c),t>=2&&p.append(d),t>=3&&p.append(f),p.toString()},n}(),Uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(){function n(e,t,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var s,o;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=Hz($z),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(t===1&&f.rectangular)&&!(t===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),zz=function(n){Uz(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Kt),$z=[new Kt(!1,3,5,8,8,1),new Kt(!1,5,7,10,10,1),new Kt(!0,5,7,16,6,1),new Kt(!1,8,10,12,12,1),new Kt(!0,10,11,14,6,2),new Kt(!1,12,12,14,14,1),new Kt(!0,16,14,24,10,1),new Kt(!1,18,14,16,16,1),new Kt(!1,22,18,18,18,1),new Kt(!0,22,18,16,10,2),new Kt(!1,30,20,20,20,1),new Kt(!0,32,24,16,14,2),new Kt(!1,36,24,22,22,1),new Kt(!1,44,28,24,24,1),new Kt(!0,49,28,22,14,2),new Kt(!1,62,36,14,14,4),new Kt(!1,86,42,16,16,4),new Kt(!1,114,48,18,18,4),new Kt(!1,144,56,20,20,4),new Kt(!1,174,68,22,22,4),new Kt(!1,204,84,24,24,4,102,42),new Kt(!1,280,112,14,14,16,140,56),new Kt(!1,368,144,16,16,16,92,36),new Kt(!1,456,192,18,18,16,114,48),new Kt(!1,576,224,20,20,16,144,56),new Kt(!1,696,272,22,22,16,174,68),new Kt(!1,816,336,24,24,16,136,56),new Kt(!1,1050,408,18,18,36,175,68),new Kt(!1,1304,496,20,20,36,163,62),new zz],Gz=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),r=new At,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new At,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Kt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),Wz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yz=function(n){Wz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return br},e.prototype.encode=function(t){for(var r=new At;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=Ba.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(on);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Ba.illegalCharacter(Vt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Bz),t.getNewEncoding()<0&&t.signalEncoderChange(on)},e}(X_),qz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xz=function(n){qz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ei},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(X_),Ba=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=kI+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new X_,o=[new Fz,s,new Xz,new Yz,new jz,new Vz],c=new Gz(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(NI)&&e.endsWith(BI)?(c.writeCodeword(Mz),c.setSkipAtEnd(2),c.pos+=NI.length):e.startsWith(LI)&&e.endsWith(BI)&&(c.writeCodeword(Pz),c.setSkipAtEnd(2),c.pos+=LI.length);var d=on;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==on&&d!==oi&&d!==Br&&c.writeCodeword("");var g=c.getCodewords();for(g.length()<p&&g.append(kI);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===br&&i===br){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return on}else if(r===Br&&i===Br){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return on}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===on?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Cr.fill(s,0),Cr.fill(o,0);var c=this.findMinimums(i,o,Ct.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[on]===c)return on;if(d===1){if(s[oi]>0)return oi;if(s[Br]>0)return Br;if(s[Ei]>0)return Ei;if(s[br]>0)return br}return Kr}var f=e.charCodeAt(t+a);if(a++,this.isDigit(f)?i[on]+=.5:this.isExtendedASCII(f)?(i[on]=Math.ceil(i[on]),i[on]+=2):(i[on]=Math.ceil(i[on]),i[on]++),this.isNativeC40(f)?i[Kr]+=2/3:this.isExtendedASCII(f)?i[Kr]+=8/3:i[Kr]+=4/3,this.isNativeText(f)?i[Ei]+=2/3:this.isExtendedASCII(f)?i[Ei]+=8/3:i[Ei]+=4/3,this.isNativeX12(f)?i[br]+=2/3:this.isExtendedASCII(f)?i[br]+=13/3:i[br]+=10/3,this.isNativeEDIFACT(f)?i[Br]+=3/4:this.isExtendedASCII(f)?i[Br]+=17/4:i[Br]+=13/4,this.isSpecialB256(f)?i[oi]+=4:i[oi]++,a>=4){if(Cr.fill(s,0),Cr.fill(o,0),this.findMinimums(i,o,Ct.MAX_VALUE,s),o[on]<this.min(o[oi],o[Kr],o[Ei],o[br],o[Br]))return on;if(o[oi]<o[on]||o[oi]+1<this.min(o[Kr],o[Ei],o[br],o[Br]))return oi;if(o[Br]+1<this.min(o[oi],o[Kr],o[Ei],o[br],o[on]))return Br;if(o[Ei]+1<this.min(o[oi],o[Kr],o[Br],o[br],o[on]))return Ei;if(o[br]+1<this.min(o[oi],o[Kr],o[Br],o[Ei],o[on]))return br;if(o[Kr]+1<this.min(o[on],o[oi],o[Br],o[Ei])){if(o[Kr]<o[br])return Kr;if(o[Kr]===o[br]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return br;if(!this.isNativeX12(g))break;p++}return Kr}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,Cr.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ct.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Hx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FI=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return wa.encode(e,this.charset)!=null}catch{return!1}},n}(),Kz=function(){function n(e,t,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new FI(Tz.forName(D))}),this.encoders=[];var f=[];f.push(new FI(Cz.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var x=(i=void 0,Hx(f)),b=x.next();!b.done;b=x.next()){var A=b.value,S=e.charAt(g),T=S.charCodeAt(0);if(T===r||A.canEncode(S)){y=!0;break}}}catch(D){i={error:D}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!y)try{for(var I=(s=void 0,Hx(this.ENCODERS)),R=I.next();!R.done;R=I.next()){var A=R.value;if(A.canEncode(e.charAt(g))){f.push(A),y=!0;break}}}catch(D){s={error:D}}finally{try{R&&!R.done&&(o=I.return)&&o.call(I)}finally{if(s)throw s.error}}y||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var P=0;try{for(var B=Hx(f),O=B.next();!O.done;O=B.next()){var A=O.value;this.encoders[P++]=A}}catch(D){c={error:D}}finally{try{O&&!O.done&&(d=B.return)&&d.call(B)}finally{if(c)throw c.error}}}var C=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){C=g;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return wa.encode(Vt.getCharAt(e),this.encoders[t].name)},n}(),Qz=3,Zz=function(){function n(e,t,r){this.fnc1=r;var i=new Kz(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new At,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||t.canEncode(o,f))&&this.addEdge(r,i+1,new VI(o,t,f,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new VI[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],r);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var c=-1,d=Ct.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=t.encode(g.c,g.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],s=0;s<b.length;s++)b[s]=p[s];return b},n}(),VI=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=Qz),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),Jz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var jI;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(jI||(jI={}));(function(n){Jz(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Zz);var e$=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),UI=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),t$=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),n$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K_=function(n){n$(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ct.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(t$),r$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),i$=function(n){r$(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(K_);function a$(n,e,t){return new i$(n,e,t)}function _h(n,e,t){return new K_(n,e,t)}var s$=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Cl=0,Fm=1,ya=2,zM=3,_s=4,o$=new K_(null,0,0),zx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],l$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function c$(n){var e,t;try{for(var r=l$(n),i=r.next();!i.done;i=r.next()){var a=i.value;Cr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Cl][_s]=0,n[Fm][_s]=0,n[Fm][Cl]=28,n[zM][_s]=0,n[ya][_s]=0,n[ya][Cl]=15,n}var $M=c$(Cr.createInt32Array(6,6)),u$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d$=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=zx[this.mode][e];i=_h(i,a&65535,a>>16),r+=a>>16}var s=e===ya?4:5;return i=_h(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ya?4:5;return r=_h(r,$M[this.mode][e],i),r=_h(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===_s||this.mode===ya){var a=zx[r][Cl];t=_h(t,a&65535,a>>16),i+=a>>16,r=Cl}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(t,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=a$(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(zx[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new jr;try{for(var o=u$(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return Vt.format("%s bits=%d bytes=%d",s$[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(o$,Cl,0,0),n}();function f$(n){var e=Vt.getCharCode(" "),t=Vt.getCharCode("."),r=Vt.getCharCode(",");n[Cl][e]=1;for(var i=Vt.getCharCode("Z"),a=Vt.getCharCode("A"),s=a;s<=i;s++)n[Cl][s]=s-a+2;n[Fm][e]=1;for(var o=Vt.getCharCode("z"),c=Vt.getCharCode("a"),s=c;s<=o;s++)n[Fm][s]=s-c+2;n[ya][e]=1;for(var d=Vt.getCharCode("9"),f=Vt.getCharCode("0"),s=f;s<=d;s++)n[ya][s]=s-f+2;n[ya][r]=12,n[ya][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[zM][Vt.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)Vt.getCharCode(y[g])>0&&(n[_s][Vt.getCharCode(y[g])]=g);return n}var $x=f$(Cr.createInt32Array(5,256)),Lg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h$=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Vt.getCharCode(" "),t=Vt.getCharCode(`
`),r=UI.singletonList(d$.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Vt.getCharCode("\r"):a=s===t?2:0;break;case Vt.getCharCode("."):a=s===e?3:0;break;case Vt.getCharCode(","):a=s===e?4:0;break;case Vt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=UI.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=Lg(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,t,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=$x[e.getMode()][i]>0,s=null,o=0;o<=_s;o++){var c=$x[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===ya){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&$M[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||$x[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var o=Lg(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,t,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(_s,r)),e.getMode()!==_s&&i.push(a.shiftAndAppend(_s,r)),r===3||r===4){var s=a.latchAndAppend(ya,16-r).latchAndAppend(ya,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var o=Lg(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(S){return S!==A}))};try{for(var g=(i=void 0,Lg(s)),y=g.next();!y.done;y=g.next()){var x=y.value,b=p(x);if(b==="break")break}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){t={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n}(),p$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new h$(e).encode(),a=Ct.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new rt(Vt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(c,o),f=n.WORD_SIZE[c];var g=d-d%f;if(p=n.stuffBits(i,f),p.getSize()+a>g)throw new rt("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new rt("Data to large for user specified layer")}else{f=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new rt("Data too large for an Aztec code");if(o=y<=3,c=o?y+1:y,d=n.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==n.WORD_SIZE[c])&&(f=n.WORD_SIZE[c],p=n.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var x=n.generateCheckWords(p,d,f),b=p.getSize()/f,A=n.generateModeMessage(o,c,b),S=(o?11:14)+c*4,T=new Int32Array(S),I;if(o){I=S;for(var y=0;y<T.length;y++)T[y]=y}else{I=S+1+2*Ct.truncDivision(Ct.truncDivision(S,2)-1,15);for(var R=Ct.truncDivision(S,2),P=Ct.truncDivision(I,2),y=0;y<R;y++){var B=y+Ct.truncDivision(y,15);T[R-y-1]=P-B-1,T[R+y]=P+B+1}}for(var O=new ks(I),y=0,C=0;y<c;y++){for(var D=(c-y)*4+(o?9:12),V=0;V<D;V++)for(var L=V*2,M=0;M<2;M++)x.get(C+L+M)&&O.set(T[y*2+M],T[y*2+V]),x.get(C+D*2+L+M)&&O.set(T[y*2+V],T[S-1-y*2-M]),x.get(C+D*4+L+M)&&O.set(T[S-1-y*2-M],T[S-1-y*2-V]),x.get(C+D*6+L+M)&&O.set(T[S-1-y*2-V],T[y*2+M]);C+=D*8}if(n.drawModeMessage(O,o,I,A),o)n.drawBullsEye(O,Ct.truncDivision(I,2),5);else{n.drawBullsEye(O,Ct.truncDivision(I,2),7);for(var y=0,V=0;y<Ct.truncDivision(S,2)-1;y+=15,V+=16)for(var M=Ct.truncDivision(I,2)&1;M<I;M+=2)O.set(Ct.truncDivision(I,2)-V,M),O.set(Ct.truncDivision(I,2)+V,M),O.set(M,Ct.truncDivision(I,2)-V),O.set(M,Ct.truncDivision(I,2)+V)}var F=new e$;return F.setCompact(o),F.setSize(I),F.setLayers(c),F.setCodeWords(b),F.setMatrix(O),F},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new jr;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ct.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+Ct.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,o=new UM(n.getGF(r)),c=Ct.truncDivision(t,r),d=n.bitsToWords(e,r,c);o.encode(d,c-s);var f=t%r,p=new jr;p.appendBits(0,f);try{for(var g=p$(Array.from(d)),y=g.next();!y.done;y=g.next()){var x=y.value;p.appendBits(x,r)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,c=0;c<t;c++)o|=e.get(a*t+c)?1<<t-c-1:0;i[a]=o}return i},n.getGF=function(e){switch(e){case 4:return Bi.AZTEC_PARAM;case 6:return Bi.AZTEC_DATA_6;case 8:return Bi.AZTEC_DATA_8;case 10:return Bi.AZTEC_DATA_10;case 12:return Bi.AZTEC_DATA_12;default:throw new rt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new jr,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(o|=1<<t-1-c);(o&a)===a?(r.appendBits(o&a,t),s--):(o&a)===0?(r.appendBits(o|1,t),s--):r.appendBits(o,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const g$=({onDetected:n,onError:e})=>{const t=N.useRef(null),r=N.useRef(new mz),i=N.useRef(!1);return N.useEffect(()=>{const a=t.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),n(f.getText())),p&&!(p instanceof _e)&&(r.current.reset(),e(p.message||""))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`
: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[n,e]),v.jsx(ie,{"data-testid":"barcode-scanner-container",children:v.jsx("video",{ref:t,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},m$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},y$=({onScan:n,onScanError:e})=>{const[t,r]=N.useState(!1),{setGlobalError:i}=N.useContext(ni)||{setGlobalError:()=>{}},a=o=>{n(o),r(!1)},s=o=>{i(o),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(fN,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:""}),v.jsx(hN,{open:t,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:v.jsxs(ie,{sx:m$,children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(ne,{id:"scanner-modal-title",variant:"h6",component:"h2",children:""}),v.jsx(di,{onClick:()=>r(!1),children:v.jsx(ne,{variant:"h6",children:""})})]}),v.jsx(g$,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function v$(){const[n,e]=N.useState(""),t=C0(),r=a=>{console.log("[BookAdd] handleScanDetected :",a),e(a)},i=a=>{t(`/book/${a}`)};return v.jsxs(ie,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(G1,{title:"",subtitle:"","data-testid":"book-add-header"}),v.jsxs(ie,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(y$,{onScan:r,onScanError:a=>console.error(a)}),v.jsx(Dj,{isbn:n,onBookAdded:i})]})]})}const pl={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},Fa=pl.NONE,x$=n=>n!=null&&n>pl.NONE,$h=n=>(n==null?void 0:n.rating)||Fa,HI=n=>x$(n)?n:0,Vm=n=>{const e={[pl.NONE]:"",[pl.ONE]:"",[pl.TWO]:"",[pl.THREE]:"",[pl.FOUR]:"",[pl.FIVE]:""};return e[n]||e[Fa]},Q_=n=>{const{user:e}=rr(),t=N.useContext(ni),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=N.useState([]),[s,o]=N.useState(!0),[c,d]=N.useState(null),f=N.useCallback(async()=>{if(!e||!n){a([]),o(!1);return}try{o(!0),d(null);const x=pr(Ht,"books",n,"memos"),b=jn(x,z1("createdAt","desc")),T=(await Jn(b)).docs.map(I=>({id:I.id,...I.data(),rating:I.data().rating||Fa})).sort((I,R)=>{var O,C,D,V;const P=HI(I.rating),B=HI(R.rating);return P!==B?B-P:new Date(((C=(O=R.createdAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||R.createdAt||0)-new Date(((V=(D=I.createdAt)==null?void 0:D.toDate)==null?void 0:V.call(D))||I.createdAt||0)});a(T)}catch(x){console.error("Error fetching memos:",x),r(""),d("")}finally{o(!1)}},[e==null?void 0:e.uid,n]),p=N.useCallback(async x=>{if(!e||!n)throw new Error("ID");try{const b=pr(Ht,"books",n,"memos"),A=await g0(b,{...x,userId:e.uid,createdAt:Ti(),updatedAt:Ti()}),S={id:A.id,...x,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(T=>[S,...T]),A.id}catch(b){throw console.error("Error adding memo:",b),r(""),b}},[e==null?void 0:e.uid,n]),g=N.useCallback(async(x,b)=>{if(!e||!n||!x)throw new Error("IDID");try{const A=bo(Ht,"books",n,"memos",x);return await $1(A,{...b,userId:e.uid,updatedAt:Ti()}),a(S=>S.map(I=>I.id===x?{...I,...b,userId:e.uid,updatedAt:new Date}:I)),!0}catch(A){throw console.error("Error updating memo:",A),r(""),A}},[e==null?void 0:e.uid,n]),y=N.useCallback(async x=>{if(!e||!n||!x)throw new Error("IDID");try{const b=bo(Ht,"books",n,"memos",x);return await oj(b),a(A=>A.filter(S=>S.id!==x)),!0}catch(b){throw console.error("Error deleting memo:",b),r(""),b}},[e==null?void 0:e.uid,n]);return N.useEffect(()=>{f()},[f]),{memos:i,loading:s,error:c,fetchMemos:f,addMemo:p,updateMemo:g,deleteMemo:y}},zI=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${t}/${r}/${i}`}catch{return""}},w$=({memo:n,onEdit:e,onDelete:t,onClick:r})=>{const i=v1("(max-width:600px)"),[a,s]=N.useState(!1),d=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),f=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,p=x=>{x&&x.stopPropagation(),s(!1),typeof e=="function"&&e(n,!0)},g=x=>{x&&x.stopPropagation(),s(!1),t(n.id)},y=nR({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?v.jsxs(ie,{position:"relative",...y,sx:{mb:2},children:[v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[v.jsxs(Nn,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden"},children:[v.jsx(ne,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:d}),n.comment&&v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:n.comment}),$h(n)>0&&v.jsx(Nd,{value:$h(n),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),v.jsx(vT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:v.jsxs(r0,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&v.jsxs(ne,{variant:"caption",children:["p.",n.page]}),f&&v.jsx(ne,{variant:"caption",color:"text.secondary",children:zI(f)}),Array.isArray(n.tags)&&n.tags.map((x,b)=>v.jsx(mn,{label:x,size:"small",color:"secondary"},b))]})})]}),a&&v.jsxs(ie,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[v.jsx(di,{onClick:p,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:v.jsx(A2,{})}),v.jsx(di,{onClick:g,sx:{bgcolor:"error.main",color:"white"},size:"large",children:v.jsx(b2,{})})]})]}):v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[v.jsxs(Nn,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden"},children:[v.jsx(ne,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),n.comment&&v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.comment}),$h(n)>0&&v.jsx(Nd,{value:$h(n),readOnly:!0,size:"small",sx:{mt:.5}})]}),v.jsxs(vT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[v.jsxs(r0,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&v.jsxs(ne,{variant:"caption",children:["p.",n.page]}),f&&v.jsx(ne,{variant:"caption",color:"text.secondary",children:zI(f)}),Array.isArray(n.tags)&&n.tags.map((x,b)=>v.jsx(mn,{label:x,size:"small",color:"secondary"},b))]}),v.jsxs(ie,{sx:{display:{xs:"none",sm:"flex"}},children:[v.jsx(di,{"aria-label":"edit",onClick:p,size:"small","data-testid":"memo-edit-button",children:v.jsx(A2,{fontSize:"small"})}),v.jsx(di,{"aria-label":"delete",onClick:g,size:"small","data-testid":"memo-delete-button",children:v.jsx(b2,{fontSize:"small"})})]})]})]})},_$=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},GM=({open:n,memo:e,bookId:t,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:o}=N.useContext(ni),{updateMemo:c,deleteMemo:d}=Q_(t),[f,p]=N.useState(s?"edit":"view"),[g,y]=N.useState(null),[x,b]=N.useState(!1),[A,S]=N.useState("");Ci.useEffect(()=>{e&&(y({...e,rating:$h(e)}),p(s?"edit":"view"),b(!1),S(""))},[e,s]);const T=()=>{y(null),p("view"),b(!1),S(""),r()},I=async P=>{if(P.preventDefault(),!g||!g.text.trim())return;let B=g.tags||[];A&&!B.includes(A)&&(B=[...B,A]);try{await c(g.id,{text:g.text,comment:g.comment,page:Number(g.page)||null,tags:B,rating:g.rating||Fa}),T(),i&&i()}catch(O){console.error("Error updating memo: ",O),o("")}},R=async P=>{try{await d(P),T(),a&&a()}catch(B){console.error("Error deleting memo: ",B),o("")}};return e?v.jsxs(v.Fragment,{children:[v.jsxs($a,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[v.jsx(Ds,{"data-testid":"memo-detail-title",children:""}),v.jsx(Ga,{children:f==="view"?v.jsxs(v.Fragment,{children:[v.jsx(ne,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:g==null?void 0:g.text}),(g==null?void 0:g.comment)&&v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.comment}),(g==null?void 0:g.rating)&&g.rating>0&&v.jsxs(ie,{sx:{mb:1},children:[v.jsx(Nd,{value:g.rating,readOnly:!0,size:"small",sx:{mb:.5}}),v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:Vm(g.rating)})]}),v.jsx(r0,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(g==null?void 0:g.tags)&&g.tags.map((P,B)=>v.jsx(mn,{label:P,size:"small",color:"secondary"},B))}),(g==null?void 0:g.page)&&v.jsxs(ne,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",g.page]}),(g==null?void 0:g.createdAt)&&v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:_$(g.createdAt)})]}):v.jsxs(ie,{component:"form",onSubmit:I,sx:{mt:1},children:[v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:4,value:(g==null?void 0:g.text)||"",onChange:P=>y({...g,text:P.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:2,value:(g==null?void 0:g.comment)||"",onChange:P=>y({...g,comment:P.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(wt,{label:"",type:"number",value:(g==null?void 0:g.page)||"",onChange:P=>y({...g,page:P.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(E2,{component:"legend",children:""}),v.jsx(Nd,{value:(g==null?void 0:g.rating)||Fa,onChange:(P,B)=>{y({...g,rating:B||Fa})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),(g==null?void 0:g.rating)&&g.rating>0&&v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Vm(g.rating)})]}),v.jsx(yo,{multiple:!0,freeSolo:!0,options:[],value:(g==null?void 0:g.tags)||[],getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:(P,B)=>{const O=(B||[]).map(C=>{if(typeof C=="string")return C;if(C&&typeof C=="object"){if("inputValue"in C&&C.inputValue)return C.inputValue;if("tag"in C&&C.tag)return C.tag}return""}).filter(Boolean);y({...g,tags:O})},inputValue:A,onInputChange:(P,B)=>S(B),renderInput:P=>v.jsx(wt,{...P,label:"",margin:"normal",fullWidth:!0,placeholder:": ,,",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsx(Wa,{children:f==="view"?v.jsxs(v.Fragment,{children:[v.jsx(Ke,{onClick:()=>p("edit"),"data-testid":"memo-edit-button",children:""}),v.jsx(Ke,{onClick:()=>b(!0),color:"error","data-testid":"memo-delete-button",children:""}),v.jsx(Ke,{onClick:T,"data-testid":"memo-close-button",children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx(Ke,{onClick:()=>p("view"),"data-testid":"memo-cancel-button",children:""}),v.jsx(Ke,{onClick:I,variant:"contained","data-testid":"memo-update-button",children:""})]})})]}),v.jsxs($a,{open:x,onClose:()=>b(!1),"data-testid":"memo-delete-dialog",children:[v.jsx(Ds,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx(Ga,{children:v.jsx(ne,{children:""})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>b(!1),"data-testid":"memo-delete-cancel-button",children:""}),v.jsx(Ke,{onClick:()=>{R(g==null?void 0:g.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]})]}):null},b$=({bookId:n,onMemoUpdated:e})=>{const{setGlobalError:t}=N.useContext(ni),{memos:r,loading:i,deleteMemo:a}=Q_(n),[s,o]=N.useState(null),[c,d]=N.useState(!1),[f,p]=N.useState(!1),[g,y]=N.useState(null),[x,b]=N.useState(!1),A=(B,O=!1)=>{o(B),b(O),d(!0)},S=B=>{const O=r.find(C=>C.id===B);O&&(y(O),p(!0))},T=async()=>{if(g)try{await a(g.id),p(!1),y(null)}catch(B){console.error("Error deleting memo:",B),t("")}},I=()=>{o(null),d(!1)},R=()=>{p(!1),y(null)},P=()=>{e&&e()};return i?v.jsx(ne,{children:"..."}):r.length===0?v.jsx(ne,{children:""}):v.jsxs(v.Fragment,{children:[v.jsx(ie,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(B=>v.jsx(w$,{memo:B,onEdit:(O,C)=>A(O,C),onDelete:S,onClick:O=>A(O,!1)},B.id))}),v.jsx(GM,{open:c,memo:s,bookId:n,onClose:I,onUpdate:P,onDelete:P,editMode:x}),v.jsxs($a,{open:f,onClose:R,"data-testid":"memo-delete-dialog",children:[v.jsx(Ds,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx(Ga,{children:v.jsx(ne,{children:""})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:R,"data-testid":"memo-delete-cancel-button",children:""}),v.jsx(Ke,{onClick:T,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]})]})},$I=({onTextDetected:n,disabled:e=!1})=>{const[t,r]=N.useState(!1),[i,a]=N.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] :",c),n(c.trim())):a("")}else a("")}catch(c){console.error("[CameraPasteOCR] :",c),a("")}finally{r(!1)}},o=()=>{a(null)};return v.jsxs(v.Fragment,{children:[v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(pN,{}),onClick:s,disabled:e||t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:t?"...":""}),v.jsx(ld,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:v.jsx(za,{onClose:o,severity:"error",children:i})})]})};var GI={};const fi={ERROR:0,WARN:1,INFO:2,DEBUG:3},A$=()=>{let n,e=!1;try{if(typeof window<"u"){const t=window.__VITE_ENV__||{};n=t.VITE_LOG_LEVEL,e=t.PROD}}catch{}return typeof process<"u"&&GI&&(n||(n=GI.VITE_LOG_LEVEL),e||(e=!0)),n&&fi[n.toUpperCase()]!==void 0?fi[n.toUpperCase()]:e?fi.WARN:fi.DEBUG},E$=A$(),ur={AUTH:" AUTH",BOOK:" BOOK",MEMO:" MEMO",STATUS:" STATUS",FIREBASE:" FIREBASE"},S$=(n,e,t,r=null)=>{const i=new Date().toISOString();let s=`${{[fi.ERROR]:"",[fi.WARN]:"",[fi.INFO]:"",[fi.DEBUG]:""}[n]||""} ${e} [${i}] ${t}`;return r!=null&&(s+=`
  Data: ${JSON.stringify(r,null,2)}`),s},Bg=(n,e,t,r=null)=>{if(n>E$)return;const i=S$(n,e,t,r);switch(n){case fi.ERROR:console.error(i);break;case fi.WARN:console.warn(i);break;case fi.INFO:console.info(i);break;case fi.DEBUG:console.log(i);break;default:console.log(i)}},yt={error:(n,e,t)=>Bg(fi.ERROR,n,e,t),warn:(n,e,t)=>Bg(fi.WARN,n,e,t),info:(n,e,t)=>Bg(fi.INFO,n,e,t),debug:(n,e,t)=>Bg(fi.DEBUG,n,e,t),auth:{error:(n,e)=>yt.error(ur.AUTH,n,e),warn:(n,e)=>yt.warn(ur.AUTH,n,e),info:(n,e)=>yt.info(ur.AUTH,n,e),debug:(n,e)=>yt.debug(ur.AUTH,n,e)},book:{error:(n,e)=>yt.error(ur.BOOK,n,e),warn:(n,e)=>yt.warn(ur.BOOK,n,e),info:(n,e)=>yt.info(ur.BOOK,n,e),debug:(n,e)=>yt.debug(ur.BOOK,n,e)},memo:{error:(n,e)=>yt.error(ur.MEMO,n,e),warn:(n,e)=>yt.warn(ur.MEMO,n,e),info:(n,e)=>yt.info(ur.MEMO,n,e),debug:(n,e)=>yt.debug(ur.MEMO,n,e)},status:{error:(n,e)=>yt.error(ur.STATUS,n,e),warn:(n,e)=>yt.warn(ur.STATUS,n,e),info:(n,e)=>yt.info(ur.STATUS,n,e),debug:(n,e)=>yt.debug(ur.STATUS,n,e)},firebase:{error:(n,e)=>yt.error(ur.FIREBASE,n,e),warn:(n,e)=>yt.warn(ur.FIREBASE,n,e),info:(n,e)=>yt.info(ur.FIREBASE,n,e),debug:(n,e)=>yt.debug(ur.FIREBASE,n,e)}},T$=({bookId:n,bookTags:e=[],onMemoAdded:t,onClose:r})=>{const{user:i}=rr(),{setGlobalError:a}=N.useContext(ni),{addMemo:s}=Q_(n),[o,c]=N.useState(""),[d,f]=N.useState(""),[p,g]=N.useState(""),[y,x]=N.useState([]),[b,A]=N.useState(""),[S,T]=N.useState(Fa),[I,R]=N.useState(!1),{tagOptions:P,fetchTagHistory:B,saveTagsToHistory:O}=Ao("memo",i);N.useEffect(()=>{B()},[B]);const C=async M=>{if(M.preventDefault(),!o.trim()||I)return;R(!0),yt.memo.debug("handleSubmit",{text:o,comment:d,page:p,tags:y});let F=y;b&&!y.includes(b)&&(F=[...y,b]),yt.memo.debug("",F);try{yt.memo.debug("addMemo");const q=await s({text:o,comment:d,page:Number(p)||null,tags:F,rating:S||Fa});yt.memo.info("addMemo",{memoId:q}),await O(F),yt.memo.debug(""),c(""),f(""),g(""),x([]),A(""),T(Fa),yt.memo.debug(""),t&&(yt.memo.debug("onMemoAdded"),t())}catch(q){yt.memo.error("Error adding memo",q),a("")}finally{R(!1)}},D=()=>{r&&r()},V=M=>{yt.memo.info("OCR",{detectedText:M}),c(M)};return r?v.jsxs(v.Fragment,{children:[v.jsx(Ds,{"data-testid":"memo-add-dialog-title",children:""}),v.jsx(Ga,{children:v.jsxs(ie,{component:"form",onSubmit:C,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:M=>c(M.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx($I,{onTextDetected:V}),v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:M=>f(M.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(wt,{label:"",type:"number",value:p,onChange:M=>g(M.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(E2,{component:"legend",children:""}),v.jsx(Nd,{value:S,onChange:(M,F)=>{T(F||Fa)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),S>0&&v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Vm(S)})]}),v.jsx(yo,{multiple:!0,freeSolo:!0,options:P,value:y,getOptionLabel:M=>typeof M=="string"?M:M.inputValue||M.tag||"",onChange:async(M,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:b,onInputChange:(M,F)=>A(F),renderInput:M=>v.jsx(wt,{...M,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...M.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:D,"data-testid":"memo-add-cancel",disabled:I,children:""}),v.jsx(Ke,{onClick:C,variant:"contained","data-testid":"memo-add-submit",disabled:I,children:I?"...":""})]})]}):v.jsxs(ie,{component:"form",onSubmit:C,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:M=>c(M.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx($I,{onTextDetected:V}),v.jsx(wt,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:M=>f(M.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(wt,{label:"",type:"number",value:p,onChange:M=>g(M.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(E2,{component:"legend",children:""}),v.jsx(Nd,{value:S,onChange:(M,F)=>{T(F||Fa)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),S>0&&v.jsx(ne,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Vm(S)})]}),v.jsx(yo,{multiple:!0,freeSolo:!0,options:P,value:y,getOptionLabel:M=>typeof M=="string"?M:M.inputValue||M.tag||"",onChange:async(M,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:b,onInputChange:(M,F)=>A(F),renderInput:M=>v.jsx(wt,{...M,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...M.inputProps,"data-testid":"memo-tags-input"}})}),v.jsx(Ke,{type:"submit",variant:"contained",disabled:I,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:I?"...":""})]})};function WI(n){if(!n)return null;if(typeof n.toDate=="function")return n.toDate();try{return new Date(n)}catch{return null}}function C$(n){if(!Array.isArray(n)||n.length===0)return{};const e=n.find(a=>(a==null?void 0:a.status)===ut.READING||(a==null?void 0:a.status)===ut.RE_READING),t=n.find(a=>(a==null?void 0:a.status)===ut.FINISHED),r=n.find(a=>(a==null?void 0:a.status)===ut.RE_READING),i={};return e!=null&&e.changedAt&&(i.readingStartedAt=e.changedAt),t!=null&&t.changedAt&&(i.finishedAt=t.changedAt),r!=null&&r.changedAt&&(i.reReadingStartedAt=r.changedAt),i}function I$(n){var e;return!Array.isArray(n)||n.length===0?null:((e=n[0])==null?void 0:e.status)??null}function D$(n){if(!n)return null;const{readingStartedAt:e,finishedAt:t}=n;if(!e||!t)return null;const r=WI(e),i=WI(t);if(!r||!i)return null;const a=Math.abs(i-r);return Math.ceil(a/(1e3*60*60*24))}const Z_=n=>{const{user:e}=rr(),t=N.useContext(ni),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=N.useState([]),[s,o]=N.useState(!0),[c,d]=N.useState(null),f=N.useCallback(()=>{if(!e||!n)return yt.status.debug("No user or bookId",{user:!!e,bookId:n}),o(!1),()=>{};try{yt.status.debug("Setting up listener for bookId",{bookId:n}),o(!0),d(null);const S=pr(Ht,"books",n,"statusHistory"),T=jn(S);return lj(T,R=>{yt.status.debug("Snapshot received",{size:R.size,empty:R.empty,bookId:n});const P=R.docs.map(B=>({id:B.id,...B.data()}));P.sort((B,O)=>{var V,L;const C=(V=B.changedAt)!=null&&V.toDate?B.changedAt.toDate():new Date(B.changedAt||0);return((L=O.changedAt)!=null&&L.toDate?O.changedAt.toDate():new Date(O.changedAt||0))-C}),a(P),o(!1)},R=>{if(yt.status.error("Error fetching status history",R),yt.status.error("Error details",{code:R.code,message:R.message,bookId:n,userId:e.uid}),R.code==="permission-denied"){yt.status.warn("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r(""),d(""),o(!1)})}catch(S){return yt.status.error("Error setting up status history listener",S),r(""),d(""),o(!1),()=>{}}},[n,e,r]),p=N.useCallback(async(S,T,I=null)=>{if(!e||!n||!Lm(S))throw new Error("");try{const R=pr(Ht,"books",n,"statusHistory"),P={status:S,previousStatus:T||null,changedAt:Ti(),changedBy:e.uid,notes:I||null,createdAt:Ti()};return(await g0(R,P)).id}catch(R){throw yt.status.error("Error adding status history",R),r(""),R}},[n,e,r]),g=N.useCallback(()=>i.length?C$(i):{},[i]),y=N.useCallback(()=>I$(i),[i]),x=N.useCallback(()=>D$(g()),[g]),b=N.useCallback(async(S,T,I)=>{if(!e||!n){yt.status.debug("No user or bookId for manual history addition",{user:!!e,bookId:n});return}if(!Lm(T))throw new Error("Invalid status");try{yt.status.info("Adding manual status history",{bookId:n,date:S,status:T,previousStatus:I,userId:e.uid});const R=pr(Ht,"books",n,"statusHistory"),P={status:T,previousStatus:I||"",changedAt:S,userId:e.uid};await g0(R,P),yt.status.info("Manual status history added successfully")}catch(R){throw yt.status.error("Error adding manual status history",R),r(""),R}},[e,n,r]),A=i.length>0?i[0]:null;return N.useEffect(()=>f(),[n,e]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:b,latestHistory:A,getImportantDates:g,getCurrentStatus:y,getReadingDuration:x,refetch:f}},R$=({book:n,bookId:e,onStatusChange:t})=>{const r=N.useContext(ni),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=Z_(e),[s,o]=N.useState(!1),[c,d]=N.useState(null),f=async x=>{if(!n||!Lm(x))return;o(!0),d(null);const b=bo(Ht,"books",e),A=n.status||Ar;try{const S={status:x,updatedAt:Ti()};x===ut.FINISHED&&(S.finishedAt=Ti()),await $1(b,S);try{await a(x,A)}catch(T){console.error("Error adding status history:",T)}t(x)}catch(S){console.error("Error updating status:",S),i("")}finally{o(!1)}},p=x=>{d(x.currentTarget)},g=()=>{d(null)};if(!n)return null;const y=n.status||Ar;return v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(mn,{label:Ps(y),color:gs(y),"data-testid":"book-status-chip"}),v.jsx(Ke,{onClick:p,variant:"outlined",disabled:s,endIcon:v.jsx(gN,{}),"data-testid":"book-status-change-button",children:s?"...":""}),v.jsx(mN,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:H_.map(x=>v.jsx(pn,{onClick:()=>f(x),disabled:x===y,"data-testid":`status-menu-item-${x}`,children:Ps(x)},x))})]})},O$=({book:n,bookId:e,onStatusChange:t})=>n?v.jsxs(ie,{"data-testid":"book-info",children:[v.jsx(ie,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:v.jsx(R$,{book:n,bookId:e,onStatusChange:t})}),v.jsx(ie,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?v.jsx("img",{src:n.coverImageUrl,alt:`${n.title}`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):v.jsx(ie,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:v.jsx(ne,{variant:"body1",color:"text.secondary",children:""})})}),v.jsxs(ie,{sx:{mb:2},"data-testid":"book-details",children:[v.jsx(ne,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),v.jsx(ne,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&v.jsxs(ne,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:[": ",n.publisher]}),n.publishedDate&&v.jsxs(ne,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-published-date",children:[": ",n.publishedDate]}),n.isbn&&v.jsxs(ne,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-isbn",children:["ISBN: ",n.isbn]}),n.acquisitionType&&n.acquisitionType!==Ha.UNKNOWN&&v.jsx(ie,{sx:{mb:1},children:v.jsx(mn,{label:`: ${DM(n.acquisitionType)}`,color:"primary",variant:"outlined",size:"small","data-testid":"book-acquisition-type"})})]})]}):null,M$=({book:n,bookId:e,onTagsChange:t})=>{const{user:r}=rr(),i=N.useContext(ni),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=N.useState(!1),[c,d]=N.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=Ao("book",r);N.useEffect(()=>{p()},[p]);const y=()=>{d(n.tags||[]),o(!0)},x=async()=>{if(n)try{const b=bo(Ht,"books",e);await $1(b,{tags:c,updatedAt:Ti()}),await g(c),t(c),o(!1)}catch(b){console.error("Error updating tags:",b),a("")}};return n?v.jsxs(ie,{sx:{mb:2},children:[v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(ne,{variant:"h6",children:":"}),v.jsx(di,{onClick:y,size:"small","data-testid":"edit-tags-button",children:v.jsx(A2,{})})]}),v.jsx(ie,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((b,A)=>v.jsx(mn,{label:b,size:"small"},A))}),v.jsxs($a,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:""}),v.jsx(Ga,{children:v.jsx(yo,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(b,A)=>d(A),renderInput:b=>v.jsx(wt,{...b,label:"",placeholder:"",fullWidth:!0,margin:"normal"}),renderTags:(b,A)=>b.map((S,T)=>N.createElement(mn,{...A({index:T}),key:T,label:S,size:"small"}))})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>o(!1),children:""}),v.jsx(Ke,{onClick:x,variant:"contained","data-testid":"save-tags-button",children:""})]})]})]}):null},P$=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),WM={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},k$=WM;P$(WM);const N$=["localeText"],dw=N.createContext(null),YM=function(e){const{localeText:t}=e,r=Be(e,N$),{adapter:i,localeText:a}=N.useContext(dw)??{adapter:void 0,localeText:void 0},s=xt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,y=N.useMemo(()=>H({},g,a,t),[g,a,t]),x=N.useMemo(()=>{if(!c)return i||null;const S=new c({locale:p,formats:d,instance:f});if(!S.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return S},[c,p,d,f,i]),b=N.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),A=N.useMemo(()=>({utils:x,adapter:x,defaultDates:b,localeText:y}),[b,x,y]);return v.jsx(dw.Provider,{value:A,children:o})},J_=()=>{const n=N.useContext(dw);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=N.useMemo(()=>H({},k$,n.localeText),[n.localeText]);return N.useMemo(()=>H({},n,{localeText:e}),[n,e])},Wt=()=>J_().adapter,Xa=()=>J_().localeText,fw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],hw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],qM=["minDateTime","maxDateTime"],L$=[...fw,...hw,...qM],XM=n=>L$.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),B$=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],KM=(n,e)=>N.useMemo(()=>{const t=H({},n),r={},i=a=>{t.hasOwnProperty(a)&&(r[a]=t[a],delete t[a])};return B$.forEach(i),e==="date"?fw.forEach(i):e==="time"?hw.forEach(i):e==="date-time"&&(fw.forEach(i),hw.forEach(i),qM.forEach(i)),{forwardedProps:t,internalProps:r}},[n,e]),ms=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),F$=({openTo:n,defaultOpenTo:e,views:t,defaultViews:r})=>{const i=t??r;let a;if(n!=null)a=n;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},jm=(n,e,t)=>{let r=e;return r=n.setHours(r,n.getHours(t)),r=n.setMinutes(r,n.getMinutes(t)),r=n.setSeconds(r,n.getSeconds(t)),r=n.setMilliseconds(r,n.getMilliseconds(t)),r},m0=({date:n,disableFuture:e,disablePast:t,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=jm(s,s.date(void 0,o),n);t&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=n,f=n;for(s.isBefore(n,i)&&(d=i,f=null),s.isAfter(n,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},V$=(n,e)=>n.isValid(e)?e:null,Um=(n,e,t)=>e==null||!n.isValid(e)?t:e,j$=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),eb=(n,e)=>{const r=[n.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(n.addMonths(i,1))}return r},tb=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),t0=(n,e)=>{const t=n.setHours(n.date(),e==="am"?2:14);return n.format(t,"meridiem")},QM=["year","month","day"],$d=n=>QM.includes(n),YI=(n,{format:e,views:t},r)=>{if(e!=null)return e;const i=n.formats;return ms(t,["year"])?i.year:ms(t,["month"])?i.month:ms(t,["day"])?i.dayOfMonth:ms(t,["month","year"])?`${i.month} ${i.year}`:ms(t,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},U$=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>n.addDays(t,r))},ZM=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},X1=(n,e)=>{const t=[],r=n.date(void 0,"default"),i=n.startOfWeek(r),a=n.endOfWeek(r);let s=i;for(;n.isBefore(s,a);)t.push(s),s=n.addDays(s,1);return t.map(o=>n.formatByString(o,e))},JM=(n,e,t,r)=>{switch(t){case"month":return eb(n,n.date(void 0,e)).map(i=>n.formatByString(i,r));case"weekDay":return X1(n,r);case"meridiem":{const i=n.date(void 0,e);return[n.startOfDay(i),n.endOfDay(i)].map(a=>n.formatByString(a,r))}default:return[]}},qI="s",H$=["0","1","2","3","4","5","6","7","8","9"],z$=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),qI)==="0"?H$:Array.from({length:10}).map((r,i)=>n.formatByString(n.setSeconds(e,i),qI))},Xc=(n,e)=>{if(e[0]==="0")return n;const t=[];let r="";for(let i=0;i<n.length;i+=1){r+=n[i];const a=e.indexOf(r);a>-1&&(t.push(a.toString()),r="")}return t.join("")},nb=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),XI=(n,e)=>{const t=Xc(n,e);return t!==" "&&!Number.isNaN(Number(t))},rb=(n,e)=>Number(n).toString().padStart(e,"0"),e4=(n,e,t,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=n.setDate(t.longestMonth,e);return n.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=rb(a,i.maxLength)),nb(a,r)},ib=(n,e,t)=>{let r=n.value||n.placeholder;const i=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(r=Number(Xc(r,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!i&&r.length===1&&(r=`${r}`),e==="input-rtl"&&(r=`${r}`),r},KI=(n,e,t,r)=>n.formatByString(n.parse(e,t),r),$$=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,t4=(n,e,t,r)=>{if(e!=="digit")return!1;const i=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&r==="YY"?!0:n.formatByString(n.setYear(i,1),r).startsWith("0");case"month":return n.formatByString(n.startOfYear(i),r).length>1;case"day":return n.formatByString(n.startOfMonth(i),r).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),r).length>1;case"hours":return n.formatByString(n.setHours(i,1),r).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),r).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},G$=(n,e,t)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(ib(d,"non-input",t)))}const s=i.join(" "),o=a.join(" ");return n.parse(o,s)},W$=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),Y$=(n,e,t)=>{const i=n.map(a=>{const s=ib(a,t?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return t?`${i}`:i},q$=(n,e,t)=>{const r=n.date(void 0,t),i=n.endOfYear(r),a=n.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=eb(n,r).reduce((c,d)=>{const f=n.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:$$(n,c)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:n.isValid(c)?n.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=X1(n,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=n.getHours(a);return Xc(n.formatByString(n.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(Xc(n.formatByString(n.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:n.getMinutes(a)}),seconds:()=>({minimum:0,maximum:n.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},X$=(n,e,t,r)=>{switch(e.type){case"year":return n.setYear(r,n.getYear(t));case"month":return n.setMonth(r,n.getMonth(t));case"weekDay":{let i=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(i=rb(i,e.maxLength));const a=X1(n,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return n.addDays(t,c)}case"day":return n.setDate(r,n.getDate(t));case"meridiem":{const i=n.getHours(t)<12,a=n.getHours(r);return i&&a>=12?n.addHours(r,-12):!i&&a<12?n.addHours(r,12):r}case"hours":return n.setHours(r,n.getHours(t));case"minutes":return n.setMinutes(r,n.getMinutes(t));case"seconds":return n.setSeconds(r,n.getSeconds(t));default:return r}},QI={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},ZI=(n,e,t,r,i)=>[...t].sort((a,s)=>QI[a.type]-QI[s.type]).reduce((a,s)=>!i||s.modified?X$(n,s,e,a):a,r),K$=()=>navigator.userAgent.toLowerCase().includes("android"),Q$=(n,e)=>{const t={};if(!e)return n.forEach((c,d)=>{const f=d===0?null:d-1,p=d===n.length-1?null:d+1;t[d]={leftIndex:f,rightIndex:p}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const r={},i={};let a=0,s=0,o=n.length-1;for(;o>=0;){s=n.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=n.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return n.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===n.length-1?null:r[f+1];t[d]={leftIndex:p,rightIndex:g}}),{neighbors:t,startIndex:r[0],endIndex:r[n.length-1]}},pw=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(r=>r.type===n);return t===-1?null:t}return n},Z$=({adapter:n,format:e})=>{let t=10,r=e,i=n.expandFormat(e);for(;i!==r;)if(r=i,i=n.expandFormat(r),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},J$=({adapter:n,expandedFormat:e})=>{const t=[],{start:r,end:i}=n.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)t.push({start:s.index,end:a.lastIndex-1});return t},eG=(n,e,t,r)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},tG=({adapter:n,date:e,shouldRespectLeadingZeros:t,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=ZM(n,s),d=t4(n,c.contentType,c.type,s),f=t?d:c.contentType==="digit",p=n.isValid(e);let g=p?n.formatByString(e,s):"",y=null;if(f)if(d)y=g===""?n.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);y=c.maxLength,p&&(g=nb(rb(Xc(g,i),y),i))}return H({},c,{format:s,maxLength:y,value:g,placeholder:eG(n,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},nG=n=>{var y;const{adapter:e,expandedFormat:t,escapedParts:r}=n,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((x,b)=>b.length-x.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=x=>r.find(b=>b.start<=x&&b.end>=x);let g=0;for(;g<t.length;){const x=p(g),b=x!=null,A=(y=c.exec(t.slice(g)))==null?void 0:y[1];if(!b&&A!=null&&d.test(A)){let S=A;for(;S.length>0;){const T=f.exec(S)[1];S=S.slice(T.length),a.push(tG(H({},n,{now:i,token:T,startSeparator:s}))),s=""}g+=A.length}else{const S=t[g];b&&(x==null?void 0:x.start)===g||(x==null?void 0:x.end)===g||(a.length===0?s+=S:(a[a.length-1].endSeparator+=S,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},rG=({isRtl:n,formatDensity:e,sections:t})=>t.map(r=>{const i=a=>{let s=a;return n&&s!==null&&s.includes(" ")&&(s=`${s}`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),JI=n=>{let e=Z$(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=J$(H({},n,{expandedFormat:e})),r=nG(H({},n,{expandedFormat:e,escapedParts:t}));return rG(H({},n,{sections:r}))},ab=N.createContext(null),jl=()=>{const n=N.useContext(ab);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},sb=()=>N.useContext(ab),n4=N.createContext(()=>!0);function iG(){return N.useContext(n4)}const r4=N.createContext(null);function i4(){return N.useContext(r4)}const a4=N.createContext(null),s4=N.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function o4(n){const{contextValue:e,actionsContextValue:t,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=n;return v.jsx(ab.Provider,{value:e,children:v.jsx(a4.Provider,{value:t,children:v.jsx(s4.Provider,{value:r,children:v.jsx(r4.Provider,{value:i,children:v.jsx(n4.Provider,{value:a,children:v.jsx(YM,{localeText:s,children:o})})})})})})}const aG=()=>{const n=N.useContext(a4);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},l4=()=>J_().defaultDates,df=n=>{const e=Wt(),t=N.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},sG=Nl(v.jsx("path",{d:"M7 10l5 5 5-5z"})),oG=Nl(v.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),lG=Nl(v.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),cG=Nl(v.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Nl(v.jsxs(N.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const uG=Nl(v.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),dG=Nl(v.jsxs(N.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),fG=Nl(v.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function hG(n){return Rt("MuiPickersArrowSwitcher",n)}Ot("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const nr=()=>N.useContext(s4),pG=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],gG=["ownerState"],mG=["ownerState"],yG=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),vG=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),eD=Pe(di,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),xG=n=>vt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},hG,n),wG=N.forwardRef(function(e,t){const r=_a(),i=xt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:y,isPreviousHidden:x,onGoToPrevious:b,previousLabel:A,labelId:S,classes:T}=i,I=Be(i,pG),{ownerState:R}=nr(),P=xG(T),B={isDisabled:d,isHidden:f,goTo:p,label:g},O={isDisabled:y,isHidden:x,goTo:b,label:A},C=(o==null?void 0:o.previousIconButton)??eD,D=St({elementType:C,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:H({},R,{isButtonHidden:O.isHidden??!1}),className:jt(P.button,P.previousIconButton)}),V=(o==null?void 0:o.nextIconButton)??eD,L=St({elementType:V,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:B.label,"aria-label":B.label,disabled:B.isDisabled,edge:"start",onClick:B.goTo},ownerState:H({},R,{isButtonHidden:B.isHidden??!1}),className:jt(P.button,P.nextIconButton)}),M=(o==null?void 0:o.leftArrowIcon)??oG,F=St({elementType:M,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:R,className:P.leftArrowIcon}),q=Be(F,gG),X=(o==null?void 0:o.rightArrowIcon)??lG,W=St({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:R,className:P.rightArrowIcon}),G=Be(W,mG);return v.jsxs(yG,H({ref:t,className:jt(P.root,s),ownerState:R},I,{children:[v.jsx(C,H({},D,{children:r?v.jsx(X,H({},G)):v.jsx(M,H({},q))})),a?v.jsx(ne,{variant:"subtitle1",component:"span",id:S,children:a}):v.jsx(vG,{className:P.spacer,ownerState:R}),v.jsx(V,H({},L,{children:r?v.jsx(M,H({},q)):v.jsx(X,H({},G))}))]}))}),c4=["hours","minutes","seconds"],_G=["hours","minutes","seconds","meridiem"],y0=n=>c4.includes(n),vd=n=>_G.includes(n),bG=(n,e)=>n?e.getHours(n)>=12?"pm":"am":null,gw=(n,e,t)=>t&&(n>=12?"pm":"am")!==e?e==="am"?n-12:n+12:n,AG=(n,e,t,r)=>{const i=gw(r.getHours(n),e,t);return r.setHours(n,i)},tD=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),K1=(n,e)=>(t,r)=>n?e.isAfter(t,r):tD(t,e)>tD(r,e),nD=(n,{format:e,views:t,ampm:r})=>{if(e!=null)return e;const i=n.formats;return ms(t,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:ms(t,["minutes"])?i.minutes:ms(t,["seconds"])?i.seconds:ms(t,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:ms(t,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},u4={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function EG(n){const{steps:e,isViewMatchingStep:t,onStepChange:r}=n;return i=>{if(e==null)return u4;const a=e.findIndex(o=>t(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>t(o,p)),f=e.find(p=>t(c,p));return d===f}}}}function Q1({onChange:n,onViewChange:e,openTo:t,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=N.useRef(t),f=N.useRef(i),p=N.useRef(i.includes(t)?t:i[0]),[g,y]=Ld({name:"useViews",state:"view",controlled:r,default:p.current}),x=N.useRef(a?g:null),[b,A]=Ld({name:"useViews",state:"focusedView",controlled:s,default:x.current}),S=c?c({setView:y,view:g,defaultView:p.current,views:i}):u4;N.useEffect(()=>{(d.current&&d.current!==t||f.current&&f.current.some(D=>!i.includes(D)))&&(y(i.includes(t)?t:i[0]),f.current=i,d.current=t)},[t,y,g,i]);const T=i.indexOf(g),I=i[T-1]??null,R=i[T+1]??null,P=Ue((D,V)=>{A(V?D:L=>D===L?null:L),o==null||o(D,V)}),B=Ue(D=>{P(D,!0),D!==g&&(y(D),e&&e(D))}),O=Ue(()=>{R&&B(R)}),C=Ue((D,V,L)=>{const M=V==="finish",F=L?i.indexOf(L)<i.length-1:!!R;n(D,M&&F?"partial":V,L);let X=null;if(L!=null&&L!==g?X=L:M&&(X=g),X==null)return;const W=i[i.indexOf(X)+1];W==null||!S.areViewsInSameStep(X,W)||B(W)});return H({},S,{view:g,setView:B,focusedView:b,setFocusedView:P,nextView:R,previousView:I,defaultView:i.includes(t)?t:i[0],goToNextView:O,setValueAndGoToNextView:C})}function SG(n,{disableFuture:e,maxDate:t,timezone:r}){const i=Wt();return N.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,t)?a:t);return!i.isAfter(s,n)},[e,t,n,i,r])}function TG(n,{disablePast:e,minDate:t,timezone:r}){const i=Wt();return N.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,t)?a:t);return!i.isBefore(s,n)},[e,t,n,i,r])}function d4(n,e,t,r){const i=Wt(),a=N.useMemo(()=>i.isValid(n)?n:null,[i,n]),s=bG(a,i),o=N.useCallback(c=>{const d=a==null?null:AG(a,c,!!e,i);t(d,r??"partial")},[e,a,t,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const v0=36,Z1=2,Gd=320,CG=280,Wd=336,f4=232,Gh=48,ob=Pe("div")({overflow:"hidden",width:Gd,maxHeight:Wd,display:"flex",flexDirection:"column",margin:"0 auto"}),nu=({name:n,timezone:e,value:t,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Wt(),[c,d]=Ld({name:n,state:"value",controlled:t,default:r??s.emptyValue}),f=N.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=Ue(b=>f==null?b:s.setTimezone(o,f,b)),g=N.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),y=N.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),x=Ue((b,...A)=>{const S=p(b);d(S),a==null||a(S,...A)});return{value:y,handleValueChange:x,timezone:g}},ka={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},IG=n=>Math.max(...n.map(e=>ka[e.type]??1)),bh=(n,e,t)=>{if(e===ka.year)return n.startOfYear(t);if(e===ka.month)return n.startOfMonth(t);if(e===ka.day)return n.startOfDay(t);let r=t;return e<ka.minutes&&(r=n.setMinutes(r,0)),e<ka.seconds&&(r=n.setSeconds(r,0)),e<ka.milliseconds&&(r=n.setMilliseconds(r,0)),r},DG=({props:n,adapter:e,granularity:t,timezone:r,getTodayDate:i})=>{let a=i?i():bh(e,t,tb(e,r));n.minDate!=null&&e.isAfterDay(n.minDate,a)&&(a=bh(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,a)&&(a=bh(e,t,n.maxDate));const s=K1(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&s(n.minTime,a)&&(a=bh(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:jm(e,a,n.minTime))),n.maxTime!=null&&s(a,n.maxTime)&&(a=bh(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:jm(e,a,n.maxTime))),a},RG=["value","referenceDate"],Di={emptyValue:null,getTodayValue:tb,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,r=Be(n,RG);return r.adapter.isValid(e)?e:t??DG(r)},cleanValue:V$,areValuesEqual:j$,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},OG={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:W$,getV6InputValueFromSections:Y$,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>H({},e,{value:""}))},h4=({value:n,referenceDate:e,adapter:t,props:r,timezone:i})=>{const a=N.useMemo(()=>Di.getInitialReferenceValue({value:n,adapter:t,props:r,referenceDate:e,granularity:ka.day,timezone:i,getTodayDate:()=>tb(t,i,"date")}),[e,i]);return n??a};function MG(n){return Rt("MuiDigitalClock",n)}const mw=Ot("MuiDigitalClock",["root","list","item"]);function PG(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const kG=n=>{setTimeout(n,0)},p4=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?p4(e.shadowRoot):e:null},ui=n=>p4(qh(n)),Hm=n=>Array.from(n.children).indexOf(ui(n)),NG="@media (pointer: fine)";function LG(...n){return n.reduce((e,t)=>(Array.isArray(t)?e.push(...t):t!=null&&e.push(t),e),[])}const BG=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],FG=n=>vt({root:["root"],list:["list"],item:["item"]},MG,n),VG=Pe(ob,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:f4,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),jG=Pe(W3,{name:"MuiDigitalClock",slot:"List"})({padding:0}),UG=Pe(pn,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:n=>n!=="itemValue"&&n!=="formattedValue"})(({theme:n})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Rs(n.palette.primary.main,n.palette.action.focusOpacity)}})),HG=N.forwardRef(function(e,t){const r=Wt(),i=N.useRef(null),a=ei(t,i),s=N.useRef(null),o=xt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:y,defaultValue:x,referenceDate:b,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:S,minTime:T,disableFuture:I,disablePast:R,minutesStep:P=1,shouldDisableTime:B,onChange:O,view:C,openTo:D,onViewChange:V,focusedView:L,onFocusedViewChange:M,className:F,classes:q,disabled:X,readOnly:W,views:G=["hours"],skipDisabled:Q=!1,timezone:Z}=o,de=Be(o,BG),{value:ge,handleValueChange:xe,timezone:be}=nu({name:"DigitalClock",timezone:Z,value:y,defaultValue:x,referenceDate:b,onChange:O,valueManager:Di}),ke=Xa(),he=df(be),{ownerState:Se}=nr(),Ae=H({},Se,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Fe=FG(q),re=(p==null?void 0:p.digitalClockItem)??UG,ye=St({elementType:re,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ae,className:Fe.item}),pe=h4({value:ge,referenceDate:b,adapter:r,props:o,timezone:be}),te=Ue(Ge=>xe(Ge,"finish","hours")),{setValueAndGoToNextView:Ve}=Q1({view:C,views:G,openTo:D,onViewChange:V,onChange:te,focusedView:L,onFocusedViewChange:M}),we=Ue(Ge=>{Ve(Ge,"finish")});Wn(()=>{if(i.current===null)return;const Ge=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!Ge)return;const Oe=Ge.offsetTop;(f||L)&&Ge.focus(),i.current.scrollTop=Oe-4});const ze=N.useCallback(Ge=>{const Oe=K1(A,r),Ne=()=>!(T&&Oe(T,Ge)||S&&Oe(Ge,S)||I&&Oe(Ge,he)||R&&Oe(he,Ge)),dt=()=>r.getMinutes(Ge)%P!==0?!1:B?!B(Ge,"hours"):!0;return!Ne()||!dt()},[A,r,T,S,I,he,R,P,B]),Me=N.useMemo(()=>{const Ge=[];let Ne=r.startOfDay(pe);for(;r.isSameDay(pe,Ne);)Ge.push(Ne),Ne=r.addMinutes(Ne,d);return Ge},[pe,d,r]),Re=Me.findIndex(Ge=>r.isEqual(Ge,pe)),Ye=Ge=>{switch(Ge.key){case"PageUp":{const Oe=Hm(s.current)-5,Ne=s.current.children,dt=Math.max(0,Oe),_t=Ne[dt];_t&&_t.focus(),Ge.preventDefault();break}case"PageDown":{const Oe=Hm(s.current)+5,Ne=s.current.children,dt=Math.min(Ne.length-1,Oe),_t=Ne[dt];_t&&_t.focus(),Ge.preventDefault();break}}};return v.jsx(VG,H({ref:a,className:jt(Fe.root,F),ownerState:Ae},de,{children:v.jsx(jG,{ref:s,role:"listbox","aria-label":ke.timePickerToolbarTitle,className:Fe.list,onKeyDown:Ye,children:Me.map((Ge,Oe)=>{const Ne=ze(Ge);if(Q&&Ne)return null;const dt=r.isEqual(Ge,ge),_t=r.format(Ge,c?"fullTime12h":"fullTime24h"),On=Re===Oe||Re===-1&&Oe===0?0:-1;return v.jsx(re,H({onClick:()=>!W&&we(Ge),selected:dt,disabled:X||Ne,disableRipple:W,role:"option","aria-disabled":W,"aria-selected":dt,tabIndex:On,itemValue:Ge,formattedValue:_t},ye,{children:_t}),`${Ge.valueOf()}-${_t}`)})})}))});function zG(n){return Rt("MuiMultiSectionDigitalClock",n)}const yw=Ot("MuiMultiSectionDigitalClock",["root"]);function $G(n){return Rt("MuiMultiSectionDigitalClockSection",n)}const vw=Ot("MuiMultiSectionDigitalClockSection",["root","item"]),GG=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],WG=n=>vt({root:["root"],item:["item"]},$G,n),YG=Pe(W3,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:n})=>({maxHeight:f4,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),qG=Pe(pn,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:n})=>({padding:8,margin:"2px 4px",width:Gh,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Rs(n.palette.primary.main,n.palette.action.focusOpacity)}})),XG=N.forwardRef(function(e,t){const r=N.useRef(null),i=ei(t,r),a=N.useRef(null),s=xt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:y,active:x,slots:b,slotProps:A,skipDisabled:S}=s,T=Be(s,GG),{ownerState:I}=nr(),R=H({},I,{hasDigitalClockAlreadyBeenRendered:!!r.current}),P=WG(f),B=(b==null?void 0:b.digitalClockSectionItem)??qG;Wn(()=>{if(r.current===null)return;const D=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(x&&o&&D&&D.focus(),!D||a.current===D)return;a.current=D;const V=D.offsetTop,L=D.offsetHeight,M=r.current.clientHeight,F=r.current.scrollHeight,q=V-M/2+L/2,X=F-M,W=Math.min(q,X);r.current.scrollTop=Math.max(0,W)});const O=y.findIndex(D=>D.isFocused(D.value)),C=D=>{switch(D.key){case"PageUp":{const V=Hm(r.current)-5,L=r.current.children,M=Math.max(0,V),F=L[M];F&&F.focus(),D.preventDefault();break}case"PageDown":{const V=Hm(r.current)+5,L=r.current.children,M=Math.min(L.length-1,V),F=L[M];F&&F.focus(),D.preventDefault();break}}};return v.jsx(YG,H({ref:i,className:jt(P.root,d),ownerState:R,autoFocusItem:o&&x,role:"listbox",onKeyDown:C},T,{children:y.map((D,V)=>{var X;const L=(X=D.isDisabled)==null?void 0:X.call(D,D.value),M=p||L;if(S&&M)return null;const F=D.isSelected(D.value),q=O===V||O===-1&&V===0?0:-1;return v.jsx(B,H({onClick:()=>!g&&c(D.value),selected:F,disabled:M,disableRipple:g,role:"option","aria-disabled":g||M||void 0,"aria-label":D.ariaLabel,"aria-selected":F,tabIndex:q,className:P.item},A==null?void 0:A.digitalClockSectionItem,{children:D.label}),D.label)})}))}),KG=({now:n,value:e,adapter:t,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?t.getHours(e):null,d=[],f=(y,x)=>{const b=x??c;return b===null?!1:r?y===12?b===12||b===0:b===y||b-12===y:b===y},p=y=>f(y,t.getHours(o)),g=r?11:23;for(let y=0;y<=g;y+=s){let x=t.format(t.setHours(n,y),r?"hours12h":"hours24h");const b=a(parseInt(x,10).toString());x=t.formatNumber(x),d.push({value:y,label:x,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:b})}return d},rD=({value:n,adapter:e,isDisabled:t,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>n===null?!1:s&&n===d,c=d=>n===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:t,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},QG=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],ZG=n=>vt({root:["root"]},zG,n),JG=Pe(ob,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:n})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(n.vars||n).palette.divider}`})),eW=N.forwardRef(function(e,t){const r=Wt(),i=_a(),a=xt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:y,disableIgnoringDatePartForTimeValidation:x=!1,maxTime:b,minTime:A,disableFuture:S,disablePast:T,minutesStep:I=1,shouldDisableTime:R,onChange:P,view:B,views:O=["hours","minutes"],openTo:C,onViewChange:D,focusedView:V,onFocusedViewChange:L,className:M,classes:F,disabled:q,readOnly:X,skipDisabled:W=!1,timezone:G}=a,Q=Be(a,QG),{value:Z,handleValueChange:de,timezone:ge}=nu({name:"MultiSectionDigitalClock",timezone:G,value:p,defaultValue:g,referenceDate:y,onChange:P,valueManager:Di}),xe=Xa(),be=df(ge),ke=N.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),he=h4({value:Z,referenceDate:y,adapter:r,props:a,timezone:ge}),Se=Ue((Oe,Ne,dt)=>de(Oe,Ne,dt)),Ae=N.useMemo(()=>!s||!O.includes("hours")||O.includes("meridiem")?O:[...O,"meridiem"],[s,O]),{view:Fe,setValueAndGoToNextView:re,focusedView:ye}=Q1({view:B,views:Ae,openTo:C,onViewChange:D,onChange:Se,focusedView:V,onFocusedViewChange:L}),pe=Ue(Oe=>{re(Oe,"finish","meridiem")}),{meridiemMode:te,handleMeridiemChange:Ve}=d4(he,s,pe,"finish"),we=N.useCallback((Oe,Ne)=>{const dt=K1(x,r),_t=Ne==="hours"||Ne==="minutes"&&Ae.includes("seconds"),yn=({start:nt,end:it})=>!(A&&dt(A,it)||b&&dt(nt,b)||S&&dt(nt,be)||T&&dt(be,_t?it:nt)),On=(nt,it=1)=>{if(nt%it!==0)return!1;if(R)switch(Ne){case"hours":return!R(r.setHours(he,nt),"hours");case"minutes":return!R(r.setMinutes(he,nt),"minutes");case"seconds":return!R(r.setSeconds(he,nt),"seconds");default:return!1}return!0};switch(Ne){case"hours":{const nt=gw(Oe,te,s),it=r.setHours(he,nt);if(r.getHours(it)!==nt)return!0;const Tn=r.setSeconds(r.setMinutes(it,0),0),Qe=r.setSeconds(r.setMinutes(it,59),59);return!yn({start:Tn,end:Qe})||!On(nt)}case"minutes":{const nt=r.setMinutes(he,Oe),it=r.setSeconds(nt,0),Tn=r.setSeconds(nt,59);return!yn({start:it,end:Tn})||!On(Oe,I)}case"seconds":{const nt=r.setSeconds(he,Oe);return!yn({start:nt,end:nt})||!On(Oe)}default:throw new Error("not supported")}},[s,he,x,b,te,A,I,R,r,S,T,be,Ae]),ze=N.useCallback(Oe=>{switch(Oe){case"hours":return{onChange:Ne=>{const dt=gw(Ne,te,s);re(r.setHours(he,dt),"finish","hours")},items:KG({now:be,value:Z,ampm:s,adapter:r,isDisabled:Ne=>we(Ne,"hours"),timeStep:ke.hours,resolveAriaLabel:xe.hoursClockNumberText,valueOrReferenceDate:he})};case"minutes":return{onChange:Ne=>{re(r.setMinutes(he,Ne),"finish","minutes")},items:rD({value:r.getMinutes(he),adapter:r,isDisabled:Ne=>we(Ne,"minutes"),resolveLabel:Ne=>r.format(r.setMinutes(be,Ne),"minutes"),timeStep:ke.minutes,hasValue:!!Z,resolveAriaLabel:xe.minutesClockNumberText})};case"seconds":return{onChange:Ne=>{re(r.setSeconds(he,Ne),"finish","seconds")},items:rD({value:r.getSeconds(he),adapter:r,isDisabled:Ne=>we(Ne,"seconds"),resolveLabel:Ne=>r.format(r.setSeconds(be,Ne),"seconds"),timeStep:ke.seconds,hasValue:!!Z,resolveAriaLabel:xe.secondsClockNumberText})};case"meridiem":{const Ne=t0(r,"am"),dt=t0(r,"pm");return{onChange:Ve,items:[{value:"am",label:Ne,isSelected:()=>!!Z&&te==="am",isFocused:()=>!!he&&te==="am",ariaLabel:Ne},{value:"pm",label:dt,isSelected:()=>!!Z&&te==="pm",isFocused:()=>!!he&&te==="pm",ariaLabel:dt}]}}default:throw new Error(`Unknown view: ${Oe} found.`)}},[be,Z,s,r,ke.hours,ke.minutes,ke.seconds,xe.hoursClockNumberText,xe.minutesClockNumberText,xe.secondsClockNumberText,te,re,he,we,Ve]),Me=N.useMemo(()=>{if(!i)return Ae;const Oe=Ae.filter(Ne=>Ne!=="meridiem");return Oe.reverse(),Ae.includes("meridiem")&&Oe.push("meridiem"),Oe},[i,Ae]),Re=N.useMemo(()=>Ae.reduce((Oe,Ne)=>H({},Oe,{[Ne]:ze(Ne)}),{}),[Ae,ze]),{ownerState:Ye}=nr(),Ge=ZG(F);return v.jsx(JG,H({ref:t,className:jt(Ge.root,M),ownerState:Ye,role:"group"},Q,{children:Me.map(Oe=>v.jsx(XG,{items:Re[Oe].items,onChange:Re[Oe].onChange,active:Fe===Oe,autoFocus:c||ye===Oe,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:W,"aria-label":xe.selectViewText(Oe)},Oe))}))});function tW(n){return Rt("MuiPickersDay",n)}const bc=Ot("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function g4(n){const{disabled:e,selected:t,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=n,d=Wt(),{ownerState:f}=nr();return N.useMemo(()=>H({},f,{day:a,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,t,e,r,i,s,o,c])}const nW=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],rW=(n,e)=>{const{isDaySelected:t,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return vt({root:["root",t&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},tW,n)},m4=({theme:n})=>H({},n.typography.caption,{width:v0,height:v0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Rs(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${bc.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${bc.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${bc.disabled}:not(.${bc.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${bc.disabled}&.${bc.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Z1}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${bc.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),y4=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},iW=Pe(yN,{name:"MuiPickersDay",slot:"Root",overridesResolver:y4})(m4),aW=Pe("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:y4})(({theme:n})=>H({},m4({theme:n}),{opacity:0,pointerEvents:"none"})),Ah=()=>{},sW=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=Ah,onBlur:p=Ah,onKeyDown:g=Ah,onMouseDown:y=Ah,onMouseEnter:x=Ah,children:b,day:A,selected:S,disabled:T,today:I,outsideCurrentMonth:R,disableMargin:P,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}=r,C=Be(r,nW),D=g4({day:A,selected:S,disabled:T,today:I,outsideCurrentMonth:R,disableMargin:P,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}),V=rW(s,D),L=Wt(),M=N.useRef(null),F=ei(M,t);Wn(()=>{i&&!T&&!o&&!R&&M.current.focus()},[i,T,o,R]);const q=W=>{y(W),R&&W.preventDefault()},X=W=>{W.defaultMuiPrevented=!0,T||d(A),R&&W.currentTarget.focus(),c&&c(W)};return R&&!O?v.jsx(aW,{className:jt(V.root,V.hiddenDaySpacingFiller,a),ownerState:D,role:C.role}):v.jsx(iW,H({className:jt(V.root,a),ref:F,centerRipple:!0,disabled:T,tabIndex:S?0:-1,onKeyDown:W=>g(W,A),onFocus:W=>f(W,A),onBlur:W=>p(W,A),onMouseEnter:W=>x(W,A),onClick:X,onMouseDown:q},C,{ownerState:D,children:b??L.format(A,"dayOfMonth")}))}),oW=N.memo(sW),Ju=n=>n.saveQuery!=null,v4=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Wt(),c=({keyPressed:p,sectionIndex:g},y,x)=>{const b=p.toLowerCase(),A=t.sections[g];if(t.characterQuery!=null&&(!x||x(t.characterQuery.value))&&t.characterQuery.sectionIndex===g){const T=`${t.characterQuery.value}${b}`,I=y(T,A);if(!Ju(I))return i({sectionIndex:g,value:T,sectionType:A.type}),I}const S=y(b,A);return Ju(S)&&!S.saveQuery?(i(null),null):(i({sectionIndex:g,value:b,sectionType:A.type}),Ju(S)?null:S)},d=p=>{const g=(b,A,S)=>{const T=A.filter(I=>I.toLowerCase().startsWith(S));return T.length===0?{saveQuery:!1}:{sectionValue:T[0],shouldGoToNextSection:T.length===1}},y=(b,A,S,T)=>{const I=R=>JM(o,r,A.type,R);if(A.contentType==="letter")return g(A.format,I(A.format),b);if(S&&T!=null&&ZM(o,S).contentType==="letter"){const R=I(S),P=g(S,R,b);return Ju(P)?{saveQuery:!1}:H({},P,{sectionValue:T(P.sectionValue,R)})}return{saveQuery:!1}};return c(p,(b,A)=>{switch(A.type){case"month":{const S=T=>KI(o,T,o.formats.month,A.format);return y(b,A,o.formats.month,S)}case"weekDay":{const S=(T,I)=>I.indexOf(T).toString();return y(b,A,o.formats.weekday,S)}case"meridiem":return y(b,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:x,skipIfBelowMinimum:b,section:A})=>{const S=Xc(x,n),T=Number(S),I=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(T>I.maximum)return{saveQuery:!1};if(b&&T<I.minimum)return{saveQuery:!0};const R=T*10>I.maximum||S.length===I.maximum.toString().length;return{sectionValue:e4(o,T,I,n,A),shouldGoToNextSection:R}};return c(p,(x,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return g({queryValue:x,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){t4(o,"digit","month","MM");const A=g({queryValue:x,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(Ju(A))return A;const S=KI(o,A.sectionValue,"MM",b.format);return H({},A,{sectionValue:S})}if(b.type==="weekDay"){const A=g({queryValue:x,skipIfBelowMinimum:!0,section:b});if(Ju(A))return A;const S=X1(o,b.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:S})}return{saveQuery:!1}},x=>XI(x,n))};return Ue(p=>{const g=t.sections[p.sectionIndex],x=XI(p.keyPressed,n)?f(H({},p,{keyPressed:nb(p.keyPressed,n)})):d(p);if(x==null){a(null);return}s({section:g,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})})},lb=({props:n,value:e,timezone:t,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=n,p=r.date(void 0,t);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};lb.valueManager=Di;const x4=({adapter:n,value:e,timezone:t,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=n.date(void 0,t),g=K1(c,n);switch(!0){case!n.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&n.isAfter(e,p)):return"disableFuture";case!!(d&&n.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&n.getMinutes(e)%s!==0):return"minutesStep";default:return null}};x4.valueManager=Di;const J1=({adapter:n,value:e,timezone:t,props:r})=>{const i=lb({adapter:n,value:e,timezone:t,props:r});return i!==null?i:x4({adapter:n,value:e,timezone:t,props:r})};J1.valueManager=Di;function w4(n){const{props:e,validator:t,value:r,timezone:i,onError:a}=n,s=Wt(),o=N.useRef(t.valueManager.defaultErrorState),c=t({adapter:s,value:r,timezone:i,props:e}),d=t.valueManager.hasError(c);N.useEffect(()=>{a&&!t.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[t,a,c,r]);const f=Ue(p=>t({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const lW=5e3,_4=n=>{var Me;const e=Wt(),t=Xa(),r=_a(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:y,formatDensity:x="dense",selectedSections:b,onSelectedSectionsChange:A,shouldRespectLeadingZeros:S=!1,timezone:T,enableAccessibleFieldDOMStructure:I=!0},forwardedProps:{error:R}}=n,{value:P,handleValueChange:B,timezone:O}=nu({name:"a field component",timezone:T,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),C=N.useRef(P);N.useEffect(()=>{C.current=P},[P]);const{hasValidationError:D}=w4({props:c,validator:i,timezone:O,value:P,onError:c.onError}),V=N.useMemo(()=>R!==void 0?R:D,[D,R]),L=N.useMemo(()=>z$(e),[e]),M=N.useMemo(()=>q$(e,L,O),[e,L,O]),F=N.useCallback(Re=>o.getSectionsFromValue(Re,Ye=>JI({adapter:e,localeText:t,localizedDigits:L,format:y,date:Ye,formatDensity:x,shouldRespectLeadingZeros:S,enableAccessibleFieldDOMStructure:I,isRtl:r})),[o,y,t,L,r,S,e,x,I]),[q,X]=N.useState(()=>{const Re=F(P),Ye={sections:Re,lastExternalValue:P,lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},Ge=IG(Re),Oe=s.getInitialReferenceValue({referenceDate:p,value:P,adapter:e,props:c,granularity:Ge,timezone:O});return H({},Ye,{referenceValue:Oe})}),[W,G]=Ld({controlled:b,default:null,name:"useField",state:"selectedSections"}),Q=Re=>{G(Re),A==null||A(Re)},Z=N.useMemo(()=>pw(W,q.sections),[W,q.sections]),de=Z==="all"?0:Z,ge=N.useMemo(()=>Q$(q.sections,r&&!I),[q.sections,r,I]),xe=N.useMemo(()=>q.sections.every(Re=>Re.value===""),[q.sections]),be=Re=>{const Ye={validationError:i({adapter:e,value:Re,timezone:O,props:c})};B(Re,Ye)},ke=(Re,Ye)=>{const Ge=[...q.sections];return Ge[Re]=H({},Ge[Re],{value:Ye,modified:!0}),Ge},he=N.useRef(null),Se=Ed(),Ae=Re=>{de!=null&&(he.current={sectionIndex:de,value:Re},Se.start(0,()=>{he.current=null}))},Fe=()=>{s.areValuesEqual(e,P,s.emptyValue)?X(Re=>H({},Re,{sections:Re.sections.map(Ye=>H({},Ye,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(Re=>H({},Re,{characterQuery:null})),be(s.emptyValue))},re=()=>{if(de==null)return;const Re=q.sections[de];Re.value!==""&&(Ae(""),o.getDateFromSection(P,Re)===null?X(Ye=>H({},Ye,{sections:ke(de,""),tempValueStrAndroid:null,characterQuery:null})):(X(Ye=>H({},Ye,{characterQuery:null})),be(o.updateDateInValue(P,Re,null))))},ye=Re=>{const Ye=(Oe,Ne)=>{const dt=e.parse(Oe,y);if(!e.isValid(dt))return null;const _t=JI({adapter:e,localeText:t,localizedDigits:L,format:y,date:dt,formatDensity:x,shouldRespectLeadingZeros:S,enableAccessibleFieldDOMStructure:I,isRtl:r});return ZI(e,dt,_t,Ne,!1)},Ge=o.parseValueStr(Re,q.referenceValue,Ye);be(Ge)},pe=Ed(),te=({section:Re,newSectionValue:Ye,shouldGoToNextSection:Ge})=>{Se.clear(),pe.clear();const Oe=o.getDateFromSection(P,Re);Ge&&de<q.sections.length-1&&Q(de+1);const Ne=ke(de,Ye),dt=o.getDateSectionsFromValue(Ne,Re),_t=G$(e,dt,L);if(e.isValid(_t)){const yn=ZI(e,_t,dt,o.getDateFromSection(q.referenceValue,Re),!0);return Oe==null&&pe.start(0,()=>{C.current===P&&X(On=>H({},On,{sections:o.clearDateSections(q.sections,Re),tempValueStrAndroid:null}))}),be(o.updateDateInValue(P,Re,yn))}return dt.every(yn=>yn.value!=="")&&(Oe==null||e.isValid(Oe))?(Ae(Ye),be(o.updateDateInValue(P,Re,_t))):Oe!=null?(Ae(Ye),be(o.updateDateInValue(P,Re,null))):X(yn=>H({},yn,{sections:Ne,tempValueStrAndroid:null}))},Ve=Re=>X(Ye=>H({},Ye,{tempValueStrAndroid:Re})),we=Ue(Re=>{X(Ye=>H({},Ye,{characterQuery:Re}))});if(P!==q.lastExternalValue){let Re;he.current!=null&&!e.isValid(o.getDateFromSection(P,q.sections[he.current.sectionIndex]))?Re=ke(he.current.sectionIndex,he.current.value):Re=F(P),X(Ye=>H({},Ye,{lastExternalValue:P,sections:Re,sectionsDependencies:{format:y,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,P,Ye.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||y!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const Re=F(P);X(Ye=>H({},Ye,{lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},sections:Re,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!V&&de==null&&we(null),q.characterQuery!=null&&((Me=q.sections[q.characterQuery.sectionIndex])==null?void 0:Me.type)!==q.characterQuery.sectionType&&we(null),N.useEffect(()=>{he.current!=null&&(he.current=null)});const ze=Ed();return N.useEffect(()=>(q.characterQuery!=null&&ze.start(lW,()=>we(null)),()=>{}),[q.characterQuery,we,ze]),N.useEffect(()=>{q.tempValueStrAndroid!=null&&de!=null&&re()},[q.sections]),{activeSectionIndex:de,areAllSectionsEmpty:xe,error:V,localizedDigits:L,parsedSelectedSections:Z,sectionOrder:ge,sectionsValueBoundaries:M,state:q,timezone:O,value:P,clearValue:Fe,clearActiveSection:re,setCharacterQuery:we,setSelectedSections:Q,setTempAndroidValueStr:Ve,updateSectionValue:te,updateValueFromValueStr:ye,getSectionsFromValue:F}};function b4(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:r}=n,i=sb(),a=i4(),s=ei(t.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=N.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=N.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},t):t,[i,a,t,c,s]);return e(d)}function cb(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:r,state:i}}=n;if(!t.isReady())return;const a=qh(t.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&t.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(ui(t.getRoot())))return;const s=new window.Range;let o;r==="all"?o=t.getRoot():i.sections[r].type==="empty"?o=t.getSectionContainer(r):o=t.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function A4(n){const e=Wt(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:y,clearValue:x,clearActiveSection:b,setSelectedSections:A,updateSectionValue:S}}=n;return Ue(T=>{if(!i)switch(!0){case((T.ctrlKey||T.metaKey)&&String.fromCharCode(T.keyCode)==="A"&&!T.shiftKey&&!T.altKey):{T.preventDefault(),A("all");break}case T.key==="ArrowRight":{if(T.preventDefault(),d==null)A(y.startIndex);else if(d==="all")A(y.endIndex);else{const I=y.neighbors[d].rightIndex;I!==null&&A(I)}break}case T.key==="ArrowLeft":{if(T.preventDefault(),d==null)A(y.endIndex);else if(d==="all")A(y.startIndex);else{const I=y.neighbors[d].leftIndex;I!==null&&A(I)}break}case T.key==="Delete":{if(T.preventDefault(),a)break;d==null||d==="all"?x():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(T.key):{if(T.preventDefault(),a||c==null)break;d==="all"&&A(c);const I=s.sections[c],R=uW(e,g,I,T.key,f,p,t.getDateFromSection(o,I),{minutesStep:r});S({section:I,newSectionValue:R,shouldGoToNextSection:!1});break}}})}function cW(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function uW(n,e,t,r,i,a,s,o){const c=cW(r),d=r==="Home",f=r==="End",p=t.value===""||d||f,g=()=>{const x=i[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),b=T=>e4(n,T,x,a,t),A=t.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let S;if(p){if(t.type==="year"&&!f&&!d)return n.formatByString(n.date(void 0,e),t.format);c>0||d?S=x.minimum:S=x.maximum}else S=parseInt(Xc(t.value,a),10)+c*A;return S%A!==0&&((c<0||d)&&(S+=A-(A+S)%A),(c>0||f)&&(S-=S%A)),S>x.maximum?b(x.minimum+(S-x.maximum-1)%(x.maximum-x.minimum+1)):S<x.minimum?b(x.maximum-(x.minimum-S-1)%(x.maximum-x.minimum+1)):b(S)},y=()=>{const x=JM(n,e,t.type,t.format);if(x.length===0)return t.value;if(p)return c>0||d?x[0]:x[x.length-1];const S=((x.indexOf(t.value)+c)%x.length+x.length)%x.length;return x[S]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?g():y()}function dW(n){const{manager:e,focused:t,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:y,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:b=!1,readOnly:A=!1}}=n,S=A4({manager:e,internalPropsWithDefaults:o,stateResponse:a}),T=Ed(),I=Ue(C=>{b||!i.isReady()||(r(!0),c==="all"?T.start(0,()=>{const D=document.getSelection().getRangeAt(0).startOffset;if(D===0){y(d.startIndex);return}let V=0,L=0;for(;L<D&&V<f.sections.length;){const M=f.sections[V];V+=1,L+=`${M.startSeparator}${M.value||M.placeholder}${M.endSeparator}`.length}y(V-1)}):t?i.getRoot().contains(C.target)||y(d.startIndex):(r(!0),y(d.startIndex)))}),R=Ue(C=>{if(!i.isReady()||c!=="all")return;const V=C.target.textContent??"";i.getRoot().innerHTML=f.sections.map(L=>`${L.startSeparator}${L.value||L.placeholder}${L.endSeparator}`).join(""),cb({focused:t,domGetters:i,stateResponse:a}),V.length===0||V.charCodeAt(0)===10?(p(),y("all")):V.length>1?x(V):(c==="all"&&y(0),s({keyPressed:V,sectionIndex:0}))}),P=Ue(C=>{if(A||c!=="all"){C.preventDefault();return}const D=C.clipboardData.getData("text");C.preventDefault(),g(null),x(D)}),B=Ue(()=>{if(t||b||!i.isReady())return;const C=ui(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(C)!=null||y(d.startIndex)}),O=Ue(()=>{setTimeout(()=>{if(!i.isReady())return;const C=ui(i.getRoot());!i.getRoot().contains(C)&&(r(!1),y(null))})});return{onKeyDown:S,onBlur:O,onFocus:B,onClick:I,onPaste:P,onInput:R,contentEditable:c==="all",tabIndex:c===0?-1:0}}function fW(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:r,updateValueFromValueStr:i}}=n,a=Ue(o=>{i(o.target.value)});return{value:N.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(r.sections),[t,r.sections,e]),onChange:a}}function hW(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,r=N.useCallback(i=>a=>{t||a.isDefaultPrevented()||e(i)},[t,e]);return N.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function pW(n){const e=Wt(),t=Xa(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:y,setSelectedSections:x,updateSectionValue:b,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:S=!1,readOnly:T=!1}}=n,I=c==="all",R=!I&&!S&&!T,P=Ue(L=>{if(!i.isReady())return;const M=f.sections[L];i.getSectionContent(L).innerHTML=M.value||M.placeholder,cb({focused:r,domGetters:i,stateResponse:a})}),B=Ue(L=>{if(!i.isReady())return;const M=L.target,F=M.textContent??"",q=i.getSectionIndexFromDOMElement(M),X=f.sections[q];if(T){P(q);return}if(F.length===0){if(X.value===""){P(q);return}const W=L.nativeEvent.inputType;if(W==="insertParagraph"||W==="insertLineBreak"){P(q);return}P(q),g();return}s({keyPressed:F,sectionIndex:q}),P(q)}),O=Ue(L=>{L.preventDefault()}),C=Ue(L=>{if(L.preventDefault(),T||S||typeof c!="number")return;const M=f.sections[c],F=L.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(F),X=/^[0-9]+$/.test(F),W=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(F);M.contentType==="letter"&&q||M.contentType==="digit"&&X||M.contentType==="digit-with-letter"&&W?(y(null),b({section:M,newSectionValue:F,shouldGoToNextSection:!0})):!q&&!X&&(y(null),A(F))}),D=Ue(L=>{L.preventDefault(),L.dataTransfer.dropEffect="none"}),V=N.useCallback(L=>()=>{S||x(L)},[S,x]);return N.useCallback((L,M)=>{const F=d[L.type]({currentDate:o.getDateFromSection(p,L),contentType:L.contentType,format:L.format});return{onInput:B,onPaste:C,onMouseUp:O,onDragOver:D,onFocus:V(M),"aria-readonly":T,"aria-valuenow":mW(L,e),"aria-valuemin":F.minimum,"aria-valuemax":F.maximum,"aria-valuetext":L.value?gW(L,e):t.empty,"aria-label":t[L.type],"aria-disabled":S,tabIndex:I||M>0?-1:0,contentEditable:!I&&!S&&!T,role:"spinbutton","data-range-position":L.dateName||void 0,spellCheck:R?!1:void 0,autoCapitalize:R?"off":void 0,autoCorrect:R?"off":void 0,children:L.value||L.placeholder,inputMode:L.contentType==="letter"?"text":"numeric"}},[d,I,S,T,R,t,e,B,C,O,D,V,o,p])}function gW(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit"){const r=e.setMonth(e.date(),Number(n.value)-1);return e.isValid(r)?e.format(r,"month"):""}const t=e.parse(n.value,n.format);return t&&e.isValid(t)?e.format(t,"month"):void 0}case"day":if(n.contentType==="digit"){const t=e.setDate(e.startOfYear(e.date()),Number(n.value));return e.isValid(t)?e.format(t,"dayOfMonthFull"):""}return n.value;case"weekDay":return;default:return}}function mW(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const yW=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=n,{internalProps:s,forwardedProps:o}=KM(e,i),c=b4({manager:t,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:y,onPaste:x,onKeyDown:b,onClear:A,clearable:S}=o,{disabled:T=!1,readOnly:I=!1,autoFocus:R=!1,focused:P,unstableFieldRef:B}=c,O=N.useRef(null),C=ei(d,O),D=N.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Me=>O.current.getSectionContainer(Me),getSectionContent:Me=>O.current.getSectionContent(Me),getSectionIndexFromDOMElement:Me=>O.current.getSectionIndexFromDOMElement(Me)}),[O]),V=_4({manager:t,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:L,error:M,parsedSelectedSections:F,sectionOrder:q,state:X,value:W,clearValue:G,setSelectedSections:Q}=V,Z=v4({stateResponse:V}),de=a(W),[ge,xe]=N.useState(!1);function be(Me=0){if(T||!O.current||iD(O)!=null)return;const Re=pw(Me,X.sections);xe(!0),O.current.getSectionContent(Re).focus()}const ke=dW({manager:t,internalPropsWithDefaults:c,stateResponse:V,applyCharacterEditing:Z,focused:ge,setFocused:xe,domGetters:D}),he=fW({manager:t,stateResponse:V}),Se=hW({stateResponse:V,internalPropsWithDefaults:c}),Ae=pW({manager:t,stateResponse:V,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:D,focused:ge}),Fe=Ue(Me=>{b==null||b(Me),ke.onKeyDown(Me)}),re=Ue(Me=>{f==null||f(Me),ke.onBlur(Me)}),ye=Ue(Me=>{g==null||g(Me),ke.onFocus(Me)}),pe=Ue(Me=>{Me.isDefaultPrevented()||(p==null||p(Me),ke.onClick(Me))}),te=Ue(Me=>{x==null||x(Me),ke.onPaste(Me)}),Ve=Ue(Me=>{y==null||y(Me),ke.onInput(Me)}),we=Ue((Me,...Re)=>{Me.preventDefault(),A==null||A(Me,...Re),G(),aD(O)?Q(q.startIndex):be(0)}),ze=N.useMemo(()=>X.sections.map((Me,Re)=>{const Ye=Ae(Me,Re);return{container:Se(Re),content:Ae(Me,Re),before:{children:Me.startSeparator},after:{children:Me.endSeparator,"data-range-position":Me.isEndFormatSeparator?Ye["data-range-position"]:void 0}}}),[X.sections,Se,Ae]);return N.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));R&&!T&&O.current&&O.current.getSectionContent(q.startIndex).focus()},[]),Wn(()=>{if(!(!ge||!O.current)){if(F==="all")O.current.getRoot().focus();else if(typeof F=="number"){const Me=O.current.getSectionContent(F);Me&&Me.focus()}}},[F,ge]),Wn(()=>{cb({focused:ge,domGetters:D,stateResponse:V})}),N.useImperativeHandle(B,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>iD(O),setSelectedSections:Me=>{if(T||!O.current)return;const Re=pw(Me,X.sections);xe((Re==="all"?0:Re)!==null),Q(Me)},focusField:be,isFieldFocused:()=>aD(O)})),H({},o,ke,{onBlur:re,onClick:pe,onFocus:ye,onInput:Ve,onPaste:te,onKeyDown:Fe,onClear:we},he,{error:M,clearable:!!(S&&!L&&!I&&!T),focused:P??ge,sectionListRef:C,enableAccessibleFieldDOMStructure:!0,elements:ze,areAllSectionsEmpty:L,disabled:T,readOnly:I,autoFocus:R,openPickerAriaLabel:de})};function iD(n){var t;const e=ui((t=n.current)==null?void 0:t.getRoot());return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function aD(n){var t;const e=ui((t=n.current)==null?void 0:t.getRoot());return!!n.current&&n.current.getRoot().contains(e)}const xd=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),vW=(n,e,t)=>{let r=0,i=t?1:0;const a=[];for(let s=0;s<n.length;s+=1){const o=n[s],c=ib(o,t?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=xd(d).length,p=d.length,g=xd(c),y=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,x=y+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:y,endInInput:x})),r+=f,i+=p}return a},xW=n=>{const e=_a(),t=Ed(),r=Ed(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=n,{internalProps:p,forwardedProps:g}=KM(i,o),y=b4({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:x,onClick:b,onPaste:A,onBlur:S,onKeyDown:T,onClear:I,clearable:R,inputRef:P,placeholder:B}=g,{readOnly:O=!1,disabled:C=!1,autoFocus:D=!1,focused:V,unstableFieldRef:L}=y,M=N.useRef(null),F=ei(P,M),q=_4({manager:a,internalPropsWithDefaults:y,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:W,error:G,localizedDigits:Q,parsedSelectedSections:Z,sectionOrder:de,state:ge,value:xe,clearValue:be,clearActiveSection:ke,setCharacterQuery:he,setSelectedSections:Se,setTempAndroidValueStr:Ae,updateSectionValue:Fe,updateValueFromValueStr:re,getSectionsFromValue:ye}=q,pe=v4({stateResponse:q}),te=f(xe),Ve=N.useMemo(()=>vW(ge.sections,Q,e),[ge.sections,Q,e]);function we(){const Qe=M.current.selectionStart??0;let pt;Qe<=Ve[0].startInInput||Qe>=Ve[Ve.length-1].endInInput?pt=1:pt=Ve.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Qe);const kt=pt===-1?Ve.length-1:pt-1;Se(kt)}function ze(Qe=0){var pt;ui(M.current)!==M.current&&((pt=M.current)==null||pt.focus(),Se(Qe))}const Me=Ue(Qe=>{x==null||x(Qe);const pt=M.current;t.start(0,()=>{!pt||pt!==M.current||X==null&&(pt.value.length&&Number(pt.selectionEnd)-Number(pt.selectionStart)===pt.value.length?Se("all"):we())})}),Re=Ue((Qe,...pt)=>{Qe.isDefaultPrevented()||(b==null||b(Qe,...pt),we())}),Ye=Ue(Qe=>{if(A==null||A(Qe),Qe.preventDefault(),O||C)return;const pt=Qe.clipboardData.getData("text");if(typeof Z=="number"){const kt=ge.sections[Z],Jt=/^[a-zA-Z]+$/.test(pt),An=/^[0-9]+$/.test(pt),Cn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(pt);if(kt.contentType==="letter"&&Jt||kt.contentType==="digit"&&An||kt.contentType==="digit-with-letter"&&Cn){he(null),Fe({section:kt,newSectionValue:pt,shouldGoToNextSection:!0});return}if(Jt||An)return}he(null),re(pt)}),Ge=Ue(Qe=>{S==null||S(Qe),Se(null)}),Oe=Ue(Qe=>{if(O)return;const pt=Qe.target.value;if(pt===""){be();return}const kt=Qe.nativeEvent.data,Jt=kt&&kt.length>1,An=Jt?kt:pt,Cn=xd(An);if(Z==="all"&&Se(X),X==null||Jt){re(Jt?kt:Cn);return}let Yt;if(Z==="all"&&Cn.length===1)Yt=Cn;else{const Hr=xd(d.getV6InputValueFromSections(Ve,Q,e));let gt=-1,Fn=-1;for(let ir=0;ir<Hr.length;ir+=1)gt===-1&&Hr[ir]!==Cn[ir]&&(gt=ir),Fn===-1&&Hr[Hr.length-ir-1]!==Cn[Cn.length-ir-1]&&(Fn=ir);const qn=Ve[X];if(gt<qn.start||Hr.length-Fn-1>qn.end)return;const mi=Cn.length-Hr.length+qn.end-xd(qn.endSeparator||"").length;Yt=Cn.slice(qn.start+xd(qn.startSeparator||"").length,mi)}if(Yt.length===0){K$()&&Ae(An),ke();return}pe({keyPressed:Yt,sectionIndex:X})}),Ne=Ue((Qe,...pt)=>{Qe.preventDefault(),I==null||I(Qe,...pt),be(),sD(M)?Se(de.startIndex):ze(0)}),dt=A4({manager:a,internalPropsWithDefaults:y,stateResponse:q}),_t=Ue(Qe=>{T==null||T(Qe),dt(Qe)}),yn=N.useMemo(()=>B!==void 0?B:d.getV6InputValueFromSections(ye(c.emptyValue),Q,e),[B,d,ye,c.emptyValue,Q,e]),On=N.useMemo(()=>ge.tempValueStrAndroid??d.getV6InputValueFromSections(ge.sections,Q,e),[ge.sections,d,ge.tempValueStrAndroid,Q,e]);N.useEffect(()=>{M.current&&M.current===ui(M.current)&&Se("all")},[]),Wn(()=>{function Qe(){if(!M.current)return;if(Z==null){M.current.scrollLeft&&(M.current.scrollLeft=0);return}if(M.current!==ui(M.current))return;const pt=M.current.scrollTop;if(Z==="all")M.current.select();else{const kt=Ve[Z],Jt=kt.type==="empty"?kt.startInInput-kt.startSeparator.length:kt.startInInput,An=kt.type==="empty"?kt.endInInput+kt.endSeparator.length:kt.endInInput;(Jt!==M.current.selectionStart||An!==M.current.selectionEnd)&&M.current===ui(M.current)&&M.current.setSelectionRange(Jt,An),r.start(0,()=>{M.current&&M.current===ui(M.current)&&M.current.selectionStart===M.current.selectionEnd&&(M.current.selectionStart!==Jt||M.current.selectionEnd!==An)&&Qe()})}M.current.scrollTop=pt}Qe()});const nt=N.useMemo(()=>X==null||ge.sections[X].contentType==="letter"?"text":"numeric",[X,ge.sections]),Tn=!(M.current&&M.current===ui(M.current))&&W;return N.useImperativeHandle(L,()=>({getSections:()=>ge.sections,getActiveSectionIndex:()=>{const Qe=M.current.selectionStart??0,pt=M.current.selectionEnd??0;if(Qe===0&&pt===0)return null;const kt=Qe<=Ve[0].startInInput?1:Ve.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Qe);return kt===-1?Ve.length-1:kt-1},setSelectedSections:Qe=>Se(Qe),focusField:ze,isFieldFocused:()=>sD(M)})),H({},g,{error:G,clearable:!!(R&&!W&&!O&&!C),onBlur:Ge,onClick:Re,onFocus:Me,onPaste:Ye,onKeyDown:_t,onClear:Ne,inputRef:F,enableAccessibleFieldDOMStructure:!1,placeholder:yn,inputMode:nt,autoComplete:"off",value:Tn?"":On,onChange:Oe,focused:V,disabled:C,readOnly:O,autoFocus:D,openPickerAriaLabel:te})};function sD(n){return n.current===ui(n.current)}const wW=n=>{const e=i4();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?yW:xW)(n)};function ub(n){const e=Wt(),t=l4();return N.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:Um(e,n.minDate,t.minDate),maxDate:Um(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function _W(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return N.useMemo(()=>({valueType:"date-time",validator:J1,internal_valueManager:Di,internal_fieldValueManager:OG,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:AW,internal_useOpenPickerButtonAriaLabel:bW}),[e])}function bW(n){const e=Wt(),t=Xa();return N.useMemo(()=>{const r=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(r)},[n,t,e])}function AW(n){const e=Wt(),t=E4(n),r=N.useMemo(()=>n.ampm??e.is12HourCycleInCurrentLocale(),[n.ampm,e]);return N.useMemo(()=>H({},n,t,{format:n.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[n,t,r,e])}function E4(n){const e=Wt(),t=l4();return N.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!n.minDateTime||!!n.maxDateTime||!!n.disableFuture||!!n.disablePast,minDate:Um(e,n.minDateTime??n.minDate,t.minDate),maxDate:Um(e,n.maxDateTime??n.maxDate,t.maxDate),minTime:n.minDateTime??n.minTime,maxTime:n.maxDateTime??n.maxTime}),[n.minDateTime,n.maxDateTime,n.minTime,n.maxTime,n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function db(n){const{ownerState:e}=nr(),t=_a();return N.useMemo(()=>H({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}function EW(n){return Rt("MuiPickersTextField",n)}Ot("MuiPickersTextField",["root","focused","disabled","error","required"]);function SW(n){return Rt("MuiPickersInputBase",n)}const Dd=Ot("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function TW(n){return Rt("MuiPickersSectionList",n)}const Eh=Ot("MuiPickersSectionList",["root","section","sectionContent"]),CW=["slots","slotProps","elements","sectionListRef","classes"],S4=Pe("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),T4=Pe("span",{name:"MuiPickersSectionList",slot:"Section"})({}),C4=Pe("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),I4=Pe("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),IW=n=>vt({root:["root"],section:["section"],sectionContent:["sectionContent"]},TW,n);function DW(n){const{slots:e,slotProps:t,element:r,classes:i}=n,{ownerState:a}=nr(),s=(e==null?void 0:e.section)??T4,o=St({elementType:s,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??I4,d=St({elementType:c,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??C4,p=St({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=St({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return v.jsxs(s,H({},o,{children:[v.jsx(f,H({},p)),v.jsx(c,H({},d)),v.jsx(f,H({},g))]}))}const RW=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=Be(r,CW),f=IW(c),{ownerState:p}=nr(),g=N.useRef(null),y=ei(t,g),x=S=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${S} before the mount of the component.`);return g.current};N.useImperativeHandle(o,()=>({getRoot(){return x("getRoot")},getSectionContainer(S){return x("getSectionContainer").querySelector(`.${Eh.section}[data-sectionindex="${S}"]`)},getSectionContent(S){return x("getSectionContent").querySelector(`.${Eh.section}[data-sectionindex="${S}"] .${Eh.sectionContent}`)},getSectionIndexFromDOMElement(S){const T=x("getSectionIndexFromDOMElement");if(S==null||!T.contains(S))return null;let I=null;return S.classList.contains(Eh.section)?I=S:S.classList.contains(Eh.sectionContent)&&(I=S.parentElement),I==null?null:Number(I.dataset.sectionindex)}}));const b=(i==null?void 0:i.root)??S4,A=St({elementType:b,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:y,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return v.jsx(b,H({},A,{children:A.contentEditable?s.map(({content:S,before:T,after:I})=>`${T.children}${S.children}${I.children}`).join(""):v.jsx(N.Fragment,{children:s.map((S,T)=>v.jsx(DW,{slots:i,slotProps:a,element:S,classes:f},T))})}))}),D4=N.createContext(null),ey=()=>{const n=N.useContext(D4);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},OW=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],MW=n=>Math.round(n*1e5)/1e5,ty=Pe("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>H({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${MW(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),fb=Pe(S4,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),PW=Pe(T4,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),kW=Pe(I4,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),NW=Pe(C4,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),LW=Pe("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(H({},xN)),BW=Pe("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),FW=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",t&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${vN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return vt(p,SW,n)};function oD(n,e,t,r){var i;if(n.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function VW(n,e){var i,a,s,o,c;let t=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=n.length-1;d>=n.length/2;d-=1)t+=oD(n[d],e,d,"end");else for(let d=0;d<n.length/2;d+=1)t+=oD(n[d],e,d,"start");return{activeBarWidth:t,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const hb=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:y,contentEditable:x,tabIndex:b,onInput:A,onPaste:S,onKeyDown:T,name:I,readOnly:R,inputProps:P,inputRef:B,sectionListRef:O,onFocus:C,onBlur:D,classes:V,ownerState:L}=r,M=Be(r,OW),F=ey(),q=N.useRef(null),X=N.useRef(null),W=N.useRef([]),G=ei(t,q),Q=ei(P==null?void 0:P.ref,B),Z=Y3();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const de=L??F,ge=ye=>{var pe;(pe=Z.onFocus)==null||pe.call(Z,ye),C==null||C(ye)},xe=ye=>{ge(ye)},be=ye=>{var pe,te;if(T==null||T(ye),ye.key==="Enter"&&!ye.defaultMuiPrevented){if((pe=q.current)!=null&&pe.dataset.multiInput)return;const Ve=(te=q.current)==null?void 0:te.closest("form"),we=Ve==null?void 0:Ve.querySelector('[type="submit"]');if(!Ve||!we)return;ye.preventDefault(),Ve.requestSubmit(we)}},ke=ye=>{var pe;(pe=Z.onBlur)==null||pe.call(Z,ye),D==null||D(ye)};N.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),N.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const he=FW(V,de),Se=(g==null?void 0:g.root)||ty,Ae=St({elementType:Se,externalSlotProps:y==null?void 0:y.root,externalForwardedProps:M,additionalProps:{"aria-invalid":Z.error,ref:G},className:he.root,ownerState:de}),Fe=(g==null?void 0:g.input)||fb,re=i.some(ye=>ye.content["data-range-position"]!==void 0);return N.useEffect(()=>{if(!re||!de.isPickerOpen)return;const{activeBarWidth:ye,sectionOffsets:pe}=VW(i,q);W.current=[pe[0],pe[1]],X.current&&(X.current.style.width=`${ye}px`)},[i,re,de.isPickerOpen]),v.jsxs(Se,H({},Ae,{children:[f,v.jsx(RW,{sectionListRef:O,elements:i,contentEditable:x,tabIndex:b,className:he.sectionsContainer,onFocus:ge,onBlur:ke,onInput:A,onPaste:S,onKeyDown:be,slots:{root:Fe,section:PW,sectionContent:kW,sectionSeparator:NW},slotProps:{root:H({},y==null?void 0:y.input,{ownerState:de}),sectionContent:{className:Dd.sectionContent},sectionSeparator:({separatorPosition:ye})=>({className:ye==="before"?Dd.sectionBefore:Dd.sectionAfter})}}),d,p?p(H({},Z)):null,v.jsx(LW,H({name:I,className:he.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:R,required:Z.required,disabled:Z.disabled,onFocus:xe},P,{ref:Q})),re&&v.jsx(BW,{className:he.activeBar,ref:X,ownerState:{sectionOffsets:W.current}})]}))});function jW(n){return Rt("MuiPickersOutlinedInput",n)}const Ra=H({},Dd,Ot("MuiPickersOutlinedInput",["root","notchedOutline","input"])),UW=["children","className","label","notched","shrink"],HW=Pe("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),lD=Pe("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),zW=Pe("legend",{shouldForwardProp:n=>ba(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function $W(n){const{className:e,label:t,notched:r}=n,i=Be(n,UW),a=ey();return v.jsx(HW,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:v.jsx(zW,{ownerState:a,notched:r,children:t?v.jsx(lD,{children:t}):v.jsx(lD,{className:"notranslate",children:""})})}))}const GW=["label","autoFocus","ownerState","classes","notched"],WW=Pe(ty,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ra.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ra.focused} .${Ra.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ra.disabled}`]:{[`& .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${Ra.error} .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var r;return((r=(n.vars??n).palette[t])==null?void 0:r.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${Ra.focused}:not(.${Ra.error}) .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),YW=Pe(fb,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),qW=n=>{const t=vt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},jW,n);return H({},n,t)},R4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=Be(r,GW),c=Y3(),d=qW(a);return v.jsx(hb,H({slots:{root:WW,input:YW},renderSuffix:f=>v.jsx($W,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?v.jsxs(N.Fragment,{children:[i,"","*"]}):i})},o,{label:i,classes:d,ref:t}))});R4.muiName="Input";function XW(n){return Rt("MuiPickersFilledInput",n)}const Ac=H({},Dd,Ot("MuiPickersFilledInput",["root","underline","input"])),KW=["label","autoFocus","disableUnderline","hiddenLabel","classes"],QW=Pe(ty,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Ac.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Ac.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ac.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ac.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ac.disabled}, .${Ac.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Ac.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),ZW=Pe(fb,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>ba(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),JW=(n,e)=>{const{inputHasUnderline:t}=e,i=vt({root:["root",t&&"underline"],input:["input"]},XW,n);return H({},n,i)},O4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=Be(r,KW),d=ey(),f=H({},d,{inputHasUnderline:!a}),p=JW(o,f);return v.jsx(hb,H({slots:{root:QW,input:ZW},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:t,ownerState:f}))});O4.muiName="Input";function eY(n){return Rt("MuiPickersFilledInput",n)}const Sh=H({},Dd,Ot("MuiPickersInput",["root","underline","input"])),tY=["label","autoFocus","disableUnderline","ownerState","classes"],nY=Pe(ty,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(r=>(n.vars??n).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sh.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sh.disabled}, .${Sh.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Sh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),rY=(n,e)=>{const{inputHasUnderline:t}=e,i=vt({root:["root",!t&&"underline"],input:["input"]},eY,n);return H({},n,i)},M4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=Be(r,tY),c=ey(),d=H({},c,{inputHasUnderline:!a}),f=rY(s,d);return v.jsx(hb,H({slots:{root:nY},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:t}))});M4.muiName="Input";const iY=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],aY={standard:M4,filled:O4,outlined:R4},sY=Pe(Si,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),oY=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldRequired:i}=e;return vt({root:["root",t&&!r&&"focused",r&&"disabled",i&&"required"]},EW,n)},P4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:y=!1,InputProps:x,inputProps:b,inputRef:A,sectionListRef:S,elements:T,areAllSectionsEmpty:I,onClick:R,onKeyDown:P,onKeyUp:B,onPaste:O,onInput:C,endAdornment:D,startAdornment:V,tabIndex:L,contentEditable:M,focused:F,value:q,onChange:X,fullWidth:W,id:G,name:Q,helperText:Z,FormHelperTextProps:de,label:ge,InputLabelProps:xe,"data-active-range-position":be}=r,ke=Be(r,iY),he=N.useRef(null),Se=ei(t,he),Ae=T0(G),Fe=Z&&Ae?`${Ae}-helper-text`:void 0,re=ge&&Ae?`${Ae}-label`:void 0,ye=db({disabled:r.disabled,required:r.required,readOnly:x==null?void 0:x.readOnly}),pe=N.useMemo(()=>H({},ye,{isFieldValueEmpty:I,isFieldFocused:F??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:W??!1,hasStartAdornment:!!(V??(x==null?void 0:x.startAdornment)),hasEndAdornment:!!(D??(x==null?void 0:x.endAdornment)),inputHasLabel:!!ge,isLabelShrunk:!!(xe!=null&&xe.shrink)}),[ye,I,F,f,r.size,c,W,V,D,x==null?void 0:x.startAdornment,x==null?void 0:x.endAdornment,ge,xe==null?void 0:xe.shrink]),te=oY(o,pe),Ve=aY[p],we={};return p==="outlined"?(xe&&typeof xe.shrink<"u"&&(we.notched=xe.shrink),we.label=ge):p==="filled"&&(we.hiddenLabel=y),v.jsx(D4.Provider,{value:pe,children:v.jsxs(sY,H({className:jt(te.root,s),ref:Se,focused:F,disabled:d,variant:p,error:f,color:c,fullWidth:W,required:g,ownerState:pe},ke,{children:[ge!=null&&ge!==""&&v.jsx(ma,H({htmlFor:Ae,id:re},xe,{children:ge})),v.jsx(Ve,H({elements:T,areAllSectionsEmpty:I,onClick:R,onKeyDown:P,onKeyUp:B,onInput:C,onPaste:O,onFocus:i,onBlur:a,endAdornment:D,startAdornment:V,tabIndex:L,contentEditable:M,value:q,onChange:X,id:Ae,fullWidth:W,inputProps:b,inputRef:A,sectionListRef:S,label:ge,name:Q,role:"group","aria-labelledby":re,"aria-describedby":Fe,"aria-live":Fe?"polite":void 0,"data-active-range-position":be},we,x)),Z&&v.jsx(wN,H({id:Fe},de,{children:Z}))]}))})}),lY=["enableAccessibleFieldDOMStructure"],cY=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],uY=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],dY=["ownerState"],fY=["ownerState"],hY=["ownerState"],pY=["ownerState"],gY=["InputProps","inputProps"],Gx=()=>{},mY=n=>{var T,I,R,P,B,O,C,D,V;let{enableAccessibleFieldDOMStructure:e}=n,t=Be(n,lY);if(e){const{InputProps:L,readOnly:M,onClear:F,clearable:q,clearButtonPosition:X,openPickerButtonPosition:W,openPickerAriaLabel:G}=t,Q=Be(t,cY),Z=Dc>=6&&((T=Q==null?void 0:Q.slotProps)!=null&&T.input)?n0((I=Q==null?void 0:Q.slotProps)==null?void 0:I.input,L):Gx;return{clearable:q,onClear:F,clearButtonPosition:X,openPickerButtonPosition:W,openPickerAriaLabel:G,textFieldProps:H({},Q,Dc>=6&&((R=Q==null?void 0:Q.slotProps)!=null&&R.input)?{slotProps:H({},Q==null?void 0:Q.slotProps,{input:de=>H({},ho(Z,de),{readOnly:M})})}:{InputProps:H({},L??{},{readOnly:M})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:x}=t,b=Be(t,uY),A=Dc>=6&&((P=b==null?void 0:b.slotProps)!=null&&P.input)?n0((B=b==null?void 0:b.slotProps)==null?void 0:B.input,o):Gx,S=Dc>=6&&((O=b==null?void 0:b.slotProps)!=null&&O.htmlInput)?n0((C=b==null?void 0:b.slotProps)==null?void 0:C.htmlInput,c):Gx;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:x,textFieldProps:H({},b,Dc>=6&&((D=b==null?void 0:b.slotProps)!=null&&D.input||(V=b==null?void 0:b.slotProps)!=null&&V.htmlInput)?{slotProps:H({},b==null?void 0:b.slotProps,{input:L=>H({},ho(A,L),{readOnly:s}),htmlInput:L=>H({},ho(S,L),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},pb=N.createContext({slots:{},slotProps:{},inputRef:void 0});function yY(n){var de,ge,xe;const{fieldResponse:e,defaultOpenPickerIcon:t}=n,r=Xa(),i=sb(),a=N.useContext(pb),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=mY(e),g=db(s),y=Ue(be=>{be.preventDefault(),i==null||i.setOpen(ke=>!ke)}),x=i?i.triggerStatus:"hidden",b=c?f:null,A=x!=="hidden"?p:null,S=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?wt:P4),T=a.slots.inputAdornment??_N,I=St({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),R=Be(I,dY),P=St({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),B=Be(P,fY),O=a.slots.openPickerButton??di,C=St({elementType:O,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:x==="disabled",onClick:y,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),D=Be(C,hY),V=a.slots.openPickerIcon??t,L=St({elementType:V,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),M=a.slots.clearButton??di,F=St({elementType:M,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&b!==A?b:!1},ownerState:g}),q=Be(F,pY),X=a.slots.clearIcon??fG,W=St({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=ei(s.ref,i==null?void 0:i.rootRef);const G={},Q=ho((Dc>=6&&((de=s==null?void 0:s.slotProps)==null?void 0:de.input))??s.InputProps,g);i&&(G.ref=i.triggerRef),!(Q!=null&&Q.startAdornment)&&(b==="start"||A==="start")&&(G.startAdornment=v.jsxs(T,H({},R,{children:[A==="start"&&v.jsx(O,H({},D,{children:v.jsx(V,H({},L))})),b==="start"&&v.jsx(M,H({},q,{children:v.jsx(X,H({},W))}))]}))),!(Q!=null&&Q.endAdornment)&&(b==="end"||A==="end")&&(G.endAdornment=v.jsxs(T,H({},B,{children:[b==="end"&&v.jsx(M,H({},q,{children:v.jsx(X,H({},W))})),A==="end"&&v.jsx(O,H({},D,{children:v.jsx(V,H({},L))}))]}))),!(G!=null&&G.endAdornment)&&!(G!=null&&G.startAdornment)&&a.slots.inputAdornment&&(G.endAdornment=v.jsx(T,H({},B))),b!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Dc>=6&&((ge=s==null?void 0:s.slotProps)!=null&&ge.input)?ho(n0(Q,G),g):H({},Q,G);return(xe=s==null?void 0:s.slotProps)==null||delete xe.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),v.jsx(S,H({},s,{InputProps:Z}))}function n0(n,e){return n?e?t=>H({},ho(e,t),ho(n,t)):n:e}function vY(n){const{ref:e,externalForwardedProps:t,slotProps:r}=n,i=N.useContext(pb),a=sb(),s=db(t),{InputProps:o,inputProps:c}=t,d=Be(t,gY),f=St({elementType:P4,externalSlotProps:n0(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function xY(n){const{slots:e={},slotProps:t={},inputRef:r,children:i}=n,a=N.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return v.jsx(pb.Provider,{value:a,children:i})}const wY=n=>{const e=_W(n);return wW({manager:e,props:n})},_Y=["slots","slotProps"],k4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=Be(r,_Y),o=vY({slotProps:a,ref:t,externalForwardedProps:s}),c=wY(o);return v.jsx(xY,{slots:i,slotProps:a,inputRef:s.inputRef,children:v.jsx(yY,{fieldResponse:c,defaultOpenPickerIcon:cG})})}),N4=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Wt();return N.useCallback(d=>lb({adapter:c,value:d,timezone:o,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,n,e,t,r,i,a,s,o])},bY=(n,e)=>(t,r)=>{switch(r.type){case"setVisibleDate":return H({},t,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,t.currentMonth)&&!n&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(t.currentMonth)===i)return t;let a=e.setTimezone(t.currentMonth,i);return e.getMonth(a)!==e.getMonth(t.currentMonth)&&(a=e.setMonth(a,e.getMonth(t.currentMonth))),H({},t,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},AY=n=>{const{value:e,referenceDate:t,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=n,y=Wt(),x=N.useRef(bY(!!d,y)).current,b=N.useMemo(()=>Di.getInitialReferenceValue({value:e,adapter:y,timezone:p,props:n,referenceDate:t,granularity:ka.day}),[t,p]),[A,S]=N.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:y.startOfMonth(b),slideDirection:"left"}),T=N4({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});N.useEffect(()=>{S({type:"changeMonthTimezone",newTimezone:y.getTimezone(b)})},[b,y]);const I=Ue(({target:P,reason:B})=>{if(B==="cell-interaction"&&A.focusedDay!=null&&y.isSameDay(P,A.focusedDay))return;const O=B==="cell-interaction";let C,D;if(B==="cell-interaction")C=g(P,A.currentMonth),D=P;else if(C=y.isSameMonth(P,A.currentMonth)?A.currentMonth:y.startOfMonth(P),D=P,T(D)){const M=y.startOfMonth(P),F=y.endOfMonth(P);D=m0({adapter:y,date:D,minDate:y.isBefore(s,M)?M:s,maxDate:y.isAfter(a,F)?F:a,disablePast:i,disableFuture:r,isDateDisabled:T,timezone:p})}const V=!y.isSameMonth(A.currentMonth,C),L=!y.isSameYear(A.currentMonth,C);V&&(o==null||o(C)),L&&(c==null||c(y.startOfYear(C))),S({type:"setVisibleDate",month:C,direction:y.isAfterDay(C,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&D!=null&&y.isSameDay(D,A.focusedDay)?A.focusedDay:D,skipAnimation:O})}),R=N.useCallback(()=>{S({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:A,setVisibleDate:I,isDateDisabled:T,onMonthSwitchingAnimationEnd:R}},EY=n=>Rt("MuiPickersFadeTransitionGroup",n);Ot("MuiPickersFadeTransitionGroup",["root"]);const SY=["children"],TY=n=>vt({root:["root"]},EY,n),CY=Pe(q3,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function L4(n){const e=xt({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=Be(e,SY),c=TY(a),d=Qc();return r?s:v.jsx(CY,{className:jt(c.root,t),ownerState:o,children:v.jsx(x1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const IY=n=>Rt("MuiPickersSlideTransition",n),da=Ot("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),DY=["children","className","reduceAnimations","slideDirection","transKey","classes"],RY=(n,e)=>{const{slideDirection:t}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return vt(r,IY,n)},OY=Pe(q3,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${da["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${da["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${da.slideEnterActive}`]:e.slideEnterActive},{[`.${da.slideExit}`]:e.slideExit},{[`.${da["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${da["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${da["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${da["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${da.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${da.slideExit}`]:{transform:"translate(0%)"},[`& .${da["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${da["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function MY(n){const e=xt({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=Be(e,DY),{ownerState:d}=nr(),f=H({},d,{slideDirection:a}),p=RY(o,f),g=Qc();if(i)return v.jsx("div",{className:jt(p.root,r),children:t});const y={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return v.jsx(OY,{className:jt(p.root,r),childFactory:x=>N.cloneElement(x,{classNames:y}),role:"presentation",ownerState:f,children:v.jsx(bN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:y},c,{children:t}),s)})}const PY=n=>Rt("MuiDayCalendar",n);Ot("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const kY=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],NY=["ownerState"],LY=n=>vt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},PY,n),B4=(v0+Z1*2)*6,BY=Pe("div",{name:"MuiDayCalendar",slot:"Root"})({}),FY=Pe("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),VY=Pe(ne,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),jY=Pe(ne,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),UY=Pe(ne,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>H({},n.typography.caption,{width:v0,height:v0,padding:0,margin:`0 ${Z1}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),HY=Pe("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:B4}),zY=Pe(MY,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:B4}),$Y=Pe("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),GY=Pe("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Z1}px 0`,display:"flex",justifyContent:"center"});function WY(n){let{parentProps:e,day:t,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=n,c=Be(n,kY);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:y,slotProps:x,timezone:b}=e,A=Wt(),S=df(b),T=r!=null&&A.isSameDay(t,r),I=o&&T,R=i.some(q=>A.isSameDay(q,t)),P=A.isSameDay(t,S),B=N.useMemo(()=>d||a(t),[d,a,t]),O=N.useMemo(()=>A.getMonth(t)!==s,[A,t,s]),C=g4({day:t,selected:R,disabled:B,today:P,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),D=(y==null?void 0:y.day)??oW,V=St({elementType:D,externalSlotProps:x==null?void 0:x.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(t).valueOf()},c),ownerState:H({},C,{day:t,isDayDisabled:B,isDaySelected:R})}),L=Be(V,NY),M=N.useMemo(()=>{const q=A.startOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.startOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]),F=N.useMemo(()=>{const q=A.endOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.endOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]);return v.jsx(D,H({},L,{day:t,disabled:B,autoFocus:!O&&I,today:P,outsideCurrentMonth:O,isFirstVisibleCell:M,isLastVisibleCell:F,selected:R,tabIndex:T?0:-1,"aria-selected":R,"aria-current":P?"date":void 0}))}function YY(n){const e=xt({props:n,name:"MuiDayCalendar"}),t=Wt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:y,renderLoading:x=()=>v.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:A,disablePast:S,disableFuture:T,minDate:I,maxDate:R,shouldDisableDate:P,shouldDisableMonth:B,shouldDisableYear:O,dayOfWeekFormatter:C=pe=>t.format(pe,"weekdayShort").charAt(0).toUpperCase(),hasFocus:D,onFocusedViewChange:V,gridLabelId:L,displayWeekNumber:M,fixedWeekNumber:F,timezone:q}=e,X=df(q),W=LY(a),G=_a(),Q=N4({shouldDisableDate:P,shouldDisableMonth:B,shouldDisableYear:O,minDate:I,maxDate:R,disablePast:S,disableFuture:T,timezone:q}),Z=Xa(),de=Ue(pe=>{g||f(pe)}),ge=pe=>{Q(pe)||(r(pe),V==null||V(!0))},xe=Ue((pe,te)=>{switch(pe.key){case"ArrowUp":ge(t.addDays(te,-7)),pe.preventDefault();break;case"ArrowDown":ge(t.addDays(te,7)),pe.preventDefault();break;case"ArrowLeft":{const Ve=t.addDays(te,G?1:-1),we=t.addMonths(te,G?1:-1),ze=m0({adapter:t,date:Ve,minDate:G?Ve:t.startOfMonth(we),maxDate:G?t.endOfMonth(we):Ve,isDateDisabled:Q,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"ArrowRight":{const Ve=t.addDays(te,G?-1:1),we=t.addMonths(te,G?-1:1),ze=m0({adapter:t,date:Ve,minDate:G?t.startOfMonth(we):Ve,maxDate:G?Ve:t.endOfMonth(we),isDateDisabled:Q,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"Home":ge(t.startOfWeek(te)),pe.preventDefault();break;case"End":ge(t.endOfWeek(te)),pe.preventDefault();break;case"PageUp":ge(t.addMonths(te,1)),pe.preventDefault();break;case"PageDown":ge(t.addMonths(te,-1)),pe.preventDefault();break}}),be=Ue((pe,te)=>ge(te)),ke=Ue((pe,te)=>{c!=null&&t.isSameDay(c,te)&&(V==null||V(!1))}),he=t.getMonth(s),Se=t.getYear(s),Ae=N.useMemo(()=>o.filter(pe=>!!pe).map(pe=>t.startOfDay(pe)),[t,o]),Fe=`${Se}-${he}`,re=N.useMemo(()=>N.createRef(),[Fe]),ye=N.useMemo(()=>{const pe=t.getWeekArray(s);let te=t.addMonths(s,1);for(;F&&pe.length<F;){const Ve=t.getWeekArray(te),we=t.isSameDay(pe[pe.length-1][0],Ve[0][0]);Ve.slice(we?1:0).forEach(ze=>{pe.length<F&&pe.push(ze)}),te=t.addMonths(te,1)}return pe},[s,F,t]);return v.jsxs(BY,{role:"grid","aria-labelledby":L,className:W.root,children:[v.jsxs(FY,{role:"row",className:W.header,children:[M&&v.jsx(jY,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:W.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),U$(t,X).map((pe,te)=>v.jsx(VY,{variant:"caption",role:"columnheader","aria-label":t.format(pe,"weekday"),className:W.weekDayLabel,children:C(pe)},te.toString()))]}),d?v.jsx(HY,{className:W.loadingContainer,children:x()}):v.jsx(zY,H({transKey:Fe,onExited:p,reduceAnimations:y,slideDirection:b,className:jt(i,W.slideTransition)},A,{nodeRef:re,children:v.jsx($Y,{ref:re,role:"rowgroup",className:W.monthContainer,children:ye.map((pe,te)=>v.jsxs(GY,{role:"row",className:W.weekContainer,"aria-rowindex":te+1,children:[M&&v.jsx(UY,{className:W.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(t.getWeekNumber(pe[0])),children:Z.calendarWeekNumberText(t.getWeekNumber(pe[0]))}),pe.map((Ve,we)=>v.jsx(WY,{parentProps:e,day:Ve,selectedDays:Ae,isViewFocused:D,focusedDay:c,onKeyDown:xe,onFocus:be,onBlur:ke,onDaySelect:de,isDateDisabled:Q,currentMonthNumber:he,"aria-colindex":we+1},Ve.toString()))]},`week-${pe[0]}`))})}))]})}function F4(n){return Rt("MuiMonthCalendar",n)}const Fg=Ot("MuiMonthCalendar",["root","button","disabled","selected"]),qY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],XY=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return vt(t,F4,n)},KY=Pe("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Fg.disabled}`]:e.disabled},{[`&.${Fg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Fg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Fg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),QY=N.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Be(e,qY),x=N.useRef(null),{ownerState:b}=nr(),A=H({},b,{isMonthDisabled:i,isMonthSelected:a}),S=XY(r,A);Wn(()=>{var R;t&&((R=x.current)==null||R.focus())},[t]);const T=(p==null?void 0:p.monthButton)??KY,I=St({elementType:T,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:R=>o(R,s),onKeyDown:R=>c(R,s),onFocus:R=>d(R,s),onBlur:R=>f(R,s)},ownerState:A,className:S.button});return v.jsx(T,H({},I))}),ZY=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],JY=n=>vt({root:["root"]},F4,n);function eq(n,e){const t=xt({props:n,name:e}),r=ub(t);return H({},t,r,{monthsPerRow:t.monthsPerRow??3})}const cD=(n,e,t,r,i)=>!!(n===e&&r&&i.isSameYear(t,r)),tq=Pe("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Gd,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),nq=N.forwardRef(function(e,t){const r=eq(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:y,maxDate:x,minDate:b,onChange:A,shouldDisableMonth:S,readOnly:T,onMonthFocus:I,hasFocus:R,onFocusedViewChange:P,monthsPerRow:B,timezone:O,gridLabelId:C,slots:D,slotProps:V}=r,L=Be(r,ZY),{value:M,handleValueChange:F,timezone:q}=nu({name:"MonthCalendar",timezone:O,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Di}),X=df(q),W=_a(),G=Wt(),{ownerState:Q}=nr(),Z=N.useMemo(()=>Di.getInitialReferenceValue({value:M,adapter:G,props:r,timezone:q,referenceDate:f,granularity:ka.month}),[]),de=JY(o),ge=N.useMemo(()=>G.getMonth(X),[G,X]),xe=N.useMemo(()=>M!=null?G.getMonth(M):null,[M,G]),[be,ke]=N.useState(()=>xe||G.getMonth(Z)),[he,Se]=Ld({name:"MonthCalendar",state:"hasFocus",controlled:R,default:i??!1}),Ae=Ue(we=>{Se(we),P&&P(we)}),Fe=N.useCallback(we=>{const ze=G.startOfMonth(y&&G.isAfter(X,b)?X:b),Me=G.startOfMonth(g&&G.isBefore(X,x)?X:x),Re=G.startOfMonth(we);return G.isBefore(Re,ze)||G.isAfter(Re,Me)?!0:S?S(Re):!1},[g,y,x,b,X,S,G]),re=Ue((we,ze)=>{if(T)return;const Me=M&&s&&!G.isSameYear(M,s)?G.setYear(M,G.getYear(s)):M,Re=G.setMonth(Me??Z,ze);F(Re)}),ye=Ue(we=>{Fe(G.setMonth(M??s??Z,we))||(ke(we),Ae(!0),I&&I(we))});N.useEffect(()=>{ke(we=>xe!==null&&we!==xe?xe:we)},[xe]);const pe=Ue((we,ze)=>{switch(we.key){case"ArrowUp":ye((12+ze-3)%12),we.preventDefault();break;case"ArrowDown":ye((12+ze+3)%12),we.preventDefault();break;case"ArrowLeft":ye((12+ze+(W?1:-1))%12),we.preventDefault();break;case"ArrowRight":ye((12+ze+(W?-1:1))%12),we.preventDefault();break}}),te=Ue((we,ze)=>{ye(ze)}),Ve=Ue((we,ze)=>{be===ze&&Ae(!1)});return v.jsx(tq,H({ref:t,className:jt(de.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":C,monthsPerRow:B},L,{children:eb(G,s??M??Z).map(we=>{const ze=G.getMonth(we),Me=G.format(we,"monthShort"),Re=G.format(we,"month"),Ye=cD(ze,xe,we,M,G),Ge=p||Fe(we);return v.jsx(QY,{selected:Ye,value:ze,onClick:re,onKeyDown:pe,autoFocus:he&&ze===be,disabled:Ge,tabIndex:ze===be&&!Ge?0:-1,onFocus:te,onBlur:Ve,"aria-current":cD(ze,ge,we,X,G)?"date":void 0,"aria-label":Re,slots:D,slotProps:V,classes:o,children:Me},Me)})}))});function V4(n){return Rt("MuiYearCalendar",n)}const Vg=Ot("MuiYearCalendar",["root","button","disabled","selected"]),rq=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],iq=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return vt(t,V4,n)},aq=Pe("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Vg.disabled}`]:e.disabled},{[`&.${Vg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:Rs(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Rs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Vg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Vg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),sq=N.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Be(e,rq),x=N.useRef(null),{ownerState:b}=nr(),A=H({},b,{isYearDisabled:i,isYearSelected:a}),S=iq(r,A);Wn(()=>{var R;t&&((R=x.current)==null||R.focus())},[t]);const T=(p==null?void 0:p.yearButton)??aq,I=St({elementType:T,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:R=>o(R,s),onKeyDown:R=>c(R,s),onFocus:R=>d(R,s),onBlur:R=>f(R,s)},ownerState:A,className:S.button});return v.jsx(T,H({},I))}),oq=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],lq=n=>vt({root:["root"]},V4,n);function cq(n,e){const t=xt({props:n,name:e}),r=ub(t);return H({},t,r,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const uq=Pe("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Gd,maxHeight:CG,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),dq=Pe("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),fq=N.forwardRef(function(e,t){const r=cq(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:y,minDate:x,onChange:b,readOnly:A,shouldDisableYear:S,onYearFocus:T,hasFocus:I,onFocusedViewChange:R,yearsOrder:P,yearsPerRow:B,timezone:O,gridLabelId:C,slots:D,slotProps:V}=r,L=Be(r,oq),{value:M,handleValueChange:F,timezone:q}=nu({name:"YearCalendar",timezone:O,value:o,defaultValue:c,referenceDate:d,onChange:b,valueManager:Di}),X=df(q),W=_a(),G=Wt(),{ownerState:Q}=nr(),Z=N.useMemo(()=>Di.getInitialReferenceValue({value:M,adapter:G,props:r,timezone:q,referenceDate:d,granularity:ka.year}),[]),de=lq(s),ge=N.useMemo(()=>G.getYear(X),[G,X]),xe=N.useMemo(()=>M!=null?G.getYear(M):null,[M,G]),[be,ke]=N.useState(()=>xe||G.getYear(Z)),[he,Se]=Ld({name:"YearCalendar",state:"hasFocus",controlled:I,default:i??!1}),Ae=Ue(Oe=>{Se(Oe),R&&R(Oe)}),Fe=N.useCallback(Oe=>{if(g&&G.isBeforeYear(Oe,X)||p&&G.isAfterYear(Oe,X)||x&&G.isBeforeYear(Oe,x)||y&&G.isAfterYear(Oe,y))return!0;if(!S)return!1;const Ne=G.startOfYear(Oe);return S(Ne)},[p,g,y,x,X,S,G]),re=Ue((Oe,Ne)=>{if(A)return;const dt=G.setYear(M??Z,Ne);F(dt)}),ye=Ue(Oe=>{Fe(G.setYear(M??Z,Oe))||(ke(Oe),Ae(!0),T==null||T(Oe))});N.useEffect(()=>{ke(Oe=>xe!==null&&Oe!==xe?xe:Oe)},[xe]);const pe=P!=="desc"?B*1:B*-1,te=W&&P==="asc"||!W&&P==="desc"?-1:1,Ve=Ue((Oe,Ne)=>{switch(Oe.key){case"ArrowUp":ye(Ne-pe),Oe.preventDefault();break;case"ArrowDown":ye(Ne+pe),Oe.preventDefault();break;case"ArrowLeft":ye(Ne-te),Oe.preventDefault();break;case"ArrowRight":ye(Ne+te),Oe.preventDefault();break}}),we=Ue((Oe,Ne)=>{ye(Ne)}),ze=Ue((Oe,Ne)=>{be===Ne&&Ae(!1)}),Me=N.useRef(null),Re=ei(t,Me);N.useEffect(()=>{if(i||Me.current===null)return;const Oe=Me.current.querySelector('[tabindex="0"]');if(!Oe)return;const Ne=Oe.offsetHeight,dt=Oe.offsetTop,_t=Me.current.clientHeight,yn=Me.current.scrollTop,On=dt+Ne;Ne>_t||dt<yn||(Me.current.scrollTop=On-_t/2-Ne/2)},[i]);const Ye=G.getYearRange([x,y]);P==="desc"&&Ye.reverse();let Ge=B-Ye.length%B;return Ge===B&&(Ge=0),v.jsxs(uq,H({ref:Re,className:jt(de.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":C,yearsPerRow:B},L,{children:[Ye.map(Oe=>{const Ne=G.getYear(Oe),dt=Ne===xe,_t=f||Fe(Oe);return v.jsx(sq,{selected:dt,value:Ne,onClick:re,onKeyDown:Ve,autoFocus:he&&Ne===be,disabled:_t,tabIndex:Ne===be&&!_t?0:-1,onFocus:we,onBlur:ze,"aria-current":ge===Ne?"date":void 0,slots:D,slotProps:V,classes:s,children:G.format(Oe,"year")},G.format(Oe,"year"))}),Array.from({length:Ge},(Oe,Ne)=>v.jsx(dq,{},Ne))]}))}),hq=n=>Rt("MuiPickersCalendarHeader",n),pq=Ot("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),gq=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],mq=["ownerState"],yq=n=>vt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},hq,n),vq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),xq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),wq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),_q=Pe(di,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${pq.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),bq=Pe(sG,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),Aq=N.forwardRef(function(e,t){const r=Xa(),i=Wt(),a=xt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:y,onMonthChange:x,onViewChange:b,view:A,reduceAnimations:S,views:T,labelId:I,className:R,classes:P,timezone:B,format:O=`${i.formats.month} ${i.formats.year}`}=a,C=Be(a,gq),{ownerState:D}=nr(),V=yq(P),L=(s==null?void 0:s.switchViewButton)??_q,M=St({elementType:L,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},D,{view:A}),className:V.switchViewButton}),F=(s==null?void 0:s.switchViewIcon)??bq,q=St({elementType:F,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:D,className:V.switchViewIcon}),X=Be(q,mq),W=()=>x(i.addMonths(c,1)),G=()=>x(i.addMonths(c,-1)),Q=SG(c,{disableFuture:f,maxDate:g,timezone:B}),Z=TG(c,{disablePast:p,minDate:y,timezone:B}),de=()=>{if(!(T.length===1||!b||d))if(T.length===2)b(T.find(xe=>xe!==A)||T[0]);else{const xe=T.indexOf(A)!==0?0:1;b(T[xe])}};if(T.length===1&&T[0]==="year")return null;const ge=i.formatByString(c,O);return v.jsxs(vq,H({},C,{ownerState:D,className:jt(V.root,R),ref:t,children:[v.jsxs(xq,{role:"presentation",onClick:de,ownerState:D,"aria-live":"polite",className:V.labelContainer,children:[v.jsx(L4,{reduceAnimations:S,transKey:ge,children:v.jsx(wq,{id:I,ownerState:D,className:V.label,children:ge})}),T.length>1&&!d&&v.jsx(L,H({},M,{children:v.jsx(F,H({},X))}))]}),v.jsx(x1,{in:A==="day",appear:!S,enter:!S,children:v.jsx(wG,{slots:s,slotProps:o,onGoToPrevious:G,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:W,isNextDisabled:Q,nextLabel:r.nextMonth})})]}))}),Eq="@media (prefers-reduced-motion: reduce)",Rd=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),uD=Rd&&Rd[1]?parseInt(Rd[1],10):null,dD=Rd&&Rd[2]?parseInt(Rd[2],10):null,Sq=uD&&uD<10||dD&&dD<13||!1;function j4(n){const e=v1(Eq,{defaultMatches:!1});return n??(e||Sq)}const Tq=n=>Rt("MuiDateCalendar",n);Ot("MuiDateCalendar",["root","viewTransitionContainer"]);const Cq=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],Iq=n=>vt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Tq,n);function Dq(n,e){const t=xt({props:n,name:e}),r=j4(t.reduceAnimations),i=ub(t);return H({},t,i,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:r,renderLoading:t.renderLoading??(()=>v.jsx("span",{children:"..."}))})}const Rq=Pe(ob,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Wd}),Oq=Pe(L4,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),Mq=N.forwardRef(function(e,t){const r=Wt(),{ownerState:i}=nr(),a=T0(),s=Dq(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:y,onChange:x,onMonthChange:b,reduceAnimations:A,shouldDisableDate:S,shouldDisableMonth:T,shouldDisableYear:I,view:R,views:P,openTo:B,className:O,classes:C,disabled:D,readOnly:V,minDate:L,maxDate:M,disableHighlightToday:F,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:W,fixedWeekNumber:G,dayOfWeekFormatter:Q,slots:Z,slotProps:de,loading:ge,renderLoading:xe,displayWeekNumber:be,yearsOrder:ke,yearsPerRow:he,monthsPerRow:Se,timezone:Ae}=s,Fe=Be(s,Cq),{value:re,handleValueChange:ye,timezone:pe}=nu({name:"DateCalendar",timezone:Ae,value:d,defaultValue:f,referenceDate:p,onChange:x,valueManager:Di}),{view:te,setView:Ve,focusedView:we,setFocusedView:ze,goToNextView:Me,setValueAndGoToNextView:Re}=Q1({view:R,views:P,openTo:B,onChange:ye,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:Ye,calendarState:Ge,setVisibleDate:Oe,isDateDisabled:Ne,onMonthSwitchingAnimationEnd:dt}=AY({value:re,referenceDate:p,reduceAnimations:A,onMonthChange:b,minDate:L,maxDate:M,shouldDisableDate:S,disablePast:y,disableFuture:g,timezone:pe,getCurrentMonthFromVisibleDate:(gt,Fn)=>r.isSameMonth(gt,Fn)?Fn:r.startOfMonth(gt)}),_t=D&&re||L,yn=D&&re||M,On=`${a}-grid-label`,nt=we!==null,it=(Z==null?void 0:Z.calendarHeader)??Aq,Tn=St({elementType:it,externalSlotProps:de==null?void 0:de.calendarHeader,additionalProps:{views:P,view:te,currentMonth:Ge.currentMonth,onViewChange:Ve,onMonthChange:gt=>Oe({target:gt,reason:"header-navigation"}),minDate:_t,maxDate:yn,disabled:D,disablePast:y,disableFuture:g,reduceAnimations:A,timezone:pe,labelId:On},ownerState:i}),Qe=Ue(gt=>{const Fn=r.startOfMonth(gt),qn=r.endOfMonth(gt),zr=Ne(gt)?m0({adapter:r,date:gt,minDate:r.isBefore(L,Fn)?Fn:L,maxDate:r.isAfter(M,qn)?qn:M,disablePast:y,disableFuture:g,isDateDisabled:Ne,timezone:pe}):gt;zr?(Re(zr,"finish"),Oe({target:zr,reason:"cell-interaction"})):(Me(),Oe({target:Fn,reason:"cell-interaction"}))}),pt=Ue(gt=>{const Fn=r.startOfYear(gt),qn=r.endOfYear(gt),zr=Ne(gt)?m0({adapter:r,date:gt,minDate:r.isBefore(L,Fn)?Fn:L,maxDate:r.isAfter(M,qn)?qn:M,disablePast:y,disableFuture:g,isDateDisabled:Ne,timezone:pe}):gt;zr?(Re(zr,"finish"),Oe({target:zr,reason:"cell-interaction"})):(Me(),Oe({target:Fn,reason:"cell-interaction"}))}),kt=Ue(gt=>ye(gt&&jm(r,gt,re??Ye),"finish",te));N.useEffect(()=>{r.isValid(re)&&Oe({target:re,reason:"controlled-value-change"})},[re]);const Jt=Iq(C),An={disablePast:y,disableFuture:g,maxDate:M,minDate:L},Cn={disableHighlightToday:F,readOnly:V,disabled:D,timezone:pe,gridLabelId:On,slots:Z,slotProps:de},Yt=N.useRef(te);N.useEffect(()=>{Yt.current!==te&&(we===Yt.current&&ze(te,!0),Yt.current=te)},[we,ze,te]);const Hr=N.useMemo(()=>[re],[re]);return v.jsxs(Rq,H({ref:t,className:jt(Jt.root,O),ownerState:i},Fe,{children:[v.jsx(it,H({},Tn,{slots:Z,slotProps:de})),v.jsx(Oq,{reduceAnimations:A,className:Jt.viewTransitionContainer,transKey:te,ownerState:i,children:v.jsxs("div",{children:[te==="year"&&v.jsx(fq,H({},An,Cn,{value:re,onChange:pt,shouldDisableYear:I,hasFocus:nt,onFocusedViewChange:gt=>ze("year",gt),yearsOrder:ke,yearsPerRow:he,referenceDate:Ye})),te==="month"&&v.jsx(nq,H({},An,Cn,{currentMonth:Ge.currentMonth,hasFocus:nt,className:O,value:re,onChange:Qe,shouldDisableMonth:T,onFocusedViewChange:gt=>ze("month",gt),monthsPerRow:Se,referenceDate:Ye})),te==="day"&&v.jsx(YY,H({},Ge,An,Cn,{onMonthSwitchingAnimationEnd:dt,hasFocus:nt,onFocusedDayChange:gt=>Oe({target:gt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:Hr,onSelectedDaysChange:kt,shouldDisableDate:S,shouldDisableMonth:T,shouldDisableYear:I,onFocusedViewChange:gt=>ze("day",gt),showDaysOutsideCurrentMonth:W,fixedWeekNumber:G,dayOfWeekFormatter:Q,displayWeekNumber:be,loading:ge,renderLoading:xe}))]})})]}))});function U4(n){return Rt("MuiPickersToolbar",n)}const Pq=Ot("MuiPickersToolbar",["root","title","content"]);function H4(){const{ownerState:n}=nr(),e=_a();return N.useMemo(()=>H({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const kq=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],Nq=n=>vt({root:["root"],title:["title"],content:["content"]},U4,n),Lq=Pe("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Bq=Pe("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>ba(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Fq=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=Be(r,kq),g=H4(),y=Nq(s);return c?null:v.jsxs(Lq,H({ref:t,className:jt(y.root,a),ownerState:g},p,{children:[v.jsx(ne,{color:"text.secondary",variant:"overline",id:d,className:y.title,children:o}),v.jsx(Bq,{className:y.content,ownerState:g,landscapeDirection:f,children:i})]}))});function Vq(n){return Rt("MuiPickerPopper",n)}Ot("MuiPickerPopper",["root","paper"]);const jq=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Uq=n=>vt({root:["root"],paper:["paper"]},Vq,n),Hq=Pe(X3,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),zq=Pe(ga,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>new Set(["top","top-start","top-end"]).has(n),style:{transformOrigin:"bottom center"}}]});function $q(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function Gq(n,e){const t=N.useRef(!1),r=N.useRef(!1),i=N.useRef(null),a=N.useRef(!1);N.useEffect(()=>{if(!n)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[n]);const s=Ue(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=qh(i.current);if(!i.current||"clientX"in c&&$q(c,f))return;if(t.current){t.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return N.useEffect(()=>{if(n){const c=qh(i.current),d=()=>{t.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[n,s]),N.useEffect(()=>{if(n){const c=qh(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[n,s]),[i,o,o]}const Wq=N.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=n,d=Be(n,jq),f=St({elementType:t,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return v.jsx(t,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function Yq(n){const e=xt({props:n,name:"MuiPickerPopper"}),{children:t,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=jl(),{ownerState:f,rootRefObject:p}=nr(),{dismissViews:g,getCurrentViewMode:y,onPopperExited:x,triggerElement:b,viewContainerRole:A}=nr();N.useEffect(()=>{function G(Q){o&&Q.key==="Escape"&&g()}return document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[g,o]);const S=N.useRef(null);N.useEffect(()=>{A==="tooltip"||y()==="field"||(o?S.current=ui(p.current):S.current&&S.current instanceof HTMLElement&&setTimeout(()=>{S.current instanceof HTMLElement&&S.current.focus()}))},[o,A,y,p]);const T=Uq(s),I=Ue(()=>{A==="tooltip"?kG(()=>{var G,Q;(G=p.current)!=null&&G.contains(ui(p.current))||(Q=c.current)!=null&&Q.contains(ui(c.current))||g()}):g()}),[R,P,B]=Gq(o,I),O=N.useRef(null),C=ei(O,c),D=ei(C,R),V=G=>{G.key==="Escape"&&(G.stopPropagation(),g())},L=(i==null?void 0:i.desktopTransition)??d?x1:AN,M=(i==null?void 0:i.desktopTrapFocus)??EN,F=(i==null?void 0:i.desktopPaper)??zq,q=(i==null?void 0:i.popper)??Hq,X=St({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:b,onKeyDown:V},className:T.root,ownerState:f}),W=N.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return v.jsx(q,H({},X,{children:({TransitionProps:G})=>v.jsx(M,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:v.jsx(L,H({},G,a==null?void 0:a.desktopTransition,{onExited:Q=>{var Z,de,ge;x==null||x(),(de=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||de.call(Z,Q),(ge=G==null?void 0:G.onExited)==null||ge.call(G)},children:v.jsx(Wq,{PaperComponent:F,ownerState:W,ref:D,onPaperClick:P,onPaperTouchStart:B,paperClasses:T.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:t})}))}))}))}function fD(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function qq(n,e){const[t,r]=N.useState(fD);return Wn(()=>{const i=()=>{r(fD())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),PG(n,["hours","minutes","seconds"])?"portrait":e??t}function Xq(n){const{props:e,valueManager:t,validator:r}=n,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:y}=e,{current:x}=N.useRef(a),{current:b}=N.useRef(i!==void 0),{current:A}=N.useRef(p!==void 0),S=Wt(),{timezone:T,value:I,handleValueChange:R}=nu({name:"a picker component",timezone:c,value:i,defaultValue:x,referenceDate:o,onChange:s,valueManager:t}),[P,B]=N.useState(()=>({open:!1,lastExternalValue:I,clockShallowValue:void 0,lastCommittedValue:I,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=w4({props:e,validator:r,timezone:T,value:I,onError:e.onError}),C=Ue(M=>{const F=typeof M=="function"?M(P.open):M;A||B(q=>H({},q,{open:F})),F&&g&&g(),F||y==null||y()}),D=Ue((M,F)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:W,shortcut:G,shouldClose:Q=q==="accept"}=F??{};let Z,de;!X&&!b&&!P.hasBeenModifiedSinceMount?(Z=!0,de=q==="accept"):(Z=!t.areValuesEqual(S,M,I),de=q==="accept"&&!t.areValuesEqual(S,M,P.lastCommittedValue)),B(be=>H({},be,{clockShallowValue:Z?void 0:be.clockShallowValue,lastCommittedValue:de?M:be.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ge=null;const xe=()=>(ge||(ge={validationError:W??O(M)},G&&(ge.shortcut=G)),ge);Z&&R(M,xe()),de&&d&&d(M,xe()),Q&&C(!1)});I!==P.lastExternalValue&&B(M=>H({},M,{lastExternalValue:I,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const V=Ue((M,F="partial")=>{if(F==="shallow"){B(q=>H({},q,{clockShallowValue:M,hasBeenModifiedSinceMount:!0}));return}D(M,{changeImportance:F==="finish"&&f?"accept":"set"})});N.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");B(M=>H({},M,{open:p}))}},[A,p]);const L=N.useMemo(()=>t.cleanValue(S,P.clockShallowValue===void 0?I:P.clockShallowValue),[S,t,P.clockShallowValue,I]);return{timezone:T,state:P,setValue:D,setValueFromView:V,setOpen:C,value:I,viewValue:L}}const Kq=["className","sx"],z4=({ref:n,props:e,valueManager:t,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:y,openTo:x,onViewChange:b,viewRenderers:A,reduceAnimations:S,orientation:T,disableOpenPicker:I,closeOnSelect:R,disabled:P,readOnly:B,formatDensity:O,enableAccessibleFieldDOMStructure:C,selectedSections:D,onSelectedSectionsChange:V,format:L,label:M,autoFocus:F,name:q}=e,{className:X,sx:W}=e,G=Be(e,Kq),Q=T0(),Z=Wt(),de=j4(S),ge=qq(g,T),{current:xe}=N.useRef(x??null),[be,ke]=N.useState(null),he=N.useRef(null),Se=N.useRef(null),Ae=N.useRef(null),Fe=ei(n,Ae),{timezone:re,state:ye,setOpen:pe,setValue:te,setValueFromView:Ve,value:we,viewValue:ze}=Xq({props:e,valueManager:t,validator:a}),{view:Me,setView:Re,defaultView:Ye,focusedView:Ge,setFocusedView:Oe,setValueAndGoToNextView:Ne,goToNextStep:dt,hasNextStep:_t,hasSeveralSteps:yn}=Q1({view:y,views:g,openTo:x,onChange:Ve,onViewChange:b,autoFocus:o,getStepNavigation:p}),On=Ue(()=>te(t.emptyValue)),nt=Ue(()=>te(t.getTodayValue(Z,re,r))),it=Ue(()=>te(we)),Tn=Ue(()=>te(ye.lastCommittedValue,{skipPublicationIfPristine:!0})),Qe=Ue(()=>{te(we,{skipPublicationIfPristine:!0})}),{hasUIView:pt,viewModeLookup:kt,timeViewsCount:Jt}=N.useMemo(()=>g.reduce((vn,ar)=>{const $l=A[ar]==null?"field":"UI";return vn.viewModeLookup[ar]=$l,$l==="UI"&&(vn.hasUIView=!0,y0(ar)&&(vn.timeViewsCount+=1)),vn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),An=kt[Me],Cn=Ue(()=>An),[Yt,Hr]=N.useState(An==="UI"?Me:null);Yt!==Me&&kt[Me]==="UI"&&Hr(Me),Wn(()=>{An==="field"&&ye.open&&(pe(!1),setTimeout(()=>{var vn,ar;(vn=Se==null?void 0:Se.current)==null||vn.setSelectedSections(Me),(ar=Se==null?void 0:Se.current)==null||ar.focusField(Me)}))},[Me]),Wn(()=>{if(!ye.open)return;let vn=Me;An==="field"&&Yt!=null&&(vn=Yt),vn!==Ye&&kt[vn]==="UI"&&kt[Ye]==="UI"&&(vn=Ye),vn!==Me&&Re(vn),Oe(vn,!0)},[ye.open]);const gt=N.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(Z,we,t.emptyValue),isPickerOpen:ye.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ge,pickerVariant:i}),[Z,t,we,ye.open,ge,i,e.disabled,e.readOnly]),Fn=N.useMemo(()=>I||!pt?"hidden":P||B?"disabled":"enabled",[I,pt,P,B]),qn=Ue(dt),zr=N.useMemo(()=>R&&!yn?[]:["cancel","nextOrAccept"],[R,yn]),mi=N.useMemo(()=>({setValue:te,setOpen:pe,clearValue:On,setValueToToday:nt,acceptValueChanges:it,cancelValueChanges:Tn,setView:Re,goToNextStep:qn}),[te,pe,On,nt,it,Tn,Re,qn]),ir=N.useMemo(()=>H({},mi,{value:we,timezone:re,open:ye.open,views:g,view:Yt,initialView:xe,disabled:P??!1,readOnly:B??!1,autoFocus:F??!1,variant:i,orientation:ge,popupRef:he,reduceAnimations:de,triggerRef:ke,triggerStatus:Fn,hasNextStep:_t,fieldFormat:L??"",name:q,label:M,rootSx:W,rootRef:Fe,rootClassName:X}),[mi,we,Fe,i,ge,de,P,B,L,X,q,M,W,Fn,_t,re,ye.open,Yt,g,xe,F]),zl=N.useMemo(()=>({dismissViews:Qe,ownerState:gt,hasUIView:pt,getCurrentViewMode:Cn,rootRefObject:Ae,labelId:Q,triggerElement:be,viewContainerRole:f,defaultActionBarActions:zr,onPopperExited:s}),[Qe,gt,pt,Cn,Q,be,f,zr,s]),Zi=N.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:C,selectedSections:D,onSelectedSectionsChange:V,fieldRef:Se}),[O,C,D,V,Se]);return{providerProps:{localeText:d,contextValue:ir,privateContextValue:zl,actionsContextValue:mi,fieldPrivateContextValue:Zi,isValidContextValue:vn=>{const ar=a({adapter:Z,value:vn,timezone:re,props:e});return!t.hasError(ar)}},renderCurrentView:()=>{if(Yt==null)return null;const vn=A[Yt];if(vn==null)return null;const ar=H({},G,{views:g,timezone:re,value:ze,onChange:Ne,view:Yt,onViewChange:Re,showViewSwitcher:Jt>1,timeViewsCount:Jt},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Ge,onFocusedViewChange:Oe});return c?v.jsx(c,{viewRenderers:A,popperView:Yt,rendererProps:ar}):vn(ar)},ownerState:gt}};function $4(n){return Rt("MuiPickersLayout",n)}const Pa=Ot("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Qq=["actions"],Zq=Pe(Wa,{name:"MuiPickersLayout",slot:"ActionBar"})({});function Jq(n){const{actions:e}=n,t=Be(n,Qq),r=Xa(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=jl();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return v.jsx(Ke,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return v.jsx(Ke,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return v.jsx(Ke,{onClick:s,children:r.okButtonLabel},p);case"today":return v.jsx(Ke,{onClick:a,children:r.todayButtonLabel},p);case"next":return v.jsx(Ke,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?v.jsx(Ke,{onClick:c,children:r.nextStepButtonLabel},p):v.jsx(Ke,{onClick:s,children:r.okButtonLabel},p);default:return null}});return v.jsx(Zq,H({},t,{children:f}))}const eX=N.memo(Jq),tX=["items","changeImportance"],nX=["getValue"],rX=Pe(Vw,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function iX(n){const{items:e,changeImportance:t="accept"}=n,r=Be(n,tX),{setValue:i}=aG(),a=iG();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=Be(o,nX);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:t,shortcut:d})},disabled:!a(f)})});return v.jsx(rX,H({dense:!0,sx:[{maxHeight:Wd,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>v.jsx(jw,{children:v.jsx(mn,H({},o))},o.id??o.label))}))}const aX=["ownerState"];function sX(n){return n.view!==null}const oX=(n,e)=>{const{pickerOrientation:t}=e;return vt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},$4,n)},G4=n=>{const{ownerState:e,defaultActionBarActions:t}=nr(),{view:r}=jl(),i=_a(),{children:a,slots:s,slotProps:o,classes:c}=n,d=N.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=oX(c,d),p=(s==null?void 0:s.actionBar)??eX,g=St({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:t},className:f.actionBar,ownerState:d}),y=Be(g,aX),x=v.jsx(p,H({},y)),b=s==null?void 0:s.toolbar,A=St({elementType:b,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),S=sX(A)&&b?v.jsx(b,H({},A)):null,T=a,I=s==null?void 0:s.tabs,R=r&&I?v.jsx(I,H({className:f.tabs},o==null?void 0:o.tabs)):null,P=(s==null?void 0:s.shortcuts)??iX,B=St({elementType:P,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),O=Array.isArray(B==null?void 0:B.items)&&B.items.length>0,C=r&&P?v.jsx(P,H({},B)):null;return{toolbar:S,content:T,tabs:R,actionBar:x,shortcuts:C,ownerState:H({},d,{hasShortcuts:O})}},lX=(n,e)=>{const{pickerOrientation:t}=e;return vt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},$4,n)},W4=Pe("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Pa.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${Pa.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${Pa.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${Pa.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${Pa.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Pa.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${Pa.shortcuts}`]:{gridColumn:4}}}]}),Y4=Pe("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),q4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=G4(r),{orientation:f,variant:p}=jl(),{sx:g,className:y,classes:x}=r,b=lX(x,d);return v.jsxs(W4,{ref:t,sx:g,className:jt(b.root,y),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,v.jsx(Y4,{className:b.contentWrapper,ownerState:d,children:p==="desktop"?v.jsxs(N.Fragment,{children:[a,s]}):v.jsxs(N.Fragment,{children:[s,a]})}),o]})});function X4(n){const{steps:e}=n;return EG({steps:e,isViewMatchingStep:(t,r)=>r.views==null||r.views.includes(t),onStepChange:({step:t,defaultView:r,setView:i,view:a,views:s})=>{const o=t.views==null?r:t.views.find(c=>s.includes(c));o!==a&&i(o)}})}const cX=["props","steps"],uX=["ownerState"],dX=n=>{var B;let{props:e,steps:t}=n,r=Be(n,cX);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=X4({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=z4(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),y=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,b=i.field,A=St({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:y}),ownerState:g}),S=Be(A,uX),T=i.layout??q4;let I=y;x&&(s?I=`${y}-label`:I=void 0);const R=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),popper:H({"aria-labelledby":I},a==null?void 0:a.popper)});return{renderPicker:()=>v.jsxs(o4,H({},f,{children:[v.jsx(b,H({},S,{slots:i,slotProps:R,inputRef:o})),v.jsx(Yq,{slots:i,slotProps:R,children:v.jsx(T,H({},R==null?void 0:R.layout,{slots:i,slotProps:R,children:p()}))})]}))}},Od=({view:n,onViewChange:e,views:t,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:S,reduceAnimations:T,onMonthChange:I,monthsPerRow:R,onYearChange:P,yearsOrder:B,yearsPerRow:O,slots:C,slotProps:D,loading:V,renderLoading:L,disableHighlightToday:M,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:W,sx:G,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:de,timezone:ge})=>v.jsx(Mq,{view:n,onViewChange:e,views:t.filter($d),focusedView:r&&$d(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:S,reduceAnimations:T,onMonthChange:I,monthsPerRow:R,onYearChange:P,yearsOrder:B,yearsPerRow:O,slots:C,slotProps:D,loading:V,renderLoading:L,disableHighlightToday:M,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:W,sx:G,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:de,timezone:ge}),fX=Pe($a)({[`& .${xT.container}`]:{outline:0},[`& .${xT.paper}`]:{outline:0,minWidth:Gd}}),hX=Pe(Ga)({"&:first-of-type":{padding:0}});function pX(n){const{children:e,slots:t,slotProps:r}=n,{open:i}=jl(),{dismissViews:a,onPopperExited:s}=nr(),o=(t==null?void 0:t.dialog)??fX,c=(t==null?void 0:t.mobileTransition)??x1;return v.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:v.jsx(hX,{children:e})}))}const gX=["props","steps"],mX=["ownerState"],yX=n=>{var B;let{props:e,steps:t}=n,r=Be(n,gX);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=X4({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=z4(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),y=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,b=i.field,A=St({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:y}),ownerState:g}),S=Be(A,mX),T=i.layout??q4;let I=y;x&&(s?I=`${y}-label`:I=void 0);const R=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),mobilePaper:H({"aria-labelledby":I},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>v.jsxs(o4,H({},f,{children:[v.jsx(b,H({},S,{slots:i,slotProps:R,inputRef:o})),v.jsx(pX,{slots:i,slotProps:R,children:v.jsx(T,H({},R==null?void 0:R.layout,{slots:i,slotProps:R,children:p()}))})]}))}};function vX(n){return Rt("MuiPickersToolbarText",n)}const xX=Ot("MuiPickersToolbarText",["root"]),wX=["className","classes","selected","value"],_X=n=>vt({root:["root"]},vX,n),bX=Pe(ne,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:n})=>({transition:n.transitions.create("color"),color:(n.vars||n).palette.text.secondary,"&[data-selected]":{color:(n.vars||n).palette.text.primary}})),K4=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=Be(r,wX),d=_X(a);return v.jsx(bX,H({ref:t,className:jt(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),AX=["align","className","classes","selected","typographyClassName","value","variant","width"],EX=n=>vt({root:["root"]},U4,n),SX=Pe(Ke,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),cl=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=Be(r,AX),y=EX(s);return v.jsx(SX,H({variant:"text",ref:t,className:jt(y.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:v.jsx(K4,{align:i,className:c,variant:f,value:d,selected:o})}))}),Q4=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:S,slots:T,slotProps:I,readOnly:R,disabled:P,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:C,timeSteps:D,skipDisabled:V,timezone:L})=>v.jsx(HG,{view:n,onViewChange:e,focusedView:t&&y0(t)?t:null,onFocusedViewChange:r,views:i.filter(y0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:S,slots:T,slotProps:I,readOnly:R,disabled:P,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:C,timeStep:D==null?void 0:D.minutes,skipDisabled:V,timezone:L}),zm=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:S,slots:T,slotProps:I,readOnly:R,disabled:P,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:C,timeSteps:D,skipDisabled:V,timezone:L})=>v.jsx(eW,{view:n,onViewChange:e,focusedView:t&&vd(t)?t:null,onFocusedViewChange:r,views:i.filter(y0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:S,slots:T,slotProps:I,readOnly:R,disabled:P,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:C,timeSteps:D,skipDisabled:V,timezone:L}),TX=["views","format"],Z4=(n,e,t)=>{let{views:r,format:i}=e,a=Be(e,TX);if(i)return i;const s=[],o=[];if(r.forEach(f=>{y0(f)?o.push(f):$d(f)&&s.push(f)}),o.length===0)return YI(n,H({views:s},a));if(s.length===0)return nD(n,H({views:o},a));const c=nD(n,H({views:o},a));return`${YI(n,H({views:s},a))} ${c}`},CX=(n,e,t)=>t?e.filter(r=>!vd(r)||r==="hours"):n?[...e,"meridiem"]:e,IX=(n,e)=>1440/((n.hours??1)*(n.minutes??5))<=e;function DX({thresholdToRenderTimeInASingleColumn:n,ampm:e,timeSteps:t,views:r}){const i=n??24,a=H({hours:1,minutes:5,seconds:5},t),s=IX(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:CX(e,r,s)}}function RX(n){return Rt("MuiDateTimePickerTabs",n)}Ot("MuiDateTimePickerTabs",["root"]);const OX=n=>$d(n)?"date":"time",MX=n=>n==="date"?"day":"hours",PX=n=>vt({root:["root"]},RX,n),kX=Pe(m1,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:n})=>({boxShadow:`0 -1px 0 0 inset ${(n.vars||n).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(n.vars||n).palette.divider}`,[`& .${SN.indicator}`]:{bottom:"auto",top:0}}})),NX=function(e){const t=xt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=v.jsx(uG,{}),timeIcon:i=v.jsx(dG,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=t,d=Xa(),{ownerState:f}=nr(),{view:p,setView:g}=jl(),y=PX(o),x=(b,A)=>{g(MX(A))};return a?null:v.jsxs(kX,{ownerState:f,variant:"fullWidth",value:OX(p),onChange:x,className:jt(s,y.root),sx:c,children:[v.jsx(Na,{value:"date","aria-label":d.dateTableLabel,icon:v.jsx(N.Fragment,{children:r})}),v.jsx(Na,{value:"time","aria-label":d.timeTableLabel,icon:v.jsx(N.Fragment,{children:i})})]})};function LX(n){return Rt("MuiDateTimePickerToolbar",n)}const Wx=Ot("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),BX=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],FX=(n,e)=>{const{pickerOrientation:t,toolbarDirection:r}=e;return vt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",t==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},LX,n)},VX=Pe(Fq,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="toolbarVariant"})(({theme:n})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,[`& .${Pq.content} .${xX.root}[data-selected]`]:{color:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),jX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),UX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:n=>ba(n)&&n!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:n,toolbarVariant:e})=>n==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:n,toolbarVariant:e,toolbarDirection:t})=>n==="landscape"&&e!=="desktop"&&t==="rtl",style:{flexDirection:"column-reverse"}}]}),HX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:n=>ba(n)&&n!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),hD=Pe(K4,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:n=>ba(n)&&n!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),zX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(n,e)=>[{[`.${Wx.ampmLabel}`]:e.ampmLabel},{[`&.${Wx.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${Wx.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),$X=N.createContext(null);function GX(n){const e=xt({props:n,name:"MuiDateTimePickerToolbar"}),{ampm:t,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="",toolbarTitle:s,className:o,classes:c}=e,d=Be(e,BX),{value:f,setValue:p,disabled:g,readOnly:y,variant:x,orientation:b,view:A,setView:S,views:T}=jl(),I=Xa(),R=H4(),P=FX(c,R),B=Wt(),O=N.useContext($X),C=O?O.value:f,D=O?O.setValue:p,V=O?O.view:A,L=O?O.setView:S,{meridiemMode:M,handleMeridiemChange:F}=d4(C,t,de=>D(de,{changeImportance:"set"})),q=O!=null&&O.forceDesktopVariant?"desktop":x,X=q==="desktop",W=!!(t&&!r),G=s??I.dateTimePickerToolbarTitle,Q=N.useMemo(()=>B.isValid(C)?i?B.formatByString(C,i):B.format(C,"shortDate"):a,[C,i,a,B]),Z=(de,ge)=>B.isValid(C)?B.format(C,de):ge;return v.jsxs(VX,H({className:jt(P.root,o),toolbarTitle:G,toolbarVariant:q},d,{ownerState:R,children:[v.jsxs(jX,{className:P.dateContainer,ownerState:R,children:[T.includes("year")&&v.jsx(cl,{tabIndex:-1,variant:"subtitle1",onClick:()=>L("year"),selected:V==="year",value:Z("year","")}),T.includes("day")&&v.jsx(cl,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>L("day"),selected:V==="day",value:Q})]}),v.jsxs(UX,{className:P.timeContainer,ownerState:R,toolbarVariant:q,children:[v.jsxs(HX,{className:P.timeDigitsContainer,ownerState:R,toolbarVariant:q,children:[T.includes("hours")&&v.jsxs(N.Fragment,{children:[v.jsx(cl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Gh:void 0,onClick:()=>L("hours"),selected:V==="hours",value:Z(t?"hours12h":"hours24h","--")}),v.jsx(hD,{variant:X?"h5":"h3",value:":",className:P.separator,ownerState:R,toolbarVariant:q}),v.jsx(cl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Gh:void 0,onClick:()=>L("minutes"),selected:V==="minutes"||!T.includes("minutes")&&V==="hours",value:Z("minutes","--"),disabled:!T.includes("minutes")})]}),T.includes("seconds")&&v.jsxs(N.Fragment,{children:[v.jsx(hD,{variant:X?"h5":"h3",value:":",className:P.separator,ownerState:R,toolbarVariant:q}),v.jsx(cl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Gh:void 0,onClick:()=>L("seconds"),selected:V==="seconds",value:Z("seconds","--")})]})]}),W&&!X&&v.jsxs(zX,{className:P.ampmSelection,ownerState:R,children:[v.jsx(cl,{variant:"subtitle2",selected:M==="am",typographyClassName:P.ampmLabel,value:t0(B,"am"),onClick:y?void 0:()=>F("am"),disabled:g}),v.jsx(cl,{variant:"subtitle2",selected:M==="pm",typographyClassName:P.ampmLabel,value:t0(B,"pm"),onClick:y?void 0:()=>F("pm"),disabled:g})]}),t&&X&&v.jsx(cl,{variant:"h5",onClick:()=>L("meridiem"),selected:V==="meridiem",value:C&&M?t0(B,M):"--",width:Gh})]})]}))}function J4(n,e){var y;const t=Wt(),r=xt({props:n,name:e}),i=E4(r),a=r.ampm??t.is12HourCycleInCurrentLocale(),s=N.useMemo(()=>{var x;return((x=r.localeText)==null?void 0:x.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=F$({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=DX({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:GX,tabs:NX},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(y=r.slotProps)==null?void 0:y.toolbar)})})}const WX=N.forwardRef(function(e,t){var x;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=G4(e),{orientation:d}=jl(),{sx:f,className:p,classes:g}=e,y=s&&(((x=s.props.actions)==null?void 0:x.length)??0)>0;return v.jsxs(W4,{ref:t,className:jt(Pa.root,g==null?void 0:g.root,p),sx:[{[`& .${Pa.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${Pa.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,v.jsxs(Y4,{className:jt(Pa.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,y&&v.jsx(Bc,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),YX=["openTo","focusedView","timeViewsCount"],qX=function(e){var y,x;const{viewRenderers:t,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=Be(i,YX),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${yw.root}`]:{borderBottom:0},[`&.${yw.root}, .${vw.root}, &.${mw.root}`]:{maxHeight:Wd}}]}),f=vd(r),p=f?"day":r,g=f?r:"hours";return v.jsxs(N.Fragment,{children:[(y=t[p])==null?void 0:y.call(t,H({},i,{view:f?"day":r,focusedView:s&&$d(s)?s:null,views:i.views.filter($d),sx:[{gridColumn:1},...d.sx]})),o>0&&v.jsxs(N.Fragment,{children:[v.jsx(Bc,{orientation:"vertical",sx:{gridColumn:2}}),(x=t[g])==null?void 0:x.call(t,H({},d,{view:f?r:"hours",focusedView:s&&vd(s)?s:null,openTo:vd(a)?a:"hours",views:i.views.filter(vd),sx:[{gridColumn:3},...d.sx]}))]})]})},eP=N.forwardRef(function(e,t){var g,y,x;const r=Wt(),i=J4(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?Q4:zm,s=H({day:Od,month:Od,year:Od,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===zm.name?i.views:i.views.filter(b=>b!=="meridiem"),f=H({},i,{viewRenderers:s,format:Z4(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:k4,layout:WX},i.slots),slotProps:H({},i.slotProps,{field:b=>{var A;return H({},ho((A=i.slotProps)==null?void 0:A.field,b),XM(i))},toolbar:H({hidden:!0,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!0},(x=i.slotProps)==null?void 0:x.tabs)})}),{renderPicker:p}=dX({ref:t,props:f,valueManager:Di,valueType:"date-time",validator:J1,rendererInterceptor:qX,steps:null});return p()});eP.propTypes={ampm:ae.bool,ampmInClock:ae.bool,autoFocus:ae.bool,className:ae.string,closeOnSelect:ae.bool,dayOfWeekFormatter:ae.func,defaultValue:ae.object,disabled:ae.bool,disableFuture:ae.bool,disableHighlightToday:ae.bool,disableIgnoringDatePartForTimeValidation:ae.bool,disableOpenPicker:ae.bool,disablePast:ae.bool,displayWeekNumber:ae.bool,enableAccessibleFieldDOMStructure:ae.any,fixedWeekNumber:ae.number,format:ae.string,formatDensity:ae.oneOf(["dense","spacious"]),inputRef:K3,label:ae.node,loading:ae.bool,localeText:ae.object,maxDate:ae.object,maxDateTime:ae.object,maxTime:ae.object,minDate:ae.object,minDateTime:ae.object,minTime:ae.object,minutesStep:ae.number,monthsPerRow:ae.oneOf([3,4]),name:ae.string,onAccept:ae.func,onChange:ae.func,onClose:ae.func,onError:ae.func,onMonthChange:ae.func,onOpen:ae.func,onSelectedSectionsChange:ae.func,onViewChange:ae.func,onYearChange:ae.func,open:ae.bool,openTo:ae.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ae.oneOf(["landscape","portrait"]),readOnly:ae.bool,reduceAnimations:ae.bool,referenceDate:ae.object,renderLoading:ae.func,selectedSections:ae.oneOfType([ae.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ae.number]),shouldDisableDate:ae.func,shouldDisableMonth:ae.func,shouldDisableTime:ae.func,shouldDisableYear:ae.func,showDaysOutsideCurrentMonth:ae.bool,skipDisabled:ae.bool,slotProps:ae.object,slots:ae.object,sx:ae.oneOfType([ae.arrayOf(ae.oneOfType([ae.func,ae.object,ae.bool])),ae.func,ae.object]),thresholdToRenderTimeInASingleColumn:ae.number,timeSteps:ae.shape({hours:ae.number,minutes:ae.number,seconds:ae.number}),timezone:ae.string,value:ae.object,view:ae.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ae.shape({day:ae.func,hours:ae.func,meridiem:ae.func,minutes:ae.func,month:ae.func,seconds:ae.func,year:ae.func}),views:ae.arrayOf(ae.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ae.oneOf(["asc","desc"]),yearsPerRow:ae.oneOf([3,4])};const XX=[{views:QM},{views:c4}],tP=N.forwardRef(function(e,t){var g,y,x,b,A,S;const r=Wt(),i=J4(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?Q4:zm,s=H({day:Od,month:Od,year:Od,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===zm.name?i.views:i.views.filter(T=>T!=="meridiem"),f=H({},i,{viewRenderers:s,format:Z4(r,i),views:d,ampmInClock:o,slots:H({field:k4},i.slots),slotProps:H({},i.slotProps,{field:T=>{var I;return H({},ho((I=i.slotProps)==null?void 0:I.field,T),XM(i))},toolbar:H({hidden:!1,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!1},(x=i.slotProps)==null?void 0:x.tabs),layout:H({},(b=i.slotProps)==null?void 0:b.layout,{sx:LG([{[`& .${yw.root}`]:{width:Gd},[`& .${vw.root}`]:{flex:1,maxHeight:Wd-1,[`.${vw.item}`]:{width:"auto"}},[`& .${mw.root}`]:{width:Gd,maxHeight:Wd,flex:1,[`.${mw.item}`]:{justifyContent:"center"}}}],(S=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:S.sx)})})}),{renderPicker:p}=yX({ref:t,props:f,valueManager:Di,valueType:"date-time",validator:J1,steps:XX});return p()});tP.propTypes={ampm:ae.bool,ampmInClock:ae.bool,autoFocus:ae.bool,className:ae.string,closeOnSelect:ae.bool,dayOfWeekFormatter:ae.func,defaultValue:ae.object,disabled:ae.bool,disableFuture:ae.bool,disableHighlightToday:ae.bool,disableIgnoringDatePartForTimeValidation:ae.bool,disableOpenPicker:ae.bool,disablePast:ae.bool,displayWeekNumber:ae.bool,enableAccessibleFieldDOMStructure:ae.any,fixedWeekNumber:ae.number,format:ae.string,formatDensity:ae.oneOf(["dense","spacious"]),inputRef:K3,label:ae.node,loading:ae.bool,localeText:ae.object,maxDate:ae.object,maxDateTime:ae.object,maxTime:ae.object,minDate:ae.object,minDateTime:ae.object,minTime:ae.object,minutesStep:ae.number,monthsPerRow:ae.oneOf([3,4]),name:ae.string,onAccept:ae.func,onChange:ae.func,onClose:ae.func,onError:ae.func,onMonthChange:ae.func,onOpen:ae.func,onSelectedSectionsChange:ae.func,onViewChange:ae.func,onYearChange:ae.func,open:ae.bool,openTo:ae.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ae.oneOf(["landscape","portrait"]),readOnly:ae.bool,reduceAnimations:ae.bool,referenceDate:ae.object,renderLoading:ae.func,selectedSections:ae.oneOfType([ae.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ae.number]),shouldDisableDate:ae.func,shouldDisableMonth:ae.func,shouldDisableTime:ae.func,shouldDisableYear:ae.func,showDaysOutsideCurrentMonth:ae.bool,skipDisabled:ae.bool,slotProps:ae.object,slots:ae.object,sx:ae.oneOfType([ae.arrayOf(ae.oneOfType([ae.func,ae.object,ae.bool])),ae.func,ae.object]),thresholdToRenderTimeInASingleColumn:ae.number,timeSteps:ae.shape({hours:ae.number,minutes:ae.number,seconds:ae.number}),timezone:ae.string,value:ae.object,view:ae.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ae.shape({day:ae.func,hours:ae.func,meridiem:ae.func,minutes:ae.func,month:ae.func,seconds:ae.func,year:ae.func}),views:ae.arrayOf(ae.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ae.oneOf(["asc","desc"]),yearsPerRow:ae.oneOf([3,4])};const KX=["desktopModeMediaQuery"],QX=N.forwardRef(function(e,t){const r=xt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=NG}=r,a=Be(r,KX);return v1(i,{defaultMatches:!0})?v.jsx(eP,H({ref:t},a)):v.jsx(tP,H({ref:t},a))}),nP=6048e5,ZX=864e5,rP=6e4,iP=36e5,JX=1e3,pD=Symbol.for("constructDateFrom");function Bn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&pD in n?n[pD](e):n instanceof Date?new n.constructor(e):new Date(e)}function tt(n,e){return Bn(e||n,n)}function ny(n,e,t){const r=tt(n,t==null?void 0:t.in);return isNaN(e)?Bn((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function aP(n,e,t){return Bn(n,+tt(n)+e)}function eK(n,e,t){return aP(n,e*1e3)}function tK(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*rP),r}function nK(n,e,t){return aP(n,e*iP)}function rK(n,e,t){return ny(n,e*7,t)}function sP(n,e,t){const r=tt(n,t==null?void 0:t.in);if(isNaN(e))return Bn(n,NaN);if(!e)return r;const i=r.getDate(),a=Bn(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function iK(n,e,t){return sP(n,e*12,t)}function gD(n,e){const t=tt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let aK={};function ru(){return aK}function sK(n,e){var o,c,d,f;const t=ru(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=tt(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function mD(n,e){const t=tt(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}const oK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lK=(n,e,t)=>{let r;const i=oK[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Md(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const cK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},uK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fK={date:Md({formats:cK,defaultWidth:"full"}),time:Md({formats:uK,defaultWidth:"full"}),dateTime:Md({formats:dK,defaultWidth:"full"})},hK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pK=(n,e,t,r)=>hK[n];function ys(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const gK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_K=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},bK={ordinalNumber:_K,era:ys({values:gK,defaultWidth:"wide"}),quarter:ys({values:mK,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ys({values:yK,defaultWidth:"wide"}),day:ys({values:vK,defaultWidth:"wide"}),dayPeriod:ys({values:xK,defaultWidth:"wide",formattingValues:wK,defaultFormattingWidth:"wide"})};function vs(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?EK(o,p=>p.test(s)):AK(o,p=>p.test(s));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function AK(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function EK(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function oP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const SK=/^(\d+)(th|st|nd|rd)?/i,TK=/\d+/i,CK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IK={any:[/^b/i,/^(a|c)/i]},DK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RK={any:[/1/i,/2/i,/3/i,/4/i]},OK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},PK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BK={ordinalNumber:oP({matchPattern:SK,parsePattern:TK,valueCallback:n=>parseInt(n,10)}),era:vs({matchPatterns:CK,defaultMatchWidth:"wide",parsePatterns:IK,defaultParseWidth:"any"}),quarter:vs({matchPatterns:DK,defaultMatchWidth:"wide",parsePatterns:RK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:vs({matchPatterns:OK,defaultMatchWidth:"wide",parsePatterns:MK,defaultParseWidth:"any"}),day:vs({matchPatterns:PK,defaultMatchWidth:"wide",parsePatterns:kK,defaultParseWidth:"any"}),dayPeriod:vs({matchPatterns:NK,defaultMatchWidth:"any",parsePatterns:LK,defaultParseWidth:"any"})},gb={code:"en-US",formatDistance:lK,formatLong:fK,formatRelative:pK,localize:bK,match:BK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $m(n){const e=tt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function W0(n,...e){const t=Bn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function x0(n,e){const t=tt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function FK(n,e,t){const[r,i]=W0(t==null?void 0:t.in,n,e),a=x0(r),s=x0(i),o=+a-$m(a),c=+s-$m(s);return Math.round((o-c)/ZX)}function lP(n,e){const t=tt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function VK(n,e){const t=tt(n,e==null?void 0:e.in);return FK(t,lP(t))+1}function Eo(n,e){var o,c,d,f;const t=ru(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=tt(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Yd(n,e){return Eo(n,{...e,weekStartsOn:1})}function cP(n,e){const t=tt(n,e==null?void 0:e.in),r=t.getFullYear(),i=Bn(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Yd(i),s=Bn(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Yd(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function jK(n,e){const t=cP(n,e),r=Bn(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yd(r)}function uP(n,e){const t=tt(n,e==null?void 0:e.in),r=+Yd(t)-+jK(t);return Math.round(r/nP)+1}function mb(n,e){var f,p,g,y;const t=tt(n,e==null?void 0:e.in),r=t.getFullYear(),i=ru(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=Bn((e==null?void 0:e.in)||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Eo(s,e),c=Bn((e==null?void 0:e.in)||n,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Eo(c,e);return+t>=+o?r+1:+t>=+d?r:r-1}function UK(n,e){var o,c,d,f;const t=ru(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=mb(n,e),a=Bn((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Eo(a,e)}function yb(n,e){const t=tt(n,e==null?void 0:e.in),r=+Eo(t,e)-+UK(t,e);return Math.round(r/nP)+1}function ln(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const ul={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return ln(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):ln(t+1,2)},d(n,e){return ln(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ln(n.getHours()%12||12,e.length)},H(n,e){return ln(n.getHours(),e.length)},m(n,e){return ln(n.getMinutes(),e.length)},s(n,e){return ln(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return ln(i,e.length)}},ed={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yD={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return ul.y(n,e)},Y:function(n,e,t,r){const i=mb(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return ln(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):ln(a,e.length)},R:function(n,e){const t=cP(n);return ln(t,e.length)},u:function(n,e){const t=n.getFullYear();return ln(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ln(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ln(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return ul.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return ln(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=yb(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):ln(i,e.length)},I:function(n,e,t){const r=uP(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):ln(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ul.d(n,e)},D:function(n,e,t){const r=VK(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):ln(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ln(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ln(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ln(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=ed.noon:r===0?i=ed.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=ed.evening:r>=12?i=ed.afternoon:r>=4?i=ed.morning:i=ed.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ul.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ul.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ul.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ul.s(n,e)},S:function(n,e){return ul.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return xD(r);case"XXXX":case"XX":return Cc(r);case"XXXXX":case"XXX":default:return Cc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return xD(r);case"xxxx":case"xx":return Cc(r);case"xxxxx":case"xxx":default:return Cc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vD(r,":");case"OOOO":default:return"GMT"+Cc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vD(r,":");case"zzzz":default:return"GMT"+Cc(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return ln(r,e.length)},T:function(n,e,t){return ln(+n,e.length)}};function vD(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+ln(a,2)}function xD(n,e){return n%60===0?(n>0?"-":"+")+ln(Math.abs(n)/60,2):Cc(n,e)}function Cc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=ln(Math.trunc(r/60),2),a=ln(r%60,2);return t+i+e+a}const wD=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},dP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},HK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return wD(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",wD(r,e)).replace("{{time}}",dP(i,e))},Gm={p:dP,P:HK},zK=/^D+$/,$K=/^Y+$/,GK=["D","DD","YY","YYYY"];function fP(n){return zK.test(n)}function hP(n){return $K.test(n)}function xw(n,e,t){const r=WK(n,e,t);if(console.warn(r),GK.includes(n))throw new RangeError(r)}function WK(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function YK(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function pP(n){return!(!YK(n)&&typeof n!="number"||isNaN(+tt(n)))}const qK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,KK=/^'([^]*?)'?$/,QK=/''/g,ZK=/[a-zA-Z]/;function JK(n,e,t){var f,p,g,y,x,b,A,S;const r=ru(),i=(t==null?void 0:t.locale)??r.locale??gb,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((b=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((S=(A=r.locale)==null?void 0:A.options)==null?void 0:S.weekStartsOn)??0,o=tt(n,t==null?void 0:t.in);if(!pP(o))throw new RangeError("Invalid time value");let c=e.match(XK).map(T=>{const I=T[0];if(I==="p"||I==="P"){const R=Gm[I];return R(T,i.formatLong)}return T}).join("").match(qK).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const I=T[0];if(I==="'")return{isToken:!1,value:eQ(T)};if(yD[I])return{isToken:!0,value:T};if(I.match(ZK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(T=>{if(!T.isToken)return T.value;const I=T.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&hP(I)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&fP(I))&&xw(I,e,String(n));const R=yD[I[0]];return R(o,I,i.localize,d)}).join("")}function eQ(n){const e=n.match(KK);return e?e[1].replace(QK,"'"):n}function tQ(n,e){return tt(n,e==null?void 0:e.in).getDate()}function gP(n,e){const t=tt(n,e==null?void 0:e.in),r=t.getFullYear(),i=t.getMonth(),a=Bn(t,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function nQ(n,e){return tt(n,e==null?void 0:e.in).getHours()}function rQ(n,e){return tt(n,e==null?void 0:e.in).getMinutes()}function iQ(n,e){return tt(n,e==null?void 0:e.in).getMonth()}function aQ(n){return tt(n).getSeconds()}function sQ(n){return tt(n).getMilliseconds()}function oQ(n,e){return tt(n,e==null?void 0:e.in).getFullYear()}function Yx(n,e){return+tt(n)>+tt(e)}function qx(n,e){return+tt(n)<+tt(e)}function lQ(n,e){return+tt(n)==+tt(e)}function cQ(n,e,t){const[r,i]=W0(t==null?void 0:t.in,n,e);return+x0(r)==+x0(i)}function uQ(n,e,t){const[r,i]=W0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()}function dQ(n,e,t){const[r,i]=W0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function _D(n,e){const t=tt(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function fQ(n,e,t){const[r,i]=W0(t==null?void 0:t.in,n,e);return+_D(r)==+_D(i)}function hQ(){return Object.assign({},ru())}function pQ(n,e){const t=gQ(e)?new e(0):Bn(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function gQ(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const mQ=10;class mP{constructor(){ve(this,"subPriority",0)}validate(e,t){return!0}}class yQ extends mP{constructor(e,t,r,i,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class vQ extends mP{constructor(t,r){super();ve(this,"priority",mQ);ve(this,"subPriority",-1);this.context=t||(i=>Bn(r,i))}set(t,r){return r.timestampIsSet?t:Bn(t,pQ(t,this.context))}}class Zt{run(e,t,r,i){const a=this.parse(e,t,r,i);return a?{setter:new yQ(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class xQ extends Zt{constructor(){super(...arguments);ve(this,"priority",140);ve(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const er={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},xs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function tr(n,e){return n&&{value:e(n.value),rest:n.rest}}function Un(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ws(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:r*(i*iP+a*rP+s*JX),rest:e.slice(t[0].length)}}function yP(n){return Un(er.anyDigitsSigned,n)}function Yn(n,e){switch(n){case 1:return Un(er.singleDigit,e);case 2:return Un(er.twoDigits,e);case 3:return Un(er.threeDigits,e);case 4:return Un(er.fourDigits,e);default:return Un(new RegExp("^\\d{1,"+n+"}"),e)}}function Wm(n,e){switch(n){case 1:return Un(er.singleDigitSigned,e);case 2:return Un(er.twoDigitsSigned,e);case 3:return Un(er.threeDigitsSigned,e);case 4:return Un(er.fourDigitsSigned,e);default:return Un(new RegExp("^-?\\d{1,"+n+"}"),e)}}function vb(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function vP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=n>=a%100;i=n+s-(o?100:0)}return t?i:1-i}function xP(n){return n%400===0||n%4===0&&n%100!==0}class wQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return tr(Yn(4,t),a);case"yo":return tr(i.ordinalNumber(t,{unit:"year"}),a);default:return tr(Yn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const a=t.getFullYear();if(i.isTwoDigitYear){const o=vP(i.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const s=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class _Q extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return tr(Yn(4,t),a);case"Yo":return tr(i.ordinalNumber(t,{unit:"year"}),a);default:return tr(Yn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,a){const s=mb(t,a);if(i.isTwoDigitYear){const c=vP(i.year,s);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Eo(t,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Eo(t,a)}}class bQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return Wm(r==="R"?4:r.length,t)}set(t,r,i){const a=Bn(t,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),Yd(a)}}class AQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return Wm(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class EQ extends Zt{constructor(){super(...arguments);ve(this,"priority",120);ve(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Yn(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class SQ extends Zt{constructor(){super(...arguments);ve(this,"priority",120);ve(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Yn(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class TQ extends Zt{constructor(){super(...arguments);ve(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ve(this,"priority",110)}parse(t,r,i){const a=s=>s-1;switch(r){case"M":return tr(Un(er.month,t),a);case"MM":return tr(Yn(2,t),a);case"Mo":return tr(i.ordinalNumber(t,{unit:"month"}),a);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class CQ extends Zt{constructor(){super(...arguments);ve(this,"priority",110);ve(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const a=s=>s-1;switch(r){case"L":return tr(Un(er.month,t),a);case"LL":return tr(Yn(2,t),a);case"Lo":return tr(i.ordinalNumber(t,{unit:"month"}),a);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function IQ(n,e,t){const r=tt(n,t==null?void 0:t.in),i=yb(r,t)-e;return r.setDate(r.getDate()-i*7),tt(r,t==null?void 0:t.in)}class DQ extends Zt{constructor(){super(...arguments);ve(this,"priority",100);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Un(er.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Yn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,a){return Eo(IQ(t,i,a),a)}}function RQ(n,e,t){const r=tt(n,t==null?void 0:t.in),i=uP(r,t)-e;return r.setDate(r.getDate()-i*7),r}class OQ extends Zt{constructor(){super(...arguments);ve(this,"priority",100);ve(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Un(er.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Yn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return Yd(RQ(t,i))}}const MQ=[31,28,31,30,31,30,31,31,30,31,30,31],PQ=[31,29,31,30,31,30,31,31,30,31,30,31];class kQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"subPriority",1);ve(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Un(er.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Yn(r.length,t)}}validate(t,r){const i=t.getFullYear(),a=xP(i),s=t.getMonth();return a?r>=1&&r<=PQ[s]:r>=1&&r<=MQ[s]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class NQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"subpriority",1);ve(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Un(er.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Yn(r.length,t)}}validate(t,r){const i=t.getFullYear();return xP(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function xb(n,e,t){var p,g,y,x;const r=ru(),i=(t==null?void 0:t.weekStartsOn)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,a=tt(n,t==null?void 0:t.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return ny(a,f,t)}class LQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=xb(t,i,a),t.setHours(0,0,0,0),t}}class BQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return tr(Yn(r.length,t),s);case"eo":return tr(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=xb(t,i,a),t.setHours(0,0,0,0),t}}class FQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return tr(Yn(r.length,t),s);case"co":return tr(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=xb(t,i,a),t.setHours(0,0,0,0),t}}function VQ(n,e){const t=tt(n,e==null?void 0:e.in).getDay();return t===0?7:t}function jQ(n,e,t){const r=tt(n,t==null?void 0:t.in),i=VQ(r,t),a=e-i;return ny(r,a,t)}class UQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Yn(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return tr(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return tr(i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return tr(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return tr(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=jQ(t,i),t.setHours(0,0,0,0),t}}class HQ extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(vb(i),0,0,0),t}}class zQ extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(vb(i),0,0,0),t}}class $Q extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(vb(i),0,0,0),t}}class GQ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Un(er.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Yn(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const a=t.getHours()>=12;return a&&i<12?t.setHours(i+12,0,0,0):!a&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class WQ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Un(er.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Yn(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class YQ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Un(er.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Yn(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class qQ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Un(er.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Yn(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const a=i<=24?i%24:i;return t.setHours(a,0,0,0),t}}class XQ extends Zt{constructor(){super(...arguments);ve(this,"priority",60);ve(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Un(er.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Yn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class KQ extends Zt{constructor(){super(...arguments);ve(this,"priority",50);ve(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Un(er.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Yn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class QQ extends Zt{constructor(){super(...arguments);ve(this,"priority",30);ve(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return tr(Yn(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class ZQ extends Zt{constructor(){super(...arguments);ve(this,"priority",10);ve(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return ws(xs.basicOptionalMinutes,t);case"XX":return ws(xs.basic,t);case"XXXX":return ws(xs.basicOptionalSeconds,t);case"XXXXX":return ws(xs.extendedOptionalSeconds,t);case"XXX":default:return ws(xs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Bn(t,t.getTime()-$m(t)-i)}}class JQ extends Zt{constructor(){super(...arguments);ve(this,"priority",10);ve(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return ws(xs.basicOptionalMinutes,t);case"xx":return ws(xs.basic,t);case"xxxx":return ws(xs.basicOptionalSeconds,t);case"xxxxx":return ws(xs.extendedOptionalSeconds,t);case"xxx":default:return ws(xs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Bn(t,t.getTime()-$m(t)-i)}}class eZ extends Zt{constructor(){super(...arguments);ve(this,"priority",40);ve(this,"incompatibleTokens","*")}parse(t){return yP(t)}set(t,r,i){return[Bn(t,i*1e3),{timestampIsSet:!0}]}}class tZ extends Zt{constructor(){super(...arguments);ve(this,"priority",20);ve(this,"incompatibleTokens","*")}parse(t){return yP(t)}set(t,r,i){return[Bn(t,i),{timestampIsSet:!0}]}}const nZ={G:new xQ,y:new wQ,Y:new _Q,R:new bQ,u:new AQ,Q:new EQ,q:new SQ,M:new TQ,L:new CQ,w:new DQ,I:new OQ,d:new kQ,D:new NQ,E:new LQ,e:new BQ,c:new FQ,i:new UQ,a:new HQ,b:new zQ,B:new $Q,h:new GQ,H:new WQ,K:new YQ,k:new qQ,m:new XQ,s:new KQ,S:new QQ,X:new ZQ,x:new JQ,t:new eZ,T:new tZ},rZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aZ=/^'([^]*?)'?$/,sZ=/''/g,oZ=/\S/,lZ=/[a-zA-Z]/;function cZ(n,e,t,r){var A,S,T,I,R,P,B,O;const i=()=>Bn((r==null?void 0:r.in)||t,NaN),a=hQ(),s=(r==null?void 0:r.locale)??a.locale??gb,o=(r==null?void 0:r.firstWeekContainsDate)??((S=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:S.firstWeekContainsDate)??a.firstWeekContainsDate??((I=(T=a.locale)==null?void 0:T.options)==null?void 0:I.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((P=(R=r==null?void 0:r.locale)==null?void 0:R.options)==null?void 0:P.weekStartsOn)??a.weekStartsOn??((O=(B=a.locale)==null?void 0:B.options)==null?void 0:O.weekStartsOn)??0;if(!e)return n?i():tt(t,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new vQ(r==null?void 0:r.in,t)],p=e.match(iZ).map(C=>{const D=C[0];if(D in Gm){const V=Gm[D];return V(C,s.formatLong)}return C}).join("").match(rZ),g=[];for(let C of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&hP(C)&&xw(C,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&fP(C)&&xw(C,e,n);const D=C[0],V=nZ[D];if(V){const{incompatibleTokens:L}=V;if(Array.isArray(L)){const F=g.find(q=>L.includes(q.token)||q.token===D);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${C}\` at the same time`)}else if(V.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);g.push({token:D,fullToken:C});const M=V.run(n,C,s.match,d);if(!M)return i();f.push(M.setter),n=M.rest}else{if(D.match(lZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");if(C==="''"?C="'":D==="'"&&(C=uZ(C)),n.indexOf(C)===0)n=n.slice(C.length);else return i()}}if(n.length>0&&oZ.test(n))return i();const y=f.map(C=>C.priority).sort((C,D)=>D-C).filter((C,D,V)=>V.indexOf(C)===D).map(C=>f.filter(D=>D.priority===C).sort((D,V)=>V.subPriority-D.subPriority)).map(C=>C[0]);let x=tt(t,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const C of y){if(!C.validate(x,d))return i();const D=C.set(x,b,d);Array.isArray(D)?(x=D[0],Object.assign(b,D[1])):x=D}return x}function uZ(n){return n.match(aZ)[1].replace(sZ,"'")}function dZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setDate(e),r}function fZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setHours(e),r}function hZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setMinutes(e),r}function pZ(n,e,t){const r=tt(n,t==null?void 0:t.in),i=r.getFullYear(),a=r.getDate(),s=Bn(n,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=gP(s);return r.setMonth(e,Math.min(a,o)),r}function gZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setSeconds(e),r}function mZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function yZ(n,e,t){const r=tt(n,t==null?void 0:t.in);return isNaN(+r)?Bn(n,NaN):(r.setFullYear(e),r)}function vZ(n,e){const t=tt(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function xZ(n,e){const t=tt(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function wZ(n,e,t){const r=+tt(n,t==null?void 0:t.in),[i,a]=[+tt(e.start,t==null?void 0:t.in),+tt(e.end,t==null?void 0:t.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const _Z={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},bZ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class AZ{constructor(e){ve(this,"isMUIAdapter",!0);ve(this,"isTimezoneCompatible",!1);ve(this,"formatTokenMap",_Z);ve(this,"escapedCharacters",{start:"'",end:"'"});ve(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));ve(this,"getInvalidDate",()=>new Date("Invalid Date"));ve(this,"getTimezone",()=>"default");ve(this,"setTimezone",e=>e);ve(this,"toJsDate",e=>e);ve(this,"getCurrentLocaleCode",()=>this.locale.code);ve(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));ve(this,"expandFormat",e=>{const t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(t).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});ve(this,"formatNumber",e=>e);ve(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:t,formats:r,longFormatters:i,lib:a}=e;this.locale=t,this.formats=H({},bZ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class EZ extends AZ{constructor({locale:t,formats:r}={}){super({locale:t??gb,formats:r,longFormatters:Gm});ve(this,"parse",(t,r)=>t===""?null:cZ(t,r,new Date,{locale:this.locale}));ve(this,"isValid",t=>t==null?!1:pP(t));ve(this,"format",(t,r)=>this.formatByString(t,this.formats[r]));ve(this,"formatByString",(t,r)=>JK(t,r,{locale:this.locale}));ve(this,"isEqual",(t,r)=>t===null&&r===null?!0:t===null||r===null?!1:lQ(t,r));ve(this,"isSameYear",(t,r)=>uQ(t,r));ve(this,"isSameMonth",(t,r)=>dQ(t,r));ve(this,"isSameDay",(t,r)=>cQ(t,r));ve(this,"isSameHour",(t,r)=>fQ(t,r));ve(this,"isAfter",(t,r)=>Yx(t,r));ve(this,"isAfterYear",(t,r)=>Yx(t,mD(r)));ve(this,"isAfterDay",(t,r)=>Yx(t,gD(r)));ve(this,"isBefore",(t,r)=>qx(t,r));ve(this,"isBeforeYear",(t,r)=>qx(t,this.startOfYear(r)));ve(this,"isBeforeDay",(t,r)=>qx(t,this.startOfDay(r)));ve(this,"isWithinRange",(t,[r,i])=>wZ(t,{start:r,end:i}));ve(this,"startOfYear",t=>lP(t));ve(this,"startOfMonth",t=>vZ(t));ve(this,"startOfWeek",t=>Eo(t,{locale:this.locale}));ve(this,"startOfDay",t=>x0(t));ve(this,"endOfYear",t=>mD(t));ve(this,"endOfMonth",t=>xZ(t));ve(this,"endOfWeek",t=>sK(t,{locale:this.locale}));ve(this,"endOfDay",t=>gD(t));ve(this,"addYears",(t,r)=>iK(t,r));ve(this,"addMonths",(t,r)=>sP(t,r));ve(this,"addWeeks",(t,r)=>rK(t,r));ve(this,"addDays",(t,r)=>ny(t,r));ve(this,"addHours",(t,r)=>nK(t,r));ve(this,"addMinutes",(t,r)=>tK(t,r));ve(this,"addSeconds",(t,r)=>eK(t,r));ve(this,"getYear",t=>oQ(t));ve(this,"getMonth",t=>iQ(t));ve(this,"getDate",t=>tQ(t));ve(this,"getHours",t=>nQ(t));ve(this,"getMinutes",t=>rQ(t));ve(this,"getSeconds",t=>aQ(t));ve(this,"getMilliseconds",t=>sQ(t));ve(this,"setYear",(t,r)=>yZ(t,r));ve(this,"setMonth",(t,r)=>pZ(t,r));ve(this,"setDate",(t,r)=>dZ(t,r));ve(this,"setHours",(t,r)=>fZ(t,r));ve(this,"setMinutes",(t,r)=>hZ(t,r));ve(this,"setSeconds",(t,r)=>gZ(t,r));ve(this,"setMilliseconds",(t,r)=>mZ(t,r));ve(this,"getDaysInMonth",t=>gP(t));ve(this,"getWeekArray",t=>{const r=this.startOfWeek(this.startOfMonth(t)),i=this.endOfWeek(this.endOfMonth(t));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});ve(this,"getWeekNumber",t=>yb(t,{locale:this.locale}));ve(this,"getYearRange",([t,r])=>{const i=this.startOfYear(t),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const SZ={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},TZ=(n,e,t)=>{t=t||{};let r;const i=SZ[n];return typeof i=="string"?r=i:e===1?t.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:t.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),t.addSuffix?t.comparison&&t.comparison>0?r+"":r+"":r},CZ={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},IZ={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},DZ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},RZ={date:Md({formats:CZ,defaultWidth:"full"}),time:Md({formats:IZ,defaultWidth:"full"}),dateTime:Md({formats:DZ,defaultWidth:"full"})},OZ={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},MZ=(n,e,t,r)=>OZ[n],PZ={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},kZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},NZ={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},LZ={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},BZ={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},FZ={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},VZ=(n,e)=>{const t=Number(n);switch(String(e==null?void 0:e.unit)){case"year":return`${t}`;case"quarter":return`${t}`;case"month":return`${t}`;case"week":return`${t}`;case"date":return`${t}`;case"hour":return`${t}`;case"minute":return`${t}`;case"second":return`${t}`;default:return`${t}`}},jZ={ordinalNumber:VZ,era:ys({values:PZ,defaultWidth:"wide"}),quarter:ys({values:kZ,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:ys({values:NZ,defaultWidth:"wide"}),day:ys({values:LZ,defaultWidth:"wide"}),dayPeriod:ys({values:BZ,defaultWidth:"wide",formattingValues:FZ,defaultFormattingWidth:"wide"})},UZ=/^?\d+(|||||||)?/i,HZ=/\d+/i,zZ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},$Z={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},GZ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},WZ={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},YZ={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},qZ={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},XZ={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},KZ={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},QZ={any:/^(AM|PM|||||||)/i},ZZ={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},JZ={ordinalNumber:oP({matchPattern:UZ,parsePattern:HZ,valueCallback:function(n){return parseInt(n,10)}}),era:vs({matchPatterns:zZ,defaultMatchWidth:"wide",parsePatterns:$Z,defaultParseWidth:"any"}),quarter:vs({matchPatterns:GZ,defaultMatchWidth:"wide",parsePatterns:WZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:vs({matchPatterns:YZ,defaultMatchWidth:"wide",parsePatterns:qZ,defaultParseWidth:"any"}),day:vs({matchPatterns:XZ,defaultMatchWidth:"wide",parsePatterns:KZ,defaultParseWidth:"any"}),dayPeriod:vs({matchPatterns:QZ,defaultMatchWidth:"any",parsePatterns:ZZ,defaultParseWidth:"any"})},eJ={code:"ja",formatDistance:TZ,formatLong:RZ,formatRelative:MZ,localize:jZ,match:JZ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tJ(){return{validate:N.useCallback((e,t,r,i=[])=>{if(!e)throw new Error("");if(e>new Date)throw new Error("");if(!Lm(t))throw new Error("");if((i||[]).some(o=>{var d;const c=(d=o==null?void 0:o.changedAt)!=null&&d.toDate?o.changedAt.toDate():o!=null&&o.changedAt?new Date(o.changedAt):null;return c?Math.abs(c-e)<6e4:!1}))throw new Error("")},[])}}const nJ=({open:n,onClose:e,onAdd:t,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=N.useState(new Date),[c,d]=N.useState(ut.READING),[f,p]=N.useState(""),[g,y]=N.useState(!1),[x,b]=N.useState(""),{validate:A}=tJ(),S=()=>Object.values(ut).filter(R=>R!==c);Ci.useEffect(()=>{f===c&&p("")},[c,f]),Ci.useEffect(()=>{n&&p(a&&a!==c?a:"")},[n,a,c]);const T=async()=>{b(""),y(!0);try{A(s,c,f,i),await t(s,c,f,i),I()}catch(R){b(R.message)}finally{y(!1)}},I=()=>{o(new Date),d(ut.READING),p(""),b(""),y(!1),e()};return v.jsx(YM,{dateAdapter:EZ,adapterLocale:eJ,children:v.jsxs($a,{open:n,onClose:I,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:" "}),v.jsx(Ga,{children:v.jsxs(ie,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[v.jsx(QX,{label:"",value:s,onChange:R=>o(R),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),v.jsxs(Si,{fullWidth:!0,children:[v.jsx(ma,{children:""}),v.jsx(ja,{value:c,onChange:R=>d(R.target.value),label:"",children:Object.entries(Nm).map(([R,P])=>v.jsx(pn,{value:R,children:P},R))})]}),v.jsxs(Si,{fullWidth:!0,children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:f,onChange:R=>p(R.target.value),label:"",children:[v.jsx(pn,{value:"",children:v.jsx("em",{children:""})}),S().map(R=>v.jsx(pn,{value:R,children:Nm[R]},R))]})]}),x&&v.jsx(ne,{color:"error",variant:"body2",children:x})]})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:I,disabled:g,children:""}),v.jsx(Ke,{onClick:T,variant:"contained",disabled:g,children:g?"...":""})]})]})})},rJ=({history:n=[],loading:e=!1,error:t=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=N.useState(!1),p=async(b,A,S,T)=>{o&&await o(b,A,S,T)},g=b=>{switch(b){case ut.TSUNDOKU:return v.jsx(wT,{});case ut.READING:return v.jsx(RN,{});case ut.RE_READING:return v.jsx(DN,{});case ut.FINISHED:return v.jsx(IN,{});default:return v.jsx(wT,{})}},y=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",x=()=>!r||Object.keys(r).length===0?null:v.jsxs(ie,{sx:{mb:3},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(ga,{sx:{p:2,mb:2},children:[r.readingStartedAt&&v.jsxs(ie,{sx:{mb:1},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsx(ne,{variant:"body1",children:y(r.readingStartedAt)})]}),r.reReadingStartedAt&&v.jsxs(ie,{sx:{mb:1},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsx(ne,{variant:"body1",children:y(r.reReadingStartedAt)})]}),r.finishedAt&&v.jsxs(ie,{sx:{mb:1},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsx(ne,{variant:"body1",children:y(r.finishedAt)})]}),i&&v.jsxs(ie,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsxs(ne,{variant:"body1",children:[i,""]})]})]})]});return e?v.jsx(ie,{sx:{p:2},children:v.jsx(ne,{children:"..."})}):t?v.jsx(ie,{sx:{p:2},children:v.jsxs(ne,{color:"error",children:[": ",t]})}):v.jsxs(ie,{sx:{p:2},children:[x(),v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(ne,{variant:"h6",children:""}),a&&v.jsx(Ke,{variant:"outlined",size:"small",startIcon:v.jsx(Q3,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:""})]}),(!n||n.length===0)&&v.jsxs(ie,{sx:{textAlign:"center",py:4},children:[v.jsx(ne,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:""}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(Vw,{children:(n||[]).map((b,A)=>v.jsxs(jw,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[v.jsx(TN,{sx:{minWidth:"auto"},children:v.jsx(CN,{sx:{bgcolor:gs(b.status)==="primary"?"primary.main":gs(b.status)==="secondary"?"secondary.main":gs(b.status)==="success"?"success.main":"default",width:32,height:32},children:g(b.status)})}),v.jsxs(ie,{sx:{flexGrow:1},children:[v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(mn,{label:Ps(b.status),color:gs(b.status),size:"small"}),b.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsx(mn,{label:Ps(b.previousStatus),color:gs(b.previousStatus),size:"small",variant:"outlined"})]})]}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:y(b.changedAt)}),b.notes&&v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mt:1},children:b.notes})]})]}),A<n.length-1&&v.jsx(Bc,{sx:{width:"100%",mt:1}})]},b.id))}),a&&v.jsx(nJ,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:n,currentBookStatus:c})]})},iJ=({bookId:n})=>{const{latestHistory:e,loading:t,error:r}=Z_(n);if(t)return v.jsxs(ga,{sx:{p:2,mb:2},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(Mh,{variant:"rectangular",height:40})]});if(r)return v.jsxs(ga,{sx:{p:2,mb:2},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(ne,{color:"error",children:""})]});if(!e)return v.jsxs(ga,{sx:{p:2,mb:2},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(ne,{color:"text.secondary",children:""})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return v.jsxs(ga,{sx:{p:2,mb:2},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:" "}),v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),v.jsx(mn,{label:Ps(e.status),color:gs(e.status),size:"small"}),e.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",children:""}),v.jsx(mn,{label:Ps(e.previousStatus),color:gs(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},aJ=n=>{const{user:e}=rr(),t=N.useContext(ni),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=N.useState(null),[s,o]=N.useState(!0),[c,d]=N.useState(null),f=N.useCallback(async()=>{if(!e||!n){o(!1);return}try{o(!0),d(null);const x=bo(Ht,"books",n),b=await sj(x);b.exists()&&b.data().userId===e.uid?a({id:b.id,...b.data()}):(console.error("No such document or access denied!"),r(""),a(null),d(""))}catch(x){console.error("Error fetching document:",x),r(""),d("")}finally{o(!1)}},[n,e]),p=N.useCallback(async x=>{if(!e||!n)throw new Error("ID");try{const b=bo(Ht,"books",n);return await $1(b,{...x,updatedAt:Ti()}),a(A=>({...A,...x})),!0}catch(b){throw console.error("Error updating book:",b),r(""),b}},[n,e]),g=N.useCallback(async x=>await p({status:x}),[p]),y=N.useCallback(async x=>await p({tags:x}),[p]);return N.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:y}},jg=n=>n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:new Date(n),sJ=(n,e,t)=>({handleAddManualHistory:N.useCallback(async(i,a,s,o=[])=>{try{await e(i,a,s),yt.status.info("Manual history added successfully");const c=[...o],d={status:a,previousStatus:s,changedAt:i};c.push(d),c.sort((p,g)=>jg(g.changedAt)-jg(p.changedAt));const f=c.length>0&&jg(c[0].changedAt).getTime()===jg(i).getTime();if(!n)return;f&&a!==n.status&&await t(a)}catch(c){throw yt.status.error("Failed to add manual history",c),c}},[n,e,t])}),oJ=()=>{const{id:n}=YN();w1();const{book:e,loading:t,error:r,updateBookStatus:i,updateBookTags:a}=aJ(n),{history:s,loading:o,error:c,addManualStatusHistory:d,getImportantDates:f,getReadingDuration:p}=Z_(n),{handleAddManualHistory:g}=sJ(e,d,i),[y,x]=N.useState(0),[b,A]=N.useState(!1),[S,T]=N.useState(0),I=L=>{i(L)},R=L=>{a(L)},P=()=>{x(L=>L+1),A(!1)},B=()=>{x(L=>L+1)},O=()=>{A(!0)},C=()=>{A(!1)},D=(L,M)=>{T(M)},V=()=>{switch(S){case 0:return v.jsxs(v.Fragment,{children:[v.jsx(ne,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:""}),v.jsx(b$,{bookId:e.id,onMemoUpdated:B},y)]});case 1:return v.jsx(rJ,{history:s,loading:o,error:c,importantDates:f(),readingDuration:p(),showAddButton:!0,bookId:n,onAddHistory:g,currentBookStatus:e==null?void 0:e.status});default:return null}};return t?v.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):r?(console.error(" BookDetail error:",r),v.jsxs("div",{"data-testid":"book-detail-error",children:[": ",r]})):e?v.jsxs(ie,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[v.jsxs(ga,{sx:{p:{xs:2,sm:3}},children:[v.jsx(O$,{book:e,bookId:n,onStatusChange:I}),v.jsx(iJ,{bookId:n}),v.jsx(M$,{book:e,bookId:n,onTagsChange:R}),v.jsx(Bc,{sx:{my:{xs:1,sm:2}}}),v.jsx(ie,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:v.jsxs(m1,{value:S,onChange:D,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[v.jsx(Na,{label:"","data-testid":"memo-list-tab"}),v.jsx(Na,{label:"","data-testid":"status-history-tab"})]})}),V()]}),v.jsx(ON,{color:"primary","aria-label":"",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:O,"data-testid":"memo-add-fab",children:v.jsx(Q3,{})}),v.jsx($a,{open:b,onClose:C,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:v.jsx(T$,{bookId:e.id,bookTags:e.tags||[],onMemoAdded:P,onClose:C})})]}):(console.warn(" BookDetail: Book not found for ID:",n),v.jsx("div",{"data-testid":"book-detail-not-found",children:""}))};function bD({children:n,value:e,index:t,...r}){return v.jsx("div",{role:"tabpanel",hidden:e!==t,id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,...r,children:e===t&&v.jsx(ie,{sx:{p:3},children:n})})}const lJ=n=>{const[e,t]=N.useState({}),[r,i]=N.useState(!1),[a,s]=N.useState(null),o=N.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: , userId:",n.uid);const[p,g]=await Promise.all([Jn(jn(pr(Ht,"books"),wn("userId","==",n.uid))),Jn(jn(wl(Ht,"memos"),wn("userId","==",n.uid)))]);console.log("useTagStats: , :",p.size,":",g.size);const y={};p.forEach(x=>{const b=x.data();console.log("useTagStats: :",{id:x.id,title:b.title,tags:b.tags}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(A=>{var T,I;y[A]||(y[A]={bookCount:0,memoCount:0,lastUsed:null}),y[A].bookCount++;const S=((I=(T=b.updatedAt)==null?void 0:T.toDate)==null?void 0:I.call(T))||new Date;(!y[A].lastUsed||S>y[A].lastUsed)&&(y[A].lastUsed=S)})}),console.log("useTagStats: "),g.forEach(x=>{var A,S;const b=x.data();console.log("useTagStats: :",{id:x.id,bookId:(A=x.ref.parent.parent)==null?void 0:A.id,tags:b.tags,text:((S=b.text)==null?void 0:S.substring(0,30))+"..."}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(T=>{var R,P;y[T]||(y[T]={bookCount:0,memoCount:0,lastUsed:null}),y[T].memoCount++;const I=((P=(R=b.updatedAt)==null?void 0:R.toDate)==null?void 0:P.call(R))||new Date;(!y[T].lastUsed||I>y[T].lastUsed)&&(y[T].lastUsed=I)})}),console.log("useTagStats: , :",y),t(y),console.log("useTagStats: ")}catch(p){console.error(":",p),s(p)}finally{i(!1)}},[n==null?void 0:n.uid]),c=N.useCallback((p="count",g="desc")=>Object.entries(e).map(([x,b])=>({tag:x,...b,totalCount:b.bookCount+b.memoCount,type:b.bookCount>0&&b.memoCount>0?"both":b.bookCount>0?"book":"memo"})).sort((x,b)=>{let A=0;switch(p){case"count":A=b.totalCount-x.totalCount;break;case"name":A=x.tag.localeCompare(b.tag,"ja");break;case"lastUsed":A=(b.lastUsed||0)-(x.lastUsed||0);break;default:A=b.totalCount-x.totalCount}return g==="asc"?-A:A}),[e]),d=N.useCallback(p=>e[p]||null,[e]),f=N.useCallback(()=>{t({}),s(null)},[]);return N.useEffect(()=>{n!=null&&n.uid?o():f()},[n==null?void 0:n.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function dl(n){var e,t;if(n==null)return"";try{return(((t=(e=String(n)).normalize)==null?void 0:t.call(e,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function cJ(){const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState(!1),a=async(f,p)=>{for(let y=0;y<f.length;y+=450){const x=f.slice(y,y+450),b=uj(Ht);x.forEach(A=>p(b,A)),await b.commit()}},s=N.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("");const g=dl(f),y=dl(p);if(!g||!y)throw new Error("");if(g===y)return{booksUpdated:0,memosUpdated:0};i(!0);try{const x=jn(pr(Ht,"books"),wn("userId","==",n.uid)),b=await Jn(x),A=[];b.forEach(R=>{const P=R.data(),B=Array.isArray(P.tags)?P.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(C=>C===g?y:C)));A.push({ref:R.ref,tags:O})}});const S=jn(wl(Ht,"memos"),wn("userId","==",n.uid)),T=await Jn(S),I=[];return T.forEach(R=>{const P=R.data(),B=Array.isArray(P.tags)?P.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(C=>C===g?y:C)));I.push({ref:R.ref,tags:O})}}),await a(A,(R,P)=>{R.update(P.ref,{tags:P.tags})}),await a(I,(R,P)=>{R.update(P.ref,{tags:P.tags})}),{booksUpdated:A.length,memosUpdated:I.length}}catch(x){throw console.error(":",x),t(""),x}finally{i(!1)}},[n==null?void 0:n.uid]),o=N.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("");const p=dl(f);if(!p)throw new Error("");i(!0);try{const g=jn(pr(Ht,"books"),wn("userId","==",n.uid)),y=await Jn(g),x=[];y.forEach(T=>{const I=T.data(),R=Array.isArray(I.tags)?I.tags:[];if(R.includes(p)){const P=R.filter(B=>B!==p);x.push({ref:T.ref,tags:P})}});const b=jn(wl(Ht,"memos"),wn("userId","==",n.uid)),A=await Jn(b),S=[];return A.forEach(T=>{const I=T.data(),R=Array.isArray(I.tags)?I.tags:[];if(R.includes(p)){const P=R.filter(B=>B!==p);S.push({ref:T.ref,tags:P})}}),await a(x,(T,I)=>{T.update(I.ref,{tags:I.tags})}),await a(S,(T,I)=>{T.update(I.ref,{tags:I.tags})}),{booksUpdated:x.length,memosUpdated:S.length}}catch(g){throw console.error(":",g),t(""),g}finally{i(!1)}},[n==null?void 0:n.uid]),c=N.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>dl(g)).filter(g=>!!g));if(p.size===0)throw new Error("");i(!0);try{const g=jn(pr(Ht,"books"),wn("userId","==",n.uid)),y=await Jn(g),x=[];y.forEach(T=>{const I=T.data(),R=Array.isArray(I.tags)?I.tags:[],P=R.filter(B=>!p.has(dl(B)));P.length!==R.length&&x.push({ref:T.ref,tags:P})});const b=jn(wl(Ht,"memos"),wn("userId","==",n.uid)),A=await Jn(b),S=[];return A.forEach(T=>{const I=T.data(),R=Array.isArray(I.tags)?I.tags:[],P=R.filter(B=>!p.has(dl(B)));P.length!==R.length&&S.push({ref:T.ref,tags:P})}),await a(x,(T,I)=>{T.update(I.ref,{tags:I.tags})}),await a(S,(T,I)=>{T.update(I.ref,{tags:I.tags})}),{booksUpdated:x.length,memosUpdated:S.length}}catch(g){throw console.error(":",g),t(""),g}finally{i(!1)}},[n==null?void 0:n.uid]),d=N.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("");const g=dl(p),y=Array.from(new Set(String(f||"").split(",").map(x=>dl(x)).filter(x=>!!x)));if(!g||y.length===0)throw new Error("");if(y.includes(g))throw new Error("");i(!0);try{const x=jn(pr(Ht,"books"),wn("userId","==",n.uid)),b=await Jn(x),A=[];b.forEach(R=>{const P=R.data(),B=Array.isArray(P.tags)?P.tags:[];if(B.some(C=>y.includes(C))){const C=B.filter(V=>!y.includes(V)),D=Array.from(new Set([...C,g]));D.join("|")!==B.join("|")&&A.push({ref:R.ref,tags:D})}});const S=jn(wl(Ht,"memos"),wn("userId","==",n.uid)),T=await Jn(S),I=[];return T.forEach(R=>{const P=R.data(),B=Array.isArray(P.tags)?P.tags:[];if(B.some(C=>y.includes(C))){const C=B.filter(V=>!y.includes(V)),D=Array.from(new Set([...C,g]));D.join("|")!==B.join("|")&&I.push({ref:R.ref,tags:D})}}),await a(A,(R,P)=>{R.update(P.ref,{tags:P.tags})}),await a(I,(R,P)=>{R.update(P.ref,{tags:P.tags})}),{booksUpdated:A.length,memosUpdated:I.length}}catch(x){throw console.error(":",x),t(""),x}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function uJ({open:n,tag:e,onClose:t,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=N.useState(e||""),[d,f]=N.useState(""),[p,g]=N.useState(""),y=()=>{c(e||""),t==null||t()};return v.jsxs($a,{open:n,onClose:y,maxWidth:"xs",fullWidth:!0,children:[v.jsx(Ds,{children:""}),v.jsxs(Ga,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(wt,{autoFocus:!0,fullWidth:!0,label:"",value:o,onChange:x=>c(x.target.value),disabled:s}),v.jsxs(ie,{sx:{mt:2},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(wt,{fullWidth:!0,label:"",value:d,onChange:x=>f(x.target.value),disabled:s}),v.jsx(wt,{fullWidth:!0,label:"",value:p,onChange:x=>g(x.target.value),disabled:s,sx:{mt:1}})]})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:""}),v.jsx(Ke,{onClick:y,disabled:s,children:""}),v.jsx(Ke,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:""}),v.jsx(Ke,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:""})]})]})}function dJ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=rr(),{tagOptions:a,fetchTagHistory:s}=Ao("book",i),{tagOptions:o,fetchTagHistory:c}=Ao("memo",i),[d,f]=N.useState([]),[p,g]=N.useState("");N.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),N.useEffect(()=>{n||(f([]),g(""))},[n]);const y=N.useMemo(()=>{const x=new Set([...a||[],...o||[]]);return Array.from(x).sort((b,A)=>b.localeCompare(A,"ja"))},[a,o]);return v.jsxs($a,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:""}),v.jsxs(Ga,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(yo,{multiple:!0,freeSolo:!0,options:y,value:d,inputValue:p,onInputChange:(x,b)=>g(b),onChange:(x,b)=>f(b),renderTags:(x,b)=>x.map((A,S)=>{const{key:T,...I}=b({index:S});return v.jsx(mn,{label:A,...I,color:"error",variant:"outlined"},T)}),renderInput:x=>v.jsx(wt,{...x,label:"",placeholder:"...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&v.jsx(ie,{sx:{mt:1},children:v.jsxs(ne,{variant:"caption",color:"text.secondary",children:[": ",d.join(", ")]})})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:e,disabled:r,children:""}),v.jsx(Ke,{onClick:()=>t==null?void 0:t(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:""})]})]})}function fJ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=rr(),{tagOptions:a,fetchTagHistory:s}=Ao("book",i),{tagOptions:o,fetchTagHistory:c}=Ao("memo",i),[d,f]=N.useState(""),[p,g]=N.useState([]),[y,x]=N.useState("");N.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),N.useEffect(()=>{n||(f(""),g([]),x(""))},[n]);const b=N.useMemo(()=>{const S=new Set([...a||[],...o||[]]);return Array.from(S).sort((T,I)=>T.localeCompare(I,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return v.jsxs($a,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:""}),v.jsxs(Ga,{children:[v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsxs(ie,{sx:{mb:2},children:[v.jsx(ne,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(yo,{freeSolo:!0,options:b,value:d,inputValue:y,onInputChange:(S,T)=>x(T),onChange:(S,T)=>f(T||y),renderInput:S=>v.jsx(wt,{...S,label:"",placeholder:"",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),v.jsxs(ie,{children:[v.jsx(ne,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(yo,{multiple:!0,freeSolo:!0,options:b,value:p,onChange:(S,T)=>g(T),renderTags:(S,T)=>S.map((I,R)=>{const{key:P,...B}=T({index:R});return v.jsx(mn,{label:I,...B,color:"primary",variant:"outlined"},P)}),renderInput:S=>v.jsx(wt,{...S,label:"",placeholder:"...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:e,disabled:r,children:""}),v.jsx(Ke,{onClick:()=>t==null?void 0:t(p,d||y),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:""})]})]})}function hJ({onTagClick:n}){const{user:e}=rr(),{tagStats:t,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=lJ(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=cJ(),[g,y]=N.useState("count"),[x,b]=N.useState("desc"),[A,S]=N.useState(!1),[T,I]=N.useState(""),[R,P]=N.useState(!1),[B,O]=N.useState(!1),C=a(g,x),D=Object.keys(t).length,V=Object.values(t).reduce((M,F)=>M+F.bookCount,0),L=Object.values(t).reduce((M,F)=>M+F.memoCount,0);return r?v.jsx(ie,{sx:{display:"flex",justifyContent:"center",p:3},children:v.jsx(y1,{})}):i?v.jsx(ie,{sx:{p:2},children:v.jsxs(za,{severity:"error",children:[": ",i.message]})}):D===0?v.jsx(ie,{sx:{p:3},children:v.jsx(za,{severity:"info",children:""})}):v.jsxs(ie,{children:[v.jsxs(ga,{sx:{p:2,mb:3},children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[v.jsxs(ie,{sx:{textAlign:"center"},children:[v.jsx(ne,{variant:"h4",color:"primary",children:D}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(ie,{sx:{textAlign:"center"},children:[v.jsx(ne,{variant:"h4",color:"secondary",children:V}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(ie,{sx:{textAlign:"center"},children:[v.jsx(ne,{variant:"h4",color:"info.main",children:L}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})]})]})]}),v.jsxs(ie,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[v.jsxs(ne,{variant:"h6",children:[" (",D,")"]}),v.jsx(mn,{label:"",size:"small",color:"error",variant:"outlined",onClick:()=>P(!0),"data-testid":"open-bulk-delete"}),v.jsx(mn,{label:"",size:"small",color:"primary",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-merge"}),v.jsxs(Si,{size:"small",sx:{minWidth:120},children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:g,label:"",onChange:M=>y(M.target.value),children:[v.jsx(pn,{value:"count",children:""}),v.jsx(pn,{value:"name",children:""}),v.jsx(pn,{value:"lastUsed",children:""})]})]}),v.jsxs(Si,{size:"small",sx:{minWidth:100},children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:x,label:"",onChange:M=>b(M.target.value),children:[v.jsx(pn,{value:"desc",children:""}),v.jsx(pn,{value:"asc",children:""})]})]})]}),v.jsx(ie,{className:"tag-stats-grid",children:C.map(M=>v.jsx(kn,{"data-testid":`tag-stat-card-${M.tag}`,onClick:()=>n==null?void 0:n(M.tag),className:"tag-stat-card",children:v.jsxs(Nn,{children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[v.jsx(ne,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:M.tag}),v.jsx(mn,{label:M.type,size:"small",color:M.type==="both"?"primary":M.type==="book"?"secondary":"info",variant:"outlined"})]}),v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[": ",M.bookCount,""]}),v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[": ",M.memoCount,""]})]}),v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs(ne,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:[": ",M.totalCount,""]}),v.jsx(ie,{sx:{display:"flex",gap:1},children:v.jsx(mn,{size:"small",label:"",onClick:F=>{F.stopPropagation(),I(M.tag),S(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${M.tag}`})})]}),M.lastUsed&&v.jsxs(ne,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:[": ",M.lastUsed.toLocaleDateString("ja-JP")]})]})},M.tag))}),v.jsx(uJ,{open:A,tag:T,busy:o,onClose:()=>S(!1),onRename:async(M,F)=>{await c(M,F),await s(),S(!1)},onDelete:async M=>{await d(M),await s(),S(!1)},onMerge:async(M,F)=>{await p(M,F),await s(),S(!1)}}),v.jsx(dJ,{open:R,onClose:()=>P(!1),busy:o,onConfirm:async M=>{!M||M.length===0||(await f(M),await s(),P(!1))}}),v.jsx(fJ,{open:B,onClose:()=>O(!1),busy:o,onConfirm:async(M,F)=>{!M||M.length===0||!F||(await p(M.join(","),F),await s(),O(!1))}})]})}function pJ({value:n,onChange:e}){const[t,r]=N.useState((n==null?void 0:n.type)||"none"),[i,a]=N.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,o]=N.useState((n==null?void 0:n.month)||1),[c,d]=N.useState((n==null?void 0:n.quarter)||1),[f,p]=N.useState((n==null?void 0:n.startDate)||""),[g,y]=N.useState((n==null?void 0:n.endDate)||""),x=R=>{const P=R.target.value;r(P);let B={type:P};switch(P){case"year":B.year=i;break;case"month":B.year=i,B.month=s;break;case"quarter":B.year=i,B.quarter=c;break;case"custom":B.startDate=f,B.endDate=g;break}e==null||e(B)},b=R=>{const P=R.target.value;a(P),e==null||e({...n,year:P})},A=R=>{const P=R.target.value;o(P),e==null||e({...n,month:P})},S=R=>{const P=R.target.value;d(P),e==null||e({...n,quarter:P})},T=R=>{const P=R.target.value;p(P),e==null||e({...n,startDate:P})},I=R=>{const P=R.target.value;y(P),e==null||e({...n,endDate:P})};return v.jsxs(ie,{children:[v.jsx(ne,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(ga,{sx:{p:2},children:[v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:t,onChange:x,label:"","data-testid":"date-range-type-select",children:[v.jsx(pn,{value:"none",children:""}),v.jsx(pn,{value:"year",children:""}),v.jsx(pn,{value:"month",children:""}),v.jsx(pn,{value:"quarter",children:""}),v.jsx(pn,{value:"custom",children:""})]})]}),(t==="year"||t==="month"||t==="quarter")&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(ma,{children:""}),v.jsx(ja,{value:i,onChange:b,label:"","data-testid":"year-select",children:Array.from({length:10},(R,P)=>new Date().getFullYear()-P).map(R=>v.jsxs(pn,{value:R,children:[R,""]},R))})]}),t==="month"&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(ma,{children:""}),v.jsx(ja,{value:s,onChange:A,label:"","data-testid":"month-select",children:Array.from({length:12},(R,P)=>P+1).map(R=>v.jsxs(pn,{value:R,children:[R,""]},R))})]}),t==="quarter"&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(ma,{children:""}),v.jsxs(ja,{value:c,onChange:S,label:"","data-testid":"quarter-select",children:[v.jsx(pn,{value:1,children:"11-3"}),v.jsx(pn,{value:2,children:"24-6"}),v.jsx(pn,{value:3,children:"37-9"}),v.jsx(pn,{value:4,children:"410-12"})]})]}),t==="custom"&&v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[v.jsx(ie,{"data-testid":"start-date-grid-item",children:v.jsx(wt,{label:"",type:"date",value:f,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),v.jsx(ie,{"data-testid":"end-date-grid-item",children:v.jsx(wt,{label:"",type:"date",value:g,onChange:I,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),t!=="none"&&v.jsxs(ne,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[t==="year"&&`${i}`,t==="month"&&`${i}${s}`,t==="quarter"&&`${i}${c}`,t==="custom"&&""]})]})]})}function gJ({selectedTags:n=[],onTagsChange:e,type:t="book"}){const{user:r}=rr(),{tagOptions:i,loading:a,fetchTagHistory:s}=Ao(t,r),[o,c]=N.useState("");N.useEffect(()=>{r&&s()},[r,s]);const d=(g,y)=>{if(y&&!n.includes(y)){const x=[...n,y];e==null||e(x),c("")}},f=g=>{const y=n.filter(x=>x!==g);e==null||e(y)},p=(g,y)=>{c(y)};return v.jsxs(ie,{children:[v.jsx(ne,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(ga,{sx:{p:2},children:[v.jsx(yo,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,y)=>g.map((x,b)=>{const{key:A,...S}=y({index:b});return v.jsx(mn,{label:x,...S,onDelete:()=>f(x),color:"primary",variant:"outlined","data-testid":`selected-tag-${x}`},A)}),renderInput:g=>v.jsx(wt,{...g,label:"",placeholder:"...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"","data-testid":"tag-autocomplete"}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`: ${n.join(", ")}`:""})]})]})}function mJ({searchConditions:n,onSearchConditionsChange:e,onSearch:t}){const[r,i]=N.useState(gn.ALL),a=f=>{e==null||e({...n,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...n,status:p})},o=f=>{e==null||e({...n,dateRange:f})},c=f=>{e==null||e({...n,selectedTags:f})},d=()=>{t==null||t(n)};return v.jsxs(ie,{children:[v.jsx(ne,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(ga,{sx:{p:2,mb:2},children:[v.jsx(wt,{label:"",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"","data-testid":"text-search-field"}),v.jsxs(ie,{sx:{mt:2},children:[v.jsx(ne,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsx(ie,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[gn.ALL,gn.TSUNDOKU,gn.READING_GROUP,gn.SUSPENDED,gn.FINISHED].map(f=>v.jsx(Ke,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:hd[f]},f))})]}),v.jsx(ie,{sx:{mt:2},children:v.jsx(pJ,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:o})}),v.jsx(ie,{sx:{mt:2},children:v.jsx(gJ,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),v.jsx(ie,{sx:{display:"flex",justifyContent:"center"},children:v.jsx(Ke,{variant:"contained",onClick:d,"data-testid":"search-button",children:""})})]})}function yJ({results:n=[],loading:e=!1,searchQuery:t="",onResultClick:r}){const{user:i}=rr();if(e)return v.jsx(ie,{sx:{display:"flex",justifyContent:"center",p:4},children:v.jsx(y1,{})});if(!n||n.length===0)return v.jsx(ie,{sx:{p:3},children:v.jsx(za,{severity:"info",children:t?`${t}`:""})});const a=n.filter(d=>d.type==="book"),s=n.filter(d=>d.type==="memo"),o=d=>v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>r==null?void 0:r("memo",d.bookId,d.id),"data-testid":`memo-result-${d.id}`,children:v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[v.jsx(ie,{sx:{mb:2},children:v.jsxs(ne,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsxs("span",{children:[d.bookTitle||""," - ",d.page||""]})]})}),d.text&&v.jsx(ie,{sx:{mb:2,flexGrow:1},children:v.jsx(ne,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:d.text.length>120?`${d.text.substring(0,120)}...`:d.text})}),d.comment&&v.jsx(ie,{sx:{mb:2},children:v.jsxs(ne,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:[" ",d.comment.length>100?`${d.comment.substring(0,100)}...`:d.comment]})}),d.tags&&d.tags.length>0&&v.jsx(ie,{sx:{mb:2},children:v.jsx(ie,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>v.jsx(mn,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),v.jsx(ie,{sx:{mt:"auto"},children:v.jsxs(ne,{variant:"caption",color:"text.secondary",children:[": ",d.createdAt?new Date(d.createdAt.toDate()).toLocaleDateString("ja-JP"):""]})})]})},d.id),c=d=>v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>r==null?void 0:r("book",d.id),"data-testid":`book-result-${d.id}`,children:v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[v.jsx(ie,{sx:{mb:2},children:v.jsxs(ne,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsx("span",{children:d.title})]})}),v.jsxs(ie,{sx:{mb:2},children:[v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:1},children:d.author||""}),v.jsx(mn,{label:Ps(d.status),size:"small",color:gs(d.status),sx:{fontSize:"0.75rem"}})]}),d.tags&&d.tags.length>0&&v.jsx(ie,{sx:{mb:2},children:v.jsx(ie,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>v.jsx(mn,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),v.jsx(ie,{sx:{mt:"auto"},children:v.jsxs(ne,{variant:"caption",color:"text.secondary",children:[": ",d.updatedAt?new Date(d.updatedAt.toDate()).toLocaleDateString("ja-JP"):""]})})]})},d.id);return v.jsxs(ie,{children:[v.jsxs(ie,{sx:{mb:3},children:[v.jsxs(ne,{variant:"h6",gutterBottom:!0,children:[" (",n.length,")"]}),v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[" : ",a.length,",  : ",s.length,""]})]}),v.jsx(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:n.map(d=>v.jsx(ie,{children:d.type==="book"?c(d):o(d)},`${d.type}-${d.id}`))})]})}function vJ(n){const e=new Date;let t=null,r=null;if(!n||!n.type||n.type==="none")return{startDate:t,endDate:r};switch(n.type){case"year":n.year&&(t=new Date(n.year,0,1),r=new Date(n.year,11,31,23,59,59));break;case"month":n.year&&n.month&&(t=new Date(n.year,n.month-1,1),r=new Date(n.year,n.month,0,23,59,59));break;case"quarter":if(n.year&&n.quarter){const i=(n.quarter-1)*3;t=new Date(n.year,i,1),r=new Date(n.year,i+3,0,23,59,59)}break;case"custom":n.startDate&&(t=new Date(n.startDate)),n.endDate&&(r=new Date(n.endDate),r.setHours(23,59,59));break;case"recent":n.months&&(t=new Date(e.getFullYear(),e.getMonth()-n.months,e.getDate()),r=e);break}return{startDate:t,endDate:r}}function xJ(n,e,t,r=50){if(!e)return[];const{status:i,dateRange:a,selectedTags:s}=t||{},o=[],c=[wn("userId","==",e.uid)];if(i&&i!=="all"&&c.push(wn("status","==",i)),a&&a.type!=="none"){const{startDate:p,endDate:g}=vJ(a);p&&c.push(wn("updatedAt",">=",p)),g&&c.push(wn("updatedAt","<=",g))}s&&s.length>0&&Array.isArray(s)&&!s.some(p=>Array.isArray(p))&&c.push(wn("tags","array-contains-any",s));const d=jn(pr(n,"books"),...c,z1("updatedAt","desc"),km(r));o.push({type:"book",query:d});const f=jn(wl(n,"memos"),wn("userId","==",e.uid),km(r*3));return o.push({type:"memo",query:f}),o}async function wJ({db:n,user:e,queries:t,resultLimit:r=50}){var a,s;const i=[];for(const{type:o,query:c}of t)try{const d=await Jn(c);if(o==="memo")for(const f of d.docs){const p=f.data(),g=(a=f.ref.parent.parent)==null?void 0:a.id;let y="";if(g)try{const x=await Jn(jn(pr(n,"books"),wn("__name__","==",g),wn("userId","==",e.uid)));x.empty||(y=x.docs[0].data().title||"")}catch{}i.push({id:f.id,type:o,bookId:g,bookTitle:y,...p})}else d.forEach(f=>{const p=f.data();i.push({id:f.id,type:o,...p})})}catch(d){const f=String((d==null?void 0:d.message)||"");if(d.code==="failed-precondition"||f.includes("index")||f.includes("array-contains-any"))if(o==="memo"){const p=jn(wl(n,"memos"),wn("userId","==",e.uid),km(r*2)),g=await Jn(p);for(const y of g.docs){const x=y.data(),b=(s=y.ref.parent.parent)==null?void 0:s.id;let A="";if(b)try{const S=await Jn(jn(pr(n,"books"),wn("__name__","==",b),wn("userId","==",e.uid)));S.empty||(A=S.docs[0].data().title||"")}catch{}i.push({id:y.id,type:o,bookId:b,bookTitle:A,...x})}}else{const p=jn(pr(n,"books"),wn("userId","==",e.uid),km(r*2));(await Jn(p)).forEach(y=>{const x=y.data();i.push({id:y.id,type:o,...x})})}else throw d}return i}function _J(n,e){if(!e)return n;const t=String(e).toLowerCase();return(n||[]).filter(r=>r.type==="book"?r.title&&String(r.title).toLowerCase().includes(t)||r.author&&String(r.author).toLowerCase().includes(t)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(t)):r.type==="memo"?r.text&&String(r.text).toLowerCase().includes(t)||r.comment&&String(r.comment).toLowerCase().includes(t)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(t)):!1)}function bJ(n,e){if(!e||e.length===0)return n;const t=i=>{if(!Array.isArray(i))return[];const a=[],s=o=>{Array.isArray(o)?o.forEach(s):typeof o=="string"&&o.trim()&&a.push(o.toLowerCase().trim())};return i.forEach(s),a},r=t(e);return(n||[]).filter(i=>!i.tags||!Array.isArray(i.tags)?!1:t(i.tags).some(s=>r.includes(s)))}function AJ(n,e){if(!e)return n;const t=String(e).toLowerCase();return(n||[]).filter(r=>r.text&&String(r.text).toLowerCase().includes(t)||r.comment&&String(r.comment).toLowerCase().includes(t))}function EJ(n,e="updatedAt",t="desc"){const r=[...n||[]];return r.sort((i,a)=>{let s=i[e],o=a[e];return(e==="updatedAt"||e==="createdAt")&&(s=s!=null&&s.toDate?s.toDate():s?new Date(s):new Date(0),o=o!=null&&o.toDate?o.toDate():o?new Date(o):new Date(0)),typeof s=="string"&&typeof o=="string"&&(s=s.toLowerCase(),o=o.toLowerCase()),t==="asc"?s>o?1:-1:s<o?1:-1}),r}function SJ(n,e={}){const{text:t,selectedTags:r,memoContent:i,sortBy:a="updatedAt",sortOrder:s="desc"}=e;let o=_J(n,t);if(r&&r.length>0&&(o=bJ(o,r)),i){const c=o.filter(f=>f.type==="book"),d=AJ(o.filter(f=>f.type==="memo"),i);o=[...c,...d]}return EJ(o,a,s)}function TJ(n={}){const{user:e}=rr(),[t,r]=N.useState([]),[i,a]=N.useState(!1),[s,o]=N.useState(null),{limit:c=50}=n,d=N.useCallback(g=>xJ(Ht,e,g,c),[e,c]),f=N.useCallback(async g=>{if(!e){o("");return}a(!0),o(null);try{console.log(":",g);const y=d(g),x=await wJ({db:Ht,user:e,queries:y,resultLimit:c});console.log(", :",x.length),console.log(":",{books:x.filter(A=>A.type==="book").length,memos:x.filter(A=>A.type==="memo").length});const b=SJ(x,g);r(b)}catch(y){console.error(":",y),o("")}finally{a(!1)}},[e,d]),p=N.useCallback(()=>{r([]),o(null)},[]);return{results:t,loading:i,error:s,executeSearch:f,clearResults:p}}function CJ(){const{user:n}=rr(),e=C0(),[t,r]=N.useState(0),[i,a]=N.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f}=TJ(),[p,g]=N.useState(!1),[y,x]=N.useState(null),[b,A]=N.useState(null),S=(C,D)=>{r(D)},T=C=>{a(C)},I=C=>{console.log(":",C),d(C)},R=(C,D,V)=>{if(C==="book")e(`/book/${D}`);else if(C==="memo"){const L=(s||[]).find(M=>M.type==="memo"&&M.id===V);L?(x(L),A(D),g(!0)):e(`/book/${D}?memo=${V}`)}},P=()=>{g(!1),x(null),A(null)},B=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},O=C=>{console.log(":",C);const D={...i,selectedTags:[C],text:""};a(D),r(0),d(D)};return n?v.jsxs(ie,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[v.jsx(G1,{title:"",subtitle:""}),v.jsxs(ie,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(ie,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(m1,{value:t,onChange:S,centered:!0,"data-testid":"tag-search-tabs",children:[v.jsx(Na,{label:"",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),v.jsx(Na,{label:"",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),v.jsx(bD,{value:t,index:0,"data-testid":"search-tab-panel",children:v.jsx(IJ,{searchConditions:i,onSearchConditionsChange:T,onSearch:I,results:s,loading:o,error:c,onResultClick:R,onClearSearch:B})}),v.jsx(bD,{value:t,index:1,"data-testid":"tag-management-tab-panel",children:v.jsx(DJ,{onTagClick:O})}),v.jsx(GM,{open:p,memo:y,bookId:b,onClose:P,onUpdate:P,onDelete:P})]})]}):v.jsx(ie,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:v.jsx(ne,{variant:"h6",color:"error",children:""})})}function IJ({searchConditions:n,onSearchConditionsChange:e,onSearch:t,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return v.jsxs(ie,{children:[v.jsx(ne,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(mJ,{searchConditions:n,onSearchConditionsChange:e,onSearch:t}),a&&v.jsx(ie,{sx:{mt:2},children:v.jsx(za,{severity:"error",children:a})}),(r.length>0||i)&&v.jsx(ie,{sx:{mt:4},children:v.jsx(yJ,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&v.jsx(ie,{sx:{mt:2,textAlign:"center"},children:v.jsx(ne,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:""})})]})}function DJ({onTagClick:n}){return v.jsxs(ie,{children:[v.jsx(ne,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(hJ,{onTagClick:n})]})}function Ug(n,e,t=1){if(!e)return;const r=n.get(e)||0;n.set(e,r+t)}function RJ(){const{user:n}=rr(),e=N.useContext(ni),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=N.useState(!0),[a,s]=N.useState(null),[o,c]=N.useState([]),[d,f]=N.useState([]);N.useEffect(()=>{let I=!1;async function R(){if(!n){c([]),f([]),i(!1);return}i(!0),s(null);try{const P=jn(pr(Ht,"books"),wn("userId","==",n.uid)),O=(await Jn(P)).docs.map(L=>({id:L.id,...L.data()})),C=jn(wl(Ht,"memos"),wn("userId","==",n.uid)),V=(await Jn(C)).docs.map(L=>({id:L.id,...L.data()}));I||(c(O),f(V))}catch(P){console.error("Failed to load stats:",P),I||(s(""),t(""))}finally{I||i(!1)}}return R(),()=>{I=!0}},[n]);const p=N.useMemo(()=>{const I=o.length,R=o.filter(C=>(C.status||Ar)===ut.TSUNDOKU).length,P=o.filter(C=>(C.status||Ar)===ut.READING).length,B=o.filter(C=>(C.status||Ar)===ut.RE_READING).length,O=o.filter(C=>(C.status||Ar)===ut.FINISHED).length;return{totalBooks:I,tsundokuBooks:R,readingBooks:P,reReadingBooks:B,finishedBooks:O}},[o]),g=N.useMemo(()=>{const I=o.filter(O=>(O.status||Ar)===ut.TSUNDOKU).length,R=o.filter(O=>(O.status||Ar)===ut.READING).length,P=o.filter(O=>(O.status||Ar)===ut.RE_READING).length,B=o.filter(O=>(O.status||Ar)===ut.FINISHED).length;return{tsundoku:I,reading:R,reReading:P,finished:B}},[o]),y=N.useMemo(()=>{const I=new Map,R=new Map;for(const O of o){const C=Array.isArray(O.tags)?O.tags:[];for(const D of C)Ug(I,String(D).trim())}for(const O of d){const C=Array.isArray(O.tags)?O.tags:[];for(const D of C)Ug(R,String(D).trim())}const P=new Set([...I.keys(),...R.keys()]),B=[];for(const O of P){const C=I.get(O)||0,D=R.get(O)||0;B.push({tag:O,bookCount:C,memoCount:D,totalCount:C+D})}return B.sort((O,C)=>C.totalCount-O.totalCount||O.tag.localeCompare(C.tag)),B},[o,d]),x=N.useMemo(()=>{var B;const I=new Date,R=[],P=new Map;for(let O=11;O>=0;O-=1){const C=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;P.set(D,R.length),R.push({key:D,year:C.getFullYear(),month:C.getMonth()+1,count:0})}for(const O of o){const C=O.status||"reading",D=O.finishedAt||O.updatedAt||O.createdAt;if(!D||C!=="finished")continue;const V=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((B=V==null?void 0:V.getTime)==null?void 0:B.call(V)))continue;const L=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`;if(!P.has(L))continue;const M=P.get(L);R[M].count+=1}return R},[o]),b=N.useMemo(()=>{var B;const I=new Date,R=[],P=new Map;for(let O=11;O>=0;O-=1){const C=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;P.set(D,R.length),R.push({key:D,year:C.getFullYear(),month:C.getMonth()+1,count:0})}for(const O of o){const C=O.createdAt||O.updatedAt||O.finishedAt;if(!C)continue;const D=typeof(C==null?void 0:C.toDate)=="function"?C.toDate():new Date(C);if(Number.isNaN((B=D==null?void 0:D.getTime)==null?void 0:B.call(D)))continue;const V=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!P.has(V))continue;const L=P.get(V);R[L].count+=1}return R},[o]),A=N.useMemo(()=>{var B;const I=new Date,R=[],P=new Map;for(let O=11;O>=0;O-=1){const C=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;P.set(D,R.length),R.push({key:D,year:C.getFullYear(),month:C.getMonth()+1,count:0})}for(const O of d){const C=O.createdAt||O.updatedAt;if(!C)continue;const D=typeof(C==null?void 0:C.toDate)=="function"?C.toDate():new Date(C);if(Number.isNaN((B=D==null?void 0:D.getTime)==null?void 0:B.call(D)))continue;const V=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!P.has(V))continue;const L=P.get(V);R[L].count+=1}return R},[d]),S=N.useMemo(()=>{const I=new Map;for(const P of o){const B=(P.author||"").toString().trim();B&&Ug(I,B)}const R=[...I.entries()].map(([P,B])=>({author:P,total:B}));return R.sort((P,B)=>B.total-P.total||P.author.localeCompare(B.author)),R},[o]),T=N.useMemo(()=>{const I=new Map;for(const P of o){const B=(P.publisher||"").toString().trim();B&&Ug(I,B)}const R=[...I.entries()].map(([P,B])=>({publisher:P,total:B}));return R.sort((P,B)=>B.total-P.total||P.publisher.localeCompare(B.publisher)),R},[o]);return{loading:r,error:a,summary:p,tagStats:y,monthlyFinished:x,monthlyAddedBooks:b,monthlyMemos:A,topAuthors:S,topPublishers:T,statusDistribution:g}}const wb="DEFAULT_X_AXIS_KEY",_b="DEFAULT_Y_AXIS_KEY",OJ={top:20,bottom:20,left:20,right:20},MJ=45,PJ=25,wP=20;class kJ{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}),this.getSnapshot=()=>this.value,this.update=t=>{const r=t(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const ry=({params:n,store:e})=>{N.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:n.skipAnimation})}))},[e,n.skipAnimation]);const t=N.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return Wn(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=t():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[t,e]),{instance:{disableAnimation:t}}};ry.params={skipAnimation:!0};ry.getDefaultizedParams=({params:n})=>H({},n,{skipAnimation:n.skipAnimation??!1});ry.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var Ym=Symbol("NOT_FOUND");function NJ(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function LJ(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function BJ(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var AD=n=>Array.isArray(n)?n:[n];function FJ(n){const e=Array.isArray(n[0])?n[0]:n;return BJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function VJ(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}function jJ(n){let e;return{get(t){return e&&n(e.key,t)?e.value:Ym},put(t,r){e={key:t,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function UJ(n,e){let t=[];function r(o){const c=t.findIndex(d=>e(o,d.key));if(c>-1){const d=t[c];return c>0&&(t.splice(c,1),t.unshift(d)),d.value}return Ym}function i(o,c){r(o)===Ym&&(t.unshift({key:o,value:c}),t.length>n&&t.pop())}function a(){return t}function s(){t=[]}return{get:r,put:i,getEntries:a,clear:s}}var HJ=(n,e)=>n===e;function zJ(n){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;const{length:i}=t;for(let a=0;a<i;a++)if(!n(t[a],r[a]))return!1;return!0}}function $J(n,e){const t=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=HJ,maxSize:i=1,resultEqualityCheck:a}=t,s=zJ(r);let o=0;const c=i<=1?jJ(s):UJ(i,s);function d(){let f=c.get(arguments);if(f===Ym){if(f=n.apply(null,arguments),o++,a){const g=c.getEntries().find(y=>a(y.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var GJ=class{constructor(n){this.value=n}deref(){return this.value}},WJ=typeof WeakRef<"u"?WeakRef:GJ,YJ=0,ED=1;function Hg(){return{s:YJ,v:void 0,o:null,p:null}}function _P(n,e={}){let t=Hg();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let g=0,y=c;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const A=b.get(x);A===void 0?(o=Hg(),b.set(x,o)):o=A}else{let b=o.p;b===null&&(o.p=b=new Map);const A=b.get(x);A===void 0?(o=Hg(),b.set(x,o)):o=A}}const d=o;let f;if(o.s===ED)f=o.v;else if(f=n.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new WJ(f):f}return d.s=ED,d.v=f,f}return s.clearCache=()=>{t=Hg(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function bP(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),NJ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...t,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=_P,argsMemoizeOptions:x=[]}=f,b=AD(g),A=AD(x),S=FJ(i),T=p(function(){return a++,d.apply(null,arguments)},...b),I=y(function(){s++;const P=VJ(S,arguments);return o=T.apply(null,P),o},...A);return Object.assign(I,{resultFunc:d,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var qJ=bP(_P),XJ=Object.assign((n,e=qJ)=>{LJ(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(a=>n[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>XJ});const KJ=bP({memoize:$J,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),SD=new WeakMap,We=(...n)=>(t,...r)=>{const i=t.cacheKey;let a=SD.get(i);a||(a=new Map,SD.set(i,a));const s=a.get(n);if(s)return s(t,...r);const o=KJ(...n);return a.set(n,o),o(t,...r)},QJ=n=>n.animation,ZJ=We([QJ],n=>n.skip||n.skipAnimationRequests>0);var Xx={exports:{}},Kx={},Qx={exports:{}},Zx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TD;function JJ(){if(TD)return Zx;TD=1;var n=Uw();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),b=x[0].inst,A=x[1];return a(function(){b.value=y,b.getSnapshot=g,c(b)&&A({inst:b})},[p,y,g]),i(function(){return c(b)&&A({inst:b}),p(function(){c(b)&&A({inst:b})})},[p]),s(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Zx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Zx}var CD;function eee(){return CD||(CD=1,Qx.exports=JJ()),Qx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID;function tee(){if(ID)return Kx;ID=1;var n=Uw(),e=eee();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return Kx.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function S(B){if(!T){if(T=!0,I=B,B=g(B),y!==void 0&&b.hasValue){var O=b.value;if(y(O,B))return R=O}return R=B}if(O=R,r(I,B))return O;var C=g(B);return y!==void 0&&y(O,C)?(I=B,O):(I=B,R=C)}var T=!1,I,R,P=p===void 0?null:p;return[function(){return S(f())},P===null?void 0:function(){return S(P())}]},[f,p,g,y]);var A=i(d,x[0],x[1]);return s(function(){b.hasValue=!0,b.value=A},[A]),c(A),A},Kx}var DD;function nee(){return DD||(DD=1,Xx.exports=tee()),Xx.exports}var ree=nee();const iee=Object.is,ft=(n,e,t=[],r=iee)=>{const i=a=>e(a,...t);return ree.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},iu=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.x},ff=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.y},aee=We([ff],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="left"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),see=We([ff],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="right"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),oee=We([iu],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="top"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),lee=We([iu],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="bottom"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),cee=n=>n.dimensions,AP=n=>n.dimensions.width,EP=n=>n.dimensions.height,uee=n=>n.dimensions.margin.top,dee=n=>n.dimensions.margin.right,fee=n=>n.dimensions.margin.bottom,hee=n=>n.dimensions.margin.left,Ro=We([AP,EP,uee,dee,fee,hee,oee,see,lee,aee],(n,e,t,r,i,a,s,o,c,d)=>({width:n-a-r-d-o,left:a+d,right:r+o,height:e-t-i-s-c,top:t+s,bottom:i+c})),SP=We([cee],n=>({width:n.propsWidth,height:n.propsHeight})),pee=We([AP,EP],(n,e)=>({width:n,height:e}));function TP(n,e){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:e?H({},e,n):n}const gee=10,iy=({params:n,store:e,svgRef:t})=>{const r=n.width!==void 0&&n.height!==void 0,i=N.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=N.useState(0),[o,c]=N.useState(0),d=N.useCallback(()=>{const x=t==null?void 0:t.current;if(!x)return{};const A=MN(x).getComputedStyle(x),S=Math.floor(parseFloat(A.height))||0,T=Math.floor(parseFloat(A.width))||0;return e.update(I=>I.dimensions.width===T&&I.dimensions.height===S?I:H({},I,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??T,height:n.height??S,propsWidth:n.width,propsHeight:n.height}})),{height:S,width:T}},[e,t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);N.useEffect(()=>{e.update(x=>{const b=n.width??x.dimensions.width,A=n.height??x.dimensions.height;return H({},x,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:b,height:A,propsHeight:n.height,propsWidth:n.width}})})},[e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),N.useEffect(()=>{i.current.displayError=!0},[]),Wn(()=>{if(r||!i.current.initialCompute||i.current.computeRun>gee)return;const x=d();x.width!==a||x.height!==o?(i.current.computeRun+=1,x.width!==void 0&&s(x.width),x.height!==void 0&&c(x.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),Wn(()=>{if(r)return()=>{};d();const x=t.current;if(typeof ResizeObserver>"u")return()=>{};let b;const A=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{d()})});return x&&A.observe(x),()=>{b&&cancelAnimationFrame(b),x&&A.unobserve(x)}},[d,r,t]);const f=ft(e,Ro),p=N.useCallback(x=>x>=f.left-1&&x<=f.left+f.width,[f.left,f.width]),g=N.useCallback(x=>x>=f.top-1&&x<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:N.useCallback((x,b,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(x)&&g(b),[p,g]),isXInside:p,isYInside:g}}};iy.params={width:!0,height:!0,margin:!0};iy.getDefaultizedParams=({params:n})=>H({},n,{margin:TP(n.margin,OJ)});iy.getInitialState=({width:n,height:e,margin:t})=>({dimensions:{margin:t,width:n??0,height:e??0,propsWidth:n,propsHeight:e}});const bb=({params:n,store:e})=>(Wn(()=>{e.update(t=>H({},t,{experimentalFeatures:n.experimentalFeatures}))},[e,n.experimentalFeatures]),{});bb.params={experimentalFeatures:!0};bb.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const mee=n=>n.experimentalFeatures,CP=We([mee],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let RD=0;const yee=()=>(RD+=1,`mui-chart-${RD}`),Ab=({params:n,store:e})=>(N.useEffect(()=>{e.update(t=>n.id===void 0||n.id===t.id.providedChartId&&t.id.chartId!==void 0?t:H({},t,{id:H({},t.id,{chartId:n.id??yee()})}))},[e,n.id]),{});Ab.params={id:!0};Ab.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const vee=n=>n.id,xee=We([vee],n=>n.chartId),wee=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],_ee=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],IP=n=>n==="dark"?_ee:wee,DP=({series:n,colors:e,seriesConfig:t,dataset:r})=>{const i={};n.forEach((s,o)=>{var f;const c=t[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(t).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=t[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},ay=({params:n,store:e,seriesConfig:t})=>{const{series:r,dataset:i,theme:a,colors:s}=n,o=N.useRef(!0);return N.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:DP({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:t,dataset:i})})}))},[s,i,r,a,t,e]),{}};ay.params={dataset:!0,series:!0,colors:!0,theme:!0};const bee=[];ay.getDefaultizedParams=({params:n})=>{var e;return H({},n,{series:(e=n.series)!=null&&e.length?n.series:bee,colors:n.colors??IP,theme:n.theme??"light"})};ay.getInitialState=({series:n=[],colors:e,theme:t,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:DP({series:n,colors:typeof e=="function"?e(t):e,seriesConfig:a,dataset:r})}});const RP=n=>n.series,Ka=We([RP],n=>n.processedSeries),Oo=We([RP],n=>n.seriesConfig),Aee={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class OP{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in Aee)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,t,r,i){this.element=e,this.pointerManager=t,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const t=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>t[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const t=`${this.name}ChangeState`;this.element.removeEventListener(t,this.handleStateChange.bind(this))}}class Eee{constructor(){this.activeGestures=new Map}registerActiveGesture(e,t){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:t,element:e};r.add(i)}unregisterActiveGesture(e,t){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===t&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const t=this.activeGestures.get(e);return t?Array.from(t).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,t){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===t):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class See{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(t=>t==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(t))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Tee{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=t=>{const{type:r,pointerId:i}=t;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(t));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(i);return}this.notifyHandlers(t)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(t=>t(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Cee{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new Eee,this.pointerManager=void 0,this.keyboardManager=new See,this.pointerManager=new Tee({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(t=>{this.addGestureTemplate(t)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}setGestureState(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}registerElement(e,t,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,t,a)}),t}registerSingleGesture(e,t,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(t)||this.elementGestureMap.set(t,new Map);const a=this.elementGestureMap.get(t);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,t));const s=i.clone(r);return s.init(t,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,t){const r=this.elementGestureMap.get(t);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(t),r.size===0&&this.elementGestureMap.delete(t),!0)}unregisterAllGestures(e){const t=this.elementGestureMap.get(e);if(t){for(const[,r]of t)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Y0 extends OP{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,t,r,i){super.init(e,t,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,t){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(t===r.target||r.target===this.originalTarget||t===this.originalTarget||"contains"in t&&t.contains(r.target))||"getRootNode"in t&&t.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(t))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Iee(n,e){const t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}function Jx(n){if(n.length<2)return 0;let e=0,t=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)e+=Iee({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),t+=1;return t>0?e/t:0}function So(n){if(n.length===0)return{x:0,y:0};const e=n.reduce((t,r)=>(t.x+=r.clientX,t.y+=r.clientY,t),{x:0,y:0});return{x:e.x/n.length,y:e.y/n.length}}function hf(n,e){return`${n}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const zg=1e-5,fl=1e-5,OD=.15;function Dee(n,e){const t=e.x-n.x,r=e.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=Ree(e,n),s=Math.abs(t)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?zg:OD,c=a?zg:s==="horizontal"?OD:zg;return Math.abs(t)>o&&(i.horizontal=t>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function Ree(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.atan2(r,t)*180/Math.PI;return i>=-45+fl&&i<=-22.5+fl||i>=22.5+fl&&i<=45+fl||i>=135+fl&&i<=157.5+fl||i>=-157.5+fl&&i<=-135+fl}function Oee(n,e){if(!n.vertical&&!n.horizontal)return!1;if(e.length===0)return!0;const t=n.vertical===null||e.includes(n.vertical),r=n.horizontal===null||e.includes(n.horizontal);return t&&r}const MD=0,Mee=n=>n>MD?1:n<-MD?-1:0;class Eb extends Y0{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new Eb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,t){if(t.type!=="pointermove"||t.pointerType!=="mouse"&&t.pointerType!=="pen")return;this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,t);return}const a={x:t.clientX,y:t.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,t)),this.emitMoveEvent(i,"ongoing",r,t)}emitMoveEvent(e,t,r,i){const a=this.state.lastPosition||So(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=hf(this.name,t),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class Sb extends Y0{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new Sb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancel(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=So(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=So(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=Dee(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Oee(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,t,s),this.emitPanEvent(i,"ongoing",a,t,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,t,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;t.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,t,s),this.emitPanEvent(i,"end",a,t,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,t,r,i,a){var S,T;if(!this.state.startCentroid)return;const s=((S=this.state.lastDeltas)==null?void 0:S.x)??0,o=((T=this.state.lastDeltas)==null?void 0:T.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),y=this.gesturesRegistry.getActiveGestures(e),x={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:y,customData:this.customData},b=hf(this.name,t),A=new CustomEvent(b,{bubbles:!0,cancelable:!0,composed:!0,detail:x});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,t,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",t,r,this.state.lastCentroid),this.emitPanEvent(i,"end",t,r,this.state.lastCentroid)}this.resetState()}}class Tb extends Y0{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new Tb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,t),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(t.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=Jx(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=t.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=Jx(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(t.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=t.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,t):(this.isActive=!0,this.emitPinchEvent(i,"start",a,t),this.emitPinchEvent(i,"ongoing",a,t))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)t.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,t),this.emitPinchEvent(i,"end",a,t),this.resetState();else if(s.length>=2){const o=Jx(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,t,r,i){const a=So(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:Mee(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=hf(this.name,t),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class Cb extends Y0{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new Cb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancelPress(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=So(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=t.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,t,s),this.emitPressEvent(i,"ongoing",a,t,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=So(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,t)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,t,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,t);break}}emitPressEvent(e,t,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=hf(this.name,t),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,t,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",t,r,i),this.emitPressEvent(e??this.element,"end",t,r,i)}this.resetState()}}class Ib extends Y0{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new Ib(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,t);return}switch(t.type){case"pointerdown":this.isActive||(this.state.startCentroid=So(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=So(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,t)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,t);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,t,s),this.resetState()):(this.state.lastTapTime=t.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,t);break}}fireTapEvent(e,t,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,t,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=hf(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class Db extends OP{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new Db(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,t){const r=e.length>0?So(e):{x:t.clientX,y:t.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:t.target,srcEvent:t,phase:"ongoing",pointers:e,timeStamp:t.timeStamp,deltaX:t.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:t.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:t.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:t.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const s=hf(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const td=n=>n.preventDefault(),Rb=({svgRef:n})=>{N.useEffect(()=>{const t=n.current;if(!t)return;const r=new Cee({gestures:[new Sb({name:"pan",threshold:0,maxPointers:1}),new Eb({name:"move",preventIf:["pan","pinch"]}),new Tb({name:"pinch",threshold:5,preventIf:["pan"]}),new Db({name:"turnWheel",sensitivity:.01,initialDelta:1}),new Ib({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new Cb({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],t),()=>{r.destroy()}},[n]);const e=N.useCallback((t,r,i)=>{const a=n.current;return a==null||a.addEventListener(t,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(t,r)}},[n]);return N.useEffect(()=>{const t=n.current;return t==null||t.addEventListener("gesturestart",td),t==null||t.addEventListener("gesturechange",td),t==null||t.addEventListener("gestureend",td),()=>{t==null||t.removeEventListener("gesturestart",td),t==null||t.removeEventListener("gesturechange",td),t==null||t.removeEventListener("gestureend",td)}},[n]),{instance:{addInteractionListener:e}}};Rb.params={};Rb.getInitialState=()=>({});const Pee=[Ab,bb,iy,ay,Rb,ry],kee=["apiRef"],Nee=n=>{let{plugins:e}=n,t=Be(n.props,kee);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(t).forEach(s=>{const o=t[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let PD=0;function Lee(n,e,t){const r=T0(),i=N.useMemo(()=>[...Pee,...n],[n]),a=Nee({plugins:i,props:e});a.id=a.id??r;const o=N.useRef({}).current,c=Fee(e.apiRef),d=N.useRef(null),f=N.useRef(null),p=N.useRef(null);if(p.current==null){PD+=1;const x={cacheKey:{id:PD}};i.forEach(b=>{b.getInitialState&&Object.assign(x,b.getInitialState(a,x,t))}),p.current=new kJ(x)}const g=x=>{const b=x({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:t});b.publicAPI&&Object.assign(c.current,b.publicAPI),b.instance&&Object.assign(o,b.instance)};return i.forEach(g),{contextValue:N.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function Bee(n){return n.current==null&&(n.current={}),n}function Fee(n){const e=N.useRef({});return n?Bee(n):e}const MP=N.createContext(null),PP=()=>{},kP=4,NP=20+2*kP,Vee=40+2*kP,jee="hover",Uee={top:5,bottom:5,left:5,right:5},$g={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:NP,showTooltip:jee}},Ob=(n,e,t)=>{var r;if(n)return n===!0?H({axisId:e,axisDirection:t},$g):H({axisId:e,axisDirection:t},$g,n,{slider:H({},$g.slider,{size:((r=n.slider)==null?void 0:r.preview)??$g.slider.preview?Vee:NP},n.slider)})};function LP(n,e){const t={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:wb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=PJ+(a.label?wP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,height:a.height??f,zoom:Ob(a.zoom,p,"x")});if(d!=="none"&&(t[d]+=g.height,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function BP(n,e){const t={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:_b,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=MJ+(a.label?wP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,width:a.width??f,zoom:Ob(a.zoom,p,"y")});if(d!=="none"&&(t[d]+=g.width,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function fm(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Hee(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Mb(n){let e,t,r;n.length!==2?(e=fm,t=(o,c)=>fm(n(o),c),r=(o,c)=>n(o)-c):(e=n===fm||n===Hee?n:zee,t=n,r=n);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function zee(){return 0}function $ee(n){return n===null?NaN:+n}const Gee=Mb(fm),FP=Gee.right;Mb($ee).center;class kD extends Map{constructor(e,t=qee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ND(this,e))}has(e){return super.has(ND(this,e))}set(e,t){return super.set(Wee(this,e),t)}delete(e){return super.delete(Yee(this,e))}}function ND({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function Wee({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Yee({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function qee(n){return n!==null&&typeof n=="object"?n.valueOf():n}const Xee=Math.sqrt(50),Kee=Math.sqrt(10),Qee=Math.sqrt(2);function qm(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Xee?10:a>=Kee?5:a>=Qee?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(n*d),c=Math.round(e*d),o/d<n&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(n/d),c=Math.round(e/d),o*d<n&&++o,c*d>e&&--c),c<o&&.5<=t&&t<2?qm(n,e,t*2):[o,c,d]}function ww(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?qm(e,n,t):qm(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function _w(n,e,t){return e=+e,n=+n,t=+t,qm(n,e,t)[2]}function bw(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?_w(e,n,t):_w(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Zee(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Mo(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Jee(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const LD=Symbol("implicit");function Xm(){var n=new kD,e=[],t=[],r=LD;function i(a){let s=n.get(a);if(s===void 0){if(r!==LD)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new kD;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Xm(e,t).unknown(r)},Mo.apply(i,arguments),i}function sy(){var n=Xm().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete n.unknown;function p(){var g=e().length,y=i<r,x=y?i:r,b=y?r:i;a=(b-x)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),x+=(b-x-a*(g-c))*f,s=a*(1-c),o&&(x=Math.round(x),s=Math.round(s));var A=Zee(g).map(function(S){return x+a*S});return t(y?A.reverse():A)}return n.domain=function(g){return arguments.length?(e(g),p()):e()},n.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},n.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(g){return arguments.length?(o=!!g,p()):o},n.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},n.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},n.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},n.copy=function(){return sy(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},Mo.apply(p(),arguments)}function VP(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return VP(e())},n}function jP(){return VP(sy.apply(null,arguments).paddingInner(1))}function Pb(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function UP(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function q0(){}var w0=.7,Km=1/w0,Pd="\\s*([+-]?\\d+)\\s*",_0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ete=/^#([0-9a-f]{3,8})$/,tte=new RegExp(`^rgb\\(${Pd},${Pd},${Pd}\\)$`),nte=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),rte=new RegExp(`^rgba\\(${Pd},${Pd},${Pd},${_0}\\)$`),ite=new RegExp(`^rgba\\(${Is},${Is},${Is},${_0}\\)$`),ate=new RegExp(`^hsl\\(${_0},${Is},${Is}\\)$`),ste=new RegExp(`^hsla\\(${_0},${Is},${Is},${_0}\\)$`),BD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pb(q0,b0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:FD,formatHex:FD,formatHex8:ote,formatHsl:lte,formatRgb:VD,toString:VD});function FD(){return this.rgb().formatHex()}function ote(){return this.rgb().formatHex8()}function lte(){return HP(this).formatHsl()}function VD(){return this.rgb().formatRgb()}function b0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=ete.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?jD(e):t===3?new Fi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Gg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Gg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tte.exec(n))?new Fi(e[1],e[2],e[3],1):(e=nte.exec(n))?new Fi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rte.exec(n))?Gg(e[1],e[2],e[3],e[4]):(e=ite.exec(n))?Gg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ate.exec(n))?zD(e[1],e[2]/100,e[3]/100,1):(e=ste.exec(n))?zD(e[1],e[2]/100,e[3]/100,e[4]):BD.hasOwnProperty(n)?jD(BD[n]):n==="transparent"?new Fi(NaN,NaN,NaN,0):null}function jD(n){return new Fi(n>>16&255,n>>8&255,n&255,1)}function Gg(n,e,t,r){return r<=0&&(n=e=t=NaN),new Fi(n,e,t,r)}function cte(n){return n instanceof q0||(n=b0(n)),n?(n=n.rgb(),new Fi(n.r,n.g,n.b,n.opacity)):new Fi}function Aw(n,e,t,r){return arguments.length===1?cte(n):new Fi(n,e,t,r??1)}function Fi(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Pb(Fi,Aw,UP(q0,{brighter(n){return n=n==null?Km:Math.pow(Km,n),new Fi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?w0:Math.pow(w0,n),new Fi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Fi(Uc(this.r),Uc(this.g),Uc(this.b),Qm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UD,formatHex:UD,formatHex8:ute,formatRgb:HD,toString:HD}));function UD(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}`}function ute(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}${Pc((isNaN(this.opacity)?1:this.opacity)*255)}`}function HD(){const n=Qm(this.opacity);return`${n===1?"rgb(":"rgba("}${Uc(this.r)}, ${Uc(this.g)}, ${Uc(this.b)}${n===1?")":`, ${n})`}`}function Qm(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Uc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Pc(n){return n=Uc(n),(n<16?"0":"")+n.toString(16)}function zD(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Va(n,e,t,r)}function HP(n){if(n instanceof Va)return new Va(n.h,n.s,n.l,n.opacity);if(n instanceof q0||(n=b0(n)),!n)return new Va;if(n instanceof Va)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Va(s,o,c,n.opacity)}function dte(n,e,t,r){return arguments.length===1?HP(n):new Va(n,e,t,r??1)}function Va(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Pb(Va,dte,UP(q0,{brighter(n){return n=n==null?Km:Math.pow(Km,n),new Va(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?w0:Math.pow(w0,n),new Va(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Fi(e2(n>=240?n-240:n+120,i,r),e2(n,i,r),e2(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Va($D(this.h),Wg(this.s),Wg(this.l),Qm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Qm(this.opacity);return`${n===1?"hsl(":"hsla("}${$D(this.h)}, ${Wg(this.s)*100}%, ${Wg(this.l)*100}%${n===1?")":`, ${n})`}`}}));function $D(n){return n=(n||0)%360,n<0?n+360:n}function Wg(n){return Math.max(0,Math.min(1,n||0))}function e2(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const kb=n=>()=>n;function fte(n,e){return function(t){return n+t*e}}function hte(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function pte(n){return(n=+n)==1?zP:function(e,t){return t-e?hte(e,t,n):kb(isNaN(e)?t:e)}}function zP(n,e){var t=e-n;return t?fte(n,t):kb(isNaN(n)?e:n)}const GD=function n(e){var t=pte(e);function r(i,a){var s=t((i=Aw(i)).r,(a=Aw(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),d=zP(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=n,r}(1);function gte(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function mte(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yte(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=oy(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Nb(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Qt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function vte(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=oy(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var Ew=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t2=new RegExp(Ew.source,"g");function xte(n){return function(){return n}}function wte(n){return function(e){return n(e)+""}}function _te(n,e){var t=Ew.lastIndex=t2.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=Ew.exec(n))&&(i=t2.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Qt(r,i)})),t=t2.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?wte(c[0].x):xte(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function oy(n,e){var t=typeof e,r;return e==null||t==="boolean"?kb(e):(t==="number"?Qt:t==="string"?(r=b0(e))?(e=r,GD):_te:e instanceof b0?GD:e instanceof Date?Nb:mte(e)?gte:Array.isArray(e)?yte:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vte:Qt)(n,e)}function $P(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function bte(n){return function(){return n}}function Ate(n){return+n}var WD=[0,1];function va(n){return n}function Sw(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:bte(isNaN(e)?NaN:.5)}function Ete(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function Ste(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=Sw(i,r),a=t(s,a)):(r=Sw(r,i),a=t(a,s)),function(o){return a(r(o))}}function Tte(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Sw(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=FP(n,o,1,r)-1;return a[c](i[c](o))}}function X0(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ly(){var n=WD,e=WD,t=oy,r,i,a,s=va,o,c,d;function f(){var g=Math.min(n.length,e.length);return s!==va&&(s=Ete(n[0],n[g-1])),o=g>2?Tte:Ste,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(n.map(r),e,t)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,n.map(r),Qt)))(g)))},p.domain=function(g){return arguments.length?(n=Array.from(g,Ate),f()):n.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),t=$P,f()},p.clamp=function(g){return arguments.length?(s=g?!0:va,f()):s!==va},p.interpolate=function(g){return arguments.length?(t=g,f()):t},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return r=g,i=y,f()}}function GP(){return ly()(va,va)}function Cte(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Zm(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function qd(n){return n=Zm(Math.abs(n)),n?n[1]:NaN}function Ite(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function Dte(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Rte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A0(n){if(!(e=Rte.exec(n)))throw new Error("invalid format: "+n);var e;return new Lb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}A0.prototype=Lb.prototype;function Lb(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Lb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ote(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var WP;function Mte(n,e){var t=Zm(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(WP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zm(n,Math.max(0,e+a-1))[0]}function YD(n,e){var t=Zm(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qD={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Cte,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>YD(n*100,e),r:YD,s:Mte,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function XD(n){return n}var KD=Array.prototype.map,QD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Pte(n){var e=n.grouping===void 0||n.thousands===void 0?XD:Ite(KD.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?XD:Dte(KD.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function d(p){p=A0(p);var g=p.fill,y=p.align,x=p.sign,b=p.symbol,A=p.zero,S=p.width,T=p.comma,I=p.precision,R=p.trim,P=p.type;P==="n"?(T=!0,P="g"):qD[P]||(I===void 0&&(I=12),R=!0,P="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var B=b==="$"?t:b==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",O=b==="$"?r:/[%p]/.test(P)?s:"",C=qD[P],D=/[defgprs%]/.test(P);I=I===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function V(L){var M=B,F=O,q,X,W;if(P==="c")F=C(L)+F,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?c:C(Math.abs(L),I),R&&(L=Ote(L)),G&&+L==0&&x!=="+"&&(G=!1),M=(G?x==="("?x:o:x==="-"||x==="("?"":x)+M,F=(P==="s"?QD[8+WP/3]:"")+F+(G&&x==="("?")":""),D){for(q=-1,X=L.length;++q<X;)if(W=L.charCodeAt(q),48>W||W>57){F=(W===46?i+L.slice(q+1):L.slice(q))+F,L=L.slice(0,q);break}}}T&&!A&&(L=e(L,1/0));var Q=M.length+L.length+F.length,Z=Q<S?new Array(S-Q+1).join(g):"";switch(T&&A&&(L=e(Z+L,Z.length?S-F.length:1/0),Z=""),y){case"<":L=M+L+F+Z;break;case"=":L=M+Z+L+F;break;case"^":L=Z.slice(0,Q=Z.length>>1)+M+L+F+Z.slice(Q);break;default:L=Z+M+L+F;break}return a(L)}return V.toString=function(){return p+""},V}function f(p,g){var y=d((p=A0(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(qd(g)/3)))*3,b=Math.pow(10,-x),A=QD[8+x/3];return function(S){return y(b*S)+A}}return{format:d,formatPrefix:f}}var Yg,Bb,YP;kte({thousands:",",grouping:[3],currency:["$",""]});function kte(n){return Yg=Pte(n),Bb=Yg.format,YP=Yg.formatPrefix,Yg}function Nte(n){return Math.max(0,-qd(Math.abs(n)))}function Lte(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qd(e)/3)))*3-qd(Math.abs(n)))}function Bte(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,qd(e)-qd(n))+1}function Fte(n,e,t,r){var i=bw(n,e,t),a;switch(r=A0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=Lte(i,s))&&(r.precision=a),YP(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Bte(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Nte(i))&&(r.precision=a-(r.type==="%")*2);break}}return Bb(r)}function cy(n){var e=n.domain;return n.ticks=function(t){var r=e();return ww(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return Fte(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=_w(s,o,t),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return n},n}function Fb(){var n=GP();return n.copy=function(){return X0(n,Fb())},Mo.apply(n,arguments),cy(n)}function qP(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function ZD(n){return Math.log(n)}function JD(n){return Math.exp(n)}function Vte(n){return-Math.log(-n)}function jte(n){return-Math.exp(-n)}function Ute(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Hte(n){return n===10?Ute:n===Math.E?Math.exp:e=>Math.pow(n,e)}function zte(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function e3(n){return(e,t)=>-n(-e,t)}function $te(n){const e=n(ZD,JD),t=e.domain;let r=10,i,a;function s(){return i=zte(r),a=Hte(r),t()[0]<0?(i=e3(i),a=e3(a),n(Vte,jte)):n(ZD,JD),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),y=i(f),x,b;const A=o==null?10:+o;let S=[];if(!(r%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(x=1;x<r;++x)if(b=g<0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;S.push(b)}}else for(;g<=y;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;S.push(b)}S.length*2<A&&(S=ww(d,f,A))}else S=ww(g,y,Math.min(y-g,A)).map(a);return p?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=A0(c)).precision==null&&(c.trim=!0),c=Bb(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>t(qP(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function Jm(){const n=$te(ly()).domain([1,10]);return n.copy=()=>X0(n,Jm()).base(n.base()),Mo.apply(n,arguments),n}function t3(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function n3(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Gte(n){var e=1,t=n(t3(e),n3(e));return t.constant=function(r){return arguments.length?n(t3(e=+r),n3(e)):e},cy(t)}function XP(){var n=Gte(ly());return n.copy=function(){return X0(n,XP()).constant(n.constant())},Mo.apply(n,arguments)}function r3(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function Wte(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Yte(n){return n<0?-n*n:n*n}function qte(n){var e=n(va,va),t=1;function r(){return t===1?n(va,va):t===.5?n(Wte,Yte):n(r3(t),r3(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},cy(e)}function Vb(){var n=qte(ly());return n.copy=function(){return X0(n,Vb()).exponent(n.exponent())},Mo.apply(n,arguments),n}function Xte(){return Vb.apply(null,arguments).exponent(.5)}function KP(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[FP(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return KP().domain(n).range(e).unknown(t)},Mo.apply(i,arguments)}const n2=new Date,r2=new Date;function Rr(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),n(a);while(d<a&&a<s);return c},i.filter=a=>Rr(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(n2.setTime(+a),r2.setTime(+s),n(n2),n(r2),Math.floor(t(n2,r2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const e1=Rr(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);e1.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Rr(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):e1);e1.range;const co=1e3,xa=co*60,uo=xa*60,To=uo*24,jb=To*7,i3=To*30,i2=To*365,kc=Rr(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*co)},(n,e)=>(e-n)/co,n=>n.getUTCSeconds());kc.range;const Ub=Rr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*co)},(n,e)=>{n.setTime(+n+e*xa)},(n,e)=>(e-n)/xa,n=>n.getMinutes());Ub.range;const Hb=Rr(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*xa)},(n,e)=>(e-n)/xa,n=>n.getUTCMinutes());Hb.range;const zb=Rr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*co-n.getMinutes()*xa)},(n,e)=>{n.setTime(+n+e*uo)},(n,e)=>(e-n)/uo,n=>n.getHours());zb.range;const $b=Rr(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*uo)},(n,e)=>(e-n)/uo,n=>n.getUTCHours());$b.range;const K0=Rr(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*xa)/To,n=>n.getDate()-1);K0.range;const uy=Rr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/To,n=>n.getUTCDate()-1);uy.range;const QP=Rr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/To,n=>Math.floor(n/To));QP.range;function au(n){return Rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xa)/jb)}const dy=au(0),t1=au(1),Kte=au(2),Qte=au(3),Xd=au(4),Zte=au(5),Jte=au(6);dy.range;t1.range;Kte.range;Qte.range;Xd.range;Zte.range;Jte.range;function su(n){return Rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/jb)}const fy=su(0),n1=su(1),ene=su(2),tne=su(3),Kd=su(4),nne=su(5),rne=su(6);fy.range;n1.range;ene.range;tne.range;Kd.range;nne.range;rne.range;const Gb=Rr(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Gb.range;const Wb=Rr(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Wb.range;const Co=Rr(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Co.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Co.range;const Io=Rr(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Io.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Io.range;function ZP(n,e,t,r,i,a){const s=[[kc,1,co],[kc,5,5*co],[kc,15,15*co],[kc,30,30*co],[a,1,xa],[a,5,5*xa],[a,15,15*xa],[a,30,30*xa],[i,1,uo],[i,3,3*uo],[i,6,6*uo],[i,12,12*uo],[r,1,To],[r,2,2*To],[t,1,jb],[e,1,i3],[e,3,3*i3],[n,1,i2]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),x=y?y.range(d,+f+1):[];return g?x.reverse():x}function c(d,f,p){const g=Math.abs(f-d)/p,y=Mb(([,,A])=>A).right(s,g);if(y===s.length)return n.every(bw(d/i2,f/i2,p));if(y===0)return e1.every(Math.max(bw(d,f,p),1));const[x,b]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return x.every(b)}return[o,c]}const[ine,ane]=ZP(Io,Wb,fy,QP,$b,Hb),[sne,one]=ZP(Co,Gb,dy,K0,zb,Ub);function a2(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function s2(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Th(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function lne(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,d=Ch(i),f=Ih(i),p=Ch(a),g=Ih(a),y=Ch(s),x=Ih(s),b=Ch(o),A=Ih(o),S=Ch(c),T=Ih(c),I={a:G,A:Q,b:Z,B:de,c:null,d:u3,e:u3,f:One,g:Une,G:zne,H:Ine,I:Dne,j:Rne,L:JP,m:Mne,M:Pne,p:ge,q:xe,Q:h3,s:p3,S:kne,u:Nne,U:Lne,V:Bne,w:Fne,W:Vne,x:null,X:null,y:jne,Y:Hne,Z:$ne,"%":f3},R={a:be,A:ke,b:he,B:Se,c:null,d:d3,e:d3,f:qne,g:ire,G:sre,H:Gne,I:Wne,j:Yne,L:tk,m:Xne,M:Kne,p:Ae,q:Fe,Q:h3,s:p3,S:Qne,u:Zne,U:Jne,V:ere,w:tre,W:nre,x:null,X:null,y:rre,Y:are,Z:ore,"%":f3},P={a:V,A:L,b:M,B:F,c:q,d:l3,e:l3,f:Ene,g:o3,G:s3,H:c3,I:c3,j:wne,L:Ane,m:xne,M:_ne,p:D,q:vne,Q:Tne,s:Cne,S:bne,u:hne,U:pne,V:gne,w:fne,W:mne,x:X,X:W,y:o3,Y:s3,Z:yne,"%":Sne};I.x=B(t,I),I.X=B(r,I),I.c=B(e,I),R.x=B(t,R),R.X=B(r,R),R.c=B(e,R);function B(re,ye){return function(pe){var te=[],Ve=-1,we=0,ze=re.length,Me,Re,Ye;for(pe instanceof Date||(pe=new Date(+pe));++Ve<ze;)re.charCodeAt(Ve)===37&&(te.push(re.slice(we,Ve)),(Re=a3[Me=re.charAt(++Ve)])!=null?Me=re.charAt(++Ve):Re=Me==="e"?" ":"0",(Ye=ye[Me])&&(Me=Ye(pe,Re)),te.push(Me),we=Ve+1);return te.push(re.slice(we,Ve)),te.join("")}}function O(re,ye){return function(pe){var te=Th(1900,void 0,1),Ve=C(te,re,pe+="",0),we,ze;if(Ve!=pe.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(ye&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(we=s2(Th(te.y,0,1)),ze=we.getUTCDay(),we=ze>4||ze===0?n1.ceil(we):n1(we),we=uy.offset(we,(te.V-1)*7),te.y=we.getUTCFullYear(),te.m=we.getUTCMonth(),te.d=we.getUTCDate()+(te.w+6)%7):(we=a2(Th(te.y,0,1)),ze=we.getDay(),we=ze>4||ze===0?t1.ceil(we):t1(we),we=K0.offset(we,(te.V-1)*7),te.y=we.getFullYear(),te.m=we.getMonth(),te.d=we.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),ze="Z"in te?s2(Th(te.y,0,1)).getUTCDay():a2(Th(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(ze+5)%7:te.w+te.U*7-(ze+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,s2(te)):a2(te)}}function C(re,ye,pe,te){for(var Ve=0,we=ye.length,ze=pe.length,Me,Re;Ve<we;){if(te>=ze)return-1;if(Me=ye.charCodeAt(Ve++),Me===37){if(Me=ye.charAt(Ve++),Re=P[Me in a3?ye.charAt(Ve++):Me],!Re||(te=Re(re,pe,te))<0)return-1}else if(Me!=pe.charCodeAt(te++))return-1}return te}function D(re,ye,pe){var te=d.exec(ye.slice(pe));return te?(re.p=f.get(te[0].toLowerCase()),pe+te[0].length):-1}function V(re,ye,pe){var te=y.exec(ye.slice(pe));return te?(re.w=x.get(te[0].toLowerCase()),pe+te[0].length):-1}function L(re,ye,pe){var te=p.exec(ye.slice(pe));return te?(re.w=g.get(te[0].toLowerCase()),pe+te[0].length):-1}function M(re,ye,pe){var te=S.exec(ye.slice(pe));return te?(re.m=T.get(te[0].toLowerCase()),pe+te[0].length):-1}function F(re,ye,pe){var te=b.exec(ye.slice(pe));return te?(re.m=A.get(te[0].toLowerCase()),pe+te[0].length):-1}function q(re,ye,pe){return C(re,e,ye,pe)}function X(re,ye,pe){return C(re,t,ye,pe)}function W(re,ye,pe){return C(re,r,ye,pe)}function G(re){return s[re.getDay()]}function Q(re){return a[re.getDay()]}function Z(re){return c[re.getMonth()]}function de(re){return o[re.getMonth()]}function ge(re){return i[+(re.getHours()>=12)]}function xe(re){return 1+~~(re.getMonth()/3)}function be(re){return s[re.getUTCDay()]}function ke(re){return a[re.getUTCDay()]}function he(re){return c[re.getUTCMonth()]}function Se(re){return o[re.getUTCMonth()]}function Ae(re){return i[+(re.getUTCHours()>=12)]}function Fe(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var ye=B(re+="",I);return ye.toString=function(){return re},ye},parse:function(re){var ye=O(re+="",!1);return ye.toString=function(){return re},ye},utcFormat:function(re){var ye=B(re+="",R);return ye.toString=function(){return re},ye},utcParse:function(re){var ye=O(re+="",!0);return ye.toString=function(){return re},ye}}}var a3={"-":"",_:" ",0:"0"},Ur=/^\s*\d+/,cne=/^%/,une=/[\\^$*+?|[\]().{}]/g;function Gt(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function dne(n){return n.replace(une,"\\$&")}function Ch(n){return new RegExp("^(?:"+n.map(dne).join("|")+")","i")}function Ih(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function fne(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function hne(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function pne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function gne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function mne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function s3(n,e,t){var r=Ur.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function o3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function yne(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function vne(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function xne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function l3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function wne(n,e,t){var r=Ur.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function c3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function _ne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function bne(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function Ane(n,e,t){var r=Ur.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function Ene(n,e,t){var r=Ur.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Sne(n,e,t){var r=cne.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Tne(n,e,t){var r=Ur.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function Cne(n,e,t){var r=Ur.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function u3(n,e){return Gt(n.getDate(),e,2)}function Ine(n,e){return Gt(n.getHours(),e,2)}function Dne(n,e){return Gt(n.getHours()%12||12,e,2)}function Rne(n,e){return Gt(1+K0.count(Co(n),n),e,3)}function JP(n,e){return Gt(n.getMilliseconds(),e,3)}function One(n,e){return JP(n,e)+"000"}function Mne(n,e){return Gt(n.getMonth()+1,e,2)}function Pne(n,e){return Gt(n.getMinutes(),e,2)}function kne(n,e){return Gt(n.getSeconds(),e,2)}function Nne(n){var e=n.getDay();return e===0?7:e}function Lne(n,e){return Gt(dy.count(Co(n)-1,n),e,2)}function ek(n){var e=n.getDay();return e>=4||e===0?Xd(n):Xd.ceil(n)}function Bne(n,e){return n=ek(n),Gt(Xd.count(Co(n),n)+(Co(n).getDay()===4),e,2)}function Fne(n){return n.getDay()}function Vne(n,e){return Gt(t1.count(Co(n)-1,n),e,2)}function jne(n,e){return Gt(n.getFullYear()%100,e,2)}function Une(n,e){return n=ek(n),Gt(n.getFullYear()%100,e,2)}function Hne(n,e){return Gt(n.getFullYear()%1e4,e,4)}function zne(n,e){var t=n.getDay();return n=t>=4||t===0?Xd(n):Xd.ceil(n),Gt(n.getFullYear()%1e4,e,4)}function $ne(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gt(e/60|0,"0",2)+Gt(e%60,"0",2)}function d3(n,e){return Gt(n.getUTCDate(),e,2)}function Gne(n,e){return Gt(n.getUTCHours(),e,2)}function Wne(n,e){return Gt(n.getUTCHours()%12||12,e,2)}function Yne(n,e){return Gt(1+uy.count(Io(n),n),e,3)}function tk(n,e){return Gt(n.getUTCMilliseconds(),e,3)}function qne(n,e){return tk(n,e)+"000"}function Xne(n,e){return Gt(n.getUTCMonth()+1,e,2)}function Kne(n,e){return Gt(n.getUTCMinutes(),e,2)}function Qne(n,e){return Gt(n.getUTCSeconds(),e,2)}function Zne(n){var e=n.getUTCDay();return e===0?7:e}function Jne(n,e){return Gt(fy.count(Io(n)-1,n),e,2)}function nk(n){var e=n.getUTCDay();return e>=4||e===0?Kd(n):Kd.ceil(n)}function ere(n,e){return n=nk(n),Gt(Kd.count(Io(n),n)+(Io(n).getUTCDay()===4),e,2)}function tre(n){return n.getUTCDay()}function nre(n,e){return Gt(n1.count(Io(n)-1,n),e,2)}function rre(n,e){return Gt(n.getUTCFullYear()%100,e,2)}function ire(n,e){return n=nk(n),Gt(n.getUTCFullYear()%100,e,2)}function are(n,e){return Gt(n.getUTCFullYear()%1e4,e,4)}function sre(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Kd(n):Kd.ceil(n),Gt(n.getUTCFullYear()%1e4,e,4)}function ore(){return"+0000"}function f3(){return"%"}function h3(n){return+n}function p3(n){return Math.floor(+n/1e3)}var nd,rk,ik;lre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lre(n){return nd=lne(n),rk=nd.format,nd.parse,ik=nd.utcFormat,nd.utcParse,nd}function cre(n){return new Date(n)}function ure(n){return n instanceof Date?+n:+new Date(+n)}function Yb(n,e,t,r,i,a,s,o,c,d){var f=GP(),p=f.invert,g=f.domain,y=d(".%L"),x=d(":%S"),b=d("%I:%M"),A=d("%I %p"),S=d("%a %d"),T=d("%b %d"),I=d("%B"),R=d("%Y");function P(B){return(c(B)<B?y:o(B)<B?x:s(B)<B?b:a(B)<B?A:r(B)<B?i(B)<B?S:T:t(B)<B?I:R)(B)}return f.invert=function(B){return new Date(p(B))},f.domain=function(B){return arguments.length?g(Array.from(B,ure)):g().map(cre)},f.ticks=function(B){var O=g();return n(O[0],O[O.length-1],B??10)},f.tickFormat=function(B,O){return O==null?P:d(O)},f.nice=function(B){var O=g();return(!B||typeof B.range!="function")&&(B=e(O[0],O[O.length-1],B??10)),B?g(qP(O,B)):f},f.copy=function(){return X0(f,Yb(n,e,t,r,i,a,s,o,c,d))},f}function ak(){return Mo.apply(Yb(sne,one,Co,Gb,dy,K0,zb,Ub,kc,rk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dre(){return Mo.apply(Yb(ine,ane,Io,Wb,fy,uy,$b,Hb,kc,ik).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fre(){var n=0,e=1,t,r,i,a,s=va,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-t)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var y,x;return arguments.length?([y,x]=g,s=p(y,x),d):[s(0),s(1)]}}return d.range=f(oy),d.rangeRound=f($P),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,t=p(n),r=p(e),i=t===r?0:1/(r-t),d}}function hre(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function sk(){var n=cy(fre()(va));return n.copy=function(){return hre(n,sk())},Jee.apply(n,arguments)}function pre(n,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function r1(n){return n.scaleType==="band"}function qb(n){return n.scaleType==="point"}function gre(n){return n.scaleType==="symlog"}function mre(n){return n.type==="piecewise"?KP(n.thresholds,n.colors):sk([n.min??0,n.max??100],n.color)}function Qd(n){return n.values?Xm(n.values,n.colors).unknown(n.unknownColor??null):Xm(n.colors.map((e,t)=>t),n.colors).unknown(n.unknownColor??null)}function Hc(n){return n.type==="ordinal"?Qd(n):mre(n)}function ok(n){const{tickMaxStep:e,tickMinStep:t,tickNumber:r,range:i,domain:a}=n,s=t===void 0?999:Math.floor(Math.abs(a[1]-a[0])/t),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function lk(n,e){return e[1]-e[0]===0?1:n/((e[1]-e[0])/100)}function yre(n,e){const t=XP(n,e),r=t.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=vre(t);return t.ticks=o=>{const c=r(o),d=t.constant();let f=0,p=0,g=0;c.forEach(x=>{x>-d&&x<d&&(p+=1),x<=-d&&(f+=1),x>=d&&(g+=1)});const y=[];if(f>0&&y.push(...i.ticks(f)),p>0){const x=a.ticks(p);y.at(-1)===x[0]?y.push(...x.slice(1)):y.push(...x)}if(g>0){const x=s.ticks(g);y.at(-1)===x[0]?y.push(...x.slice(1)):y.push(...x)}return y},t.tickFormat=(o=10,c)=>{const d=t.constant(),[f,p]=t.domain(),g=p-f,y=i.domain(),x=y[1]-y[0],A=(g===0?0:x/g)*o,S=a.domain(),T=S[1]-S[0],R=(g===0?0:T/g)*o,P=s.domain(),B=P[1]-P[0],C=(g===0?0:B/g)*o,D=i.tickFormat(A,c),V=a.tickFormat(R,c),L=s.tickFormat(C,c);return M=>(M.valueOf()<=-d?D:M.valueOf()>=d?L:V)(M)},t}function vre(n){const e=n.constant(),t=n.domain(),r=[t[0],Math.min(t[1],-e)],i=Jm(r,n.range()),a=[Math.max(t[0],-e),Math.min(t[1],e)],s=Fb(a,n.range()),o=[Math.max(t[0],e),t[1]],c=Jm(o,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function i1(n,e,t){switch(n){case"log":return Jm(e,t);case"pow":return Vb(e,t);case"sqrt":return Xte(e,t);case"time":return ak(e,t);case"utc":return dre(e,t);case"symlog":return yre(e,t);default:return Fb(e,t)}}const a1=n=>(n==null?void 0:n[0])instanceof Date;function s1(n,e){const t=ak(n.data,e);return(r,{location:i})=>i==="tick"?t.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const o2=(n,e)=>{const t=n[1]-n[0],r=e[1]-e[0],i=n[0]-e[0]*t/r,a=n[1]+(100-e[1])*t/r;return[i,a]};let g3,m3;class xre{constructor(){if(this.types=new Set,g3)throw new Error("You can only create one instance!");g3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class wre{constructor(){if(this.types=new Set,m3)throw new Error("You can only create one instance!");m3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const hy=new xre;hy.addType("bar");hy.addType("line");hy.addType("scatter");const ck=new wre;ck.addType("radar");function Xb(n){return hy.getTypes().has(n)}const _re=(n,e,t,r,i,a,s,o)=>{var x;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((x=s[e])==null?void 0:x.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:t,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,y]=n;return[Math.min(f,g),Math.max(p,y)]},uk=(n,e,t,r,i,a)=>{const o=Object.keys(t).filter(Xb).reduce((c,d)=>_re(c,d,n,e,t,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},bre=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(Xb).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i},Are=(n,e,t,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&t===0)return"strict"}return"nice"};function Ere(n,e,t){const r=e==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return t.reverse?[r[1],r[0]]:r}const Sre=.2,Tre=.1;function dk({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(t===void 0)return{axis:{},axisIds:[]};const d=bre(i,r,e,t[0].id),f={};return t.forEach((p,g)=>{const y=p,x=s==null?void 0:s[y.id],b=a==null?void 0:a.get(y.id),A=b?[b.start,b.end]:[0,100],S=Ere(n,i,y),[T,I]=uk(y,i,r,g,e,b===void 0&&!x?o:void 0),R=!y.ignoreTooltip&&d.has(y.id),P=y.data??[];if(r1(y)){const G=y.categoryGapRatio??Sre,Q=y.barGapRatio??Tre,Z=i==="y"?[S[1],S[0]]:S,de=o2(Z,A);if(f[y.id]=H({offset:0,height:0,categoryGapRatio:G,barGapRatio:Q,triggerTooltip:R},y,{data:P,scale:sy(y.data,de).paddingInner(G).paddingOuter(G/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Qd(H({values:y.data},y.colorMap)):Hc(y.colorMap))}),a1(y.data)){const ge=s1(y,Z);f[y.id].valueFormatter=y.valueFormatter??ge}}if(qb(y)){const G=i==="y"?[...S].reverse():S,Q=o2(G,A);if(f[y.id]=H({offset:0,height:0,triggerTooltip:R},y,{data:P,scale:jP(y.data,Q),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Qd(H({values:y.data},y.colorMap)):Hc(y.colorMap))}),a1(y.data)){const Z=s1(y,G);f[y.id].valueFormatter=y.valueFormatter??Z}}if(y.scaleType==="band"||y.scaleType==="point")return;const B=y.scaleType??"linear",O=c?Are(y,i,g,e):y.domainLimit??"nice",C=[y.min??T,y.max??I];if(typeof O=="function"){const{min:G,max:Q}=O(T,I);C[0]=G,C[1]=Q}const D=ok(H({},y,{range:S,domain:C})),V=lk(D,A),L=o2(S,A),M=i1(B,C,L);gre(y)&&y.constant!=null&&M.constant(y.constant);const F=O==="nice"?M.nice(D):M,[q,X]=F.domain(),W=[y.min??q,y.max??X];f[y.id]=H({offset:0,height:0,triggerTooltip:R},y,{data:P,scaleType:B,scale:F.domain(W),tickNumber:V,colorScale:y.colorMap&&Hc(y.colorMap),valueFormatter:y.valueFormatter??pre(V,i1(B,S.map(G=>M.invert(G)),S))})}),{axis:f,axisIds:t.map(({id:p})=>p)}}function Cre(n){return n!=null}function fk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?Ire(a.data,c.start,c.end,i):Dre(d,uk(a,i,t,s,r),c.start,c.end,i,a.data)}}function Ire(n,e,t,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(e*i/100),s=Math.ceil(t*i/100);return function(c,d){return(c[r]??(n==null?void 0:n[d]))==null?!0:d>=a&&d<s}}function Dre(n,e,t,r,i,a){let s,o;[s,o]=i1(n??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+t*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const y=p[i]??(a==null?void 0:a[g]);return y==null?!0:y>=c&&y<=d}}const Rre=n=>({currentAxisId:e,seriesXAxisId:t,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===t?r:t)||i?((f=(d=Object.values(n??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,t].filter(p=>p!==e).map(p=>n[p??""]).filter(Cre).every(p=>p(a,s))},y3=n=>(e=[])=>e.reduce((t,r)=>{const{zoom:i,id:a}=r,s=Ob(i,a,n);return s&&(t[a]=s),t},{}),Ore=n=>{const e=new Map;return n.forEach(t=>{e.set(t.axisId,t)}),e},hk=n=>n.zoom,pk=We([hk],n=>n==null?void 0:n.isInteracting),py=We([hk],n=>(n==null?void 0:n.zoomData)&&Ore(n==null?void 0:n.zoomData)),Q0=We([iu,ff],(n,e)=>H({},y3("x")(n),y3("y")(e)));We([Q0,(n,e)=>e],(n,e)=>n[e]);const Mre=We([py,Q0,Oo,Ka],(n,e,t,r)=>n&&e&&fk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"x"})),Pre=We([py,Q0,Oo,Ka],(n,e,t,r)=>n&&e&&fk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"y"})),gk=We([Mre,Pre,iu,ff],(n,e,t,r)=>{if(n===void 0||e===void 0)return;const i=t==null?void 0:t.reduce((s,o,c)=>{const d=n(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return Rre(H({},i,a))}),Ki=We([iu,Ro,Ka,Oo,py,Q0,gk,CP],(n,e,t,r,i,a,s,o)=>dk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),Qi=We([ff,Ro,Ka,Oo,py,Q0,gk,CP],(n,e,t,r,i,a,s,o)=>dk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));We([Ki,Qi,(n,e)=>e],(n,e,t)=>(n==null?void 0:n.axis[t])??(e==null?void 0:e.axis[t]));We([iu,ff,(n,e)=>e],(n,e,t)=>{const r=(n==null?void 0:n.find(i=>i.id===t))??(e==null?void 0:e.find(i=>i.id===t))??null;if(r)return r});function Qa(n){return n.bandwidth!==void 0}function rd(n){return n instanceof Date?n.getTime():n}function Zd(n,e){const{scale:t,data:r,reverse:i}=n;if(!Qa(t)){const s=t.invert(e);if(r===void 0)return-1;const o=rd(s);return r==null?void 0:r.findIndex((d,f)=>{const p=rd(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-rd(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(rd(s)-p)<Math.abs(rd(s)-rd(r[f+1])))})}const a=t.bandwidth()===0?Math.floor((e-Math.min(...t.range())+t.step()/2)/t.step()):Math.floor((e-Math.min(...t.range()))/t.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function v3(n,e,t){const{scale:r,data:i}=n;if(!Qa(r)){const a=r.invert(e);return t<0?a:i[t]}return t<0||t>=i.length?null:i[t]}function Tw(n,e){const t=n.createSVGPoint();return t.x=e.clientX,t.y=e.clientY,t.matrixTransform(n.getScreenCTM().inverse())}const kre=Object.is;function mk(n,e){if(n===e)return!0;if(!(n instanceof Object)||!(e instanceof Object))return!1;let t=0,r=0;for(const i in n)if(t+=1,!kre(n[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return t===r}const pf=({store:n})=>{const e=Ue(function(){n.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),t=Ue(function(s){n.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=Ue(function(s){n.update(o=>mk(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=Ue(function(s){n.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:t,setPointerCoordinate:i}}};pf.getInitialState=()=>({interaction:{item:null,pointer:null}});pf.params={};const Kb=n=>n.interaction,Nre=We([Kb],n=>n!==void 0),yk=We([Kb],n=>(n==null?void 0:n.item)??null),vk=We([Kb],n=>(n==null?void 0:n.pointer)??null),Z0=We([vk],n=>n&&n.x),J0=We([vk],n=>n&&n.y),Lre=We([yk],n=>n!==null);function kd(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!kd(n[a],e[a]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!kd(s[1],e.get(s[0])))return!1}return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==e[a])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const t=Object.keys(n),r=t.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,t[i]))return!1;for(let i=0;i<r;i+=1){const a=t[i];if(!kd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}const gy=(n,e)=>e;function Cw(n,e,t=e.axisIds[0]){return Array.isArray(t)?t.map(r=>Zd(e.axis[r],n)):Zd(e.axis[t],n)}const xk=(n,e,t)=>{if(n===null)return null;const r=Cw(n,e,t);return r===-1?null:r},Qb=We([Z0,Ki,gy],xk),Zb=We([J0,Qi,gy],xk),Bre=We([Z0,J0,Ki,Qi],(n,e,t,r)=>[...n===null?[]:t.axisIds.map(i=>({axisId:i,dataIndex:Cw(n,t,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:Cw(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function wk(n,e,t,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>v3(e.axis[i],n,t[a])):v3(e.axis[r],n,t)}const Fre=We([Z0,Ki,Qb,gy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:wk(n,e,t,r)),Vre=We([J0,Qi,Zb,gy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:wk(n,e,t,r)),_k=We([Z0,Ki],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:Zd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:kd}}),bk=We([J0,Qi],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:Zd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:kd}}),jre=We([_k,bk],(n,e)=>n.length>0||e.length>0),Ure=()=>{};function Hre(n,e,t,r){const i=Z3(zre,{store:n,selector:e,skip:r}).current;i.effect=t,N.useEffect(i.onMount(r),[r])}function zre(n){const{store:e,selector:t,skip:r}=n;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=t(c);o.effect(a,d),a=d}))},o={effect:Ure,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=t(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=t(e.value),s()),o}const gf=({params:n,store:e,seriesConfig:t,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=n,d=ft(e,Ro),f=ft(e,Ka),p=ft(e,Nre),{axis:g,axisIds:y}=ft(e,Ki),{axis:x,axisIds:b}=ft(e,Qi);PP({controlled:n.highlightedAxis}),Wn(()=>{n.highlightedAxis!==void 0&&e.update(I=>I.controlledCartesianAxisHighlight===n.highlightedAxis?I:H({},I,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[e,n.highlightedAxis]);const A=N.useRef(!0);N.useEffect(()=>{if(A.current){A.current=!1;return}e.update(I=>H({},I,{cartesianAxis:H({},I.cartesianAxis,{x:LP(a,o),y:BP(s,o)})}))},[t,d,a,s,o,e]);const S=y[0],T=b[0];return Hre(e,Bre,(I,R)=>{if(!Object.is(I,R)){if(I.length!==R.length){c(R);return}I!=null&&I.some(({axisId:P,dataIndex:B},O)=>R[O].axisId!==P||R[O].dataIndex!==B)&&c(R)}},!c),N.useEffect(()=>{const I=r.current;if(!p||!I||n.disableAxisListener)return()=>{};const R=i.addInteractionListener("moveEnd",L=>{var M;L.detail.activeGestures.pan||(M=i.cleanInteraction)==null||M.call(i)}),P=i.addInteractionListener("panEnd",L=>{var M;L.detail.activeGestures.move||(M=i.cleanInteraction)==null||M.call(i)}),B=i.addInteractionListener("quickPressEnd",L=>{var M;!L.detail.activeGestures.move&&!L.detail.activeGestures.pan&&((M=i.cleanInteraction)==null||M.call(i))}),O=L=>{var X,W;const M=L.detail.srcEvent,F=L.detail.target,q=Tw(I,M);if(L.detail.srcEvent.buttons>=1&&(F!=null&&F.hasPointerCapture(L.detail.srcEvent.pointerId))&&!(F!=null&&F.closest("[data-charts-zoom-slider]"))&&(F==null||F.releasePointerCapture(L.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,F)){(X=i.cleanInteraction)==null||X.call(i);return}(W=i.setPointerCoordinate)==null||W.call(i,q)},C=i.addInteractionListener("move",O),D=i.addInteractionListener("pan",O),V=i.addInteractionListener("quickPress",O);return()=>{C.cleanup(),R.cleanup(),D.cleanup(),P.cleanup(),V.cleanup(),B.cleanup()}},[r,e,g,S,x,T,i,n.disableAxisListener,p]),N.useEffect(()=>{const I=r.current,R=n.onAxisClick;if(I===null||!R)return()=>{};const P=i.addInteractionListener("tap",B=>{let O=null,C=!1;const D=Tw(I,B.detail.srcEvent),V=Zd(g[S],D.x);C=V!==-1,O=C?V:Zd(x[T],D.y);const L=C?y[0]:b[0];if(O==null||O===-1)return;const M=(C?g:x)[L].data[O],F={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(W=>{const G=f[q].series[W],Q=G.xAxisId,Z=G.yAxisId,de=C?Q:Z;(de===void 0||de===L)&&(F[W]=G.data[O])})}),R(B.detail.srcEvent,{dataIndex:O,axisValue:M,seriesValues:F})});return()=>{P.cleanup()}},[n.onAxisClick,f,r,g,y,x,b,S,T,i]),{}};gf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};gf.getDefaultizedParams=({params:n})=>H({},n,{colors:n.colors??IP,theme:n.theme??"light",defaultizedXAxis:LP(n.xAxis,n.dataset),defaultizedYAxis:BP(n.yAxis,n.dataset)});gf.getInitialState=n=>H({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const mf=n=>n.controlledCartesianAxisHighlight,Ak=(n,e,t)=>t!==void 0?t.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:e.axisIds[0],dataIndex:n}];We([Qb,Ki,mf],Ak);We([Zb,Qi,mf],Ak);const Ek=(n,e,t,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=t.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:t.axisIds[0],dataIndex:n,value:e}],$re=We([Qb,Fre,Ki,mf],Ek),Gre=We([Zb,Vre,Qi,mf],Ek),Sk=(n,e)=>n===void 0?[e.axis[e.axisIds[0]]]:n.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);We([mf,Ki],Sk);We([mf,Qi],Sk);function x3(n,e){return n.id!==void 0?n:H({id:e},n)}function w3(n){return n.colorMap?H({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?Qd(H({values:n.data},n.colorMap)):Hc(n.colorMap.type==="continuous"?H({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function Tk(n,e){if(!n||n.length===0)return{axis:{},axisIds:[]};const t={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){t[o]=w3(x3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");t[o]=w3(x3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:t,axisIds:r}}const ep=({params:n,store:e})=>{const{zAxis:t,dataset:r}=n,i=N.useRef(!0);return N.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:Tk(t,r)}))},[t,r,e]),{}};ep.params={zAxis:!0,dataset:!0};ep.getInitialState=n=>({zAxis:Tk(n.zAxis,n.dataset)});const Wre=n=>n,Yre=We([Wre],n=>n.zAxis),ou=({store:n,params:e})=>{PP({controlled:e.highlightedItem}),Wn(()=>{n.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[n,e.highlightedItem]);const t=Ue(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),n.update(a=>H({},a,{highlight:{item:null}}))}),r=Ue(i=>{var s;const a=n.getSnapshot().highlight.item;mk(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),n.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:t,setHighlight:r}}};ou.getDefaultizedParams=({params:n})=>H({},n,{highlightedItem:n.highlightedItem??null});ou.getInitialState=n=>({highlight:{item:n.highlightedItem}});ou.params={highlightedItem:!0,onHighlightChange:!0};function Ck(n){let e=1/0,t=-1/0;for(const r of n??[])r<e&&(e=r),r>t&&(t=r);return[e,t]}const _3=(n,e)=>e==="x"?{x:n,y:null}:{x:null,y:n},Ik=n=>{var s;const{axis:e,getFilters:t,isDefaultAxis:r}=n,i=t==null?void 0:t({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return Ck(a??[])},Dk=n=>e=>{const{series:t,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(t).filter(s=>{const o=n==="x"?t[s].xAxisId:t[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=t[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,y,x)=>d&&(!d(_3(y[0],n),x)||!d(_3(y[1],n),x))?g:[Math.min(...y,g[0]),Math.max(...y,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},qre=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?Dk("x")(n):Ik(n),Xre=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?Ik(n):Dk("y")(n);function Sr(n){return function(){return n}}const b3=Math.abs,ai=Math.atan2,Ec=Math.cos,Kre=Math.max,l2=Math.min,hs=Math.sin,wd=Math.sqrt,ki=1e-12,E0=Math.PI,o1=E0/2,hm=2*E0;function Qre(n){return n>1?0:n<-1?E0:Math.acos(n)}function A3(n){return n>=1?o1:n<=-1?-o1:Math.asin(n)}const Iw=Math.PI,Dw=2*Iw,Ic=1e-6,Zre=Dw-Ic;function Rk(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function Jre(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Rk;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let eie=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Rk:Jre(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-t,f=s-e,p=o-t,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Ic)if(!(Math.abs(p*c-d*f)>Ic)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,x=i-o,b=c*c+d*d,A=y*y+x*x,S=Math.sqrt(b),T=Math.sqrt(g),I=a*Math.tan((Iw-Math.acos((b+g-A)/(2*S*T)))/2),R=I/T,P=I/S;Math.abs(R-1)>Ic&&this._append`L${e+R*f},${t+R*p}`,this._append`A${a},${a},0,0,${+(p*y>f*x)},${this._x1=e+P*c},${this._y1=t+P*d}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=t+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ic||Math.abs(this._y1-f)>Ic)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%Dw+Dw),g>Zre?this._append`A${r},${r},0,1,${p},${e-o},${t-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Ic&&this._append`A${r},${r},0,${+(g>=Iw)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function tie(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new eie(e)}function nie(n){return n.innerRadius}function rie(n){return n.outerRadius}function iie(n){return n.startAngle}function aie(n){return n.endAngle}function sie(n){return n&&n.padAngle}function oie(n,e,t,r,i,a,s,o){var c=t-n,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<ki))return g=(f*(e-a)-p*(n-i))/g,[n+g*c,e+g*d]}function qg(n,e,t,r,i,a,s){var o=n-t,c=e-r,d=(s?a:-a)/wd(o*o+c*c),f=d*c,p=-d*o,g=n+f,y=e+p,x=t+f,b=r+p,A=(g+x)/2,S=(y+b)/2,T=x-g,I=b-y,R=T*T+I*I,P=i-a,B=g*b-x*y,O=(I<0?-1:1)*wd(Kre(0,P*P*R-B*B)),C=(B*I-T*O)/R,D=(-B*T-I*O)/R,V=(B*I+T*O)/R,L=(-B*T+I*O)/R,M=C-A,F=D-S,q=V-A,X=L-S;return M*M+F*F>q*q+X*X&&(C=V,D=L),{cx:C,cy:D,x01:-f,y01:-p,x11:C*(i/P-1),y11:D*(i/P-1)}}function Ok(){var n=nie,e=rie,t=Sr(0),r=null,i=iie,a=aie,s=sie,o=null,c=tie(d);function d(){var f,p,g=+n.apply(this,arguments),y=+e.apply(this,arguments),x=i.apply(this,arguments)-o1,b=a.apply(this,arguments)-o1,A=b3(b-x),S=b>x;if(o||(o=f=c()),y<g&&(p=y,y=g,g=p),!(y>ki))o.moveTo(0,0);else if(A>hm-ki)o.moveTo(y*Ec(x),y*hs(x)),o.arc(0,0,y,x,b,!S),g>ki&&(o.moveTo(g*Ec(b),g*hs(b)),o.arc(0,0,g,b,x,S));else{var T=x,I=b,R=x,P=b,B=A,O=A,C=s.apply(this,arguments)/2,D=C>ki&&(r?+r.apply(this,arguments):wd(g*g+y*y)),V=l2(b3(y-g)/2,+t.apply(this,arguments)),L=V,M=V,F,q;if(D>ki){var X=A3(D/g*hs(C)),W=A3(D/y*hs(C));(B-=X*2)>ki?(X*=S?1:-1,R+=X,P-=X):(B=0,R=P=(x+b)/2),(O-=W*2)>ki?(W*=S?1:-1,T+=W,I-=W):(O=0,T=I=(x+b)/2)}var G=y*Ec(T),Q=y*hs(T),Z=g*Ec(P),de=g*hs(P);if(V>ki){var ge=y*Ec(I),xe=y*hs(I),be=g*Ec(R),ke=g*hs(R),he;if(A<E0)if(he=oie(G,Q,be,ke,ge,xe,Z,de)){var Se=G-he[0],Ae=Q-he[1],Fe=ge-he[0],re=xe-he[1],ye=1/hs(Qre((Se*Fe+Ae*re)/(wd(Se*Se+Ae*Ae)*wd(Fe*Fe+re*re)))/2),pe=wd(he[0]*he[0]+he[1]*he[1]);L=l2(V,(g-pe)/(ye-1)),M=l2(V,(y-pe)/(ye+1))}else L=M=0}O>ki?M>ki?(F=qg(be,ke,G,Q,y,M,S),q=qg(ge,xe,Z,de,y,M,S),o.moveTo(F.cx+F.x01,F.cy+F.y01),M<V?o.arc(F.cx,F.cy,M,ai(F.y01,F.x01),ai(q.y01,q.x01),!S):(o.arc(F.cx,F.cy,M,ai(F.y01,F.x01),ai(F.y11,F.x11),!S),o.arc(0,0,y,ai(F.cy+F.y11,F.cx+F.x11),ai(q.cy+q.y11,q.cx+q.x11),!S),o.arc(q.cx,q.cy,M,ai(q.y11,q.x11),ai(q.y01,q.x01),!S))):(o.moveTo(G,Q),o.arc(0,0,y,T,I,!S)):o.moveTo(G,Q),!(g>ki)||!(B>ki)?o.lineTo(Z,de):L>ki?(F=qg(Z,de,ge,xe,g,-L,S),q=qg(G,Q,be,ke,g,-L,S),o.lineTo(F.cx+F.x01,F.cy+F.y01),L<V?o.arc(F.cx,F.cy,L,ai(F.y01,F.x01),ai(q.y01,q.x01),!S):(o.arc(F.cx,F.cy,L,ai(F.y01,F.x01),ai(F.y11,F.x11),!S),o.arc(0,0,g,ai(F.cy+F.y11,F.cx+F.x11),ai(q.cy+q.y11,q.cx+q.x11),S),o.arc(q.cx,q.cy,L,ai(q.y11,q.x11),ai(q.y01,q.x01),!S))):o.arc(0,0,g,P,R,S)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-E0/2;return[Ec(p)*f,hs(p)*f]},d.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Sr(+f),d):n},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),d):e},d.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Sr(+f),d):t},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Sr(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Sr(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Sr(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Sr(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function Mk(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function lie(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function cie(n){return n}function uie(){var n=cie,e=lie,t=null,r=Sr(0),i=Sr(hm),a=Sr(0);function s(o){var c,d=(o=Mk(o)).length,f,p,g=0,y=new Array(d),x=new Array(d),b=+r.apply(this,arguments),A=Math.min(hm,Math.max(-hm,i.apply(this,arguments)-b)),S,T=Math.min(Math.abs(A)/d,a.apply(this,arguments)),I=T*(A<0?-1:1),R;for(c=0;c<d;++c)(R=x[y[c]=c]=+n(o[c],c,o))>0&&(g+=R);for(e!=null?y.sort(function(P,B){return e(x[P],x[B])}):t!=null&&y.sort(function(P,B){return t(o[P],o[B])}),c=0,p=g?(A-d*I)/g:0;c<d;++c,b=S)f=y[c],R=x[f],S=b+(R>0?R*p:0)+I,x[f]={data:o[f],index:c,value:R,startAngle:b,endAngle:S,padAngle:T};return x}return s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Sr(+o),s):n},s.sortValues=function(o){return arguments.length?(e=o,t=null,s):e},s.sort=function(o){return arguments.length?(t=o,e=null,s):t},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Sr(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Sr(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Sr(+o),s):a},s}function Jd(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ef(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function die(n,e){return n[e]}function fie(n){const e=[];return e.key=n,e}function Pk(){var n=Sr([]),e=ef,t=Jd,r=die;function i(a){var s=Array.from(n.apply(this,arguments),fie),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=Mk(e(s));o<c;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Sr(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Sr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?ef:typeof a=="function"?a:Sr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Jd,i):t},i}function hie(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}Jd(n,e)}}function pie(n,e){if((c=n.length)>0)for(var t,r=0,i,a,s,o,c,d=n[e[0]].length;r<d;++r)for(s=o=0,t=0;t<c;++t)(a=(i=n[e[t]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function gie(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}Jd(n,e)}}function mie(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=n[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,y=(p-g)/2,x=0;x<o;++x){var b=n[e[x]],A=b[r][1]||0,S=b[r-1][1]||0;y+=A-S}c+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=t,c&&(t-=d/c)}i[r-1][1]+=i[r-1][0]=t,Jd(n,e)}}function kk(n){var e=n.map(yie);return ef(n).sort(function(t,r){return e[t]-e[r]})}function yie(n){for(var e=-1,t=0,r=n.length,i,a=-1/0;++e<r;)(i=+n[e][1])>a&&(a=i,t=e);return t}function Nk(n){var e=n.map(Lk);return ef(n).sort(function(t,r){return e[t]-e[r]})}function Lk(n){for(var e=0,t=-1,r=n.length,i;++t<r;)(i=+n[t][1])&&(e+=i);return e}function vie(n){return Nk(n).reverse()}function xie(n){var e=n.length,t,r,i=n.map(Lk),a=kk(n),s=0,o=0,c=[],d=[];for(t=0;t<e;++t)r=a[t],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function wie(n){return ef(n).reverse()}const c2={appearance:kk,ascending:Nk,descending:vie,insideOut:xie,none:ef,reverse:wie},u2={expand:hie,diverging:pie,none:Jd,silhouette:gie,wiggle:mie},Bk=n=>{const{series:e,seriesOrder:t,defaultStrategy:r}=n,i=[],a={};return t.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:c2.none,stackingOffset:u2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:c2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:u2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=c2[c]),d!==void 0&&(i[a[o]].stackingOffset=u2[d]))}),i},_ie=n=>n==null?"":n.toLocaleString(),bie=(n,e)=>{const{seriesOrder:t,series:r}=n,i=Bk(n),a=e??[];t.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=Pk().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(f).offset(d)(a);c.forEach((g,y)=>{const x=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??_ie},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:s}};function Xi(n,e){return typeof n=="function"?n(e):n}const Aie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Xi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},Fk=(n,e,t)=>{const r=n.layout==="vertical",i=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,a=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:t==null?void 0:t.data;return a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c);return d===null?n.color:d}:i&&s?o=>{if(o===void 0)return n.color;const c=s[o],d=c===null?n.color:i(c);return d===null?n.color:d}:()=>n.color},Eie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Xi(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Sie=n=>Object.values(n).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),Tie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Cie={seriesProcessor:bie,colorProcessor:Fk,legendGetter:Aie,tooltipGetter:Eie,axisTooltipGetter:Sie,xExtremumGetter:qre,yExtremumGetter:Xre,getSeriesWithDefaultValues:Tie},Iie=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},Die=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},Rie=({series:n,seriesOrder:e},t)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(t==null?void 0:t.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),Oie=(n,e,t,r)=>{const i=r==null?void 0:r.colorScale,a=t==null?void 0:t.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return n.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=n.data[o],d=c===null?n.color:i(c.z);return d===null?n.color:d}:a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c.y);return d===null?n.color:d}:s?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:s(c.x);return d===null?n.color:d}:()=>n.color},Mie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Xi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},Pie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Xi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},kie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Nie={seriesProcessor:Rie,colorProcessor:Oie,legendGetter:Mie,tooltipGetter:Pie,xExtremumGetter:Iie,yExtremumGetter:Die,getSeriesWithDefaultValues:kie},Lie=n=>{const{axis:e}=n;return Ck(e.data??[])};function Bie(n,e,t,r){return t.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=n(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const Fie=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===t.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&t.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],y=Bie(g,d,c,p),[x,b]=y;return[Math.min(x,a[0]),Math.max(b,a[1])]},[1/0,-1/0])};function Vie(n,e){const t={};return Object.keys(n).forEach(r=>{t[r]=H({},n[r],{valueFormatter:n[r].valueFormatter??e})}),t}const jie=(n,e)=>{const{seriesOrder:t,series:r}=n,i=Bk(H({},n,{defaultStrategy:{stackOffset:"none"}})),a=e??[];t.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=Pk().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(d).offset(f)(a);c.forEach((g,y)=>{const x=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:Vie(s,o=>o==null?"":o.toLocaleString())}},Uie=(n,e,t)=>{const r=t==null?void 0:t.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],o=s===null?n.color:r(s);return o===null?n.color:o}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?n.color:i(s);return o===null?n.color:o}:()=>n.color},Hie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=Xi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},zie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Xi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},$ie=n=>Object.values(n).map(e=>({direction:"x",axisId:e.xAxisId})),Gie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Wie={colorProcessor:Uie,seriesProcessor:jie,legendGetter:Hie,tooltipGetter:zie,axisTooltipGetter:$ie,xExtremumGetter:Lie,yExtremumGetter:Fie,getSeriesWithDefaultValues:Gie},Yie=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(e,t)=>t-e;case"asc":return(e,t)=>e-t;default:return null}},qie=n=>{const{seriesOrder:e,series:t}=n,r={};return e.forEach(i=>{const a=uie().startAngle(2*Math.PI*(t[i].startAngle??0)/360).endAngle(2*Math.PI*(t[i].endAngle??360)/360).padAngle(2*Math.PI*(t[i].paddingAngle??0)/360).sortValues(Yie(t[i].sortingValues??"none"))(t[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},t[i],{data:t[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=t[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:Xi(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},Xie=n=>e=>n.data[e].color,Kie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>(t[i].data.forEach((a,s)=>{const o=Xi(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??t[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},Qie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=Xi(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},Zie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`},n,{data:n.data.map((r,i)=>H({color:t[i%t.length]},r))}),Jie={colorProcessor:Xie,seriesProcessor:qie,legendGetter:Kie,tooltipGetter:Qie,getSeriesWithDefaultValues:Zie},eae={bar:Cie,scatter:Nie,line:Wie,pie:Jie},tae=[ep,gf,pf,ou];function nae(n){const{children:e,plugins:t=tae,pluginParams:r={},seriesConfig:i=eae}=n,{contextValue:a}=Lee(t,r,i);return v.jsx(MP.Provider,{value:a,children:e})}const Ul=()=>{const n=N.useContext(MP);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function bn(){const n=Ul();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function Aa(){const n=bn();return ft(n,Ro)}function Jb(){const n=bn();return ft(n,xee)}function eA(n){return ck.getTypes().has(n)}const rae=(n,e,t,r,i,a,s)=>{var y;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((y=s[e])==null?void 0:y.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:t,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=n;return[Math.min(d,p),Math.max(f,g)]},iae=(n,e,t,r,i)=>{const s=Object.keys(t).filter(eA).reduce((o,c)=>rae(o,c,n,e,t,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},_d=(n,e)=>n===void 0?e:Math.PI*n/180,aae=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(eA).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i};function sae(n,e,t){if(e==="rotation"){if(t.scaleType==="point"){const r=[_d(t.startAngle,0),_d(t.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/t.data.length),r}return[_d(t.startAngle,0),_d(t.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const oae=.2,lae=.1;function Vk({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i}){if(t===void 0)return{axis:{},axisIds:[]};const a=aae(i,r,e,t[0].id),s={};return t.forEach((o,c)=>{const d=o,f=sae(n,i,d),[p,g]=iae(d,i,r,c,e),y=!d.ignoreTooltip&&a.has(d.id),x=d.data??[];if(r1(d)){const D=d.categoryGapRatio??oae,V=d.barGapRatio??lae;if(s[d.id]=H({offset:0,categoryGapRatio:D,barGapRatio:V,triggerTooltip:y},d,{data:x,scale:sy(d.data,f).paddingInner(D).paddingOuter(D/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Qd(H({values:d.data},d.colorMap)):Hc(d.colorMap))}),a1(d.data)){const L=s1(d,f);s[d.id].valueFormatter=d.valueFormatter??L}}if(qb(d)&&(s[d.id]=H({offset:0,triggerTooltip:y},d,{data:x,scale:jP(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Qd(H({values:d.data},d.colorMap)):Hc(d.colorMap))}),a1(d.data))){const D=s1(d,f);s[d.id].valueFormatter=d.valueFormatter??D}if(d.scaleType==="band"||d.scaleType==="point")return;const b=d.scaleType??"linear",A=d.domainLimit??"nice",S=[d.min??p,d.max??g];if(typeof A=="function"){const{min:D,max:V}=A(p,g);S[0]=D,S[1]=V}const T=ok(H({},d,{range:f,domain:S})),I=lk(T,f),R=i1(b,S,f),P=A==="nice"?R.nice(T):R,[B,O]=P.domain(),C=[d.min??B,d.max??O];s[d.id]=H({offset:0,triggerTooltip:y},d,{data:x,scaleType:b,scale:P.domain(C),tickNumber:I,colorScale:d.colorMap&&Hc(d.colorMap)})}),{axis:s,axisIds:t.map(({id:o})=>o)}}const jk=n=>n.polarAxis,Uk=We([jk],n=>n==null?void 0:n.rotation),cae=We([jk],n=>n==null?void 0:n.radius),lu=We([Uk,Ro,Ka,Oo],(n,e,t,r)=>Vk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"rotation"})),uae=We([cae,Ro,Ka,Oo],(n,e,t,r)=>Vk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"radius"})),dae=We([Ro],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),fae=n=>(e,t)=>Math.atan2(e-n.cx,n.cy-t);function my(n){return(n%360+360)%360}const d2=2*Math.PI;function hae(n){return(n%d2+d2)%d2}function E3(n,e){const{scale:t,data:r,reverse:i}=n;if(!Qa(t))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=hae(e-Math.min(...t.range())),s=t.bandwidth()===0?Math.floor((a+t.step()/2)/t.step())%r.length:Math.floor(a/t.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function Po(){const n=bn(),{axis:e,axisIds:t}=ft(n,Ki);return{xAxis:e,xAxisIds:t}}function Hl(){const n=bn(),{axis:e,axisIds:t}=ft(n,Qi);return{yAxis:e,yAxisIds:t}}function pae(n){const e=bn(),{axis:t,axisIds:r}=ft(e,Ki),i=r[0];return t[i]}function gae(n){const e=bn(),{axis:t,axisIds:r}=ft(e,Qi),i=r[0];return t[i]}function Hk(){const n=bn(),{axis:e,axisIds:t}=ft(n,lu);return{rotationAxis:e,rotationAxisIds:t}}function mae(){const n=bn(),{axis:e,axisIds:t}=ft(n,uae);return{radiusAxis:e,radiusAxisIds:t}}function yae(n){const e=bn(),{axis:t,axisIds:r}=ft(e,lu),i=r[0];return t[i]}function l1(n){return Qa(n)?e=>(n(e)??0)+n.bandwidth()/2:e=>n(e)}function tA(){const n=bn(),{axis:e,axisIds:t}=ft(n,Yre)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:t}}function nA(){const n=Ul();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function yy(){const n=bn();return ft(n,Ka)}function vae(n,e){if(n===e)return!0;if(!Array.isArray(n)||!Array.isArray(e))return!1;let t=n.length;if(t!==e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function zk(n){const e=We([Ka,(t,r)=>r],(t,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=t[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=t[n])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=t[n])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=t[n])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return t=>{const r=bn();return ft(r,e,[t],vae)}}function $k(n){const e=We([Ka],t=>t[n]);return()=>{const t=bn();return ft(t,e)}}zk("pie");const xae=$k("pie");function wae(){return xae()}zk("bar");const _ae=$k("bar");function bae(){return _ae()}function Aae(){return!1}function Gk(n,e){return!n||!e?Aae:function(r){return r?n.highlight==="series"?r.seriesId===e.seriesId:n.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function Eae(){return!1}function Wk(n,e){return!n||!e?Eae:function(r){return r?n.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:n.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const Sae=n=>n.highlight,Tae=n=>n.series,Cae=We([Tae],n=>{const e=new Map;return Object.keys(n.processedSeries).forEach(t=>{var i;const r=n.processedSeries[t];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),tp=We([Sae],function(e){return e.item}),vy=We([Cae,tp],function(e,t){if(!t)return null;const r=e.get(t.seriesId);return r===void 0?null:r}),Iae=We([vy,tp],Gk),Dae=We([vy,tp],Wk),Rae=We([vy,tp,(n,e)=>e],function(e,t,r){return Gk(e,t)(r)}),Oae=We([vy,tp,(n,e)=>e],function(e,t,r){return Wk(e,t)(r)});function Yk(n){const e=bn(),t=ft(e,Rae,[n]),r=ft(e,Oae,[n]);return{isHighlighted:t,isFaded:!t&&r}}function Mae(){const n=bn(),e=ft(n,Iae),t=ft(n,Dae);return{isHighlighted:e,isFaded:t}}function Pae(n,e){return Object.keys(n).flatMap(t=>{const r=e[t].legendGetter;return r===void 0?[]:r(n[t])})}function kae(){const n=yy(),e=bn(),t=ft(e,Oo);return{items:Pae(n,t)}}function Nae(){const n=Jb();return N.useCallback(e=>`${n}-gradient-${e}`,[n])}function Lae(){const n=Jb();return N.useCallback(e=>`${n}-gradient-${e}-object-bound`,[n])}var f2,S3;function Bae(){if(S3)return f2;S3=1;var n=4,e=.001,t=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(b,A){return 1-3*A+3*b}function c(b,A){return 3*A-6*b}function d(b){return 3*b}function f(b,A,S){return((o(A,S)*b+c(A,S))*b+d(A))*b}function p(b,A,S){return 3*o(A,S)*b*b+2*c(A,S)*b+d(A)}function g(b,A,S,T,I){var R,P,B=0;do P=A+(S-A)/2,R=f(P,T,I)-b,R>0?S=P:A=P;while(Math.abs(R)>t&&++B<r);return P}function y(b,A,S,T){for(var I=0;I<n;++I){var R=p(A,S,T);if(R===0)return A;var P=f(A,S,T)-b;A-=P/R}return A}function x(b){return b}return f2=function(A,S,T,I){if(!(0<=A&&A<=1&&0<=T&&T<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===S&&T===I)return x;for(var R=s?new Float32Array(i):new Array(i),P=0;P<i;++P)R[P]=f(P*a,A,T);function B(O){for(var C=0,D=1,V=i-1;D!==V&&R[D]<=O;++D)C+=a;--D;var L=(O-R[D])/(R[D+1]-R[D]),M=C+L*a,F=p(M,A,T);return F>=e?y(O,M,A,T):F===0?M:g(O,C,C+a,A,T)}return function(C){return C===0?0:C===1?1:f(B(C),S,I)}},f2}var Fae=Bae();const Vae=WN(Fae),rA=300,qk="cubic-bezier(0.66, 0, 0.34, 1)",jae=Vae(.66,0,.34,1);var tf=0,Wh=0,Dh=0,Xk=1e3,c1,Yh,u1=0,Kc=0,xy=0,S0=typeof performance=="object"&&performance.now?performance:Date,Kk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function iA(){return Kc||(Kk(Uae),Kc=S0.now()+xy)}function Uae(){Kc=0}function d1(){this._call=this._time=this._next=null}d1.prototype=Qk.prototype={constructor:d1,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?iA():+t)+(e==null?0:+e),!this._next&&Yh!==this&&(Yh?Yh._next=this:c1=this,Yh=this),this._call=n,this._time=t,Ow()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ow())}};function Qk(n,e,t){var r=new d1;return r.restart(n,e,t),r}function Rw(){iA(),++tf;for(var n=c1,e;n;)(e=Kc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--tf}function T3(){Kc=(u1=S0.now())+xy,tf=Wh=0;try{Rw()}finally{tf=0,zae(),Kc=0}}function Hae(){var n=S0.now(),e=n-u1;e>Xk&&(xy-=e,u1=n)}function zae(){for(var n,e=c1,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:c1=t);Yh=n,Ow(r)}function Ow(n){if(!tf){Wh&&(Wh=clearTimeout(Wh));var e=n-Kc;e>24?(n<1/0&&(Wh=setTimeout(T3,n-S0.now()-xy)),Dh&&(Dh=clearInterval(Dh))):(Dh||(u1=S0.now(),Dh=setInterval(Hae,Xk)),tf=1,Kk(T3))}}function $ae(n,e,t){var r=new d1;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}class Gae{constructor(e,t,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=t,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const t=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(t);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=iA()-this.elapsed;return this.timer=Qk(t=>this.timerCallback(t),0,e),Rw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),$ae(()=>this.timerCallback(this.duration)),Rw(),this}}function Wae(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1){const a=t[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(n[a],e[a]))return!1}return!0}function Yae(n,{createInterpolator:e,applyProps:t,skip:r,initialProps:i=n}){const a=N.useRef(i),s=N.useRef(null),o=N.useRef(null),c=N.useRef(n);Wn(()=>{c.current=n},[n]),Wn(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=n)},[n,r]);const d=N.useCallback(p=>{const g=a.current,y=e(g,n);s.current=new Gae(rA,jae,x=>{const b=y(x);a.current=b,t(p,b)})},[t,e,n]);return N.useCallback(p=>{var y,x,b,A;if(p===null){(y=s.current)==null||y.stop();return}const g=o.current;if(g===p){if(Wae(c.current,n)){(x=s.current)==null||x.resume();return}(b=s.current)==null||b.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,n,r])}function np(n,{createInterpolator:e,transformProps:t,applyProps:r,skip:i,initialProps:a=n,ref:s}){const o=t??(f=>f),c=Yae(n,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},t(i?n:a),{ref:ei(c,s)})}function qae(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function Xae(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return np({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:qae,applyProps(t,r){t.setAttribute("x",r.x.toString()),t.setAttribute("y",r.y.toString()),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString())},transformProps:t=>t,initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Kae(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function Qae(n){const e={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},t={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return np(t,{createInterpolator:Kae,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Zae(n,e){const t=Qt(n.startAngle,e.startAngle),r=Qt(n.endAngle,e.endAngle),i=Qt(n.innerRadius,e.innerRadius),a=Qt(n.outerRadius,e.outerRadius),s=Qt(n.paddingAngle,e.paddingAngle),o=Qt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function Jae(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return np({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:Zae,transformProps:t=>({d:Ok().cornerRadius(t.cornerRadius)({padAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}),visibility:t.startAngle===t.endAngle?"hidden":"visible"}),applyProps(t,r){t.setAttribute("d",r.d),t.setAttribute("visibility",r.visibility)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function ese(n,e){const t=Qt(n.startAngle,e.startAngle),r=Qt(n.endAngle,e.endAngle),i=Qt(n.innerRadius,e.innerRadius),a=Qt(n.outerRadius,e.outerRadius),s=Qt(n.paddingAngle,e.paddingAngle),o=Qt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function tse(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return np({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:ese,transformProps:t=>{const[r,i]=Ok().cornerRadius(t.cornerRadius).centroid({padAngle:t.paddingAngle,startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius});return{x:r,y:i}},applyProps(t,{x:r,y:i}){t.setAttribute("x",r.toString()),t.setAttribute("y",i.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function nse(){return Ul().chartRootRef}const rse={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},ise=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),Zk={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${rse[n]??n}`},ase=Zk;ise(Zk);const sse=["localeText"],Mw=N.createContext(null);function ose(n){const{localeText:e}=n,t=Be(n,sse),{localeText:r}=N.useContext(Mw)??{localeText:void 0},i=xt({props:t,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=N.useMemo(()=>H({},ase,s,r,e),[s,r,e]),c=N.useMemo(()=>({localeText:o}),[o]);return v.jsx(Mw.Provider,{value:c,children:a})}const Jk=()=>{const n=N.useContext(Mw);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function lse(n){const{id:e,offset:t}=n,{left:r,top:i,width:a,height:s}=Aa(),o=H({top:0,right:0,bottom:0,left:0},t);return v.jsx("clipPath",{id:e,children:v.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function cse(){return typeof window>"u"}const Xg=new Map,use=2e3,dse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fse=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],C3="mui_measurement_span";function e6(n,e){return fse.indexOf(n)>=0&&e===+e?`${e}px`:e}function t6(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const hse=n=>Object.keys(n).sort().reduce((e,t)=>`${e}${t6(t)}:${e6(t,n[t])};`,"");let h2;const rp=(n,e={})=>{if(n==null||cse())return{width:0,height:0};const t=`${n}`,r=hse(e),i=`${t}-${r}`,a=Xg.get(i);if(a)return a;try{let s=document.getElementById(C3);s===null&&(s=document.createElement("span"),s.setAttribute("id",C3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},dse,e);Object.keys(o).map(f=>(s.style[t6(f)]=e6(f,o[f]),f)),s.textContent=t;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return Xg.set(i,d),Xg.size+1>use&&Xg.clear(),h2&&clearTimeout(h2),h2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function n6({style:n,needsComputation:e,text:t}){return t.split(`
`).map(r=>H({text:r},e?rp(r,n):{width:0,height:0}))}function aA(){const[n,e]=N.useState(typeof window<"u"||!1);return N.useEffect(()=>{e(!0)},[]),n}const pse=["x","y","style","text","ownerState"],gse=["angle","textAnchor","dominantBaseline"];function f1(n){const{x:e,y:t,style:r,text:i}=n,a=Be(n,pse),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=Be(s,gse),p=aA(),g=N.useMemo(()=>n6({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let y;switch(d){case"hanging":case"text-before-edge":y=0;break;case"central":y=(g.length-1)/2*-g[0].height;break;default:y=(g.length-1)*-g[0].height;break}return v.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${t})`:void 0,x:e,y:t,textAnchor:c,dominantBaseline:d,style:f,children:g.map((x,b)=>v.jsx("tspan",{x:e,dy:`${b===0?y:g[0].height}px`,dominantBaseline:d,children:x.text},b))}))}function sA(n){return typeof n=="number"&&!Number.isFinite(n)}const p2={start:0,extremities:0,end:1,middle:.5};function mse(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=n;if(Qa(e)){const g=e.domain(),y=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const S=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:S}))??S,offset:e(A)-(e.step()-e.bandwidth())/2+p2[a]*e.step(),labelOffset:y==="tick"?0:e.step()*(p2[y]-p2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(b=>{const A=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:A}))??A,offset:e(b),labelOffset:0}})}if(e.domain().some(sA))return[];const d=s,f=typeof i=="object"?i:e.ticks(t),p=[];for(let g=0;g<f.length;g+=1){const y=f[g],x=e(y);if(o(x)){const b=e.tickFormat(t)(y);p.push({value:y,formattedValue:(r==null?void 0:r(y,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:b}))??b,offset:x,labelOffset:d==="middle"?e(f[g-1]??0)-(x+e(f[g-1]??0))/2:0})}}return p}function wy(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=n,{instance:c}=Ul(),d=o==="x"?c.isXInside:c.isYInside;return N.useMemo(()=>mse({scale:e,tickNumber:t,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,t,a,i,s,r,d])}function yse(n=!1){const[e,t]=N.useState(!1);return Wn(()=>{n||t(!0)},[n]),N.useEffect(()=>{n&&t(!0)},[n]),e}const r6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function vse(n){return n.length}function xse(n){const e=r6.segment(n);let t=0;for(const r of e)t+=1;return t}const wse=r6?xse:vse;function _se(n){return n*(Math.PI/180)}const i6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function bse(n,e){return n.slice(0,e)}function Ase(n,e){const t=i6.segment(n);let r="",i=0;for(const a of t)if(r+=a.segment,i+=1,i>=e)break;return r}const Ese=i6?Ase:bse,I3="";function a6(n,e){const{width:t,height:r,measureText:i}=e,a=_se(e.angle),s=i(n),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=t&&c<=r}function s6(n,e){if(e(n))return n;let t=n,r=1,i=1/2;const a=wse(n);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;t=Ese(n,s).trim();const d=e(t+I3);r+=1,d?(c=t,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+I3:""}function Sse(n,e,t,r,i){const a=new Map,s=my((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>a6(g,{width:f,height:t,angle:s,measureText:y=>rp(y,i)});a.set(d,s6(d.formattedValue.toString(),p))}return a}const D3=5;function Tse(n,e,t=0){const r=Math.min(Math.abs(t)%180,Math.abs(Math.abs(t)%180-180)%180);if(r<D3)return n;if(r>90-D3)return e;const i=_d(r),a=Math.atan2(e,n);return i<a?n/Math.cos(i):e/Math.sin(i)}function Cse(n,{tickLabelStyle:e,tickLabelInterval:t,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=n6({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof t=="function")return new Set(n.filter((f,p)=>t(f.value,p)));let c=0;const d=i?-1:1;return new Set(n.filter((f,p)=>{const{offset:g,labelOffset:y}=f,x=g+y;if(p>0&&d*x<d*(c+r)||!s(x))return!1;const{width:b,height:A}=o(f),S=Tse(b,A,e==null?void 0:e.angle),T=x-d*S/2;return p>0&&d*T<d*(c+r)?!1:(c=x+d*S/2,!0)}))}function o6(n){return Rt("MuiChartsAxis",n)}const Kg=Ot("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),l6=Pe("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${Kg.tickLabel}`]:H({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${Kg.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${Kg.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Kg.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),Ise=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionX",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return vt(i,o6,e)},Pw=3,Dse=4,c6=Pe(l6,{name:"MuiChartsXAxis",slot:"Root"})({}),Rse={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function u6(n){const e=my(n);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function d6(n){const e=my(n);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function f6(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const Ose=["scale","tickNumber","reverse"],h6=n=>{const{xAxis:e,xAxisIds:t}=Po(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a,reverse:s}=r,o=Be(r,Ose),c=xt({props:H({},o,n),name:"MuiChartsXAxis"}),d=H({},Rse,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:y,slotProps:x}=d,b=Qc(),A=_a(),S=Ise(d),T=f==="bottom"?1:-1,I=(y==null?void 0:y.axisLine)??"line",R=(y==null?void 0:y.axisTick)??"line",P=(y==null?void 0:y.axisTickLabel)??f1,B=(y==null?void 0:y.axisLabel)??f1,O=u6((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),C=d6((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),D=St({elementType:P,externalSlotProps:x==null?void 0:x.axisTickLabel,additionalProps:{style:H({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?f6(O):O,dominantBaseline:C},p)},className:S.tickLabel,ownerState:{}}),V=St({elementType:B,externalSlotProps:x==null?void 0:x.axisLabel,additionalProps:{style:H({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),L=i.domain(),M=Qa(i),F=M&&L.length===0||!M&&L.some(sA)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:T,skipAxisRendering:F,classes:S,Line:I,Tick:R,TickLabel:P,Label:B,axisTickLabelProps:D,axisLabelProps:V,reverse:s,isRtl:A}};function Mse(n){const{xScale:e,defaultizedProps:t,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:y,isRtl:x}=h6(n),b=yse(),{position:A,disableLine:S,disableTicks:T,label:I,tickSize:R,valueFormatter:P,slotProps:B,tickInterval:O,tickLabelInterval:C,tickPlacement:D,tickLabelPlacement:V,tickLabelMinGap:L,sx:M,offset:F,height:q}=t,X=Aa(),{left:W,top:G,width:Q,height:Z}=X,{instance:de}=Ul(),ge=aA(),xe=T?4:R,be=wy({scale:e,tickNumber:r,valueFormatter:P,tickInterval:O,tickPlacement:D,tickLabelPlacement:V,direction:"x"}),ke=Cse(be,{tickLabelStyle:p.style,tickLabelInterval:C,tickLabelMinGap:L,reverse:y,isMounted:b,isXInside:de.isXInside});if(a)return null;const he=I?rp(I,g.style).height:0,Se={x:W+Q/2,y:i*q},Ae=Math.max(0,q-(I?he+Dse:0)-xe-Pw),Fe=ge?Sse(ke,X,Ae,x,p.style):new Map(Array.from(ke).map(re=>[re,re.formattedValue]));return v.jsxs(c6,{transform:`translate(0, ${A==="bottom"?G+Z+F:G-F})`,className:s.root,sx:M,children:[!S&&v.jsx(o,H({x1:W,x2:W+Q,className:s.line},B==null?void 0:B.axisLine)),be.map((re,ye)=>{const{offset:pe,labelOffset:te}=re,Ve=te??0,we=i*(xe+Pw),ze=de.isXInside(pe),Me=Fe.get(re),Re=ke.has(re);return v.jsxs("g",{transform:`translate(${pe}, 0)`,className:s.tickContainer,children:[!T&&ze&&v.jsx(c,H({y2:i*xe,className:s.tick},B==null?void 0:B.axisTick)),Me!==void 0&&Re&&v.jsx(d,H({x:Ve,y:we},p,{text:Me}))]},ye)}),I&&v.jsx("g",{className:s.label,children:v.jsx(f,H({},Se,g,{text:I}))})]})}const Rh={start:0,extremities:0,end:1,middle:.5,tick:0};function Pse(n){const{scale:e,tickInterval:t,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return N.useMemo(()=>{const s=e.domain(),o=typeof t=="function"&&s.filter(t)||typeof t=="object"&&t||s;if(e.bandwidth()>0){const c=R3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return R3(o,a,i,r,e)},[e,t,a,i,r])}function R3(n,e,t,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<n.length;d+=1){const f=n[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const x=Qa(i)?i(f)-(i.step()-i.bandwidth())/2+Rh[t]*i.step():i(f),b=i.step()*o*(Rh[r]-Rh[t]);a.push({value:p,formattedValue:`${p}`,offset:x,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:b}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const S of A.values())a[S].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const x=i.step()*o*(Rh[r]-Rh[t]);g.labelOffset=x}}return a}const O3={tickSize:6},kse=(n,e,t)=>{const r=n[e]??{},i=t??O3.tickSize,a=i*e*2+i;return H({},O3,r,{tickSize:r.tickSize??a})};function Nse(n){const{xScale:e,defaultizedProps:t,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=h6(n);if(!Qa(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:y,disableTicks:x,label:b,tickSize:A,valueFormatter:S,slotProps:T,tickInterval:I,tickPlacement:R,tickLabelPlacement:P,sx:B,offset:O,height:C}=t,D=t.groups,V=Aa(),{left:L,top:M,width:F,height:q}=V,{instance:X}=Ul(),W={x:L+F/2,y:r*C},G=Pse({scale:e,tickInterval:I,tickPlacement:R,tickLabelPlacement:P,groups:D});return i?null:v.jsxs(c6,{transform:`translate(0, ${g==="bottom"?M+q+O:M-O})`,className:a.root,sx:B,children:[!y&&v.jsx(s,H({x1:L,x2:L+F,className:a.line},T==null?void 0:T.axisLine)),G.map((Q,Z)=>{const{offset:de,labelOffset:ge}=Q,xe=ge??0,be=X.isXInside(de),ke=Q.formattedValue,he=Q.ignoreTick??!1,Se=Q.groupIndex??0,Ae=kse(D,Se,A),Fe=r*Ae.tickSize,re=r*(Ae.tickSize+Pw);return v.jsxs("g",{transform:`translate(${de}, 0)`,className:a.tickContainer,"data-group-index":Se,children:[!x&&!he&&be&&v.jsx(o,H({y2:Fe,className:a.tick},T==null?void 0:T.axisTick)),ke!==void 0&&v.jsx(c,H({x:xe,y:re},f,{text:ke}))]},Z)}),b&&v.jsx("g",{className:a.label,children:v.jsx(d,H({},W,p,{text:b}))})]})}function Lse(n){const{xAxis:e,xAxisIds:t}=Po(),r=e[n.axisId??t[0]];return"groups"in r&&Array.isArray(r.groups)?v.jsx(Nse,H({},n)):v.jsx(Mse,H({},n))}function Bse(n,e,t,r,i){const a=new Map,s=my((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>a6(g,{width:t,height:f,angle:s,measureText:y=>rp(y,i)});a.set(d,s6(d.formattedValue.toString(),p))}return a}const Fse=["scale","tickNumber"],Vse=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionY",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return vt(i,o6,e)},M3=2,jse=2,Use=Pe(l6,{name:"MuiChartsYAxis",slot:"Root"})({}),Hse={disableLine:!1,disableTicks:!1,tickSize:6};function zse(n){const{yAxisIds:e,yAxis:t}=Hl(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a}=r,s=Be(r,Fse),o=xt({props:H({},s,n),name:"MuiChartsYAxis"}),c=H({},Hse,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:y,tickLabelStyle:x,tickSize:b,valueFormatter:A,slots:S,slotProps:T,tickPlacement:I,tickLabelPlacement:R,tickInterval:P,tickLabelInterval:B,sx:O,offset:C,width:D}=c,V=Qc(),L=_a(),M=aA(),F=Vse(c),{instance:q}=Ul(),X=Aa(),{left:W,top:G,width:Q,height:Z}=X,de=p?4:b,ge=wy({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:I,tickLabelPlacement:R,tickInterval:P,direction:"y"}),xe=d==="right"?1:-1,be=typeof(x==null?void 0:x.fontSize)=="number"?x.fontSize:12,ke=(S==null?void 0:S.axisLine)??"line",he=(S==null?void 0:S.axisTick)??"line",Se=(S==null?void 0:S.axisTickLabel)??f1,Ae=(S==null?void 0:S.axisLabel)??f1,Fe=u6((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),re=d6((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),ye=St({elementType:Se,externalSlotProps:T==null?void 0:T.axisTickLabel,additionalProps:{style:H({},V.typography.caption,{fontSize:be,textAnchor:L?f6(Fe):Fe,dominantBaseline:re},x)},className:F.tickLabel,ownerState:{}}),pe=St({elementType:Ae,externalSlotProps:T==null?void 0:T.axisLabel,additionalProps:{style:H({},V.typography.body1,{lineHeight:1,fontSize:14,angle:xe*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},y)},ownerState:{}}),te=St({elementType:ke,externalSlotProps:T==null?void 0:T.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Ve=i.domain(),we=Qa(i);if(we&&Ve.length===0||!we&&Ve.some(sA)||d==="none")return null;const ze={x:xe*D,y:G+Z/2},Me=Math.max(0,D-(g?rp(g,pe.style).height+jse:0)-de-M3),Re=M?Bse(ge,X,Me,L,ye.style):new Map(Array.from(ge).map(Ye=>[Ye,Ye.formattedValue]));return v.jsxs(Use,{transform:`translate(${d==="right"?W+Q+C:W-C}, 0)`,className:F.root,sx:O,children:[!f&&v.jsx(ke,H({y1:G,y2:G+Z,className:F.line},te)),ge.map((Ye,Ge)=>{const{offset:Oe,labelOffset:Ne,value:dt}=Ye,_t=xe*(de+M3),yn=Ne,On=typeof B=="function"&&!(B!=null&&B(dt,Ge)),nt=q.isYInside(Oe),it=Re.get(Ye);return nt?v.jsxs("g",{transform:`translate(0, ${Oe})`,className:F.tickContainer,children:[!p&&v.jsx(he,H({x2:xe*de,className:F.tick},T==null?void 0:T.axisTick)),it!==void 0&&!On&&v.jsx(Se,H({x:_t,y:yn,text:it},ye))]},Ge):null}),g&&M&&v.jsx("g",{className:F.label,children:v.jsx(Ae,H({},ze,pe,{text:g}))})]})}function $se(n){const{slots:e,slotProps:t}=n,{xAxisIds:r,xAxis:i}=Po(),{yAxisIds:a,yAxis:s}=Hl();return v.jsxs(N.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:v.jsx(Lse,{slots:e,slotProps:t,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:v.jsx(zse,{slots:e,slotProps:t,axisId:o},o))]})}function Gse(n){return Rt("MuiChartsGrid",n)}const P3=Ot("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Wse=Pe("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,e)=>[{[`&.${P3.verticalLine}`]:e.verticalLine},{[`&.${P3.horizontalLine}`]:e.horizontalLine},e.root]})({}),p6=Pe("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Yse(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=wy({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return v.jsx(N.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(p6,{y1:t,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function qse(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=wy({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return v.jsx(N.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(p6,{y1:f,y2:f,x1:t,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const Xse=["vertical","horizontal"],Kse=({classes:n})=>vt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Gse,n);function Qse(n){const e=xt({props:n,name:"MuiChartsGrid"}),t=Aa(),{vertical:r,horizontal:i}=e,a=Be(e,Xse),{xAxis:s,xAxisIds:o}=Po(),{yAxis:c,yAxisIds:d}=Hl(),f=Kse(e),p=c[d[0]],g=s[o[0]];return v.jsxs(Wse,H({},a,{className:f.root,children:[r&&v.jsx(Yse,{axis:g,start:t.top,end:t.height+t.top,classes:f}),i&&v.jsx(qse,{axis:p,start:t.left,end:t.width+t.left,classes:f})]}))}function Zse(n){return Rt("MuiChartsTooltip",n)}const pd=Ot("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),_y=n=>vt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Zse,n);function Jse(){var B,O,C;const n=bn(),e=ft(n,yk),t=ft(n,Oo),r=yy(),{xAxis:i,xAxisIds:a}=Po(),{yAxis:s,yAxisIds:o}=Hl(),{zAxis:c,zAxisIds:d}=tA(),{rotationAxis:f,rotationAxisIds:p}=Hk(),{radiusAxis:g,radiusAxisIds:y}=mae(),x=r.xAxisId??a[0],b=r.yAxisId??o[0],A=r.zAxisId??d[0],S=r.rotationAxisId??p[0],T=r.radiusAxisId??y[0];if(!e)return null;const I=(B=r[e.type])==null?void 0:B.series[e.seriesId];if(!I)return null;const R=((C=(O=t[I.type]).colorProcessor)==null?void 0:C.call(O,I,x&&i[x],b&&s[b],A&&c[A]))??(()=>""),P={};return x!==void 0&&(P.x=i[x]),b!==void 0&&(P.y=s[b]),S!==void 0&&(P.rotation=f[S]),T!==void 0&&(P.radius=g[T]),t[I.type].tooltipGetter({series:I,axesConfig:P,getColor:R,identifier:e})}const kw=Pe("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,e)=>e.paper})(({theme:n})=>{var e;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(e=(n.vars||n).shape)==null?void 0:e.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),Nw=Pe("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${pd.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),Lw=Pe("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),bd=Pe(ne,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${pd.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${pd.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${pd.valueCell}, &.${pd.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${pd.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function eoe(n){return Rt("MuiChartsLabelMark",n)}const id=Ot("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),toe=n=>{const{type:e}=n;return vt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},eoe,n.classes)},g6=(n,e,t)=>N.forwardRef(function(i,a){var g;const s=xt({props:i,name:n}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=J3(o,s),d=Qc(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=N.forwardRef(t);return v.jsx(p,H({},c,{classes:f,ref:a}))}),noe=["type","color","className","classes"],roe=Pe("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${id.line}`]:{width:16,height:"unset",alignItems:"center",[`.${id.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${id.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${id.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${id.mask} > *`]:{height:"100%",width:"100%"},[`& .${id.mask}`]:{height:"100%",width:"100%"}})),h1=g6("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:toe},function(e,t){const{type:r,color:i,className:a,classes:s}=e,o=Be(e,noe),c=r;return v.jsx(roe,H({className:jt(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:t},o,{children:v.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?v.jsx(c,{className:s==null?void 0:s.fill,color:i}):v.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?v.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):v.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function ioe(n){const{classes:e,sx:t}=n,r=Jse(),i=_y(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return v.jsx(kw,{sx:t,className:i.paper,children:v.jsxs(Nw,{className:i.table,children:[v.jsxs(ne,{component:"caption",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(h1,{type:p,color:f,className:i.mark})}),d]}),v.jsx("tbody",{children:r.values.map(({formattedValue:g,label:y})=>v.jsxs(Lw,{className:i.row,children:[v.jsx(bd,{className:jt(i.labelCell,i.cell),component:"th",children:y}),v.jsx(bd,{className:jt(i.valueCell,i.cell),component:"td",children:g})]},y))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return v.jsx(kw,{sx:t,className:i.paper,children:v.jsx(Nw,{className:i.table,children:v.jsx("tbody",{children:v.jsxs(Lw,{className:i.row,children:[v.jsxs(bd,{className:jt(i.labelCell,i.cell),component:"th",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(h1,{type:c,color:a,className:i.mark})}),s]}),v.jsx(bd,{className:jt(i.valueCell,i.cell),component:"td",children:o})]})})})})}function aoe(n){const e=bn(),t=ft(e,Oo);return N.useMemo(()=>{const i={};return Object.keys(t).forEach(a=>{i[a]=t[a].colorProcessor}),i},[t])}function soe(){const n=nA(),[e,t]=N.useState(null);return N.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&t(null)},a=s=>{t({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),e}function ooe(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const loe="@media (pointer: fine)",coe=()=>v1(loe,{defaultMatches:!0}),m6=(n,e)=>e,y6=(n,e)=>e;function v6(n,e,t){return Array.isArray(t)?t.map(r=>E3(e.axis[r],n)):E3(e.axis[t],n)}const x6=We([Z0,J0,dae],(n,e,t)=>n===null||e===null?null:fae(t)(n,e)),uoe=We([x6,lu,m6],(n,e,t=e.axisIds[0])=>n===null?null:v6(n,e,t)),w6=We([x6,lu,y6],(n,e,t=e.axisIds)=>n===null?null:v6(n,e,t));We([lu,uoe,m6],(n,e,t=n.axisIds[0])=>{var i;if(e===null||e===-1||n.axisIds.length===0)return null;const r=(i=n.axis[t])==null?void 0:i.data;return r?r[e]:null});We([lu,w6,y6],(n,e,t=n.axisIds)=>e===null?null:t.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const _6=We([w6,lu],(n,e)=>n===null?[]:e.axisIds.map((t,r)=>({axisId:t,dataIndex:n[r]})).filter(({axisId:t,dataIndex:r})=>e.axis[t].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:kd}});We([],()=>[]);const doe=We([_6],n=>n.length>0);function g2(n,e,t){var s;const r=((s=n.data)==null?void 0:s[e])??null,a=(n.valueFormatter??(o=>n.scaleType==="utc"?ooe(o):o.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:t,axisId:n.id,mainAxis:n,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function foe(n={}){const{multipleAxes:e,directions:t}=n,r=pae(),i=gae(),a=yae(),s=bn(),o=ft(s,_k),c=ft(s,bk),d=ft(s,_6),f=yy(),{xAxis:p}=Po(),{yAxis:g}=Hl(),{zAxis:y,zAxisIds:x}=tA(),{rotationAxis:b}=Hk(),A=aoe();if(o.length===0&&c.length===0&&d.length===0)return null;const S=[];return(t===void 0||t.includes("x"))&&o.forEach(({axisId:T,dataIndex:I})=>{!e&&S.length>1||S.push(g2(p[T],I,"x"))}),(t===void 0||t.includes("y"))&&c.forEach(({axisId:T,dataIndex:I})=>{!e&&S.length>1||S.push(g2(g[T],I,"y"))}),(t===void 0||t.includes("rotation"))&&d.forEach(({axisId:T,dataIndex:I})=>{!e&&S.length>1||S.push(g2(b[T],I,"rotation"))}),Object.keys(f).filter(Xb).forEach(T=>{const I=f[T];return I?I.seriesOrder.forEach(R=>{var D;const P=I.series[R],B=P.xAxisId??r.id,O=P.yAxisId??i.id,C=S.findIndex(({axisDirection:V,axisId:L})=>V==="x"&&L===B||V==="y"&&L===O);if(C>=0){const V="zAxisId"in P?P.zAxisId:x[0],{dataIndex:L}=S[C],M=((D=A[T])==null?void 0:D.call(A,P,p[B],g[O],V?y[V]:void 0)(L))??"",F=P.data[L]??null,q=P.valueFormatter(F,{dataIndex:L}),X=Xi(P.label,"tooltip")??null;S[C].seriesItems.push({seriesId:R,color:M,value:F,formattedValue:q,formattedLabel:X,markType:P.labelMarkType})}}):[]}),Object.keys(f).filter(eA).forEach(T=>{const I=f[T];return I?I.seriesOrder.forEach(R=>{var C;const P=I.series[R],B=P.rotationAxisId??(a==null?void 0:a.id),O=S.findIndex(({axisDirection:D,axisId:V})=>D==="rotation"&&V===B);if(O>=0){const{dataIndex:D}=S[O],V=((C=A[T])==null?void 0:C.call(A,P)(D))??"",L=P.data[D]??null,M=P.valueFormatter(L,{dataIndex:D}),F=Xi(P.label,"tooltip")??null;S[O].seriesItems.push({seriesId:R,color:V,value:L,formattedValue:M,formattedLabel:F,markType:P.labelMarkType})}}):[]}),e?S:S.length===0?S[0]:null}function hoe(n){return foe(H({},n,{multipleAxes:!0}))}function poe(n){const e=_y(n.classes),t=hoe();return t===null?null:v.jsx(kw,{sx:n.sx,className:e.paper,children:t.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>v.jsxs(Nw,{className:e.table,children:[a!=null&&!i.hideTooltip&&v.jsx(ne,{component:"caption",children:s}),v.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:v.jsxs(Lw,{className:e.row,children:[v.jsxs(bd,{className:jt(e.labelCell,e.cell),component:"th",children:[v.jsx("div",{className:e.markContainer,children:v.jsx(h1,{type:g,color:d,className:e.mark})}),p||null]}),v.jsx(bd,{className:jt(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function goe(n){let e,t;const r=()=>{t=null,n(...e)};function i(...a){e=a,t||(t=requestAnimationFrame(r))}return i.clear=()=>{t&&(cancelAnimationFrame(t),t=null)},i}function moe(){const n=bn(),e=ft(n,Uk),t=ft(n,iu);return e!==void 0?"polar":t!==void 0?"cartesian":"none"}const yoe=["trigger","classes","children"],voe=()=>!1,xoe=Pe(X3,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function woe(n){const e=xt({props:n,name:"MuiChartsTooltipContainer"}),{trigger:t="axis",classes:r,children:i}=e,a=Be(e,yoe),s=nA(),o=_y(r),c=soe(),d=coe(),f=N.useRef(null),p=Z3(()=>({x:0,y:0})),g=moe(),y=bn(),x=ft(y,t==="axis"?g==="polar"&&doe||g==="cartesian"&&jre||voe:Lre);N.useEffect(()=>{const I=s.current;if(I===null)return()=>{};const R=goe(()=>{var B;return(B=f.current)==null?void 0:B.update()}),P=B=>{p.current={x:B.clientX,y:B.clientY},R()};return I.addEventListener("pointerdown",P),I.addEventListener("pointermove",P),()=>{I.removeEventListener("pointerdown",P),I.removeEventListener("pointermove",P),R.clear()}},[s,p]);const b=N.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,S=(c==null?void 0:c.pointerType)==="touch"||!d,T=N.useMemo(()=>[{name:"offset",options:{offset:()=>S?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,S]);return t==="none"?null:v.jsx(PN,{children:x&&v.jsx(xoe,H({className:o==null?void 0:o.root,open:x,placement:A?"right-start":"top",popperRef:f,anchorEl:b,modifiers:T},a,{children:i}))})}function b6(n){const{classes:e,trigger:t="axis"}=n,r=_y(e);return v.jsx(woe,H({},n,{classes:e,children:t==="axis"?v.jsx(poe,{classes:r}):v.jsx(ioe,{classes:r})}))}function _oe(n){return Rt("MuiChartsLabel",n)}Ot("MuiChartsLabel",["root"]);const boe=n=>vt({root:["root"]},_oe,n.classes),Aoe=["children","className","classes"],Eoe=g6("MuiChartsLabel",{classesResolver:boe},function(e,t){const{children:r,className:i,classes:a}=e,s=Be(e,Aoe);return v.jsx("span",H({className:jt(a==null?void 0:a.root,i),ref:t},s,{children:r}))}),Soe=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function Toe(n){return Rt("MuiChartsLegend",n)}const Coe=n=>{const{classes:e,direction:t}=n;return vt({root:["root",t],item:["item"],mark:["mark"],label:["label"],series:["series"]},Toe,e)},k3=Ot("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Ioe=["slots","slotProps"],Doe=["ownerState"],Roe=(n,e,t,r)=>{function i(a,s){var P;const o=xt({props:a,name:n}),c=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},d=J3(c,o),f=d,{slots:p,slotProps:g}=f,y=Be(f,Ioe),x=Qc(),b=(P=t.classesResolver)==null?void 0:P.call(t,d,x),A=(p==null?void 0:p[e])??r,S=t.propagateSlots&&!(p!=null&&p[e]),T=St({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},y,{classes:b},S&&{slots:p,slotProps:g}),ownerState:{}}),I=Be(T,Doe),R=H({},I);for(const B of t.omitProps??[])delete R[B];return v.jsx(A,H({},R,{ref:s}))}return N.forwardRef(i)},Ooe=["direction","onItemClick","className","classes"],Moe=Pe("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${k3.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${k3.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),A6=Roe("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Coe},N.forwardRef(function(e,t){const r=kae(),{onItemClick:i,className:a,classes:s}=e,o=Be(e,Ooe);if(r.items.length===0)return null;const c=i?"button":"div";return v.jsx(Moe,H({className:jt(s==null?void 0:s.root,a),ref:t},o,{ownerState:e,children:r.items.map((d,f)=>v.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:v.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,Soe(d),f):void 0,children:[v.jsx(h1,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),v.jsx(Eoe,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function Poe(n){return Rt("MuiChartsAxisHighlight",n)}Ot("MuiChartsAxisHighlight",["root"]);const p1=Pe("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function koe(n){const{type:e,classes:t}=n,{left:r,width:i}=Aa(),a=bn(),s=ft(a,Gre),o=ft(a,Qi);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=l1(p),y=e==="band"&&d!==null&&Qa(p);return v.jsxs(N.Fragment,{children:[y&&p(d)!==void 0&&v.jsx(p1,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(p1,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Noe(n){const{type:e,classes:t}=n,{top:r,height:i}=Aa(),a=bn(),s=ft(a,$re),o=ft(a,Ki);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=l1(p),y=e==="band"&&d!==null&&Qa(p);return v.jsxs(N.Fragment,{children:[y&&p(d)!==void 0&&v.jsx(p1,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(p1,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Loe=()=>vt({root:["root"]},Poe);function Boe(n){const{x:e,y:t}=n,r=Loe();return v.jsxs(N.Fragment,{children:[e&&v.jsx(Noe,{type:e,classes:r}),t&&v.jsx(koe,{type:t,classes:r})]})}function Foe(n){return Rt("MuiBarElement",n)}const Voe=Ot("MuiBarElement",["root","highlighted","faded","series"]),joe=n=>{const{classes:e,id:t,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${t}`,r&&"highlighted",i&&"faded"]};return vt(a,Foe,e)};function Uoe(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const E6=(n,e)=>{const{instance:t}=Ul(),r=N.useRef(!1),i=N.useCallback(()=>{r.current=!0,t.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[t,n.type,n.seriesId,n.dataIndex]),a=N.useCallback(()=>{r.current=!1,t.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.clearHighlight()},[t,n.type,n.seriesId,n.dataIndex]);return N.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:Uoe}},Hoe=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function zoe(n){const{ownerState:e}=n,t=Be(n,Hoe),r=Xae(n);return v.jsx("rect",H({},t,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const $oe=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function Goe(n){const{id:e,dataIndex:t,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y,yOrigin:x,width:b,height:A}=n,S=Be(n,$oe),T=E6({type:"bar",seriesId:e,dataIndex:t}),{isFaded:I,isHighlighted:R}=Yk({seriesId:e,dataIndex:t}),P={id:e,dataIndex:t,classes:r,color:i,isFaded:I,isHighlighted:R},B=joe(P),O=(a==null?void 0:a.bar)??zoe,C=St({elementType:O,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:S,additionalProps:H({},T,{id:e,dataIndex:t,color:i,x:p,xOrigin:g,y,yOrigin:x,width:b,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:B.root,ownerState:P});return v.jsx(O,H({},C))}function Woe(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height),s=Qt(n.borderRadius,e.borderRadius);return o=>({x:t(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function Yoe(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return np({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:Woe,transformProps:t=>({d:Xoe(n.hasNegative,n.hasPositive,n.layout,t.x,t.y,t.width,t.height,n.xOrigin,n.yOrigin,t.borderRadius)}),applyProps(t,{d:r}){r&&t.setAttribute("d",r)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function qoe(n){const{maskId:e,x:t,y:r,width:i,height:a,skipAnimation:s}=n,{ref:o,d:c}=Yoe({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:t,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:v.jsx("clipPath",{id:e,children:v.jsx("path",{ref:o,d:c})})}function Xoe(n,e,t,r,i,a,s,o,c,d){if(t==="vertical"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(n)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(t==="horizontal"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(n)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function Koe(n){return Rt("MuiBarLabel",n)}const m2=Ot("MuiBarLabel",["root","highlighted","faded","animate"]),Qoe=n=>{const{classes:e,seriesId:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return vt(s,Koe,e)},Zoe=n=>{const{barLabel:e,value:t,dataIndex:r,seriesId:i,height:a,width:s}=n;return e==="value"?t?t==null?void 0:t.toString():null:e({seriesId:i,dataIndex:r,value:t},{bar:{height:a,width:s}})},Joe=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],ele=Pe("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,e)=>[{[`&.${m2.faded}`]:e.faded},{[`&.${m2.highlighted}`]:e.highlighted},e.root]})(({theme:n})=>{var e,t,r,i;return H({},(e=n==null?void 0:n.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(t=n.vars||n)==null?void 0:t.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${m2.faded}`]:{opacity:.3}})});function tle(n){const e=xt({props:n,name:"MuiBarLabel"}),t=Be(e,Joe),r=Qae(e);return v.jsx(ele,H({},t,r))}const nle=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],rle=["ownerState"];function ile(n){const{seriesId:e,classes:t,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,value:x,skipAnimation:b,layout:A}=n,S=Be(n,nle),{isFaded:T,isHighlighted:I}=Yk({seriesId:e,dataIndex:i}),R={seriesId:e,classes:t,color:r,isFaded:T,isHighlighted:I,dataIndex:i,skipAnimation:b,layout:A},P=Qoe(R),B=(s==null?void 0:s.barLabel)??tle,O=St({elementType:B,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},S,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,className:P.root}),ownerState:R}),{ownerState:C}=O,D=Be(O,rle);if(!a)return null;const V=Zoe({barLabel:a,value:x,dataIndex:i,seriesId:e,height:y,width:g});return V?v.jsx(B,H({},D,C,{children:V})):null}function ale(n){return Rt("MuiBar",n)}Ot("MuiBar",["root","series","seriesLabels"]);const S6=n=>vt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},ale,n),sle=["bars","skipAnimation"];function ole(n){const{bars:e,skipAnimation:t}=n,r=Be(n,sle),i=S6();return v.jsx(N.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>v.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:y,width:x,height:b,layout:A})=>v.jsx(ile,H({seriesId:a,dataIndex:p,value:y,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:x,height:b,skipAnimation:t??!1,layout:A??"vertical"},r),p))},a))})}function T6(n){const e=bn(),t=ft(e,ZJ);return n||t}function lle(){const n=bn();return ft(n,pk)}const y2=(n,e)=>{const t=`${n}-axis`,r=`${n}Axis`;return e===(n==="x"?wb:_b)?`The first \`${r}\``:`The ${t} with id "${e}"`};function cle(n,e,t,r,i,a,s){const o=i[r],c=s[a],d=n?o:c,f=n?c:o,p=n?r:a,g=n?a:r,y=n?"x":"y",x=n?"y":"x";if(!r1(d))throw new Error(`MUI X Charts: ${y2(y,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${y2(y,p)} should have data property.`);if(r1(f)||qb(f))throw new Error(`MUI X Charts: ${y2(x,g)} should be a continuous type to display the bar series of id "${e}".`)}function ule(n,e,t){const r=bae()??{series:{},stackingGroups:[]},i=Po().xAxisIds[0],a=Hl().yAxisIds[0],s=Jb(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const y=n.left,x=n.left+n.width,b=n.top,A=n.top+n.height;return p.map(S=>{const T=o[S].xAxisId??i,I=o[S].yAxisId??a,R=e[T],P=t[I],B=o[S].layout==="vertical";cle(B,S,o[S],T,e,I,t);const O=B?R:P,C=R.scale,D=P.scale,V=Fk(o[S],e[T],t[I]),L=O.scale.bandwidth(),{barWidth:M,offset:F}=dle({bandWidth:L,numberOfGroups:c.length,gapRatio:O.barGapRatio}),q=g*(M+F),{stackedData:X,data:W,layout:G,minBarSize:Q}=o[S],Z=O.data.map((de,ge)=>{if(W[ge]==null)return null;const be=X[ge].map(pe=>B?D(pe):C(pe)),ke=Math.round(Math.min(...be)),he=Math.round(Math.max(...be)),Se=o[S].stack,{barSize:Ae,startCoordinate:Fe}=fle(B,ke,he,W[ge],Q),re={seriesId:S,dataIndex:ge,layout:G,x:B?C(de)+q:Fe,y:B?Fe:D(de)+q,xOrigin:C(0)??0,yOrigin:D(0)??0,height:B?Ae:M,width:B?M:Ae,color:V(ge),value:W[ge],maskId:`${s}_${Se||S}_${g}_${ge}`};if(re.x>x||re.x+re.width<y||re.y>A||re.y+re.height<b)return null;d[re.maskId]||(d[re.maskId]={id:re.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:re.layout,xOrigin:C(0),yOrigin:D(0),x:0,y:0});const ye=d[re.maskId];return ye.width=re.layout==="vertical"?re.width:ye.width+re.width,ye.height=re.layout==="vertical"?ye.height+re.height:re.height,ye.x=Math.min(ye.x===0?1/0:ye.x,re.x),ye.y=Math.min(ye.y===0?1/0:ye.y,re.y),ye.hasNegative=ye.hasNegative||(re.value??0)<0,ye.hasPositive=ye.hasPositive||(re.value??0)>0,re}).filter(de=>de!==null);return{seriesId:S,data:Z}})}),masksData:Object.values(d)}}function dle({bandWidth:n,numberOfGroups:e,gapRatio:t}){if(t===0)return{barWidth:n/e,offset:0};const r=n/(e+(e-1)*t),i=t*r;return{barWidth:r,offset:i}}function fle(n,e,t,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=t-e<i,s=a?i:t-e,o=n&&r>=0,c=!n&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:t-s}:{barSize:s,startCoordinate:e}}const hle=["skipAnimation","onItemClick","borderRadius","barLabel"],ple=Pe("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${Voe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function gle(n){const{skipAnimation:e,onItemClick:t,borderRadius:r,barLabel:i}=n,a=Be(n,hle),s=lle(),o=T6(s||e),{xAxis:c}=Po(),{yAxis:d}=Hl(),{completedData:f,masksData:p}=ule(Aa(),c,d),g=!r||r<=0,y=S6();return v.jsxs(ple,{className:y.root,children:[!g&&p.map(({id:x,x:b,y:A,xOrigin:S,yOrigin:T,width:I,height:R,hasPositive:P,hasNegative:B,layout:O})=>v.jsx(qoe,{maskId:x,borderRadius:r,hasNegative:B,hasPositive:P,layout:O,x:b,y:A,xOrigin:S,yOrigin:T,width:I,height:R,skipAnimation:o??!1},x)),f.map(({seriesId:x,data:b})=>v.jsx("g",{"data-series":x,className:y.series,children:b.map(({dataIndex:A,color:S,maskId:T,layout:I,x:R,xOrigin:P,y:B,yOrigin:O,width:C,height:D})=>{const V=v.jsx(Goe,H({id:x,dataIndex:A,color:S,skipAnimation:o??!1,layout:I??"vertical",x:R,xOrigin:P,y:B,yOrigin:O,width:C,height:D},a,{onClick:t&&(L=>{t(L,{type:"bar",seriesId:x,dataIndex:A})})}),A);return g?V:v.jsx("g",{clipPath:`url(#${T})`,children:V},A)})},x)),i&&v.jsx(ole,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const mle=["message"],yle=Pe("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function vle(n){const{message:e}=n,t=Be(n,mle),{top:r,left:i,height:a,width:s}=Aa(),{localeText:o}=Jk();return v.jsx(yle,H({x:i+s/2,y:r+a/2},t,{children:e??o.loading}))}const xle=["message"],wle=Pe("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function _le(n){const{message:e}=n,t=Be(n,xle),{top:r,left:i,height:a,width:s}=Aa(),{localeText:o}=Jk();return v.jsx(wle,H({x:i+s/2,y:r+a/2},t,{children:e??o.noData}))}function ble(){const n=yy();return Object.values(n).every(e=>{if(!e)return!0;const{series:t,seriesOrder:r}=e;return r.every(i=>t[i].data.length===0)})}function C6(n){var t,r,i,a;const e=ble();if(n.loading){const s=((t=n.slots)==null?void 0:t.loadingOverlay)??vle;return v.jsx(s,H({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??_le;return v.jsx(s,H({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const Ale=[ep,gf,pf,ou],Ele=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],Sle=n=>{var re,ye,pe,te,Ve;const{xAxis:e,yAxis:t,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:y,slotProps:x,skipAnimation:b,loading:A,layout:S,onItemClick:T,highlightedItem:I,onHighlightChange:R,borderRadius:P,barLabel:B,className:O}=n,C=Be(n,Ele),V=`${T0()}-clip-path`,L=S==="horizontal"||S===void 0&&r.some(we=>we.layout==="horizontal"),M=N.useMemo(()=>[{id:wb,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),F=N.useMemo(()=>[{id:_b,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),q=N.useMemo(()=>r.map(we=>H({type:"bar"},we,{layout:L?"horizontal":"vertical"})),[L,r]),X=L?void 0:M,W=N.useMemo(()=>e?L?e:e.map(we=>H({scaleType:"band"},we)):X,[X,L,e]),G=L?F:void 0,Q=N.useMemo(()=>t?L?t.map(we=>H({scaleType:"band"},we)):t:G,[G,L,t]),Z=H({},C,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:W,yAxis:Q,highlightedItem:I,onHighlightChange:R,disableAxisListener:((re=x==null?void 0:x.tooltip)==null?void 0:re.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:O,skipAnimation:b,plugins:Ale}),de={onItemClick:T,slots:y,slotProps:x,borderRadius:P,barLabel:B},ge={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},xe={clipPath:`url(#${V})`},be={id:V},ke={slots:y,slotProps:x,loading:A},he={slots:y,slotProps:x},Se=H({},L?{y:"band"}:{x:"band"},f),Ae={slots:y,slotProps:x};return{chartsWrapperProps:{sx:d,legendPosition:(pe=(ye=n.slotProps)==null?void 0:ye.legend)==null?void 0:pe.position,legendDirection:(Ve=(te=n.slotProps)==null?void 0:te.legend)==null?void 0:Ve.direction},chartContainerProps:Z,barPlotProps:de,gridProps:ge,clipPathProps:be,clipPathGroupProps:xe,overlayProps:ke,chartsAxisProps:he,axisHighlightProps:Se,legendProps:Ae,children:g}},Tle={baseButton:Ke,baseIconButton:di},Cle={},Ile=H({},Tle,Cle),Dle=N.createContext(null);function Rle(n){const{slots:e,slotProps:t={},defaultSlots:r,children:i}=n,a=N.useMemo(()=>({slots:H({},r,e),slotProps:t}),[r,e,t]);return v.jsx(Dle.Provider,{value:a,children:i})}const mo=11102230246251565e-32,si=134217729,Ole=(3+8*mo)*mo;function v2(n,e,t,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let y=0;if(p<n&&g<t)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[y++]=o);p<n&&g<t;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[y++]=o);for(;p<n;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[y++]=o);for(;g<t;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[y++]=o);return(a!==0||y===0)&&(i[y++]=a),y}function Mle(n,e){let t=e[0];for(let r=1;r<n;r++)t+=e[r];return t}function ip(n){return new Float64Array(n)}const Ple=(3+16*mo)*mo,kle=(2+12*mo)*mo,Nle=(9+64*mo)*mo*mo,ad=ip(4),N3=ip(8),L3=ip(12),B3=ip(16),Ai=ip(4);function Lle(n,e,t,r,i,a,s){let o,c,d,f,p,g,y,x,b,A,S,T,I,R,P,B,O,C;const D=n-i,V=t-i,L=e-a,M=r-a;R=D*M,g=si*D,y=g-(g-D),x=D-y,g=si*M,b=g-(g-M),A=M-b,P=x*A-(R-y*b-x*b-y*A),B=L*V,g=si*L,y=g-(g-L),x=L-y,g=si*V,b=g-(g-V),A=V-b,O=x*A-(B-y*b-x*b-y*A),S=P-O,p=P-S,ad[0]=P-(S+p)+(p-O),T=R+S,p=T-R,I=R-(T-p)+(S-p),S=I-B,p=I-S,ad[1]=I-(S+p)+(p-B),C=T+S,p=C-T,ad[2]=T-(C-p)+(S-p),ad[3]=C;let F=Mle(4,ad),q=kle*s;if(F>=q||-F>=q||(p=n-D,o=n-(D+p)+(p-i),p=t-V,d=t-(V+p)+(p-i),p=e-L,c=e-(L+p)+(p-a),p=r-M,f=r-(M+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=Nle*s+Ole*Math.abs(F),F+=D*f+M*o-(L*d+V*c),F>=q||-F>=q))return F;R=o*M,g=si*o,y=g-(g-o),x=o-y,g=si*M,b=g-(g-M),A=M-b,P=x*A-(R-y*b-x*b-y*A),B=c*V,g=si*c,y=g-(g-c),x=c-y,g=si*V,b=g-(g-V),A=V-b,O=x*A-(B-y*b-x*b-y*A),S=P-O,p=P-S,Ai[0]=P-(S+p)+(p-O),T=R+S,p=T-R,I=R-(T-p)+(S-p),S=I-B,p=I-S,Ai[1]=I-(S+p)+(p-B),C=T+S,p=C-T,Ai[2]=T-(C-p)+(S-p),Ai[3]=C;const X=v2(4,ad,4,Ai,N3);R=D*f,g=si*D,y=g-(g-D),x=D-y,g=si*f,b=g-(g-f),A=f-b,P=x*A-(R-y*b-x*b-y*A),B=L*d,g=si*L,y=g-(g-L),x=L-y,g=si*d,b=g-(g-d),A=d-b,O=x*A-(B-y*b-x*b-y*A),S=P-O,p=P-S,Ai[0]=P-(S+p)+(p-O),T=R+S,p=T-R,I=R-(T-p)+(S-p),S=I-B,p=I-S,Ai[1]=I-(S+p)+(p-B),C=T+S,p=C-T,Ai[2]=T-(C-p)+(S-p),Ai[3]=C;const W=v2(X,N3,4,Ai,L3);R=o*f,g=si*o,y=g-(g-o),x=o-y,g=si*f,b=g-(g-f),A=f-b,P=x*A-(R-y*b-x*b-y*A),B=c*d,g=si*c,y=g-(g-c),x=c-y,g=si*d,b=g-(g-d),A=d-b,O=x*A-(B-y*b-x*b-y*A),S=P-O,p=P-S,Ai[0]=P-(S+p)+(p-O),T=R+S,p=T-R,I=R-(T-p)+(S-p),S=I-B,p=I-S,Ai[1]=I-(S+p)+(p-B),C=T+S,p=C-T,Ai[2]=T-(C-p)+(S-p),Ai[3]=C;const G=v2(W,L3,4,Ai,B3);return B3[G-1]}function Qg(n,e,t,r,i,a){const s=(e-a)*(t-i),o=(n-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=Ple*d?c:-Lle(n,e,t,r,i,a,d)}const F3=Math.pow(2,-52),Zg=new Uint32Array(512);class g1{static from(e,t=Ule,r=Hle){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=t(o),a[2*s+1]=r(o)}return new g1(a)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let D=0;D<s;D++){const V=e[2*D],L=e[2*D+1];V<o&&(o=V),L<c&&(c=L),V>d&&(d=V),L>f&&(f=L),this._ids[D]=D}const p=(o+d)/2,g=(c+f)/2;let y,x,b;for(let D=0,V=1/0;D<s;D++){const L=x2(p,g,e[2*D],e[2*D+1]);L<V&&(y=D,V=L)}const A=e[2*y],S=e[2*y+1];for(let D=0,V=1/0;D<s;D++){if(D===y)continue;const L=x2(A,S,e[2*D],e[2*D+1]);L<V&&L>0&&(x=D,V=L)}let T=e[2*x],I=e[2*x+1],R=1/0;for(let D=0;D<s;D++){if(D===y||D===x)continue;const V=Vle(A,S,T,I,e[2*D],e[2*D+1]);V<R&&(b=D,R=V)}let P=e[2*b],B=e[2*b+1];if(R===1/0){for(let L=0;L<s;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];Ad(this._ids,this._dists,0,s-1);const D=new Uint32Array(s);let V=0;for(let L=0,M=-1/0;L<s;L++){const F=this._ids[L],q=this._dists[F];q>M&&(D[V++]=F,M=q)}this.hull=D.subarray(0,V),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Qg(A,S,T,I,P,B)<0){const D=x,V=T,L=I;x=b,T=P,I=B,b=D,P=V,B=L}const O=jle(A,S,T,I,P,B);this._cx=O.x,this._cy=O.y;for(let D=0;D<s;D++)this._dists[D]=x2(e[2*D],e[2*D+1],O.x,O.y);Ad(this._ids,this._dists,0,s-1),this._hullStart=y;let C=3;r[y]=t[b]=x,r[x]=t[y]=b,r[b]=t[x]=y,i[y]=0,i[x]=1,i[b]=2,a.fill(-1),a[this._hashKey(A,S)]=y,a[this._hashKey(T,I)]=x,a[this._hashKey(P,B)]=b,this.trianglesLen=0,this._addTriangle(y,x,b,-1,-1,-1);for(let D=0,V,L;D<this._ids.length;D++){const M=this._ids[D],F=e[2*M],q=e[2*M+1];if(D>0&&Math.abs(F-V)<=F3&&Math.abs(q-L)<=F3||(V=F,L=q,M===y||M===x||M===b))continue;let X=0;for(let de=0,ge=this._hashKey(F,q);de<this._hashSize&&(X=a[(ge+de)%this._hashSize],!(X!==-1&&X!==r[X]));de++);X=t[X];let W=X,G;for(;G=r[W],Qg(F,q,e[2*W],e[2*W+1],e[2*G],e[2*G+1])>=0;)if(W=G,W===X){W=-1;break}if(W===-1)continue;let Q=this._addTriangle(W,M,r[W],-1,-1,i[W]);i[M]=this._legalize(Q+2),i[W]=Q,C++;let Z=r[W];for(;G=r[Z],Qg(F,q,e[2*Z],e[2*Z+1],e[2*G],e[2*G+1])<0;)Q=this._addTriangle(Z,M,G,i[M],-1,i[Z]),i[M]=this._legalize(Q+2),r[Z]=Z,C--,Z=G;if(W===X)for(;G=t[W],Qg(F,q,e[2*G],e[2*G+1],e[2*W],e[2*W+1])<0;)Q=this._addTriangle(G,M,W,-1,i[W],i[G]),this._legalize(Q+2),i[G]=Q,r[W]=W,C--,W=G;this._hullStart=t[M]=W,r[W]=t[Z]=M,r[M]=Z,a[this._hashKey(F,q)]=M,a[this._hashKey(e[2*W],e[2*W+1])]=W}this.hull=new Uint32Array(C);for(let D=0,V=this._hullStart;D<C;D++)this.hull[D]=V,V=r[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(Ble(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=Zg[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=t[s],y=t[e],x=t[f],b=t[p];if(Fle(i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*x],i[2*x+1],i[2*b],i[2*b+1])){t[e]=b,t[o]=g;const S=r[p];if(S===-1){let I=this._hullStart;do{if(this._hullTri[I]===p){this._hullTri[I]=e;break}I=this._hullPrev[I]}while(I!==this._hullStart)}this._link(e,S),this._link(o,r[s]),this._link(s,p);const T=d+(o+1)%3;a<Zg.length&&(Zg[a++]=T)}else{if(a===0)break;e=Zg[--a]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Ble(n,e){const t=n/(Math.abs(n)+Math.abs(e));return(e>0?3-t:1+t)/4}function x2(n,e,t,r){const i=n-t,a=e-r;return i*i+a*a}function Fle(n,e,t,r,i,a,s,o){const c=n-s,d=e-o,f=t-s,p=r-o,g=i-s,y=a-o,x=c*c+d*d,b=f*f+p*p,A=g*g+y*y;return c*(p*A-b*y)-d*(f*A-b*g)+x*(f*y-p*g)<0}function Vle(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=(d*f-o*p)*g,x=(s*p-c*f)*g;return y*y+x*x}function jle(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=n+(d*f-o*p)*g,x=e+(s*p-c*f)*g;return{x:y,y:x}}function Ad(n,e,t,r){if(r-t<=20)for(let i=t+1;i<=r;i++){const a=n[i],s=e[a];let o=i-1;for(;o>=t&&e[n[o]]>s;)n[o+1]=n[o--];n[o+1]=a}else{const i=t+r>>1;let a=t+1,s=r;Oh(n,i,a),e[n[t]]>e[n[r]]&&Oh(n,t,r),e[n[a]]>e[n[r]]&&Oh(n,a,r),e[n[t]]>e[n[a]]&&Oh(n,t,a);const o=n[a],c=e[o];for(;;){do a++;while(e[n[a]]<c);do s--;while(e[n[s]]>c);if(s<a)break;Oh(n,a,s)}n[t+1]=n[s],n[s]=o,r-a+1>=s-t?(Ad(n,e,a,r),Ad(n,e,t,s-1)):(Ad(n,e,t,s-1),Ad(n,e,a,r))}}function Oh(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Ule(n){return n[0]}function Hle(n){return n[1]}const V3=1e-6;class Nc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e=+e,t=+t,r=+r;const i=e+r,a=t;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>V3||Math.abs(this._y1-a)>V3)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Bw{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class zle{constructor(e,[t,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b=0,A=0,S=r.length,T,I;b<S;b+=3,A+=2){const R=r[b]*2,P=r[b+1]*2,B=r[b+2]*2,O=e[R],C=e[R+1],D=e[P],V=e[P+1],L=e[B],M=e[B+1],F=D-O,q=V-C,X=L-O,W=M-C,G=(F*W-q*X)*2;if(Math.abs(G)<1e-9){if(a===void 0){a=s=0;for(const Z of t)a+=e[Z*2],s+=e[Z*2+1];a/=t.length,s/=t.length}const Q=1e9*Math.sign((a-O)*W-(s-C)*X);T=(O+L)/2-Q*W,I=(C+M)/2+Q*X}else{const Q=1/G,Z=F*F+q*q,de=X*X+W*W;T=O+(W*Z-q*de)*Q,I=C+(F*de-X*Z)*Q}o[A]=T,o[A+1]=I}let c=t[t.length-1],d,f=c*4,p,g=e[2*c],y,x=e[2*c+1];i.fill(0);for(let b=0;b<t.length;++b)c=t[b],d=f,p=g,y=x,f=c*4,g=e[2*c],x=e[2*c+1],i[d+2]=i[f]=y-x,i[d+3]=i[f+1]=g-p}render(e){const t=e==null?e=new Nc:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const y=Math.floor(f/3)*2,x=Math.floor(g/3)*2,b=s[y],A=s[y+1],S=s[x],T=s[x+1];this._renderSegment(b,A,S,T,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],y=s[p+1],x=c*4,b=this._project(g,y,o[x+2],o[x+3]);b&&this._renderSegment(g,y,b[0],b[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Nc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=t==null?t=new Nc:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&t.lineTo(i[s],i[s+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new Bw;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,a){let s;const o=this._regioncode(e,t),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,t),a.lineTo(r,i)):(s=this._clipSegment(e,t,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,t,r){return t=+t,t!==t||(r=+r,r!==r)?!1:this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=t.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(t[a]===i[o]&&t[a+1]===i[o+1]&&t[(a+2)%s]===i[(o+c-2)%c]&&t[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(t[d*2],t[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const r=t.length;let i=null,a,s,o=t[r-2],c=t[r-1],d,f=this._regioncode(o,c),p,g=0;for(let y=0;y<r;y+=2)if(a=o,s=c,o=t[y],c=t[y+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let x,b,A,S,T;if(d===0){if((x=this._clipSegment(a,s,o,c,d,f))===null)continue;[b,A,S,T]=x}else{if((x=this._clipSegment(o,c,a,s,f,d))===null)continue;[S,T,b,A]=x,p=g,g=this._edgecode(b,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(b,A):i=[b,A]}p=g,g=this._edgecode(S,T),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(S,T):i=[S,T]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,r,i,a,s){const o=a<s;for(o&&([e,t,r,i,a,s]=[r,i,e,t,s,a]);;){if(a===0&&s===0)return o?[r,i,e,t]:[e,t,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-t)/(i-t),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-t)/(i-t),d=this.ymin):f&2?(d=t+(i-t)*(this.xmax-e)/(r-e),c=this.xmax):(d=t+(i-t)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,t=d,a=this._regioncode(e,t)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,a,s){let o=Array.from(t),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,r,i,a){for(;t!==r;){let s,o;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,t,r,i){let a=1/0,s,o,c;if(i<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=t+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=t+(a=s)*i)}return[o,c]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}const $le=2*Math.PI,sd=Math.pow;function Gle(n){return n[0]}function Wle(n){return n[1]}function Yle(n){const{triangles:e,coords:t}=n;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((t[s]-t[i])*(t[a+1]-t[i+1])-(t[a]-t[i])*(t[s+1]-t[i+1])>1e-10)return!1}return!0}function qle(n,e,t){return[n+Math.sin(n+e)*t,e+Math.cos(n-e)*t]}class oA{static from(e,t=Gle,r=Wle,i){return new oA("length"in e?Xle(e,t,r,i):Float64Array.from(Kle(e,t,r,i)))}constructor(e){this._delaunator=new g1(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&Yle(e)){this.collinear=Int32Array.from({length:t.length/2},(g,y)=>y).sort((g,y)=>t[2*g]-t[2*y]||t[2*g+1]-t[2*y+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[t[2*c],t[2*c+1],t[2*d],t[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,y=t.length/2;g<y;++g){const x=qle(t[2*g],t[2*g+1],p);t[2*g]=x[0],t[2*g+1]=x[1]}this._delaunator=new g1(t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new zle(this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=t[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,t,r=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const i=r;let a;for(;(a=this._step(r,e,t))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,t,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=sd(t-d[e*2],2)+sd(r-d[e*2+1],2);const g=i[e];let y=g;do{let x=c[y];const b=sd(t-d[x*2],2)+sd(r-d[x*2+1],2);if(b<p&&(p=b,f=x),y=y%3===2?y-2:y+1,c[y]!==e)break;if(y=o[y],y===-1){if(y=a[(s[e]+1)%a.length],y!==x&&sd(t-d[y*2],2)+sd(r-d[y*2+1],2)<p)return y;break}}while(y!==g);return f}render(e){const t=e==null?e=new Nc:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const r=e==null?e=new Nc:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+t,c),e.arc(o,c,t,0,$le)}return r&&r.value()}renderHull(e){const t=e==null?e=new Nc:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Bw;return this.renderHull(e),e.value()}renderTriangle(e,t){const r=t==null?t=new Nc:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return t.moveTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.lineTo(i[c],i[c+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Bw;return this.renderTriangle(e,t),t.value()}}function Xle(n,e,t,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=n[s];a[s*2]=e.call(r,o,s,n),a[s*2+1]=t.call(r,o,s,n)}return a}function*Kle(n,e,t,r){let i=0;for(const a of n)yield e.call(r,a,i,n),yield t.call(r,a,i,n),++i}const by=({svgRef:n,params:e,store:t,instance:r})=>{var B;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=ft(t,Ro),{axis:c,axisIds:d}=ft(t,Ki),{axis:f,axisIds:p}=ft(t,Qi),g=ft(t,pk),{series:y,seriesOrder:x}=((B=ft(t,Ka))==null?void 0:B.scatter)??{},b=N.useRef({}),A=N.useRef(void 0),S=N.useRef(void 0),T=d[0],I=p[0];Wn(()=>{t.update(O=>O.voronoi.isVoronoiEnabled===!i?O:H({},O,{voronoi:{isVoronoiEnabled:!i}}))},[t,i]),Wn(()=>{if(g||x===void 0||y===void 0||i)return;b.current={};let O=[];x.forEach(C=>{const{data:D,xAxisId:V,yAxisId:L}=y[C],M=c[V??T].scale,F=f[L??I].scale,q=l1(M),X=l1(F),W=[],G=[];for(let Q=0;Q<D.length;Q+=1){const{x:Z,y:de}=D[Q],ge=q(Z),xe=X(de);r.isPointInside(ge,xe)&&(W.push(ge),W.push(xe),G.push(Q))}b.current[C]={seriesId:C,seriesIndexes:G,startIndex:O.length,endIndex:O.length+W.length},O=O.concat(W)}),A.current=new oA(O),S.current=void 0},[g,T,I,y,x,c,f,o,r,i]),N.useEffect(()=>{if(n.current===null||i)return;const O=n.current;function C(G){const Q=Tw(O,G);if(!r.isPointInside(Q.x,Q.y))return S.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(Q.x,Q.y,S.current);if(Z===void 0)return"no-point-found";S.current=Z;const de=Object.values(b.current).find(be=>2*Z>=be.startIndex&&2*Z<be.endIndex);if(de===void 0)return"no-point-found";const ge=(2*Z-b.current[de.seriesId].startIndex)/2,xe=b.current[de.seriesId].seriesIndexes[ge];if(a!==void 0){const be=A.current.points[2*Z],ke=A.current.points[2*Z+1];if((be-Q.x)**2+(ke-Q.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:de.seriesId,dataIndex:xe}}const D=r.addInteractionListener("moveEnd",G=>{var Q,Z;G.detail.activeGestures.pan||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),V=r.addInteractionListener("panEnd",G=>{var Q,Z;G.detail.activeGestures.move||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),L=r.addInteractionListener("quickPressEnd",G=>{var Q,Z;!G.detail.activeGestures.move&&!G.detail.activeGestures.pan&&((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),M=G=>{var ge,xe,be,ke,he,Se;const Q=C(G.detail.srcEvent);if(Q==="outside-chart"){(ge=r.cleanInteraction)==null||ge.call(r),(xe=r.clearHighlight)==null||xe.call(r);return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){(be=r.removeItemInteraction)==null||be.call(r),(ke=r.clearHighlight)==null||ke.call(r);return}const{seriesId:Z,dataIndex:de}=Q;(he=r.setItemInteraction)==null||he.call(r,{type:"scatter",seriesId:Z,dataIndex:de}),(Se=r.setHighlight)==null||Se.call(r,{seriesId:Z,dataIndex:de})},F=r.addInteractionListener("tap",G=>{const Q=C(G.detail.srcEvent);if(typeof Q!="string"&&s){const{seriesId:Z,dataIndex:de}=Q;s(G.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:de})}}),q=r.addInteractionListener("move",M),X=r.addInteractionListener("pan",M),W=r.addInteractionListener("quickPress",M);return()=>{F.cleanup(),q.cleanup(),D.cleanup(),X.cleanup(),V.cleanup(),W.cleanup(),L.cleanup()}},[n,f,c,a,s,i,o,r]);const R=Ue(()=>{t.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!0})}))}),P=Ue(()=>{t.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:R,disableVoronoi:P}}};by.getDefaultizedParams=({params:n})=>H({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(e=>e.type==="scatter")});by.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});by.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const I6=[ep,gf,pf,ou,by],Qle=["children","localeText","plugins","seriesConfig","slots","slotProps"],Zle=n=>{const e=xt({props:n,name:"MuiChartDataProvider"}),{children:t,localeText:r,plugins:i=I6,seriesConfig:a,slots:s,slotProps:o}=e,c=Be(e,Qle),d=Qc(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:t,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function D6(n){const{children:e,localeText:t,chartProviderProps:r,slots:i,slotProps:a}=Zle(n);return v.jsx(nae,H({},r,{children:v.jsx(ose,{localeText:t,children:v.jsx(Rle,{slots:i,slotProps:a,defaultSlots:Ile,children:e})})}))}function j3(n){const{isReversed:e,gradientId:t,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:v.jsx("linearGradient",{id:t,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:v.jsxs(N.Fragment,{children:[v.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),v.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const Jle=10;function U3(n){const{gradientUnits:e,isReversed:t,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=n,d=[c.min??0,c.max??100],f=d.map(s).filter(x=>x!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Qt(d[0],d[1]):Nb(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/Jle),y=`${d[0]}-${d[1]}-`;return v.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${t?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(x,b)=>{const A=p(b/g);if(A===void 0)return null;const S=s(A);if(S===void 0)return null;const T=t?1-S/i:S/i,I=o(A);return I===null?null:v.jsx("stop",{offset:T,stopColor:I,stopOpacity:1},y+b)})})}const ece=10,tce=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function w2(n){const{isReversed:e,gradientId:t,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Qt(a[0],a[1]):Nb(a[0],a[1]),o=ece,c=`${a[0]}-${a[1]}-`;return v.jsx("linearGradient",H({id:t},tce(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const y=r(g);return y===null?null:v.jsx("stop",{offset:p,stopColor:y,stopOpacity:1},c+f)})}))}function nce(){const{top:n,height:e,bottom:t,left:r,width:i,right:a}=Aa(),s=n+e+t,o=r+i+a,c=Nae(),d=Lae(),{xAxis:f,xAxisIds:p}=Po(),{yAxis:g,yAxisIds:y}=Hl(),{zAxis:x,zAxisIds:b}=tA(),A=y.filter(I=>g[I].colorMap!==void 0),S=p.filter(I=>f[I].colorMap!==void 0),T=b.filter(I=>x[I].colorMap!==void 0);return A.length===0&&S.length===0&&T.length===0?null:v.jsxs("defs",{children:[A.map(I=>{const R=c(I),P=d(I),{colorMap:B,scale:O,colorScale:C,reverse:D}=g[I];return(B==null?void 0:B.type)==="piecewise"?v.jsx(j3,{isReversed:!D,scale:O,colorMap:B,size:s,gradientId:R,direction:"y"},R):(B==null?void 0:B.type)==="continuous"?v.jsxs(N.Fragment,{children:[v.jsx(U3,{isReversed:!D,scale:O,colorScale:C,colorMap:B,size:s,gradientId:R,direction:"y"}),v.jsx(w2,{isReversed:D,colorScale:C,colorMap:B,gradientId:P})]},R):null}),S.map(I=>{const R=c(I),P=d(I),{colorMap:B,scale:O,reverse:C,colorScale:D}=f[I];return(B==null?void 0:B.type)==="piecewise"?v.jsx(j3,{isReversed:C,scale:O,colorMap:B,size:o,gradientId:R,direction:"x"},R):(B==null?void 0:B.type)==="continuous"?v.jsxs(N.Fragment,{children:[v.jsx(U3,{isReversed:C,scale:O,colorScale:D,colorMap:B,size:o,gradientId:R,direction:"x"}),v.jsx(w2,{isReversed:C,colorScale:D,colorMap:B,gradientId:P})]},R):null}),T.map(I=>{const R=d(I),{colorMap:P,colorScale:B}=x[I];return(P==null?void 0:P.type)==="continuous"?v.jsx(w2,{colorScale:B,colorMap:P,gradientId:R},R):null})]})}const rce=["children","className","title","desc"],ice=Pe("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),R6=N.forwardRef(function(e,t){const r=bn(),{width:i,height:a}=ft(r,pee),{width:s,height:o}=ft(r,SP),c=nA(),d=ei(c,t),f=xt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:y,desc:x}=f,b=Be(f,rce),A=a>0&&i>0;return v.jsxs(ice,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},b,{ref:d,children:[y&&v.jsx("title",{children:y}),x&&v.jsx("desc",{children:x}),v.jsx(nce,{}),A&&p]}))}),ace=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],O6=(n,e)=>{const t=n,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,disableAxisListener:S,highlightedItem:T,onHighlightChange:I,sx:R,title:P,xAxis:B,yAxis:O,zAxis:C,rotationAxis:D,radiusAxis:V,skipAnimation:L,seriesConfig:M,plugins:F,localeText:q,slots:X,slotProps:W,experimentalFeatures:G}=t,Q=Be(t,ace),Z=H({title:P,desc:f,sx:R,ref:e},Q);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:S,highlightedItem:T,onHighlightChange:I,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,xAxis:B,yAxis:O,zAxis:C,rotationAxis:D,radiusAxis:V,skipAnimation:L,width:r,height:i,localeText:q,seriesConfig:M,experimentalFeatures:G,plugins:F??I6,slots:X,slotProps:W},chartsSurfaceProps:Z,children:s}},sce=(n,e)=>n==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",oce=(n,e)=>{if(n==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},lce=Pe("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>ba(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:sce(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:oce(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function M6(n){const{children:e,sx:t,extendVertically:r}=n,i=nse(),a=bn(),{height:s}=ft(a,SP);return v.jsx(lce,{ref:i,ownerState:n,sx:t,extendVertically:r??s===void 0,children:e})}const _2=N.forwardRef(function(e,t){var I,R,P,B;const r=xt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:y,children:x}=Sle(r),{chartDataProviderProps:b,chartsSurfaceProps:A}=O6(a,t),S=((I=r.slots)==null?void 0:I.tooltip)??b6,T=(R=r.slots)==null?void 0:R.toolbar;return v.jsx(D6,H({},b,{children:v.jsxs(M6,H({},i,{children:[r.showToolbar&&T?v.jsx(T,H({},(P=r.slotProps)==null?void 0:P.toolbar)):null,!r.hideLegend&&v.jsx(A6,H({},y)),v.jsxs(R6,H({},A,{children:[v.jsx(Qse,H({},o)),v.jsxs("g",H({},d,{children:[v.jsx(gle,H({},s)),v.jsx(C6,H({},f)),v.jsx(Boe,H({},g))]})),v.jsx($se,H({},p)),v.jsx(lse,H({},c)),x]})),!r.loading&&v.jsx(S,H({},(B=r.slotProps)==null?void 0:B.tooltip))]}))}))}),cce=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function uce(n){return Rt("MuiPieArc",n)}Ot("MuiPieArc",["root","highlighted","faded","series"]);const dce=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${t}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return vt(s,uce,e)},fce=Pe("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,e)=>e.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${rA}ms`,transitionTimingFunction:qk})),hce=N.forwardRef(function(e,t){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:x,paddingAngle:b,skipAnimation:A}=e,S=Be(e,cce),T={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},I=dce(T),R=E6({type:"pie",seriesId:s,dataIndex:a}),P=Jae({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:x,paddingAngle:b,skipAnimation:A,ref:t});return v.jsx(fce,H({onClick:d,cursor:d?"pointer":"unset",ownerState:T,className:I.root,fill:T.color,opacity:T.isFaded?.3:1,filter:T.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":T.isHighlighted||void 0,"data-faded":T.isFaded||void 0},S,R,P))});function P6(n){const{id:e,data:t,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=n,{isFaded:f,isHighlighted:p}=Mae();return N.useMemo(()=>t.map((y,x)=>{const b={seriesId:e,dataIndex:x},A=p(b),S=!A&&f(b),T=H({additionalRadius:0},S&&r||A&&i||{}),I=Math.max(0,_d(T.paddingAngle??a)),R=Math.max(0,T.innerRadius??s),P=Math.max(0,T.outerRadius??c+T.additionalRadius),B=T.cornerRadius??d,O=T.arcLabelRadius??o??(R+P)/2;return H({},y,T,{dataIndex:x,isFaded:S,isHighlighted:A,paddingAngle:I,innerRadius:R,outerRadius:P,cornerRadius:B,arcLabelRadius:O})}),[d,s,c,a,o,t,r,i,f,p,e])}const pce=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function gce(n){const{slots:e,slotProps:t,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=n,y=Be(n,pce),x=P6({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const b=(e==null?void 0:e.pieArc)??hce;return v.jsx("g",H({},y,{children:x.map((A,S)=>v.jsx(b,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:S,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(T=>{p(T,{type:"pie",seriesId:o,dataIndex:S},A)})},t==null?void 0:t.pieArc),A.dataIndex))}))}const mce=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function yce(n){return Rt("MuiPieArcLabel",n)}const vce=Ot("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),xce=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return vt(s,yce,e)},wce=Pe("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:qk,[`&.${vce.animate}`]:{animationDuration:`${rA}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),_ce=N.forwardRef(function(e,t){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:y,skipAnimation:x}=e,b=Be(e,mce),S=xce({id:r,classes:i,isFaded:y,isHighlighted:g,skipAnimation:x}),T=tse({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:x,ref:t});return v.jsx(wce,H({className:S.root},b,T,{children:p}))}),bce=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],Ace=180/Math.PI;function Ece(n,e,t){var i;if(!n||(t.endAngle-t.startAngle)*Ace<e)return null;switch(n){case"label":return Xi(t.label,"arc");case"value":return(i=t.value)==null?void 0:i.toString();case"formattedValue":return t.formattedValue;default:return n(H({},t,{label:Xi(t.label,"arc")}))}}function Sce(n){const{arcLabel:e,arcLabelMinAngle:t=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:y,slots:x}=n,b=Be(n,bce),A=P6({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const S=(x==null?void 0:x.pieArcLabel)??_ce;return v.jsx("g",H({},b,{children:A.map(T=>v.jsx(S,H({startAngle:T.startAngle,endAngle:T.endAngle,paddingAngle:T.paddingAngle,innerRadius:T.innerRadius,outerRadius:T.outerRadius,arcLabelRadius:T.arcLabelRadius,cornerRadius:T.cornerRadius,id:c,color:T.color,isFaded:T.isFaded,isHighlighted:T.isHighlighted,formattedArcLabel:Ece(e,t,T),skipAnimation:g??!1},y==null?void 0:y.pieArcLabel),T.id??T.dataIndex))}))}function Rc(n,e){if(typeof n=="number")return n;if(n==="100%")return e;if(n.endsWith("%")){const t=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(t))return t*e/100}if(n.endsWith("px")){const t=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function H3(n,e){const{height:t,width:r}=e,{cx:i,cy:a}=n,s=Math.min(r,t)/2,o=Rc(i??"50%",r),c=Rc(a??"50%",t);return{cx:o,cy:c,availableRadius:s}}function Tce(n){return Rt("MuiPieChart",n)}Ot("MuiPieChart",["root","series","seriesLabels"]);const Cce=n=>vt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Tce,n);function Ice(n){const{skipAnimation:e,slots:t,slotProps:r,onItemClick:i}=n,a=wae(),{left:s,top:o,width:c,height:d}=Aa(),f=T6(e),p=Cce();if(a===void 0)return null;const{series:g,seriesOrder:y}=a;return v.jsxs("g",{children:[y.map(x=>{const{innerRadius:b,outerRadius:A,cornerRadius:S,paddingAngle:T,data:I,cx:R,cy:P,highlighted:B,faded:O}=g[x],{cx:C,cy:D,availableRadius:V}=H3({cx:R,cy:P},{width:c,height:d}),L=Rc(A??V,V),M=Rc(b??0,V);return v.jsx("g",{className:p.series,transform:`translate(${s+C}, ${o+D})`,"data-series":x,children:v.jsx(gce,{innerRadius:M,outerRadius:L,cornerRadius:S,paddingAngle:T,id:x,data:I,skipAnimation:f,highlighted:B,faded:O,onItemClick:i,slots:t,slotProps:r})},x)}),y.map(x=>{const{innerRadius:b,outerRadius:A,arcLabelRadius:S,cornerRadius:T,paddingAngle:I,arcLabel:R,arcLabelMinAngle:P,data:B,cx:O,cy:C}=g[x],{cx:D,cy:V,availableRadius:L}=H3({cx:O,cy:C},{width:c,height:d}),M=Rc(A??L,L),F=Rc(b??0,L),q=S===void 0?(M+F)/2:Rc(S,L);return v.jsx("g",{className:p.seriesLabels,transform:`translate(${s+D}, ${o+V})`,"data-series":x,children:v.jsx(Sce,{innerRadius:F,outerRadius:M??L,arcLabelRadius:q,cornerRadius:T,paddingAngle:I,id:x,data:B,skipAnimation:f,arcLabel:R,arcLabelMinAngle:P,slots:t,slotProps:r})},x)})]})}const Dce=[pf,ou],Rce=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],z3=N.forwardRef(function(e,t){var L,M,F,q,X,W,G,Q;const r=xt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:y,slotProps:x,onItemClick:b,loading:A,highlightedItem:S,onHighlightChange:T,className:I,showToolbar:R}=r,P=Be(r,Rce),B=TP(o,Uee),{chartDataProviderProps:O,chartsSurfaceProps:C}=O6(H({},P,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:B,colors:c,highlightedItem:S,onHighlightChange:T,className:I,skipAnimation:f,plugins:Dce}),t),D=(y==null?void 0:y.tooltip)??b6,V=(L=r.slots)==null?void 0:L.toolbar;return v.jsx(D6,H({},O,{children:v.jsxs(M6,{legendPosition:(F=(M=r.slotProps)==null?void 0:M.legend)==null?void 0:F.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[R&&V?v.jsx(V,H({},(W=r.slotProps)==null?void 0:W.toolbar)):null,!p&&v.jsx(A6,{direction:((Q=(G=r==null?void 0:r.slotProps)==null?void 0:G.legend)==null?void 0:Q.direction)??"vertical",slots:y,slotProps:x}),v.jsxs(R6,H({},C,{children:[v.jsx(Ice,{slots:y,slotProps:x,onItemClick:b}),v.jsx(C6,{loading:A,slots:y,slotProps:x}),g]})),!A&&v.jsx(D,H({trigger:"item"},x==null?void 0:x.tooltip))]})}))});function Oce(){const{loading:n,error:e,summary:t,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:o,topPublishers:c,statusDistribution:d}=RJ(),f=t&&(t.totalBooks>0||t.finishedBooks>0||t.readingBooks>0||t.tsundokuBooks>0||t.reReadingBooks>0);return v.jsxs(ie,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[v.jsx(G1,{title:"",subtitle:""}),v.jsxs(ie,{sx:{p:2},children:[n&&v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[v.jsx(y1,{size:20}),v.jsx(ne,{variant:"body2",children:"..."})]}),e&&v.jsx(ne,{color:"error",sx:{mb:2},children:e}),!n&&!e&&!f&&v.jsx(kn,{sx:{mb:2},children:v.jsxs(Nn,{sx:{textAlign:"center",py:4},children:[v.jsx(ne,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:" "}),v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})]})}),f&&v.jsxs(v.Fragment,{children:[v.jsxs(ie,{className:"stats-summary-grid",children:[v.jsx(kn,{"data-testid":"stats-total-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",children:""}),v.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.totalBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-tsundoku-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",children:""}),v.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.tsundokuBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-reading-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",children:""}),v.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.readingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-rereading-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",children:""}),v.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.reReadingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-finished-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",children:""}),v.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.finishedBooks)??"-"})]})})]}),!!t&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-status-pie",children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"h6",sx:{mb:1},children:""}),v.jsx(z3,{height:220,series:[{data:[{id:"tsundoku",label:"",value:(d==null?void 0:d.tsundoku)??0},{id:"reading",label:"",value:(d==null?void 0:d.reading)??0},{id:"reReading",label:"",value:(d==null?void 0:d.reReading)??0},{id:"finished",label:"",value:(d==null?void 0:d.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),v.jsx(Bc,{sx:{my:2}}),v.jsx(ne,{variant:"h6",sx:{mb:1},children:"12"}),v.jsx(kn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:v.jsx(Nn,{children:v.jsx(_2,{xAxis:[{scaleType:"band",data:(i??[]).map(p=>p.key)}],series:[{data:(i??[]).map(p=>p.count),label:""}],height:260})})}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[v.jsxs(ie,{children:[v.jsx(ne,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(kn,{"data-testid":"chart-monthly-added",children:v.jsx(Nn,{children:v.jsx(_2,{xAxis:[{scaleType:"band",data:(a??[]).map(p=>p.key)}],series:[{data:(a??[]).map(p=>p.count),label:"",color:"#42a5f5"}],height:220})})})]}),v.jsxs(ie,{children:[v.jsx(ne,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(kn,{"data-testid":"chart-monthly-memos",children:v.jsx(Nn,{children:v.jsx(_2,{xAxis:[{scaleType:"band",data:(s??[]).map(p=>p.key)}],series:[{data:(s??[]).map(p=>p.count),label:"",color:"#9c27b0"}],height:220})})})]})]}),v.jsx(Bc,{sx:{my:2}}),v.jsx(ne,{variant:"h6",sx:{mb:1},children:""}),!!(r!=null&&r.length)&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:v.jsx(Nn,{children:v.jsx(z3,{height:260,series:[{data:r.slice(0,6).map(p=>({id:p.tag,label:p.tag,value:p.totalCount})),innerRadius:40,paddingAngle:2}]})})}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(p=>v.jsx(ie,{children:v.jsx(kn,{"data-testid":`tag-stat-${p.tag}`,children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"subtitle1",sx:{fontWeight:600},children:p.tag}),v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[": ",p.bookCount," / : ",p.memoCount," / : ",p.totalCount]})]})})},p.tag)),(!r||r.length===0)&&!n&&v.jsx(ie,{children:v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})})]}),v.jsx(Bc,{sx:{my:2}}),v.jsx(ne,{variant:"h6",sx:{mb:1},children:""}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[((o==null?void 0:o.slice(0,10))??[]).map(p=>v.jsx(ie,{children:v.jsx(kn,{"data-testid":`author-top-${p.author}`,children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"subtitle1",sx:{fontWeight:600},children:p.author}),v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[": ",p.total]})]})})},p.author)),(!o||o.length===0)&&!n&&v.jsx(ie,{children:v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})})]}),v.jsx(ne,{variant:"h6",sx:{mb:1},children:""}),v.jsxs(ie,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(p=>v.jsx(ie,{children:v.jsx(kn,{"data-testid":`publisher-top-${p.publisher}`,children:v.jsxs(Nn,{children:[v.jsx(ne,{variant:"subtitle1",sx:{fontWeight:600},children:p.publisher}),v.jsxs(ne,{variant:"body2",color:"text.secondary",children:[": ",p.total]})]})})},p.publisher)),(!c||c.length===0)&&!n&&v.jsx(ie,{children:v.jsx(ne,{variant:"body2",color:"text.secondary",children:""})})]})]})]})]})}function Mce(){const n=nR({onSwipedLeft:()=>alert("!"),onSwipedRight:()=>alert("!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return v.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[v.jsx("h2",{children:"react-swipeable "}),v.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:""})]})}var Pce={};const Fw=()=>typeof process<"u"&&Pce?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,kce=()=>Fw()?"/project-01-bookmemo":"",Oa=n=>{const e=kce(),t=n.startsWith("/")?n:`/${n}`;return`${e}${t}`},Lc={MANIFEST:()=>Oa("/manifest.webmanifest"),SW_JS:()=>Oa("/sw.js"),VITE_SVG:()=>Oa("/vite.svg"),PAPER_TEXTURE:()=>Oa("/paper-texture.jpg"),ICON_192:()=>Oa("/icons/icon-192x192.png"),ICON_512:()=>Oa("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>Oa("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>Oa("/icons/apple-touch-icon-512x512.png"),ROOT:()=>Oa("/"),ADD:()=>Oa("/add"),SEARCH:()=>Oa("/search"),IS_PRODUCTION:Fw,IS_DEVELOPMENT:()=>!Fw()},k6=()=>{try{if(typeof Ci>"u"||!Ci.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(D){return console.warn("React context not available in usePWA:",D),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Lc.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,t]=N.useState(navigator.onLine),[r,i]=N.useState(null),[a,s]=N.useState(null),[o,c]=N.useState(!1),[d,f]=N.useState(!1),[p,g]=N.useState(0),[y,x]=N.useState(null);N.useEffect(()=>{const D=()=>t(!0),V=()=>t(!1);return window.addEventListener("online",D),window.addEventListener("offline",V),()=>{window.removeEventListener("online",D),window.removeEventListener("offline",V)}},[]),N.useEffect(()=>{if(typeof window>"u")return;const D=()=>{g(L=>L+1)},V=["click","scroll","keydown","touchstart"];return V.forEach(L=>{window.addEventListener(L,D,{passive:!0})}),()=>{V.forEach(L=>{window.removeEventListener(L,D)})}},[]),N.useEffect(()=>{if(typeof localStorage>"u")return;const D=Date.now(),V=localStorage.getItem("bookmemo_last_visit");if(V){if(D-parseInt(V)>1440*60*1e3){const M=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",M.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",D.toString()),x(D)},[]);const b=N.useCallback(async()=>{if(Lc.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const D=Lc.SW_JS(),V=await navigator.serviceWorker.register(D);return i(V),console.log("Service Worker registered:",V),V.addEventListener("updatefound",()=>{const L=V.installing;L&&L.addEventListener("statechange",()=>{L.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),V}catch(D){return console.error("Service Worker registration failed:",D),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);N.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const D=M=>{M.preventDefault(),s(M),c(!0)},V=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",D),window.addEventListener("appinstalled",V),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",D),window.removeEventListener("appinstalled",V)}},[]);const A=N.useCallback(async()=>{if(a){a.prompt();const{outcome:D}=await a.userChoice;console.log(D==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),S=N.useCallback(()=>{if(d||!o)return!1;const D=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),V=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return D>=1&&p>=5&&V<3},[d,o,p]),T=N.useCallback(()=>{if(d)return!1;const D=/iPad|iPhone|iPod/.test(navigator.userAgent),V=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return D&&V},[d]),I=N.useCallback(()=>{if(typeof localStorage>"u")return;const D=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",D.toString())},[]),R=N.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(D){return console.warn("Notification permission request failed:",D),"denied"}},[]),P=N.useCallback((D,V={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const L=Lc.ICON_192();return new Notification(D,{icon:L,badge:L,...V})}catch(L){return console.warn("Notification send failed:",L),null}},[]),B=N.useCallback(async()=>{r&&await r.update()},[r]),O=N.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const D=await caches.keys();await Promise.all(D.map(V=>caches.delete(V)))}catch(D){console.warn("Cache clear failed:",D)}},[]),C=N.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:y,shouldShowInstallPrompt:S(),shouldShowManualInstallGuide:T(),registerServiceWorker:b,installApp:A,requestNotificationPermission:R,sendNotification:P,checkForUpdates:B,clearCache:O,reloadApp:C,recordInstallPromptDismiss:I}},Nce=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:t,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=k6(),[c,d]=N.useState(!1),[f,p]=N.useState(!1),[g,y]=N.useState(!1),[x,b]=N.useState(!1);N.useEffect(()=>{t&&!r&&a?y(!0):t&&!r&&d(!0)},[t,r,a]),N.useEffect(()=>{s&&!r&&b(!0)},[s,r]),N.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),y(!1)}catch(B){console.error("Installation failed:",B)}},S=()=>{d(!1),o&&o()},T=()=>{y(!1),o&&o()},I=()=>{p(!1)},R=()=>{b(!1),o&&o()},P=[{icon:v.jsx(kN,{}),title:"",description:""},{icon:v.jsx(NN,{}),title:"",description:""},{icon:v.jsx(LN,{}),title:"",description:""}];return v.jsxs(v.Fragment,{children:[v.jsx(ld,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:v.jsx(za,{severity:"info",action:v.jsxs(ie,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(Ke,{color:"inherit",size:"small",startIcon:v.jsx(_T,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:""}),v.jsx(di,{"aria-label":"close",color:"inherit",size:"small",onClick:S,children:v.jsx(Sg,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:v.jsx(ne,{variant:"body2",children:"BookMemo"})})}),v.jsx(ld,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(ne,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx(di,{size:"small",onClick:T,sx:{mt:-.5},children:v.jsx(Sg,{})})]}),v.jsx(ne,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:""}),v.jsx(r0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:P.map((B,O)=>v.jsx(mn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(ie,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(Ke,{variant:"outlined",size:"small",onClick:T,children:""}),v.jsx(Ke,{variant:"contained",size:"small",startIcon:v.jsx(_T,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})}),v.jsx(ld,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:v.jsx(za,{severity:"warning",icon:v.jsx(BN,{}),action:v.jsx(di,{"aria-label":"close",color:"inherit",size:"small",onClick:I,children:v.jsx(Sg,{fontSize:"inherit"})}),sx:{width:"100%"},children:v.jsx(ne,{variant:"body2",children:""})})}),v.jsx(ld,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:I,children:v.jsx(za,{severity:"success",icon:v.jsx(FN,{}),sx:{width:"100%"},children:v.jsx(ne,{variant:"body2",children:""})})}),v.jsx(ld,{open:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(ie,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(ne,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx(di,{size:"small",onClick:R,sx:{mt:-.5},children:v.jsx(Sg,{})})]}),v.jsx(ne,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneBookMemo"}),v.jsxs(ie,{sx:{mb:2},children:[v.jsx(ne,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. "}),v.jsx(ne,{variant:"body2",sx:{mb:1,pl:2},children:"Safari"}),v.jsx(ne,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. "}),v.jsx(ne,{variant:"body2",sx:{mb:1,pl:2},children:""}),v.jsx(ne,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. "}),v.jsx(ne,{variant:"body2",sx:{pl:2},children:""})]}),v.jsx(r0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:P.map((B,O)=>v.jsx(mn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(ie,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(Ke,{variant:"outlined",size:"small",onClick:R,children:""}),v.jsx(Ke,{variant:"contained",size:"small",onClick:R,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},Lce=()=>{try{return!(typeof Ci>"u"||!Ci.useState||!Ci.useContext||typeof window>"u"||typeof navigator>"u")}catch(n){return console.warn("React context check failed:",n),!1}},Bce=n=>function(t){const[r,i]=Ci.useState(!1),[a,s]=Ci.useState(0),o=20,c=50;return Ci.useEffect(()=>{const d=()=>{if(Lce()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?v.jsx(n,{...t}):v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"..."})},Fce=eR({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}}),fo={saveError:(n,e="")=>{try{const t={timestamp:new Date().toISOString(),error:(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error",stack:(n==null?void 0:n.stack)||"",context:e,url:typeof window<"u"?window.location.href:"",userAgent:typeof navigator<"u"?navigator.userAgent:""},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(t),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error(" PERSISTENT ERROR LOG:",t),t}catch(t){console.error("Error saving error log:",t)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},Vce=()=>{typeof window>"u"||(window.addEventListener("error",n=>{fo.saveError(n.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",n=>{fo.saveError(n.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{fo.getErrors().length>0&&console.log(" Error logs available in localStorage: bookmemo_error_logs")}))};function od({children:n}){const{user:e,loading:t}=rr(),r=w1();return N.useEffect(()=>{!t&&!e&&console.warn(" Authentication required for:",r.pathname)},[e,t,r.pathname]),t?(console.log(" Loading authentication state..."),v.jsx("div",{children:"Loading..."})):e?n:(console.warn(" Unauthenticated access attempt, redirecting to login"),v.jsx(rR,{to:"/login"}))}function jce(){const n=C0(),e=w1(),[t,r]=N.useState(0);return N.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):e.pathname.startsWith("/mypage")?r(4):r(0)},[e.pathname]),v.jsxs(jN,{value:t,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[v.jsx(yh,{label:"",icon:v.jsx(UN,{}),"data-testid":"bottom-nav-list",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(yh,{label:"",icon:v.jsx(HN,{}),"data-testid":"bottom-nav-add",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(yh,{label:"",icon:v.jsx(G3,{}),"data-testid":"bottom-nav-search",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(yh,{label:"",icon:v.jsx(zN,{}),"data-testid":"bottom-nav-stats",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(yh,{label:"",icon:v.jsx($N,{}),"data-testid":"bottom-nav-mypage",sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function Uce(){const n=w1(),{user:e}=rr(),{setGlobalError:t}=N.useContext(ni),r=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!e;return N.useEffect(()=>{Vce()},[]),N.useEffect(()=>{const i=document.getElementById("app-scroll-container");i&&i.scrollTo(0,0)},[n.pathname]),N.useEffect(()=>{const i=c=>{console.error("Global error caught:",c.error),fo.saveError(c.error,"AppRoutes Global Error"),c.error&&c.error.message&&c.error.message.includes("404")?t&&t(""):t&&t("")},a=c=>{console.error("Unhandled promise rejection:",c.reason),fo.saveError(c.reason,"AppRoutes Unhandled Promise Rejection"),c.reason&&c.reason.message&&(c.reason.message.includes("404")||c.reason.message.includes("Failed to fetch")),t&&t("")},s=c=>{c.target&&c.target.src&&(console.error("Resource loading error:",c.target.src),fo.saveError(new Error(`Resource loading failed: ${c.target.src}`),"AppRoutes Resource Error"),(c.target.src.includes("sw.js")||c.target.src.includes("manifest.webmanifest"))&&t&&t(""))},o=c=>{c.target&&c.target.src&&c.target.src.includes("404")&&(console.error("404 Error detected:",c.target.src),fo.saveError(new Error(`404 Error: ${c.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),t&&t("SPA"))};return window.addEventListener("error",o,!0),window.addEventListener("error",i),window.addEventListener("unhandledrejection",a),window.addEventListener("error",s,!0),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",a),window.removeEventListener("error",s,!0)}},[t]),v.jsxs(v.Fragment,{children:[v.jsx(ie,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:r?0:{xs:"64px",sm:"72px"},background:`
            url('${Lc.PAPER_TEXTURE()}'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:v.jsxs(XN,{children:[v.jsx(so,{path:"/login",element:v.jsx(hj,{})}),v.jsx(so,{path:"/signup",element:v.jsx(pj,{})}),v.jsx(so,{path:"/",element:v.jsx(od,{children:v.jsx(bj,{})})}),v.jsx(so,{path:"/add",element:v.jsx(od,{children:v.jsx(v$,{})})}),v.jsx(so,{path:"/book/:id",element:v.jsx(od,{children:v.jsx(oJ,{})})}),v.jsx(so,{path:"/tags",element:v.jsx(od,{children:v.jsx(CJ,{})})}),v.jsx(so,{path:"/stats",element:v.jsx(od,{children:v.jsx(Oce,{})})}),v.jsx(so,{path:"/mypage",element:v.jsx(od,{children:v.jsx(Mce,{})})}),v.jsx(so,{path:"*",element:v.jsx(rR,{to:"/"})})]})}),!r&&v.jsx(jce,{})]})}function Hce(){return v.jsx(fj,{children:v.jsx(vj,{children:v.jsx(qN,{children:v.jsxs(tR,{theme:Fce,children:[v.jsx(VN,{}),v.jsx(zce,{}),v.jsx(Uce,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Lc.IS_DEVELOPMENT()&&v.jsx(Nce,{})]})})})})}function zce(){if(Lc.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=k6();return N.useEffect(()=>{e().catch(t=>{console.warn("Service Worker registration failed in PWAProvider:",t),fo.saveError(t,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),fo.saveError(e,"PWAProvider Hook Error"),null}}const $ce=Bce(Hce),Gce=eR({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});e5.createRoot(document.getElementById("root")).render(v.jsx(N.StrictMode,{children:v.jsx(tR,{theme:Gce,children:v.jsx($ce,{})})}));
